(()=>{"use strict";var __webpack_modules__={6301:(t,e,i)=>{i.d(e,{d:()=>s});var o,s={};s._binitImport=!1,s.useWebSquareLicense=!0,s.excludeSet=null,s.$integrity=function(t,e,i){if(void 0===t)return WebSquare.util&&WebSquare.util.watermark&&!WebSquare.$integiry.flag&&WebSquare.util.watermark("integrity check failed!!!"),WebSquare.$integiry.flag;!0===t?WebSquare.$integiry.passed.push(e):!1===t&&(WebSquare.$integiry.flag=!1,WebSquare.$integiry.failed.push({original:e,runtime:i}))},s.setFullViewInHtml=function(t,e,i){try{var o=!0===(i=i||{}).resizeOnce,r=null,a={width:window.innerWidth||document.body.clientWidth,height:window.innerHeight||document.body.clientHeight};if(null!==t&&"function"==typeof t){var n=t();if(null!==n&&"object"==typeof n&&n.baseHeight&&n.baseWidth){var l=a.width/n.baseWidth,h=a.height/n.baseHeight;r=l>h?h:l}}function p(){if(!s.onResizing){var e=null,i=window.innerWidth||document.body.clientWidth,o=window.innerHeight||document.body.clientHeight;if(null!==t&&"function"==typeof t){var r=t();if(null!==r&&"object"==typeof r&&r.baseHeight&&r.baseWidth){var a=i/r.baseWidth,n=o/r.baseHeight;e=a>n?n:a}}null!=e&&(s.onResizing=!0,s.zoomed(document.body,e),document.body.style.width=r.baseWidth+"px",document.body.style.height=r.baseHeight+"px",s.onResizing=!1,s.fullViewed=!0,s.fullViewRatio=e)}}function g(t){var e,i="body {-webkit-transform : scale("+t+");-moz-transform : scale("+t+");-ms-transform : scale("+t+");-o-transform : scale("+t+");transform : scale("+t+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+n.baseWidth+"px;height : "+n.baseHeight+"px;}",o=WebSquare.document.getElementsByTagName("head")[0];(s.fullViewClass=!0,s.fullViewClassCssText=i,s.fullViewRatio=t,WebSquare.core.browserCheck.ie)?((e=document.createElement("style")).setAttribute("type","text/css"),e.styleSheet.cssText=i,o.appendChild(e)):((e=WebSquare.document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(i)),o.appendChild(e))}s.fullViewed=!0;var d=window.WebSquareExternal&&WebSquareExternal.w2xPath||WebSquare.net.getParameter("w2xPath")||WebSquare.w2xPath||s.configurationJSON[0].WebSquare["welcome-file"]["@value"];if("string"==typeof d&&d.indexOf(e)>=0){s.fullViewRatio=r,g(r);var c=function(){WebSquare&&WebSquare.scriptSectionExcuteFlag&&"executed"===WebSquare.scriptSectionExcuteFlag&&(clearInterval(u),p(),o||WebSquare.getBody().event.addListener(window,"onresize",p))};c();var u=setInterval(c,70)}}catch(t){WebSquare.exception.printStackTrace(t)}},s.zoomed=function(t,e){if(WebSquare.core.browserCheck.moz&&t&&t.style)t.style.MozTransform="scale("+e+")",t.style.MozTransformOrigin="left top",s.fullViewRatio=e;else if(t&&t.style&&(t.style["-webkit-transform"]="scale("+e+")",t.style["-moz-transform"]="scale("+e+")",t.style["-ms-transform"]="scale("+e+")",t.style["-o-transform"]="scale("+e+")",t.style.transform="scale("+e+")",t.style["transform-origin"]="top left",s.fullViewRatio=e,s.fullViewClass)){s.fullViewClass=!1;for(var i=document.getElementsByTagName("style"),o=0;o<i.length;o++)if(i[o].innerHTML==s.fullViewClassCssText){document.getElementsByTagName("head")[0].removeChild(i[o]);break}}},s.globalEval=function(t,e){var i;return e||(i=s.configurationJSON[0].WebSquare.eval||s.configurationJSON[0].WebSquare.executeScript)&&(i=i["@value"]),s._globalEval(t,{type:i||e})},s._globalEval=function(t,e){if(t&&"string"==typeof t)try{if(null==e&&(e={}),s.fixErrorLineNumber&&"internal"==e.type||"script"===e.type){s.fixErrorLineNumber&&s.globalEvalArr.push(t);var i=document.createElement("script");i.type="text/javascript",i.charset="UTF-8",i.text=t,i.setAttribute("data-wqInternal","true"),(document.head||document.getElementsByTagName("head")[0]||document.documentElement).appendChild(i)}else window.execScript&&""!==t?window.execScript(t):new Function(t)()}catch(i){var o=[],r="\n<<Internal JavaScript Source Block"
;if(t)for(var a=t.split(WebSquare.scriptIdentifier),n=a.length>1?1:0,l=1,h=0;h<a.length;h++)if(""!=a[h]){var d=a[h].split("\n"),c=d[0]+"",u=c.indexOf('";');u>0&&(c=d[0].substring(0,u),d[0]=d[0].substring(u+2)),1===n?o.push("\n"+r+" ["+c+"] Start>>"):o.push("\n"+r+" Start>>");for(var p=0,g=d.length;p<g;p++)o.push("\n"),o.push("["),o.push(s.fillZero(l,4)),o.push("]"),o.push(d[p]),l++;1===n?o.push(r+" ["+c+"] End>>"):o.push(r+" End>>")}e.path&&o.push("\n","xml page url:",e.path),this.printStackTrace(i,"bootloader.globalEval:","* message     : "+i.message+o.join(""))}},s._isCache=function(t){var e=!1;if(null==s.importCache[t]?s.importCache[t]=t:e=t,!0===s.useWebSquareLicense){var i=t;if(i.indexOf("uiplugin.")>=0&&(i=(i=i.replace(".","/"))+i.substring(i.indexOf("/"))+".js",s.importCache[i]))return i;if(!s.incrementalChunkImport)for(var o=0;o<WebSquare.allPluginArr.length&&0==e;o++)if(WebSquare.allPluginArr[o]==i){e=i;break}}return e},s._getloadPath=function(t,e){var i;!0===s.useWebSquareLicense?t.indexOf("/")>-1?"engine"==t.split("/")[0]||"uiplugin"==t.split("/")[0]?(void 0===e&&s.printLog("bootloader.imports [engine/uiplugin]["+t+"]"),i=s.loadPath2(t)):(void 0===e&&s.printLog("bootloader.imports [ext]["+t+"]"),i=t):"function"!=typeof s.parseObjPath(t)&&(void 0===e&&s.printLog("bootloader.imports [object]["+t+"]"),i=s.loadPath2(t)):t.indexOf("/")>-1?i=t:"function"!=typeof s.parseObjPath(t)&&(i=s.loadPath(t));return i},s.importAsync=async function(t,e){var i,o=s._isCache(t);if(o)return s.importCache[o];var r,a=e&&!0===e.import;if(!0===s.useWebSquareLicense)try{var n=t;if(!0===s.useWebSquareLicense&&n.indexOf("uiplugin.")>=0&&(n=(n=n.replace(".","/"))+n.substring(n.indexOf("/"))+".js"),s.incrementalChunkImport&&WebSquare.allPluginArr.indexOf(n)>-1)for(;s.currentChunkNum<s.engineChunkNum&&!s.importCache[n];)s.importChunkPlugin(s.currentChunkNum++,s.engineChunkNum);else r=s._getloadPath(n),r=s.getEngineUri(r),i=a?WebSquare._dynamicImport(r):s.writeAsync(r)}catch(e){s.printStackTrace(e,"bootloader.imports ["+t+"]")}else try{r=s._getloadPath(t),r=s.getEngineUri(r),i=a?WebSquare._dynamicImport(r):s.writeAsync(r)}catch(e){s.printStackTrace(e,"bootloader.importAsync ["+t+"]")}return s.importCache[t]=i,await i},s.write=function(t,e,i){try{var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script");s.type="text/javascript",e&&(s.charset=e),s.src=t,i&&(s.onload=function(){i()}),o.appendChild(s),o=null}catch(t){this.printStackTrace(t,"bootloader.write")}},s.writeAsync=async function(t,e){try{return new Promise((function(i,o){var s=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.type="text/javascript",e&&(r.charset=e),r.src=WebSquare._getModuleSrc(t),r.onload=function(){i()},r.onerror=function(){o()},s.appendChild(r),s=null}))}catch(t){this.printStackTrace(t,"bootloader.write")}},s.importChunkPlugin=function(t,e){if(!0===s.useWebSquareLicense)try{if(t>=e)return!1;var i=WebSquare.baseServletURI+"javascriptPluginAll.wq?";e=e||1;WebSquare.engineType&&(i+=WebSquare.engineType),(i=i+"idx="+t+"&chunkNum="+e).length>3&&(i=i.indexOf(".wq")>=0?s.getEngineVersionPostfix(i):1==WebSquare.WebSquareEngineCache?s.getEngineCachePostfix(i):s.getRandomPostfix(i));var o=s.getXMLHTTPObject();return o.open("GET",i,!1),o.send(null),s.globalEval(o.responseText),!0}catch(e){"",this.printStackTrace(e,"bootloader.importChunkPlugin ["+t+"]")}},s.importPluginAll=async function(){var t=0;if(null!=s.importCache.ALL_PLUGIN)return t;if(s.importCache.ALL_PLUGIN="ALL_PLUGIN",!0===s.useWebSquareLicense)try{var e=WebSquare.baseServletURI+"javascriptPluginAll.wq";if(WebSquare.engineType&&(e=e+"?"+WebSquare.engineType.substring(0,WebSquare.engineType.length-1)),"/"!=e.charAt(0)&&0!=e.search(/http(s)?:\/\//)&&(e=WebSquare.baseServletURI+e),
e.length>3&&(e=e.indexOf(".wq")>=0?s.getEngineVersionPostfix(e):1==WebSquare.WebSquareEngineCache?s.getEngineCachePostfix(e):s.getRandomPostfix(e)),"all"===WebSquare.pluginCache){var i=s.loadUri(e);null==i||""==i?t=1:s.globalEval(i)}else WebSquare.startApplication=function(){},await s.writeAsync(e,void 0,(function(){s._afterEngineLoad(),window.WebSquareExternal&&!0===window.WebSquareExternal._onload&&WebSquare.startApplication()}))}catch(e){t=2,s.printLog("bootloader.importPluginAll module imports failure.")}return t},s.requires=function(t){try{"function"!=typeof s.parseObjPath(t)&&(1==WebSquare.hybridApp&&WebSquare.WebSquaredoc&&!0===s.useWebSquareLicense&&("string"!=typeof t||"uiplugin"!==t.slice(0,8)&&"engine"!==t.slice(0,6)||(t=s.getEngineUri("HybridPluginAll_ui_4.js"))),imports(t))}catch(t){s.printStackTrace(t,"bootloader.requires")}},s.requireAsync=async function(t){try{if("string"!=typeof t)return;if("uiplugin."===(t=t.wq_trim()).slice(0,9)||"engine."===t.slice(0,7))return WebSquare._loadModuleDynamic(t);var e=s.parseObjPath(t);e&&"{}"!==JSON.stringify(e)||await s.importAsync(t)}catch(t){s.printStackTrace(t,"bootloader.requires")}},s.inquires=async function(t){try{var e=s.parseObjPath(t),i=s.inquiresPath(t);"function"!=typeof e&&await s.importAsync(i)}catch(t){s.printStackTrace(t,"bootloader.inquires")}},s.inquiresPath=function(t){return WebSquare.sp5ResourcePath+"/"+t},s.parseObjPath=function(t,e){try{function l(t){if("object"!=typeof t)return!1;if(t===WebSquare||t===WebSquare.uiplugin)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var i=t.replace(/\//g,"."),o=null!=e?e:WebSquare,r="";r=i.startsWith("engine")?i.replace("engine.","").split("."):i.startsWith("control")?i.replace("control.","").split("."):i.startsWith("uiplugin.pivot.")?i.replace("uiplugin.pivot.","uiplugin.").split("."):i.split(".");for(var a=0,n=r.length;a<n&&l(o);a++)o=s.evalProp(r[a],o);return o}catch(t){this.printStackTrace(t,"bootloader.parseObjPath")}},s.loadPath=(o={},function(t){try{if(!o[t])if("js"===t.slice(-2))o[t]=t;else{var e=t.split(".");e[e.length]=e[e.length-1]+".js",o[t]=e.join("/")}return o[t]}catch(t){s.printStackTrace(t,"bootloader.loadPath")}}),s.loadPath2=function(t){try{return t}catch(t){this.printStackTrace(t,"bootloader.loadPath")}},s.evalProp=function(t,e){try{var i={};return e&&s.isDef(t,e)&&(i=e[t]),i}catch(t){this.printStackTrace(t,"bootloader.evalProp")}},s.loadUri=function(t){var e=null;try{if("false"===WebSquare.pluginCache)e=this.getText(t)||"";else if("all"===WebSquare.pluginCache)try{for(var i=self,o=0;null!=i.opener;)if(o++,i=i.opener,o>100)throw{message:"opener limit exceeded"};null==i.top[WebSquare.pluginCacheVariable]&&(i.top[WebSquare.pluginCacheVariable]={}),null==i.top[WebSquare.pluginCacheVariable][t]?(e=this.getText(t),i.top[WebSquare.pluginCacheVariable][t]=e.toString().slice(0)):e=i.top[WebSquare.pluginCacheVariable][t]}catch(i){e=this.getText(t)||""}else if(void 0===(e=s.PluginCache[t])){try{window.opener&&window.opener.WebSquare?null!=(e=window.opener.WebSquare.BootLoader.loadUri(t))&&""!=e||(e=this.getText(t)):window.parent!==window.self&&window.parent.WebSquare&&null!=(e=window.parent.WebSquare.BootLoader.loadUri(t))&&""!=e||(e=this.getText(t))}catch(i){e=this.getText(t)}null!=e&&""!=e&&s.setPluginCache(t,e)}}catch(t){this.printStackTrace(t,"bootloader.loadUri")}return e},s.getText=function(t){try{var e=t,i=this.getXMLHTTPObject();try{!function(t,e){try{t=s.getEngineUri(t),e.open("GET",t,!1)}catch(t){}}(t,i);var o=WebSquareExternalOptions.charset;if(o&&i.overrideMimeType("text/javascript; charset="+o),i.send(null),i.status>="400")return e.indexOf("uiplugin")>-1?s.printError("Plugin ["+e+"] Does not exist."):s.printError("Module ["+e+"] Does not exist."),i=null,null}catch(t){e.indexOf("uiplugin")>-1?s.printError("Plugin ["+e+"] Does not exist."):s.printError("Module ["+e+"] Does not exist.")}var r=i.responseText;return i=null,r}catch(e){this.printStackTrace(e,"bootloader.getText("+t+")")}
},s.getXMLHTTPObject=function(t){try{var e=null;try{s.useActiveXObject&&!0!==t?e=new ActiveXObject(s._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(t){this.printStackTrace(t,"bootloader.getXMLHTTPObject")}return void 0===e||null==e?(s.printError("This Browser does not support Ajax."),null):e}catch(t){this.printStackTrace(t,"bootloader.getXMLHTTPObject")}},s.isDef=function(t,e){try{return null==e&&(e=window),null!=e[t]&&void 0!==e[t]}catch(t){this.printStackTrace(t,"bootloader.isDef")}},s.printError=function(t){try{if(!0===WebSquare.skipLog)return;void 0!==WebSquare.logger&&void 0!==WebSquare.logger.printLog?WebSquare.logger.printLog("[WebSquare BootLoader Error]\n\n"+t):s.printLog("[WebSquare BootLoader Error]\n\n"+t)}catch(e){s.printLog("[WebSquare BootLoader Error]\n\n"+t)}},s.printStackTrace=function(t,e,i){if(!0!==WebSquare.skipLog){var o="";for(var r in t){var a=r+"               ";a=a.substring(0,15),o+="number"==r?a+":"+(65535&t[r])+"\n":a+":"+t[r]+"\n"}o=void 0===i?e+" Error occurs during the execution. \n\n"+o:e+" Error occurs during the execution.  \n"+i+"\n\n"+o;try{void 0!==WebSquare.logger&&void 0!==WebSquare.logger.printLog?(WebSquare.logger.printLog(o),t&&void 0===t.aleradyThrow&&(t.aleradyThrow="djshin")):s.printLog(o),!0===WebSquare.errorConsole&&console.error(o);var n=WebSquare.core.getConfiguration("/WebSquare/debug/@errorHandler"),l=WebSquare.util.getGlobalFunction(n);l&&l(t,t.message)}catch(t){s.printLog(o)}}},s.setPluginCache=function(t,e){s.PluginCache[t]=e},s.browserCheck=function(){return navigator.appName},s.engineLoadingMode={ie:1,moz:1,opera:1,android:1,iphone:1,blackberry:1,chrome:1,safari:1,mode:1},s.browserCheck.ie=null!=navigator.appName.match(/Explorer/i),s.browserCheck.ieAllVersion=null!=navigator.appName.match(/Explorer/i)||null!=navigator.userAgent.match(/Trident/i)||null!=navigator.userAgent.match(/MSIE/i),s.browserCheck.moz=null!=navigator.userAgent.match(/Firefox/i)||null!=navigator.userAgent.match(/Gecko/i)&&null==navigator.userAgent.match(/AppleWebKit/i)&&null==navigator.userAgent.match(/Trident/i),s.browserCheck.opera=null!=navigator.userAgent.match(/Opera/i),s.browserCheck.android=/Android/.test(navigator.userAgent),s.browserCheck.iphone=/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform),s.browserCheck.ipad=/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!window.MSStream,s.browserCheck.ipod=/iPod/.test(navigator.userAgent),s.browserCheck.blackberry=/BlackBerry/.test(navigator.userAgent),s.browserCheck.chrome=!s.browserCheck.ie&&/Chrome/.test(navigator.userAgent),s.browserCheck.chromeEdge=!s.browserCheck.ie&&/Chrome/.test(navigator.userAgent)&&/Edg/.test(navigator.userAgent),void 0!==navigator.vendor?s.browserCheck.safari=navigator.vendor.indexOf("Apple")>-1:s.browserCheck.safari=!1,s.browserCheck.ffox=/Firefox/.test(navigator.userAgent),s.browserCheck.spartan=/Edge/.test(navigator.userAgent),s.browserVersion=function(){try{if(s.browserCheck.ieAllVersion){if(document.documentMode)return document.documentMode+"";if("2"==navigator.appVersion.charAt(0))return"2";if("3"==navigator.appVersion.charAt(0))return"3";if("4"==navigator.appVersion.charAt(0))return-1!=navigator.appVersion.indexOf("MSIE 9")?"9":-1!=navigator.appVersion.indexOf("MSIE 8")?"8":-1!=navigator.appVersion.indexOf("MSIE 7")?"7":-1!=navigator.appVersion.indexOf("MSIE 6")?"6":-1!=navigator.appVersion.indexOf("MSIE 5.5")?"5.5":-1!=navigator.appVersion.indexOf("MSIE 5.0")?"5.0":"4";if("5"==navigator.appVersion.charAt(0))return"5"}else{if(2==navigator.appVersion.charAt(0))return"2";if(3==navigator.appVersion.charAt(0))return"3";if(4==navigator.appVersion.charAt(0))return"4";if(5==navigator.appVersion.charAt(0))return"6"}return""}catch(t){this.printStackTrace(t,"bootloader.browserVersion")}},s.printLog=function(t){try{if(!0===WebSquare.skipLog||!WebSquare.logEnableFlag)return;if(!window.console){
var e=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<e.length;++i)window.console[e[i]]=function(){}}WebSquare.logMsgArray.length>500&&(delete WebSquare.logMsgArray,WebSquare.logMsgArray=[],WebSquare.logMsgArray.push(s.getLogTime()+" BootLoader] Delete logs for reducing memory usage."));var o=s.getLogTime(),r=" BootLoader] "+t;WebSquare.logMsgArray.push(o+r),WebSquare.printConsole&&console.log(o+r),WebSquare.remoteConsole&&WebSquare.remoteLogMsgArray.push(o+WebSquare.logFileName+r)}catch(t){}},s.getLogTime=function(t){var e=null,i=(e="undefined"==t||null==t?new Date:new Date(t)).getTime(),o=i-WebSquare.logTime,r=s.fillZero(e.getHours(),2)+":"+s.fillZero(e.getMinutes(),2)+":"+s.fillZero(e.getSeconds(),2)+"."+s.fillZero(e.getMilliseconds(),3);return o<1e5?(WebSquare.logTotalTime+=o,r+=" "+s.fillZero(o,5)+" "+s.fillZero(WebSquare.logTotalTime,6)):r+=" 00000 000000",WebSquare.logTime=i,r},s.fillZero=function(t,e){var i,o=t+"";if(isNaN(o))return t;if(o.length>=e)return o;for(i=e-o.length;i>0;)switch(i){case 1:i=0,o="0"+o;break;case 2:i=0,o="00"+o;break;case 3:i=0,o="000"+o;break;case 4:i=0,o="0000"+o;break;case 5:i=0,o="00000"+o;break;case 6:i=0,o="000000"+o;break;case 7:i=0,o="0000000"+o;break;case 8:i=0,o="00000000"+o;break;case 9:i=0,o="000000000"+o;break;case 10:i=0,o="0000000000"+o;break;case 11:i=0,o="00000000000"+o;break;case 12:i=0,o="000000000000"+o;break;case 13:i=0,o="0000000000000"+o;break;case 14:i=0,o="00000000000000"+o;break;case 15:i=0,o="000000000000000"+o;break;default:i-=15,o="000000000000000"+o}return o},s.getParameter=function(t,e,i){try{var o=t.indexOf("?");if(o>=0)for(var r=t.substring(o+1).split("&"),a=0;a<r.length;a++){var n=r[a].split("=");if(2==n.length&&n[0]==e)return""==n[1]&&void 0!==i?i:n[1]}}catch(t){s.printStackTrace(t,"bootloader.getParameter")}return void 0!==i?i:""},s.getSignature=function(t,e){if(void 0===e&&(e=0),e>5)return"...(omission)";if(null==t||"null"==t)return"";try{var i="";null!=t.caller&&t.toString()!=t.caller.toString()&&(i=s.getSignature(t.caller,++e));var o,r=t.toString(),a=r.indexOf('["');return-1==a?-1==(o=r.indexOf(")"))?"    at "+r+"\n"+i:"    at "+r.substring(0,o+1)+"\n"+i:-1==(o=r.indexOf('"',a+2))?"    at "+r+"\n"+i:"    at "+r.substring(a+2,o)+"\n"+i}catch(e){return t}},s.getImagePostfix=function(t){try{!0===s.useWebSquareLicense&&(t=s.getImageVersionPostfix(t))}catch(t){}return t},s.getEngineUri=function(t){return"/"!=t.charAt(0)&&0!=t.search(/http(s)?:\/\//)&&0!=t.search(/file:\/\//)&&(t=t.indexOf(".wq")>=0?WebSquare.baseServletURI+t:WebSquare.baseURI+t),1==WebSquare.hybridApp?("/"==t.charAt(0)&&""!=WebSquare.w2xDocumentRoot&&(t=WebSquare.w2xDocumentRoot+t),t):(t.length>3&&(t.indexOf(".wq")>=0?t=s.getEngineVersionPostfix(t):1==WebSquare.WebSquareEngineCache&&(t=s.getEngineCachePostfix(t))),t)},s._getEncodeURL=function(t){try{if(!WebSquare.BootLoader.browserCheck.ieAllVersion||"string"!=typeof t)return t;for(var e=t,i=0;i<t.length;i++)if(t.charCodeAt(i)>127){e=encodeURIComponent(t).replace(/%2F/g,"/");break}return e}catch(e){return t}},s.openResourceUri=function(t,e){try{if(WebSquare.isHoneyComb)e.open("GET",t,!1);else{var i=s.getResourcePostfix(t);e.open("GET",i,!1)}}catch(t){}return t},s.getResourcePostfix=function(t){try{var e=s.generateSuffixPostfix(t);e&&"object"==typeof WebSquare.suffix?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:t=0==WebSquare.WebSquareCache?s.getRandomPostfix(t):s.getResourceCachePostfix(t)}catch(t){}return t},s.getImageVersionPostfix=function(t){try{var e=s.generateSuffixPostfix(t);e?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:null!=s.imageVersion&&(t.indexOf("?")>-1?t+="&postfix="+s.imageVersion:t+="?postfix="+s.imageVersion)}catch(t){}return t},s.getEngineVersionPostfix=function(t){try{t.indexOf("?")>-1?t+="&postfix="+WebSquare.ver:t+="?postfix="+WebSquare.ver,
t.indexOf("?")>-1?t+="&compression="+s.compression:t+="?compression="+s.compression,WebSquare.buildID&&(t.indexOf("?")>-1?t+="&build="+WebSquare.buildID:t+="?build="+WebSquare.buildID),window.WebSquarePluginOrderHash&&(t.indexOf("?")>-1?t+="&poh="+window.WebSquarePluginOrderHash:t+="?poh="+window.WebSquarePluginOrderHash)}catch(t){}return t},s.getRandomPostfix=function(t){try{if(t.toLowerCase().indexOf("jpg")>-1||t.toLowerCase().indexOf("png")>-1||t.toLowerCase().indexOf("gif")>-1||t.toLowerCase().indexOf("jpeg")>-1)return t;t.indexOf("?")>-1?t+="&postfix="+(new Date).getTime()+1e4*Math.random():t+="?postfix="+(new Date).getTime()+1e4*Math.random()}catch(t){}return t},s.getResourceCachePostfix=function(t){try{var e=s.generateSuffixPostfix(t);if(e)t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e;else if(s.resourcePostfix){for(var i=0;i<s.resourcePostfixKey.length;i++)if(t.indexOf(s.resourcePostfixKey[i])>-1)return t.indexOf("?")>-1?t+="&postfix="+s.resourcePostfixValue[i]:t+="?postfix="+s.resourcePostfixValue[i],t;t.indexOf("?")>-1?t+="&postfix="+s.resourcePostfix:t+="?postfix="+s.resourcePostfix}}catch(t){}return t},s.getEngineCachePostfix=function(t){try{var e=s.generateSuffixPostfix(t);e?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:s.enginePostfix&&(t.indexOf("?")>-1?t+="&postfix="+s.enginePostfix:t+="?postfix="+s.enginePostfix)}catch(t){}return t},s.rebuildInnerHTML=function(t,e){t.innerHTML=e},s.addObjStr=function(t,e){t.insertAdjacentHTML("beforeEnd",e)},s.generateSuffixPostfix=function(t){var e="";if(WebSquare.suffix&&""!=WebSquare.suffix){if("string"==typeof WebSquare.suffix)try{var i=JSON.parse(WebSquare.suffix);if("object"!=typeof i)return WebSquare.suffix;WebSquare.suffix=i}catch(t){return WebSquare.suffix}try{var o=["day","week","month","year","random"],s=[],r=new Date;s.push(r.getDate()<=9?"0"+r.getDate():""+r.getDate());var a=Math.ceil((r.getDate()-r.getDay())/7);if(0==a){r.setDate(1),r.setTime(r.getTime()-864e5),a=Math.ceil((r.getDate()-r.getDay())/7)}s.push(a),s.push(r.getMonth()<9?"0"+(r.getMonth()+1):""+(r.getMonth()+1)),s.push(r.getFullYear()),s.push(r.getTime()+1e4*Math.random());for(var n=function(t){if(t.indexOf("$")<0)return t;for(var e=0;e<o.length;e++)for(var i=t.indexOf("${"+o[e]+"}");i>=0;)i=(t=t.substring(0,i)+s[e]+t.substring(i+o[e].length+3)).indexOf("${"+o[e]+"}",i);return t},l=WebSquare.suffix.suffix,h=0;h<l.length;h++){var d=!0;if(l[h].path&&(d=!1,t.indexOf(l[h].path)>=0&&(d=!0)),d){var c="defaults",u={extension:"",defaults:""};if(l[h]){for(var p in l[h]){var g=p;if("default"===p&&(g=c),g==c&&(u[g]=n(l[h][g])),"extension"==g){var m=t.substring(t.lastIndexOf(".")+1);m.indexOf("?")>0&&(m=m.substring(0,m.indexOf("?"))),l[h].extension[m]&&(u[g]=n(l[h].extension[m]))}}e=""==u.extension&&""!=u.defaults?u.defaults:u.extension}if(e)break}}}catch(t){}}return e},s.generatePostfix=function(t){try{if(WebSquare.suffix&&""!=WebSquare.suffix&&"string"==typeof WebSquare.suffix)t=WebSquare.suffix;else if("day"==t){var e=(o=new Date).getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1),i=o.getDate()<=9?"0"+o.getDate():""+o.getDate();t=o.getFullYear()+"_"+e+"_"+i}else if("week"==t){var o=new Date,s=Math.ceil((o.getDate()-o.getDay())/7);if(0==s){o.setDate(1),o.setTime(o.getTime()-864e5),s=Math.ceil((o.getDate()-o.getDay())/7)}e=o.getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1);t=o.getFullYear()+"_"+e+"_W"+s}else if("month"==t){e=(o=new Date).getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1);t=o.getFullYear()+"_"+e}else if(t.indexOf("hour")>-1){o=new Date;var r=t.wq_replaceAll("hour","").wq_trim(),a=parseInt(r,10);o.setHours(o.getHours()+a);e=o.getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1),i=o.getDate()<=9?"0"+o.getDate():""+o.getDate();var n=o.getHours()<=9?"0"+o.getHours():""+o.getHours();t=o.getFullYear()+"_"+e+"_"+i+"_"+n}}catch(t){}return t},s.loadLanguagePack=async function(){var t,e,i=s.getBrowserLanguage()
;if("ko"==(i=WebSquare.cookie.getCookie("system_language")||i||WebSquare.core.getConfiguration("language")))e="message/ko.js";else if("cn"==i||"zh"==i)e="message/cn.js";else{var o=WebSquare.clientLang;e=""==o?"message/en.js":"message/"+o+".js"}e=s.inquiresPath(e),s._isCache(e)||(t=s._getloadPath(e),t=s.getEngineUri(t),await s.writeAsync(t,"UTF-8"))},s.getBrowserLanguage=function(){try{var t=navigator.language||navigator.browserLanguage;return t.indexOf("-")>-1&&(t=t.substring(0,t.indexOf("-"))),t}catch(t){s.printLog("bootloader.getLanguage failure.")}},s.loadEngineModuleAsync=async function(t){for(var e=WebSquare.core.getChildConfiguration("/WebSquare/engine",{singleMode:!0}),i=0,o=e.length;i<o;i++){var r=e[i],a=r["@src"];a&&(void 0!==WebSquare.moduleList[a]&&null!==WebSquare.moduleList[a]||(WebSquare.moduleList[a]=1),t&&WebSquare.moduleList[a]>1&&"false"!=r.cache||("false"==WebSquare.core.getConfiguration("/WebSquare/spa/scriptCache/@value").toLowerCase()&&"true"!=r.cache||WebSquare.moduleList[a]++,"false"==r.cache&&(WebSquare.moduleList[a]=0),1==WebSquare.hybridApp&&"/"==a.charAt(0)&&""!=WebSquare.w2xDocumentRoot&&(a=WebSquare.w2xDocumentRoot+a),a=0==WebSquare.WebSquareCache?s.getRandomPostfix(a):s.getResourceCachePostfix(a),await s.writeAsync(a,r.charset)))}},s.loadUdcRequires=async function(){for(var t=WebSquare.core.getChildConfiguration("/WebSquare/udc/requires",{singleMode:!0}),e=0,i=t.length;e<i;e++){var o=t[e],s=WebSquare.core.getPageURL(o["@src"]),r=o["@type"],a=o["@as"];if("page"===r&&a){if(null==WebSquare.core.udcObj[a]){var n={msaName:o["@msaName"]},l=WebSquare.core.getPageURL(s,n);WebSquare.core.udcObj[a]=await WebSquare.jsLoader._loadObj(l,n),WebSquare.core.udcMsa[a]=n.msaName}}else WebSquare.util.loadUserComponent(s)}},s.loadInheritRequires=function(){for(var t=WebSquare.core.getChildConfiguration("/WebSquare/inherit/requires",{singleMode:!0}),e=0,i=t.length;e<i;e++){var o=t[e];WebSquare.util.loadInheritComponent(o["@src"])}},s.initJSONConfig=function(){for(var t=!1,e=s.configurationJSON.length-1;e>=0;e--){var i=s.configurationJSON[e];for(var o in i.WebSquare){var r=i.WebSquare[o];if("[object Array]"===Object.prototype.toString.call(r)&&(r=r[0]),"engineCache"==o)"true"==r["@enable"]&&(WebSquare.WebSquareEngineCache=!0,s.enginePostfix=s.generatePostfix(r["@postfix"])),"false"==r["@compression"]?s.compression=!1:"always"==r["@compression"]?s.compression="always":s.compression=!0,"false"===r["@pluginCache"]?WebSquare.pluginCache="false":"all"===r["@pluginCache"]&&(WebSquare.pluginCache="all");else if("imageCache"==o&&"true"==r["@enable"])s.imageVersion=s.generatePostfix(r["@version"]),s.imageServlet=r["@serverUrl"],s.imageHostUrl=r["@hostUrl"],""==s.imageServlet&&(s.imageServlet=WebSquare.baseServletURI+"resource.wq?url="),s.imageHostUrl&&("http"==s.imageHostUrl.substring(0,4)&&(s.imageHostUrl=s.imageHostUrl.substring(7)),"/"==!s.imageHostUrl.substring(s.imageHostUrl.length-"/".length,s.imageHostUrl.length)&&(s.imageHostUrl=s.imageHostUrl+"/"));else if("license"==o)r["@value"],s.useWebSquareLicense=!0;else if("xhr"==o)t=!0,s.browserCheck.ieAllVersion&&("false"==r["@useActiveXObject"]?s.useActiveXObject=!1:s.useActiveXObject=!0),"true"==r["@useResponseXML"]&&(s.useResponseXML=!0);else if("debug"==o)"true"==r["@console"]&&window.console&&(WebSquare.printConsole=!0),"true"==r["@remoteConsole"]&&(WebSquare.remoteConsole=!0),"true"==r["@errorConsole"]&&(WebSquare.errorConsole=!0),"true"==r["@fixErrorLineNumber"]&&(s.fixErrorLineNumber=!0),"true"==r["@weinre"]&&(WebSquare.useWeinre=!0,null!=r["@weinreUrl"]&&""!=r["@weinreUrl"]&&(WebSquare.weinreUrl=r["@weinreUrl"])),"true"==r["@skipLog"]&&(WebSquare.skipLog=!0,WebSquare.logger&&"function"==typeof WebSquare.logger._skipLog&&WebSquare.logger._skipLog(WebSquare.logger)),"true"==r["@printError"]&&(WebSquare.printError=!0);else if("environment"==o){if("nocache"==r["@cache"])WebSquare.WebSquareCache=!1;else for(var a in s.resourcePostfix=s.generatePostfix(r["@postfix"]),
WebSquare.WebSquareCache=!0,s.resourcePostfixKey=[],s.resourcePostfixValue=[],r){var n=r[a];"[object Array]"===Object.prototype.toString.call(n)&&(n=n[0]),"postfix"==a&&(s.resourcePostfixKey.push(n["@key"]),s.resourcePostfixValue.push(s.generatePostfix(n["@value"])))}"development"==r["@mode"]&&(window._alert=function(t){alert(t)}),r["@buildID"]&&""==WebSquare.buildID&&(WebSquare.buildID=r["@buildID"])}else if("engineLoadingMode"==o){var l={ie:parseInt(r["@ie"],10),moz:parseInt(r["@moz"],10),opera:parseInt(r["@opera"],10),android:parseInt(r["@android"],10),iphone:parseInt(r["@iphone"],10),blackberry:parseInt(r["@blackberry"],10),chrome:parseInt(r["@chrome"],10),safari:parseInt(r["@safari"],10)};for(var a in l){var h=l[a];h>=0&&h<=3&&(s.engineLoadingMode[a]=h)}}else if("engineChunkNum"==o){var d=parseInt(r["@value"],10),c=r.incremental&&"true"===r.incremental["@value"];s.engineChunkNum=d||1,s.currentChunkNum=0,s.incrementalChunkImport=c}else if("userAgentPattern"==o)for(var a in r)a.length>1&&"@"==a.charAt(0)&&r[a]&&(WebSquare.userAgentPattern[a.substring(1)]=r[a]);else if("noConflict"==o)r["@value"]&&(WebSquare.noConflict=r["@value"]),r["@function"]&&(WebSquare.noConflictFunction=r["@function"]);else if("stylesheet"==o){if("link"==r["@import"]&&(WebSquare.styleSheetEarlyImport=1,"false"!=r["@enable"]&&(WebSquare.styleSheetEarlyImport=2,WebSquare.styleSheetEarlyImportName=r["@value"]||"stylesheet_ext.css")),r["@earlyImportList"])for(var a in WebSquare.styleSheetEarlyImportList=r["@earlyImportList"].split(","),WebSquare.styleSheetEarlyImportList)WebSquare.styleSheetEarlyImportList[a]=WebSquare.styleSheetEarlyImportList[a].wq_trim()}else"scriptLoading"==o?"false"==r["@merge"]&&(s.traceWframe=!0):"strictMode"==o?r["@value"]:"pageURLPrefix"===o?(WebSquare.pageURLPrefix=r["@value"]||"",WebSquare.pageURLPrefixType=r["@type"]||""):"performance"===o&&window.performance&&window.performance.constructor===window.Performance&&(WebSquare._performance.use=r["@value"]||!1)}}t||s.browserCheck.ieAllVersion},s.setBaseThemeURI=function(){WebSquare.w2xTheme=window.WebSquareExternal.w2xTheme||s.getParameter(location.search,"w2xTheme",""),WebSquare.w2xTheme?s.setCookie("w2xTheme",WebSquare.w2xTheme):WebSquare.w2xTheme=s.getCookie("w2xTheme");var t=WebSquare.baseURI;if(s.configurationJSON[0].WebSquare.theme){WebSquare.w2xTheme=WebSquare.w2xTheme||s.configurationJSON[0].WebSquare.theme["@default"];var e=s.configurationJSON[0].WebSquare.theme.name||[];if("[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<e.length;i++)if(e[i]["@value"]===WebSquare.w2xTheme){t=e[i]["@path"];break}}else t=e["@path"]}0===t.indexOf("/")||t.match(/^http:\/\//)?WebSquare.baseThemeURI=t:WebSquare.baseThemeURI+=t},s.mergeJSON=function(t,e){try{for(var i in e){var o=e[i];switch(typeof t[i]){case"object":if(t[i].constructor==Array)if((WebSquare.core.getConfiguration("/WebSquare/useAppConfig/@value")||!1)&&"column"==i)for(var r=t[i],a=0;a<r.length;a++)r[a]["@inputType"]==e[i]["@inputType"]&&WebSquare.extendKeepingType(r[a],e[i]);else t[i].push(e[i]);else s.mergeJSON(t[i],o);continue}t[i]=o}return t}catch(t){this.printStackTrace(t)}},s.getCookie=function(t){try{for(var e=WebSquare.document.cookie.split("; "),i=0;i<e.length;i++){var o=e[i].split("=");if(t==o[0])return 1==o.length?"":unescape(o[1])}}catch(t){this.printStackTrace(t)}return null},s.setCookie=function(t,e){WebSquare.document.cookie=t+"="+escape(e)+";path=/"},s._afterEngineLoad=async function(t){try{try{await s.loadEngineModuleAsync()}catch(t){}await s.loadUdcRequires(),s.loadInheritRequires(),WebSquare._loadCSS()}catch(t){this.printStackTrace(t)}return null},s.loadAsync=async function(t){return new Promise((function(e,i){var o=s.getXMLHTTPObject();o.open("GET",t,!0);var r=function(t){4===o.readyState&&(o.status>="400"||0===o.status?i(o.statusText):e(o.responseText),o=null)};s.useActiveXObject?o.onreadystatechange=r:(o.onload=r,o.onerror=function(t){i(o.statusText),o=null}),o.send(null)}))},
s._initSuffix=async function(){var t="suffix.txt";return window.WebSquareExternal&&window.WebSquareExternal.suffixName&&(t=window.WebSquareExternal.suffixName),new Promise((function(e,i){var o;try{o=WebSquare.BootLoader.getXMLHTTPObject();var s=WebSquare.baseURI+t+"?postfix="+(new Date).getTime()+1e4*Math.random();o.open("GET",s,!0),o.setRequestHeader("Cache-Control","no-cache"),o.onreadystatechange=function(){4==o.readyState&&(WebSquare.suffix=o.responseText.wq_trim(),e())},o.send()}catch(t){i()}}))},s._initImport=async function(){try{if(!0===s._binitImport)return;s._binitImport=!0,s.PluginCache={},s.stopCheckOpener=!1,s.stopCheckParentFrame=!1,s._XMLHTTP_PROGIDS=["Microsoft.XMLHTTP"],s._MSMXL_PROGIDS=["Microsoft.XMLDOM"],s.useActiveXObject=!1,s.useResponseXML=!1,s.useWebSquareXMLParser=!1,s.useWebSquareXPathParser=!1,s.configurationJSON=[],s.fixErrorLineNumber=!1,s.traceWframe=!1,s.globalEvalArr=[],s.performanceCheck={},void 0!==WebSquare.externalOption.startDate?s.performanceCheck.start=WebSquare.externalOption.startDate:s.performanceCheck.start=new Date,s.performanceCheck.mid1=s.performanceCheck.start,s.performanceCheck.mid2=s.performanceCheck.start,s.performanceCheck.mid3=s.performanceCheck.start,s.performanceCheck.mid4=s.performanceCheck.start,s.performanceCheck.mid5=s.performanceCheck.start,s.performanceCheck.mid6=s.performanceCheck.start,s.performanceCheck.mid7=s.performanceCheck.start,s.performanceCheck.mid8=s.performanceCheck.start,s.performanceCheck.mid9=s.performanceCheck.start,s.performanceCheck.end=s.performanceCheck.start,WebSquare.renderStartTime=s.performanceCheck.mid1,s.ifModifiedSince="Tue, 24 Jan 2006 01:13:57 GMT";window.WebSquareExternal.skipLog&&(WebSquare.skipLog=window.WebSquareExternal.skipLog),WebSquare.logEnableFlag=!0,window.WebSquareExternal.disableLog&&(WebSquare.logEnableFlag=!window.WebSquareExternal.disableLog),"file"===location.protocol&&(s.useWebSquareLicense=!1)}catch(t){s.printStackTrace(t,"Initialize baseURI")}var t=window.WebSquareExternal.useNativeParser&&s.browserCheck.ieAllVersion&&s.browserVersion()>=9;if(s.browserCheck.ieAllVersion&&!t){try{"object"==typeof window.external&&void 0!==window.external.msActiveXFilteringEnabled&&"unknown"!=typeof window.external.msActiveXFilteringEnabled&&1==window.external.msActiveXFilteringEnabled()&&(WebSquare.msActiveXFilteringEnabled=!0)}catch(t){}try{WebSquare.msActiveXFilteringEnabled,s.useActiveXObject=!1}catch(t){s.useActiveXObject=!1}}if(WebSquare._initImportFunction(),s.importCache={},s.imageServlet=null,s.imageHostUrl=null,s.compression=!0,s.browserCheck.ie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}try{var e="./",i=!1;try{new Function("u","return import(u)"),i=!0}catch(t){}e=!i||window.WebSquareExternal&&"dev"===window.WebSquareExternal._mode?WebSquare.baseURI:"../",e+="config.js";var o=WebSquare.baseURI+"config.js";"string"==typeof WebSquare.configPath&&WebSquare.configPath.indexOf("config.js")>=0&&(o=e=WebSquare.configPath),await s._initSuffix();var r=(await WebSquare._dynamicImport(e,{altModulePath:o})).default;if(null==r.WebSquare){var a={WebSquare:{}};for(var n in r)a.WebSquare[n]=r[n];r=a}for(var l in window.WebSquareExternal.configOverride)r.WebSquare[l]=window.WebSquareExternal.configOverride[l];s.configurationJSON.unshift(r),s.initJSONConfig();try{s.setBaseThemeURI()}catch(t){s.printStackTrace(t,"Cannot read config.xml in theme")}1==WebSquare.hybridApp&&"file:"==location.protocol&&""==WebSquare.baseServletURI&&("string"==typeof WebSquare.hybridSubmissionURL&&""!=WebSquare.hybridSubmissionURL?WebSquare.baseServletURI=WebSquare.hybridSubmissionURL:WebSquare.baseServletURI=s.configurationJSON[0].WebSquare.hybrid.submissionURL["#text"]||"",WebSquare.baseServletURI.lastIndexOf("/")!=WebSquare.baseServletURI.length-1&&(WebSquare.baseServletURI=WebSquare.baseServletURI+"/"))}catch(t){s.printStackTrace(t,"Cannot read config.xml")}s.useActiveXObject=!1;var h=location.host.replace(/\./g,"|")
;if(WebSquare.isLocal=h.indexOf("127|0|0|1")>-1||location.host.indexOf("localhost")>-1,WebSquare.useWeinre&&(s.browserCheck.android||s.browserCheck.iphone||s.browserCheck.ipad||s.browserCheck.ipod||s.browserCheck.blackberry)&&function(){window.document;var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src=WebSquare.weinreUrl,t.appendChild(e)}(),WebSquare.remoteLogMsgArray.push(""),WebSquare.remoteLogMsgArray.push(location.href),s.printLog("WebSquare Runtime Engine Version : "+WebSquare.ver),s.printLog("    Copyright 2009  INSWAVE Systems Co., Ltd. All Rights Reserved."),s.printLog("Browser Information : "+navigator.userAgent),s.printLog("[STEP1][START] Loading Runtime Engine."),WebSquare._performance.mark("step1"),WebSquare._performance.measure("step1"),s.useWebSquareXMLParser=new RegExp(WebSquare.userAgentPattern.XMLParser).test(navigator.userAgent),s.useWebSquareXPathParser=WebSquare.userAgentPattern.XPathParser&&new RegExp(WebSquare.userAgentPattern.XPathParser).test(navigator.userAgent),s.useWebSquareXMLParser)s.printLog("Install JavaScript Implementation for XML & XPath. User Agent Pattern : "+WebSquare.userAgentPattern.XMLParser),await s.writeAsync(WebSquare._resourceURI+"externalJS/xmlparser/xmlsax.js"),await s.writeAsync(WebSquare._resourceURI+"externalJS/xmlparser/xmlw3cdom.js"),await s.writeAsync(WebSquare._resourceURI+"externalJS/xpath/xpath.js"),installXPath(new XPathParser);else if(s.useWebSquareXPathParser)try{s.printLog("Install XPath Implementation for not support xPath Parser."),await s.writeAsync(WebSquare._resourceURI+"externalJS/xpath/xpath.js"),installXPath(new XPathParser)}catch(t){s.printStackTrace(t,"xpath")}else if(s.browserCheck.ieAllVersion&&!s.useActiveXObject);else if(s.browserCheck.android)try{"undefined"==typeof XMLDocument||void 0===XMLDocument.prototype.createNSResolver||void 0===XMLDocument.prototype.evaluate?(s.printLog("Install XPath Implementation for Google Android."),await s.importAsync("externalJS/xpath/xpath.js"),installXPath(new XPathParser)):s.printLog("Already have a XPath Implementation.")}catch(t){s.printStackTrace(t,"xpath")}"undefined"!=typeof importAllList&&null!=importAllList?WebSquare.pluginList=importAllList:(WebSquare.pluginList=[],s.useWebSquareLicense),WebSquare.core._createGlobalVariable(),"true"!=WebSquare.core.getConfiguration("/WebSquare/localStorage/@defer")&&WebSquare.createLocalStorage(window),s.loadLanguagePack(),await WebSquare._initModule(),WebSquare.core._loadMsaServer(),WebSquare.core._loadMsaStylesheet();try{document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?WebSquare.graphicPlatformType="svg":WebSquare.graphicPlatformType="vml","vml"===WebSquare.graphicPlatformType&&(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),WebSquare.defaultStyle=document.createStyleSheet(),WebSquare.defaultStyle.addRule("v\\:group","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:line","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:stroke","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:oval","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:rect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:roundrect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:image","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:roundrect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:shape","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:path","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:fill","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:extrusion","behavior: url(#default#VML);"))}catch(t){s.printStackTrace(t,"VML Namespace")}"true"==WebSquare.core.getConfiguration("debug")&&(WebSquare.logger.debug=!0),
WebSquare.logger.debugKey=WebSquare.core.getConfiguration("debugKey"),"system"!=WebSquare.core.getConfiguration("exceptionHandler")&&!0!==WebSquare.skipLog&&WebSquare.core.browserCheck.ie,"true"==WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@enable")&&(WebSquare.util.checkInterval=WebSquare.util.parseInt(WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@interval"),3e4),WebSquare.util.checkMode=WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@mode"),WebSquare.util.checkURL=WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@serverUrl"),""!=WebSquare.util.checkMode&&""!=WebSquare.util.checkURL||(WebSquare.util.checkMode="client"),window.setTimeout("WebSquare.util.checkUpdate()",WebSquare.util.checkInterval)),WebSquare.requestID="";var d=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@value");""!=d&&(WebSquare.requestID=d+"="),WebSquare.core.useSubmissionGlobal=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/submission/makeGlobalObject/@value")),WebSquare.core.useWorkflowGlobal=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/workflow/makeGlobalObject/@value")),WebSquare.core.scriptPrecedence=!0,window.useWebSquareLicense=s.useWebSquareLicense,await s._afterEngineLoad(),0==s.engineLoadingMode.mode&&"undefined"==typeof WebSquareAllInOne||("WebSquare"!=document.title&&"NEW RENDERING"!=document.title||(document.title="WebSquare"),s.performanceCheck.mid1=new Date,s.printLog("[STEP2][ENGINE] Runtime Engine Load complete. Time:"+(s.performanceCheck.mid1.getTime()-s.performanceCheck.start.getTime())+"ms"),WebSquare._performance.mark("step2"),WebSquare._performance.measure("step2","step1")),"default"===WebSquare.pluginCache&&window.applicationCache&&window.applicationCache.addEventListener("updateready",(function(){s.printLog("[ApplicationCache] ApplicationCache updateready"),window.applicationCache.swapCache()}),!1)}},4519:(t,e,i)=>{i.d(e,{$:()=>n});var o=i(2981),s=i(2085),r=i(1656),a=i(7275),n=function(t,e,i){try{this.parentControl=null,this.childControlList=[]}catch(t){s.w.printStackTrace(t)}};n.prototype.initialize=function(){},n.prototype.addControl=function(t,e,i,r){try{if(!t)return;var a=this.uuid;if(!0===t._wqAsync){this.childControlListAsync||(this.childControlListAsync=[]);i=this.childControlList.length+this.childControlListAsync.length;return this.childControlListAsync.push(i),t.then((function(t,o){WebSquare.idCache[a].addControl(t,e,i)}))}var n=this;do{if(t==n)return void $l("cannot execute : "+this.id+".addControl("+t.id+");");n=n.parentControl}while(n);if(t.parentControl&&t.parentControl.removeControl(t),"number"==typeof i){if(this.childControlListAsync&&this.childControlListAsync.length>0){var l=[];this.childControlListAsync.sort((function(t,e){return t-e}));for(var h=0;h<this.childControlListAsync.length;h++){for(var d=this.childControlListAsync[h],c=l.length;c<d;c++)l.push(this.childControlList.shift());l.push(d)}this.childControlList=l.concat(this.childControlList),this.childControlListAsync=[]}this.childControlList[i]=t}else r&&"number"==typeof r.index?this.childControlList.splice(r.index,0,t):this.childControlList.push(t);this.render&&(t.domStatus="new"),t.parentControl=this,e&&this.refreshDom();try{if(!o.x.strictModeFrame&&null!=this.parentFrame&&o.x.idCache[this.parentFrame])t.parentFrame=this.parentFrame,WebSquare.idCache[t.parentFrame].childAllControlList.push(t.uuid);else if(null!=t.parentFrame&&WebSquare.idCache[t.parentFrame]){WebSquare.idCache[t.parentFrame].childAllControlList.push(t.uuid)}}catch(t){s.w.printStackTrace(t,null,this),s.w.printError("parentFrame is not wframe")}}catch(t){s.w.printStackTrace(t)}},n.prototype.removeControl=function(t){try{for(var e in this.childControlList)this.childControlList[e]==t&&this.childControlList.splice(e,1);t.parentControl=null}catch(t){s.w.printStackTrace(t)}},n.prototype.getParent=function(){try{return this.parentControl}catch(t){s.w.printStackTrace(t)}},
n.prototype.getChild=function(t){try{for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i&&i.id==t)return i}return null}catch(t){s.w.printStackTrace(t)}},n.prototype.getChildren=function(){try{return this.childControlList}catch(t){s.w.printStackTrace(t)}},n.prototype.getAllChildren=function(t){try{for(var e=this.getChildren().slice(0),i=new Array,r=e.pop();null!=r;r=e.pop()){if(null!=o.x.idCache[r.uuid]&&r.options&&(r.options.pluginName||r.options.inheritedCompName)&&i.unshift(r),"true"===(t+"").toLowerCase())for(var a=new Array,n=r.getChildren().slice(0),l=n.pop();null!=l;l=n.pop()){var h="",d="";if(l._wTagName&&"column"!==l._wTagName&&!l.headerId&&(h=l._wTagName,d=l.uuid),o.x.componentsCache[h]&&!0===o.x.componentsCache[h][d])l.options&&("searchbox"===l.options.pluginName||"spinner"===l.options.pluginName)&&!0===l._childFlag||a.unshift(l)}else a=r.getChildren();e=e.concat(a)}return i}catch(t){s.w.printStackTrace(t)}},n.prototype.getChildrenCount=function(){try{return this.childControlList.length}catch(t){s.w.printStackTrace(t)}},n.prototype.clearChildren=function(){try{this.childControlList=[]}catch(t){s.w.printStackTrace(t)}},n.prototype.toHTML=function(){alert("you should override 'toHTML' for "+this.id)},n.prototype.activate=function(){alert("you should override 'activate' for "+this.id)},n.prototype.setAction=function(){alert("you should override 'setAction' for "+this.id)},n.prototype.serialize=function(){return alert("you should override 'serialize for "+this.id),{}},n.prototype.restore=function(t){return alert("you should override 'restore for "+this.id),!1},n.prototype.destroy=function(t){try{if("function"==typeof this.finalize&&"finalize"!==this.activeStatus)try{this.finalize()}catch(t){a.k.printLog("[ERROR] finalize : "+this.id)}if("function"==typeof this.unbind&&this.unbind(),this.render&&"IFRAME"==this.render.nodeName){var e=this.getWindow();try{this.render.getAttribute("src")&&this.render.setAttribute("src",""),e.WebSquare&&e.WebSquare.getBody&&e.WebSquare.getBody().remove()}catch(t){}}if(this.modelControl&&(this.modelControl.unbindRef(),this.modelControl.unbindItemset()),this.childControlList)for(var i=this.childControlList.length-1;i>=0;i--){for(var n in window[o.x.noConflict].comp[this.childControlList[i].id]=null,delete window[o.x.noConflict].comp[this.childControlList[i].id],o.x.idCache[this.childControlList[i].uuid]=null,delete o.x.idCache[this.childControlList[i].uuid],this.childControlList[i].destroy(t),this.childControlList[i])this.childControlList[i][n]=null,delete this.childControlList[i][n];delete this.childControlList[i]}this.childControlList=[],this.scope_obj&&this.scope_obj.scope&&this.scope_obj.scope[this.org_id]&&delete this.scope_obj.scope[this.org_id],this.parentControl=null,window[o.x.noConflict].comp[this.id]=null,delete window[o.x.noConflict].comp[this.id],o.x.idToUUID[this.id]=null,delete o.x.idToUUID[this.id],o.x.idCache[this.uuid]=null,delete o.x.idCache[this.uuid],window[this.id]&&(window[this.id]=null);if(this.options){var l={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[this.options.pluginName]||this.options.pluginName;delete(o.x.componentsCache[l]||o.x.componentsCache[this._wTagName]||{})[this.uuid],r.v.memoryLeakComponent[l]&&(r.v.memoryLeakComponentCount+=r.v.memoryLeakComponent[l])}this.event&&(this.render&&this.event.clearElement(this.render),this.event.clearCache());var h=o.x.getBody();for(var i in h&&"function"==typeof h.getLayerListener&&h.getLayerListener().remove(this.id),null==this.render||t||(o.x.removeNode(this.render),this.render=null),this)try{"function"==typeof this[i]?this[i]=function(){}:delete this[i]}catch(t){delete this[i]}this._removed=!0}catch(t){s.w.printStackTrace(t,null,this)}}},6191:(t,e,i)=>{i.d(e,{D:()=>d});var o=i(2981),s=i(2085),r=i(1656),a=i(3082),n=i(5543),l=i(227),h=i(6043),d=function(){this.createControlHash={script:"pass",label:"pass",
value:"pass",choices:"pass",item:"pass",itemset:"pass",tab:"pass",tabs:"pass",mainMenu:"pass",childMenu:"pass",node:"pass",attributes:"pass",switch:"Switch",case:"group",contents:"group",content:"group",autoFinder:"autoComplete",panelContent:"group"},this._asyncList=[],this._awaitObj={key:[],promiseObj:{}}};d.prototype._initImport=function(){"true"==(r.v.getConfiguration("/WebSquare/parseHtml/@script")||"false")&&(this.createControlHash.script="script")},o.x._initImportList.push("controlFactory"),d.prototype.create=function(t,e,i,o,a,n){try{return"xml"===(i?i instanceof h.D?i._elementType:r.v.isXML(i)?"xml":"json":"xml")?this.createByXML(t,e,i,o,a,n):this.createByJSON(t,e,i,o,a,n)}catch(t){s.w.printStackTrace(t)}},d.prototype.createByXML=function(t,e,i,o,r,a){try{if("self"==o)o=n=this.createControl(t,e,i,null,a,r);else var n=this.createControl(t,e,i,o,a,r);if(n){if(n.parentFrame=r,n.options&&n.options.parseChild)for(var l=i.firstChild;null!=l;l=l.nextSibling)if(!n.options.inheritedCompName&&!n.options.udcName||"w2:inheritOverride"!=l.nodeName&&"link"!=l.nodeName&&"style"!=l.nodeName){var h=this.createByXML(null,null,l,o,r,a);h&&n.addControl(h)}null!=n.options.parseChild_bak&&(n.options.parseChild=n.options.parseChild_bak)}return n}catch(t){s.w.printStackTrace(t)}},d.prototype.createByJSON=function(t,e,i,o,r,a){try{i instanceof h.D&&i._element&&(i=i._element);var n,d=[i],c=[];for(e||(e={_idCollisionCheck:!0,_skipExtend:!0});d.length>0;){var u,p=d.pop();if(!e.pluginName)(u=p.N?l.h.dropNS(p.N):p.T)&&(e.pluginName=u);var g="w2"==(l.h.getNS(p.N)||"")||a;if("self"==o)o=f=this.createControl(t,e,p,null,g,r),e.inheritedCompName&&WebSquare.strictModeFrame&&r&&(o=WebSquare.idCache[r]);else var m=t||e.id,f=this.createControl(m,e,p,o,g,r);t=null,e={_idCollisionCheck:!0,_skipExtend:!0},a=!1;var b=c.pop();if(f){if(n||(n=f),f.parentFrame=r,b&&b.addControl(f),f.options&&f.options.parseChild)for(var y=l.h.getChildNodes(p),v=y.length-1;v>=0;v--){var w=y[v];(!f.options.inheritedCompName&&!f.options.udcName||"w2:inheritOverride"!=w.N&&"link"!=w.N&&"style"!=w.N)&&(w.T!=h.D.type.element&&w.T!=h.D.type.text||"pass"===this.createControlHash[w.N]||(d.push(w),c.push(f)))}f.options&&null!=f.options.parseChild_bak&&(f.options.parseChild=f.options.parseChild_bak)}}return n}catch(t){s.w.printStackTrace(t)}},d.prototype.createControl=function(t,e,i,n,l,d){try{if(!i||i instanceof h.D||(i=new h.D(i)),!l&&!i)return null;var c=null;null!=e?e._idCollisionCheck=!0:e={_idCollisionCheck:!0,_skipExtend:!0};var u=null!=n&&null!=o.x.idCache[n.uuid];if(u&&(e._scope_obj_uuid=n.uuid),null==i&&l||1==i.nodeType){var p,g;if(p=!0!==e.strictFrame||t?t||(i?i.getAttribute("id"):""):"",isNaN(p)||(p=""),!p&&u&&(p=o.x.UUIDPrefix+"_"+o.x.UUID),p){var m=n?n.id:"";t=(m?m+"_":"")+p}else t=p;if(u&&(e._scope_obj_org_id=p,e._scope_obj_runtime_id=t),g=e&&e.pluginName&&!e.udcName?e.pluginName:h.D.api.getLocalName(i),null!=r.v.udcObj[g]){c=new WebSquare.uiplugin.udc({id:t,org_id:p,tagName:g,data:null!=i?WebSquare.Parser.parseAttribute(i):{},scope_uuid:e._scope_obj_uuid,parentFrame:d,msaName:r.v.udcMsa[g]});return this._asyncList.push(c.uuid),c}if(!l&&"w2"!==i.getNamespace()&&"xf"!==i.getNamespace()||"tag"==g||"style"==g)"body"==g?c=new WebSquare.uiplugin.body(t,null,i):"pass"!=this.createControlHash[g]&&(c=new WebSquare.tag(t,null,i));else{var f=this.createControlHash[g]||g;switch(f){case"pass":return null;case"secret":f="uiplugin.input",null==i&&l?(e.type="password",e.pluginName="secret"):(i.setAttribute("type","password"),i.setAttribute("pluginName","secret"));break;case"select1":"full"==(b=i.getAttribute("appearance"))?(f="uiplugin.radio",e.pluginName="radio"):(f="uiplugin.selectbox",e.pluginName="selectbox");break;case"select":var b;"full"==(b=i.getAttribute("appearance"))?(f="uiplugin.checkbox",e.pluginName="checkbox"):"checkcombobox"==b?(f="uiplugin.checkcombobox",e.pluginName="checkcombobox"):(f="uiplugin.multiselect",e.pluginName="multiselect");break;case"Switch":f="uiplugin."+f,
e.pluginName="Switch";break;default:f="uiplugin."+f}try{var y=a.D.loadedUserComponentPluginName[f.slice(9)],v=a.D.loadedInheritComponentPluginName[f.slice(9)],w=y||v;if(w){var S=y?"User":"Inherit",C=a.D["loaded"+S+"Component"][w],_=h.D.api.getAttribute(C,"class"),x=[];if(null!=i&&(null==e&&(e={}),o.x.extendKeepingType(e,WebSquare.WebSquareparser.parseAttribute(i)),e._skipExtend=!1,x=i.getChildNodes()),_&&e.className?e.className=_+" "+e.className:_&&!e.className&&(e.className=_),x.length>0){C=new h.D(C).cloneNode(!0);for(var I=0;I<x.length;I++)C.appendChild(x[I]._element);C=C._element}e.pluginName=null,"User"===S?e.udcName=f.slice(9):"Inherit"===S&&(e.inheritedCompName=f.slice(9)),e.firstTabID=h.D.api.getAttribute(C,"firstTabID")||null,t||(t=o.x.UUIDPrefix+"_"+o.x.UUID++),(c=this.create(t,e,C,"self",d,l)).options.parseChild_bak=c.options.parseChild,c.options.parseChild=!1,e.style||(c.options.style=""),n=c,c.makeScope(c),d&&null!=WebSquare.idCache[d]&&WebSquare.idCache[d]._addScopeVariable(c.uuid),c.getUdcHome=function(){return y.slice(0,y.lastIndexOf("#"))},c.getPluginName=function(){return e.udcName}}else{var T=f.split("."),k=a.D.isMobile(),D=T[0],L=T[1];if(i)if("selectbox"==L){var W=i.getAttribute("renderType"),A=i.getAttribute("tableRender"),M=i.getAttribute("mobileRenderType");k&&M?W=M:W||(W=r.v.getConfiguration("/WebSquare/selectbox/renderType/@"+(k?"mobile":"value"))||"auto"),("ul"!==A||"auto"==W&&k)&&("native"==W||"select"==W||"auto"==W&&k)&&(e.renderType=W,L+="_native")}else if("treeview"==L){(W=i.getAttribute("renderType"))||(W=r.v.getConfiguration("/WebSquare/treeview/renderType/@"+(k?"mobile":"value"))||"auto"),"virtual"==W&&(e.renderType=W,L+="_virtual")}if(null==WebSquare[D][L]){var E=this._awaitObj.promiseObj[f];E||(E=o.x._loadModuleDynamic(f));var q=function(t,e,i,o,s,r,a,n,l){return function(h,d){var c=l._createComponent({id:t,element:e,engineType:i,componentName:o,options:s});if(l._createComponentAfter(c,{org_id:r,scopeObj:a,parentFrame:n}),c.options&&c.options.parseChild)for(var u=c.element.getChildNodes(),p=0;p<u.length;p++){var g=l.create(null,null,u[p],a,n);c.addControl(g)}var m=l.initAsync(!0),f=c.uuid;return m.then((function(t,e){return WebSquare.idCache[f]}))}}(t,i,D,L,e,p,n,d,this);(c=E.then(q).then((function(t,e){return t})))._wqAsync=!0,this._awaitObj.promiseObj[f]=c,this._awaitObj.key.push(f),o.x.UUID++}else c=this._createComponent({id:t,element:i,engineType:D,componentName:L,options:e})}}catch(t){return s.w.printStackTrace(t),null}}}else 3==i.nodeType?(i.T||i.getNodeValue()&&""!=i.getNodeValue().wq_trim())&&(c=new WebSquare.tag(t,null,i)):c=null;return c&&!0!==c._wqAsync&&this._createComponentAfter(c,{org_id:p,scopeObj:n,parentFrame:d}),c}catch(e){s.w.printStackTrace(e,"id ["+t+"] compName["+f+"]")}},d.prototype._createComponent=function(t){try{var e,i=t.id,r=t.element,a=t.engineType,h=t.componentName,d=t.options;if(d&&d.inheritedCompName){if(!WebSquare[a][d.inheritedCompName]){var c;if(WebSquare[a][d.inheritedCompName]=function(t,e,i){WebSquare[a][h].call(this,t,e,i)},o.x.extend(WebSquare[a][d.inheritedCompName].prototype,WebSquare[a][h].prototype),r)for(var u=r.firstChild;null!=u;u=u.nextSibling)if("w2:inheritOverride"==u.nodeName){c=u;break}if(c){var p=n.L.getCDataNodeValue(c).wq_trim();if(""!=p){var g=p.split("="),m=WebSquare[a][d.inheritedCompName],f=new Function("var superComponent = WebSquare[engineType][compName].prototype; return "+g[1]);l.h.setJSONByPath(m,g[0],f())}}for(var b in WebSquare[a][d.inheritedCompName].prototype.overrideFunc)WebSquare[a][d.inheritedCompName].prototype[b]=WebSquare[a][d.inheritedCompName].prototype.overrideFunc[b]}(e=new WebSquare[a][d.inheritedCompName](i,d,r)).options.inheritFrom=h}else e=new WebSquare[a][h](i,d,r);return e}catch(t){s.w.printStackTrace(t,"id ["+i+"] compName["+h+"]")}},d.prototype._createComponentAfter=function(t,e){try{if(!t||!e)return;var i=e.scopeObj,o=e.parentFrame,r=e.org_id;i&&(t.org_id=r,t.scope_obj=i,t.scope_id=i.id),
"function"==typeof t.initAsync&&this._asyncList.push(t.uuid),o&&(t.parentFrame=o)}catch(t){s.w.printStackTrace(t)}},d.prototype.createUDC2=function(t){try{return new WebSquare.uiplugin.udc(t)}catch(t){s.w.printStackTrace(t)}},d.prototype.initAsync=async function(t){try{var e=this.doAsync();return!0!==t&&(e=e.then((function(){return d.awaitAsync()}))),e}catch(t){s.w.printStackTrace(t)}},d.prototype.doAsync=async function(){try{for(var t=[];this._asyncList.length>0;){var e=this._asyncList.shift(),i=o.x.idCache[e];i&&"function"==typeof i.initAsync&&t.push(i.initAsync())}return 0===t.length?Promise.resolve():Promise.all(t).then((function(){return d.doAsync()}))}catch(t){s.w.printStackTrace(t)}},d.prototype.awaitAsync=async function(){try{for(var t=[],e=0;e<d._awaitObj.key.length;e++)t.push(d._awaitObj.promiseObj[d._awaitObj.key[e]]);return 0===t.length?Promise.resolve():(this._awaitObj={key:[],promiseObj:{}},Promise.all(t).then((function(){return d.awaitAsync()})))}catch(t){s.w.printStackTrace(t)}},d=new d},2278:(t,e,i)=>{i.d(e,{i:()=>l});var o=i(2981),s=i(2085),r=i(1656),a=i(3082),n=i(1960),l=function(){};l.prototype.setStyle=function(t,e){try{if(!this.render)return;WebSquare.style.setStyle(this.render,t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.setStyleAsync=function(t,e){try{if(!this.render)return;this.__setStyleAsyncPeriod||(this.__setStyleAsyncPeriod=1),r.v.setTimer((function(){r.v.measureTime((function(t){this.__setStyleAsyncPeriod=parseInt(t.aver,10)}),{key:this.id+"_setStyleAsync",caller:this}),WebSquare.style.setStyle(this.render,t,e)}),{key:this.id+"_setStyleAsync",caller:this,delay:this.__setStyleAsyncPeriod,max:this.__setStyleAsyncPeriod})}catch(t){s.w.printStackTrace(t)}},l.prototype.getStyle=function(t){try{return this.render?WebSquare.style.getStyle(this.render,t):null}catch(t){s.w.printStackTrace(t)}},l.prototype.setPosition=function(t,e,i){try{if(!this.render)return;t=parseInt(t),e=parseInt(e),"absolute"==(i=i||"absolute")?(null==t||isNaN(t)||(this.render.style.left=t+"px"),null==e||isNaN(e)||(this.render.style.top=e+"px")):"delta"==i&&(null==t||isNaN(t)||(this.render.style.left=this.render.offsetLeft+t+"px"),null==e||isNaN(e)||(this.render.style.top=this.render.offsetTop+e+"px"))}catch(t){s.w.printStackTrace(t)}},l.prototype.getPosition=function(t){try{if(!this.render)return;return"top"==(t=t.toLowerCase())?this.render.offsetTop:"left"==t?this.render.offsetLeft:void $l("getPosition : wrong positionName["+t+"]")}catch(t){s.w.printStackTrace(t)}},l.prototype.getAbsolutePosition=function(t,e){try{var i=null==e?this.render:e;return"top"==t?WebSquare.style.getAbsoluteTop(i):"left"==t?WebSquare.style.getAbsoluteLeft(i):void $l("getPosition : wrong positionName["+t+"]")}catch(t){s.w.printStackTrace(t)}},l.prototype.setSize=function(t,e){try{WebSquare.style.setSize(this.render,t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.getSize=function(t){try{return WebSquare.style.getSize(this.render,t)}catch(t){s.w.printStackTrace(t)}},l.prototype.show=function(t){try{WebSquare.style.show(this.render,t),a.D.isIE()&&parseInt(r.v.browserVersion(),10)<10||this.refreshAdaptive(),this.checkResize_recursive(this)}catch(t){s.w.printStackTrace(t)}},l.prototype.hide=function(){try{WebSquare.style.hide(this.render)}catch(t){s.w.printStackTrace(t)}},l.prototype.refreshAdaptive=function(){try{if("group"==this.options.pluginName&&"table"==this.options.tagname&&("crosstab"==this.options.adaptive||"layout"==this.options.adaptive)){var t=parseInt(this.options.adaptiveThreshold)||480;parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=t&&(this.removeAdaptive(),this.addAdaptive())}if(this.constructor===WebSquare.tag&&3!==this.element.nodeType){var e=this.element.getAttribute("adaptive");if("crosstab"==e||"layout"==e){t=parseInt(this.element.getAttribute("adaptiveThreshold"))||480;parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=t&&(this.removeAdaptive(),this.addAdaptive())}}
for(var i=0;i<this.childControlList.length;i++)this.childControlList[i].refreshAdaptive&&this.childControlList[i].refreshAdaptive()}catch(t){s.w.printStackTrace(t)}},l.prototype.setOpacity=function(t){try{this.setStyle("opacity",t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getOpacity=function(){try{return this.getStyle("opacity")}catch(t){s.w.printStackTrace(t)}},l.addClassRe=new RegExp("\\s\\s"),l.prototype.addClass=function(t){try{1===arguments.length?this.__addClass(this.render,arguments[0]):2===arguments.length&&this.__addClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__addClass=function(t,e){try{if(!t||!e)return;var i=t.className;0==this.__hasClass(t,e)&&(i=(i+=" "+e).replace(l.addClassRe," ").wq_trim(),t.className=i)}catch(t){s.w.printStackTrace(t)}},l.prototype.removeClass=function(t){try{1===arguments.length?this.__removeClass(this.render,arguments[0]):2===arguments.length&&this.__removeClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__removeClass=function(t,e){try{if(!t||!e)return;if(0==this.__hasClass(t,e))return;var i=r.v.getConfiguration("/WebSquare/style/removeDefaultClass/@value");if((""==i||"false"==i)&&1==this.__hasClass(this.options.className,e))return;var o=" "+t.className+" ";o=(o=o.replace(" "+e+" "," ")).replace(l.addClassRe," ").wq_trim(),t.className=o}catch(t){s.w.printStackTrace(t)}},l.prototype.changeClass=function(t,e){try{2===arguments.length?this.__changeClass(this.render,arguments[0],arguments[1]):3===arguments.length&&this.__changeClass(arguments[0],arguments[1],arguments[2])}catch(t){s.w.printStackTrace(t)}},l.prototype.__changeClass=function(t,e,i){try{this.removeClass(t,e),this.addClass(t,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.hasClass=function(t){try{return 1===arguments.length?this.__hasClass(this.render,arguments[0]):2===arguments.length&&this.__hasClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__hasClass=function(t,e){try{return!!t&&(" "+("string"==typeof t?t||"":t.className)+" ").indexOf(" "+e+" ")>=0}catch(t){s.w.printStackTrace(t)}},l.prototype.toggleClass=function(t){try{return 1===arguments.length?this.__toggleClass(this.render,arguments[0]):2===arguments.length&&this.__toggleClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__toggleClass=function(t,e){try{this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.movable=function(t,e){try{if(!this.render)return;var i=this;if(!this.handleFinishMove){"w2drag_move","w2drag_move",e=o.x.extend({id:"w2drag_move",className:"w2drag_move",makeGhostLayer:function(t){return t.setSize(i.render.offsetWidth,i.render.offsetHeight),t},handleFinish:function(t,e,o,s){var r=parseInt(i.getStyle("left")),a=parseInt(i.getStyle("top"));i.setPosition(r+o,a+s)}},e||{}),this.handleFinishMove=function(t){n.B.stopEvent(t),WebSquare.dragdrop.gDragManager.activate(t,i.render,e)}}t?(this.event.addListener(this.render,"onmousedown",this.handleFinishMove),this.event.addListener(this.render,"ontouchstart",this.handleFinishMove)):(this.event.removeListener(this.render,"onmousedown",this.handleFinishMove),this.event.removeListener(this.render,"ontouchstart",this.handleFinishMove))}catch(t){s.w.printStackTrace(t)}},l.prototype.resizable=function(t,e){try{if(!this.render)return;var i=this;this.handleFinishResize||(this.handleFinishResize=function(t){n.B.stopEvent(t),WebSquare.dragdrop.gDragManager.activate(t,i.render,{id:"w2drag_resize",className:"w2drag_resize",mode:"resize",makeGhostLayer:function(t){return t.setSize(i.render.offsetWidth,i.render.offsetHeight),t},handleFinish:function(t,e,o,s){var r=parseInt(i.getStyle("width")),a=parseInt(i.getStyle("height"));i.setSize(r+o,a+s)}})}),t?this.event.addListener(this.render,"onmousedown",this.handleFinishResize):this.event.removeListener(this.render,"onmousedown",this.handleFinishResize)}catch(t){s.w.printStackTrace(t)}},
l.prototype.visible=function(t){try{if(!this.render)return;t=a.D.getBoolean(t);this.render.style.visibility=t?"visible":"hidden"}catch(t){s.w.printStackTrace(t)}},l.prototype.showBySize=function(){try{if(!this.render)return;this.setStyle("visibility","visible"),this.render.style.overflow="",this.render.style.width="",this.render.style.height=""}catch(t){s.w.printStackTrace(t)}},l.prototype.hideBySize=function(){try{if(!this.render)return;this.setStyle("visibility","hidden"),this.render.style.overflow="hidden",this.render.style.width="0px",this.render.style.height="0px"}catch(t){s.w.printStackTrace(t)}},l.prototype.getStyleValue=function(t){return this.getStyle(t)},l.prototype.getStyleIntValue=function(t){return parseInt(this.getStyle(t))},l.prototype.getStyleProperty=function(t){try{return this.getStyle(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getClass=function(){try{return this.options.className}catch(t){s.w.printStackTrace(t)}},l.prototype.highlight=function(t){try{if(!this.render)return;this.render.style.border=t?"solid 1px blue":""}catch(t){s.w.printStackTrace(t)}},l.prototype.getInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e=/([\w-]*)\s*:\s*([^;]*)/g,i=[],o={};i=e.exec(WebSquare.initStyle[this.id].style);)o[i[1]]=i[2].wq_trim();return o.className=WebSquare.initStyle[this.id].className,o[t]?o[t]:o}},l.prototype.setInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e,i=/([\w-]*)\s*:\s*([^;]*)/g,o={};e=i.exec(WebSquare.initStyle[this.id].style);)o[e[1]]=e[2].wq_trim();var s=o[t]?t:"";if(s){var r=s.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})),a=o[s]?o[s]:o[s.toUpperCase()];document.getElementById(this.id).style[r]=a}else document.getElementById(this.id).style.cssText=WebSquare.initStyle[this.id].style;document.getElementById(this.id).className=WebSquare.initStyle[this.id].className}},l.prototype.enable=function(){},l.prototype.disable=function(){},l.prototype.hover=function(t,e){},l.prototype.checkResize_recursive=function(t){try{if("function"==typeof t.checkResize&&t.checkResize(),t.options&&"inputCalendar"==t.options.pluginName&&"function"==typeof t.setSetting&&t.setSetting(),t.childControlList)for(var e=0;e<t.childControlList.length;e++)this.checkResize_recursive(t.childControlList[e])}catch(t){s.w.printStackTrace(t)}}},7716:(t,e,i)=>{i.d(e,{g:()=>s});var o=i(2085),s=function(){};s.prototype.setClassName=function(t){try{if(!t)return;var e="w2"+this.getPluginName()+" "+t;this.setClassByElement(e)}catch(t){o.w.printStackTrace(t)}},s.prototype.addClassName=function(t){try{this.addClass(this.render,t)}catch(t){o.w.printStackTrace(t)}},s.prototype.removeClassName=function(t){try{this.removeClass(this.render,t)}catch(t){o.w.printStackTrace(t)}},s.prototype.getChildEl=function(t,e,i){try{if(this.getClassByElement(e)==t)return this.addClass(e,i),e;for(var s=0;s<e.children.length;s++)if(e.children[s].children.length>0)null!=e.children[s]?this.getChildEl(t,e.children[s],i):$l("child가 null 입니다.");else if(null!=e&&this.getClassByElement(e)==t)return e}catch(t){o.w.printStackTrace(t)}},s.prototype.removeChildEl=function(t,e,i){try{if(this.getClassByElement(e)==t)return this.removeClass(e,i),e;for(var s=0;s<e.children.length;s++)if(e.children[s].children.length>0)null!=e.children[s]?this.removeChildEl(t,e.children[s],i):$l("child가 null 입니다.");else if(null!=e&&this.getClassByElement(e)==t)return e}catch(t){o.w.printStackTrace(t)}},s.prototype.getClassByElement=function(t){try{return this.ssplit(t.className)||this.ssplit(t.getAttribute("class"))||""}catch(t){o.w.printStackTrace(t)}},s.prototype.setClassByElement=function(t){try{if(!t)return;this.render.className=t}catch(t){o.w.printStackTrace(t)}},s.prototype.ssplit=function(t){try{if(void 0===t||null==t)return t;var e=t.split(" ");return e.length>0?e[0]:t}catch(t){o.w.printStackTrace(t)}}},4930:(t,e,i)=>{i.d(e,{U:()=>d});var o=i(2981),s=i(6301),r=i(2085),a=i(1656),n=i(3082),l=i(7275),h=i(1960),d=function(){try{this.cache=null
}catch(t){r.w.printStackTrace(t)}};d.prototype.addListener=function(t,e,i,n){try{var l=document.addEventListener&&!s.d.browserCheck.ie,h=!l&&document.attachEvent;if(!l&&!h)return;if(n=n||null,"onchange"==e.toLowerCase().wq_trim())return;var d=function(e){this.getAttribute&&"disabled"===this.getAttribute("disabled")||void 0!==this.disabled&&(this.disabled||"true"==this.getAttribute("disabled"))||i.call(t,e)},c=e;if(l&&"on"===e.slice(0,2)&&(c=e.slice(2)),l&&"onmousewheel"==e.toLowerCase()&&a.v.browserCheck.moz&&(c="DOMMouseScroll"),t===document.documentElement||t===document.body){o.x.eventCacheObj[t.tagName]||(o.x.eventCacheObj[t.tagName]={}),o.x.eventCacheObj[t.tagName][c]||(o.x.eventCacheObj[t.tagName][c]={evFunc:function(){},evFuncArr:[]});var u=o.x.eventCacheObj[t.tagName][c],p=u.evFuncArr;if(0===p.length){var g=function(e){for(var i=o.x.eventCacheObj[e.currentTarget.tagName][e.type].evFuncArr,s=0;s<i.length;s++)this.getAttribute&&"disabled"===this.getAttribute("disabled")||void 0!==this.disabled&&(this.disabled||"true"==this.getAttribute("disabled"))||i[s].call(t,e)};u.evFunc=g,l?t.addEventListener(c,g,n):h&&t.attachEvent(c,g,n)}p.push(i),this.setCache(t,e,i,n)}else l?t.addEventListener(c,d,n):h&&t.attachEvent(c,d,n),this.setCache(t,e,d,n)}catch(t){$l(this.addListener.caller,"caller"),r.w.printStackTrace(t)}},d.prototype.addListener2=function(t,e,i,o){try{var s=function(t,e){return function(i){e.call(t,i||window.event)}}(o||t,i);t.attachEvent?t.attachEvent(e,s):t.addEventListener&&("mousewheel"==(e=e.slice(2)).wq_trim().toLowerCase()&&n.D.isFF()&&(e="DOMMouseScroll"),t.addEventListener(e,s,!1)),this.setCache(t,e,s,null)}catch(t){r.w.printStackTrace(t)}},d.prototype.removeListener=function(t,e,i,s){try{s=s||null;try{var a=e;if("on"===e.slice(0,2)&&(a=e.slice(2)),(t===document.documentElement||t===document.body)&&o.x.eventCacheObj[t.tagName]&&o.x.eventCacheObj[t.tagName][a]){for(var l=o.x.eventCacheObj[t.tagName][a],h=l.evFuncArr,d=0;d<h.length;d++)if(h[d]===i){h.splice(d,1);break}if(0!==h.length)return;i=l.evFunc,delete o.x.eventCacheObj[t.tagName][a]}!n.D.isIE()&&t.removeEventListener?t.removeEventListener(a,i,s):t.detachEvent&&t.detachEvent(e,i)}catch(t){}}catch(t){r.w.printStackTrace(t)}},d.prototype.setCache=function(t,e,i,o){try{this.cache||(this.cache=[]),this.cache.push([t,e,i,o])}catch(t){r.w.printStackTrace(t)}},d.prototype.clearCache=function(){try{if(!this.cache)return;for(var t=0;t<this.cache.length;t++)this.removeListener.apply(this,this.cache[t]),this.cache[t]=null;this.cache=null}catch(t){r.w.printStackTrace(t)}},d.prototype.bindAsEventListener=function(t,e,...i){try{var o=!("object"!=typeof i[0]||null==i[0]||!0!==i[0].eventonreadonly);return function(s){if(!0!==t._removed){if(s&&"click"===s.type&&t.options&&!0===t.options.preventMultipleClick)if(n.D.isIEAllVersion()&&t.options.clickInterval){var r=(new Date).getTime();if(r-t.lastClickTime<t.options.clickInterval)return void("anchor"==t.options.pluginName&&t.options.enableReadOnly&&h.B.preventDefault(s));t.lastClickTime=r}else if("number"==typeof s.detail&&s.detail>1)return void("anchor"==t.options.pluginName&&t.options.enableReadOnly&&h.B.preventDefault(s));if(!(t.__removed_object__||t.getDisabled&&1==t.getDisabled())){if(t.options&&t.options.overrideKey&&s&&(s.charCode||s.keyCode)){var a=s.charCode?s.charCode:s.keyCode,l=t.options.overrideKey.split(",");if("all"===l[0])return;for(var d=0;d<l.length;d++)if(parseInt(l[d],10)===a)return}if(s&&"resize"!=s.type&&t.options&&"gridView"!=t.options.pluginName&&"grid"!=t.options.pluginName){var c=t.getReadOnly&&1==t.getReadOnly(),u=!1;if(c&&t.options&&("input"==t.options.pluginName&&"noFormat"==t.options.copyOnReadOnly?u=n.D.isIEAllVersion()?67==s.keyCode&&(s.ctrlKey||s.metaKey):"copy"==s.type:"anchor"==t.options.pluginName&&t.options.enableReadOnly&&h.B.preventDefault(s)),c&&!u&&!o)return}return s&&"mousedown"===s.type&&WebSquare.getBody().getLayerListener().otherClick(s),e.apply(t,[s||window.event].concat(i))}}}
}catch(t){r.w.printStackTrace(t)}},d.prototype.clearElement=function(t){try{var e,i=0,o=0,s="";if(e=t.attributes){o=e.length;for(i=0;i<o;i++)e[i]&&"function"==typeof t[s=e[i].name]&&(t[s]=null)}}catch(t){r.w.printStackTrace(t)}},d.prototype.getTarget=function(t,e){try{e=e||"main";for(var i=h.B.getTarget(t);i;){var o=i.getAttribute("catch");if(o&&o.indexOf(e)>-1)break;i=i.parentNode}return i}catch(t){r.w.printStackTrace(t)}},d.prototype.getTargetIterator=function(t,e,i){try{var o=h.B.getTarget(t);return new WebSquare.targetIterator(o,e,i)}catch(t){r.w.printStackTrace(t)}},d.prototype.getChildIterator=function(t){try{return new WebSquare.childIterator(t)}catch(t){r.w.printStackTrace(t)}},d.prototype.isMe=function(t,e){try{for(var i=h.B.getTarget(t);null!=i;){if(i==e)return!0;i=i.parentNode}return!1}catch(t){r.w.printStackTrace(t)}},d.prototype.isMine=function(t,e){try{for(var i=h.B.getTarget(t);null!=i;){if(i.id&&i.id.indexOf(e.id)>=0)return!0;i=i.parentNode}return!1}catch(t){r.w.printStackTrace(t)}},d.prototype.addEvents=function(t,e){try{if(null!=t&&null!=e){for(var i=0;i<e.length;i++)if(h.B.isEventSupported(t.render,e[i].name))switch(e[i].action){case"script":if("function"!=typeof e[i].param.handler&&"string"!=typeof e[i].param.handler){l.k.printLog("Event error ["+t.id+",ev:"+e[i].name+"] : "+e[i].param.handler+" is not a function");break}if(null!=t.systemEventList[e[i].name]&&t.systemEventList[e[i].name].count>0)t.systemEventList[e[i].name].count++;else{t.systemEventList[e[i].name]={},t.systemEventList[e[i].name].count=1;var o=function(e){return function(i){"click"===i.type&&"number"==typeof i.detail&&i.detail>1&&t&&t.options&&!0===t.options.preventMultipleClick||h.B.fireEvent(t,e,i)}}(e[i].name);this.addListener(t.render,e[i].name,o,!1),t.event.cache&&(t.systemEventList[e[i].name].handler=t.event.cache[t.event.cache.length-1][2])}break;default:null!=t.systemEventList[e[i].name]&&t.systemEventList[e[i].name].count>0?t.systemEventList[e[i].name].count++:(t.systemEventList[e[i].name]={},t.systemEventList[e[i].name].count=1,t.systemEventList[e[i].name].handler=function(t,e){return function(i){h.B.fireEvent(t,e,i)}}(t,e[i].name),this.addListener(t.render,e[i].name,t.systemEventList[e[i].name].handler,!1))}t.userEventList=t.userEventList.concat(e)}}catch(t){r.w.printStackTrace(t)}},d.prototype.addUserEvents=function(t,e,i){var o=[];try{if(e){if(void 0!==i){for(var s={},a=0;a<i.length;a++)s[i[a]]="";var n=[];for(a=0;a<e.length;a++)void 0===s[e[a].name]?o.push(e[a]):n.push(e[a]);e=n}t.userEventList=t.userEventList.concat(e)}}catch(t){r.w.printStackTrace(t)}return o},d.prototype.hasEvent=function(t,e){try{if(!this.cache)return!1;for(var i=!1,o=0;o<this.cache.length;o++)if(this.cache[o][0].id===t&&this.cache[o][1]===e){i=!0;break}return i}catch(t){r.w.printStackTrace(t)}},d.prototype.removeEvent=function(t,e){try{if(!this.cache)return 0;var i=0,o=!1;"object"==typeof t&&t&&1===t.nodeType&&(o=!0);for(var s=this.cache.length-1;s>=0;s--){(o?this.cache[s][0]===t:this.cache[s][0].id===t)&&this.cache[s][1]===e&&(this.removeListener.apply(this,this.cache[s]),this.cache[s]=null,this.cache.splice(s,1),i++)}return i}catch(t){r.w.printStackTrace(t)}}},3729:(t,e,i)=>{i.d(e,{E:()=>l});var o=i(2085),s=i(1656),r=i(3082),a=i(5543),n=i(9532),l=function(){};l.prototype._setDataCollectionItemArr=function(t){try{this.itemArr=this.modelControl.getDataCollectionItemsetData(t,{visibleColumn:this.options.visibleColumn,visibleColumnFalseValue:this.options.visibleColumnFalseValue,enableColumn:this.options.enableColumn,enableColumnFalseValue:this.options.enableColumnFalseValue,depthColumn:this.options.depthColumn})||[],this.allItemArr=this.modelControl.getDataCollectionItemsetData(t,{allData:!0,visibleColumn:this.options.visibleColumn,visibleColumnFalseValue:this.options.visibleColumnFalseValue,enableColumn:this.options.enableColumn,enableColumnFalseValue:this.options.enableColumnFalseValue,depthColumn:this.options.depthColumn})||[]}catch(t){
o.w.printStackTrace(t)}},l.prototype.initializeItemArr=function(t,e){var i=this.internal&&!this.modelControl.isDataCollectionItemsetBinded?this.itemsetObj:WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(i.nodeset,i.label,i.value),this.itemsetObj=i,this.itemArr=[],this.allItemArr=[];var o=WebSquare.WebSquareparser.parseChoices(t,e);if(o.length>0)this.itemArr=o;else if(i.nodeset.match("data:")){var s=this.id;if("w2:column"==this.element.getTagName()){if(!this.comp)return;s=this.comp.id}this.modelControl.dataCollectionBindItemset(this.itemsetObj.nodeset),this._setDataCollectionItemArr(s)}else this.itemArr=this.modelControl.getItemsetData();this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.initializeFilter(t),null==this.filterFunc&&"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.refreshItemArr=function(){this.itemArr,this.modelControl.isDataCollectionItemsetBinded?this._setDataCollectionItemArr(this.id):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc?this.filterItemArr():"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.setNodeSet=function(t,e,i){try{this.modelControl.unbindItemset(),t=r.D.isNull(t)?this.itemsetObj.nodeset:t,e=r.D.isNull(e)?this.itemsetObj.label:e,i=r.D.isNull(i)?this.itemsetObj.value:i,this.modelControl.setItemset(t,e,i),this.itemsetObj=this.modelControl.itemsetObj,this.itemArr,this.itemsetObj.nodeset.match("data:")?this._setDataCollectionItemArr(this.id):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc&&this.filterItemArr(),"stop"!==this.activeStatus&&(this.itemsetObj.nodeset.match("data:")?this.modelControl.dataCollectionBindItemset():this.modelControl.bindItemset(),this.refreshItemset("replace"))}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setVisibleColumn=function(t,e){try{this.modelControl.isDataCollectionItemsetBinded&&(this.options.visibleColumn=t||this.options.visibleColumn,this.options.visibleColumnFalseValue=e||this.options.visibleColumnFalseValue,"gridView"==this.itemTableMode?(this.refreshGridViewItemArr(),this.refreshGridVisible()):"grid"==this.itemTableMode?this.refreshGridItemArr():(this._setDataCollectionItemArr(this.id),"function"==typeof this.setSelectItemArr&&this.setSelectItemArr(),this.refreshVisible()))}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setEnableColumn=function(t,e){try{this.modelControl.isDataCollectionItemsetBinded&&(this.options.enableColumn=t||this.options.enableColumn,this.options.enableColumnFalseValue=e||this.options.enableColumnFalseValue,this._setDataCollectionItemArr(this.id),"function"==typeof this.setSelectItemArr&&this.setSelectItemArr(),this.refreshEnable())}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.refreshVisible=function(){try{"function"==typeof this.setSelectOptions&&this.setSelectOptions()}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.refreshGridVisible=function(){try{if("gridView"==this.itemTableMode&&this.itemTable)for(var t=0;t<this.itemArr.length;t++)this.itemArr[t]._hidden?this.itemTable.gridView.setRowVisible(t,!1):this.itemTable.gridView.setRowVisible(t,!0);else this.itemTableMode}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.refreshEnable=function(){try{"function"==typeof this.setSelectOptions&&this.setSelectOptions()}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setGridItemset=function(t){try{if(this.modelControl.unbindItemset(),this.itemsetObj={nodeset:"",
value:"",label:"",items:[]},null!=this.itemTable&&(this.itemTable.remove(),this.itemTable=null),s.v.isXML(t)){a.L.isDocument(t)&&(t=t.documentElement);var e=t.nodeName;if("w2:"===e.slice(0,3)&&(e=e.slice(3)),"gridviewitemset"!==(e=e.toLowerCase())&&"griditemset"!==e)throw{message:"Invalid XML : ["+this.id+".setGridItemset]"};var i="gridviewitemset"===e?"gridView":"grid";this.itemTableMode=i,this.initializeGridItemsetObj(t,i),this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),"gridView"===i?this.refreshGridViewItemArr():this.refreshGridItemArr()}else{var r=JSON.parse(JSON.stringify(t));"number"==typeof r.width&&(r.width=String(r.width)),"number"==typeof r.height&&(r.height=String(r.height));var n=r.item;delete r.item,this.gridViewOptions=r,this.itemsetObj.nodeset=r.nodeset,this.itemsetObj.label=r.label,this.itemsetObj.value=r.value,this.itemsetObj.items=n,this.modelControl.setItemset(r.nodeset,r.label,r.value),this.refreshGridViewItemArr()}this.itemsetObj.nodeset.match("data:")?(this.modelControl.dataCollectionBindItemset(),this.modelControl.isDataCollectionItemsetBinded=!0):this.modelControl.bindItemset(),"stop"!==this.activeStatus&&this.refreshItemset("replace")}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getDataListInfo=function(){try{var t=null;return this.itemsetObj&&(t={},this.itemsetObj.nodeset.match("data:")?(t.nodeset=this.itemsetObj.nodeset.slice(0),t.id=t.nodeset.wq_replaceAll("data:",""),t.value=this.itemsetObj.value,t.label=this.itemsetObj.label):(t.nodeset=this.itemsetObj.nodeset.slice(0),t.value=this.itemsetObj.value,t.label=this.itemsetObj.label)),t}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setGridNodeSet=function(t,e,i,s){try{if("grid"!=this.itemTableMode)return;var a=!1;if(e==this.itemsetObj.label&&i==this.itemsetObj.value||(a=!0),this.itemsetObj.nodeset=t,a&&(this.itemsetObj.label=e,this.itemsetObj.value=i),"[object Array]"!==Object.prototype.toString.call(s))return void $l("setGridNodeSet 함수를 실행하는 중 "+this.id+" 의 gridItemset의 컬럼에 대한 정보가 잘못되었습니다.");for(var n=0;n<this.itemsetObj.items.length;n++)this.itemsetObj.items[n]=s[n];this.modelControl.unbindItemset(),t=r.D.isNull(t)?this.itemsetObj.nodeset:t,e=r.D.isNull(e)?this.itemsetObj.label:e,i=r.D.isNull(i)?this.itemsetObj.value:i,this.modelControl.setItemset(t,e,i),this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc&&this.filterItemArr(),this.modelControl.bindItemset(),this.refreshItemset()}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getItemArray=function(){return this.itemArr},l.prototype.getLocaleItemArr=function(t,e){void 0!==e&&null!=e||(e="label");for(var i=0;i<t.length;i++){var o=t[i],s=this.getLocaleValue(o[e]);s&&(o[e]=s)}return t},l.prototype.initializeFilter=function(t){var e=this.options.filter;this.originalItemArr=this.itemArr,this.setFilterFunc(e),this.filterItemArr()},l.prototype.setFilter=function(t){var e=this.getValue();this.setFilterFunc(t),this.filterItemArr(),this.componentRedraw(e)},l.prototype.setFilterFunc=function(t){try{if(void 0===t||null==t||""==t)this.filterFunc=null;else{var e=r.D.getGlobalFunction(t,this.scope_id);"function"==typeof e&&(this.filterFunc=e)}}catch(t){this.filterFunc=null,o.w.printStackTrace(t)}},l.prototype.filterItemArr=function(){if(null==this.filterFunc)this.itemArr=this.originalItemArr;else{this.itemArr=[];for(var t=0;t<this.originalItemArr.length;t++){var e=this.originalItemArr[t];this.match(e)&&this.itemArr.push(e)}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()}},l.prototype.match=function(t){try{return this.filterFunc.call(this.filterFunc,t.label,t.value,t.xml)}catch(t){return o.w.printStackTrace(t),!1}},l.prototype.initializeGridItemArr=function(t,e){var i,o=requires("uiplugin.grid");this.initAsync=(i=o,function(){return i}),
this.itemsetObj||(this.itemsetObj={nodeset:"",value:"",label:"",items:[]}),this.itemArr||(this.itemArr=[]);var r=this.itemsetObj;e=e||"xf";try{var a=t.getTagName();a.indexOf(":")>=0&&(e=a.split(":")[0])}catch(t){}if(t){var n="xf"==e?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,l=WebSquare.Elem.api.getElementsByTagName(t,"choices",n)[0];if(l){var h=WebSquare.Elem.api.getElementsByTagName(l,"gridItemset",s.v._XML_NAMESPACE.W2)[0];h&&this.initializeGridItemsetObj(h,"grid")}}this.modelControl.setItemset(r.nodeset,r.label,r.value),this.refreshGridItemArr()},l.prototype.initializeGridItemsetObj=function(t,e){try{var i=this.itemsetObj,r=WebSquare.Elem.api.getValue(t,"@nodeset");i.nodeset=null==r?"":r,"/"==i.nodeset.wq_trim().substr(-1)&&(i.nodeset=i.nodeset.wq_trim().slice(0,-1)),this[e+"Options"]=WebSquare.WebSquareparser.parseAttribute(t),i.labelId=this[e+"Options"].labelId,i.valueId=this[e+"Options"].valueId,i.label=this[e+"Options"].label,i.value=this[e+"Options"].value;for(var a=WebSquare.Elem.api.getElementsByTagName(t,"item",s.v._XML_NAMESPACE.W2),n=[],l=0;l<a.length;l++)n.push(WebSquare.WebSquareparser.parseAttribute(a[l]));if(i.labelId||i.valueId)for(l=0;l<n.length;l++)delete n[l]["@tagName"],i.labelId&&n[l].id===i.labelId&&(i.label=n[l].ref),i.valueId&&n[l].id===i.valueId&&(i.value=n[l].ref);i.items=n}catch(t){o.w.printStackTrace(t)}},l.prototype.refreshGridItemArr=function(){this.itemArr=[],this.gridItemArr=[],this.gridRowItemArr=[];var t=this.itemsetObj;if(t.nodeset)if(t.nodeset.match("data:")){var e=this.modelControl.getDataComp();null!=e&&(this._setDataCollectionItemArr(this.modelControl.id),this.gridItemArr=e.getAllData(),this.gridOptions.dataComp=e)}else{var i=n.z.findInstanceNodes(t.nodeset,null,this.scope_id);if(i)for(var o=0;o<i.length;++o){this.itemArr.push({label:a.L.getValue(i[o],t.label),value:a.L.getValue(i[o],t.value),xml:i[o]});for(var s={},r=0;r<t.items.length;r++){t.items[r].id||(t.items[r].id=this.id+"_items"+r);var l="",h=t.items[r].ref;h&&(t.label&&h===t.label?t.labelId=t.items[r].id:t.value&&h===t.value&&(t.valueId=t.items[r].id),l=a.L.getValue(i[o],h)),this.gridItemArr.push(l),s[t.items[r].id]=l}this.gridRowItemArr.push(s)}}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.initializeGridViewItemArr=function(t,e){this.itemsetObj||(this.itemsetObj={nodeset:"",value:"",label:"",items:[]}),this.itemArr||(this.itemArr=[]);var i=this.itemsetObj;e=e||"xf";try{var o=t.getTagName();o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}if(t){var r="xf"==e?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,a=WebSquare.Elem.api.getElementsByTagName(t,"choices",r)[0];if(a){var n=WebSquare.Elem.api.getElementsByTagName(a,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0];n&&this.initializeGridItemsetObj(n,"gridView")}}if("gridViewItemset"===this.options.itemTableType){var l={};for(var h in this.options.itemSet)l[h]=this.options.itemSet[h];for(var h in this.options.gridViewOptions)l[h]=this.options.gridViewOptions[h];l.item=this.options.item,this.setGridItemset(l)}else this.modelControl.setItemset(i.nodeset,i.label,i.value),this.refreshGridViewItemArr()},l.prototype.refreshGridViewItemArr=function(){this.gridViewItemArr=[],this.gridViewRowItemArr=[];var t=this.itemsetObj;if(t.nodeset&&t.nodeset.match("data:")){var e=this.modelControl.getDataComp();if(null!=e){var i="";this.constructor!==WebSquare.uiplugin.cellInfo&&(i=this.modelControl.id),this._setDataCollectionItemArr(i),this.gridViewItemArr=this.modelControl.getDataCollectionItemsetData(i,{allColumn:!0}),this.gridViewOptions.dataComp=e}}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype._initDisplayMode=function(){try{switch(this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}}catch(t){o.w.printStackTrace(t)}
},l.prototype.getItemText=function(t){try{this._initDisplayMode();var e="";if(t>-1&&t<this.getItemCount())switch(e=this.itemArr[t].label,this.options.displayMode){case"0":break;case"1":e=this.itemArr[t].value+this.options.delimiter+e;break;case"2":e=e+this.options.delimiter+this.itemArr[t].value;break;case"3":e=this.itemArr[t].value}return e}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getItemCount=function(t){try{try{return this.itemArr.length}catch(t){o.w.printStackTrace(t,null,this)}}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getVisibleItemCount=function(){try{var t=0;if(this.options.visibleColumn&&this.options.visibleColumnFalseValue)for(var e=0;e<this.itemArr.length;e++)!0!==this.itemArr[e]._hidden&&t++;else t=this.getItemCount();return t}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setDisplayMode=function(t){try{this.options.displayMode=t,this._initDisplayMode()}catch(t){o.w.printStackTrace(t)}}},6615:(t,e,i)=>{i.d(e,{s:()=>f});var o,s,r,a=i(2981),n=i(2085),l=i(1656),h=i(3082),d=i(5543),c=i(7275),u=i(1960),p=i(4519),g=i(2278),m=i(4930),f=function(t,e,i){try{var o=e&&!0===e.__copyOptions;if(this.parentControl=null,this.childControlList=[],this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.render=null,this.scope_obj=null,this.scope_id=null,this.defaultOptions&&null!=this.defaultOptions.escape&&(this.defaultOptions.escape="false"!==l.v.getConfiguration("/WebSquare/escape/@value")),this._eventBubbling=l.v.getConfiguration("/event.ubbling/@value"),o?this.options=e:i?(this.options=this.getConfiguredOptions(),"treeview"==this.options.pluginName&&e&&e.renderType&&"virtual"==e.renderType&&(this.options=a.x.extendKeepingType(this.options,WebSquare.uiplugin.treeview_virtual.prototype.defaultOptions)),this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),this.options.xmlEvents=WebSquare.Parser.parseEvent(i)):this.options=this.getConfiguredOptions(),this.id||(this.id=this.options.id),this.options.id=this.id,e&&(!0===e._skipExtend||o||(this.options=a.x.extendKeepingType(this.options,e)),null==e._idCollisionCheck||o||(this.options._idCollisionCheck=e._idCollisionCheck),e._scope_obj_uuid&&(this.options._scope_obj_uuid=e._scope_obj_uuid,e._scope_obj_org_id&&(this.options._scope_obj_org_id=e._scope_obj_org_id),e._scope_obj_runtime_id&&(this.options._scope_obj_runtime_id=e._scope_obj_runtime_id),this.scope_obj=WebSquare.idCache[this.options._scope_obj_uuid],null!=this.scope_obj&&(this.scope_id=this.scope_obj.id,e._scope_obj_org_id&&e._scope_obj_runtime_id&&(this.id=this.options.id=this.options._scope_obj_runtime_id,this.org_id=this.options._scope_obj_org_id,this.scope_obj.scope||(this.scope_obj.scope={}),this.scope_obj.scope[this.org_id]=this)))),this.options.tooltip=this.options.tooltip||this.options.toolTip,this.options.tooltipSec=this.options.tooltipSec||this.options.toolTipSec,i){var s=WebSquare.Elem.api.getLocalName(i),r=a.x.componentsCache,h=r[s];h||(h=r[s]={}),h[this.uuid]=!0,this._wTagName=s}if(this.id){if(null!=window[WebSquare.noConflict].comp[this.id]||null!=window[WebSquare.noConflict].data[this.id])if(this.options._idCollisionCheck)if(null!=window[WebSquare.noConflict].comp[this.id]&&window[WebSquare.noConflict].comp[this.id]._orgUUID==window[WebSquare.noConflict].comp[this.id].uuid)window[WebSquare.noConflict].comp[this.id]._orgId=null,delete window[WebSquare.noConflict].comp[this.id]._orgId;else{if(null==WebSquare.WebSquaredoc.idCollisionList[this.id]){var d=window[WebSquare.noConflict].comp[this.id]||window[WebSquare.noConflict].data[this.id];WebSquare.WebSquaredoc.idCollisionList[this.id]=[d.uuid]}WebSquare.WebSquaredoc.idCollisionList[this.id].push(this.uuid);var u=WebSquare.language.getMessage("E_comp_duplicated_Msg",t)||"id["+t+"] 가 중복사용되었습니다. 소스코드를 확인하세요.";c.k.printLog(u),alert(u)}else try{
null!=(d=window[WebSquare.noConflict].comp[this.id]||window[WebSquare.noConflict].data[this.id])&&"function"==typeof d.remove&&d.remove(),c.k.printLog("["+t+"] removed")}catch(t){n.w.printStackTrace(t,null,this)}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&"body"!=this.options.pluginName&&(window[this.id]=this),"body"!=this.options.pluginName&&(window[WebSquare.noConflict].comp[this.id]=this),"selectbox"==this.options.pluginName&&e&&e.renderType&&(this.options.renderType=e.renderType),this.dom={},this.attributes=[],!o&&i&&this.options.parseAttributes&&(this.getAttributeNode=this.getAttributeNode||WebSquare.xfControl.attributes.getAttributeNode,this.setAttributeNode=this.setAttributeNode||WebSquare.xfControl.attributes.setAttributeNode,this.removeAttributeNode=this.removeAttributeNode||WebSquare.xfControl.attributes.removeAttributeNode),this.activeStatus="stop",this.completed=!1,this.domStatus="",this.modelControl=new WebSquare.modelControl(this.id,this.options.model,this.options.ref,this.options.bind,this.options._scope_obj_uuid),this.event=new m.U,this.initialize(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},this.dataObjInfo={}}catch(t){n.w.printStackTrace(t,null,this)}};a.x.extend(f.prototype,p.$.prototype),a.x.extend(f.prototype,g.i.prototype),f.prototype.defaultOptions={},f.prototype.configuredOptions={},f.prototype.getConfiguredOptions=function(){var t,e,i=this.defaultOptions.pluginName,o={};if("selectbox"===i&&"native"===this.defaultOptions.renderType&&(i="selectbox_native"),this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],systemEvents:[],xmlEvents:null,value:"",ref:"",model:"",bind:"",style:"",className:"",tabIndex:"",readOnly:!1,disabled:!1,useLocale:!1,useDefaultLabel:!1,localeRef:"",useConfig:!1,toolTip:"",tooltip:"",parentEvent:"",_idCollisionCheck:!1,_scope_obj_uuid:null,_scope_obj_org_id:"",_scope_obj_runtime_id:"",preventMultipleClick:!1},this.defaultOptions);void 0!==s.useLocale&&"true"===l.v.getConfiguration("/WebSquare/useLocale/@value")&&(s.useLocale=!0,s.useDefaultLabel="true"===l.v.getConfiguration("/WebSquare/useLocale/@useDefaultLabel"));var r=l.v.getConfiguration("/WebSquare/useItemLocale/@value");""!==r&&void 0!==r&&(s.useItemLocale=h.D.getBoolean(r));var n=!0;if(s.useConfig||h.D.getBoolean(l.v.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var d=l.v.getConfig(i);s=a.x.extendKeepingType(s,d),n=h.D.isEmptyObject(d)}if("selectbox_native"===i&&!0===n){var c="selectbox";if(s.useConfig||h.D.getBoolean(l.v.getConfiguration("/WebSquare/selectbox/useConfig/@value"))){d=l.v.getConfig(c);s=a.x.extendKeepingType(s,d)}}for(var u in t=[],e=[],s)t.push(u),e.push(s[u]);this.configuredOptions[i]={keys:t,values:e}}for(var p=0;p<t.length;p++)o[t[p]]=e[p];return o},f.prototype.initialize=function(t){},f.prototype.finalize=function(){try{u.B.fireEvent(this,"ondestroyed")}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.applyConfigOption=function(t){try{var e=l.v.getConfig(this.options.pluginName);return t=a.x.extendKeepingType(t,e)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.setProperty=function(t,e){try{if(this.render[t]!=e){this.render[t]=e;var i="string"==typeof t?t.toLowerCase():t;"disabled"!==i&&"readonly"!==i||(e?this.render.setAttribute(i,i):this.render.removeAttribute(i)),this.onPropertyChange(t,e)}}catch(t){n.w.printStackTrace(t)}return this},f.prototype.getProperty=function(t){try{return this.render[t]}catch(t){n.w.printStackTrace(t)}},f.prototype.setAttribute=function(t,e){try{this.options[t]!=e&&(this.options[t]=e,u.B.fireEvent(this,"onattributechanged",t,e))}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getAttribute=function(t){try{
return this.options[t]}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.redraw=function(){try{if(!this.render)return;var t=this.toHTML(),e=t.match(/(\<[^<>]*\>)(.*)(\<\/.*\>)/);if(e&&4==e.length){var i=e[2];this.render.innerHTML=i}else alert("cannot redraw : "+this.id)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.writeTo=function(t,e,i,o){try{if(this.render)return;var s=this.toHTML().wq_trim(),r=s.indexOf(">")+1,a=s.lastIndexOf("<"),l=a<r,h=s.substring(0,r).wq_trim(),c=l?"":s.substring(r,a),u=l?"":s.substring(a).wq_trim();if(""!=h&&""!=u||""!=h&&l){var p=h.match(/\<([^ \>]*)/)[1].toLowerCase();if({iframe:!0,img:!0,a:!0,source:!0,embed:!0,form:!0,frame:!0,frameset:!0,line:!0,script:!0,object:!0}[p]){h=h.replace(/&/g,"&amp;")}var g=d.L.parse(h+u),m=WebSquare.WebSquareparser.parseAttribute(g.documentElement);if("table"===p){var f=document.createElement("div");f.innerHTML=s,this.render=f.firstChild;try{for(var b in m)"style"==b?this.render.style.cssText=m[b]:"className"==b?this.render.className=m[b]:this.render[b]=m[b]}catch(t){n.w.printStackTrace(t,null,this)}}else{this.render=document.createElement(p);try{for(var b in m)"style"==b?this.render.style.cssText=m[b]:"className"==b?this.render.className=m[b]:this.render[b]=m[b];c&&"iframe"!=p&&"input"!=p&&"img"!=p&&(this.render.innerHTML=c)}catch(t){n.w.printStackTrace(t,null,this)}}o&&"number"==typeof o.index?t.render?(t.render.insertBefore(this.render,t.render.childNodes[o.index]),this.parentControl!=t&&t.addControl(this)):t.insertBefore&&t.insertBefore(this.render,t.childNodes[o.index]):"number"==typeof e&&t.targetNode?t.render?(t.render.insertBefore(this.render,t.targetNode),this.parentControl!=t&&t.addControl(this)):t.insertBefore?t.insertBefore(this.render,t.targetNode):alert("cannot writeTo : "+this.id):t.render?(t.render.appendChild(this.render),this.parentControl!=t&&t.addControl(this)):t.appendChild?t.appendChild(this.render):alert("cannot writeTo : "+this.id)}try{null!=i&&WebSquare.idCache[i]&&(this.parentFrame=i,WebSquare.idCache[i].childAllControlList.push(this.uuid))}catch(t){n.w.printStackTrace(t,null,this),n.w.printError("parentFrame is not wframe")}}catch(t){n.w.printStackTrace(t,null,this)}},f.appendToRe1=new RegExp("[\\n\\t\\r]*","g"),f.appendToRe2=new RegExp("(^\\<[^<>]*\\>)(.*)(\\<\\/.*\\>$)"),f.appendToRe3=new RegExp("\\<([^ \\>]*)"),f.prototype.appendTo=function(t,e){try{if(this.render)return;var i="",o="",s="",r=this.toHTML().wq_trim(),a=(r=r.replace(WebSquare.xfControl.appendToRe1,"")).match(WebSquare.xfControl.appendToRe2);if(a&&4==a.length?(i=a[1],o=a[2],s=a[3]):a||"<"!=r.charAt(0)||">"!=r.charAt(r.length-1)||(i=r),""!=i){var l=d.L.parse(i+s),c=WebSquare.WebSquareparser.parseAttribute(l.documentElement),u=i.match(WebSquare.xfControl.appendToRe3)[1];this.render=document.createElement(u);try{for(var p in c)"style"!=p?"className"!=p?this.render.setAttribute(p,c[p]):this.render.className=c[p]:this.render.style.cssText=c[p]}catch(t){n.w.printStackTrace(t,null,this)}if("div"==u.toLowerCase())this.render.innerHTML=o;else{var g=d.L.parse(r).documentElement.childNodes;if(g.length>0)for(var m=0;m<g.length;m++){var f=g[m];this.render.appendChild(h.D.XMLToHTML(f))}}t.contentRender?(t.contentRender.appendChild(this.render),t.addControl(this)):t.render?(t.render.appendChild(this.render),t.addControl(this)):t.appendChild?t.appendChild(this.render):alert("cannot appendTo : "+this.id)}try{null!=e&&WebSquare.idCache[e]&&(this.parentFrame=e,WebSquare.idCache[e].childAllControlList.push(this.uuid))}catch(t){n.w.printStackTrace(t,null,this),
n.w.printError("parentFrame is not wframe")}}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.appendChild=function(t){try{if(!this.render||!t)return;t.render?this.render.appendChild(t.render):this.render.appendChild(t)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.refreshDom=function(){try{if(!this.render)return;for(var t=0;t<this.childControlList.length;t++){var e=this.childControlList[t];e.refreshDom(),"new"==e.domStatus&&(e.render?this.render.appendChild(e.render):e.writeTo(this),e.domStatus="")}}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.refresh=function(){},f.prototype.refreshItemset=function(){},f.prototype.preActivate=function(){try{if("stop"!=this.activeStatus)return void c.k.printLog("duplicated call for preActivate");this.setRender();var t=this.childControlList;"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t="sync"===this.options.mode?[]:t[0].childControlList);for(var e=0;e<t.length;e++)"stop"==t[e].activeStatus&&t[e].preActivate();this.render&&(this.activeStatus="preActive",this.setPreAction&&this.setPreAction(),this.modelControl.binding())}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.activate=function(){try{if("active"==this.activeStatus)return void $l("!!!WARNING!!! duplicate call 'activate' for : "+this.id);"stop"==this.activeStatus&&this.preActivate();var t=this.childControlList;"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t=[]);for(var e=0;e<t.length;e++)"active"!=t[e].activeStatus&&t[e].activate();if(this.render){if(this.activeStatus="active",this.setUserAction(),this.setAction(),"wframe"===this.options.pluginName||this.options.udcName||"udc2"===this.options.pluginName){var i=null;if(this.options.nextTabID){i=$("#"+this.id+" *:wq:tabbable"),null==WebSquare.tabOrder[this.id]&&(WebSquare.tabOrder[this.id]={});var o=null;this.options.udcName?this.parentFrame&&void 0!==WebSquare.idCache[this.parentFrame]&&(o=WebSquare.idCache[this.parentFrame].id):o=this.scope_id;var s=null!=o?h.D.getComponentById(this.options.nextTabID,o).id:this.options.nextTabID;WebSquare.tabOrder[this.id].nextTabID=s;var r=$(i[i.length-1]).wq()[0];null!=r&&(null==WebSquare.tabOrder[s]&&(WebSquare.tabOrder[s]={}),WebSquare.tabOrder[s].preTabID=r.id,null==WebSquare.tabOrder[r.id]&&(WebSquare.tabOrder[r.id]={}),WebSquare.tabOrder[r.id].nextTabID=s)}if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var a=null;if(null!=this.options.firstTabID?a=h.D.getComponentById(this.options.firstTabID,this.id):(null==i&&(i=$("#"+this.id+" *:wq:tabbable")),a=$(i[0]).wq()[0]),null!=a){var d=WebSquare.tabOrder[this.id].preTabID;WebSquare.tabOrder[d].nextTabID=a.id,null==WebSquare.tabOrder[a.id]&&(WebSquare.tabOrder[a.id]={}),WebSquare.tabOrder[a.id].preTabID=d}}}if(this.options.tabIndex)if("uiplugin.inputCalendar"==this.options.pluginType)this.getElementById(this.id+"_input").tabIndex=this.options.tabIndex;else if("uiplugin.selectbox"==this.options.pluginType&&"native"==this.options.renderType){this.getElementById(this.id+"_input_0").tabIndex=this.options.tabIndex}else this.render.tabIndex=this.options.tabIndex;1==this.options.readOnly&&this.setReadOnly(this.options.readOnly),1==this.options.disabled&&this.setDisabled(this.options.disabled);var c=h.D.getBoolean(l.v.getConfiguration("/WebSquare/hideTooltipDisabledComp/@value"));1==this.options.disabled&&""!=this.options.tooltip&&c||""!=this.options.tooltip&&this.setToolTip(this.render,this.options.tooltip),""!=this.options.tooltipId&&this.setToolTipComp(this.render,this.options.tooltipId),u.B.fireEvent(this,"oncreated",this.options),this.modelControl.isDataCollectionRefBinded&&this.bind("onclick",this.setRefPosition),this.modelControl.isDataCollectionRefBinded}}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.deactivate=function(){try{this.activeStatus="stop"
;for(var t=0;t<this.childControlList.length;t++)this.childControlList[t].deactivate();this.modelControl.unbinding(),this.event.clearElement(this.render),this.event.clearCache()}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.remove=function(t){try{var e=null;null!=this.render&&(e=this.render.getAttribute("id"));var i=this.getParent();this.destroy(t);var o=null;e&&(o=document.getElementById(e)),null==o||t||(WebSquare.removeNode(o),o=null),i&&i.removeControl(this);var s=WebSquare.getBody()||{};for(var r in s.childControlList)s.childControlList[r]==this&&s.childControlList.splice(r,1)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.empty=function(){try{return this.destroy(),void(this.render.innerHTML="")}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.adaptDocType=function(){try{if("trigger".indexOf(this.options.pluginName)>-1)return;if(this.render!=document.body){this.render.offsetWidth;var t=this.getStyle("height"),e=this.getStyle("width"),i={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0};if(t.indexOf("px")>-1){var o=(t=parseInt(t))-(i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth);this.setStyle("height",o+"px")}else t.indexOf("%");if(e.indexOf("px")>-1){var s=(e=parseInt(e))-(i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth);this.setStyle("width",s+"px")}else e.indexOf("%")}}catch(t){$l("error in adaptDocType : "+this.id),n.w.printStackTrace(t,null,this)}},f.prototype.setRender=function(t){try{t?(this.render&&(this.render.parentNode.insertBefore(t,this.render),this.render.parentNode.removeChild(this.render)),this.render=t):this.render&&null!=this.render.parentElement||(this.render=document.getElementById(this.id)),this.render}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getID=function(){try{return this.id}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getOriginalID=function(){try{return this.org_id?this.org_id:this.id}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.build=function(){try{this.setLayout()}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.setUserAction=function(){try{for(var t in this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.setLayout=function(){},f.prototype.onComplete=function(){if("active"==this.activeStatus&&!this.completed){var t=this.childControlList;if("wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t=[]),t&&t.length>0)for(var e=0;e<t.length;e++)!t[e].completed&&"function"==typeof t[e].onComplete&&t[e].getPluginName&&"multiupload"!=t[e].getPluginName()&&t[e].onComplete();this.completed=!0}},f.prototype.setToolTip=function(t){var e=this.options.tooltip||this.options.toolTip;WebSquare.getBody().setToolTip(this.render,e),""!=e&&this.render.setAttribute("aria-describedby","_balloonTip"),this.render.tooltipShow=0!=t},f.prototype.setToolTipComp=function(){WebSquare.getBody().setToolTipComp(this.render,this.options.tooltipId)},f.prototype._showTooltip=function(t,e,i){if(!this.tooltip){try{var o=l.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(o){var s=h.D.getGlobalFunction(o,this.scope_id),r=!0
;if("function"==typeof s&&(r=s(this)),!r)return}}catch(t){n.w.printStackTrace(t)}this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2"+this.getPluginName()+"_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")}this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),i=this.options.escape?d.L._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i},f.prototype.blur=function(){try{this.render.blur()}catch(t){n.w.printStackTrace(t)}},f.prototype.click=function(){try{this.render.click()}catch(t){n.w.printStackTrace(t)}},f.prototype.focus=function(){try{this.render.focus()}catch(t){n.w.printStackTrace(t)}},f.prototype.select=function(){try{this.render.select()}catch(t){n.w.printStackTrace(t)}},f.prototype.getTabIndex=function(){try{return this.options.tabIndex}catch(t){n.w.printStackTrace(t)}},f.prototype.onPropertyChange=function(t,e){},f.prototype.setDisabled=function(t){try{t=h.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t)}catch(t){n.w.printStackTrace(t)}return t},f.prototype.getDisabled=function(){try{return this.options&&this.options.disabled}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.setReadOnly=function(t){try{t=h.D.getBoolean(t),this.options.readOnly=t,this.setProperty("readOnly",t)}catch(t){n.w.printStackTrace(t,null,this)}return t},f.prototype.getReadOnly=function(){try{return this.options.readOnly}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getRef=function(){try{return this.options.ref}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.displayLocaleValue=function(){if(this.options.useLocale&&this.options.localeRef){var t=this.getLocaleValue(this.options.localeRef);t&&this.setValue(t)}},f.prototype.getLocaleValue=function(t){if(void 0!==t&&null!=t||(t=this.options.localeRef),void 0!==t){t=t.wq_trim();var e=WebSquare.WebSquareLang[t];null==e&&(e=this.options.useDefaultLabel?"":"global_undefined")}return e},f.prototype.getDomList=function(t,e,i){return i=i||this.render,null==this.dom[t]&&(this.dom[t]=i.getElementsByTagName(e)),this.dom[t]},f.prototype.getElementById=function(t){return null==this.dom[t]&&(this.dom[t]=document.getElementById(t)),this.dom[t]},f.prototype.getPluginName=function(){return this.options.pluginName},f.prototype.toHTML=function(){alert("you should override 'toHTML' for "+this.id)},f.prototype.setAction=function(){alert("you should override 'setAction' for "+this.id)},f.prototype.childFiredEvent=function(t,e){arguments[0]=this,u.B.fireEvent.apply(null,arguments)},f.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};if(this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),"active"==this.activeStatus){var s=this.event.addUserEvents(this,[o],this.options.userEvents);s.length>0&&this.event.addEvents(this,s)}}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.bind=function(t,e){try{var i=l.v.getConfiguration("/WebSquare/eventUsePrefix/@value");if("string"==typeof t&&"on"!=t.slice(0,2)&&"false"!=i&&(t="on"+t),"string"==typeof t){var o=(t=t.toLowerCase()).indexOf("(");o>=0&&(t=t.slice(0,o))}this.addEvent(t,e)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.trigger=function(t,e){try{var i=l.v.getConfiguration("/WebSquare/eventUsePrefix/@value");if("string"==typeof t&&"on"!=t.slice(0,2)&&"false"!=i&&(t="on"+t),"string"==typeof t){var o=(t=t.toLowerCase()).indexOf("(");o>=0&&(t=t.slice(0,o))}var s=!1;if(null!=this.options.userEvents)for(var r=0;r<this.options.userEvents.length;r++)if(this.options.userEvents[r]===t){s=!0;break}
if(!s&&u.B.isEventSupported(this.render,t))e&&e.constructor==Array?u.B.fireSystemEvent(this,t,e[0]):u.B.fireSystemEvent(this,t);else{var a=[this,t];a=a.concat(e),u.B.fireEvent.apply(u.B.fireEvent,a),a[0]=null}}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t){var i=(t=t.toLowerCase()).indexOf("(");i>=0&&(t=t.slice(0,i))}if("string"==typeof t&&"function"==typeof e)for(var o=this.userEventList.length-1;o>=0;o--)t===this.userEventList[o].name&&e===this.userEventList[o].param.handler&&(this.userEventList.splice(o,1),"object"==typeof this.systemEventList[t]&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(o=this.userEventList.length-1;o>=0;o--)t===this.userEventList[o].name&&this.userEventList.splice(o,1);"object"==typeof this.systemEventList[t]&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var s in this.systemEventList)this.event.removeListener(this.render,s,this.systemEventList[s].handler);this.userEventList=[],this.systemEventList={}}this.options&&this.options.xmlEvents&&this.userEventList&&(this.options.xmlEvents=this.userEventList.slice())}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},f.prototype.getGenerator=function(){for(var t=this;t.parentControl&&(!(t=t.parentControl).options||"generator"!=t.options.pluginName););return t},f.prototype.getGeneratedIndex=function(){if(!this.options)return null;for(var t=this.getGenerator(),e=h.D.getDataPrefix("g_index"),i=0;i<t.generatedIndexSet.length;i++)if(this.options[e]==t.generatedIndexSet[i])return i},f.prototype.getGeneratedComponent=function(t){var e=this.getGeneratedIndex();return this.getGenerator().getChild(e,t)},f.prototype.getAttributesString=function(t){try{var e,i=" ";if(t){var o={id:"Y",style:"Y",class:"Y",tabIndex:"Y",colSpan:"Y",colspan:"Y",rowSpan:"Y",title:"Y",rowspan:"Y"},s={row_out_style:"Y",rowIndex:"Y",rowindex:"Y",NaNFormat:"Y",footer_id:"Y",width:"Y",inputtype:"Y",header_id:"Y",colindex:"Y",colIndex:"Y",expression:"Y",displayFormat:"Y",displayFormatter:"Y",changeFuncName:"Y",directItemChoice:"Y",tdIndex:"Y",sort:"Y",useFilter:"Y",autoScope:"Y",trIndex:"Y",customFilterItemCnt:"Y",dateValidCheck:"Y",valueNode:"Y",openStatus:"Y",col_id:"Y",rowStyleClassName:"Y",readOnly:"Y",cellStyleClassName:"Y",targetcolumnid:"Y",targetColumnID:"Y",depthColumn:"Y",colId:"Y",showDepth:"Y",style_bak:"Y",tdindex:"Y",onChangeFunction:"Y",sortable:"Y",trindex:"Y",calendarValueType:"Y",colMerge:"Y",colMerged:"Y",inputType:"Y",value:"Y",idx:"Y",summary:"Y",toolTip:"Y",or_bgColor:"Y",localeRef:"Y",editModeEvent:"Y",dataType:"Y",useLocale:"Y",viewType:"Y",displayType:"Y",index:"Y",orderByColumn:"Y",checkboxLabel:"Y",unique_id:"Y",or_wd:"Y"};for(var r in t)"@"!=r.charAt(0)&&(a.x.dataPrefix?void 0!==o[r]?i+=r+"='"+(e=t[r]+"").wq_replaceAll("'","&#39;")+"' ":void 0!==s[r]?(e=t[r]+"",i+=h.D.getDataPrefix(r)+"='"+e.wq_replaceAll("'","&#39;")+"' "):r.indexOf("data-")>-1&&(i+=r+"='"+(e=t[r]+"").wq_replaceAll("'","&#39;")+"' "):i+=r+"='"+(e=t[r]+"").wq_replaceAll("'","&#39;")+"' ")}else if(this.options.parseAttributes){0==this.attributes.length&&this.element&&(this.attributes=WebSquare.Parser.parseAttributesNode(this.element));for(r=0;r<this.attributes.length;r++)e=this.attributes[r].value?this.attributes[r].value.wq_replaceAll("'","&#39;"):"",i+=this.attributes[r].name+"='"+e+"' "}return i}catch(t){return n.w.printStackTrace(t,null,this),""}},f.prototype.invoke=function(t,e,i,o){try{i=a.x.extend({
excludePlugin:"",excludeId:"",includePlugin:"",includeId:""},i||{}),o=o||[];if(!this.getPluginName){if(this.childControlList)for(var s=0;s<this.childControlList.length;s++)WebSquare.xfControl.prototype.invoke.call(this.childControlList[s],t,e,i,o);return}var r={group:!0,tabContainer:!0,Switch:!0,repeat:!0};if(!r[this.getPluginName()])return void $l("The components 'invoke' is not capable of running the component["+this.id+"].");var l=this.getChildren();for(s=0;s<l.length;s++){var h=l[s];if(h.getPluginName)if(r[h.getPluginName()])h.invoke(t,e,i,o);else{if(i.includePlugin.wq_trim().length>0||i.includeId.wq_trim().length>0){if(-1===(" "+i.includePlugin+" ").indexOf(" "+h.options.pluginName+" ")&&-1===(" "+i.includeId+" ").indexOf(" "+h.id+" "))continue}else if((" "+i.excludePlugin+" ").indexOf(" "+h.options.pluginName+" ")>-1||(" "+i.excludeId+" ").indexOf(" "+h.id+" ")>-1)continue;switch(t){case"assert":if(h.getValue){var d="";if(d="function"==typeof e?e(h):e,h.getValue()==d)(c={}).id=h.id,c.org_id=h.getOriginalID(),c.result=!0,o.push(c);else(c={}).id=h.id,c.org_id=h.getOriginalID(),c.result=!1,o.push(c)}break;default:var c;if(h[t]&&"function"==typeof h[t])if("function"==typeof e)(c={}).id=h.id,c.org_id=h.getOriginalID(),c.result=h[t](e(h)),o.push(c);else(c={}).id=h.id,c.org_id=h.getOriginalID(),c.result=h[t](e),o.push(c)}}else WebSquare.xfControl.prototype.invoke.call(h,t,e,i,o)}return o}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getTitle=function(){return this.render.getAttribute("title")},f.prototype.setTitle=function(t){this.render.setAttribute("title",t)},f.prototype.makeScope=function(t){if(this.scope||(this.scope={}),t.childControlList)for(var e=0;e<t.childControlList.length;e++){var i=t.childControlList[e];i.org_id&&(this.scope[i.org_id]=i),i.options&&("wframe"===i.options.pluginName||i.options.udcName)||this.makeScope(i)}},f.attributes=(o={a:["href","target","name","title"]},s={},r=function(t){var e=s[t];if(!e){var i=o[t];if(e={},i)for(var r=0;r<i.length;r++)e[i[r]]=!0;var a=l.v.getConfig("attributes/whiteList");if(a&&a[t]){var n=a[t].split(",");for(r=0;r<n.length;r++)e[n[r]]=!0}s[t]=e}return e},{getAttributeNode:function(t){try{return this.render.getAttribute(t)}catch(t){n.w.printStackTrace(t)}},setAttributeNode:function(t,e){try{r(this.options.tagname)[t]?this.render.setAttribute(t,e):c.k.printLog("Cannot set '"+t+"' attribute node on ["+this.id+"]. See attributes configurations.")}catch(t){n.w.printStackTrace(t)}},removeAttributeNode:function(t){try{r(this.options.tagname)[t]?this.render.removeAttribute(t):c.k.printLog("Cannot remove '"+t+"' attribute node on ["+this.id+"]. See attributes configurations.")}catch(t){n.w.printStackTrace(t)}}}),f.prototype.broadcast=function(t){try{for(var e in this.dataObjInfo){var i=this.dataObjInfo[e];switch(i.initializeType){case"linkedDataList":t.linkedDataList&&i[t.linkedDataList[0]].apply(i,t.linkedDataList[1]||[])}}this.element&&("w2:grid"!=this.element.tagName&&"w2:gridView"!=this.element.tagName||t.gridView&&this[t.gridView[0]].apply(this,t.gridView[1]))}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.rollback=function(){try{var t=this.modelControl.getData(),e=this.getValue(),i=this.options.keepValue?e:t;i!=e&&this.setValue(i)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.setRefPosition=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t=WebSquare.DataCollection.api.getObj(this.modelControl.dataCollectionRefInfo.dataComp);if(t)switch(t.initializeType){case"dataList":if("number"==typeof t.rowPosition){var e=t.getColumnPosition(),i=this.modelControl.dataCollectionRefInfo.colID;e!=i&&t.setColumnPosition(i)}}}}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.fireRefEvent=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t=WebSquare.DataCollection.api.getObj(this.modelControl.dataCollectionRefInfo.dataComp);if(t)switch(t.initializeType){case"dataList":if("number"==typeof t.rowPosition){
var e=t.getColumnPosition(),i=this.modelControl.dataCollectionRefInfo.colID,o=this.getValue();if(e==i)!1===t.fireOnBeforeColumnChangeEvent({newValue:o})&&this.rollback()}}}}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.clone=function(t,e){try{var i=this.element.cloneNode(!0);i.setAttribute("id",t);var o=h.D.dynamicCreate(t,this.options.pluginName,i,e);return o.attributes=this.attributes,o.getAttributeNode=this.getAttributeNode,o.setAttributeNode=this.setAttributeNode,o.removeAttributeNode=this.removeAttributeNode,o}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype._clone=function(t){try{var e=h.D.getDataPrefix("g_index"),i=h.D._copyOptions(this.options);i.id=t.getAttribute("id")||null,i[e]=t.getAttribute(e);var o=WebSquare.controlFactory.createControl(null,i,t,this.scope_obj,!0,this.parentFrame);if(o.attributes=this.attributes,o.getAttributeNode=this.getAttributeNode,o.setAttributeNode=this.setAttributeNode,o.removeAttributeNode=this.removeAttributeNode,"searchbox"===this.options.pluginName){var s=o.input.options.parentEvent;o.input.options=h.D._copyOptions(this.input.options),o.input.options.parentEvent=s||null}return o}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype._cloneRecursive=function(t){try{if(!t)return;var e=this._clone(t),i=this.childControlList;if(i.length>0){for(var o=[],s=t.getChildNodes(),r=0;r<s.length;r++){var a=s[r];1===a.nodeType&&null==WebSquare.controlFactory.createControlHash[a.getLocalName()]&&o.push(a)}var l=0;for(r=0;r<i.length;r++){if("function"==typeof i[r]._cloneRecursive)e.addControl(i[r]._cloneRecursive(o[l]));else if(i[r].constructor===WebSquare.tag){var h=new WebSquare.tag(null,null,i[r].element);h.scope_id=i[r].scope_id,h.scope_obj=i[r].scope_obj,e.addControl(h),l--}l++}}return e}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getURL=function(t,e){try{var i={frameObj:this.scope_obj,tempHome:this.getUdcRoot(),msaName:this.options.msaName};for(var o in e)i[o]=e[o];return l.v._getMsaSrc(t,i)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getImageURL=function(t,e,i){try{var o={frameObj:this.scope_obj,tempHome:this.getUdcRoot(),msaName:this.options.msaName,cssStyle:e};for(var s in i)o[s]=i[s];return o.type="image",l.v._getMsaSrc(t,o)}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getUdcHome=function(){},f.prototype.getUdcRoot=function(){try{if(null!=this.scope_obj&&this.scope_obj.options)return this.scope_obj.options.udcHome}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){n.w.printStackTrace(t,null,this)}},f._resizeInfo={},f.addCheckResize=function(t,e){try{WebSquare.xfControl._resizeInfo[t]=e,h.D.setInterval(WebSquare.xfControl.checkResize,{key:"WebSquare_xfControl_checkResize",delay:70})}catch(t){n.w.printStackTrace(t,null,this)}},f.removeCheckResize=function(t){try{delete WebSquare.xfControl._resizeInfo[t]}catch(t){n.w.printStackTrace(t,null,this)}},f.checkResize=function(){try{var t=0;for(var e in WebSquare.xfControl._resizeInfo){var i=WebSquare.idCache[e];i&&(i[f._resizeInfo[e]](),t++)}0===t&&h.D.clearInterval("WebSquare_xfControl_checkResize")}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype._getMsaName=function(){try{return this.scope_obj?this.scope_obj._getMsaName():""}catch(t){n.w.printStackTrace(t,null,this)}},f.prototype._isSupportNextTabID=function(){try{return this.options&&!0==={anchor:!0,autoComplete:!0,checkbox:!0,checkcombobox:!0,grid:!0,gridView:!0,input:!0,inputCalendar:!0,multiselect:!0,radio:!0,searchbox:!0,selectbox:!0,spinner:!0,textarea:!0,trigger:!0}[this.options.pluginName]}catch(t){n.w.printStackTrace(t)}},f.prototype.focusNextTabOrder=function(){try{
if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=h.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){n.w.printStackTrace(t)}},f.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=h.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){n.w.printStackTrace(t)}},f.prototype.getNextTabID=function(t){try{if(!this._isSupportNextTabID())return null;var e=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(e=WebSquare.tabOrder[this.id].nextTabID),e}catch(t){n.w.printStackTrace(t)}},f.prototype.setNextTabID=function(t,e){try{if(!this._isSupportNextTabID())return;null!=t&&h.D.setNextTabID(this.id,t,e)}catch(t){n.w.printStackTrace(t)}}},6043:(t,e,i)=>{i.d(e,{D:()=>o});var o=function(t){t.constructor===Object?this._elementType="json":this._elementType="xml",this._element=t,this.nodeType=this.getNodeType()};o.prototype.create=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new WebSquare.Elem(t[i]));return e},o.prototype.getNodeType=function(){return"xml"===this._elementType?this._element.nodeType:this._element.T},o.prototype.getNodeValue=function(){var t=null;if("xml"===this._elementType)t=this._element.nodeValue;else if("json"===this._elementType){var e=this._element.T,i=3===e?"text":4===e?"cdata":7===e?"instruction":8===e?"commnet":null;t=null!==i?this._element[i]:null}return t},o.prototype.setNodeValue=function(t){if("xml"===this._elementType)this._element.nodeValue=t;else if("json"===this._elementType){var e=this._element.T,i=3===e?"text":4===e?"cdata":7===e?"instruction":8===e?"commnet":null;null!==i&&(this._element[i]=t)}},o.prototype.getElementsByTagName=function(t){var e=[];return"xml"===this._elementType?e=this._element.getElementsByTagName(t):"json"===this._elementType&&(e=WebSquare.jsonUtil.getNodesByTagName(this._element,t)),this.create(e)},o.prototype.getAttribute=function(t){return"xml"===this._elementType?this._element.getAttribute(t):WebSquare.jsonUtil.getAttribute(this._element,t)},o.prototype.getAttributes=function(){return"xml"===this._elementType?this._element.attributes:WebSquare.jsonUtil.getAttributes(this._element)},o.prototype.setAttribute=function(t,e){var i=void 0;return"xml"===this._elementType?i=this._element.setAttribute(t,e):"json"===this._elementType&&(i=WebSquare.jsonUtil.setAttribute(this._element,t,e)),i},o.prototype.removeAttribute=function(t){var e=void 0;return"xml"===this._elementType?e=this._element.removeAttribute(t):"json"===this._elementType&&(e=WebSquare.jsonUtil.removeAttribute(this._element,t)),e},o.prototype.getTagName=function(){var t="";return"xml"===this._elementType?t=this._element.nodeName:"json"===this._elementType&&(t=this._element.N),t},o.prototype.getLocalName=function(){var t=void 0;if("xml"===this._elementType){var e=this._element.nodeName.split(":");t=2===e.length?e[1]:e[0]}else"json"===this._elementType&&(t=WebSquare.jsonUtil.dropNS(this._element.N));return t},o.prototype.getNamespace=function(){var t="";if("xml"===this._elementType){var e=this._element.nodeName.split(":");t=2===e.length?e[0]:""}else"json"===this._elementType&&(t=WebSquare.jsonUtil.getNS(this._element.N));return t},o.prototype.getParentNode=function(){var t=void 0;return"xml"===this._elementType?t=this._element.parentNode:"json"===this._elementType&&(WebSquare.WebSquaredoc&&"function"==typeof WebSquare.WebSquaredoc.initParent&&WebSquare.WebSquaredoc.initParent(),t=this._element.parent),new WebSquare.Elem(t)},o.prototype.getChildNodes=function(){var t=[];return"xml"===this._elementType?t=this._element.childNodes:"json"===this._elementType&&(t=WebSquare.jsonUtil.getChildNodes(this._element)),this.create(t)},o.prototype.getValue=function(t,e){var i="";return t.startsWith("@")?i=this.getAttribute(t.substring(1)):(i=this.getElementsByTagName(t)[0],void 0!==e&&(i=i.getAttribute(e))),i},o.prototype.appendChild=function(t){
return"xml"===this._elementType?this._element.appendChild(t):WebSquare.jsonUtil.appendChild(this._element,t)},o.prototype.removeChild=function(t){return"xml"===this._elementType?this._element.removeChild(t):WebSquare.jsonUtil.removeChild(this._element,t)},o.prototype.cloneNode=function(t){var e=null;return e="xml"===this._elementType?this._element.cloneNode(t):WebSquare.jsonUtil.cloneNode(this._element,t),new WebSquare.Elem(e)},o.prototype.serialize=function(){return"xml"===this._elementType?WebSquare.xml.serialize(this._elemen):WebSquare.jsonUtil.serialize(this._element)},o.api={},o.api.create=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new WebSquare.Elem(t[i]));return e},o.api.getLocalName=function(t){var e=t;return t instanceof WebSquare.Elem||(e=new WebSquare.Elem(t)),e.getLocalName()},o.api.getElementsByTagName=function(t,e,i){var o=[],s=t;return t instanceof WebSquare.Elem||(s=new WebSquare.Elem(t)),"xml"===s._elementType?o=WebSquare.xml.getElementsByTagName(s._element,e,i):"json"===s._elementType&&(o=WebSquare.jsonUtil.getNodesByTagName(s._element,e,i)),this.create(o)},o.api.getAttribute=function(t,e){var i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),i.getAttribute(e)},o.api.getValue=function(t,e,i){var o=t;return t instanceof WebSquare.Elem||(o=new WebSquare.Elem(t)),o.getValue(e,i)},o.api.getCDataNodeValue=function(t){var e="",i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),"xml"===i._elementType?e=WebSquare.xml.getCDataNodeValue(i._element):"json"===i._elementType&&(e=WebSquare.jsonUtil.getCDataNodeValue(i._element)),e},o.api.getTextNodeValue=function(t){var e="",i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),"xml"===i._elementType?e=WebSquare.xml.getTextNodeValue(i._element):"json"===i._elementType&&(e=WebSquare.jsonUtil.getTextNodeValue(i._element)),e},o.api.findNodes=function(t,e){var i=[],o=t;return t instanceof WebSquare.Elem||(o=new WebSquare.Elem(t)),"xml"===o._elementType?i=WebSquare.xml.findNodes(o._element,e):"json"===o._elementType&&(i=WebSquare.jsonUtil.findNodes(o._element,e)),i},o.type={element:1,attribute:2,text:3,cdata:4,instruction:7,comment:8,document:9}},9532:(t,e,i)=>{i.d(e,{z:()=>r});var o=i(2085),s=i(7275),r={setBindElement:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(i).instances[0].id;t.startsWith("instance(")||null==o?t.indexOf('"')>-1&&(t=t.replace('"',"'")):t=WebSquare.ModelUtil.concatInstanceFunction(t,o),void 0!==WebSquare.WebSquaredoc.boundElementCache[t]&&null!=WebSquare.WebSquaredoc.boundElementCache[t]||(WebSquare.WebSquaredoc.boundElementCache[t]={}),WebSquare.WebSquaredoc.boundElementCache[t][e]=e},setItemsetElement:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(i).instances[0].id;t.startsWith("instance(")||null==o?t.indexOf('"')>-1&&(t=t.replace('"',"'")):t=WebSquare.ModelUtil.concatInstanceFunction(t,o),void 0!==WebSquare.WebSquaredoc.boundElementCache[t]&&null!=WebSquare.WebSquaredoc.boundElementCache[t]||(WebSquare.WebSquaredoc.boundElementCache[t]={}),WebSquare.WebSquaredoc.boundElementCache[t][e]=e},createItemsetElement:function(t,e,i,s){try{this.nodeset=t,this.instance=WebSquare.ModelUtil.getInstanceByXPath(this.nodeset),this.filteredNodeset=WebSquare.ModelUtil.filterInstanceFunction(this.nodeset),this.id=s,this.label=e,this.value=i,this.nodeset.indexOf("/")==t.length-1&&(this.nodeset=this.nodeset.substring(0,t.length-1)),0==this.label.indexOf("/")?this.labelXPath=this.nodeset+this.label:this.labelXPath=this.nodeset+"/"+this.label,0==this.value.indexOf("/")?this.valueXPath=this.nodeset+this.value:this.valueXPath=this.nodeset+"/"+this.value}catch(t){o.w.printStackTrace(t)}},createRefElement:function(t,e){try{this.nodeset=t,this.id=e,this.instance=WebSquare.ModelUtil.getInstanceByXPath(this.nodeset),this.filteredNodeset=WebSquare.ModelUtil.filterInstanceFunction(this.nodeset)}catch(t){o.w.printStackTrace(t)}},createInstanceRefElement:function(t,e,i,s,r,a){try{this.xpath=t,this.id=e,
this.baseNode=i,this.repeatNodeTagName=s,this.cellIdList=r,this.repeatxpath=t+"/"+s[0],this.scopeId=a}catch(t){o.w.printStackTrace(t)}},getBind:function(t,e){try{var i=WebSquare.ModelUtil.getModelByID(e);for(var s in i.binds){var r=WebSquare.WebSquaredoc.models[0].binds[s];if(r.id==t)return r}return null}catch(t){o.w.printStackTrace(t)}},filterInstanceFunction:function(t){return t.startsWith("instance(")&&(t=t.substring(t.indexOf(")")+2,t.length)),t},concatInstanceFunction:function(t,e){var i=t;return t.startsWith("instance(")||(i="instance('"+e+"')/"+t),i},findInstanceNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._findInstanceNode(arguments[0]):this._findInstanceNode({xpath:t,modelId:e,scopeId:i})}catch(t){o.w.printStackTrace(t)}},_findInstanceNode:function(t){var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",s=t.instanceId||"",r=s?this.getInstanceByID(s,i,o):this.getInstanceByXPath(e,i,o);return e=WebSquare.ModelUtil.filterInstanceFunction(e),WebSquare.xml.findNode(r.document,e)},findSerializedNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._findSerializedNode(arguments[0]):this._findSerializedNode({xpath:t,modelId:e,scopeId:i})}catch(t){o.w.printStackTrace(t)}},_findSerializedNode:function(t){try{var e=t.xpath||"",i=t.modelId||"",s=t.scopeId||"",r=t.instanceId||"";return WebSquare.xml.serialize(WebSquare.ModelUtil.findInstanceNode({xpath:e,modelId:i,scopeId:s,instanceId:r}))}catch(t){o.w.printStackTrace(t)}},findInstanceNodes:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._findInstanceNodes(arguments[0]):this._findInstanceNodes({xpath:t,modelId:e,scopeId:i})}catch(t){o.w.printStackTrace(t)}},_findInstanceNodes:function(t){try{var e=t.xpath||"",i=t.modelId||"",s=t.scopeId||"",r=t.instanceId||"",a=r?this.getInstanceByID(r,i,s):this.getInstanceByXPath(e,i,s);return WebSquare.xml.findNodes(a.document,e)}catch(t){o.w.printStackTrace(t)}},getInstanceValue:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._getInstanceValue(arguments[0]):this._getInstanceValue({xpath:t,modelId:e,scopeId:i})}catch(t){o.w.printStackTrace(t)}},_getInstanceValue:function(t){try{var e=t.xpath||"",i=t.modelId||"",s=t.scopeId||"",r=t.instanceId||"",a="",n=this.findInstanceNode({xpath:e,modelId:i,scopeId:s,instanceId:r});if(null==n)return"";if(1!=n.nodeType)return n.nodeValue;for(var l=n.firstChild;null!=l;l=l.nextSibling)3!=l.nodeType&&4!=l.nodeType||(a+=l.nodeValue);return a}catch(t){o.w.printStackTrace(t)}},setInstanceValue:function(t,e,i,s){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._setInstanceValue(arguments[0]):this._setInstanceValue({xpath:t,value:e,modelId:i,scopeId:s})}catch(t){o.w.printStackTrace(t)}},_setInstanceValue:function(t){try{var e=t.xpath||"",i=t.value,r=t.modelId||"",a=t.scopeId||"",n=t.instanceId||"",l=!!t.noRefresh,h=t.gridNoRefresh,d=this.getInstanceByID(n,r,a);if(i=void 0===i||null==i?"":i+"",-1!=e.lastIndexOf("/@")&&e.lastIndexOf("/")==e.lastIndexOf("/@")){var c=e.lastIndexOf("/@"),u=e.substring(c+2),p=e.substring(0,c),g=WebSquare.ModelUtil.findInstanceNode({xpath:p,modelId:r,scopeId:a,instanceId:n});if(null==g){if(null==(m=WebSquare.xml.createNode(d.document,p)))return!1;m.setAttribute(u,i)}else g.setAttribute(u,i);l||WebSquare.WebSquaredoc.detectChange(e,void 0,r,{op:"setInstanceValue",value:i,xpath:p,scope_id:a})}else{var m;if(null==(m=WebSquare.ModelUtil.findInstanceNode({xpath:e,modelId:r,scopeId:a,instanceId:n})))if(null==(m=WebSquare.xml.createNode(d.document,e)))return!1;if(null==m.firstChild){var f=m.ownerDocument.createTextNode(i);WebSquare.xml.appendChild(m,f)}else m.firstChild.nodeValue=i;l||WebSquare.WebSquaredoc.detectChange(e,void 0,r,{op:"setInstanceValue",value:i,xpath:e,gridNoRefresh:h,scope_id:a})
}}catch(t){return s.k.printlog("ERROR["+e+"] ["+i+"] at WebSquare.ModelUtil.setInstanceValue "),o.w.printStackTrace(t),!1}return!0},setInstanceNode:function(t,e,i,o,s,r){return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._setInstanceNode(arguments[0]):this._setInstanceNode({doc:t,xpath:e,modelID:i,mode:o,refresh:s,scopeId:r})},_setInstanceNode:function(t){var e=null;try{var i=t.doc,r=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.refresh,h=t.scopeId||"",d=t.instanceId||"";9==i.nodeType&&(i=i.documentElement);try{var c=d?this.getInstanceByID(d,a,h):this.getInstanceByXPath(r,a,h),u=WebSquare.ModelUtil.filterInstanceFunction(r);e=WebSquare.xml.createNode(c.document,u)}catch(t){throw t}if(null==e){var p=new Error;throw p.number=0,p.description="[WebSquare.ModelUtil.setInstanceNode] destNode가 존재하지 않습니다.",p}var g,m,f=i.cloneNode(!0);if("replace"==n){if((g=this.getInstanceRefElementIndex(r,void 0,h))<0){m=r+"/"+i.tagName;for(var b=i;b&&!((g=this.getInstanceRefElementIndex(m,void 0,h))>=0);)m=m+"/"+b.tagName,b=b.childNodes[0]?b.childNodes[0]:null}}else g=this.getInstanceRefElementIndex(r,void 0,h);switch(n){case"append":WebSquare.xml.appendChild(e,f);break;case"insertBeforeSibling":e.parentNode.insertBefore(f,e);break;case"appendSibling":WebSquare.xml.appendChild(e.parentNode,f);break;case"replace":default:n="replace";for(var y=e.childNodes,v=y.length-1;v>=0;v--)e.removeChild(y.item(v));WebSquare.xml.appendChild(e,f)}var w=WebSquare.ModelUtil.getModelByID();WebSquare.WebSquaredoc.unrender(r);var S=WebSquare.ModelUtil._getNodePath(f);"replace"!==n&&S?w.refresh(n,r+"/"+S):w.refresh(n),0!=l&&g>=0&&WebSquare.WebSquaredoc.detectChange(r,void 0,a,{op:"setInstanceNode",node:f,replaceNode:b,type:n,xpath:r,replacexpath:m,scope_id:h})}catch(t){s.k.printlog("ERROR [xpath:"+r+"] at WebSquare.ModelUtil.setInstanceNode "),o.w.printStackTrace(t)}},setInstanceLastNodeChildNodes:function(t,e,i,o,s,r){return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._setInstanceLastNodeChildNodes(arguments[0]):this._setInstanceLastNodeChildNodes({doc:t,xpath:e,modelID:i,mode:o,refresh:s,scopeId:r})},_setInstanceLastNodeChildNodes:function(t){var e=null;try{var i=t.doc,r=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.refresh,h=t.scopeId||"",d=t.instanceId||"";9==i.nodeType&&(i=i.documentElement);try{var c=d?this.getInstanceByID(d,a,h):this.getInstanceByXPath(r,a,h),u=WebSquare.ModelUtil.filterInstanceFunction(r);e=WebSquare.xml.createNode(c.document,u)}catch(t){throw t}if(null==e){var p=new Error;throw p.number=0,p.description="[WebSquare.ModelUtil.setInstanceNode] destNode가 존재하지 않습니다.",p}var g,m,f=i.cloneNode(!0),b=r.split("/"),y=r.split("[")[0],v=b[b.length-1].match(/[^[\]]+(?=])/)[0],w=this.getInstanceRefElementIndex(r,void 0,h);switch(("replace"==n||"append"==n)&&w>=0&&f.childNodes.length>0&&(m=f.tagName),"append"!=n||WebSquare.xml.hasChildElement(e)||(n="replace"),n){case"append":for(var S=f.childNodes,C=0;C<=S.length-1;C++){if(1==(I=S.item(C)).nodeType){var _=WebSquare.xml.parse(WebSquare.xml.serialize(I)).documentElement;WebSquare.xml.appendChild(e,_)}}break;case"replace":default:n="replace";var x=e.childNodes;for(S=f.childNodes,C=x.length-1;C>=0;C--)e.removeChild(x.item(C));w>=0&&(g=f);for(C=0;C<=S.length-1;C++){var I;if(1==(I=S.item(C)).nodeType){_=WebSquare.xml.parse(WebSquare.xml.serialize(I)).documentElement;WebSquare.xml.appendChild(e,_)}}}var T=WebSquare.ModelUtil.getModelByID();WebSquare.WebSquaredoc.unrender(r),T.refresh(n),0!=l&&w>=0&&g&&g.childNodes.length>0&&WebSquare.WebSquaredoc.detectChange(r,void 0,a,{op:"setInstanceLastNodeChildNodes",repeatNode:m,node:g,type:n,xpath:y,changeIndex:v,scope_id:h})}catch(t){s.k.printlog("ERROR [xpath:"+r+"] at WebSquare.ModelUtil.setInstanceNode "),o.w.printStackTrace(t)}},setInstanceChildNodes:function(t,e,i,o,s,r){
return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._setInstanceChildNodes(arguments[0]):this._setInstanceChildNodes({doc:t,xpath:e,modelID:i,mode:o,refresh:s,scopeId:r})},_setInstanceChildNodes:function(t){var e=null;try{var i=t.doc,r=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.scopeId||"",h=t.instanceId||"";if(-1!=(I=r.split("/"))[I.length-1].indexOf("["))return this._setInstanceLastNodeChildNodes({doc:t.doc,xpath:t.xpath,modelID:t.modelID,mode:t.mode,refresh:t.refresh,instanceId:t.instanceId,scopeId:t.scopeId});9==i.nodeType&&(i=i.documentElement);try{var d=h?this.getInstanceByID(h,a,l):this.getInstanceByXPath(r,a,l),c=WebSquare.ModelUtil.filterInstanceFunction(r);e=WebSquare.xml.createNode(d.document,c)}catch(t){throw t}if(null==e){var u=new Error;throw u.number=0,u.description="[WebSquare.ModelUtil.setInstanceNode] destNode가 존재하지 않습니다.",u}var p=i.cloneNode(!0),g=[],m=[],f=this.getInstanceRefElementIndex(r,void 0,l),b=[];if("append"==n){for(var y=0,v=0;v<e.childNodes.length;v++)1==e.childNodes[v].nodeType&&y++;0==y&&(n="replace")}if("replace"==n&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){var S=WebSquare.WebSquaredoc.instanceRefElement[w].xpath,C=WebSquare.WebSquaredoc.instanceRefElement[w].baseNode,_=WebSquare.WebSquaredoc.instanceRefElement[w].repeatNodeTagName.join("/");if(WebSquare.ModelUtil.isPartialMatchedXPath(S,r)){var x=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId;if(!x||l===x){var I=r.split("/"),T=r;if(S.split("/").length>I.length)if(f>=0&&C==p.tagName)g.push(p),b.push(T);else{var k=WebSquare.ModelUtil.getMatchedData(p,S,C,p.tagName,r);null!=k&&(m.push(k.baseNode),g.push(k.dataNode),b.push(S))}else for(var D=0;D<p.childNodes.length;D++)1==i.nodeType&&p.childNodes[D].tagName==_&&(C!=p.tagName?m.push(p.tagName):m.push(null),g.push(p),b.push(S))}}}switch(n){case"append":var L=p.childNodes;if(f>=0){S=WebSquare.WebSquaredoc.instanceRefElement[f].xpath,C=WebSquare.WebSquaredoc.instanceRefElement[f].baseNode,_=WebSquare.WebSquaredoc.instanceRefElement[f].repeatNodeTagName.join("/");if(m.length>0){if(!g)for(w=0;w<L.length;w++)if(L[w].tagName==m){g.push(L[w]),b.push(S);break}}else C!=p.tagName?m.push(p.tagName):m.push(null),g.push(p),b.push(S)}for(D=0;D<=L.length-1;D++){if(1==(M=L.item(D)).nodeType){var W=WebSquare.xml.parse(WebSquare.xml.serialize(M)).documentElement;WebSquare.xml.appendChild(e,W)}}break;case"replace":default:n="replace";var A=e.childNodes;for(L=p.childNodes,D=A.length-1;D>=0;D--)e.removeChild(A.item(D));for(D=0;D<=L.length-1;D++){var M;if(1==(M=L.item(D)).nodeType){W=WebSquare.xml.parse(WebSquare.xml.serialize(M)).documentElement;WebSquare.xml.appendChild(e,W)}}}var E=WebSquare.ModelUtil.getModelByID();if(WebSquare.WebSquaredoc.unrender(r),E.refresh(n),g.length)for(w=0;w<b.length;w++)WebSquare.WebSquaredoc.detectChange(r,void 0,a,{op:"setInstanceChildNodes",node:g[w],baseNode:m[w],type:n,xpath:b[w],scope_id:l});else if("replace"==n)for(D=0;D<WebSquare.WebSquaredoc.instanceRefElement.length;D++){var q=WebSquare.WebSquaredoc.instanceRefElement[D];if((!q.scopeId||l===q.scopeId)&&-1!=q.xpath.indexOf(r)){var R=WebSquare.ModelUtil.findInstanceNode(q.xpath,void 0,l);(!R||R&&0==R.childNodes.length)&&WebSquare.WebSquaredoc.detectChange(r,void 0,null,{op:"removeInstanceNodeAll",node:p,xpath:r,scope_id:l})}}}catch(t){s.k.printlog("ERROR [xpath:"+r+"] at WebSquare.ModelUtil.setInstanceNode "),o.w.printStackTrace(t)}},getModelByID:function(t){if(void 0===t||null==t||""==t)return WebSquare.WebSquaredoc.models[0];for(var e=0;e<WebSquare.WebSquaredoc.models.length;e++)if(WebSquare.WebSquaredoc.models[e].id==t)return WebSquare.WebSquaredoc.models[e];return null},getInstanceByXPath:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(e);t=t.wq_trim();if(r._createEmptyInstance(e,i),t.startsWith("instance(")){var s=t.indexOf("("),a=t.indexOf(")"),n=new Function("return "+t.substring(s+1,a))()
;for(var l in o.instances){var h=o.instances[l];if(i&&(!h.id||h.id===n)&&i===h.scope_id||h.id==n)return h}return o.instances[0]}var d=o.instances[0];if(i)for(var c=0,u=o.instances.length;c<u;c++){if((h=o.instances[c]).scope_id===i){d=h;break}}return d},getInstanceByID:function(t,e,i){var s=WebSquare.ModelUtil.getModelByID(e);try{for(var a in r._createEmptyInstance(e,i),s.instances){var n=s.instances[a];if(i&&n.scope_id===i&&(!n.id||n.id===t)||n.id===t)return n}}catch(t){o.w.printStackTrace(t)}return s.instances[0]},_createEmptyInstance:function(t,e){var i=WebSquare.ModelUtil.getModelByID(t);try{if(0===i.instances.length){var s=WebSquare.Parser.WebSquareParser.prototype.parseInstance('<xf:instance xmlns:xf="http://www.w3.org/2002/xforms"><data xmlns=""/></xf:instance>',e);i.instances.push(s)}}catch(t){o.w.printStackTrace(t)}},copyNode:function(t,e,i,s,r){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._copyNode(arguments[0]):this._copyNode({srcXPath:t,destXPath:e,srcModelId:i,destModelId:s,scopeId:r})}catch(t){o.w.printStackTrace(t)}},_copyNode:function(t){var e,i=t.srcXPath||"",o=t.destXPath||"",s=t.srcModelId||"",r=t.destModelId||"",a=t.scopeId||"",n=t.srcInstanceId||"",l=t.destInstanceId||"";try{var h=WebSquare.ModelUtil.findInstanceNode({xpath:i,modelId:s,scopeId:a,instanceId:n})}catch(t){throw t}if(null==h)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode가 존재하지 않습니다.",e;try{var d=WebSquare.ModelUtil.getInstanceByID(l,r,a),c=WebSquare.ModelUtil.filterInstanceFunction(o),u=WebSquare.xml.createNode(d.document,c)}catch(t){throw t}if(null==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode가 존재하지 않습니다.",e;for(var p=u.childNodes,g=p.length-1;g>=0;g--)u.removeChild(p.item(g));var m=WebSquare.xml.parse(WebSquare.xml.serialize(h)).documentElement;if(WebSquare.core.browserCheck.chrome||WebSquare.core.browserCheck.safari||WebSquare.core.browserCheck.android||WebSquare.core.browserCheck.blackberry){var f=u.ownerDocument.importNode(m,!0);u.appendChild(f)}else u.appendChild(m);WebSquare.WebSquaredoc.detectChange(o,void 0,r,{scope_id:a})},copyChildrenNodes:function(t,e,i,s,r,a){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._copyChildrenNodes(arguments[0]):this._copyChildrenNodes({srcXPath:t,destXPath:e,mode:i,srcModelId:s,destModelId:r,scopeId:a})}catch(t){o.w.printStackTrace(t)}},_copyLastNodeChildrenNodes:function(t){var e,i,o,s=t.srcXPath||"",r=t.destXPath||"",a=t.mode,n=t.srcModelId||"",l=t.destModelId||"",h=t.srcInstanceId||"",d=t.destInstanceId||"",c=t.scopeId||"";try{var u=WebSquare.ModelUtil.findInstanceNode({xpath:s,modelId:n,instanceId:h,scopeId:c})}catch(t){throw t}if(null==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode가 존재하지 않습니다.",e;try{var p=WebSquare.ModelUtil.getInstanceByID(d,l,c),g=WebSquare.ModelUtil.filterInstanceFunction(r),m=WebSquare.xml.createNode(p.document,g)}catch(t){throw t}if(null==m)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode가 존재하지 않습니다.",e;if(m==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode와 destNode가 동일합니다.",e;var f=r.split("/"),b=r.split("[")[0],y=f[f.length-1].match(/[^[\]]+(?=])/)[0],v=this.getInstanceRefElementIndex(r,void 0,c);switch("replaceAll"==a&&v>=0&&u.childNodes.length>0&&(i=u.tagName),a){case"replaceAll":var w=m.cloneNode(!1),S=u.childNodes;v>=0&&(o=u);for(var C=0;C<=S.length-1;C++)1==S[C].nodeType&&WebSquare.xml.appendChild(w,S[C].cloneNode(!0));m.parentNode.insertBefore(w,m),m.parentNode.removeChild(m),m=null;break;case"append":for(S=u.childNodes,C=0;C<=S.length-1;C++){var _=S.item(C);if(1==_.nodeType){var x=WebSquare.xml.parse(WebSquare.xml.serialize(_)).documentElement;WebSquare.xml.appendChild(m,x)}}}
"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/copyChildrenNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(r,l),v>=0&&o&&o.childNodes.length>0&&WebSquare.WebSquaredoc.detectChange(r,void 0,l,{op:"copyLastNodeChildrenNodes",node:o,type:a,repeatNode:i,changeIndex:y,xpath:b,scope_id:c})},_copyChildrenNodes:function(t){var e,i,o=t.srcXPath||"",s=t.destXPath||"",r=t.mode,a=t.srcModelId||"",n=t.destModelId||"",l=t.srcInstanceId||"",h=t.destInstanceId||"",d=t.scopeId||"",c=s.split("/");if(-1!=c[c.length-1].indexOf("["))return this._copyLastNodeChildrenNodes({srcXPath:o,destXPath:s,mode:r,srcModelId:a,destModelId:n,srcInstanceId:l,destInstanceId:h,scopeId:d});try{var u=WebSquare.ModelUtil.findInstanceNode({xpath:o,modelId:a,instanceId:l,scopeId:d})}catch(t){throw t}if(null==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode가 존재하지 않습니다.",e;try{var p=WebSquare.ModelUtil.getInstanceByID(h,n,d),g=WebSquare.ModelUtil.filterInstanceFunction(s),m=WebSquare.xml.createNode(p.document,g)}catch(t){throw t}if(null==m)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode가 존재하지 않습니다.",e;if(m==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode와 destNode가 동일합니다.",e;var f=this.getInstanceRefElementIndex(s,void 0,d),b=[],y=[],v=[];if("replaceAll"==r&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){if(!(H=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId)||d===H){var S=WebSquare.WebSquaredoc.instanceRefElement[w].xpath,C=WebSquare.WebSquaredoc.instanceRefElement[w].baseNode;if(s==S){var _=WebSquare.ModelUtil.findInstanceNode({xpath:o,instanceId:l,scopeId:d});i=_.tagName,v.push(_),b.push(o),y.push(S)}else if(WebSquare.ModelUtil.isPartialMatchedXPath(S,s)){var x=WebSquare.ModelUtil.getMatchedData(u,S,C,o,s);null!=x&&(v.push(x.dataNode),b.push(x.refXPath),y.push(S))}}}switch(r){case"replaceAll":var I=m.cloneNode(!1),T=u.childNodes;for(w=0;w<=T.length-1;w++)1==T[w].nodeType&&WebSquare.xml.appendChild(I,T[w].cloneNode(!0));m.parentNode.insertBefore(I,m),m.parentNode.removeChild(m),m=null;break;case"overwrite":T=u.childNodes;var k={},D={};for(w=0;w<=T.length-1;w++){if(1==(V=T[w]).nodeType){var L=V.nodeName,W=m.selectNodes(L);W.length>0?(void 0===D[L]?D[L]=0:D[L]=D[L]+1,void 0!==W[D[L]]?k[w]=W[D[L]]:k[w]=null):k[w]=null}}for(w=0;w<=T.length-1;w++){if(1==(V=T[w]).nodeType){var A,M=WebSquare.xml.parse(WebSquare.xml.serialize(V));A=WebSquare.core.browserCheck.chrome||WebSquare.core.browserCheck.safari||WebSquare.core.browserCheck.android||WebSquare.core.browserCheck.blackberry?M.documentElement.cloneNode(!0):M.documentElement,null!=k[w]?m.replaceChild(A,k[w]):WebSquare.xml.appendChild(m,A)}}break;case"replaceOnly":var E=m.childNodes;for(w=0;w<E.length;w++){var q=E.item(w);if(1==q.nodeType){var R=q.nodeName;if(null!=(V=u.selectSingleNode(R))){var N=(M=WebSquare.xml.parse(WebSquare.xml.serialize(V))).documentElement,F=m.ownerDocument.importNode(N,!0);m.replaceChild(F,q)}}}break;case"append":T=u.childNodes;if(f>=0)if(i){if(!v)for(var O=0;O<T.length;O++)if(T[O].tagName==i){v.push(T[O]),b.push(o);break}}else for(O=0;O<u.childNodes.length;O++)if(1==u.childNodes[O].nodeType&&WebSquare.WebSquaredoc.instanceRefElement[f].repeatNodeTagName[0]==u.childNodes[O].tagName){var B=o.split("/");i=B[B.length-1],v.push(u),y.push(s),b.push(o);break}for(w=0;w<=T.length-1;w++){var V;if(1==(V=T.item(w)).nodeType){N=(M=WebSquare.xml.parse(WebSquare.xml.serialize(V))).documentElement;WebSquare.xml.appendChild(m,N)}}}if("true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/copyChildrenNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(s,n),v.length)for(O=0;O<y.length;O++)WebSquare.WebSquaredoc.detectChange(y[O],void 0,n,{op:"copyChildrenNodes",node:v[O],baseNode:i,type:r,xpath:y[O],copiedXPath:b[O],scope_id:d});else if("replaceAll"==r)for(w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){
var P=WebSquare.WebSquaredoc.instanceRefElement[w];if(-1!=P.xpath.indexOf(s)){var H;if((H=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId)&&d!==H)continue;var j=WebSquare.ModelUtil.findInstanceNode(P.xpath,void 0,d);(!j||j&&0==j.childNodes.length)&&WebSquare.WebSquaredoc.detectChange(s,void 0,null,{op:"removeInstanceNodeAll",xpath:s,scope_id:d})}}},refreshModel:function(t,e,i){try{t||(t="");var s=WebSquare.ModelUtil.getModelByID(e);WebSquare.WebSquaredoc.unrender(t),i?s.refresh(void 0,i):s.refresh()}catch(t){o.w.printStackTrace(t)}},removeInstanceNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._removeInstanceNode(arguments[0]):this._removeInstanceNode({xpath:t,refresh:e,scopeId:i})}catch(t){o.w.printStackTrace(t)}},_removeInstanceNode:function(t){try{var e,i=t.xpath||"",s=t.refresh,r=t.scopeId||"",a=t.instanceId||"",n=WebSquare.ModelUtil.findInstanceNode({xpath:i,scopeId:r,instanceId:a}),l=!1,h=[];if(n&&0!=s&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var d=0;d<WebSquare.WebSquaredoc.instanceRefElement.length;d++){var c=WebSquare.WebSquaredoc.instanceRefElement[d].scopeId;if(!c||r===c){var u=i.split("/"),p=WebSquare.WebSquaredoc.instanceRefElement[d].xpath,g=p.split("/");if(g.length>u.length&&WebSquare.ModelUtil.isPartialMatchedXPath(p,i)){for(var m=i,f=u.length;f<g.length-1;f++)m+="/"+g[f];i!=m&&(n=WebSquare.ModelUtil.findInstanceNode({xpath:m,scopeId:r,instanceId:a})),n&&n.selectSingleNode(g[g.length-1])&&(l=!0,h.push(p))}else if(i==p)l=!0,h.push(p);else if(WebSquare.ModelUtil.isPartialMatchedXPath(p,i)){var b=i.lastIndexOf("/");if(b>0){var y=i.substring(b+1);if(y.match(/\[@/i));else{if(-1!=y.indexOf("[")){var v=y.match(/[^[\]]+(?=])/)[0];isNaN(v)?e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[d].repeatxpath,scopeId:r,instanceId:a}),n):(!0,e=parseInt(v)-1)}else e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[d].repeatxpath,scopeId:r,instanceId:a}),n);if(i=p,e>=0)break}}}}}if(n){var w=WebSquare.ModelUtil._getNodePath(n,!0);if(n.parentNode.removeChild(n),"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/removeInstanceNode/@refresh")){var S=i;w&&(S=i+"/"+w),WebSquare.ModelUtil.refreshModel(i,null,S)}}if(e>=0&&(null==s||1==s)&&WebSquare.WebSquaredoc.instanceRefElement.length)WebSquare.WebSquaredoc.detectChange(i,void 0,null,{op:"removeInstanceNode",node:n,deleteIndex:e,xpath:i,scope_id:r});else if(1==l)for(var C=0;C<h.length;C++)WebSquare.WebSquaredoc.detectChange(h[C],void 0,null,{op:"removeInstanceNodeAll",node:n,xpath:h[C],scope_id:r})}catch(t){o.w.printStackTrace(t)}},removeInstanceNodes:function(t,e){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._removeInstanceNodes(arguments[0]):this._removeInstanceNodes({xpath:t,scopeId:e})}catch(t){o.w.printStackTrace(t)}},_removeInstanceNodes:function(t){try{for(var e,i=t.xpath||"",s=t.scopeId||"",r=t.instanceId||"",a=WebSquare.ModelUtil.findInstanceNodes({xpath:i,scopeId:s,instanceId:r}),n=t.gridNoRefresh,l=i,h=a.length-1;h>=0;h--){if(WebSquare.WebSquaredoc.instanceRefElement.length){var d=a[h];if(d&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var c=0;c<WebSquare.WebSquaredoc.instanceRefElement.length;c++){var u=WebSquare.WebSquaredoc.instanceRefElement[c].scopeId;if(!u||s===u){var p=!1,g=[],m=i.split("/"),f=WebSquare.WebSquaredoc.instanceRefElement[c].xpath,b=f.split("/");if(b.length>m.length&&WebSquare.ModelUtil.isPartialMatchedXPath(f,i)){for(var y=i,v=m.length;v<b.length-1;v++)y+="/"+b[v];i!=y&&(d=WebSquare.ModelUtil.findInstanceNode({xpath:y,scopeId:s,instanceId:r})),d&&d.selectSingleNode(b[b.length-1])&&(p=!0,g.push(f))}else if(i==f)p=!0,g.push(f);else if(WebSquare.ModelUtil.isPartialMatchedXPath(f,i)){var w=i.lastIndexOf("/");if(w>0){var S=i.substring(w+1)
;if(S.match(/\[@/i));else{if(-1!=S.indexOf("[")){var C=S.match(/[^[\]]+(?=])/)[0];isNaN(C)?e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[c].repeatxpath,scopeId:s,instanceId:r}),d):(!0,e=parseInt(C)-1)}else e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[c].repeatxpath,scopeId:s,instanceId:r}),a[h]);l=f}}}if(e>=0&&WebSquare.WebSquaredoc.instanceRefElement.length)WebSquare.WebSquaredoc.detectChange(i,void 0,null,{op:"removeInstanceNode",node:d,deleteIndex:e,xpath:l,gridNoRefresh:n,scope_id:s});else if(1==p)for(var _=0;_<g.length;_++)WebSquare.WebSquaredoc.detectChange(g[_],void 0,null,{op:"removeInstanceNodeAll",node:d,xpath:g[_],gridNoRefresh:n,scope_id:s})}}}a[h].parentNode.removeChild(a[h])}"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/removeInstanceNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(i)}catch(t){o.w.printStackTrace(t)}},removeChildNodes:function(t,e){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._removeChildNodes(arguments[0]):this._removeChildNodes({xpath:t,scopeId:e})}catch(t){o.w.printStackTrace(t)}},_removeChildNodes:function(t){try{var e=t.xpath||"",i=t.scopeId||"",s=t.instanceId||"",r=WebSquare.ModelUtil.findInstanceNode({xpath:e,scopeId:i,instanceId:s});if(r)for(var a=r.childNodes,n=a.length-1;n>=0;n--)r.removeChild(a[n])}catch(t){o.w.printStackTrace(t)}},createInstance:function(t){try{if(!t||!t.doc)return!1;for(var e="string"==typeof t.doc?WebSquare.xml.parse(t.doc):t.doc,i=t.modelId||"",s=t.instanceId||"",r=t.scopeId||"",a=t.mode||"append",n=this.getModelByID(i),l=t.targetInstanceId||"",h={idx:-1,obj:null},d=0,c=n.instances.length;d<c;d++){var u=n.instances[d].scopeId;if(!u||r===u){if("replace"!=a&&n.instances[d].id===s)return!1;if("replace"==a&&n.instances[d].id===s){h.obj=n.instances[d],h.idx=d;break}}}var p=WebSquare.WebSquaredoc.models[0].instances[0].xmlNode.cloneNode(!0);p.setAttribute("id",s),r&&p.setAttribute("scopeId",r);var g=WebSquare.xml.getFirstChildElement(p),m=g.childNodes;for(d=m.length-1;d>=0;d--)g.removeChild(m[d]);e=WebSquare.util.isArray(e)?e:[e];for(d=0,c=e.length;d<c;d++){var f=e[d];switch(f.nodeType){case 1:g.appendChild(f);break;case 9:g.appendChild(WebSquare.xml.getFirstChildElement(f));break;default:return!1}}var b=new WebSquare.Model.Instance(p,g);switch(a){case"insertBefore":var y=this.getInstanceByID(l),v=0;for(d=0,c=n.instances.length;d<c;d++)if(n.instances[d]===y){v=d;break}n.instances.splice(v-1<0?0:v-1,0,b),y.xmlNode.parentNode.insertBefore(p,y.xmlNode);break;case"replace":if(!h.obj)return!1;y=h.obj,v=h.idx;var w=WebSquare.xml.getNextSiblingElement(y.xmlNode);n.instances[v]=b,w.parentNode.insertBefore(p,w),n.xmlNode.removeChild(y.xmlNode);break;case"append":default:for(y=l?this.getInstanceByID(l):n.instances[n.instances.length-1],v=n.instances.length-1,d=0,c=n.instances.length;d<c;d++)if(n.instances[d]===y){v=d;break}y.xmlNode.parentNode.insertBefore(p,WebSquare.xml.getNextSiblingElement(n.instances[v].xmlNode)),n.instances.splice(v+1,0,b)}return!0}catch(t){o.w.printStackTrace(t)}return!1},removeInstance:function(t){try{if(!t||!t.instanceId)return!1;for(var e=t.modelId||"",i=t.instanceId||"",s=t.scopeId||"",r=this.getModelByID(e),a=0,n=r.instances.length;a<n;a++){var l=r.instances[a].scopeId;if((!l||s===l)&&(r.instances[a].id&&r.instances[a].id===i))return r.xmlNode.removeChild(r.instances[a].xmlNode),r.instances.splice(a,1),!0}}catch(t){o.w.printStackTrace(t)}return!1},copyInstance:function(t){try{if(!t||!t.srcInstanceId||!t.destInstanceId)return!1;var e=t.srcModelId||"",i=t.destModelId||"",s=t.srcInstanceId||"",r=t.destInstanceId||"",a=t.targetInstanceId||"",n=t.srcScopeId||"",l=t.destScopeId||"",h=t.mode||"append",d=this.getInstanceByID(s,e,n).xmlNode.cloneNode(!0);return this.createInstance({
doc:WebSquare.xml.getFirstChildElements(WebSquare.xml.getFirstChildElement(d)),modelId:i,instanceId:r,mode:h,targetInstanceId:a,scopeId:l})}catch(t){o.w.printStackTrace(t)}return!1},getInstanceIndex:function(t,e){try{if(!Array.prototype.indexOf||WebSquare.util.isIEAllVersion()&&parseInt(WebSquare.core.browserVersion(),10)>8){for(var i=t.length;i--;)if(t[i]===e)return i;return}return t.indexOf(e)}catch(t){o.w.printStackTrace(t,null,this)}},getInstanceRefElementIndex:function(t,e,i){try{for(var s=0;s<WebSquare.WebSquaredoc.instanceRefElement.length;s++)if((!WebSquare.WebSquaredoc.instanceRefElement[s].scopeId||WebSquare.WebSquaredoc.instanceRefElement[s].scopeId===i)&&-1!=t.indexOf(WebSquare.WebSquaredoc.instanceRefElement[s].xpath))return s;if(e)for(var r=t+"/"+e,a=0;a<WebSquare.WebSquaredoc.instanceRefElement.length;a++)if((!WebSquare.WebSquaredoc.instanceRefElement[a].scopeId||WebSquare.WebSquaredoc.instanceRefElement[a].scopeId===i)&&-1!=WebSquare.WebSquaredoc.instanceRefElement[a].xpath.indexOf(r))return a;return}catch(t){o.w.printStackTrace(t,null,this)}},getMatchedData:function(t,e,i,s,r){try{t=t,i=i,e=e;var a=0;if(s&&r){var n=s.split("/"),l=r.split("/");a=Math.max(n.length,l.length)}var h=t.childNodes;if(null!=h)for(var d=h.length,c=0;c<d;c++){var u=s;if(1==h[c].nodeType){var p=h[c].tagName;if(i==p){u+="/"+p;var g=e.split("/").length,m=u.split("/").length;if(g>m)for(var f=0;f<g-m;f++)u="temp/"+u;else if(m>g)for(f=0;f<m-g;f++)e="temp/"+e;if(WebSquare.ModelUtil.isPartialMatchedXPath(e,u+"/"+p,a)){var b=h[c].tagName;return{dataNode:h[c],refXPath:s+"/"+b,baseNode:b}}return}if(u+="/"+p,WebSquare.ModelUtil.isPartialMatchedXPath(e,u,a)){var y=WebSquare.ModelUtil.getMatchedData(h[c],e,i,u,r);if(y)return y}}}return}catch(t){o.w.printStackTrace(t,null,this)}},isPartialMatchedXPath:function(t,e,i){try{for(var s=t.split("/"),r=e.split("/"),a=Math.min(s.length,r.length),n=!1,l=i||0;l<a;l++){var h=s[l].split("["),d=r[l].split("[");if(h.toString()!=d.toString())return!1;n=!0}return n}catch(t){o.w.printStackTrace(t,null,this)}},_getNodePath:function(t,e){for(var i=new Array,o=e?t.firstChild:t;null!=o;o=o.firstChild)if(1==o.nodeType){var s=o.nodeName.split(":");i.push(s)}return i.join("/")},getSubmission:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var s=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.submissions.length;n++){var l=r.submissions[n];if(!WebSquare.strictMode||!s||s===l.scope_id){if(s&&s===l.scope_id&&l.id==s+"_"+t){a=l;break}if(l.id==t&&(a=l,null==s))break}}return a}catch(t){o.w.printStackTrace(t)}},executeSubmission:function(t,e,i,r,a){if(s.k.printLog("WebSquare.ModelUtil.executeSubmission : "+t),null!=t&&""!=t)try{var n=null;if("string"==typeof t){if(null==(n=WebSquare.ModelUtil.getSubmission(t)))return alert(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObjectWithID",t)),null!=a&&a(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObjectWithID",t)),null}else if(null==(n=t))return alert(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObject",t)),null!=a&&a(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObject",t)),null;WebSquare.ModelUtil.setSubmissionStart(n,i),void 0!==e&&n.setRequestData(e);var l=WebSquare.core.getConfiguration("/WebSquare/submission/customHandler/@value")||"";if(""!=n.customHandler&&(l=n.customHandler),""==l||"default"==l)WebSquare.ModelUtil.defaultSubmissionHandler(n,r,a);else if("proworks_soap"==l.toLowerCase());else if(l)if("function"==typeof l)l(n,r,a);else{var h=WebSquare.util.getGlobalFunction(l);"function"==typeof h&&h(n,r,a)}else WebSquare.ModelUtil.defaultSubmissionHandler(n,r,a)}catch(t){o.w.printStackTrace(t)}},createSubmission:function(t,e){try{var i={_pluginName:"submission"};i.id=t.id,i.bind=t.bind||null,i.action=t.action||WebSquare.core.getConfiguration("/WebSquare/submission/action/@value"),i.mode=t.mode||WebSquare.core.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",
i.method=t.method||WebSquare.core.getConfiguration("/WebSquare/submission/method/@value")||"POST",i.mediatype=t.mediatype||WebSquare.core.getConfiguration("/WebSquare/submission/mediatype/@value"),i.encoding=t.encoding||WebSquare.core.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",i.ref=t.ref||"",i.target=t.target,i.replace=t.replace,i.instance=t.instance,i.customHandler=t.customHandler||"",i.errorHandler=t.errorHandler||WebSquare.core.getConfiguration("/WebSquare/submission/errorHandler/@value"),i.processMsg=t.processMsg||WebSquare.core.getConfiguration("/WebSquare/submission/processMsg/@value"),i.soapaction=t.soapaction||"",i.startTime=null,i.endTime=null,i.processStatus=0,i.linkedObj=[],i.timeout=t.timeout||WebSquare.core.getConfiguration("/WebSquare/submission/timeout/@value"),i.singlemode=t.singleMode||!1,i.hideProcessMsg=!1!==t.hideProcessMsg&&(!0===t.hideProcessMsg||"false"!==WebSquare.core.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),i.abortTrigger=!0===WebSquare.util.getBoolean(t.abortTrigger)||!1!==t.abortTrigger&&"true"===WebSquare.core.getConfiguration("/WebSquare/submission/abortTrigger/@value"),i.useModal=t.useModal||WebSquare.core.getConfiguration("/WebSquare/submission/useModal/@value")||!1,i.webtopRef=t.webtopRef||"",i.userData1=t.userData1||"",i.userData2=t.userData2||"",i.withCredentials=t.withCredentials||!1,i.scope_id=t.scope_id||null,i.msaName=t.msaName,i.setRequestData=function(t){this.requestData=t},i.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return o.w.printStackTrace(t,null,this),null}},i.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return o.w.printStackTrace(t,null,this),window}},i._getMsaOption=function(){return{frameObj:this.getScope(),msaName:this.msaName}},i.userEventList=[],t.submitHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit","script",{handler:t.submitHandler})),i.submitHandler=t.submitHandler),t.submitDoneHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-done","script",{handler:t.submitDoneHandler})),i.submitDoneHandler=t.submitDoneHandler),t.submitErrorHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-error","script",{handler:t.submitErrorHandler})),i.submitErrorHandler=t.submitErrorHandler),t.submitTimeoutHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-timeout","script",{handler:t.submitTimeoutHandler})),i.submitTimeoutHandler=t.submitTimeoutHandler),""==i.mediatype&&("post"!=i.method&&"POST"!=i.method||(i.mediatype="application/xml"));var s=WebSquare.ModelUtil.getModelByID(e);i.parentElement=s.xmlNode;for(var r=s.submissions.length-1;r>=0;r--)s.submissions[r].id===i.id&&(s.submissions[r].parentElement=null,s.submissions.splice(r,1));s.submissions.unshift(i),WebSquare.core.useSubmissionGlobal&&(window[i.id]=i),WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===i.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync",i.id)),i.scope_obj=i.getScope()}catch(t){o.w.printStackTrace(t)}},deleteSubmission:function(t,e,i){try{void 0!==i&&null!=i||(i={});var s=i.scope_id||WebSquare.scope_obj;"object"==typeof t&&null!=t&&(t=t.id);for(var r=WebSquare.ModelUtil.getModelByID(e).submissions,a=null,n=0;n<r.length;n++)if(!(WebSquare.strictMode&&s&&s!==r[n].scope_id||r[n].id!==t)){a=r[n],WebSquare.core.useSubmissionGlobal&&(window[t]=null),r[n].parentElement=null,r.splice(n,1);break}return a}catch(t){o.w.printStackTrace(t)}},defaultcallback:function(t,e,i,s,r,a){try{if(e&&!0===e.dead)return void t.abort();if(4==t.readyState)if(i&&(window.clearTimeout(i),window.clearInterval(i),i=null),null==r){var n=WebSquare.ModelUtil.commonResponseHandler(e,t,"async mode",s,r,a),l=n&&n.hidden
;!1===e.hideProcessMsg||l||WebSquare&&WebSquare.ModelUtil&&WebSquare.ModelUtil.deleteMessage_pre(e.id)}else r([e,t,s])}catch(t){o.w.printStackTrace(t),e&&e.scope_id?WebSquare.layer.hideProcessMessage({scope:e.scope_id}):WebSquare.layer.hideProcessMessage()}},abort:function(t,e){var i=null;try{if(""!=t){var r={};if(WebSquare.strictModeFrame&&e&&(r.scope_id=e),null!=(i=WebSquare.ModelUtil.getSubmission(t,null,r)).obfuscator_http){i.obfuscator_http.abort();var a={id:i.id,errorType:"resource-error",resourceUri:WebSquare.util.getSubmissionURL(i.action,i._getMsaOption()),responseHeaders:"",responseStatusCode:"",responseReasonPhrase:"",requestBody:"",responseBody:"",abort:"true"};s.k.printLog("submission force abort. "+i.id),WebSquare.ModelUtil.setSubmissionEnd(i,"submission error",a),WebSquare.layer.deleteSubmissionMessage(i.id);var n=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),l=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(n){"after"==l&&WebSquare.event.fireEvent(i,"xforms-submit-error",a);var h=WebSquare.util.getGlobalFunction(n);"function"==typeof h&&h(a),"before"==l&&WebSquare.event.fireEvent(i,"xforms-submit-error",a)}else WebSquare.event.fireEvent(i,"xforms-submit-error",a);i.obfuscator_http&&(i.obfuscator_http.onreadystatechange=function(){},i.obfuscator_http=null)}return}}catch(t){o.w.printStackTrace(t),i&&i.scope_id?WebSquare.layer.hideProcessMessage({scope:i.scope_id}):WebSquare.layer.hideProcessMessage()}},setSubmissionEnd:function(t,e,i){t.endTime=new Date,t.processStatus=0;for(var o=0;o<t.linkedObj.length;o++)t.linkedObj[o].setDisabled&&t.linkedObj[o].setDisabled(!1);if(t.linkedObj=[],"true"==WebSquare.core.getConfiguration("/WebSquare/submission/showSubmissionTime/@value")){var r=t.startTime.getHours()+":"+t.startTime.getMinutes()+":"+t.startTime.getSeconds()+":"+t.startTime.getMilliseconds(),a=t.endTime.getHours()+":"+t.endTime.getMinutes()+":"+t.endTime.getSeconds()+":"+t.endTime.getMilliseconds(),n="submission id["+t.id+"] start["+r+"] end["+a+"] duration["+(t.endTime-t.startTime)+"ms]";s.k.printLog(n),WebSquare.ax_logger(n)}if(null!=i){var l=WebSquare.core.getConfiguration("/WebSquare/submission/callbackSubmitFunction/@value");try{var h=WebSquare.util.getGlobalFunction(l);"function"==typeof h&&h.call(this,i,t)}catch(t){}}WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/submission/clearRequestDataAfterSubmit/@value"))&&t.setRequestData("")},setSubmissionStart:function(t,e){if(t.startTime=new Date,t.processStatus=1,e&&!WebSquare.util.isArray(e)&&(e=[e]),e)for(var i=0,o=e.length;i<o;i++){var s=e[i];null!=s&&s.setDisabled&&(t.linkedObj.push(s),s.setDisabled(!0))}},doSubmitPreFunc:function(t){var e=t.preSubmitFunction||WebSquare.core.getConfiguration("/WebSquare/submission/preSubmitFunction/@value");if(null!=e&&""!=e)try{var i=WebSquare.util.getGlobalFunction(e);"function"==typeof i&&i(t)}catch(t){}},getRefToReqData:function(t){return t.requestData=null,this.getReqData(t)},defaultSubmissionHandler:function(t,e,i){var r;try{var a={id:M=t.id};""!=t.processMsg&&WebSquare.layer.addSubmissionMessage(t,t.processMsg);var n=WebSquare.event.fireEvent(t,"xforms-submit",a);if(void 0!==n&&0==n)return s.k.printLog("xforms-submit event에서 return이 false이므로 처리를 중단. : "+M),WebSquare.ModelUtil.setSubmissionEnd(t,"submission done",null),WebSquare.layer.deleteSubmissionMessage(M),void(null!=i&&i("xforms-submit event에서 return이 false이므로 처리를 중단. : "+M));WebSquare.ModelUtil.doSubmitPreFunc(t);var l=WebSquare.util.getSubmissionURL(t.action,t._getMsaOption()),h="synchronous"!=t.mode,d=t.target,c=t.replace,u=t.encoding||"utf-8",p=t.mediatype||"application/xml",g=t.accept||p,m=t.method,f=t.soapaction,b=t.timeout,y=this.getReqData(t),v=!1;if(void 0!==y&&y.indexOf("http://schemas.xmlsoap.org/soap/envelope")>-1&&(v=!0),"all"==c){""==WebSquare.requestID&&(WebSquare.requestID="instanceValue");try{var w=document.createElement("form")
;WebSquare.util.isMobile()||(w.encoding="text/plain"),w.action=l,w.method=m,w.style.display="inline",w.acceptCharset="UTF-8";var S=document.createElement("input");S.type="hidden",S.name="targetInstance",WebSquare.core.uriEncoder?S.value=d:S.value=encodeURIComponent(d),w.appendChild(S);var C=document.createElement("input");return C.type="hidden",C.name="instanceValue",WebSquare.core.uriEncoder?C.value=y:C.value=encodeURIComponent(y),w.appendChild(C),document.body.appendChild(w),void w.submit()}catch(t){o.w.printStackTrace(t)}}if(s.k.printLog(l),r=WebSquare.core.getXMLHTTPObject(t.withCredentials),t.obfuscator_http=r,r.open(m,l,h),v&&r.setRequestHeader("soapaction",'"'+f+'"'),""!=WebSquare.requestID){var _=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@mediatype"),x=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@accept");""!=_&&(r.setRequestHeader("Content-Type",_+'; charset="UTF-8"'),"none"!==x&&r.setRequestHeader("Accept",x))}else r.setRequestHeader("Content-Type",p+'; charset="'+u+'"'),"none"!==g&&r.setRequestHeader("Accept",g);"false"!=WebSquare.core.getConfiguration("/WebSquare/submission/customHeader/@value")&&r.setRequestHeader("submissionid",encodeURIComponent(M));var I=t.requestHeader;for(var T in I)r.setRequestHeader(T,I[T]);var k,D=WebSquare.core.getConfiguration("/WebSquare/submission/requestHeaderFunction/@value");if(""!=D){var L=WebSquare.util.getGlobalFunction(D,t.scope_id);"function"==typeof L&&L(r,t)}if(h){try{t.withCredentials&&(r.withCredentials=t.withCredentials)}catch(t){o.w.printStackTrace(t)}b&&(k=window.setTimeout((function(){r.onreadystatechange=function(){},r.abort();var e={id:M,errorType:"timeout-error",resourceUri:l,time:b};WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",e),WebSquare.layer.deleteSubmissionMessage(M),WebSquare.event.fireEvent(t,"xforms-submit-timeout",e),window.clearTimeout(k),null!=i&&i(e.errorType+" :: "+M)}),b)),r.onreadystatechange=function(){WebSquare.ModelUtil.defaultcallback(r,t,k,y,e,i)}}var W=WebSquare.core.getConfiguration("/WebSquare/submission/externalHandler/@value")||"";if(""==W||"default"==W);else if(W)if("function"==typeof W)y=W(y);else{var A=WebSquare.util.getGlobalFunction(W);"function"==typeof A&&(y=A(y,M))}""!=WebSquare.requestID?"true"==WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@encodeURI")?r.send(WebSquare.requestID+encodeURIComponent(y)):r.send(WebSquare.requestID+y):r.send(y),h||(WebSquare.ModelUtil.commonResponseHandler(t,r,"sync mode",y),null!=e&&e([t,r,y]))}catch(e){try{var M=t.id,E=(l=WebSquare.util.getSubmissionURL(t.action,t._getMsaOption()),{id:M,resourceUri:l,errorType:e.name,message:e.message});null!=e.code&&(E.code=e.code),s.k.printLog("submission error("+e.name+")."+M),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",E),WebSquare.layer.deleteSubmissionMessage(M);var q=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),R=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(q){"after"==R&&WebSquare.event.fireEvent(t,"xforms-submit-error",E);var N=WebSquare.util.getGlobalFunction(q);"function"==typeof N&&N(E),"before"==R&&WebSquare.event.fireEvent(t,"xforms-submit-error",E)}else WebSquare.event.fireEvent(t,"xforms-submit-error",E);t&&t.scope_id?WebSquare.layer.hideProcessMessage({scope:t.scope_id}):WebSquare.layer.hideProcessMessage(),null!=i&&i(E.errorType+" :: "+M),r.onreadystatechange=function(){},r=null}catch(t){o.w.printStackTrace(t)}}},getReqData:function(t){var e=t.ref,i=t.instance,o=t.mediatype,s=t.requestData,r=null;null!=t.scope_id&&(r=t.scope_id);var a=null;if(""!=i&&t.parentElement.T!==WebSquare.Elem.type.element){var n=WebSquare.Elem.api.getAttribute(t.parentElement,"id");a=null==n||""==n?WebSquare.ModelUtil.getInstanceByID(i).document:WebSquare.ModelUtil.getInstanceByID(i,n).document}else if(t.parentElement.T===WebSquare.Elem.type.element){
var l=WebSquare.Elem.api.getElementsByTagName(t.parentElement,"instance",WebSquare.core._XML_NAMESPACE.XFORMS)[0];try{l&&(a=WebSquare.xml.parse(l._element._xml).getElementsByTagName("data")[0])}catch(d){}}else a=WebSquare.Elem.api.getElementsByTagName(t.parentElement,"data")[0];var h,d=null,c="";if(void 0!==s&&null!=s)c="application/json"==o?"string"==typeof s?s:JSON.stringify(s):"text/plain"==o?s:WebSquare.xml.serialize(s);else{var u=this.getCollectionCondition(e);if(u.singleMode=WebSquare.util.getBoolean(t.singleMode),""==e&&"application/json"!=o)d=a,c=WebSquare.xml.serialize(d);else if("application/json"==o)if(""!=u.type)if(""!=u.condition){var p=WebSquare.api.data.get(u.type,u.condition,{singleMode:u.singleMode,scope_obj:r});c=JSON.stringify(p)}else{p=WebSquare.api.data.get(u.type,null,{scope_obj:r});c=JSON.stringify(p)}else""==e?c="":WebSquare.ModelUtil.getInstanceValue(e).wq_trim().length>0?c=WebSquare.ModelUtil.getInstanceValue(e):(d=WebSquare.xml.createNode(a,e),h=WebSquare.xml.parse(WebSquare.xml.serialize(d)),c=WebSquare.json.XML2JSONString(h));else if(""!=u.type)if(""!=u.condition){p=WebSquare.api.data.get(u.type,u.condition,{singleMode:u.singleMode,scope_obj:r});c=WebSquare.xml.serialize(p)}else{p=WebSquare.api.data.get(u.type,null,{scope_obj:r});c=WebSquare.xml.serialize(p)}else d=WebSquare.xml.createNode(a,e),c=WebSquare.xml.serialize(d)}return c},getCollectionCondition:function(t){var e={type:"",condition:""},i="";if("string"==typeof t&&0==t.indexOf("data:"))if((i=t.substr(5,t.length).wq_trim()).indexOf(",")>0){var o=i.indexOf(",");e.type=i.substring(0,o).wq_trim();var s=i.substring(o+1,i.length).wq_trim();s.indexOf("'")>-1&&(s=s.wq_replaceAll("'",'"')),0==s.indexOf("[")||(s="["+s+"]"),s=s.replace(/([\[\,])([^\'\"\{\}\s])/g,'$1"$2').replace(/([^\'\"\{\}\s])([\]\,])/g,'$1"$2'),e.condition=s}else e.type=i;return e},setResponseObj:function(t,e,i,o,s,r){e.indexOf("json")>-1?("instance"==i&&(t.responseBody=o),t.responseJSON=s):(e.indexOf("xml")>-1||r)&&(t.responseBody=o)},commonResponseHandler:function(t,e,i,o){var r,a=t.id,n=null;null!=t.scope_id&&(n=t.scope_id);var l=WebSquare.util.getSubmissionURL(t.action,t._getMsaOption()),h="synchronous"!=t.mode,d=t.ref,c=t.bind,u=t.target,p=t.replace,g=t.instance,m=t.encoding,f=t.mediatype,b=t.hideProcessMsg,y=t.method,v=t.action,w=t.errorHandler,S=t.soapaction;if(e.status&&(200>e.status||300<=e.status)||0===e.status){var C={id:a,errorType:"resource-error",resourceUri:l,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseBody:e.responseText,abort:""};s.k.printLog("submission error(E03). Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",C),WebSquare.layer.deleteSubmissionMessage(a);var _=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),x=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(_)"after"==x&&WebSquare.event.fireEvent(t,"xforms-submit-error",C),"function"==typeof(O=WebSquare.util.getGlobalFunction(_))&&O(C),"before"==x&&WebSquare.event.fireEvent(t,"xforms-submit-error",C);else WebSquare.event.fireEvent(t,"xforms-submit-error",C);if(s.k.globalDebug1||"function"==typeof s.k.getGlobalDebug&&s.k.getGlobalDebug()){var I=/>[\s]*</g;(B=new Object).information="url          : "+l+"\nasync        : "+h+"\nref          : "+d+"\nbind         : "+c+"\ntarget       : "+u+"\nreplace      : "+p+"\ninstance     : "+g+"\nencoding     : "+m+"\nmediatype    : "+f+"\nmethod       : "+y+"\naction       : "+v+"\nerrorHandler : "+w+"\nsoapaction   : "+S+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),B.result=e.responseText.replace(I,">\n<"),B.input=o.replace(I,">\n<"),
s.k.showDebugMsg(B,"xml","Default Submission ("+i+")")}return e.onreadystatechange=function(){},e=null,t.obfuscator_http=null,C}var T=WebSquare.core.getConfiguration("/WebSquare/submission/externalResponseHandler/@value")||"",k=e.responseText,D=!1;if(""==T||"default"==T);else if(T)if("function"==typeof T)k=T(k);else{var L=WebSquare.util.getGlobalFunction(T,n);"function"==typeof L&&(k=L(k,a),D=!0)}var W,A,M,E=WebSquare.core.getConfiguration("/WebSquare/submission/responseJSONHandler/@value"),q=e.getResponseHeader("Content-Type")||"",R=!1,N=this.getCollectionCondition(u);N.singleMode=WebSquare.util.getBoolean(t.singleMode),""==q&&s.k.printLog("Response Content-Type is not defined");try{if(q.indexOf("json")>-1){try{if(E)if("function"==typeof E)k=E(k);else"function"==typeof(O=WebSquare.util.getGlobalFunction(E))&&(k=O(k))}catch(t){}if(""!=k)if(A=JSON.parse(k),""!=N.type)W=A,""!=N.condition?WebSquare.api.data.set(N.type,A,N.condition,{singleMode:N.singleMode,scope_obj:n}):WebSquare.api.data.set(N.type,A,null,{scope_obj:n});else if("instance"==p){var F=WebSquare.json.JSON2XMLString(A);W=WebSquare.xml.parse(F),M=WebSquare.xml.parse(F)}else W="text"==p?k:A}else if(q.indexOf("xml")>-1)W=WebSquare.BootLoader.useWebSquareXMLParser?WebSquare.xml.parse(k):WebSquare.BootLoader.useResponseXML?D?WebSquare.xml.parse(k):e.responseXML:WebSquare.xml.parse(k),""!=N.type?""!=N.condition?WebSquare.api.data.set(N.type,W,N.condition,{singleMode:N.singleMode,scope_obj:n}):WebSquare.api.data.set(N.type,W,null,{scope_obj:n}):"instance"==p&&(M=WebSquare.xml.parse(k));else try{k&&k.wq_trim().startsWith("<")?(W=WebSquare.xml.parse(k),""!=N.type?""!=N.condition?WebSquare.api.data.set(N.type,W,N.condition,{singleMode:N.singleMode,scope_obj:n}):WebSquare.api.data.set(N.type,W,null,{scope_obj:n}):W?("instance"==p&&(M=WebSquare.xml.parse(k)),R=!0):W=k):W=k}catch(t){}}catch(t){}try{var O=WebSquare.util.getGlobalFunction(w,n);if(""!=w&&"function"==typeof O&&O(W,a)){C={id:a,errorType:"target-error",resourceUri:l,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseText:k};if(WebSquare.ModelUtil.setResponseObj(C,q,p,W,A,R),s.k.printLog("submission error(E04). Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",C),WebSquare.layer.deleteSubmissionMessage(a),WebSquare.event.fireEvent(t,"xforms-submit-error",C),s.k.globalDebug1||"function"==typeof s.k.getGlobalDebug&&s.k.getGlobalDebug()){var B=new Object;I=/>[\s]*</g;B.information="url          : "+l+"\nasync        : "+h+"\nref          : "+d+"\nbind         : "+c+"\ntarget       : "+u+"\nreplace      : "+p+"\ninstance     : "+g+"\nencoding     : "+m+"\nmediatype    : "+f+"\nmethod       : "+y+"\naction       : "+v+"\nerrorHandler : "+w+"\nsoapaction   : "+S+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),B.result=k.replace(I,">\n<"),B.input=o.replace(I,">\n<"),s.k.showDebugMsg(B,"xml","Default Submission ("+i+")")}r=C}else{""==N.type&&("instance"==p&&null!=M?(WebSquare.WebSquaredoc.models[0].rebuild(M,u),WebSquare.WebSquaredoc.models[0].refresh()):"text"==p&&(WebSquare.WebSquaredoc.models[0].rebuild(k,u),WebSquare.WebSquaredoc.models[0].refresh()));var V={id:a,resourceUri:l,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseText:k};if(WebSquare.ModelUtil.setResponseObj(V,q,p,W,A,R),s.k.printLog("submission complete. Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission complete",V),WebSquare.event.fireEvent(t,"xforms-submit-done",V),!1!==b&&(WebSquare.ModelUtil.deleteMessage_pre(a),V.hidden=!0),
s.k.globalDebug1||"function"==typeof s.k.getGlobalDebug&&s.k.getGlobalDebug()){B=new Object,I=/>[\s]*</g;B.information="url          : "+l+"\nasync        : "+h+"\nref          : "+d+"\nbind         : "+c+"\ntarget       : "+u+"\nreplace      : "+p+"\ninstance     : "+g+"\nencoding     : "+m+"\nmediatype    : "+f+"\nmethod       : "+y+"\naction       : "+v+"\nerrorHandler : "+w+"\nsoapaction   : "+S+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),B.result=k.replace(I,">\n<"),B.input=o.replace(I,">\n<"),s.k.showDebugMsg(B,"xml","Default Submission ("+i+")")}r=V}return e.onreadystatechange=function(){},e=null,t.obfuscator_http=null,r}catch(i){e.onreadystatechange=function(){},e=null,t.obfuscator_http=null}},deleteMessage_pre:function(t){try{var e=WebSquare.ModelUtil.getSubmission(t);if(e&&e.scope_id){var i=WebSquare.layer._getMessageFrame(e.scope_id);if(null!=i)return i.deleteSubmissionMessage(t)}else e=null}catch(t){}setTimeout((function(){WebSquare&&WebSquare.ModelUtil&&WebSquare.ModelUtil.deleteMessage&&WebSquare.ModelUtil.deleteMessage(t)}),50)},deleteMessage:function(t){setTimeout((function(){if(WebSquare.layer)try{var e=WebSquare.ModelUtil.getSubmission(t);(!e||e&&!1!==e.hideProcessMsg)&&WebSquare.layer.deleteSubmissionMessage(t)}catch(e){WebSquare.layer.deleteSubmissionMessage(t)}}),50)},parseResponseHeader:function(t){var e="<header>";try{for(var i=t.getAllResponseHeaders().wq_trim().split("\n"),o=0;o<i.length;o++){var s=i[o].split(":");e+="<name>"+s[0].wq_trim()+"</name><value>"+s[1].wq_trim()+"</value>"}}catch(t){}return e+="</header>"},parseResponseHeaderJSON:function(t){var e="{",i=",";try{for(var o=t.getAllResponseHeaders().wq_trim().split("\n"),s=0;s<o.length;s++){s==o.length-1&&(i="");var r=o[s].split(":");e+='"'+r[0].wq_trim()+'":"'+r[1].wq_trim()+'"'+i}}catch(t){}return e+="}"},createWorkflow:function(t,e){try{var i={};i.id=t.id,i.processMsg=t.processMsg||WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"),i.resolveCallback=t.resolveCallback,i.rejectCallback=t.rejectCallback,i.step=t.step,i.promiseStatus=null,i.promiseValue=null,i.preStatus=!0,i.reject=function(t){this.promiseStatus="REJECT",this.promiseValue=t||"REJECT"},i.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return o.w.printStackTrace(t,null,this),null}},i.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return o.w.printStackTrace(t,null,this),window}},i.userData1=t.userData1||"",i.userData2=t.userData2||"",i.scope_id=t.scope_id||null;for(var s=WebSquare.ModelUtil.getModelByID(e),r=s.workflows.length-1;r>=0;r--)s.workflows[r].id===i.id&&(s.workflows[r].parentElement=null,s.workflows.splice(r,1));return i.parentElement=s.xmlNode,s.workflows.unshift(i),WebSquare.core.useWorkflowGlobal&&(window[i.id]=i),i}catch(t){o.w.printStackTrace(t)}},deleteWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});var s=i.scope_id||WebSquare.scope_obj;"object"==typeof t&&null!=t&&(t=t.id);for(var r=WebSquare.ModelUtil.getModelByID(e).workflows,a=null,n=0;n<r.length;n++)if(!(WebSquare.strictMode&&s&&s!==r[n].scope_id||r[n].id!==t)){a=r[n],WebSquare.core.useWorkflowGlobal&&(window[t]=null),r[n].parentElement=null,r.splice(n,1);break}return a}catch(t){o.w.printStackTrace(t)}},getWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var s=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.workflows.length;n++){var l=r.workflows[n];if(!WebSquare.strictMode||!s||s===l.scope_id){if(s&&s===l.scope_id&&l.id==s+"_"+t){a=l;break}if(l.id==t&&(a=l,null==s))break}}return a}catch(t){o.w.printStackTrace(t)}},getRunningWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={})
;for(var s=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.workflows.length;n++){var l=r.workflows[n];if((!WebSquare.strictMode||!s||s===l.scope_id)&&(l.promiseStatus&&""!=l.promiseStatus)){if(!t){if(s&&s!=l.scope_id)continue;a=l;break}if(s&&s===l.scope_id&&l.id==s+"_"+t){a=l;break}if(l.id!=t){a=null;break}if(a=l,null==s)break}}return a}catch(t){o.w.printStackTrace(t)}},isRunningWorkflow:function(t,e){try{return null!=this.getRunningWorkflow(t,e)}catch(t){o.w.printStackTrace(t)}},getRunningWorkflowID:function(t){try{var e=this.getRunningWorkflow(null,t),i=null;return null!=e&&(i=e.id),i}catch(t){o.w.printStackTrace(t)}},rejectWorkflow:function(t,e,i){try{var s=this.getRunningWorkflow(e,i),r=null;return null!=s&&(s.promiseStatus="REJECT",s.promiseValue=t||"REJECT",r=s),r}catch(t){o.w.printStackTrace(t)}},executeWorkflow:function(t,e){var i,o;void 0!==e&&null!=e||(e={});var r=!1,a=e.scope_function||WebSquare.ModelUtil;if("object"==typeof t){if(o=a.createWorkflow(t),void 0===t.id||""===t.id)return s.k.printLog("workflow ID 가 정의되지 않았습니다."),Promise.resolve(!1);i=t.id,r=!0}else"string"==typeof t&&(i=t,o=a.getWorkflow(t));if(!o)return s.k.printLog("workflow 가 정의되지 않았습니다."),Promise.resolve(!1);if(a.isRunningWorkflow(i))return s.k.printLog("실행중인 workflow 가 존재합니다. workflowID : "+i),Promise.resolve(!1);if(!WebSquare.ModelUtil.validCheck(o.step))return Promise.resolve(!1);o.promiseStatus="PENDING";var n=o.resolveCallback,l=o.rejectCallback;o.result={},o.logTime={},o.submissionList=[],o.logTime.START=new Date;try{var h=WebSquare.ModelUtil.setAddInfo(o.step);""!==o.processMsg||(o.processMsg=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var d={},c={},u=Promise.resolve(),p=0;p<h.length;p++){var g=h[p],m=g.action,f=g.pre,b=g.callOption,y=g.idx;if("submit"===g.type){if("error"==(f=WebSquare.ModelUtil.checkFunction(f,"pre",i,r,o)))return Promise.resolve(!1);var v=a.getSubmission(m);for(var y in m=v.id,o.submissionList.push(m),u=WebSquare.ModelUtil.connectPre(u,c,m,b,o,f),d[m]=WebSquare.ModelUtil.connectPromise(u,m,b,o,f),c)delete d[y];c={}}else if("submitDone"===g.type){var w=g.post;if("error"===(w=WebSquare.ModelUtil.checkFunction(w,"post",i,r,o)))return Promise.resolve(!1);m=(v=a.getSubmission(m)).id;var S=WebSquare.ModelUtil.executeCallback(u,d[m],c,w,o);for(var y in c)delete d[y];(c={})[m]=S}else if("function"===g.type){var C=g.action;if("error"===(C=WebSquare.ModelUtil.checkFunction(C,"function",i,r,o)))return Promise.resolve(!1);for(var y in u=WebSquare.ModelUtil.connectFunction(u,c,C,o),c)delete d[y];c={}}}}catch(t){}var _=[u];for(var y in c)_.push(c[y]);return Promise.all(_).then((function(){o.promiseStatus="RESOLVE",WebSquare.ModelUtil.deleteworkflowMsg(o.submissionList,i),o.logTime.END=new Date,WebSquare.ModelUtil.printTableLog(o),"error"!==(n=WebSquare.ModelUtil.checkFunction(n,"resolveCallback",i,r,o))&&("function"==typeof n&&n(o),WebSquare.ModelUtil.workflowObjClear(i,r,o))})).catch((function(t){WebSquare.ModelUtil.deleteworkflowMsg(o.submissionList,i),"error"!==(l=WebSquare.ModelUtil.checkFunction(l,"rejectCallback",i,r,o))&&(o.promiseStatus="REJECT",o.errorMsg=t,"function"==typeof l&&l(o),s.k.printLog("Workflow reject : "+i+", errorMsg : "+o.errorMsg),WebSquare.ModelUtil.workflowObjClear(i,r,o))}))},checkFunction:function(t,e,i,o,r){var a=t;if("string"==typeof t&&t.length>0){try{t=WebSquare.util.getGlobalFunction(t,r.scope_id)}catch(t){return s.k.printLog("==== "+e+" function error ["+a+"] is not a function \n"),WebSquare.ModelUtil.workflowObjClear(i,o,r),"error"}if("function"!=typeof t)return s.k.printLog("==== "+e+" function error ["+a+"] is not a function \n"),WebSquare.ModelUtil.workflowObjClear(i,o,r),"error"}return t},deleteworkflowMsg:function(t,e){try{if(WebSquare.layer.deleteSubmissionMessage(e),WebSquare.layer.submissionMessageQueue.length>0)for(var i=0;i<t.length;i++)WebSquare.layer.deleteSubmissionMessage(t[i])}catch(t){o.w.printStackTrace(t)}},
workflowObjClear:function(t,e,i){e?WebSquare.ModelUtil.deleteWorkflow(t):(delete i.result,delete i.logTime,i.promiseStatus=null,i.promiseValue=null,i.errorMsg="",i.preStatus=!0)},validCheck:function(t){for(var e,i=[],o=[],r=[],a=0;a<t.length;a++){var n=t[a];"submit"===n.type?(i.push(n.action),o.push(0)):"submitDone"===n.type&&r.push(n.action)}for(a=0;a<r.length;a++){e=r[a];for(var l=!1,h=0,d=0;d<i.length;d++){if(i[d]==e){h=o[d],h++,o[d]=h,l=!0;break}}if(!l)return s.k.printLog("submit 이 정의되지 않은 submitDone이 존재합니다.  [ "+e+" ]"),!1;if(h>1)return s.k.printLog("submitDone 이 하나 이상 존재합니다.  [ "+e+" ]"),!1}return!0},setAddInfo:function(t){for(var e=-1,i=[],o=0;o<t.length;o++){"submit"===(a=t[o]).type?(e++,a.idx=e,a.pos=o,a.callOption="0",i.push(a)):a.idx=-1}for(o=0;o<i.length;o++)for(var s=i[o],r=0;r<t.length;r++){var a;"submitDone"===(a=t[r]).type&&a.action===s.action&&-1===a.idx&&(a.idx=s.idx,t[s.pos].callOption="1")}return t},connectFunction:function(t,e,i,o){var s=[t];for(var r in e)s.push(e[r]);return Promise.all(s).then((function(t){return null===o.promiseStatus||"REJECT"===o.promiseStatus?Promise.reject(o.promiseValue):t instanceof Array?Promise.resolve(i(t[t.length-1],o)):Promise.resolve(i(t,o))}))},connectPre:function(t,e,i,o,s,r){var a=[t];for(var n in e)a.push(e[n]);return Promise.all(a).then((function(t){if(null===s.promiseStatus||"REJECT"===s.promiseStatus)return Promise.reject(s.promiseValue);var e=Promise.resolve(!0);return!("function"==typeof r&&!(e=r(i,s,t)))&&Promise.resolve(e)}))},connectPromise:function(t,e,i,o,r){return t.then((function(t){return t?WebSquare.ModelUtil.callSubmit(e,i,o):(s.k.printLog("submission pre함수 결과[ "+t+" ]에 따라 submission[ "+e+" ]을 실행하지 않습니다."),null)}))},executeCallback:function(t,e,i,o,r){var a=[t];for(var n in i)a.push(i[n]);return Promise.all(a).then((function(){return e})).then((function(t){var e=Promise.resolve();if(null==t)return null;var i=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);return null===r.promiseStatus||"REJECT"===r.promiseStatus?Promise.reject(r.promiseValue):(r.logTime[i.id]=new Date,"function"==typeof o&&(e=Promise.resolve(o(i,r,t)),s.k.printLog("Workflow callback "+i.id)),r.result[i.id]=i,null===r.promiseStatus||"REJECT"===r.promiseStatus?Promise.reject(r.promiseValue):e)}))},callSubmit:function(t,e,i){return null===i.promiseStatus||"REJECT"===i.promiseStatus?Promise.reject(i.promiseValue):WebSquare.ModelUtil.executeWorkFlowSubmission(t).then((function(t){if("0"==e){if(null===i.promiseStatus||"REJECT"===i.promiseStatus)return Promise.reject(i.promiseValue);var o=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);return i.logTime[o.id]=new Date,null===i.promiseStatus||"REJECT"===i.promiseStatus?Promise.reject(i.promiseValue):(i.result[o.id]=o,o)}return t}))},executeWorkFlowSubmission:function(t,e,i){return new Promise((function(o,s){WebSquare.ModelUtil.executeSubmission(t,e,i,o,s)}))},callCommonResponseHandler:function(t,e,i,o){i&&(window.clearTimeout(i),window.clearInterval(i),i=null);var s=WebSquare.ModelUtil.commonResponseHandler(t,e,"async mode",o);if(!1!==s.hideProcessMsg&&WebSquare.ModelUtil.deleteMessage_pre(s.id),null!=s&&null!=s.errorType)throw new Error(s.errorType);return s},executeSerial:function(t,e,i,o,s,r){var a=WebSquare.ModelUtil.makeWorkflowJson("serial",t,e,i,o,s);return WebSquare.ModelUtil.executeWorkflow(a,r)},executeParallel:function(t,e,i,o,s){var r=WebSquare.ModelUtil.makeWorkflowJson("parallel",t,e,i,o,s);return WebSquare.ModelUtil.executeWorkflow(r)},executeWhilst:function(t,e,i,o,r,a,n,l){var h=this.getSubmission(t,null,l);if(h){t=h.id;var d={};d.id=n||"whilstTemp",d.promiseStatus="PENDING",d.result=[],""!=o||(o=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value")),WebSquare.layer.addSubmissionMessage(t,o);for(var c=Promise.resolve(),u=0;"function"==typeof e&&e(t,u)&&"number"==typeof i&&u<i;)u++,c=c.then((function(){return c=WebSquare.ModelUtil.callSubmit(t,"1",d)
})).then((function(t){var e=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);d.result.push(e)}));return c.then((function(){d.promiseStatus="RESOLVE","function"==typeof r&&r(d),s.k.printLog("executeWhilst complete "),WebSquare.ModelUtil.workflowObjClear(n,!0,d)})).catch((function(t){d.promiseStatus="REJECT","function"==typeof a&&a(d),s.k.printLog("executeWhilst rejected "+d.errorMsg),WebSquare.ModelUtil.workflowObjClear(n,!0,d)})),c}},makeWorkflowJson:function(t,e,i,o,s,r){var a={};a.id=r||t+"Temp",a.processMsg=i||WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"),a.resolveCallback=o,a.rejectCallback=s;for(var n=[],l=0;l<e.length;l++){var h=e[l],d={};if(d.type="submit",d.action=h,n.push(d),"serial"===t)(c={type:"submitDone"}).action=h,n.push(c)}if("parallel"===t)for(l=0;l<e.length;l++){var c;h=e[l];(c={type:"submitDone"}).action=h,n.push(c)}return a.step=n,a},printTableLog:function(t){var e=t.step,i={},o=0,r=-1,a="S",n="",l="",h=0,d=0,c=0;for(h=0;h<e.length;h++)l=e[h].action,"function"===(n=e[h].type)&&(n="submit"),"submit"===a&&"submit"===n||r++,"function"===n||"submit"===n?(i[l+"S"]={},i[l+"S"].row=o,i[l+"S"].col=r,o++):(i[l+"C"]={},i[l+"C"].row=i[l+"S"].row,i[l+"C"].col=r),a=n;r++;var u=t.logTime.START,p=0,g=[],m=o,f=r,b=null,y=[];for(d=0;d<m;d++){g[d]=[];for(c=0;c<=f;c++)g[d][c]=""}for(h=0;h<e.length;h++)l=e[h].action,"submitDone"!==(n=e[h].type)&&(o=i[l+"S"].row,r=i[l+"S"].col,y[o]=[],y[o][0]=r+1,g[o][r]=l,"function"!==n&&(o=i[l+"C"].row,r=i[l+"C"].col,void 0!==(b=t.logTime[l])&&(p=b.getTime()-u.getTime(),y[o][1]=r-1,g[o][r]="["+p+"ms]")));var v=[],w=0;for(d=0;d<f;d++){v[d]=0;for(c=0;c<m;c++)(w=g[c][d].length)>v[d]&&(v[d]=w)}var S=0,C=0,_="",x="";for(d=0;d<m;d++){S=y[d][0],C=y[d][1];for(c=0;c<=f;c++){for(h=(_=g[d][c]).length;h<v[c];h++)_+=c>=S&&c<=C?"-":" ";x+="|"+_}x+="\n"}var I=t.logTime.END;p=I.getTime()-u.getTime(),x="\n[ WORKFLOW :: "+t.id+" Start : "+WebSquare.ModelUtil.logFormatTime(u)+"]\n"+x+"[ WORKFLOW :: "+t.id+" End : "+WebSquare.ModelUtil.logFormatTime(I)+"    duration : "+p+"ms ]\n",s.k.printLog(x)},logFormatTime:function(t){return WebSquare.text.fillZero(t.getHours(),2)+":"+WebSquare.text.fillZero(t.getMinutes(),2)+":"+WebSquare.text.fillZero(t.getSeconds(),2)+":"+WebSquare.text.fillZero(t.getMilliseconds(),3)}}},6451:(t,e,i)=>{i.d(e,{h:()=>o});var o={Vector:function(){this.type="vector",this.length=0,this.data=[],this.dataType=[],this.attributeName=[],this.attributeValue=[]}};o.Vector.prototype.setDocument=function(t){try{if("vector"==t.documentElement.nodeName){this.length=0,this.data=[],this.dataType=[];for(var e=t.documentElement.attributes,i=0;i<e.length;i++){var o=e.item(i);WebSquare.nodeValueDeprecated?(this.attributeName.push(o.name),this.attributeValue.push(o.value)):(this.attributeName.push(o.nodeName),this.attributeValue.push(o.nodeValue))}var s=t.documentElement.childNodes;for(i=0;i<s.length;i++){var r=s.item(i);if(1==r.nodeType&&"data"==r.nodeName){var a=r.getAttribute("value");if(null!=a)this.data.push(a),this.dataType.push("String");else for(var n=r.childNodes,l=0;l<n.length;l++){var h=n.item(l);if(1==h.nodeType){this.data.push(WebSquare.xml.serialize(h)),this.dataType.push("Document");break}}this.length++}}}}catch(t){WebSquare.exception.printStackTrace(t)}},o.Vector.prototype.addAll=function(t){try{"vector"==t.type&&(this.data=this.data.concat(t.data),this.dataType=this.dataType.concat(t.dataType),this.length=this.data.length)}catch(t){WebSquare.exception.printStackTrace(t)}},o.Vector.prototype.getAttribute=function(t){var e="";try{for(var i=0;i<this.attributeName.length;i++)if(this.attributeName[i]==t){e=this.attributeValue[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.Vector.prototype.setAttribute=function(t,e){try{for(var i=!1,o=0;o<this.attributeName.length;o++)if(this.attributeName[o]==t){i=!0,this.attributeValue[o]=e;break}i||(this.attributeName.push(t),this.attributeValue.push(e))}catch(t){
WebSquare.exception.printStackTrace(t)}},o.Vector.prototype.setDebug=function(t){this.setAttribute("debug",t)},o.Vector.prototype.setAction=function(t){this.setAttribute("action",t)},o.Vector.prototype.setTask=function(t){this.setAttribute("task",t)},o.Vector.prototype.setProcessName=function(t){void 0===t||null==t||""==t?this.setAttribute("processName",WebSquare.proworks.getControllerServer()):this.setAttribute("processName",WebSquare.proworks.getControllerServer()+"."+t)},o.Vector.prototype.getAction=function(){return this.getAttribute("action")},o.Vector.prototype.getTask=function(){return this.getAttribute("task")},o.Vector.prototype.getProcessName=function(){return this.getAttribute("processName")},o.Vector.prototype.addElement=function(t){try{WebSquare.xml.isDocument(t)?(this.data.push(WebSquare.xml.serialize(t)),this.dataType.push("Document")):"object"!=typeof t||void 0===t.type||"vector"!=t.type&&"hashtable"!=t.type?"string"==typeof t&&WebSquare.xml.isDocumentString(t)?(this.data.push(t),this.dataType.push("Document")):(this.data.push(t+""),this.dataType.push("String")):(this.data.push(t.toString()),this.dataType.push("Document")),this.length++}catch(t){WebSquare.exception.printStackTrace(t)}},o.Vector.prototype.elementAt=function(t){var e=null;try{if((t=parseInt(t,10))>=0&&t<this.length)if("Document"==this.dataType[t]){var i=WebSquare.xml.parse(this.data[t]);e="vector"==i.documentElement.nodeName?WebSquare.collection.toVector(i):"hashtable"==i.documentElement.nodeName?WebSquare.collection.toHashtable(i):i}else e=this.data[t]}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.Vector.prototype.insertElementAt=function(t,e){try{if((e=parseInt(e,10))==this.length)return void this.addElement(t);if(e>=0&&e<this.length){for(var i=this.length;i>e;i--)this.data[i]=this.data[i-1],this.dataType[i]=this.dataType[i-1];WebSquare.xml.isDocument(t)?(this.data[e]=WebSquare.xml.serialize(t),this.dataType[e]="Document"):"object"!=typeof t||void 0===t.type||"vector"!=t.type&&"hashtable"!=t.type?"string"==typeof t&&WebSquare.xml.isDocumentString(t)?(this.data[e]=t,this.dataType[e]="Document"):(this.data[e]=t+"",this.dataType[e]="String"):(this.data[e]=t.toString(),this.dataType[e]="Document"),this.length++}}catch(t){WebSquare.exception.printStackTrace(t)}},o.Vector.prototype.remove=function(t){var e=null;try{if((t=parseInt(t,10))>=0&&t<this.length){if("Document"==this.dataType[t]){var i=WebSquare.xml.parse(this.data[t]);e="vector"==i.documentElement.nodeName?WebSquare.collection.toVector(i):"hashtable"==i.documentElement.nodeName?WebSquare.collection.toHashtable(i):i}else e=this.data[t];if(t<this.length-1)for(var o=t;o<this.length-1;o++)this.data[o]=this.data[o+1],this.dataType[o]=this.dataType[o+1];this.data.pop(),this.dataType.pop(),this.length--}}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.Vector.prototype.fastRemove=function(t){try{if((t=parseInt(t,10))>=0&&t<this.length){if(t<this.length-1)for(var e=t;e<this.length-1;e++)this.data[e]=this.data[e+1],this.dataType[e]=this.dataType[e+1];this.data.pop(),this.dataType.pop(),this.length--}}catch(t){WebSquare.exception.printStackTrace(t)}},o.Vector.prototype.set=function(t,e){try{(t=parseInt(t,10))>=0&&t<this.length&&(WebSquare.xml.isDocument(e)?(this.data[t]=WebSquare.xml.serialize(e),this.dataType[t]="Document"):"object"!=typeof e||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data[t]=e,this.dataType[t]="Document"):(this.data[t]=e+"",this.dataType[t]="String"):(this.data[t]=e.toString(),this.dataType[t]="Document"))}catch(t){WebSquare.exception.printStackTrace(t)}},o.Vector.prototype.size=function(){return this.length},o.Vector.prototype.toDocument=function(){return WebSquare.xml.parse(this.toString())},o.Vector.prototype.toString=function(){var t=[];try{t.push("<vector"),t.push(" result='"+this.length+"'")
;for(var e=0;e<this.attributeName.length;e++)"result"!=this.attributeName[e]&&t.push(" "+this.attributeName[e]+"='"+this.attributeValue[e]+"'");t.push(">");for(e=0;e<this.length;e++)if("Document"==this.dataType[e]){t.push("<data vectorkey='"+e+"'>");var i=this.data[e].indexOf("?>");if(-1==i)t.push(this.data[e]);else new RegExp("<?xml[\\s]+(version|VERSION)[\\w\\W]+?>").test(this.data[e])?t.push(this.data[e].substring(i+2)):t.push(this.data[e]);t.push("</data>")}else t.push("<data vectorkey='"+e+"' value='"+WebSquare.xml.encode(this.data[e])+"'/>");t.push("</vector>")}catch(t){WebSquare.exception.printStackTrace(t)}return t.join("")},o.Hashtable=function(){this.type="hashtable",this.key=[],this.data=[],this.dataType=[],this.attributeName=[],this.attributeValue=[]},o.Hashtable.prototype.containsKey=function(t){var e=!1;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){e=!0;break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.Hashtable.prototype.setDocument=function(t){try{if("hashtable"==t.documentElement.nodeName){this.key=[],this.data=[],this.dataType=[];for(var e=t.documentElement.attributes,i=0;i<e.length;i++){var o=e.item(i);this.attributeName.push(o.nodeName),this.attributeValue.push(o.nodeValue)}var s=t.documentElement.childNodes;for(i=0;i<s.length;i++){var r=s.item(i);if(1==r.nodeType&&"data"==r.nodeName){this.key.push(r.getAttribute("hashkey"));var a=r.getAttribute("value");if(null!=a)this.data.push(a),this.dataType.push("String");else for(var n=r.childNodes,l=0;l<n.length;l++){var h=n.item(l);if(1==h.nodeType){this.data.push(WebSquare.xml.serialize(h)),this.dataType.push("Document");break}}}}}}catch(t){WebSquare.exception.printStackTrace(t)}},o.Hashtable.prototype.getAttribute=function(t){var e="";try{for(var i=0;i<this.attributeName.length;i++)if(this.attributeName[i]==t){e=this.attributeValue[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.Hashtable.prototype.setAttribute=function(t,e){try{for(var i=!1,o=0;o<this.attributeName.length;o++)if(this.attributeName[o]==t){i=!0,this.attributeValue[o]=e;break}i||(this.attributeName.push(t),this.attributeValue.push(e))}catch(t){WebSquare.exception.printStackTrace(t)}},o.Hashtable.prototype.setDebug=function(t){this.setAttribute("debug",t)},o.Hashtable.prototype.setAction=function(t){this.setAttribute("action",t)},o.Hashtable.prototype.setTask=function(t){this.setAttribute("task",t)},o.Hashtable.prototype.setProcessName=function(t){void 0===t||null==t||""==t?this.setAttribute("processName",WebSquare.proworks.getControllerServer()):this.setAttribute("processName",WebSquare.proworks.getControllerServer()+"."+t)},o.Hashtable.prototype.getAction=function(){return this.getAttribute("action")},o.Hashtable.prototype.getTask=function(){return this.getAttribute("task")},o.Hashtable.prototype.getProcessName=function(){return this.getAttribute("processName")},o.Hashtable.prototype.get=function(t){var e=null;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){if("Document"==this.dataType[i]){var o=WebSquare.xml.parse(this.data[i]);e="vector"==o.documentElement.nodeName?WebSquare.collection.toVector(o):"hashtable"==o.documentElement.nodeName?WebSquare.collection.toHashtable(o):o}else e=this.data[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.Hashtable.prototype.put=function(t,e){var i=null;try{for(var o=!1,s=0;s<this.key.length;s++)if(this.key[s]==t){if(o=!0,"Document"==this.dataType[s]){var r=WebSquare.xml.parse(this.data[s]);i="vector"==r.documentElement.nodeName?WebSquare.collection.toVector(r):"hashtable"==r.documentElement.nodeName?WebSquare.collection.toHashtable(r):r}else i=this.data[s];WebSquare.xml.isDocument(e)?(this.data[s]=WebSquare.xml.serialize(e),this.dataType[s]="Document"):"object"!=typeof e||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data[s]=e,this.dataType[s]="Document"):(this.data[s]=e+"",
this.dataType[s]="String"):(this.data[s]=e.toString(),this.dataType[s]="Document");break}o||(this.key.push(t),WebSquare.xml.isDocument(e)?(this.data.push(WebSquare.xml.serialize(e)),this.dataType.push("Document")):"object"!=typeof e||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data.push(e),this.dataType.push("Document")):(this.data.push(e+""),this.dataType.push("String")):(this.data.push(e.toString()),this.dataType.push("Document")))}catch(t){WebSquare.exception.printStackTrace(t)}return i},o.Hashtable.prototype.remove=function(t){var e=null;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){if("Document"==this.dataType[i]){var o=WebSquare.xml.parse(this.data[i]);e="vector"==o.documentElement.nodeName?WebSquare.collection.toVector(o):"hashtable"==o.documentElement.nodeName?WebSquare.collection.toHashtable(o):o}else e=this.data[i];this.key[i]=this.key[this.key.length-1],this.data[i]=this.data[this.data.length-1],this.dataType[i]=this.dataType[this.dataType.length-1],this.key.pop(),this.data.pop(),this.dataType.pop();break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.Hashtable.prototype.keys=function(){return WebSquare.text.arraySort(this.key)},o.Hashtable.prototype.elements=function(){var t=[];try{for(var e=WebSquare.text.arraySort(this.key),i=0;i<e.length;i++)t.push(this.get(e[i]))}catch(t){WebSquare.exception.printStackTrace(t)}return t},o.Hashtable.prototype.toDocument=function(){return WebSquare.xml.parse(this.toString())},o.Hashtable.prototype.toString=function(){var t=[];t.push("<hashtable");try{for(var e=0;e<this.attributeName.length;e++)t.push(" "+this.attributeName[e]+"='"+this.attributeValue[e]+"'");t.push(">");for(e=0;e<this.key.length;e++)if("Document"==this.dataType[e]){t.push("<data hashkey='"+WebSquare.xml.encode(this.key[e])+"'>");var i=this.data[e].indexOf("?>");if(-1==i)t.push(this.data[e]);else new RegExp("<?xml[\\s]+(version|VERSION)[\\w\\W]+?>").test(this.data[e])?t.push(this.data[e].substring(i+2)):t.push(this.data[e]);t.push("</data>")}else t.push("<data hashkey='"+WebSquare.xml.encode(this.key[e])+"' value='"+WebSquare.xml.encode(this.data[e])+"'/>")}catch(t){WebSquare.exception.printStackTrace(t)}return t.push("</hashtable>"),t.join("")},o.toVector=function(t){var e=new WebSquare.collection.Vector;try{var i=null;"string"==typeof t?i=WebSquare.xml.parse(t):WebSquare.xml.isDocument(t)&&(i=t),e.setDocument(i)}catch(t){WebSquare.exception.printStackTrace(t)}return e},o.toHashtable=function(t){var e=new WebSquare.collection.Hashtable;try{var i=null;"string"==typeof t?i=WebSquare.xml.parse(t):WebSquare.xml.isDocument(t)&&(i=t),e.setDocument(i)}catch(t){WebSquare.exception.printStackTrace(t)}return e}},1656:(t,e,i)=>{i.d(e,{v:()=>a});var o=i(2981),s=i(6301),r=i(2085),a={supportActiveX:"undefined"!=typeof ActiveXObject&&s.d.browserCheck.ieAllVersion&&!o.x.msActiveXFilteringEnabled,supportDOM:!!document.implementation&&!!document.implementation.createDocument,websquareSerializer:new RegExp(o.x.userAgentPattern.serializer).test(navigator.userAgent),supportXMLHttp:"undefined"!=typeof XMLHttpRequest,uriEncoder:new RegExp(o.x.userAgentPattern.URIEncoder).test(navigator.userAgent)};a._XMLHTTP_PROGIDS=s.d._XMLHTTP_PROGIDS,a._XML_NAMESPACE={SCHEMA:"http://www.w3.org/1999/XMLSchema",XFORMS:"http://www.w3.org/2002/xforms",XHTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XSL:"http://www.w3.org/1999/XSL/Transform",EVENTS:"http://www.w3.org/2001/xml-events",W2:"http://www.inswave.com/websquare"},a.EXT_PLUGIN={},a.EMPTY_TAG,a.maxZindex=10,a.FLzIndex=10,a.forcedValueSetting=null,a.firePageunload=!1,a.onurlchange=!1,a.urlchangebyapi=!1,a.onclearpage=!1,a.userClearMemoryStack=[],a.memoryLeakComponent={editor:1,fusionchart:1},a.memoryLeakComponentCount=0,a.useSubmissionGlobal=!1,a.useWorkflowGlobal=!1,a.projectCommonVariable="$c",a._projectCommonHash={},a._msaHash={},a._msaServerHash={},
a.errorMessageData=new Object,a.userMessageData=new Object,a.commonCache={},a.udcObj={},a.udcMsa={},a.browserCheck=function(){return navigator.appName},a.browserCheck.ie=s.d.browserCheck.ie,a.browserCheck.moz=s.d.browserCheck.moz,a.browserCheck.opera=s.d.browserCheck.opera,a.browserCheck.chrome=s.d.browserCheck.chrome,a.browserCheck.android=s.d.browserCheck.android,a.browserCheck.iphone=s.d.browserCheck.iphone,a.browserCheck.ipad=s.d.browserCheck.ipad,a.browserCheck.ipod=s.d.browserCheck.ipod,a.browserCheck.blackberry=s.d.browserCheck.blackberry,a.browserCheck.safari=s.d.browserCheck.safari,a.browserCheck.ieAllVersion=s.d.browserCheck.ieAllVersion,a.browserCheck.spartan=s.d.browserCheck.spartan,a.browserCheck.chromeEdge=s.d.browserCheck.chromeEdge,a.browserCheck.ieVersion={},a.browserCheck.mozVersion={},a.browserCheck.chromeVersion={},a.browserCheck.safariVersion={},a.browserCheck.operaVersion={},a.browserCheck.spartanVersion={},a.browserCheck.chromeEdgeVersion={},a.getXMLHTTPObject=function(t){var e=null;try{s.d.useActiveXObject&&!0!==t?e=new ActiveXObject(a._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(t){r.w.printStackTrace(t)}return void 0===e||null==e?(WebSquare.logger.printLog(WebSquare.language.getMessage("E_core_AjaxUnsupportedBrowser")),null):e},a._getHybridUri=function(t){try{if("string"!=typeof t)return;var e,i,s=t;return 1==o.x.hybridApp&&t.indexOf("://")<0&&t.startsWith("/")?s=WebSquare.util.appendingPathComponent(o.x.w2xDocumentRoot,t):"app:"==location.protocol&&(i=(e=location.href).lastIndexOf("/"),s=e.substr(0,i)+t),s}catch(t){r.w.printStackTrace(t,null,this)}},a._loadBefore=function(t){try{var e=a.getConfiguration("/WebSquare/environment/requestHeaderFunction/@value");if(""!=e){var i=WebSquare.util.getGlobalFunction(e);"function"==typeof i&&i(t)}}catch(t){r.w.printStackTrace(t,null,this)}},a._loadAfter=function(t,e,i,o,s){try{var n=null,l=a.getConfiguration("/WebSquare/redirectUrl/@value");if(""!=l&&i.indexOf(l)>=0)return void(location.href=i);if(t>="400"||0===t){if(s)return;if("true"===a.getConfiguration("/WebSquare/errorPage/@value")){var h=a.getConfiguration("/WebSquare/errorPage/E"+t);if(h)n=WebSquare.xml._decode(WebSquare.xml._encode(h));else{var d=a.getConfiguration("/WebSquare/errorPage/Else");if(d)n=WebSquare.xml._decode(WebSquare.xml._encode(d));else{var c=a.getConfiguration("/WebSquare/errorPage");n=c?WebSquare.xml._decode(WebSquare.xml._encode(c)):e}}}else n=e;throw{message:"core._loadAfter : "+t}}if(o&&null!=(n=o.xml)&&""!==n||(n=e),n.startsWith("/*ENCRYPTED*/")){var u=(new Date).getTime();n=new Function("return "+n)();var p=(new Date).getTime();WebSquare.logger.printLog("decryption+eval time: "+(p-u)+"ms")}return n}catch(t){r.w.printStackTrace(t,null,this)}},a.load=function(t,e){try{if("string"!=typeof t)return;void 0!==e&&null!=e||(e={});var i=t,o=a._getHybridUri(t),n=a.getXMLHTTPObject(),l=null;try{s.d.openResourceUri(o,n),a._loadBefore(n),n.send(null);var h=!0===e.useXML&&a.browserCheck.ieAllVersion?n.responseXML:null;l=a._loadAfter(n.status,n.responseText,n.responseURL,h,!0===e.skipError)}catch(t){var d="";d=i.indexOf("uiplugin")>-1?WebSquare.language.getMessage("E_core_NoPluginError",i)||"Plugin ["+i+"] does not exist.":WebSquare.language.getMessage("E_core_NoModuleError",i)||"Resource ["+i+"] does not exist.",WebSquare.logger.printLog(d)}return n=null,l}catch(t){r.w.printStackTrace(t,null,this)}},a.loadAsync=async function(t,e){try{if("string"!=typeof t)return Promise.reject("core.loadAsync error : uri invalid. ["+t+"]");void 0!==e&&null!=e||(e={});var i=!0===e.skipError,o=!0===e.useXML&&a.browserCheck.ieAllVersion;return new Promise((function(e,r){var n=s.d.getXMLHTTPObject(),l=s.d.getResourcePostfix(a._getHybridUri(t));n.open("GET",l,!0);var h=function(t){if(4===n.readyState){var s=o?n.responseXML:null,l=a._loadAfter(n.status,n.responseText,n.responseURL,s,i);n.status>="400"||0===n.status?r(l):e(l),n=null}};s.d.useActiveXObject?n.onreadystatechange=h:(n.onload=h,
n.onerror=function(t){r(n.statusText),n=null}),a._loadBefore(n),n.send(null)}))}catch(t){r.w.printStackTrace(t,null,this)}},a.download=function(t,e,i,n){if(void 0!==i&&null!=i&&""!=i||(i="post"),null!=n&&void 0!==n||(n=!1),n)try{var l="blob",h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t="",e=this.getResponseHeader("Content-Disposition");if(WebSquare.util.isIEAllVersion(11)){var i=(e=e.wq_replaceAll(";","")).indexOf("=")+1;t=e.substring(i,e.length),navigator.msSaveOrOpenBlob(h.response,t)}else{var o=window.URL.createObjectURL(this.response);if(e){var s=document.createElement("a");t=e.match(/filename="([^"]+)"/)[1],t=decodeURIComponent(t),s.download=t,s.href=o,s.click()}WebSquare.layer.hideProcessMessage()}}};try{h.ontimeout=function(t){}}catch(t){}h.open(i,t,!0),h.setRequestHeader("Content-Type","text/plain"),h.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"),h.responseType=l;var d=a.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=d){var c=WebSquare.util.getGlobalFunction(d);c&&c(h,"download")}h.send("xmlValue="+e)}catch(t){}else{var u=!1;null!=document.getElementById("__iframe__")&&(u=!0);var p=null,g="";if(u)p=document.getElementById("___iframe__div");else{if((p=document.createElement("div")).id="___iframe__div",p.style.width="0px",p.style.height="0px",p.style.visibility="hidden",document.body.appendChild(p),g=WebSquare.net.getSSLBlankPage(),o.x.domain){var m=a.getConfiguration("domainFrameURL");m||(m=o.x.baseURI+s.d.inquiresPath("message/domainFrame.html")),g="src='"+(m+="?domain="+WebSquare.text.URLEncoder(o.x.domain))+"'"}var f="";WebSquare.util.isIEAllVersion()&&(f="frameborder='0'"),p.innerHTML="<iframe "+f+" id='__iframe__' name='__iframe__' scrolling='no' style='width:0; height:0; border:0px;' "+g+"></iframe>"}try{var b=document.getElementById("__iframe__"),y=function(){try{"interactive"==b.contentWindow.document.readyState&&WebSquare.layer.hideProcessMessage()}catch(t){}};if(a.browserCheck.ie){try{b.contentWindow.document}catch(t){return a.clearTimer("__iframe__"),void a.setTimer(a.download,{key:"__iframe__",caller:this,delay:500,args:arguments})}b.contentWindow.document.onreadystatechange=y}else WebSquare.layer.hideProcessMessage()}catch(t){r.w.printStackTrace(t)}try{var v=document.createElement("form");if(v.target="__iframe__",v.action=t,v.method=i,v.style.display="inline",void 0!==e){var w=document.createElement("input");w.type="hidden",w.name="xmlValue",WebSquare.xml.isDocument(e)?w.value=WebSquare.xml.serialize(e):w.value=e,v.appendChild(w)}p.appendChild(v),v.submit()}catch(t){}finally{try{v&&w&&(w.value=""),p.removeChild(v)}catch(t){}}}},a.excelDownload=function(t,e,i,n){if(!n||"object"!=typeof n)n={};var l="WS5_downloadComplete",h="true",d=null,c=null,u=n.timeout||null,p=n.checkInterval||1e3,g=n.onSuccessCallback||null,m=n.onFailureCallback||null,f=n.scopeId||"";if(WebSquare.hybridApp){var b=document.getElementById("__iframe__"),y=function(){document.cookie=l+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",WebSquare.layer.hideProcessMessage({scope:f}),clearInterval(d)},v=function(t){y(),g&&g(t)},w=function(t){y(),m&&m(t)};try{var S=function(e){v(t)},C=function(e){w(t)},_={};_.url=t,_.data=e,window.$h.websquare.excelDownload(S,C,_)}catch(t){r.w.printStackTrace(t)}}else{if(n.nativeApp)return window.__WebSquareExcel.downloadExcel(t,e),void WebSquare.layer.hideProcessMessage({scope:f});void 0!==i&&null!=i&&""!=i||(i="post"),WebSquare.util.isMobile()&&window.open("blank.html","__ipad_excel__");var x=!1;null!=document.getElementById("__iframe__")&&(x=!0);var I=null;if(x)I=document.getElementById("___iframe__div");else{(I=document.createElement("div")).id="___iframe__div",I.style.width="0px",I.style.height="0px",I.style.visibility="hidden",document.body.appendChild(I);var T=WebSquare.net.getSSLBlankPage();if(o.x.domain){
var k=o.x.baseURI+s.d.inquiresPath("message/domainFrame.html");T="src='"+(k+="?domain="+WebSquare.text.URLEncoder(o.x.domain))+"'"}var D="";WebSquare.util.isIEAllVersion()&&(D="frameborder='0'"),I.innerHTML="<iframe "+D+" id='__iframe__' name='__iframe__' scrolling='no' style='width:0; height:0; border:0px;' "+T+"></iframe>"}try{b=document.getElementById("__iframe__"),y=function(){document.cookie=l+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",WebSquare.layer.hideProcessMessage({scope:f}),clearInterval(d)},v=function(t,e){y(),e||(e={}),g&&g(t,e)},w=function(t,e){y(),e||(e={}),m&&m(t,e)};document.cookie=l+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";var L=function(){try{"interactive"==b.contentWindow.document.readyState&&v(t)}catch(t){}},W=function(){try{var e=l+"="+h;document.cookie.indexOf(l+"=")>-1?document.cookie.indexOf(e)>-1?v(t):w(t):u&&new Date-c>u?w(t):n.httpReadOnly&&y()}catch(t){}};if(WebSquare.util.isIEAllVersion()){try{b.contentWindow.document}catch(t){return a.clearTimer("__iframe__"),void a.setTimer(a.excelDownload,{key:"__iframe__",caller:this,delay:500,args:arguments})}b.contentWindow.document.onreadystatechange=L}else n.useXHR||(c=new Date,d=setInterval(W,p))}catch(t){r.w.printStackTrace(t)}try{if(n.useXHR){var A="",M="",E=new XMLHttpRequest,q=!0,R=n.userExcel||"false";R+="";var N=n.userExcel||"false";N+="",t.indexOf("xmlToExcel2.wq")>-1||"true"==R?(A="blob",M="exceldownload"):t.indexOf("xmlToCSV.wq")>-1||"true"==N?(A="blob",M="csvdownload"):t.indexOf("dataListToExcel.wq")>-1?(A="blob",M="dataListdownload"):q=!1,E.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var e="",i={},o=this.getResponseHeader("Content-Disposition");if(q)if(o){if(WebSquare.util.isIEAllVersion(11)){var s=(o=o.wq_replaceAll(";","")).indexOf("=")+1;e=o.substring(s,o.length),navigator.msSaveOrOpenBlob(E.response,e)}else{var r=window.URL.createObjectURL(this.response),a=document.createElement("a");e=o.match(/filename="([^"]+)"/)[1],e=decodeURIComponent(e),a.download=e,a.href=r,a.click()}v(t,i)}else{var n=new FileReader;n.readAsText(this.response),n.onloadend=function(){var e=WebSquare.xml.parse(n.result),o=WebSquare.xml.findNode(e,"Exception/errorCode"),s=WebSquare.xml.getTextNodeValue(o);i.errorCode=s,w(t,i)}}else{try{this.responseText&&(i=JSON.parse(this.responseText))}catch(t){}v(t,i)}}else w(t,{})};try{E.timeout=u,E.ontimeout=function(e){w(t)}}catch(t){}E.open("POST",t,!0),E.setRequestHeader("Content-Type","text/plain"),E.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"),E.responseType=A;var F=a.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=F){var O=WebSquare.util.getGlobalFunction(F);O&&O(E,M)}WebSquare.xml.isDocument(e)&&(e=WebSquare.xml.serialize(e)),E.send("xmlValue="+e)}else{var B=document.createElement("form");if(WebSquare.util.isMobile()?B.target="__ipad_excel__":(B.target="__iframe__",B.encoding="text/plain"),t=t.indexOf("?")>-1?t+"&suffix="+(new Date).getTime()+1e4*Math.random():t+"?suffix="+(new Date).getTime()+1e4*Math.random(),B.action=t,B.method=i,B.style.display="inline",B.acceptCharset="UTF-8",void 0!==e){var V=document.createElement("input");V.type="hidden",V.name="xmlValue",WebSquare.xml.isDocument(e)&&(e=WebSquare.xml.serialize(e)),V.value=e,B.appendChild(V)}I.appendChild(B),B.submit()}}catch(t){}finally{try{B&&V&&(V.value=""),I.removeChild(B)}catch(t){}}}},a.callParentFunction=function(t,...e){var i=null;try{for(var o=opener||parent,s=t.wq_trim().split("."),a=0,n=o[s[a++]];n&&("object"==typeof n||"function"==typeof n)&&a<s.length;)n=n[s[a++]];i=n.apply(n,e)}catch(t){r.w.printStackTrace(t)}return i},a.closePopupWindow=function(){var t=WebSquare.net.getParameter("popupID");a.callParentFunction("WebSquare.uiplugin.popup.callClose",t)},a.getNamespaces=function(t){var e={};try{var i=null;if(1==t.nodeType?i=t.attributes:9==t.nodeType&&(i=t.documentElement.attributes),
null!=i)for(var o=0;o<i.length;o++){var s=i.item(o);"xmlns"==s.nodeName?e[""]=null!=s.value?s.value:s.nodeValue:0==s.nodeName.indexOf("xmlns")&&(null!=s.value&&null!=s.name?e[s.name.substring(6)]=s.value:e[s.nodeName.substring(6)]=s.nodeValue)}}catch(t){r.w.printStackTrace(t)}return e},a.getURL=function(t,e){if("string"==typeof t){void 0!==e&&null!=e||(e={});try{if(t.indexOf("://")>-1)return t;if(t.startsWith("/")||t.startsWith("\\")){if(e.msaName){var i;(i=a._msaServerHash[e.msaName])&&(t=i.baseURI+t)}}else if(e.msaName)(i=a._msaServerHash[e.msaName])&&(t=(e.tempHome||i.w2xHome)+t,t=i.baseURI+t);else!0!==e.baseURI&&(t=(e.tempHome||WebSquare.w2xHome)+t);""==o.x.w2xDocumentRoot||t.startsWith("..")||e.msaName||(t=o.x.w2xDocumentRoot+t),!0!==e.baseURI||e.msaName?!0!==e.baseServletURI||e.msaName||(t=o.x.baseServletURI+t):t=o.x.baseURI+t}catch(t){r.w.printStackTrace(t)}return t}},a.getImageURL=function(t,e){void 0!==e&&null!=e||(e={});var i=!0===e.cssStyle,r=a.getConfiguration("/WebSquare/imageURLPrefix/@value"),n=a.getConfiguration("/WebSquare/imageURLPostfix/@value");if("string"==typeof t){if(t.startsWith("data:")||t.startsWith("blob:"))return t;t=t.wq_trim();var l=0==o.x.isLocal&&a.browserCheck.ie&&"6"==a.browserVersion()&&-1==t.indexOf("://")&&!e.msaName;if(null!=s.d.imageServlet){if(t.startsWith("url")){var h=t.substring(3).wq_trim();"("==h.charAt(0)&&")"==h.charAt(h.length-1)&&(t=h.substring(1,h.length-1),e.msaName&&(t=s.d.imageServlet+t),t=a.getURL(t,e),e.msaName||(t=o.x.baseURI+s.d.imageServlet+t),t=s.d.getImagePostfix(t),l&&(t=location.protocol+"//"+location.host+t),t="url("+t+")")}else""!==r?t=r+t:(e.msaName&&(t=s.d.imageServlet+t),t=a.getURL(t,e),e.msaName||(t=o.x.baseURI+s.d.imageServlet+t),"$blank"!=n&&(t=s.d.getImagePostfix(t))),l&&(t=location.protocol+"//"+location.host+t),i&&(t="url("+t+")");null!=s.d.imageHostUrl&&(t+="&hostUrl="+s.d.imageHostUrl)}else"$blank"!=n&&(t=s.d.getResourcePostfix(t)),t=""!==r?r+t:a.getURL(t,e),l&&(t=location.protocol+"//"+location.host+t),i&&(t="url("+t+")")}return t},a.getEngineImageURL=function(t,e){if(void 0===e&&(e=!1),"string"==typeof t)if(null!=s.d.imageServlet)if(t.startsWith("url")){var i=t.substring(3).wq_trim();"("==i.charAt(0)&&")"==i.charAt(i.length-1)&&(t=i.substring(1,i.length-1),t=o.x.baseURI+s.d.imageServlet+o.x.baseURI+t.wq_trim(),t="url("+(t=s.d.getImagePostfix(t))+")")}else t=o.x.baseURI+s.d.imageServlet+o.x.baseURI+t.wq_trim(),t=s.d.getImagePostfix(t),e&&(t="url("+t+")");else t=o.x.baseURI+t.wq_trim(),e&&(t="url("+t+")");return t},a.browserVersion=function(){if(a.browserCheck.moz){if(2==navigator.appVersion.charAt(0))return"2";if(3==navigator.appVersion.charAt(0))return"3";if(4==navigator.appVersion.charAt(0))return"4";if(5==navigator.appVersion.charAt(0))return"6"}else if(a.browserCheck.ieAllVersion){if(document.documentMode)return document.documentMode+"";if("2"==navigator.appVersion.charAt(0))return"2";if("3"==navigator.appVersion.charAt(0))return"3";if("4"==navigator.appVersion.charAt(0))return-1!=navigator.appVersion.indexOf("MSIE 9")?"9":-1!=navigator.appVersion.indexOf("MSIE 8")?"8":-1!=navigator.appVersion.indexOf("MSIE 7")?"7":-1!=navigator.appVersion.indexOf("MSIE 6")?"6":-1!=navigator.appVersion.indexOf("MSIE 5.5")?"5.5":-1!=navigator.appVersion.indexOf("MSIE 5.0")?"5.0":"4";if("5"==navigator.appVersion.charAt(0))return"5"}else if(a.browserCheck.android){var t=navigator.userAgent;if(t.indexOf("Android")>=0)return parseFloat(t.slice(t.indexOf("Android")+8))}return" "},a.setTimeout=function(t,e,i){t=t,e=e,i=i;var o=[];if(arguments.length>3)for(var s=3;s<arguments.length;s++)o.push(arguments[s]);window.setTimeout((function(){e.apply(t,o)}),i)},a.cloneObject=function(t){if("object"!=typeof t)return t;if(null==t)return t;var e=new Object;for(var i in t)e[i]=a.cloneObject(t[i]);return e},a.makeStyle=function(t,e,i){if(!(void 0!==t&&null!=t||void 0!==e&&null!=e))return null;var o={};void 0!==e&&null!=e&&""!=e&&(o=WebSquare.skin.makeClassStyle(e),o=a.cloneObject(o))
;try{if(void 0!==t&&null!=t&&""!=t){for(var s=t.split(";"),n=0;n<s.length;n++){var l=s[n].indexOf(":");if(!(l<0)){var h=s[n].substring(0,l),d=s[n].substring(l+1);if(d.indexOf("url")>=0&&(d=d.wq_trim()).startsWith("url")){var c=d.substring(3).wq_trim();"("==c.charAt(0)&&")"==c.charAt(c.length-1)&&(d="url("+a.getImageURL(c.substring(1,c.length-1))+")")}o[h.wq_trim().capitalizeStyle()]=d.wq_trim()}}if(void 0!==i){var u={};for(n=0;n<i.length;n++)try{var p=i[n].wq_trim().capitalizeStyle(),g=o[p];void 0!==g&&(u[p]=g)}catch(t){r.w.printStackTrace(t)}o=u}}}catch(t){r.w.printStackTrace(t)}return o},a.applyStyle=function(t,e,i){try{if(void 0===e||null==e)return;if(WebSquare.util.isExist("style",t))if(void 0===i)for(var o in e)try{t.style[o]=e[o]}catch(e){r.w.printStackTrace(e,"Object ID : "+t.id+",    ")}else for(o=0;o<i.length;o++)try{var s=e[i[o]];void 0!==s&&(t.style[i[o]]=s)}catch(e){r.w.printStackTrace(e,"Object ID : "+t.id+",    ")}}catch(t){r.w.printStackTrace(t)}},a.getConfiguration=function(t){return a.getConfigurationJSON(t)},a.getConfigurationJSON=function(t,e){if(s.d.configurationJSON){var i;if(void 0!==e&&null!=e||(e={}),null!=(i="json"===e.type?o.x.configCacheObj[t]:"array"===e.type?o.x.configCacheArray[t]:o.x.configCache[t]))return i;i="";for(var r=0;r<s.d.configurationJSON.length;r++){if(t.indexOf("/")>-1){for(var a=t.split("/"),n=s.d.configurationJSON[r],l=!1,h=null,d=0;d<a.length;d++)if(""!=a[d]){l=!1;var c=a[d],u=c.indexOf("["),p=null,g=null;if(-1==u)h=c;else{h=c.substring(0,u);var m=c.match(/[a-zA-Z0-9_]*[\[][\s]*(@[a-zA-Z0-9_]*)[\\]*=[\s]*["']?([^'"]*)["']?[\]]/);null!=m&&(p=m[1],g=m[2])}if(n=n[h])if("[object Array]"===Object.prototype.toString.call(n))if("array"===e.type&&null==p&&null==g)l=!0;else for(var f=0;f<n.length;f++){if(null==p&&null==g){l=!0,n=n[f];break}if(g==n[f][p]){l=!0,n=n[f];break}}else(null==p&&null==g||g==n[p])&&(l=!0);if(!l){n=null;break}}"json"===e.type||"array"===e.type?i=n:(n&&(h&&h.startsWith("@")?i="string"==typeof n?n:n+"":("[object Array]"===Object.prototype.toString.call(n)?"array"!==e.type&&(i=n[0]["#text"]||"",i+=n[0]["#cdata"]||""):(i=n["#text"]||"",i+=n["#cdata"]||""),"string"!=typeof i&&(i+=""))),i=i.wq_trim())}else{n=s.d.configurationJSON[r].WebSquare[t.wq_trim()];"json"===e.type?i=n:(n&&("[object Array]"===Object.prototype.toString.call(n)?"array"!==e.type&&(i=n[0]["@value"]):i=n["@value"]),i?i=i.wq_trim():"array"!==e.type&&(i=""))}if(i)break}if("json"===e.type||"array"===e.type)if(null==i&&(i={}),"json"===e.type){var b={};for(var y in i){var v=i[y];v.constructor!==Array&&null!=v["@value"]?b[y]=v["@value"]||"":b[y]=v}o.x.configCacheObj[t]=b,i=b}else o.x.configCacheArray[t]=i;else o.x.configCache[t]=i;return i}},a.getConfig=function(t){t.indexOf("/")>-1&&(t="/WebSquare/"+t);var e=this.getConfigurationJSON(t,{type:"json"});for(var i in e)e[i]&&"object"==typeof e[i]&&(e[i]="");return e},a.getChildConfiguration=function(t,e){var i=[],o=this.getConfigurationJSON(t,{type:"array"});for(var s in o){if(o[s].constructor===Array&&o[s].length>0){i=o[s];break}e&&!0===e.singleMode&&o[s].constructor!==Array&&(i=[o[s]])}return i},a.applyErrorMessage=async function(){try{for(var t=o.x.baseURI+s.d.inquiresPath("message/")+a.getConfiguration("language")+".xml",e=(await WebSquare.xml.load(t)).documentElement.firstChild;null!=e;e=e.nextSibling)1==e.nodeType&&(a.errorMessageData[e.nodeName]=e.firstChild.nodeValue)}catch(t){r.w.printStackTrace(t)}},a.applyUserMessage=async function(){try{for(var t=o.x.baseURI+s.d.inquiresPath("message/userMessage.xml"),e=(await WebSquare.xml.load(t)).documentElement.firstChild;null!=e;e=e.nextSibling)1==e.nodeType&&(a.userMessageData[e.nodeName]=e.firstChild.nodeValue)}catch(t){r.w.printStackTrace(t)}},a.setMaxZIndex=function(t){for(var e=0,i=document.body.childNodes,o=0;o<i.length;o++)if(1==i[o].nodeType){var s=i[o].style.zIndex;s>=e&&(e=s)}t.style.zIndex=e+1},a.clearCommon=function(){try{try{for(var t=a.userClearMemoryStack.length;t>0;t--){
var e=a.userClearMemoryStack[t-1];e&&e()}}catch(t){}try{var i=WebSquare.util.getGlobalFunction(a.getConfiguration("/WebSquare/clearMemory/@userFunction"));"function"==typeof i&&i()}catch(t){}if(WebSquare&&o.x.timerHash)for(var s in o.x.timerHash){o.x.timerHash[s]&&a.clearTimer(s)}if(WebSquare.userTimerHash){for(var s in WebSquare.userTimerHash){WebSquare.userTimerHash[s]&&WebSquare.util.clearTimeout(s)}o.x.userTimerHash={}}if(WebSquare.userIntervalHash){for(var s in WebSquare.userIntervalHash){WebSquare.userIntervalHash[s]&&WebSquare.util.clearInterval(s)}o.x.userIntervalHash={}}if(WebSquare&&WebSquare.userData){for(var s in WebSquare.userData)WebSquare.userData[s]=null;o.x.userData={}}for(var n in WebSquare.net.paramObj=null,a._projectCommonHash){(l=WebSquare.idCache[a._projectCommonHash[n]])&&l.remove()}for(var n in a._projectCommonHash={},a._msaHash){var l;(l=WebSquare.idCache[a._msaHash[n]])&&l.remove()}for(var h in a._msaHash={},a._msaServerHash={},WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.comp)WebSquare.DataCollection.api.remove(h);WebSquare.DataCollection.stopBroadCast=!1,WebSquare.DataCollection.comp={},WebSquare.DataCollection.attributeMapInfo={},WebSquare.DataCollection.childToParentRelation={},WebSquare.DataCollection.parentToChildRelation={},WebSquare.DataCollection.childToParentRef={},WebSquare.DataCollection.parentToChildRef={},WebSquare.DataCollection.options={useConfig:"true",baseNode:"map",attributeMap:""},WebSquare.DataCollection.activated=!1;try{var d=document.head||document.getElementsByTagName("head")[0]||document.documentElement,c=d.getElementsByTagName("script");for(t=c.length-1;t>=0;t--)"true"!=c[t].getAttribute("data-wqExternal")&&"true"!=c[t].getAttribute("data-wqInternal")||d.removeChild(c[t])}catch(t){WebSquare.logger.printLog("error : script tag remove exception"),r.w.printStackTrace(t,null,this)}var u=a.getConfiguration("/WebSquare/clearMemory/@closeChildPopup");if(WebSquare.uiplugin.popup&&WebSquare.uiplugin.popup.popupList)for(var p=WebSquare.uiplugin.popup.popupList,g=(t=0,p.length);t<g;t++){var m=p[t];m.useWindowPopup()&&"false"===u||m.close()}a.commonCache={},a.clearJQuery(),a._fireParentOnunload()}catch(t){}},a.setTimer=function(t,e){try{var i=(new Date).getTime(),s=e.key||t.toString().slice(0,30),a=e.delay||1,n=e.max||0,l=e.caller||window,h=e.args||[],d=o.x.timerHash[s];return d||(d=o.x.timerHash[s]={thread:null,timeoutKey:null,startTime:i}),d.thread=function(){window.WebSquare&&o.x.timerHash&&delete o.x.timerHash[s],e.before_call&&e.before_call.call(l,d);var i=t.apply(l,h);e.callback&&e.callback.call(l,i)},clearTimeout(d.timeoutKey),n<=0||i-d.startTime<n?(e.before_set&&e.before_set.call(l,d),d.timeoutKey=setTimeout(d.thread,a),e.after_set&&e.after_set.call(l,d)):d.thread(),s}catch(t){r.w.printStackTrace(t,null,this)}},a.clearTimer=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30));var i=o.x.timerHash[t];i&&(clearTimeout(i.timeoutKey),e?i.thread():delete o.x.timerHash[t])}catch(t){r.w.printStackTrace(t,null,this)}},a.measureTime=function(t,e){try{var i=e.key||t.toString().slice(0,30),s=e.caller||window;a.clearTimer(i,!0),a.setTimer((function(){}),{key:i,before_call:function(e){var r=(new Date).getTime()-e.startTime;o.x.measureHash[i]||(o.x.measureHash[i]=[],o.x.measureHash[i].sum=0);var a=o.x.measureHash[i];a.push(r),a.sum+=r,a.length>100&&(a.sum-=a.shift()),t.call(s,{time:r,aver:a.sum/a.length})}})}catch(t){r.w.printStackTrace(t,null,this)}},a.modifyMaxConnection=function(t,e){try{if(a.browserCheck.ie){t=t||"10",e=e||"";var i=a.getConfiguration("/WebSquare/maxConnectionActiveX/@codebase");null!=i&&""!=i||(i="engine/cab/WebSquareConfig.cab");var o=document.createElement("div");o.style.width="0px",o.style.height="0px",o.style.visibility="hidden",document.body.appendChild(o),
o.innerHTML="<object classid='clsid:BD66056F-D87B-4543-8638-A4CED765B9AA' codebase='"+i+"' style='display: none' width='0' height='0' align='center' hspace='0' vspace='0'><param name='MaxConnectionsPerServer' value='"+t+"' /><param name='SyncMode5' value='"+e+"' /></object>"}}catch(t){r.w.printStackTrace(t,null)}},a.setSystemLanguage=function(t){o.x.useUserSystemLang=!0;var e=s.d.getBrowserLanguage();t=WebSquare.cookie.getCookie("system_language")||t||e||"ko";o.x.systemLanguage=t;var i=a.getConfiguration("/WebSquare/languagePack/url[@lang='"+t+"']/@value");imports(i)},a.getEmptyTag=function(){try{if(a.EMPTY_TAGS)return a.EMPTY_TAGS;a.EMPTY_TAGS={};var t=a.getConfiguration("/WebSquare/emptyTag/@value");if(t)for(var e=t.split(","),i=0;i<e.length;i++){var o=e[i].wq_trim();a.EMPTY_TAGS[o]=!0}return a.EMPTY_TAGS}catch(t){r.w.printStackTrace(t,null)}},a.finalize=function(){try{WebSquare.DataCollection.stopBroadCast=!0,o.x.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var t=WebSquare.style.getScale();o.x.getBody()&&(a.firePageunload||(a.firePageunload=!0,WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload")));var e=WebSquare.util.getGlobalFunction(a.getConfiguration("/WebSquare/spa/onpageunload/@value"));if("function"==typeof e)try{e()}catch(t){WebSquare.logger.printLog("eval script error : "+e),r.w.printStackTrace(t,null)}if("true"===a.getConfiguration("/WebSquare/spa/autoReload/@value").toLowerCase()){for(var i in a.memoryLeakComponent)if(null!=WebSquare.componentsCache[i]){if(Number(a.getConfiguration("/WebSquare/spa/autoReload/@"+i))<=Object.keys(WebSquare.componentsCache[i]).length)return void WebSquare.util.clearPage();a.memoryLeakComponentCount+=Object.keys(WebSquare.componentsCache[i]).length*a.memoryLeakComponent[i]}var n=a.getConfiguration("/WebSquare/spa/autoReload/@count");if(n=""==n?NaN:Number(n),a.memoryLeakComponentCount>0&&a.memoryLeakComponentCount>n)return void WebSquare.util.clearPage()}var l=a._getGlobalVariable(!0);if(l)for(var h=l.split(","),d=0;d<h.length;d++){var c=h[d].wq_trim();for(var u in window[c])delete window[c][u];window[c]={}}for(var p in WebSquare.idCache){var g=WebSquare.idCache[p];if("function"!=typeof g.remove||g.remove==WebSquare.xfControl.prototype.remove||g.options&&("wframe"==g.options.pluginName||"pageInherit"==g.options.pluginName)){if(o.x.isPrintLog=!1,"function"==typeof g.finalize&&g.finalize(),o.x.isPrintLog=!0,"function"==typeof g.unbind&&g.unbind(),g.event&&g.event.clearCache(),o.x.useVisibleHelper&&g.render&&g.render.parentNode&&g!=WebSquare.body&&g.render.parentNode.removeChild(g.render),g.childControlList=[],window[g.id])try{delete window[g.id]}catch(t){window[g.id]=void 0}}else g.remove()}if(!o.x.useVisibleHelper&&WebSquare.body&&(WebSquare.body.childControlList=null,WebSquare.body.layerListener&&WebSquare.body.layerListener.removeAll(),WebSquare.body.render&&WebSquare.body.render.parentNode.removeChild(WebSquare.body.render)),o.x.body=null,o.x.idCache={},window[WebSquare.noConflict].comp={},o.x.idToUUID={},o.x.scriptSectionExcuteFlag=null,o.x.scriptSection="",o.x.useVisibleHelper=!1,o.x.styleSheetEarlyImport=1,o.x.styleSheetEarlyImportName="",o.x.skin&&WebSquare.skin.skinTag&&(WebSquare.skin.skinTag=WebSquare.styleSheetEarlyImportList.slice(0)),o.x.externalCSSList=[],o.x.externalCSSDOM=[],o.x.externalCSSURL=[],o.x.pageXMLString=null,WebSquare.uiplugin&&WebSquare.uiplugin.scheduleCalendar&&(WebSquare.uiplugin.scheduleCalendar.isImported=!1),null!=o.x.WebSquaredoc){WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.WebSquaredoc.instanceRefElement=[],o.x.componentsCache={};var m=document.getElementsByTagName("head")[0];for(d=WebSquare.WebSquaredoc.cssList.length-1;d>=0;d--){var f=WebSquare.WebSquaredoc.cssList[d];if("LINK"===f.tagName.toUpperCase()){
for(var b=WebSquare.util._getAbsolutePath(f.href.toString()),y=0;y<WebSquare.styleSheetEarlyImportList.length;y++)if(b===WebSquare.util._getAbsolutePath(WebSquare.styleSheetEarlyImportList[y])){WebSquare.WebSquaredoc.cssList.splice(y,1);break}}else m.removeChild(f),WebSquare.WebSquaredoc.cssList.splice(d,1)}if(m=null,o.x.externalCSSRemainder=WebSquare.WebSquaredoc.cssList.slice(0),null!=WebSquare.WebSquaredoc.xmlDocument)for(d=WebSquare.WebSquaredoc.xmlDocument.childNodes.length-1;d>=0;d--)WebSquare.WebSquaredoc.xmlDocument.removeChild(WebSquare.WebSquaredoc.xmlDocument.childNodes[d]);if(WebSquare.WebSquaredoc.models)for(var v=0;v<WebSquare.WebSquaredoc.models.length;v++){var w=WebSquare.WebSquaredoc.models[v];if(w){for(var S=0;S<w.submissions.length;S++)w.submissions[S].dead=!0,a.useSubmissionGlobal&&(window[w.submissions[S].id]=null);for(var C=0;C<w.workflows.length;C++)w.workflows[C].promiseStatus="REJECT",a.useWorkflowGlobal&&(window[w.workflows[C].id]=null)}}for(var p in WebSquare.WebSquaredoc)WebSquare.WebSquaredoc[p]=null}if(a.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),o.x.strictModeFrame=null),o.x.WebSquaredoc=null,o.x.callExecuteHelper=!1,a.firePageunload=!1,a.onurlchange=!1,WebSquare.layer&&(WebSquare.layer.disabledList=[],WebSquare.layer.submissionIDQueue=[],WebSquare.layer.submissionMessageQueue=[]),null==document.body){var _=document.createElement("body");s.d.fullViewed&&s.d.zoomed(_,t),document.documentElement.appendChild(_)}}catch(t){r.w.printStackTrace(t,null)}},a.getComponentById=function(t){try{return"string"==typeof t&&WebSquare.idCache[WebSquare.idToUUID[t]]?WebSquare.idCache[WebSquare.idToUUID[t]]:window[t]}catch(t){r.w.printStackTrace(t,null,this)}},a.setId=function(t,e){try{e._orgUUID=e.uuid,e.setAttribute("id",t),e.render.setAttribute("id",t),window[WebSquare.noConflict].comp[e.id]=null,delete window[WebSquare.noConflict].comp[e.id],e.id=t,WebSquare.idToUUID[t]=e.uuid,window[WebSquare.noConflict].comp[t]=e,"false"!=a.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[t]=e)}catch(t){r.w.printStackTrace(t,null,this)}},a.cleanObj=function(t){try{var e=[],i=0;try{if(null==JSON.stringify(t))return i}catch(t){return r.w.printStackTrace(t,null,this),i}e.push(t);for(var o=e.pop();null!=o;o=e.pop())if(!a.isNode(o)&&!a.isWindow(o)&&(i++,"object"==typeof o&&null!=o))for(var s in o){var n=o[s];"object"==typeof n&&null!=n&&e.push(n),delete o[s]}return i}catch(t){r.w.printStackTrace(t,null,this)}},a.isWindow=function(t){return t==t.window},a.isNode=function(t){return"undefined"!=typeof Node?t instanceof Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName},a.isXML=function(t){try{if(t){var e=(t?t.ownerDocument||t:0).documentElement;return!!e&&"HTML"!==e.nodeName}return}catch(t){r.w.printStackTrace(t,null,this)}},a.executePointScript=function(t){try{if(WebSquare.executePointScriptArr[t]){for(var e=0;e<WebSquare.executePointScriptArr[t].length;e++){var i=WebSquare.executePointScriptArr[t][e];if("function"==typeof i.script){var o,s=WebSquare.util.getComponentById(i.scope);s&&s.scope&&s.options&&!0===s.options.scope?o=s.scope:WebSquare.strictModeFrame&&(o=WebSquare.strictModeFrame.scope),i.script(o)}}WebSquare.executePointScriptArr[t]=null,delete WebSquare.executePointScriptArr[t]}}catch(t){r.w.printStackTrace(t,null,this)}},a.getPageURL=function(t,e){if("string"!=typeof t)return"";void 0!==e&&null!=e||(e={});var i=t;!0!==e.skipURL&&(i=a.getURL(i,e)),!0!==e.skipUri&&(i=WebSquare.jsLoader.getUri(i,e));var s=a.getConfiguration("/WebSquare/pageURLPrefix/@ignoreW2xPath");if(WebSquare.pageURLPrefix){if("function"==o.x.pageURLPrefixType){var r=WebSquare.pageURLPrefix.wq_replaceAll("()",""),n=WebSquare.util.getGlobalFunction(r);"function"==typeof n&&(i=n(i),"true"!==s.toLowerCase()&&(i+=encodeURIComponent(t)))}else i=o.x.pageURLPrefix+encodeURIComponent(i);i=i.replace(/%2F/g,"/")}return i},a.clearObj=function(t,e,i){if(null==e&&(e=1),
!(e>i||"object"!=typeof t&&"function"!=typeof t))for(var o in t){"object"!=typeof t[o]&&"function"!=typeof t[o]||a.clearObj(t[o],e+1);try{t[o]=null,delete t[o]}catch(t){r.w.printStackTrace(t,null,this)}}},a.clearJQuery=function(){try{if("undefined"!=typeof jQuery&&null!=jQuery){var t=[];for(var e in jQuery.cache)if(jQuery.cache[e].handle)try{t.push(jQuery.cache[e].handle.elem)}catch(t){}for(var i in jQuery.cleanData(t),t)delete t[i];t=null}}catch(t){WebSquare.logger.printLog("error : jQuery cleanData exception"),r.w.printStackTrace(t,null,this)}},a._businessPreProcessor=function(){try{var t=a.getConfiguration("/WebSquare/preProcessor/businessPreProcessor/@value"),e=WebSquare.util.getGlobalFunction(t);"function"==typeof e&&e()}catch(t){r.w.printStackTrace(t,null,this)}},a._initPopupParameter=function(){try{var t=a._getParentObj();if(o.x.isWebSquarePopup&&null!=t&&null!=t.WebSquare){var e,i=t.WebSquare.srcData,n=t.WebSquare.destData,l=!1,h="",d=WebSquare.net.getParameter("popupID"),c=t.WebSquare.dataObject[d];if(t.WebSquare.docTitleInfo&&(h=t.WebSquare.docTitleInfo[d]),h&&(document.title=h),void 0!==c&&null!=c)try{var u,p=c.type.toLowerCase(),g=c.name,m=typeof c.data;if(g){switch(p){case"string":if("string"==m)u=c.data;else if("object"==m)return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!");break;case"json":if("string"==m)(f=JSON.parse(c.data))&&(u=f);else if("object"==m){if(a.isXML(c.data))return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!!");u=c.data}break;case"xml":var f;if("string"==m)(f=WebSquare.xml.parse(c.data))&&(u=f);else if("object"==m){if(!a.isXML(c.data))return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!!");u=c.data}break;case"array":u=c.data}WebSquare.util.setData(g,u)}}catch(t){r.w.printStackTrace(t,null,this)}if(void 0!==i&&null!=i&&""!=i&&void 0!==n&&null!=n&&""!=n){try{if(l=i.indexOf("data:")>-1){var b=i.wq_replaceAll("data:",""),y=t.WebSquare.util.getComponentById(b);if(y)switch(y.initializeType){case"dataList":i=y.getAllJSON();break;case"dataMap":i=y.getJSON()}}else{var v=t.WebSquare.ModelUtil.findSerializedNode(i);i=WebSquare.xml.parse(v).documentElement}}catch(t){}try{if(l){var w=n.wq_replaceAll("data:",""),S=WebSquare.util.getComponentById(w);if(!S)return void $l("Error! : No match data. Must be the same as a srcDataType, a destDataType!["+w+"]")}else e=WebSquare.ModelUtil.findInstanceNode(n)}catch(t){}if(l&&void 0!==i&&null!=i)S.setJSON(i,!0);else if(void 0!==e&&null!=e&&void 0!==i&&null!=i){for(var C=e.childNodes,_=i.childNodes,x=C.length-1;x>=0;x--)e.removeChild(C.item(x));if(a.browserCheck.ieAllVersion&&s.d.useActiveXObject){var I=_.length-1;for(x=0;x<=I;x++)WebSquare.xml.appendChild(e,_[0])}else for(x=0;x<=_.length-1;x++)WebSquare.xml.appendChild(e,_[x]);var T=WebSquare.ModelUtil.getModelByID(t.WebSquare.destModelID);WebSquare.WebSquaredoc.unrender(t.WebSquare.destData),T.refresh()}}}}catch(t){r.w.printStackTrace(t,null,this)}},a._initDataObject=function(){try{if(null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare){var t=parent.window[WebSquare.noConflict].comp[window.frameElement.id]._getDataObject("name");if(t){var e=parent.window[WebSquare.noConflict].comp[window.frameElement.id]._getDataObject("type"),i=parent.window[WebSquare.noConflict].comp[window.frameElement.id]._getDataObject("data").slice(0);switch(e){case"json":i=JSON.parse(i);break;case"xml":i=WebSquare.xml.parse(i);break;case"array":i=JSON.parse(i)}WebSquare.util.setData(t,i),parent.window[WebSquare.noConflict].comp[window.frameElement.id]._removeDataObject()}}}catch(t){r.w.crossOrigin({message:t.message,name:"initDataObject"})}},a._createGlobalVariable=function(t){try{var e=a._getGlobalVariable(t);if(e)for(var i=e.split(","),o=0;o<i.length;o++){var s="string"==typeof i[o]&&i[o].wq_trim();try{
if(null!=window[s]&&!WebSquare.util.isEmptyObject(window[s]))throw{message:"variable auto creation error : ["+s+"] already exist!"};window[s]={},window[s][WebSquare.noConflict]=WebSquare.api,window[s][WebSquare.noConflict].id="";var n=o>0?String(o):"";window[WebSquare.noConflictFunction+n]=window[s][WebSquare.noConflict]}catch(t){r.w.printStackTrace(t,null)}}}catch(t){r.w.printStackTrace(t,null,this)}},a._getGlobalVariable=function(t){try{var e=a.getConfiguration("/WebSquare/spa/variable/@value")||"scwin",i=a.getConfiguration("/WebSquare/spa/variable/@clone")||"";return t&&i&&(e+=","+i),e}catch(t){r.w.printStackTrace(t,null,this)}},a._controlInvoker=function(t,e,i){try{var o;return WebSquare.uiplugin[t]&&(o=i?i.constructor===Array?WebSquare.uiplugin[t][e].apply(WebSquare.uiplugin[t][e],i):WebSquare.uiplugin[t][e].apply(WebSquare.uiplugin[t][e],[i]):WebSquare.uiplugin[t][e]()),o}catch(t){r.w.printStackTrace(t,null,this)}},a._isSinglePage=function(t){try{return!(WebSquare.uiplugin.wframe&&(WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>1||WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>1))}catch(t){r.w.printStackTrace(t,null,this)}},a._fireParentOnload=function(){try{null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare&&parent.window[WebSquare.noConflict].comp[window.frameElement.id].fireIframeload()}catch(t){r.w.crossOrigin({message:t.message,name:"oniframeload"})}},a._fireParentOnunload=function(){try{null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare&&parent.window[WebSquare.noConflict].comp[window.frameElement.id].fireIframeunload()}catch(t){r.w.crossOrigin({message:t.message,name:"oniframeload"})}},a._loadMsaServer=function(){try{var t=s.d.configurationJSON[0].WebSquare.msaServer;if(null!=t){var e=t.msa;e.constructor!==Array&&(e=[e]);for(var i=0;i<e.length;i++){var o=e[i],n=o["@baseUrl"],l=o["@w2xHome"],h=o["@name"];a._msaServerHash[h]={baseURI:n,w2xHome:l}}}}catch(t){r.w.printStackTrace(t,null,this)}},a._loadMsaStylesheet=function(){try{var t=s.d.configurationJSON[0].WebSquare.msaStylesheet;if(null!=t){var e=t.module;e.constructor!==Array&&(e=[e]);for(var i=0;i<e.length;i++){var n=e[i],l=n["@src"],h={msaName:n["@msaServerName"]},d=a._getMsaSrc(l,h);"string"==typeof d&&d&&o.x.styleSheetEarlyImportList.push(d)}}}catch(t){r.w.printStackTrace(t,null,this)}},a._loadProjectCommon=async function(){try{var t=s.d.configurationJSON[0].WebSquare.projectCommon;if(null!=t){var e=a.projectCommonVariable,i=t.module;i.constructor!==Array&&(i=[i]),window[e]={};for(var n=0;n<i.length;n++){var l=i[n],h=l["@src"];if(!a._projectCommonHash[h]){var d=l["@name"].slice(e.length+1),c=new WebSquare.uiplugin.udc({src:h,scope_uuid:o.x.strictModeFrame?WebSquare.strictModeFrame.uuid:""});await c.initAsync(),d&&(window[e][d]=c),a._projectCommonHash[h]=c.uuid;var u=c._wqContent;u.childControlList[0].activeStatus="active",u.childControlList[0].setUserAction()}}}}catch(t){r.w.printStackTrace(t,null,this)}},a._loadMsaCommon=async function(){try{var t=s.d.configurationJSON[0].WebSquare.msaCommon;if(null!=t){var e=a.projectCommonVariable,i=t.module;i.constructor!==Array&&(i=[i]);for(var n=0;n<i.length;n++){var l=i[n],h=l["@src"];if(!a._msaHash[h]){var d=l["@name"].slice(e.length+1),c=l["@msaServerName"],u=new WebSquare.uiplugin.udc({src:h,scope_uuid:o.x.strictModeFrame?WebSquare.strictModeFrame.uuid:"",msaName:c});await u.initAsync(),d&&(window[e][d]=u),a._msaHash[h]=u.uuid;var p=u._wqContent;p.childControlList[0].activeStatus="active",p.childControlList[0].setUserAction()}}}}catch(t){r.w.printStackTrace(t,null,this)}},a._getParentObj=function(){try{var t;return null!=window.opener?t=opener:window.parent!==window.self&&(t=parent),t}catch(t){r.w.printStackTrace(t,null,this)}return t},a._getMsaOption=function(t,e){try{var i={};for(var o in t&&("function"==typeof t._getMsaName&&(i.msaName=t._getMsaName()),t.options&&(i.tempHome=t.options.udcHome)),e)i[o]=e[o];return i
}catch(t){r.w.printStackTrace(t,null,this)}return i},a._getMsaSrc=function(t,e){try{var i="";void 0!==e&&null!=e||(e={});var o="getURL";if("image"===e.type&&(o="getImageURL",t.startsWith("data:")))return t;var s=e.frameObj;if("string"==typeof e.msaName&&e.msaName)i=a[o](t,e);else if(s&&null!=WebSquare.idCache[s.uuid]&&s.options&&"wframe"===s.options.pluginName){e.tempHome=s.options.udcHome;var n=t,l=s._getMsaName();if(l){var h="";"image"===e.type&&"url("===n.slice(0,4)&&(h="url(",n=n.slice(4)),"string"!=typeof n||n.startsWith("/")||n.startsWith("\\")||n.indexOf("://")>=0||e.tempHome||(n=h+s._getMsaHome()+n),e.msaName=l}i=a[o](n,e)}else i="string"==typeof e.tempHome&&e.tempHome?a[o](t,e):a[o](t);return i}catch(t){r.w.printStackTrace(t,null,this)}},a._scopingCommon=function(t,e,i){try{var o="WebSquare.core.commonCache."+e;return o+"= function(scopeObj){\nvar "+e+"; var ret;"+WebSquare.util.scopingFuncBody(t+"\nret = "+e+";","scopeObj","scopeObj")+"\nreturn ret;}"+(i?"\nwindow."+e+"="+o+'({"scope":{}});':"")}catch(t){r.w.printStackTrace(t,null,this)}},a._copyCommon=function(t,e){try{var i=a.commonCache[t];if("function"!=typeof i){var o=window[t];if(!o)return{};var n="var "+t+" = ";n+=(l=o,h="_@#wq#@_",d=[],JSON.stringify(l,(function(t,e){return null==e?e:e===window?"window":e===window.opener?"opener":e===window.parent?"parent":e===window.top?"top":"function"==typeof e||"object"==typeof e&&e.constructor===RegExp?(d.push(e),h):e})).replace(new RegExp('"_@#wq#@_"',"g"),(function(t){return d.shift()}))),s.d.globalEval(a._scopingCommon(n,t)),i=a.commonCache[t]}return i(e)}catch(t){r.w.printStackTrace(t,null,this)}var l,h,d}},8449:(t,e,i)=>{i.d(e,{h:()=>d});var o=i(2981),s=i(1656),r=i(2085),a=i(7275),n=i(3082),l=i(9304),h=i(701),d={_onRequest:!1,_requestUrl:o.x.baseServletURI+"serverTime.wq",_checkLocalTime:{gTime:-1,time:-1,interval:1e3,diffMax:12e4,gDiffMax:12e4,refresh:!1,cnt:0,pendingCnt:0,pendingMaxCnt:1e3},toTimestampString:function(t){return h.f.fillZero(t.getFullYear(),4)+"-"+h.f.fillZero(t.getMonth()+1,2)+"-"+h.f.fillZero(t.getDate(),2)+" "+h.f.fillZero(t.getHours(),2)+":"+h.f.fillZero(t.getMinutes(),2)+":"+h.f.fillZero(t.getSeconds(),2)+"."+h.f.fillZero(t.getMilliseconds(),3)+"000"},_parseDate:function(t,e){if(void 0!==e&&null!=e&&""!=e||(e="yyyyMMdd"),(t=n.D.getDate(t)).length!=e.length)return t;for(var i=["","","","","",""],o=0;o<e.length;o++){var s=e.charAt(o),r=t.charAt(o);switch(s){case"y":i[0]+=r;break;case"M":i[1]+=r;break;case"d":i[2]+=r;break;case"H":i[3]+=r;break;case"m":i[4]+=r;break;case"s":i[5]+=r}}for(o=0;o<i.length;o++)0===o?h.f.fillZero(i[o],4):h.f.fillZero(i[o],2);return i},parseDate:function(t,e){var i=d._parseDate(t,e);return"string"==typeof i?null:new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])},dateDiff:function(t,e){t+="",e+="",t=n.D.getDate(t),e=n.D.getDate(e),8!=t.length&&alert(l.d.getMessage("E_date_ShouldBeyyMMddFormat",t)),isNaN(t)&&alert(l.d.getMessage("E_date_ShouldBeNumberFormat",t)),8!=e.length&&alert(l.d.getMessage("E_date_ShouldBeyyMMddFormat",e)),isNaN(e)&&alert(l.d.getMessage("E_date_ShouldBeNumberFormat",e));var i=parseInt(t.substring(0,4),10),o=parseInt(t.substring(4,6),10),s=parseInt(t.substring(6,8),10),r=parseInt(e.substring(0,4),10),a=parseInt(e.substring(4,6),10),h=parseInt(e.substring(6,8),10),c=d.getMaxMinYear(),u=c.maxYear,p=c.minYear;if(i>u||i<p)alert(l.d.getMessage("E_date_YearRange",p,u,i));else if(o>12||o<1)alert(l.d.getMessage("E_date_MonthRange","1","12",o));else if(s>31||s<1)alert(l.d.getMessage("E_date_DayRange","1","31",s));else if(r>u||r<p)alert(l.d.getMessage("E_date_YearRange",p,u,r));else if(a>12||a<1)alert(l.d.getMessage("E_date_MonthRange","1","12",a));else{if(!(h>31||h<1)){var g=Date.UTC(i,o-1,s);return(Date.UTC(r,a-1,h)-g)/864e5}alert(l.d.getMessage("E_date_DayRange","1","31",h))}},dateAdd:function(t,e){t+="",8!=(t=n.D.getDate(t)).length&&alert(l.d.getMessage("E_date_ShouldBeyyMMddFormat",t)),isNaN(t)&&alert(l.d.getMessage("E_date_ShouldBeNumberFormat",t))
;var i=parseInt(t.substring(0,4),10),o=parseInt(t.substring(4,6),10),s=parseInt(t.substring(6,8),10),r=d.getMaxMinYear(),a=r.maxYear,c=r.minYear;if(i>a||i<c)alert(l.d.getMessage("E_date_YearRange",c,a,i));else if(o>12||o<1)alert(l.d.getMessage("E_date_MonthRange","1","12",o));else{if(!(s>31||s<1)){var u=Date.UTC(i,o-1,s)+864e5*e,p=new Date;return p.setTime(u),h.f.fillZero(p.getUTCFullYear()+"",4)+h.f.fillZero(p.getUTCMonth()+1+"",2)+h.f.fillZero(p.getUTCDate()+"",2)}alert(l.d.getMessage("E_date_DayRange","1","31",s))}},dateTimeAdd:function(t,e,i,o,s,r){var a,c=r||{};if(t+="",t=n.D.getDate(t),"time"===o?s?6!=t.length&&(a=l.d.getMessage("E_date_minute_ShouldBeHHmmssFormat",t)):"hour"===i||"minute"===i?4!=t.length&&(a=l.d.getMessage("E_date_minute_ShouldBeHHmmFormat",t)):"second"===i&&6!=t.length&&(a=l.d.getMessage("E_date_minute_ShouldBeHHmmssFormat",t)):"day"==i?8!=t.length&&(a=l.d.getMessage("E_date_ShouldBeyyMMddFormat",t)):"month"==i?6!=t.length&&(a=l.d.getMessage("E_date_month_ShouldBeyyMMFormat",t)):"hour"==i?10!=t.length&&(a=l.d.getMessage("E_date_hour_ShouldBeyyMMddHHFormat",t)):"minute"==i&&12!=t.length&&(a=l.d.getMessage("E_date_minute_ShouldBeyyMMddmmFormat",t)),isNaN(t)&&(a=l.d.getMessage("E_date_ShouldBeNumberFormat",t)),a)!1!==c.useAlert&&alert(a);else{var u,p,g;"time"==o?s?(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10),C=parseInt(t.substring(4,6),10)):"hour"===i||"minute"===i?(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10)):"second"===i&&(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10),C=parseInt(t.substring(4,6),10)):(u=parseInt(t.substring(0,4),10),p=parseInt(t.substring(4,6),10),g=parseInt(t.substring(6,8),10),w=parseInt(t.substring(8,10),10),T=parseInt(t.substring(10,12),10));var m=d.getMaxMinYear(),f=m.maxYear,b=m.minYear;(u>f||u<b)&&(a=l.d.getMessage("E_date_YearRange",b,f,u)),(p>12||p<1)&&(a=l.d.getMessage("E_date_MonthRange","1","12",p));var y=31;if(2==p?y=u%400==0||u%4==0&&u%100!=0?29:28:4!=p&&6!=p&&9!=p&&11!=p||(y=30),g>y||g<1?a=l.d.getMessage("E_date_DayRange","1",y,g):w>23||w<0?a=l.d.getMessage("E_date_HourRange","0","23",w):T>59||T<0?a=l.d.getMessage("E_date_MinuteRange","0","59",T):(C>59||C<0)&&(a=l.d.getMessage("E_date_SecondRange","0","59",C)),!a){if("time"===o){if(s){var v="";"hour"==i?v=36e5:"minute"==i?v=6e4:"second"==i&&(v=1e3);var w=Date.UTC(1900,1,1,w,T,C)+e*v;(T=new Date).setTime(w);var S=h.f.fillZero(h.f.fillZero(T.getUTCHours()+"",2)+h.f.fillZero(T.getUTCMinutes()+"",2)+h.f.fillZero(T.getUTCSeconds()+"",2))}else if("hour"==i)if(e&&"string"==typeof e&&4===e.length){var C=parseInt(e.substring(0,2),10),_=parseInt(e.substring(2,4),10);v=6e4,w=Date.UTC(1900,1,1,w,T)+60*C*60*1e3+_*v;(T=new Date).setTime(w);var x=T.getUTCDate(),I=x>1?parseInt(T.getUTCHours(),10)+24*(x-1):T.getUTCHours();S=h.f.fillZero(h.f.fillZero(I+"",2)+h.f.fillZero(T.getUTCMinutes()+"",2))}else{v=36e5,w=Date.UTC(1900,1,1,w,T)+e*v;(T=new Date).setTime(w);S=h.f.fillZero(h.f.fillZero(T.getUTCHours()+"",2)+h.f.fillZero(T.getUTCMinutes()+"",2))}else if("minute"==i){v=6e4,w=Date.UTC(1900,1,1,w,T)+e*v;(T=new Date).setTime(w);S=h.f.fillZero(h.f.fillZero(T.getUTCHours()+"",2)+h.f.fillZero(T.getUTCMinutes()+"",2))}else if("second"==i){var T;v=1e3,w=Date.UTC(1900,1,1,w,T,C)+e*v;(T=new Date).setTime(w);S=h.f.fillZero(h.f.fillZero(T.getUTCHours()+"",2)+h.f.fillZero(T.getUTCMinutes()+"",2)+h.f.fillZero(T.getUTCSeconds()+"",2))}}else if("day"==i){v=864e5;var k=Date.UTC(u,p-1,g)+e*v;(W=new Date).setTime(k);S=h.f.fillZero(W.getUTCFullYear()+"",4)+h.f.fillZero(W.getUTCMonth()+1+"",2)+h.f.fillZero(W.getUTCDate()+"",2)}else if("month"==i){v=864e5;var D=0;if(e>0)for(var L=p-1;L<p-1+e;L++)D+=(32-new Date(u+L/12|0,L%12,32).getDate())*v;else{for(L=p-2;L>p-2+e;L--){D+=(32-new Date(u+(L<0?L%12!=0?(L/12|0)-1:L/12|0:0),L<0?L%12!=0?L%12+12:0:L%12,32).getDate())*v}D*=-1}k=Date.UTC(u,p-1)+D;(W=new Date).setTime(k);S=h.f.fillZero(W.getUTCFullYear()+"",4)+h.f.fillZero(W.getUTCMonth()+1+"",2)
}else if("hour"==i){v=36e5,k=Date.UTC(u,p-1,g,w)+e*v;(W=new Date).setTime(k);S=h.f.fillZero(W.getUTCFullYear()+"",4)+h.f.fillZero(W.getUTCMonth()+1+"",2)+h.f.fillZero(W.getUTCDate()+"",2)+h.f.fillZero(W.getUTCHours()+"",2)}else if("minute"==i){var W;v=6e4,k=Date.UTC(u,p-1,g,w,T)+e*v;(W=new Date).setTime(k);S=h.f.fillZero(W.getUTCFullYear()+"",4)+h.f.fillZero(W.getUTCMonth()+1+"",2)+h.f.fillZero(W.getUTCDate()+"",2)+h.f.fillZero(W.getUTCHours()+"",2)+h.f.fillZero(W.getUTCMinutes()+"",2)}else if("year"==i)return h.f.fillZero(u+e+"",4);return S}!1!==c.useAlert&&alert(a)}},isValidDate:function(t,e){if(null==(e=n.D.getDate(e))||8!=e.length){alert(l.d.getMessage("E_date_ShouldBeyyMMddFormat",e));try{t.focus(),t.select()}catch(t){r.w.printStackTrace(t)}return!1}if(isNaN(e)){alert(l.d.getMessage("E_date_ShouldBeNumberFormat",e));try{t.focus(),t.select()}catch(t){r.w.printStackTrace(t)}return!1}var i=parseInt(e.substring(0,4),10),o=parseInt(e.substring(4,6),10),s=parseInt(e.substring(6,8),10);if(o<1||o>12){alert(l.d.getMessage("E_date_MonthRange","1","12",o));try{t.focus(),t.select()}catch(t){r.w.printStackTrace(t)}return!1}var a=31;if(2==o?a=i%400==0||i%4==0&&i%100!=0?29:28:4!=o&&6!=o&&9!=o&&11!=o||(a=30),s<1||s>a){alert(l.d.getMessage("E_date_DayRange","1",a,s));try{t.focus(),t.select()}catch(t){r.w.printStackTrace(t)}return!1}return!0},getFormattedDate:function(t,e){var i=null;if("object"!=typeof t||null==t)return null;if(void 0===e||null==e||""==e)i=t.getTime()+"";else{var o=-1;if((o=e.indexOf("yyyy"))>-1){var s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getFullYear()+"",4),o+4<e.length&&(s+=e.substring(o+4,e.length)),e=s}if((o=e.indexOf("YYYY"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getFullYear()+"",4),o+4<e.length&&(s+=e.substring(o+4,e.length)),e=s}if((o=e.indexOf("yy"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero((t.getFullYear()+"").substr(2,2)+"",2),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}if((o=e.indexOf("MM"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getMonth()+1+"",2),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}else e.indexOf("M")>-1&&(e=e.replace(/M/,t.getMonth()+1));if((o=e.indexOf("dd"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getDate()+"",2),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}else e.indexOf("d")>-1&&(e=e.replace(/d/,t.getDate()));if((o=e.indexOf("HH"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getHours()+"",2),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}if((o=e.indexOf("hh"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getHours()+"",2),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}if((o=e.indexOf("mm"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getMinutes()+"",2),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}if((o=e.indexOf("ss"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getSeconds()+"",2),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}if((o=e.indexOf("SSS"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=h.f.fillZero(t.getMilliseconds()+"",3),o+3<e.length&&(s+=e.substring(o+3,e.length)),e=s}if((o=e.indexOf("EEEE"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=l.d.getMessage("F_dateFormat_daynames_full").split(",")[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getUTCDay()],o+4<e.length&&(s+=e.substring(o+4,e.length)),e=s}if((o=e.indexOf("E"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=l.d.getMessage("F_dateFormat_daynames_abbr").split(",")[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getUTCDay()];for(var r=1,a=o+1;"E"===e.charAt(a);a++)r++;o+r<e.length&&(s+=e.substring(o+r,e.length)),e=s}if((o=e.indexOf("ww"))>-1){s="";o>0&&(s+=e.substring(0,o)),s+=d.getWeek(t),o+2<e.length&&(s+=e.substring(o+2,e.length)),e=s}i=e}return i},getIOFormatDate:function(t,e,i){try{if(t.length!==e.length)return t;var o=e;if(i||(8==t.length?i="yearMonthDate":6==t.length?i="yearMonth":10==t.length?i="yearMonthDateHour":12==t.length?i="yearMonthDateTime":14==t.length&&(i="yearMonthDateTimeSec")),
"yearMonthDate"==i){var s=t.substring(0,4),a=t.substring(4,6),n=t.substring(6);t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,a)).replace(/dd/gi,n)}else if("yearMonth"==i){s=t.substring(0,4),a=t.substring(4,6);t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,a)}else if("yearMonthDateHour"==i){s=t.substring(0,4),a=t.substring(4,6),n=t.substring(6,8);var l=t.substring(8,10);t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,a)).replace(/dd/gi,n)).replace(/HH/gi,l)}else if("yearMonthDateTime"==i){s=t.substring(0,4),a=t.substring(4,6),n=t.substring(6,8),l=t.substring(8,10);var h=t.substring(10,12);t=(t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,a)).replace(/dd/gi,n)).replace(/HH/gi,l)).replace(/mm/g,h)}else if("yearMonthDateTimeSec"==i){s=t.substring(0,4),a=t.substring(4,6),n=t.substring(6,8),l=t.substring(8,10),h=t.substring(10,12);var d=t.substring(12,14);t=(t=(t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,a)).replace(/dd/gi,n)).replace(/HH/gi,l)).replace(/mm/g,h)).replace(/SS/gi,d)}return t}catch(t){r.w.printStackTrace(t,null,this)}},getIOUnFormatDate:function(t,e,i){try{if(t.length!==e.length)return t;if(i||(8==t.length?i="yearMonthDate":6==t.length?i="yearMonth":10==t.length?i="yearMonthDateHour":12==t.length?i="yearMonthDateTime":14==t.length&&(i="yearMonthDateTimeSec")),"yearMonthDate"==i){var o=t.substr(e.indexOf("y"),4),s=h.f.fillZero(t.substr(e.indexOf("M"),2),2),a=h.f.fillZero(t.substr(e.indexOf("d"),2),2);t=o+s+a}else if("yearMonth"==i){o=t.substr(e.indexOf("y"),4),s=h.f.fillZero(t.substr(e.indexOf("M"),2),2);t=o+s}else if("yearMonthDateHour"==i){o=t.substr(e.indexOf("y"),4),s=h.f.fillZero(t.substr(e.indexOf("M"),2),2),a=h.f.fillZero(t.substr(e.indexOf("d"),2),2);var n=h.f.fillZero(t.substr(e.indexOf("H"),2),2);t=o+s+a+n}else if("yearMonthDateTime"==i){o=t.substr(e.indexOf("y"),4),s=h.f.fillZero(t.substr(e.indexOf("M"),2),2),a=h.f.fillZero(t.substr(e.indexOf("d"),2),2),n=h.f.fillZero(t.substr(e.indexOf("H"),2),2);var l=h.f.fillZero(t.substr(e.indexOf("m"),2),2);t=o+s+a+n+l}else if("yearMonthDateTimeSec"==i){o=t.substr(e.indexOf("y"),4),s=h.f.fillZero(t.substr(e.indexOf("M"),2),2),a=h.f.fillZero(t.substr(e.indexOf("d"),2),2),n=h.f.fillZero(t.substr(e.indexOf("H"),2),2),l=h.f.fillZero(t.substr(e.indexOf("m"),2),2);var d=h.f.fillZero(t.substr(e.indexOf("S"),2),2);t=o+s+a+n+l+d}return t}catch(t){r.w.printStackTrace(t,null,this)}},_getDay:function(t,e){t+="";var i=parseInt(t.slice(0,4)),o=t.slice(4,6);o=0==o.charAt(0)?parseInt(o.charAt(1)):parseInt(o);var s=t.slice(6,8);if(s=0==s.charAt(0)?parseInt(s.charAt(1)):parseInt(s),i<1900)return e&&alert(l.d.getMessage("Date_err_1900")),-1;if(o<0||o>12)return e&&alert(l.d.getMessage("Date_err_12")),-1;if(s<0||s>31)return e&&alert(l.d.getMessage("Date_err_31")),-1;if(2==o&&s>28){if((i%4!=0||i%100==0)&&i%400!=0)return e&&alert(l.d.getMessage("Date_err_28")),-1;if(s>29)return e&&alert(l.d.getMessage("Date_err_29")),-1}if((4==o||6==o||9==o||11==o)&&s>30)return e&&alert(l.d.getMessage("DatePicker_monthNames").split(",")[o-1]+l.d.getMessage("Date_err_30")),-1;var r=o;1==o&&(r=13,i-=1),2==o&&(r=14,i-=1);var a=s+2*r+i+parseInt(3*(r+1)/5,10)+parseInt(i/4,10)-parseInt(i/100,10)+parseInt(i/400,10)+2;return a-7*parseInt(a/7,10)},getDay:function(t){switch(this._getDay(t,!0)){case 0:return"토요일";case 1:return"일요일";case 2:return"월요일";case 3:return"화요일";case 4:return"수요일";case 5:return"목요일";case 6:return"금요일"}},toLunar:function(t){t=t.toString();var e=parseInt(t.substring(0,4)),i=parseInt(t.substring(4,6));"09"==t.substring(4,6)&&(i=9);var o=parseInt(t.substring(6,8));"0"==t.charAt(6)&&(o=parseInt(t.charAt(7),10))
;var s,r,a,n,l,h,d,c,u,p,g,m,f,b,y,v,w=new Array("12121223221217575_abc","12121212212207575_abc","11211212221207575_abc","21121321221227575_abc","21121121212207575_abc","21212112121207575_abc","22123211212127575_abc","21221211212107575_abc","21221212121207575_abc","12321221212127575_abc","12121212212207575_abc","11211232212227575_abc","11211212122207575_abc","12121121212207575_abc","21212312121217575_abc","22212112121207575_abc","12212121212107575_abc","21232212121217575_abc","21212122121207575_abc","12112122322127575_abc","12112121222107575_abc","21211212122207575_abc","12121321122127575_abc","22121121122107575_abc","22122112121207575_abc","12214121212127575_abc","12121221212107575_abc","21122121221207575_abc","12312121222127575_abc","12112121222107575_abc","21211231221227575_abc","21211211221207575_abc","22121121121207575_abc","22122312121127575_abc","21221212121207575_abc","12121221212107575_abc","21321221221217575_abc","21121212221207575_abc","12112123221227575_abc","12112112212207575_abc","21211211212207575_abc","21221321121227575_abc","12212121211207575_abc","21212212121107575_abc","21223212212127575_abc","11212122122107575_abc","21121212212207575_abc","12312112212227575_abc","12112112122207575_abc","12211231212217575_abc","22211211212107575_abc","22212121121207575_abc","12212412121127575_abc","12122122121207575_abc","11212122122107575_abc","21141212122217575_abc","21121121222107575_abc","22112114122127575_abc","22112112121207575_abc","22121211212107575_abc","22122141121217575_abc","21221221211207575_abc","12121221221207575_abc","11214121221227575_abc","11211212221207575_abc","21121121221207575_abc","22312112121227575_abc","21212112121207575_abc","22121213212127575_abc","21221211212107575_abc","21221212121207575_abc","12121421212127575_abc","12112212212207575_abc","11211212212207575_abc","21141121212227575_abc","12121121212207575_abc","21212112321227575_abc","12212112121207575_abc","12212121212107575_abc","21212232121217575_abc","21212122121207575_abc","12112122122107575_abc","21213212122217575_abc","21211212122207575_abc","12121121122107575_abc","22232112112217575_abc","22122112121207575_abc","12212123212127575_abc","12121221212107575_abc","21122121221207575_abc","12112321222127575_abc","12112121222107575_abc","21211211222107575_abc","22123121122127575_abc","22121121121207575_abc","22121212321127575_abc","21221212121107575_abc","22121221212107575_abc","21121241221217575_abc","21121212212207575_abc","12112112212207575_abc","21213211221227575_abc","21211211212207575_abc","21221121123227575_abc","12212121121207575_abc","12212212121107575_abc","21221232212127575_abc","11212122122107575_abc","21121212212207575_abc","12112312122227575_abc","12112112122207575_abc","12211211212207575_abc","12232121121217575_abc","22212121121207575_abc","12212212321127575_abc","12122121221207575_abc","11212122122107575_abc","21121322122217575_abc","21121121222107575_abc","22112112122107575_abc","22213211212127575_abc","22121211212107575_abc","22122121121207575_abc","12322121221127575_abc","12121221221207575_abc","11212123221227575_abc","11211212221207575_abc","21121121221207575_abc","22112312121227575_abc","21212112121207575_abc","21221211212107575_abc","21242121121217575_abc","21221212121207575_abc","12121212232127575_abc","12112122212207575_abc","11211212212207575_abc","21121321212227575_abc","12121121212207575_abc","21212112121207575_abc","21223211212127575_abc","12212121212107575_abc","21212212121207575_abc","12321212212127575_abc","12112122122107575_abc","21211232122217575_abc","21211212122207575_abc","12121121122207575_abc","12212312112217575_abc","22122112112207575_abc","12122121212107575_abc","21232122121217575_abc","21121221221207575_abc","12112123222127575_abc","12112121222107575_abc","21211211221207575_abc","22121141121227575_abc","22121121121207575_abc","22121212112107575_abc","22122321212117575_abc","21221221212107575_abc","21121221221207575_abc","12312121222127575_abc","12112112212207575_abc","21211213212227575_abc","21211211212207575_abc","21221121121207575_abc","21221412112127575_abc","12212212121107575_abc","21212212212107575_abc","21141212212217575_abc"),S=new Array(31,28,31,30,31,30,31,31,30,31,30,31),C=new Array(170)
;for(h=0;h<170;h++){for(C[h]=0,d=0;d<12;d++)switch(Number(w[h].charAt(d))){case 1:case 3:C[h]=C[h]+29;break;case 2:case 4:C[h]=C[h]+30}switch(Number(w[h].charAt(12))){case 0:break;case 1:case 3:C[h]=C[h]+29;break;case 2:case 4:C[h]=C[h]+30}}if(m=686200+Math.floor(470)-Math.floor(18.8)+Math.floor(4.7)+30,f=365*(b=e-1)+Math.floor(b/4)-Math.floor(b/100)+Math.floor(b/400),u=e%400==0||e%100!=0&&e%4==0,S[1]=u?29:28,!(o>S[i-1])){for(h=0;h<i-1;h++)f+=S[h];for(p=(f+=o)-m+1,g=C[0],h=0;h<170&&!(p<=g);h++)g+=C[h+1];for(s=h+1881,p-=g-=C[h],c=0!=Number(w[h].charAt(12))?13:12,l=0,d=0;d<c&&(Number(w[h].charAt(d))<=2&&l++,!(p<=(n=Number(w[h].charAt(d))<=2?Number(w[h].charAt(d))+28:Number(w[h].charAt(d))+26)));d++)p-=n;return y=(r=l)<10?"0"+r:""+r,v=(a=p)<10?"0"+a:""+a,s.toString()+y.toString()+v.toString()}},toSolar:function(t){t=t.toString();var e=parseInt(t.substring(0,4)),i=parseInt(t.substring(4,6));"09"==t.substring(4,6)&&(i=9);var o=parseInt(t.substring(6,8));"0"==t.charAt(6)&&(o=parseInt(t.charAt(7),10))
;var s,r,a,n,l,h,d,c,u,p,g=new Array("12121223221217575_abc","12121212212207575_abc","11211212221207575_abc","21121321221227575_abc","21121121212207575_abc","21212112121207575_abc","22123211212127575_abc","21221211212107575_abc","21221212121207575_abc","12321221212127575_abc","12121212212207575_abc","11211232212227575_abc","11211212122207575_abc","12121121212207575_abc","21212312121217575_abc","22212112121207575_abc","12212121212107575_abc","21232212121217575_abc","21212122121207575_abc","12112122322127575_abc","12112121222107575_abc","21211212122207575_abc","12121321122127575_abc","22121121122107575_abc","22122112121207575_abc","12214121212127575_abc","12121221212107575_abc","21122121221207575_abc","12312121222127575_abc","12112121222107575_abc","21211231221227575_abc","21211211221207575_abc","22121121121207575_abc","22122312121127575_abc","21221212121207575_abc","12121221212107575_abc","21321221221217575_abc","21121212221207575_abc","12112123221227575_abc","12112112212207575_abc","21211211212207575_abc","21221321121227575_abc","12212121211207575_abc","21212212121107575_abc","21223212212127575_abc","11212122122107575_abc","21121212212207575_abc","12312112212227575_abc","12112112122207575_abc","12211231212217575_abc","22211211212107575_abc","22212121121207575_abc","12212412121127575_abc","12122122121207575_abc","11212122122107575_abc","21141212122217575_abc","21121121222107575_abc","22112114122127575_abc","22112112121207575_abc","22121211212107575_abc","22122141121217575_abc","21221221211207575_abc","12121221221207575_abc","11214121221227575_abc","11211212221207575_abc","21121121221207575_abc","22312112121227575_abc","21212112121207575_abc","22121213212127575_abc","21221211212107575_abc","21221212121207575_abc","12121421212127575_abc","12112212212207575_abc","11211212212207575_abc","21141121212227575_abc","12121121212207575_abc","21212112321227575_abc","12212112121207575_abc","12212121212107575_abc","21212232121217575_abc","21212122121207575_abc","12112122122107575_abc","21213212122217575_abc","21211212122207575_abc","12121121122107575_abc","22232112112217575_abc","22122112121207575_abc","12212123212127575_abc","12121221212107575_abc","21122121221207575_abc","12112321222127575_abc","12112121222107575_abc","21211211222107575_abc","22123121122127575_abc","22121121121207575_abc","22121212321127575_abc","21221212121107575_abc","22121221212107575_abc","21121241221217575_abc","21121212212207575_abc","12112112212207575_abc","21213211221227575_abc","21211211212207575_abc","21221121123227575_abc","12212121121207575_abc","12212212121107575_abc","21221232212127575_abc","11212122122107575_abc","21121212212207575_abc","12112312122227575_abc","12112112122207575_abc","12211211212207575_abc","12232121121217575_abc","22212121121207575_abc","12212212321127575_abc","12122121221207575_abc","11212122122107575_abc","21121322122217575_abc","21121121222107575_abc","22112112122107575_abc","22213211212127575_abc","22121211212107575_abc","22122121121207575_abc","12322121221127575_abc","12121221221207575_abc","11212123221227575_abc","11211212221207575_abc","21121121221207575_abc","22112312121227575_abc","21212112121207575_abc","21221211212107575_abc","21242121121217575_abc","21221212121207575_abc","12121212232127575_abc","12112122212207575_abc","11211212212207575_abc","21121321212227575_abc","12121121212207575_abc","21212112121207575_abc","21223211212127575_abc","12212121212107575_abc","21212212121207575_abc","12321212212127575_abc","12112122122107575_abc","21211232122217575_abc","21211212122207575_abc","12121121122207575_abc","12212312112217575_abc","22122112112207575_abc","12122121212107575_abc","21232122121217575_abc","21121221221207575_abc","12112123222127575_abc","12112121222107575_abc","21211211221207575_abc","22121141121227575_abc","22121121121207575_abc","22121212112107575_abc","22122321212117575_abc","21221221212107575_abc","21121221221207575_abc","12312121222127575_abc","12112112212207575_abc","21211213212227575_abc","21211211212207575_abc","21221121121207575_abc","21221412112127575_abc","12212212121107575_abc","21212212212107575_abc","21141212212217575_abc"),m=new Array(31,28,31,30,31,30,31,31,30,31,30,31)
;if(y=e-1881,l=0==Number(g[y].charAt(12))?0:Number(g[y].charAt(i))>2?1:0,n=0,e>1881&&e<2050){for(y=e-1882,s=0;s<=y;s++){for(r=0;r<=12;r++)n+=Number(g[s].charAt(r));0==g[s].charAt(12)?n+=336:n+=362}y++,a=i-1;for(var f=0,b=-1;b<a+1&&f<1e6;f++)if(b++,Number(g[y].charAt(b))>2)n=n+28+Number(g[y].charAt(b)),a++;else{if(b==a){l&&(n=n+28+Number(g[y].charAt(b)));break}n=n+28+Number(g[y].charAt(b))}n=n+o+29;f=0;for(var y=1880;y<e&&f<1e6&&!(n<(b=1==(++y%400==0||y%100!=0&&y%4==0?1:0)?366:365));f++)n-=b;h=y,m[1]=b-337;for(f=0,y=0;y<i+1&&f<1e6&&!(n<=m[++y-1]);f++)n-=m[y-1];return u=(d=y)<10?"0"+d:""+d,p=(c=n)<10?"0"+c:""+c,h.toString()+u.toString()+p.toString()}},getCurrentServerDate:function(t){t=t||"yyyyMMdd";var e=new Date(Date.now()+WebSquare.serverDiff);return d.getFormattedDate(e,t)},_checkLocalTimeInterval:function(){d._checkLocalTime.cnt++;var t=(new Date).getTime(),e=t-d._checkLocalTime.time,i=t-d._checkLocalTime.gTime,o=d._checkLocalTime.cnt*d._checkLocalTime.interval,r=Math.abs(i-o),n=s.v.getConfiguration("/WebSquare/date/serverDate/@autoupdateinterval")||"3600";n=1e3*parseInt(n,10),e<0||i<0?(a.k.printLog("diff < 0 || gTotal < 0",e,i,r,o,t),d.updateServerTime()):d._checkLocalTime.pendingCnt>d._checkLocalTime.pendingMaxCnt?(d.updateServerTime(),a.k.printLog("date._checkLocalTime.pendingCnt > date._checkLocalTime.pendingMaxCnt",e,i,r,o,t)):i>n?(d.updateServerTime(),a.k.printLog("gTotal > gMax",e,i,r,o,t)):d._checkLocalTime.timezoneOffset!==(new Date).getTimezoneOffset()?(d.updateServerTime(),a.k.printLog("date._checkLocalTime.timezoneOffset !== new Date().getTimezoneOffset()",e,i,r,o,t)):!0===d._checkLocalTime.refresh?(a.k.printLog("date._checkLocalTime.refresh === true",e,i,r,o,t),d.updateServerTime()):e>d._checkLocalTime.diffMax?(d._checkLocalTime.refresh=!0,d._checkLocalTime.pendingCnt++,a.k.printLog("diff > date._checkLocalTime.diffMax",e,i,r,o,t)):d._checkLocalTime.gDiffMax,d._checkLocalTime.time=(new Date).getTime()},_initServerDiff:async function(){var t="false"!==String(s.v.getConfiguration("/WebSquare/date/serverDate/@enable")).toLowerCase();t&&await d.updateServerTime().catch((function(t){a.k.printLog("WebSquare.date.updateServerTime fail.")})),t&&!isNaN(o.x.serverDiff)||(o.x.serverDiff=0),d._onRequest=!1,d._initCheckLocalTime(),n.D.setInterval(d._checkLocalTimeInterval,{key:"WebSquare_date_checkLocalTimeInterval",caller:this,delay:d._checkLocalTime.interval})},_initCheckLocalTime:function(){d._checkLocalTime.time=(new Date).getTime(),d._checkLocalTime.gTime=(new Date).getTime(),d._checkLocalTime.cnt=0,d._checkLocalTime.refresh=!1,d._checkLocalTime.pendingCnt=0,d._checkLocalTime.timezoneOffset=(new Date).getTimezoneOffset()},updateServerTime:async function(){if(!0!==d._onRequest){var t="yyyyMMddHHmmssSSS",e=s.v.getConfiguration("serverTimeURL")||o.x.baseServletURI+"serverTime.wq";return e+="?pattern="+t+"&idx="+(new Date).getTime()+1e4*Math.random(),new Promise((function(i,a){var n;try{(n=s.v.getXMLHTTPObject()).open("GET",e,!0),n.setRequestHeader("Cache-Control","no-cache"),n.onreadystatechange=function(){if(4==n.readyState)if(d._onRequest=!1,n.status>=200&&n.status<400){var e=n.responseText;if("string"!=typeof e||!e)return void a();var s=d.parseDate(e,t),r=new Date(s).getTime()-(new Date).getTime();o.x.serverDiff=r,r=new Date((new Date).getTime()+r),n.onreadystatechange=function(){},n=null,d._initCheckLocalTime();var l=d.getFormattedDate(r,t);i(l)}else n.onreadystatechange=function(){},n=null,a()},d._onRequest=!0,n.send()}catch(t){d._onRequest=!1,n&&(n.onreadystatechange=function(){},n=null),r.w.printStackTrace(t),a()}}))}},_updateServerTime:function(t){},getServerTimeZone:function(){return new Promise((function(t,e){var i=s.v.getXMLHTTPObject();try{i.open("GET",o.x.baseServletURI+"serverTimeZone.wq",!0),i.onreadystatechange=function(){if(4===i.readyState)try{o.x.serverTimeOffset=parseInt(i.responseText,10),t(WebSquare.serverTimeOffset),i.onreadystatechange=function(){},i=null}catch(t){i.onreadystatechange=function(){},
i=null,e(t)}},i.send(null)}catch(t){i.onreadystatechange=function(){},i=null,e(t)}}))},getMaxMinYear:function(){var t=s.v.getConfiguration("/WebSquare/date/maxYear/@value")-0;(t<1e3||t>9999||isNaN(t))&&(t=2099);var e=s.v.getConfiguration("/WebSquare/date/minYear/@value")-0;if((e<1e3||e>9999||isNaN(e))&&(e=1901),e>t){var i=e;e=t,t=i}var o={};return o.maxYear=t,o.minYear=e,o},getWeek:function(t){var e=new Date;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)}}},1960:(t,e,i)=>{i.d(e,{B:()=>a});var o=i(2981),s=i(2085),r=i(7275),a={clear:function(){for(var t in r.k.printLog(" WebSquare memory leak initialize start "),window._funs)window._funs[t]=null;for(var e in window._objs)if(void 0!==window._objs[e]._closures){for(var i in window._objs[e]._closures)try{window._objs[e].detachEvent(window._objs[e]._closures[i].name,window._objs[e]._closures[i]),window._objs[e]._closures[i]=null,window._funs[i]=null}catch(t){}window._objs[e]._closures=null,window._objs[e]=null}window._objs=null,r.k.printLog(" WebSquare memory leak initialize end ")},cleanObj:function(t){},clearElement:function(t){var e=null,i=0,o=0,s="";if(e=t.attributes){o=e.length;for(i=0;i<o;i++)"function"==typeof t[s=e[i].name]&&(t[s]=null)}if(e=t.childNodes){o=e.length;for(i=0;i<o;i++)this.clearElement(t.childNodes[i])}},applyParentObject:function(t,e){try{return e.apply(t,arguments)}catch(t){s.w.printStackTrace(t)}},addListener:function(t,e,i,a){o.x.addListenerCnt++;try{if(a=a||!1,t.attachEvent)try{t!=window?"onload"==e?o.x.onload=i:t.attachEvent(e,i.closure(t,e)):t.attachEvent(e,i)}catch(t){s.w.printStackTrace(t)}else if(t.addEventListener)try{void 0!==e&&null!=e&&""!=e&&(e.startsWith("on")?t.addEventListener(e.slice(2),i,a):t.addEventListener(e,i,a))}catch(t){s.w.printStackTrace(t)}}catch(i){r.k.printlog("ERROR ["+t.id+"] ["+e+"] at WebSquare.event.addListener"),s.w.printStackTrace(i)}},removeListener:function(t,e,i,o){try{if(o=o||!1,t.detachEvent)try{t!=window?t.detachEvent(e,i.closure(t,e)):t.detachEvent(e,i)}catch(t){s.w.printStackTrace(t)}else if(t.removeEventListener)try{t.removeEventListener(e.slice(2),i,o)}catch(t){s.w.printStackTrace(t)}}catch(t){s.w.printStackTrace(t)}},addUserEvents:function(t,e,i){var o=[];try{if(e){if(void 0!==i){for(var r={},a=0;a<i.length;a++)r[i[a]]="";var n=[];for(a=0;a<e.length;a++)void 0===r[e[a].name]?o.push(e[a]):n.push(e[a]);e=n}"object"==typeof t.userEventList&&"number"==typeof t.userEventList.length?t.userEventList=t.userEventList.concat(e):t.userEventList=e}}catch(t){s.w.printStackTrace(t)}return o},fireEvent:function(t,e){try{var i=t.userEventList;if(t.options&&t.options.parentEvent&&t!=t.options.parentEvent)return void t.options.parentEvent.childFiredEvent.apply(t.options.parentEvent,arguments);if(i){for(var a,n=null,l=void 0,h=0;h<i.length;h++)if(void 0!==i[h].name&&i[h].name==e.toLowerCase())switch(i[h].action){case"script":if("function"==typeof(a="string"==typeof i[h].param.handler?WebSquare.util.getGlobalFunction(i[h].param.handler,t.scope_id):i[h].param.handler)){if(null==n&&(n=[],arguments.length>2))for(var d=2;d<arguments.length;d++)n.push(arguments[d]);i[h].disabled||(l=t.scope_obj?function(t,e,i,s){o.x.scope_obj=e.scope_obj.id;var r=t.apply(e,!0!==s?i:[e.scope_obj.scope].concat(i));return o.x.scope_obj=null,r}(a,t,n,i[h].param._old):a.apply(t,n),t.scope_obj&&null!=r.k&&"function"==typeof r.k.getEventDebug&&r.k.getEventDebug()&&"body"!==t.options.pluginName&&r.k.printLog("[EVENT LOG] id: ["+t.id+"] scope id: ["+(t.scope_obj?t.scope_obj.id:"")+"] ev: ["+i[h].name+"] : ev name: ["+i[h].param.handler+"]"))}else r.k.printLog("Event error ["+t.id+",ev:"+i[h].name+"] : "+i[h].param.handler+" is not a function")}if(void 0!==l)return l}}catch(e){s.w.printStackTrace(e,null,t)}},fireSystemEvent:function(t,e,i){try{if(!WebSquare.util.isIE()&&"createEvent"in document){
"on"==e.slice(0,2)&&(e=e.substring(2,e.length));var o=document.createEvent("HTMLEvents");for(var r in o.initEvent(e,!0,!0),i)o[r]=i[r];t.render.dispatchEvent(o)}else if("createEventObject"in document){"on"!=e.slice(0,2)&&(e="on"+e);o=document.createEventObject();for(var r in o.eventType=e,o.cancelBubble=!0,o.returnValue=!0,i)o[r]=i[r];t.render.fireEvent(e,o)}}catch(t){s.w.printStackTrace(t)}},getTarget:function(t){try{return null==t?null:t.target?t.target:t.srcElement?t.srcElement:null}catch(t){s.w.printStackTrace(t)}},getRelatedTarget:function(t){try{return null==t?null:t.relatedTarget?t.relatedTarget:null!=window.event&&a.fromElement?t.fromElement===WebSquare.event.getTarget(t)?t.toElement:t.fromElement:null}catch(t){s.w.printStackTrace(t)}},getClientX:function(t){try{return WebSquare.core.browserCheck.ie?a.clientX:t.clientX}catch(t){s.w.printStackTrace(t)}},getClientY:function(t){try{return WebSquare.core.browserCheck.ie?a.clientY:t.clientY}catch(t){s.w.printStackTrace(t)}},getOffsetX:function(t){try{if(WebSquare.core.browserCheck.ie)return a.offsetX;var e=t.target,i=WebSquare.style.getAbsoluteLeft(e);return t.pageX-i}catch(e){s.w.printStackTrace(e)}},getOffsetY:function(t){try{if(WebSquare.core.browserCheck.ie)return a.offsetY;var e=t.target,i=WebSquare.style.getAbsoluteTop(e);return t.pageY-i}catch(e){s.w.printStackTrace(e)}},getScreenX:function(t){try{if(WebSquare.core.browserCheck.ie)return a.screenX;if(!WebSquare.util.isMobile()||!t.touches)return t.screenX;var e=t.touches.item(0)||t.changedTouches.item(0);if(e)return e.screenX}catch(t){s.w.printStackTrace(t)}},getScreenY:function(t){try{if(WebSquare.core.browserCheck.ie)return a.screenY;if(!WebSquare.util.isMobile()||!t.touches)return t.screenY;var e=t.touches.item(0)||t.changedTouches.item(0);if(e)return e.screenY}catch(t){s.w.printStackTrace(t)}},getMouseX:function(t){try{var e=(t=t||a).clientX;return e+=document.documentElement.scrollLeft||document.body.scrollLeft,WebSquare.util.isMobile()&&(t.touches?e=t.touches.item(0).pageX:t.pointers&&(e=t.pointers[0].pageX)),e}catch(t){s.w.printStackTrace(t)}},getMouseY:function(t){try{var e=(t=t||a).clientY;return e+=document.documentElement.scrollTop||document.body.scrollTop,WebSquare.util.isMobile()&&(t.touches?e=t.touches.item(0).pageY:t.pointers&&(e=t.pointers[0].pageY)),e}catch(t){s.w.printStackTrace(t)}},stopPropagation:function(t){try{if(!t||"object"!=typeof t)return;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}catch(t){s.w.printStackTrace(t)}},preventDefault:function(t){try{if(!t||"object"!=typeof t)return;t.preventDefault?t.preventDefault():t.returnValue=!1}catch(t){s.w.printStackTrace(t)}},stopEvent:function(t){try{WebSquare.event.stopPropagation(t),WebSquare.event.preventDefault(t)}catch(t){s.w.printStackTrace(t)}},bindAsEventListener:function(t,e){return function(i){e.apply(t,[i||window.event].concat(Array.prototype.slice.call(arguments,2)))}},addEvent:function(t,e,i){i.$$guid||(i.$$guid=WebSquare.event.addEvent.guid++),t.events||(t.events={});var o=t.events[e];o||(o=t.events[e]={},t["on"+e]&&(o[0]=t["on"+e])),o[i.$$guid]=i,t["on"+e]=WebSquare.event.handleEvent},removeEvent:function(t,e,i){t.events&&t.events[e]&&delete t.events[e][i.$$guid]},handleEvent:function(t){var e=!0;t=t||window.event;var i=this.events[t.type];for(var o in i)this.$$handleEvent=i[o],!1===this.$$handleEvent(t)&&(e=!1);return e},fixEvent:function(t){t.preventDefault=WebSquare.event.fixEvent.preventDefault,t.stopPropagation=WebSquare.event.fixEvent.stopPropagation}};a.fixEvent.preventDefault=function(){this.returnValue=!1},a.fixEvent.stopPropagation=function(){this.cancelBubble=!0},a.isEventSupported=function(t,e){var i=!1;try{if(!t)return!1;var o=e;"string"!=typeof o||"o"===o.charAt(0)&&"n"===o.charAt(1)||(o="on"+o),(i=o in t)||t.setAttribute&&t.removeAttribute&&(t.setAttribute(o,""),i="function"==typeof t[o],void 0!==t[o]&&(t[o]=void 0),t.removeAttribute(o))}catch(t){s.w.printStackTrace(t)}return i},
a.getMouseWheelDelta=function(t){try{var e=t.detail,i=t.wheelDelta,o=-1!=navigator.userAgent.indexOf("Windows")||!1,r=-1!=navigator.userAgent.indexOf("Macintosh")||!1;return WebSquare.util.isMobile()?WebSquare.core.browserCheck.android&&(i/=360):WebSquare.util.isChrome()?(o||r)&&(i/=120):WebSquare.util.isSafari()?o?i/=120:r&&(i/=12):WebSquare.util.isFF()?o?i=e/-3:r&&(i=-1*e):WebSquare.util.isOpera()?o?i/=120:r&&(i/=160):WebSquare.util.isIEAllVersion("8 9 10 11")&&(i/=120),i}catch(t){s.w.printStackTrace(t)}}},2085:(t,e,i)=>{i.d(e,{w:()=>s});var o=i(2981),s={};!0!==o.x.skipLog||o.x.printError?(s.exceptionCnt=0,s.printError=function(t){WebSquare.logger.printLog("WebSquare Error\n\n"+t),WebSquare.logger.debug&&alert("WebSquare Error\n\n"+t)},s.printStackTrace=function(t,e,i){if(s.exceptionCnt++,o.x.printConsole||o.x.errorConsole){var r=o.x.w2xPath;if(i){var a=i.scope_obj;a&&"function"==typeof a.getSrc&&(r=a.getSrc())}t&&t.message&&(t.message+="\nxml page url : "+r,console.error(s.exceptionCnt,t),WebSquare.logger.printLog(t.message));var n=WebSquare.core.getConfiguration("/WebSquare/debug/@errorHandler"),l=WebSquare.util.getGlobalFunction(n);l&&l(t,t.message)}else{var h,d="";if(i&&i.getID)if(d+="Exception Occured at element id ["+i.getID()+"]\n",i.parentFrame&&null!=(h=o.x.idCache[i.parentFrame])){var c={frameObj:h},u=WebSquare.core._getMsaSrc(h.getSrc(),c);d+="* frame       : id=["+h.id+"], src=["+u+"]\n"}try{t.componentName&&(d+="* component   :"+t.componentName+"\n")}catch(t){}try{t.componentID&&(d+="* id          :"+t.componentID+"\n")}catch(t){}try{t.eventName&&(d+="* event       :"+t.eventName+"\n")}catch(t){}try{t.description&&(d+="* description :"+t.message+"\n")}catch(t){}try{t.number&&(d+="* number      :"+(65535&t.number)+"\n")}catch(t){}try{t.line&&(d+="* line        :"+t.line+"\n")}catch(t){}try{t.lineNumber&&(d+="* lineNumber  :"+t.lineNumber+"\n")}catch(t){}try{t.columnNumber&&(d+="* columnNumber:"+t.columnNumber+"\n")}catch(t){}try{t.sourceURL&&(d+="* sourceURL   :"+t.sourceURL+"\n")}catch(t){}try{t.fileName&&(d+="* fileName    :"+t.fileName+"\n")}catch(t){}if(e&&((e+="").length>100?d+="* source        :"+e.substring(0,100)+"\n":d+="* source        :"+e+"\n"),void 0===t.aleradyThrow){null!=t.stack?d+="================================================================\n"+t.stack+"\n================================================================\n":t.message&&(d+="* message     : "+t.message+"\n");var p=WebSquare.language.getMessage("E_exception_ErrorOccursSeeLog",d);""==p&&(p=d),WebSquare.logger.printLog(p),s.printInternalSource(),t.aleradyThrow="djshin"}}},s.parseStack=function(t){for(var e=t.split("\n"),i=[],o=0;o<e.length;o++)e[o]&&(e[o].trim().startsWith("at")?i.push(e[o]):0==o&&navigator.userAgent.indexOf("Chrome")>-1?i.push("    "+e[o]):i.push("    at "+e[o]));return i.join("\n")},s.ieErrorHandler=function(t,e,i){return WebSquare.logger.printLog(WebSquare.language.getMessage("E_exception_IERuntimeError",i,window.event.errorCharacter,window.event.errorCode,e,t,s.getSignature(s.ieErrorHandler.caller))),s.printInternalSource(),!0},s.printInternalSource=function(){for(var t=0;t<WebSquare.BootLoader.globalEvalArr.length;t++){var e=[],i="\n<<Internal JavaScript Source Block",o=WebSquare.BootLoader.globalEvalArr[t];if(o)for(var s=o.split(WebSquare.scriptIdentifier),r=s.length>1?1:0,a=1,n=!0,l=0;l<s.length;l++)if(""!=s[l]){var h=s[l].split("\n"),d=h[0]+"",c=d.indexOf('";');c>0&&(d=h[0].substring(0,c),h[0]=h[0].substring(c+2)),1===r?e.push(i+" ["+d+"]["+t+"] Start>>"):e.push(i+"["+t+"] Start>>"),n&&(n=!1,e.push("\n"),e.push("["),1===r&&e.push(d+":"),e.push(WebSquare.BootLoader.fillZero(a,4)),e.push("]"),a++);for(var u=0,p=h.length;u<p;u++)e.push("\n"),e.push("["),1===r&&e.push(d+":"),e.push(WebSquare.BootLoader.fillZero(a,4)),e.push("]"),e.push(h[u]),a++;1===r?e.push(i+" ["+d+"]["+t+"] End>>\n"):e.push(i+"["+t+"] End>>\n")}var g=e.join("");WebSquare.logEnableFlag&&WebSquare.logMsgArray.push(g),
WebSquare.printConsole&&console.log(g),WebSquare.remoteConsole&&WebSquare.remoteLogMsgArray.push(g)}WebSquare.BootLoader.globalEvalArr=[]},s.ffErrorHandler=function(t,e,i){return"Error loading script"==t?(WebSquare.BootLoader.printError("Module ["+e+"] Does not exist."),!1):(WebSquare.core.browserCheck.moz&&i++,WebSquare.logger.printLog(WebSquare.language.getMessage("E_exception_FFRuntimeError",i,e,t,s.getSignature(s.ffErrorHandler.caller))),s.printInternalSource(),!0)},s.getSignature=function(t,e){if(void 0===e&&(e=0),e>10)return"    ...(omission)";if(null==t||"null"==t)return"";try{var i="";null!=t.caller&&(i=t.toString()!=t.caller.toString()?s.getSignature(t.caller,++e):"    ...(recursion)");var o,r=t.toString(),a=r.indexOf('["');return-1==a?-1==(o=r.indexOf(")"))?"    at "+r+"\n"+i:"    at "+r.substring(0,o+1)+"\n"+i:-1==(o=r.indexOf('"',a+2))?"    at "+r+"\n"+i:"    at "+r.substring(a+2,o)+"\n"+i}catch(e){return t}},s.crossOrigin=function(t){try{void 0!==t&&null!=t||(t={}),null!=this.crossOriginChecked||WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/debug/@skipCrossOrigin"))||(WebSquare.logger.printLog("WebSquare "+t.name+" fail : ["+t.message+"]from : ["+location.toString()+"]"),this.crossOriginChecked=!0)}catch(t){}},s.crossOrigin=function(t){try{void 0!==t&&null!=t||(t={}),null!=this.crossOriginChecked||WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/debug/@skipCrossOrigin"))||(WebSquare.logger.printLog("WebSquare "+t.name+" fail : ["+t.message+"]from : ["+location.toString()+"]"),this.crossOriginChecked=!0)}catch(t){}}):(s.printError=function(){},s.printStackTrace=function(){},s.parseStack=function(){},s.ieErrorHandler=function(){},s.printInternalSource=function(){},s.ffErrorHandler=function(){},s.getSignature=function(){},s.crossOrigin=function(){})},227:(t,e,i)=>{i.d(e,{h:()=>s});var o=i(2085),s={isEmpty:function(t){return!t||0===t.length},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},matchTagName:function(t,e,i){if(!t)throw"no json given";return i&&(e=this.applyNS(e,i)),this.matchType(t,WebSquare.Elem.type.element)&&t.N===e},matchType:function(t,e){return t.T&&t.T===e},getChildNodes:function(t){return t.E?t.E:[]},findChild:function(t,e){for(var i=WebSquare.jsonUtil.getChildNodes(t),o=[],s=0;s<i.length;s++)if(i[s].N===e)return o.push(i[s]);return o},applyNS:function(t,e){var i=t;return e===WebSquare.core._XML_NAMESPACE.SCHEMA?i=t:e===WebSquare.core._XML_NAMESPACE.XFORMS?i="xf:"+t:e===WebSquare.core._XML_NAMESPACE.XHTML||e===WebSquare.core._XML_NAMESPACE.XML||e===WebSquare.core._XML_NAMESPACE.XSL?i=t:e===WebSquare.core._XML_NAMESPACE.EVENTS?i="ev:"+t:e===WebSquare.core._XML_NAMESPACE.W2&&(i="w2:"+t),i},dropNS:function(t){if(t)return t.substring(t.indexOf(":")+1)},getNS:function(t){if(t){var e=t.indexOf(":")>-1?t.indexOf(":"):t.length;return t.substring(0,e)}},walk_DFS:function(t,e){for(var i=[],o=[t];o.length>0;){for(var s=o.pop(),r=WebSquare.jsonUtil.getChildNodes(s),a=r.length-1;a>=0;a--)o.push(r[a]);var n=e(s);null!=n&&i.push(n)}return i},walk_DFS_async:async function(t,e){for(var i=[],o=[t];o.length>0;){for(var s=o.pop(),r=WebSquare.jsonUtil.getChildNodes(s),a=r.length-1;a>=0;a--)o.push(r[a]);var n=await e(s);null!=n&&i.push(n)}return i},walk_BFS:function(t,e){for(var i=[],o=[t];o.length>0;){for(var s=o.shift(),r=WebSquare.jsonUtil.getChildNodes(s),a=0;a<r.length;a++)o.push(r[a]);var n=e(s);null!=n&&i.push(n)}return i},getNodesByTagName:function(t,e,i){if(!t)throw"no json given";i&&(e=this.applyNS(e,i));return this.walk_DFS(t,(function(t){if(t.N===e)return t}))},getAttribute:function(t,e){var i=t.A;if(i)return i[e]},getAttributes:function(t){var e=t.A;if(!e)return[];var i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(o);return i},getAttributesObject:function(t){if(t.A)return t.A},appendChild:function(t,e){return t.E?t.E.push(e):t.E=[e],e},removeChild:function(t,e){
for(var i=WebSquare.jsonUtil.getChildNodes(t),o=0;o<i.length;o++)if(i[o]===e)return i.splice(o,1);return null},createNode:function(t){return{N:t,T:WebSquare.Elem.type.element,A:{}}},setAttribute:function(t,e,i){t.A[e]=i},removeAttribute:function(t,e){delete t.A[e]},_object_create:function(t){var e=function(){};return e.prototype=t,new e},cloneNode:function(t,e,i,o,s,r){if(null===t||"object"!=typeof t)return t;if(!0!==e){var a={};for(var n in t)"parent"!==n&&t.hasOwnProperty(n)&&(a[n]=t[n]);return a}if("function"==typeof t.clone&&t.clone!==WebSquare.xfControl.prototype.clone)return t.clone(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);void 0===i&&(i=[],o=[]),null==s?s=0:s++;for(var l,h=i.length,d=0;d<h;d++)if(t===i[d])return o[d];if("[object Array]"==Object.prototype.toString.call(t)){var c=t.slice();i.push(t),o.push(c);for(d=c.length;d--;)c[d]=WebSquare.jsonUtil.cloneNode(c[d],!0,i,o,s,r);return c}if(!0===r)l={};else{var u=Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__;u||(u=t.constructor.prototype),l=WebSquare.jsonUtil._object_create(u)}i.push(t),o.push(l);var p={parent:!0};for(var n in t)!0!==p[n]&&(l[n]=WebSquare.jsonUtil.cloneNode(t[n],!0,i,o,s,r));return l},getCDataNodeValue:function(t){var e="";return t.E&&t.E.length>0&&(e=t.E[0].cdata||""),e},getTextNodeValue:function(t){var e="";return t.E&&t.E.length>0&&(e=t.E[0].text||""),e},getValue:function(t,e,i){for(var o="",s=WebSquare.jsonUtil.getChildNodes(t),r=0;r<s.length;r++)if(s[r].N==e){var a=WebSquare.jsonUtil.getNodesByTagName(t,e)[0];if(!i){var n=WebSquare.jsonUtil.getChildNodes(a)[0];void 0!==n&&(o=3==n.T?n.text:4==n.T?n.cdata:"");break}o=WebSquare.jsonUtil.getAttribute(a,i)}return o.wq_trim()},findNodes:function(t,e){var i=function(t){return t.A&&t.A===name?t:[]}.bind(this);return this.walk_DFS(t,i)},serialize:function(t){return JSON.stringify(t,(function(t,e){if("parent"!==t)return e}))},setJSONByPath:function(t,e,i){try{if("string"!=typeof e||null==t)return;for(var s=e.wq_trim().split("."),r=0;t&&("object"==typeof t||"function"==typeof t)&&r<s.length-1;)t=t[s[r++]];t[s[s.length-1]]=i}catch(t){o.w.printStackTrace(t,null,this)}},getJSONByPath:function(t,e){try{if("string"!=typeof e||null==t)return t;for(var i=e.wq_trim().split("."),s=0;t&&("object"==typeof t||"function"==typeof t)&&s<i.length;)t=t[i[s++]];return t}catch(t){o.w.printStackTrace(t,null,this)}}}},9304:(t,e,i)=>{i.d(e,{d:()=>o});var o={getMessage:function(t,...e){try{var i="";if(!t)return"";void 0===WebSquareLang[t]?(WebSquare.logger.printLog("'"+t+"' is not defined."),i=""):i=WebSquareLang[t];for(var o=0;o<e.length;o++)try{i=i.replace(new RegExp("%"+(o+1),"g"),e[o])}catch(t){WebSquare.logger.printLog(t.message)}return i}catch(t){WebSquare.logger.printLog(t.message)}}}},7275:(t,e,i)=>{i.d(e,{k:()=>l,f:()=>h});var o=i(2981),s=i(6301),r=i(1656),a=i(2085),n=i(9304),l={_skipLog:function(t){t.printLog=function(){},t.changeClientName=function(){},t.sendRemoteLog=function(){},t.printLog1=function(){},t.getFileName=function(){},t.getLogTime=function(){},t.getLog=function(){},t.getErrorLog=function(){},t.clearLog=function(){},t.showLog=function(){},t.saveLog=function(){},t.showDebugMsg=function(){},t.showErrorMsg=function(){},t.alertObject=function(){},t.getObjectStr=function(){},t.showObject=function(){},t._showObject=function(){},t.getFunctionName=function(){},t.showContextMenu=function(){},t.setGlobalDebug1=function(){},t.setGlobalDebug2=function(){},t.getGlobalDebug=function(){return!1},t.getEventDebug=function(){return!1},t.setEventDebug=function(){},t.getVersion=function(){},t.getVersionString=function(){return o.x.ver},t.getFileVersion=function(){},t.getFileVersionString=function(){return o.x.buildDate},t.contextMenuAddRow=function(){},t.contextMenuAddRow1=function(){},t.hideContextMenu=function(){},t.dumpCSS=function(){},t.debug=!1,t.debugKey="",o.x.logMsgArray=[]}}
;if(!0===o.x.skipLog)l._skipLog(l);else{l._initImport=function(){s.d.browserCheck.safari?(document.oncontextmenu=function(t){if(t.ctrlKey&&2==t.button)return WebSquare.event.stopEvent(t),!1},document.onmousedown=l.showContextMenu):document.oncontextmenu=l.showContextMenu,document.onclick=l.hideContextMenu},o.x._initImportList.push("logger"),l.printLog=function(t){try{if(!WebSquare.logEnableFlag)return;if(WebSquare.logMsgArrayLength++,WebSquare.isPrintLog){o.x.logMsgCurrentLength+=t.length,o.x.logMsgLength+=t.length,(WebSquare.logMsgArray.length>500||o.x.logMsgCurrentLength>5e4)&&(delete o.x.logMsgArray,o.x.logMsgArray=[],o.x.logMsgCurrentLength=t.length,WebSquare.logMsgArray.push(l.getLogTime()+" "+l.getFileName()+"] Delete logs for reducing memory usage. Total logs : "+o.x.logMsgArrayLength+", bytes : "+WebSquare.logMsgLength));var e=s.d.getLogTime(),i=" "+l.getFileName()+"] "+t;WebSquare.logMsgArray.push(e+i),WebSquare.printConsole&&console.log(e+i),o.x.remoteConsole&&WebSquare.remoteLogMsgArray.push(e+o.x.logFileName+i)}}catch(t){}},l.changeClientName=function(){if(WebSquare.logEnableFlag){l.clientName||(l.clientName=s.d.getCookie("remote_client_name"),l.clientName||(l.clientName="Client_"+parseInt(1e3*Math.random()),s.d.setCookie("remote_client_name",l.clientName)));var t=prompt(n.d.getMessage("E_logger_changeClientName"),l.clientName);t&&(l.clientName=t,s.d.setCookie("remote_client_name",l.clientName))}},o.x.remoteConsole&&(l.sendRemoteLog=function(t){if(WebSquare.logEnableFlag&&(l.clientName||(l.clientName=s.d.getCookie("remote_client_name"),l.clientName||(l.clientName="Client_"+parseInt(1e3*Math.random()),s.d.setCookie("remote_client_name",l.clientName))),o.x.remoteConsole)){try{if(WebSquare.remoteLogMsgArray.length>0){t=JSON.stringify({clientName:l.clientName,logs:o.x.remoteLogMsgArray});o.x.remoteLogMsgArray=[];var e=null;s.d.useActiveXObject?e=new ActiveXObject(r.v._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest),e.open("POST",o.x._resourceURI+"fiddle/logAggregator.jsp",!1),e.send(t),e=null}}catch(t){a.w.printStackTrace(t)}window.setTimeout("logger.sendRemoteLog()",1e3)}},window.setTimeout("logger.sendRemoteLog()",1e3)),l.printLog1=function(t){try{WebSquare.logEnableFlag&&WebSquare.logMsgArray.push("             "+l.getFileName()+"] "+t)}catch(t){}},l.getFileName=function(){if(WebSquare.logEnableFlag){var t=location.pathname;try{var e=t.lastIndexOf("/");e>-1&&e<t.length-1&&(t=t.substring(e+1)),(e=t.lastIndexOf("."))>-1&&(t=t.substring(0,e))}catch(t){}return t}},l.getLogTime=function(t){if(WebSquare.logEnableFlag){var e=null,i=(e="undefined"==t||null==t?new Date:new Date(t)).getTime(),s=i-o.x.logTime,r=WebSquare.text.fillZero(e.getHours(),2)+":"+WebSquare.text.fillZero(e.getMinutes(),2)+":"+WebSquare.text.fillZero(e.getSeconds(),2)+"."+WebSquare.text.fillZero(e.getMilliseconds(),3);return s<1e5?(o.x.logTotalTime+=s,r+=" "+WebSquare.text.fillZero(s,5)+" "+WebSquare.text.fillZero(WebSquare.logTotalTime,6)):r+=" 00000 000000",o.x.logTime=i,r}},l.getLog=function(t){if(WebSquare.logEnableFlag){if(t){var e=l.getLog();return l.clearLog(),e}var i="";try{window.parent!==window.self&&window.parent.WebSquare&&""!=(i=window.parent.logger.getLog())&&(i="Parent Log["+window.parent.name+"] \n"+i)}catch(t){a.w.printStackTrace(t)}try{return""==i?WebSquare.logMsgArray.join("\n"):WebSquare.logMsgArray.join("\n")+"\n\n\n"+i}catch(t){a.w.printStackTrace(t)}}},l.getErrorLog=function(){if(WebSquare.logEnableFlag){o.x.errorLogMsgArray=[];for(var t=0;t<WebSquare.logMsgArray.length;++t)(WebSquare.logMsgArray[t].indexOf("오류")>-1||WebSquare.logMsgArray[t].indexOf("에러")>-1||WebSquare.logMsgArray[t].indexOf("Runtime Error")>-1||WebSquare.logMsgArray[t].indexOf("Error occurs")>-1||WebSquare.logMsgArray[t].indexOf("error occurred")>-1)&&WebSquare.errorLogMsgArray.push(WebSquare.logMsgArray[t]);var e="";try{
window.parent!==window.self&&window.parent.WebSquare&&""!=(e=window.parent.logger.getErrorLog())&&(e="\n----------------------------------------Parent Log["+window.parent.name+"]----------------------------------------\n"+e)}catch(t){a.w.printStackTrace(t)}try{return""==e?WebSquare.errorLogMsgArray.join("\n--------------------------------------------------------------------------------\n"):WebSquare.errorLogMsgArray.join("\n--------------------------------------------------------------------------------\n")+"\n\n\n"+e}catch(t){a.w.printStackTrace(t)}}},l.clearLog=function(){var t=l.getLog();try{window.parent!==window.self&&window.parent.WebSquare&&window.parent.logger.clearLog()}catch(t){}try{o.x.logMsgArray=[]}catch(t){a.w.printStackTrace(t)}return t},l.showLog=function(){if(WebSquare.logEnableFlag){var t,e="";if(WebSquare.domain&&(e="?domain="+WebSquare.text.URLEncoder(WebSquare.domain)),s.d.browserCheck.android||s.d.browserCheck.iphone||s.d.browserCheck.ipad||s.d.browserCheck.ipod||s.d.browserCheck.blackberry)(t=r.v.getConfiguration("logMsgMobileURL"))||(t=o.x.baseURI+s.d.inquiresPath("message/logMsgMobile.html")),t+=e,window.open(t);else(t=r.v.getConfiguration("logMsgURL"))||(t=o.x.baseURI+s.d.inquiresPath("message/logMsg.html")),t+=e,window.open(t,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")}},l.saveLog=function(){if(WebSquare.logEnableFlag){var t=l.getLog(),e=r.v.getXMLHTTPObject();e.open("POST",o.x._resourceURI+"/engine/servlet/saveLog.jsp",!1),e.send(t),e=null}},l.showDebugMsg=function(t,e,i){if(WebSquare.logEnableFlag){var a;if(void 0!==e&&(t._config=e),void 0!==i&&(t.title=i),"object"==typeof t)a=t;else{a=new Object;try{a["debug info"]=null!=t?t.toString():""}catch(t){}}var n="";WebSquare.domain&&(n="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var l=r.v.getConfiguration("debugMsgURL");l||(l=o.x.baseURI+s.d.inquiresPath("message/debugMsg.html")),WebSquare.net.showWindow(l+n,a,"dialogHeight: 700pt; dialogWidth: 580pt; edge: Raised; center: Yes; help: No; edge: raised; resizable: Yes; status: No;")}},l.showErrorMsg=function(t){if(WebSquare.logEnableFlag){var e="";WebSquare.domain&&(e="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var i=r.v.getConfiguration("errorMsgURL");i||(i=o.x.baseURI+s.d.inquiresPath("message/errorMsg.html")),WebSquare.net.showWindow(i+e,t,"dialogHeight: 300pt; dialogWidth: 280pt; edge: Raised; center: Yes; help: No; resizable: Yes; status: No;")}},l.alertObject=function(t,e){var i="";try{if("string"==typeof t)i=t;else if("object"==typeof t)if(null==t)i+=" null";else try{for(var o in t){var s=o+"               ";s=s.substring(0,30);try{i+=s+":  "+t[o]+"\n"}catch(t){}}}catch(t){i+=n.d.getMessage("E_logger_InnerBlindObject")}}catch(t){a.w.printStackTrace(t)}1==e?$l(i):alert(i)},l.getObjectStr=function(t,e,i){try{if(!WebSquare.logEnableFlag)return;for(var o="",s=0;s<t;s++)o+="\t";if(t>i.maxDepth)return o+"[...]";var r="";if("string"==typeof e||"number"==typeof e)r=e;else if("object"==typeof e)if(null==e)r+=" null";else try{for(var h in e){var d=h+"               ";d=d.substring(0,25);try{if(isNaN(h)){if(i.exclude&&i.exclude.indexOf(h)>-1)continue;if(i.include&&-1==i.include.indexOf(h))continue}if(!i.includeFunction&&"function"==typeof e[h])continue;if("object"==typeof e[h]&&null!=e[h]){if(!i.includeFunction&&0==(h+"").indexOf("on"))continue;if(!i.includeFunction&&void 0!==e[h].innerHTML){r+=o+d+": [DOM Obejct]\n";continue}if(e[h].documentElement||e[h].ownerDocument){r+=o+d+": [XML Obejct]\n"+o+WebSquare.xml.serialize(e[h])+"\n";continue}r+=o+d+":\n"+l.getObjectStr(t+1,e[h],i)+"\n"}else r+=o+d+": "+e[h]+"\n"}catch(t){}}}catch(t){r+=n.d.getMessage("E_logger_InnerBlindObject")}return r}catch(t){a.w.printStackTrace(t)}},l.showObject=function(t,e){if(WebSquare.logEnableFlag){var i=new Object,o="";try{if(WebSquare.xml.isDocument(t))try{o+=WebSquare.xml.indent(t)}catch(t){
o+=n.d.getMessage("E_logger_InnerBlindObject")}else if("string"==typeof t)o=t;else if("object"==typeof t)if(null==t)o+=" null";else try{for(var s in t){var r=s+"               ";if(r=r.substring(0,15),null==t[s])o+=r+":  null\n";else if(WebSquare.xml.isDocument(t[s]))o+=r+":  \n"+WebSquare.xml.indent(t[s]);else if("object"==typeof t[s])try{o+=r+":  "+l._showObject(t[s],1)}catch(t){o+=r+":  [object]\n"}else try{"function"==typeof t[s]?o+=r+":  "+a.w.getSignature(t[s])+"\n":o+=r+":  "+t[s]+"\n"}catch(t){o+=r+":  \n"}}}catch(t){o+=n.d.getMessage("E_logger_InnerBlindObject")}}catch(t){a.w.printStackTrace(t)}null==e||""==e?i.Object=o:i[e]=o,l.showDebugMsg(i,"text",n.d.getMessage("E_logger_ObjectInfo"))}},l._showObject=function(t,e){if(WebSquare.logEnableFlag){for(var i="\n",o="",s="",r=0;r<e;r++)o+="\t";try{if(WebSquare.xml.isDocument(t))try{i+=o+s+":  \n"+WebSquare.xml.indent(t)}catch(t){i+=n.d.getMessage("E_logger_InnerBlindObject")}else if("object"==typeof t)if(null==t)i+=" null";else for(var h in t)if(s=(s=h+"               ").substring(0,15),null==t[h])i+=s+":  null\n";else if(WebSquare.xml.isDocument(t[h]))i+=o+s+":  \n"+WebSquare.xml.indent(t[h]);else if("object"==typeof t[h])try{i+=o+s+":  \n"+l._showObject(t[h],e++)}catch(t){i+=o+s+":  [object]\n"}else try{"function"==typeof t[h]?i+=o+s+":  "+a.w.getSignature(t[h])+"\n":i+=o+s+":  "+t[h]+"\n"}catch(t){i+=o+s+":  \n"}}catch(t){i+=n.d.getMessage("E_logger_InnerBlindObject")}return i+="\n"}},l.getFunctionName=function(t){if(null==t||"null"==t)return"";try{var e=t.toString();if(-1==e.indexOf("anonymous")){var i=e.indexOf("function"),o=e.indexOf("(");return e.substring(i+8,o).wq_trim()}}catch(e){return t}return""},s.d.browserCheck.android||s.d.browserCheck.iphone||s.d.browserCheck.ipad||s.d.browserCheck.ipod||s.d.browserCheck.blackberry?(l.getGlobalDebug=function(){return!1},l.getEventDebug=function(){return!1}):(s.d.browserCheck.moz||s.d.browserCheck.chrome||s.d.browserCheck.ieAllVersion||s.d.browserCheck.opera||s.d.browserCheck.safari)&&(l.showContextMenu=function(t){if(WebSquare.logEnableFlag&&!1!==WebSquare.logEnableContextMenu){t=t||event;var e="block"==r.v.getConfiguration("debugMenu")||"blockAll"==r.v.getConfiguration("debugMenu");if(r.v.browserCheck.moz||r.v.browserCheck.chrome){if(!t.ctrlKey||3!=t.which||e&&!WebSquare.logEnableContextMenu)return!0}else if(r.v.browserCheck.ieAllVersion){if(!t.ctrlKey&&!t.crtlLeft||e&&!WebSquare.logEnableContextMenu)return!0}else if(r.v.browserCheck.opera){if(!(t.ctrlKey&&t.shiftKey&&(!e||WebSquare.logEnableContextMenu)||t.ctrlKey&&t.button==2(!e||WebSquare.logEnableContextMenu)))return!0}else if(r.v.browserCheck.safari&&(!t.ctrlKey||2!=t.button||e&&!WebSquare.logEnableContextMenu))return!0;var i=window.innerWidth-t.clientX,o=window.innerHeight-t.clientY,s=document.getElementById("_contextMenuLayer");void 0!==s&&null!=s||(s=document.createElement("div"),document.body.insertBefore(s,null),s.id="_contextMenuLayer",s.style.position="absolute"),s.style.left=i<182?(window.pageXOffset||document.documentElement.scrollLeft)+t.clientX-182+"px":(window.pageXOffset||document.documentElement.scrollLeft)+t.clientX+"px",s.style.top=o<176?(window.pageYOffset||document.documentElement.scrollTop)+t.clientY-176+"px":(window.pageYOffset||document.documentElement.scrollTop)+t.clientY+"px";var a=JSON.stringify({x:WebSquare.event.getClientX(t),y:WebSquare.event.getClientY(t)});s.style.zIndex="20000",s.style.visibility="visible",s.style.display="";var h="";h+="<div onselectstart='return false' style='position:relative; overflow-x:hidden; overflow-y: auto; width:175px;height:250px; border:4px solid #e7e7e7; '>",h+="<table width='175' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>",h+=l.contextMenuAddRow("WebSquare.logger.showLog",n.d.getMessage("E_logger_ContextmenuSeeLog"),a),h+=l.contextMenuAddRow1("WebSquare.util.getAddress",n.d.getMessage("E_logger_ContextmenuSeeAddress"),a),
h+=l.contextMenuAddRow("WebSquare.util.getRQ",n.d.getMessage("E_logger_ContextmenuSeeQR"),a),h+=l.contextMenuAddRow1("WebSquare.util.viewSource",n.d.getMessage("E_logger_ContextmenuSeeSource"),a),h+=l.contextMenuAddRow("WebSquare.util.viewCollection",n.d.getMessage("E_logger_ContextmenuSeeCollection"),a),h+=l.contextMenuAddRow("WebSquare.util.viewInstance",n.d.getMessage("E_logger_ContextmenuSeeInstance"),a);r.v.getConfiguration("/WebSquare/debug/@fiddle");h+=l.contextMenuAddRow("WebSquare.logger.changeClientName",n.d.getMessage("E_logger_ContextmenuChangeClientName"),a),l.globalDebug1?h+=l.contextMenuAddRow1("WebSquare.logger.setGlobalDebug1",n.d.getMessage("E_logger_ContextmenuStopDebugOnScreen"),a):h+=l.contextMenuAddRow1("WebSquare.logger.setGlobalDebug1",n.d.getMessage("E_logger_ContextmenuStartDebugOnScreen"),a),l.getGlobalDebug()?h+=l.contextMenuAddRow("WebSquare.logger.setGlobalDebug2",n.d.getMessage("E_logger_ContextmenuStopDebugOnSystem"),a):h+=l.contextMenuAddRow("WebSquare.logger.setGlobalDebug2",n.d.getMessage("E_logger_ContextmenuStartDebugOnSystem"),a),WebSquare.logger.eventDebug?h+=WebSquare.logger.contextMenuAddRow("WebSquare.logger.setEventDebug()",WebSquare.language.getMessage("E_logger_ContextmenuStopEventDebug"),a):h+=WebSquare.logger.contextMenuAddRow("WebSquare.logger.setEventDebug()",WebSquare.language.getMessage("E_logger_ContextmenuStartEventDebug"),a),h+=l.contextMenuAddRow1("parent.print",n.d.getMessage("E_logger_ContextmenuPrint"),a),h+=l.contextMenuAddRow("WebSquare.util.reinitializeTop",n.d.getMessage("E_logger_ContextmenuPageReload"),a),h+=l.contextMenuAddRow("WebSquare.util.reinitializeWframe",n.d.getMessage("E_logger_ContextmenuPageReloadWframe"),a,"[false, "+a+"]"),h+=l.contextMenuAddRow1("parent.WebSquare.logger.getFileVersion",n.d.getMessage("E_logger_ContectmenuFileInfo"),a),h+=l.contextMenuAddRow("WebSquare.logger.getVersion",n.d.getMessage("E_logger_ContextmenuVersion"),a),h+="</table></div>",s.innerHTML=h;for(var d=s.getElementsByTagName("td"),c=0;c<d.length;c++)d[c].getAttribute("data-onclick")&&WebSquare.event.addListener(d[c],"onclick",(function(){var t=this.getAttribute("data-onclick");t=t.replace(/[\(][\s]*[\)]/g,"");var e=this.getAttribute("data-point");l.hideContextMenu(e);var i=this.getAttribute("data-param"),o=[];i?o=JSON.parse(i):o.push(e);var s=WebSquare.util.getGlobalFunction(t);"function"==typeof s&&s.apply(s,o)}));return!1}},l.setGlobalDebug1=function(){WebSquare.logEnableFlag&&(l.globalDebug1=!l.globalDebug1,l.hideContextMenu())},l.setGlobalDebug2=function(){if(WebSquare.logEnableFlag){if(l.getGlobalDebug())WebSquare.cookie.setCookie("globalDebug","false");else"debug"==prompt(n.d.getMessage("E_logger_EnterPassword"),"")?WebSquare.cookie.setCookie("globalDebug","true"):(WebSquare.cookie.setCookie("globalDebug","false"),alert(n.d.getMessage("E_logger_IncorrectPassword")));l.hideContextMenu()}},l.getGlobalDebug=function(){try{if(!WebSquare.logEnableFlag)return;var t=parseInt(WebSquare.cookie.getCookie("lastAccess"),10);isNaN(t)&&(t=(new Date).getTime());var e=(new Date).getTime();return e-t<12e5?(WebSquare.cookie.setCookieAsync("lastAccess",e+""),"true"==WebSquare.cookie.getCookie("globalDebug")):(WebSquare.cookie.setCookie("globalDebug","false"),!1)}catch(t){}return!1},l.getEventDebug=function(){try{if(!WebSquare.logEnableFlag)return;return"true"==WebSquare.cookie.getCookie("eventDebug")}catch(t){}return!1},l.setEventDebug=function(){WebSquare.logEnableFlag&&(l.eventDebug=!l.eventDebug,WebSquare.cookie.setCookie("eventDebug",l.eventDebug),l.hideContextMenu())},l.getVersion=function(){WebSquare.logEnableFlag&&alert("WebSquare Runtime Engine\n          Version : "+WebSquare.text.BASE64Decode(WebSquare.ver)+"\n\n  Copyright ⓒ 2006  INSWAVE Systems, Inc.\n  All Rights Reserved.\n")},l.getVersionString=function(){return WebSquare.text.BASE64Decode(WebSquare.ver)},l.getFileVersion=function(){
WebSquare.logEnableFlag&&alert("FileName : "+o.x.w2xPath+"\nBuildDate : "+WebSquare.buildDate)},l.getFileVersionString=function(){return o.x.buildDate},l.contextMenuAddRow=function(t,e,i,o,s){if(WebSquare.logEnableFlag){var r="font-family: Tahoma, Verdana, arial,helvetica; font-size: 11px; color: #222222; line-height: normal;background-color:#FFFFFF; color:#222222; width:100%; height:19px; text-decoration:none; padding:3px 3px 1px 3px; cursor:pointer; ";!0===s&&(r+="border-top:1px dotted #9fbcd4; ");var a='<tr><td onmouseover=\'this.style.backgroundColor="b8d5f2";this.style.color="003a89";\' onmouseout=\'this.style.backgroundColor="#FFFFFF";this.style.color="222222";\' ';a+="style='"+r+"'";var n="";return o&&(n=" data-param='"+o+"'"),a+=" data-point='"+i+"' data-onclick='"+t+"'"+n+">"+e+"</td></tr>"}},l.contextMenuAddRow1=function(t,e,i,o){return l.contextMenuAddRow(t,e,i,o,!0)},l.hideContextMenu=function(t){if(WebSquare.logEnableFlag&&(WebSquare&&r.v&&r.v.browserCheck))if(r.v.browserCheck.moz||r.v.browserCheck.chrome||r.v.browserCheck.ieAllVersion)void 0!==(e=document.getElementById("_contextMenuLayer"))&&null!=e&&(e.style.visibility="hidden",e.style.display="none");else if(r.v.browserCheck.opera||r.v.browserCheck.safari){var e;if(!t.ctrlKey)void 0!==(e=document.getElementById("_contextMenuLayer"))&&null!=e&&(e.style.visibility="hidden",e.style.display="none")}}),l.dumpCSS=function(){if(WebSquare.logEnableFlag&&r.v.browserCheck.ie)for(var t=document.styleSheets,e=0;e<t.length;e++){var i=t[e];alert(i.href+"/n"+i.cssText)}},l.enableLog=function(){o.x.logEnableFlag=!0},l.disableLog=function(){l.clearLog(),o.x.logEnableFlag=!1},l.enableContextMenu=function(){"blockAll"!=r.v.getConfiguration("debugMenu")&&(o.x.logEnableContextMenu=!0)},l.disableContextMenu=function(){l.hideContextMenu(),o.x.logEnableContextMenu=!1},l.debug=!1,l.debugKey="";var h={getScope:function(t){try{for(var e="string"==typeof t?document.getElementById(t):t,i=window;null!=e&&e!=document.body;){var o=WebSquare.idToUUID[e.getAttribute("id")];if(null!=o){var s=WebSquare.idCache[o];s&&s.scope_obj&&(i=s.scope_obj.scope);break}e=e.parentNode}return i}catch(t){a.w.printStackTrace(t,null,this)}},getFrame:function(t){try{return WebSquare.debug.getScope(t).scwin.$w.getFrame().id}catch(t){a.w.printStackTrace(t,null,this)}}}}},701:(t,e,i)=>{i.d(e,{f:()=>n,V:()=>l});var o=i(2981),s=i(2085),r=i(1656),a=i(3082),n={checkMaxLength:function(t,e){if(void 0!==t&&void 0!==t.maxLength&&t.maxLength>-1&&e.length>t.maxLength){var i=e.length-t.maxLength;e=e.substring(i)}return e},checkAllowChar:function(t,e){var i=t,o="";if(void 0!==e&&null!=e&&""!=e){for(var s=new RegExp("["+e+"]"),r=0;r<i.length;r++){var a=i.charAt(r);null!=a.match(s)&&(o+=a)}return o}return i},checkIgnoreChar:function(t,e){var i=t,o="";if(void 0!==e&&null!=e&&""!=e){for(var s=new RegExp("["+e+"]"),r=0;r<i.length;r++){var a=i.charAt(r);null!=a.match(s)||(o+=a)}return o}return i},getSelection:function(t){var e={start:0,end:0};try{if("selectionStart"in t)e.start=t.selectionStart,e.end=t.selectionEnd;else{var i=document.selection.createRange().getBookmark(),o=t.createTextRange();o.moveToBookmark(i);var r=t.createTextRange();r.collapse(!0),r.setEndPoint("EndToStart",o);var a=r.text.length,n=o.text.length;e.start=a,e.end=a+n}}catch(t){s.w.printStackTrace(t)}return e},setSelection:function(t,e){try{if(t.setSelectionRange)t.focus(),t.setSelectionRange(e.start,e.end);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e.end),i.moveStart("character",e.start),i.select()}}catch(e){s.w.printStackTrace(e,null,this),null!=t&&null!=t.focus&&t.focus()}},getCaretPos:function(t){var e=0;try{if(a.D.isIE())for(var i=document.selection.createRange().duplicate(),o=t.createTextRange();i.compareEndPoints("StartToStart",o)>0;)i.moveStart("character",-1),e++;else e=t.selectionStart}catch(t){s.w.printStackTrace(t)}return e},setCaretPos:function(t,e){try{if(a.D.isIE()){var i=t.createTextRange()
;i.move("character",e),i.select()}else t.selectionStart=e,t.selectionEnd=e}catch(t){s.w.printStackTrace(t)}},checkString:function(t,e){var i=t.render.value;if(r.v.browserCheck.moz){if(0==e.charCode)return;if(-1!=t.maxLength&&i.length>=t.maxLength){if(t.render.selectionStart!=t.render.selectionEnd)return;return void e.preventDefault()}}var o=e.charCode?e.charCode:e.keyCode;if(!(1==e.ctrlKey&&86==o||1==e.ctrlKey&&118==o)){var s=String.fromCharCode(o);if(void 0!==t.ignoreChar&&null!=t.ignoreChar&&""!=t.ignoreChar){var a=new RegExp("["+t.ignoreChar+"]");if(null!=s.match(a))return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}if(void 0!==t.allowChar&&null!=t.allowChar&&""!=t.allowChar){a=new RegExp("["+t.allowChar+"]");if(null==s.match(a))return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}if(""!=t.characterCase&&"upper"==t.characterCase&&e.keyCode>=97&&e.keyCode<=122&&(e.keyCode-=32),""!=t.characterCase&&"lower"==t.characterCase&&event.keyCode>=65&&event.keyCode<=90&&(event.keyCode+=32),"number"==t.valueType){if(0!=t.getCaretPos()&&(45==event.keyCode||43==event.keyCode))return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault();if(("+"==i.charAt(0)||"-"==i.charAt(0))&&0==t.getCaretPos())return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault();if(i.indexOf(".")>-1&&46==e.keyCode)return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}}},validateValue:function(t,e){return"true"==e.mandatory&&""==t.wq_trim()?(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be filled "),!1):-1!=e.minLength&&t.length<e.minLength?(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be same or more than "+e.minLength),!1):!(-1!=e.maxLength&&t.length>e.maxLength)||(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be same or less than "+e.maxLength),!1)},validateEffect:function(t,e){""!=e.invalid_background_color&&(e.render.style.backgroundColor=e.invalid_background_color),""!=e.invalid_color&&(e.render.style.color=e.invalid_color)},getPosition:function(t){var e=t.indexOf("."),i=0;if(e>-1){for(var o=t.substring(e),s=0;s<o.length;s++){"#"!=(a=o.charAt(s))&&"0"!=a||i++}i-=2*i}else for(var r=0;r<t.length;r++){var a;"0"==(a=t.charAt(r))&&i++}return i},checkComma:function(t){return-1!=t.indexOf(",")},formatCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s=","),r||(r=".");var a=new RegExp("\\[("+r+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),c=(e=e.replace(a,"")).match(n),u=(c=null!=c?c.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(c=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)c+="0"}m.setPrecision(u,d),m.cutZeroDecimal(c);var v=m.getValueWithDelimiter(s,g,o);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr((e.lastIndexOf("#")>e.lastIndexOf("0")?e.lastIndexOf("#"):e.lastIndexOf("0"))+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatFloat:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return t+"";s||(s=","),r||(r=".");var a=new RegExp("\\[("+r+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),c=(e=e.replace(a,"")).match(n),u=(c=null!=c?c.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(c=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)c+="0"}m.setPrecision(u,d),m.cutZeroDecimal(c);var v=m.getValueWithDelimiter(s,g,o)
;o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatEuroCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s="."),r||(r=",");var a=new RegExp("\\[("+s+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),c=(e=e.replace(a,"")).match(n),u=(c=null!=c?c.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(c=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)c+="0"}m.setPrecision(u,d),m.cutZeroDecimal(c);var v=m.getValueWithDelimiter(s,g);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatRupeeCurrency:function(t,e,i,o,s,r){var a=e;if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";if(s||(s=","),r||(r="."),e.indexOf(";")>-1){for(var n=e.split(";"),l="",h=0;h<n.length;h++){var d=(l=n[h].wq_trim()).match(WebSquare.text.formatRupeeCRe1);if(d&&d.length>0){var c=d[0].replace("[","").replace("]","");if(new Function("return Number("+t+")"+c)())break}}if(l)return WebSquare.text.formatRupeeCurrency(t,l.replace(WebSquare.text.formatRupeeCRe1,""),i,o,s,r)}var u=new RegExp("\\[("+r+"*)\\]","g"),p=new RegExp("["+r+"]+[#0]+"),g=new RegExp("["+s+"]+[#0]+"),m=new RegExp("["+r+"][0-9]*"),f=e.match(u),b=(e=e.replace(u,"")).match(p),y=(b=null!=b?b.join(""):r).length-1,v=(e=e.replace(p,"")).substr(0,e.indexOf("#")),w=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#")),S=e.match(g);S=null!=S?S.join(""):s,e=e.replace(g,"");var C=new WebSquare.numberFormatter(t,s,r);if(o){null==f&&(f="[floor]");var _=t.match(m);if(b=r,_&&_.toString().length>=2){var x=_.toString().length;for(h=0;h<x-1;h++)b+="0"}}C.setPrecision(y,f),C.cutZeroDecimal(b);var I=C.getFormattedValue(a);return o&&t.slice(-1)==r&&(I+=r),!o||"-"!==t&&"+"!==t||(I=t),v&&(I=v+I),w&&(I+=w),I},formatTengeCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s=" "),r||(r=",");var a="";t.length>1&&("+"==t.charAt(0)||"-"==t.charAt(0))&&(a=t.charAt(0),t=t.substr(1));var n=new RegExp("\\[(.*)\\]","g"),l=new RegExp("["+r+"]+[#0]+"),h=new RegExp("["+s+"]+[#0]+"),d=new RegExp("["+r+"][0-9]*"),c=e.match(n),u=(e=e.replace(n,"")).match(l),p=(u=null!=u?u.join(""):r).length-1,g=(e=e.replace(l,"")).match(h),m=(g=null!=g?g.join(""):s).length-1;e=e.replace(h,"");var f=new WebSquare.numberFormatter(t,s,r);if(o){null==c&&(c="[floor]");var b=t.match(d);if(u=r,b&&b.toString().length>=2)for(var y=b.toString().length,v=0;v<y-1;v++)u+="0"}f.setPrecision(p,c),f.cutZeroDecimal(u);var w=f.getValueWithDelimiter(s,m);o&&t.slice(-1)==r&&(w+=r),!o||"-"!==t&&"+"!==t||(w=t);var S=e.substr(0,e.indexOf("#")),C=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return S&&(w=S+w),C&&(w+=C),a+w},formatDate:function(t,e,i,o){if(void 0!==i&&null!=i&&""!=i||(i="yyyyMMdd"),!o&&t.length!==i.length)return t;void 0!==e&&null!=e&&""!=e||(e="yyyy/MM/dd");for(var s=0;s<t.length&&s<i.length;s++){var r=i.charAt(s),a=t.charAt(s);"yMdHmS".indexOf(r)>=0&&(e=e.replace(r,a))}if(e.indexOf("E")>=0){var n=WebSquare.date._parseDate(t,i);if(WebSquare.date._getDay(n.slice(0,3).join(""),!1)>=0){var l=new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5]);e=WebSquare.date.getFormattedDate(l,e)}else e=e.wq_replaceAll("E","")}return o&&(e=(e=e.replace(/(\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s)(y|M|d|H|m|S)/g,"")).replace(/(y|M|d|H|m|S)/g,"")),e},formatTime:function(t,e,i){if(void 0!==i&&null!=i&&""!=i||(i="HHmmss"),
void 0!==e&&null!=e&&""!=e||(e="HH:mm"),""==t)return"";for(var o=0;o<t.length&&o<i.length;o++){var s=i.charAt(o),r=t.charAt(o);"Hms".indexOf(s)>=0&&(e=e.replace(s,r))}return e=e.replace(/H|m|s/g,"0")},formatTextMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";if(i)var o=new RegExp("[^"+i+"]","g"),s=t.replace(o,"");else s=t.replace(/\D/g,"");if(void 0===s||null==s||""==s)return"";for(var r=e,a=0,n=0;n<r.length;n++)if("#"==r[n]&&(r=n>0?r.substr(0,n)+s[0]+r.substr(n+1):s[0]+r.substr(n+1),s.length>0&&(s=s.substr(1)),0==s.length)){a=n+1;break}return a==r.length-1&&"#"!==r[a]?r=r.substr(0,a+1):0!==a&&(r=r.substr(0,a)),r},formatReverseTextMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";for(var o=0;o<e.length;o++)"#"==e[o]&&1;if(i)var s=new RegExp("[^"+i+"]","g"),r=t.replace(s,"");else r=t.replace(/\D/g,"");if(void 0===r||null==r||""==r)return"";var a=e,n=0;for(o=a.length-1;o>=0;o--)if("#"==a[o]&&(a=o>0?a.substr(0,o)+r[r.length-1]+a.substr(o+1):r[r.length-1]+a.substr(o+1),0==(r=r.substr(0,r.length-1)).length)){n=o;break}return 1==n&&"#"!==a[0]?a=a.substr(0):0!==n&&(a=a.substr(n)),a},formatNumberMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";var o=t.replace(/\D/g,"");if("-"!==t&&(void 0===o||null==o||""==o))return"";for(var s=o.length-1;s>=0&&"0"==o[s];s--);if(o=o.substr(0,s+1),/^[0\D]+$/g.test(t)&&"0"==e[0]){var r=0;"-"==t[0]&&(r=1);for(s=r;s<t.length&&("0"==t[s]&&"0"==e[s]);s++);o=1==r?t.substr(1,s-1):t.substr(0,s)}if("-"!==t&&(void 0===o||null==o||""==o))return"";var a=e;if("-"==t[0]&&1==t.length)a=t[0];else{var n=0;for(s=0;s<a.length;s++)if(("#"==a[s]||"0"==a[s])&&(a=s>0?a.substr(0,s)+o[0]+a.substr(s+1):o[0]+a.substr(s+1),o.length>0&&(o=o.substr(1)),0==o.length)){n=s+1;break}for(;n<a.length;){if("#"==a[n]){for(n-=1;!/\d/g.test(a[n]);)n-=1;a=a.substr(0,n+1);break}n+=1}}return"-"==t[0]&&1!=t.length?t[0]+a:a},formatReverseNumberMask:function(t,e){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";for(var i=0,o=0;o<e.length;o++)"#"==e[o]&&(i+=1),"0"==e[o]&&(i+=1);var s=t.replace(/\D/g,"");if("-"!==t&&(void 0===s||null==s||""==s))return"";for(o=0;o<s.length&&"0"==s[o];o++);if(s=s.substr(o),/^[0\D]+$/g.test(t)&&(s="0"),s.length>i&&(s=s.substr(0,s.length-1)),"-"!==t&&(void 0===s||null==s||""==s))return"";var r=e;if("-"==t[0]&&1==t.length)r=t[0];else{var a=0;for(o=r.length-1;o>=0;o--)if(("#"==r[o]||"0"==r[o])&&(r=o>0?r.substr(0,o)+s[s.length-1]+r.substr(o+1):s[s.length-1]+r.substr(o+1),0==(s=s.substr(0,s.length-1)).length)){a=o-1;break}for(;a>=0;){if("#"==r[a]){for(;!/\d/g.test(r[a]);)a+=1;r=r.substr(a);break}a-=1}}return"-"==t[0]&&1!=t.length?t[0]+r:r},formatText:function(t,e){if(t+="",void 0===e||null==e||""==e)return t;for(var i="",o=t.length-1,s=e.length-1;s>=0&&o>=0;s--){var r=e.charAt(s);"#"!=r?i=r+i:(i=t.charAt(o)+i,o--)}return o>-1&&o<t.length&&(i=t.substring(0,o+1)+i),s>-1&&-1==e.substring(0,s+1).indexOf("#")&&(i=e.substring(0,s+1)+i),i},format:function(t,e,i,o){return"number"==i?WebSquare.text.formatCurrency(t,e):"currency"==i?WebSquare.text.formatEuroCurrency(t,e,o):"date"==i?WebSquare.text.formatDate(t,e,o):"time"==i?WebSquare.text.formatTime(t,e,o):WebSquare.text.formatText(t,e)},getValidString:function(t,e,i,o){return t},unformatCurrency:function(t,e){for(var i="",o=e.length,s=0;s<o;s++){var r=e.charAt(s);","!=r&&("$"==r?-1==t.indexOf("$")&&(i+=r):"\\"==r?-1==t.indexOf("\\")&&(i+=r):"+"==r?-1==t.indexOf("+")&&(i+=r):"-"==r?-1==t.indexOf("-")&&(i+=r):i+=r)}return i},unformatDate:function(t,e){if(void 0!==t&&null!=t&&""!=t||(t="yyyy/MM/dd"),e.length!=t.length)return e;var i="",o=t.indexOf("yyyy"),s=t.indexOf("MM"),r=t.indexOf("dd");return-1!=o&&(i+=e.substr(o,4)),-1!=s&&(i+=e.substr(s,2)),-1!=r&&(i+=e.substr(r,2)),i},unformatDate2:function(t,e,i){if(void 0!==t&&null!=t&&""!=t||(t="yyyy/MM/dd"),e.length!==t.length)return e
;void 0!==i&&null!=i&&""!=i||(i=t.replace(/(\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s)/g,"")),e=e.replace(/[a-zA-Z]+/g,"");for(var o=0;o<t.length&&o<e.length;o++){var s=t.charAt(o),r=e.charAt(o);"yMdHmS".indexOf(s)>=0&&(i=i.replace(s,r))}return i},unformatTime:function(t,e){if(void 0!==t&&null!=t){if(e.length!=t.length)return e;""==t&&(t="HH:mm:SS");var i="",o=t.indexOf("HH"),s=t.indexOf("mm"),r=t.indexOf("SS");return-1!=o&&(i+=e.substr(o,2)),-1!=s&&(i+=e.substr(s,2)),-1!=r&&(i+=e.substr(r,2)),i}},unformatText:function(t,e){if(void 0===t||null==t||""==t)return e;t=t.substring(t.indexOf(","));for(var i="",o=e.length-1,s=t.length-1;s>=0&&o>=0;s--){var r=t.charAt(s),a=e.charAt(o);("#"==r&&"#"!=a||r!=a)&&(i=a+i),o--}return o>-1&&(i=e.substring(0,o+1)+i),i},unformat:function(t){if(void 0===t.formatArray||void 0===t.formatArray.displayFormat||null==t.formatArray.displayFormat)return t.render.value;if("format"!=t.status)return t.render.value;t.status="unformat";var e=t.render.value,i=t.formatArray.displayFormat,o=t.valueType;return void 0!==o&&null!=o&&"number"==o?WebSquare.text.unformatCurrency(i,e):void 0!==o&&null!=o&&"date"==o?WebSquare.text.unformatDate(i,e):void 0!==o&&null!=o&&"time"==o?WebSquare.text.unformatTime(i,e):WebSquare.text.unformatText(i,e)},dynamicMask:function(t,e,i){try{for(var o=0,r=t.replace(/[^a-z^A-Z^0-9]/g,""),a={};o<e.length;){var n=e[o],l=n.replace(/[^#^S^X]/g,"").length,h=e[o+1],d=0;if(o++,d=h?h.replace(/[^#^S^X]/g,"").length:(h=e[o-1]).replace(/[^#^S^X]/g,"").length+1,r.length<=l){a=WebSquare.text.maskit(t,n,i);break}if(l<r.length&&d>=r.length){a=WebSquare.text.maskit(t,h,i);break}}return a}catch(t){s.w.printStackTrace(t,null,this)}},maskit:function(t,e,i){try{t=t||"",e=e||"";for(var o=0,r=0,a="",n="",l=0;o<e.length&&r<t.length;){var h=i[u=e[o]],d=t[r];h&&!h.escape?(h.pattern.test(d)&&(a+=d,n+=d,o++),r++):(h&&h.escape&&(u=e[++o]),a+=u,d===u&&r++,o++)}for(var c="";o<e.length;){var u;if(i[u=e[o]])break;l=1,c+=u,o++}return{orgValue:n,value:a+c,position:l}}catch(t){s.w.printStackTrace(t,null,this)}},deleteMaskChar:function(t,e,i){try{var o=i.selectionStart,r=i.selectionEnd;if(o!=r){if(8==t.keyCode||46==t.keyCode){for(var a=i.value,l=0,h=0,d=o-1;d>=0;d--)0==/^[0-9a-zA-Z]/.test(a.charAt(d))&&l++;var c=(c=a.substring(0,o)+a.substring(r,a.length)).replace(/[^0-9^a-z^A-Z]/g,""),u=n.dynamicMask(c,e._editFormat,e._editTokens);i.value=u.value,e._editValue=u.orgValue;for(d=o-1;d>=0;d--)0==/^[0-9a-zA-Z]/.test(u.value.charAt(d))&&h++;var p=o+(h-l);i===document.activeElement&&i.setSelectionRange(p,p),event.stopEvent(t)}}else if(o==r)if(8==t.keyCode){var g=(a=i.value).charAt(o-1),m=(l=0,h=0,1);for(d=o-1;d>=0;d--)0==/^[0-9a-zA-Z]/.test(a.charAt(d))&&l++;if(0==/^[0-9a-zA-Z]/.test(g))for(d=o-1;d>=0&&0==/^[0-9a-zA-Z]/.test(a.charAt(d));d--)m++;c=a.substring(0,o-m)+a.substring(o,a.length),u=n.dynamicMask(c,e._editFormat,e._editTokens);i.value=u.value,e._editValue=u.orgValue;for(d=o-2;d>=0;d--)""!=u.value.charAt(d)&&0==/^[0-9a-zA-Z]/.test(u.value.charAt(d))&&h++;(p=o+(h-l)-1)<0&&(p=0),i===document.activeElement&&i.setSelectionRange(p,p),WebSquare.event.stopEvent(t)}else if(46==t.keyCode){for(g=(a=i.value).charAt(o),l=0,h=0,m=1,d=o-1;d>=0;d--)0==/^[0-9a-zA-Z]/.test(a.charAt(d))&&l++;if(0==/^[0-9a-zA-Z]/.test(g))for(d=o;d<a.length&&0==/^[0-9a-zA-Z]/.test(a.charAt(d));d++)m++;c=(c=a.substring(0,o)+a.substring(o+m,a.length)).replace(/[^0-9^a-z^A-Z]/g,""),u=n.dynamicMask(c,e._editFormat,e._editTokens);i.value=u.value,e._editValue=u.orgValue;for(d=o-1;d>=0;d--)0==/^[0-9a-zA-Z]/.test(u.value.charAt(d))&&h++;p=o+(h-l);i===document.activeElement&&i.setSelectionRange(p,p),event.stopEvent(t)}}catch(t){s.w.printStackTrace(t,null,this)}},BASE64Encoder:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array,o=0;o<e.length;o++)i[o]=e.charAt(o);var s=new Array;o=0;65279!=t.charCodeAt(0)&&(t=String.fromCharCode(65279)+t);var r=t.length
;for(r%3==1&&(t+=String.fromCharCode(0)+String.fromCharCode(0)),r%3==2&&(t+=String.fromCharCode(0));o+2<t.length;)s[s.length]=i[t.charCodeAt(o)>>10],s[s.length]=i[(1008&t.charCodeAt(o))>>4],s[s.length]=i[(15&t.charCodeAt(o))<<2|t.charCodeAt(o+1)>>14],s[s.length]=i[(16128&t.charCodeAt(o+1))>>8],s.length%76==0&&(s[s.length]="\n"),s[s.length]=i[(252&t.charCodeAt(o+1))>>2],s[s.length]=i[(3&t.charCodeAt(o+1))<<4|t.charCodeAt(o+2)>>12],s[s.length]=i[(4032&t.charCodeAt(o+2))>>6],s[s.length]=i[63&t.charCodeAt(o+2)],s.length%76==0&&(s[s.length]="\n"),o+=3;return r%3==1&&(s.pop(),s.pop(),s.pop(),s.pop(),28==r&&s.pop(),s[s.length-1]="="),r%3==2&&(s[s.length-1]=s[s.length-2]="="),s.join("")},BASE64Decoder:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array,o=0;o<e.length;o++)i[e.charAt(o)]=o;var s=new Array;o=0;t=(t=t.replace(/\n|\r/g,"")).replace(/=/g,"");for(var r=parseInt(3*t.length/4)/2;o<t.length;)s[s.length]=i[t.charAt(o)]<<10|i[t.charAt(o+1)]<<4|i[t.charAt(o+2)]>>2,s[s.length]=(3&i[t.charAt(o+2)])<<14|i[t.charAt(o+3)]<<8|i[t.charAt(o+4)]<<2|i[t.charAt(o+5)]>>4,s[s.length]=(15&i[t.charAt(o+5)])<<12|i[t.charAt(o+6)]<<6|i[t.charAt(o+7)],o+=8;s=s.slice(1,r);var a="";try{a=String.fromCharCode.apply(document,s)}catch(t){for(o=0;o<s.length;o++)a+=String.fromCharCode(s[o])}return a},BASE64Encode:function(t){try{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",o=0;t=WebSquare.text.UTF8Encode(t);do{var r=t.charCodeAt(o++),a=t.charCodeAt(o++),n=t.charCodeAt(o++),l=(3&(r=r||0))<<4|(a=a||0)>>4&15,h=(15&a)<<2|(n=n||0)>>6&3,d=63&n;a?n||(d=64):h=d=64,i+=e.charAt(r>>2&63)+e.charAt(l)+e.charAt(h)+e.charAt(d)}while(o<t.length);return i}catch(t){s.w.printStackTrace(t)}},BASE64Decode:function(t){try{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",o=0;do{var r=e.indexOf(t.charAt(o++)),a=e.indexOf(t.charAt(o++)),n=e.indexOf(t.charAt(o++)),l=e.indexOf(t.charAt(o++)),h=(63&r)<<2|a>>4&3,d=(15&a)<<4|n>>2&15,c=(3&n)<<6|63&l;i+=String.fromCharCode(h)+(d?String.fromCharCode(d):"")+(c?String.fromCharCode(c):"")}while(o<t.length);return WebSquare.text.UTF8Decode(i)}catch(t){s.w.printStackTrace(t)}},UTF8Encode:function(t){try{t=t.replace(/\r\n/g,"\n");for(var e,i="",o=0;o<t.length;o++)(e=t.charCodeAt(o))<128?i+=String.fromCharCode(e):e>127&&e<2048?(i+=String.fromCharCode(e>>6|192),i+=String.fromCharCode(63&e|128)):(i+=String.fromCharCode(e>>12|224),i+=String.fromCharCode(e>>6&63|128),i+=String.fromCharCode(63&e|128));return i}catch(t){s.w.printStackTrace(t)}},UTF8Decode:function(t){try{for(var e="",i=0,o=0;i<t.length;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):o>191&&o<224?(e+=String.fromCharCode((31&o)<<6|63&t.charCodeAt(i+1)),i+=2):(e+=String.fromCharCode((15&o)<<12|(63&t.charCodeAt(i+1))<<6|63&t.charCodeAt(i+2)),i+=3);return e}catch(t){s.w.printStackTrace(t)}},BASE64URLEncoder:function(t){return escape(WebSquare.text.BASE64Encoder(t))},BASE64URLDecoder:function(t){return WebSquare.text.BASE64Decoder(unescape(t))},fillZero:function(t,e){var i,o=t+"";if(isNaN(o))return t;if(o.length>=e)return o;for(i=e-o.length;i>0;)switch(i){case 1:i=0,o="0"+o;break;case 2:i=0,o="00"+o;break;case 3:i=0,o="000"+o;break;case 4:i=0,o="0000"+o;break;case 5:i=0,o="00000"+o;break;case 6:i=0,o="000000"+o;break;case 7:i=0,o="0000000"+o;break;case 8:i=0,o="00000000"+o;break;case 9:i=0,o="000000000"+o;break;case 10:i=0,o="0000000000"+o;break;case 11:i=0,o="00000000000"+o;break;case 12:i=0,o="000000000000"+o;break;case 13:i=0,o="0000000000000"+o;break;case 14:i=0,o="00000000000000"+o;break;case 15:i=0,o="000000000000000"+o;break;default:i-=15,o="000000000000000"+o}return o},isKorean:function(t){if(null!=t&&t.length>0){for(var e=0,i=0;i<t.length;i++)e|=WebSquare.text.getLocale(t.charAt(i));if(0==(-4&e))return!0}return!1},getLocale:function(t){var e=0;if(t.length>0){var i=t.charCodeAt(0)
;e=i>=44032&&i<=55203?1:i>=4352&&i<=4601||i>=12593&&i<=12686?2:i>=48&&i<=57?4:i>=32&&i<=47||i>=58&&i<=64||i>=91&&i<=96||i>=123&&i<=126?8:i>=65&&i<=90?16:i>=97&&i<=122?32:48}return e},URLEncoder:function(t){if("number"==typeof t)return t;var e="";if(null==t||0==t.length)return e;for(var i=0;i<t.length;i++){var o="";if(" "==t.charAt(i))e+="+";else if(t.charCodeAt(i)>=48&&t.charCodeAt(i)<=57||t.charCodeAt(i)>=65&&t.charCodeAt(i)<=90||t.charCodeAt(i)>=97&&t.charCodeAt(i)<=122||"@"==t.charAt(i)||"."==t.charAt(i)||"-"==t.charAt(i)||"*"==t.charAt(i)||"_"==t.charAt(i))e+=t.charAt(i);else if(null!=(o=WebSquare.text.getEUCKR(t.charCodeAt(i)))&&o>=42145)e+="%"+(o>>8).toString(16)+"%"+(255&o).toString(16);else if(t.charCodeAt(i)<=126){var s=t.charCodeAt(i).toString(16);1==s.length?e+="%0"+s:e+="%"+s}else e+="%3f"}return e},URLDecoder:function(t){var e="";if(null==t||0==t.length)return e;for(var i=0;i<t.length;i++)if("+"==t.charAt(i))e+=" ";else if("%"!=t.charAt(i))e+=t.charAt(i);else if(i+5<=t.length){var o=t.substring(i+1,i+3);"%"==t.charAt(i+3)&&parseInt(o,16)>160?(o=(o+=t.substring(i+4,i+6)).toUpperCase(),e+=String.fromCharCode(WebSquare.text.getUNICODE(parseInt(o,16))),i+=5):(e+=String.fromCharCode(parseInt(o,16)),i+=2)}else if(i+2<=t.length){o=t.substring(i+1,i+3);e+=String.fromCharCode(parseInt(o,16)),i+=2}else e+=t.charAt(i);return e},getEUCKR:function(t){WebSquare.text.EUCKR||WebSquare.text.setEUCKR(),WebSquare.text.UNICODE||WebSquare.text.setUNICODE();for(var e=16,i=0,o=WebSquare.text.UNICODE.length-1,s=Math.round((i+o)/2);e-- >0;)if(WebSquare.text.UNICODE[s]>t)o=s,s=Math.round((i+o)/2);else{if(!(WebSquare.text.UNICODE[s]<t))return WebSquare.text.EUCKR[s];i=s,s=Math.round((i+o)/2)}return""},getUNICODE:function(t){WebSquare.text.EUCKR||WebSquare.text.setEUCKR(),WebSquare.text.UNICODE||WebSquare.text.setUNICODE();for(var e=16,i=0,o=WebSquare.text.EUCKR.length-1,s=Math.round((i+o)/2);e-- >0;)if(WebSquare.text.EUCKR[s]>t)o=s,s=Math.round((i+o)/2);else{if(!(WebSquare.text.EUCKR[s]<t))return WebSquare.text.UNICODE[s];i=s,s=Math.round((i+o)/2)}return 63},isFinalConsonant:function(t){var e=t.charCodeAt(t.length-1);return!(e<44032||e>55197)&&(e-16)%28!=0},arraySort:function(t,e){for(var i=new Array,o=0;o<t.length;o++)i.push(t[o]);return void 0===e?i.sort():i.sort(e)},setEUCKR:function(){for(var t=[42145],e=1;e<94;e++)t[e]=t[e-1]+1;for(t[e]=t[e-1]+2979,e++;e<2444;e++)t[e]=t[e-1]+((e-188)%94==0?163:1);WebSquare.text.EUCKR=t},setUNICODE:function(){for(var t=[12593],e=1;e<94;e++)t[e]=t[e-1]+1;for(t[e]=t[e-1]+31346,
e++;e<2444;e++)t[e]=t[e-1]+"#%%###(#######$####%&*#$##)#%&-$)&&6#%%#$(#$###%###&&*#$##)##$%#*#$##&%&&+$+#%%#$$%##$$#(#%&$(#$$)&&+%#)#%&*#$$)&&+$+#%%###'##$$#(#%&.#)5+#%&*#$+&&6#%%##)#$$)>#%%#$(#$$#&$##$&$(#$##&%#%&*#$##)#)R##$&*#$##)#%.%$)&&-#'%>#%$$*#$$##'#).#)#6)&&*#&)>#%&)##$$#(*.#)#%&*#%*&&*#->#%$$$'##$$&A#%&*#$$)##$%###(#$####$$##%&*#$##)#%&*'E#$#&$#'#$##(##%&*#$##)#%&*#%#%&&:#%&$(#$$'##&&.F&&*#$+#%&+$$)#%%#*#$$)6*>&&*#-#)*#&)#%&##(#$$#&$&&6#%&$(#$$'$##$%####&##$####&##%&*#$##)Z##$%#$#'#$$$%$#%&*#$##)&&.#)&:#%%#$$&#$$$$%&&66*&&*#$+>#%&*#$$)6*7)&&+$$)&&*')#%%#$(#$$)>#%%#*#$###(#%&*#$##(##%&*#$##a#%&$#'#$##(##%&*#$##)6F#%&/)*6>&V#%&)#'E>&&*#&E#%%#*#$+&&*#-&&*#$$)#%&*#$###&###%&*#$##)#%1$E#%&*#$##(##%&*#$$)#%&*#$##)&/$+#%&*#$$)&3=*&&*#$$)&&+$$)#%&*#$$)6*>#%&*%$)#%&*#$$)#%&*#$$#%#@#%&*#$$)#%$####(#$$#%$##%&*#$###(#)/E#%&$(#$$#'##%&*#$##)#%&-##$'>#$#&$(#$$)&2#E&&+$$)&&+$+##$%###(#$$&$#&&+$+>&&6&&*%+&&*%G#%%#$(#$##$$%####%####'#$$&%#%&*#$##&%#%/I#%%#$(#$$#(#%%#*#$##)#%&+$##&%&:##$&*#$$)&2*6*#%&*#-&:#%%###(#$$&#$*.*>#%&/)&&*%$)#%&*#$G#%&$(#$$##'#%&$(#$##(##%&*#$##)#1J#%%#*%##)7)#1#$##E#%&*#&a>7)#%&*%$}7)&&*#I#%&*#$$)#$#%###(#$##&%#%&*#$##)#%&*#$$)&&*')####%#$#'#$##'$#%&*#$##)#%&*#$##)&&/)##$&$(#$$&%#%&/)&&*%#*&&*#$+#%&*#$$)#%%#*#$$$$#$6*#%&*')#%&*#$$)#)*%$)#%&#)#$$E#%%#)##$$'$#$#&*#%#(##%&*#%#>E#%&$(#%#)&&V:#%%#$(#&)#%2*6*&&*#->#%&*#&)6*>&O)#%&$'##-&&*.#%&*#$$)#%##$##'##$##&#$#%&*#$##)#%&%'#$$&$#&&+-#%#$###(######$$$#%&*#$$)##$&$#'#####&###&&*#$#*#%&##$%##$$$'#%&*#$##)#%.%$)#%&*#$$)#%&*#$$)#%&##(#$$)#%&*#%#)#%&*#&)#%&*#$$)#%&*#$$$'#%&($#$$#######&&*%+#%&##'##$###&$#%$##$(#$###(#%&*#$##)#%$$*')&&6#%&$(#$$#(#%&*#$$)&&*#%#)>#%&$(#$$##&##)+$$)6#)&&*#$$)#%3)#%&##(#$$)6*>#%&*#$+&&*.#%&*#$$E#%%#$(#$$#%#$#%$$%'#$##)#%&*#$##)&3E#%&*#$##)7)6F#%&*#$$$'#).*6*&&*#B)#%&*#&)6#E>>2%$E#%&*#&#'##%$$*#$###(#%&*#$##)&$$*'E#%&*#$##)#%&*#$$)&2*&3)#%&*#$$)&&/E&&*#$$)2.#%&*#$$)6*&:&&*#$$)&&*')#%&*#$$E#%%##)#$$)#%&*#$$)#%&*#$##)#6E#%%#*#$##)#%&*#$$)&&*#$##)>#%&*#$$)#%&*')7)*6>#%&*#$$)&&/)7)#%&*#$$)&&*.#%&*#&E#%&*#$$)#%&#)#$##)#%&*#$##)7E#%&$(#$##)#%&*#$$)&2*&:#%&*#$$'$&:>&1$)>#%&*#$$)6*>#%&*#&)&&*')#%%#$(#$+&&*#-#%&*#$$)##$&$(#$##&%#%&*#$##)#Y#%&*#$##)#%&*#$$)&&*#%#)*+$+#%&*#$$)7E&:&&+$+#%%#$(#$$)7E&&*%+&&*%$)&&*#$G#%&*#$$)#%&'%#$$)#%&*#$##)7E#%&$(#$$)#%&*#$$)#%&*#$##)&&+-#%&'%#$$&%#%&-$)#%1$)#%&+$$)&&+$+#%&'%%$)&&*')#%&/)#%&*#$$)#%&*%$)#%$###)#$$&%&&*#&)#%&*#$$".substr(e-95,1).charCodeAt(0)-34;WebSquare.text.UNICODE=t}},l=function(t,e,i){this.sign="",this.integer=new Array,this.decimal=new Array,this.delimiter=e||",",this.decimalDelimiter=i||".";var o="",s="",r=t.split(this.decimalDelimiter);1==r.length?(o=r[0],s=""):r.length>1&&(o=r[0],s=r[1]),"+"!=o.charAt(0)&&"-"!=o.charAt(0)||(this.sign=o.charAt(0),o=o.substr(1));var a=o.match(new RegExp("[^0]+[0-9]*"));o=null!=a?a.join(""):"0";for(var n=0;n<o.length;n++)this.integer.push(parseInt(o.charAt(n)));for(n=0;n<s.length;n++)this.decimal.push(parseInt(s.charAt(n)))};l.prototype.getValue=function(){var t="";return t+=this.sign,this.integer.length>0&&(t+=this.integer.join("")),this.decimal.length>0&&(t+=".",t+=this.decimal.join("")),t},l.prototype.setPrecision=function(t,e){null==t&&(t=0),null==e&&(e="[round]");var i=0;"[round]"==e?i=5:"[floor]"==e?i=0:"[ceil]"==e&&(i=9);var o=this.decimal.length;if(t+1>o)for(var s=0;s<t+1-o;s++)this.decimal.push(0);else this.decimal=this.decimal.slice(0,t+1);var r=0;this.decimal[t]+i>9&&(r=1);for(s=t-1;s>=0;s--)this.decimal[s]+=r,this.decimal[s]>9?(r=1,this.decimal[s]-=10):r=0;if(this.decimal.pop(),0!=r)for(s=this.integer.length-1;s>=0;s--)this.integer[s]+=r,this.integer[s]>9?(r=1,this.integer[s]-=10):r=0;if(0!=r){this.integer.push(0);for(s=this.integer.length-1;s>=1;s--)this.integer[s]=this.integer[s-1];this.integer[0]=1}},l.prototype.getValueWithDelimiter=function(t,e,i){var o="";if(null==e||e<=0)return this.getValue();if(o+=this.sign,this.integer.length>0)for(var s=this.integer.length%e,r=0,a=0;a<this.integer.length;a++)(a+1)%e==s&&(o+=this.integer.slice(r,a+1).join(""),
a+1<this.integer.length&&(o+=t||this.delimiter),r=a+1);return this.decimal.length>0&&(o+=this.decimalDelimiter,o+=this.decimal.join("")),"-0"!==o||i||(o="0"),o},l.prototype.getFormattedValue=function(t){var e="";if(!t)return this.getValue();e+=this.sign;var i=[];o.x.extend(i,this.integer);for(var s=[],r=(t.indexOf(this.decimalDelimiter)>-1?t.substring(0,t.indexOf(this.decimalDelimiter)):t.substring(0)).split(this.delimiter).reverse(),a=0;a<this.integer.length&&0!=i.length;a++){for(var n=r[a%r.length].length,l=[],h=0;h<n;h++)l.push(i.pop());s.push(l.reverse().join(""))}return e+=s.reverse().join(this.delimiter),this.decimal.length>0&&(e+=this.decimalDelimiter,e+=this.decimal.join("")),e},l.prototype.cutZeroDecimal=function(t){for(var e=t.lastIndexOf("0")-1,i=this.decimal.length-1;i>=0&&0==this.decimal[i]&&i>e;)this.decimal.pop(),i--}},3082:(t,e,i)=>{i.d(e,{D:()=>u});var o,s,r,a,n=i(2981),l=i(6301),h=i(2085),d=i(1656),c=i(7275),u={loadedUserComponent:{},loadedUserComponentPluginName:{},loadedUserComponentURL:{},loadedInheritComponent:{},loadedInheritComponentPluginName:{},loadedInheritComponentURL:{}},p=window.document;u._initImport=function(){u.getTopWindow.getAttribute=WebSquare.session.getAttribute,u.getTopWindow.removeAttribute=WebSquare.session.removeAttribute,u.getTopWindow.removeSession=WebSquare.session.removeSession,u.getTopWindow.setAttribute=WebSquare.session.setAttribute},n.x._initImportList.push("util"),u.isEmptyObject=function(t){try{for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}catch(t){h.w.printStackTrace(t,null,this)}},u.documentWrite=function(t,e){void 0!==e&&null!=e&&""!=e?p.getElementById(e).innerHTML=t:p.write(t)},u.numericSort=function(t,e){return parseInt(t,10)-parseInt(e,10)},u.getNumber=function(t){var e=t+"",i=e.replace(/,/g,"");return null!=i.match(/[^0-9.-]/g)?(c.k.printLog("Not a Number :"+e),NaN):(""==i&&(i="0"),-1==i.indexOf(".")?parseInt(i,10):parseFloat(i))},u.setNumber=function(t){if(null!=t){var e=t+"";if(0!=e.length){var i="",o="",s="";"+"!=e.substring(0,1)&&"-"!=e.substring(0,1)||(i=e.substring(0,1),e=e.substring(1)),e.indexOf(".")>-1&&(s=e.substring(e.indexOf(".")),e=e.substring(0,e.indexOf(".")));for(var r=e.length-3;r>=1;r-=3)o=","+e.substring(r,r+3)+o;return i+(o=e.substring(0,r+3)+o)+s}}},u.parseInt=function(t,e){var i=parseInt(t,10);return void 0!==e&&!isNaN(e)&&isNaN(i)?e:i},u.parseFloat=function(t,e){var i=parseFloat(t);return void 0!==e&&!isNaN(e)&&isNaN(i)?e:i},u.parseArray=function(t){for(var e="[",i=0;i<t.length;i++){var o=t[i];"string"==typeof o&&(o.indexOf('"')>=0&&(o=o.replaceAll('"','\\"')),o='"'+o+'"'),i<t.length-1?e+=o+",":e+=o}return e+="]"},u.getDate=function(t){var e=t+"";if(10==e.length){return e.replace(/[^0-9]/g,"")}return e},u.setDate=function(t,e){var i=t+"";if(e||(e="/"),8==i.length&&/^[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]{1}$/g.test(e))return i.substring(0,4)+e+i.substring(4,6)+e+i.substring(6,8)},u.getTime=function(t){var e=t+"";if(5==e.length||8==e.length){return e.replace(/[^0-9]/g,"")}return e},u.setTime=function(t){var e=t+"";if(4==e.length)return e.substring(0,2)+":"+e.substring(2,4)},u.getAddress=function(t){var e,i=WebSquare.util.getFrameFromPoint(t),o=null;i&&(o=WebSquare.idCache[i]),null!=o&&o.frameDoc?e=o.getURL(o.getSrc(),{msaName:o._getMsaName(),baseURI:!0}):(e=location.toString(),WebSquare.util.isEncodeParameter()&&!WebSquare.net.paramObj.w2xPath&&(WebSquare.util.getEncodeParameterOption("onlyParam")||(e=(e=e.replace(location.search,WebSquare.util.decodeParameter(location.search))).replace(location.hash,WebSquare.util.decodeParameter(location.hash))))),prompt(e,e)},u.getRQ=function(t){try{var e,i=u.getFrameFromPoint(t),o=null;i&&(o=n.x.idCache[i]),null!=o&&o.frameDoc?e=o.getURL(o.getSrc(),{msaName:o._getMsaName(),baseURI:!0}):(e=location.toString(),
u.isEncodeParameter()&&!WebSquare.net.paramObj.w2xPath&&(u.getEncodeParameterOption("onlyParam")||(e=(e=e.replace(location.search,u.decodeParameter(location.search))).replace(location.hash,u.decodeParameter(location.hash)))));var s=encodeURIComponent(WebSquare.text.BASE64Encode(e)),r="";r=WebSquare.domain?(r="?domain="+WebSquare.text.URLEncoder(WebSquare.domain))+"&qrAddr="+s:"?qrAddr="+s;var a=d.v.getConfiguration("viewSourceURL");a||(a=d.v.getURL(l.d.inquiresPath("message/QR.html"),{baseURI:!0})),window.open(a+r,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")}catch(t){h.w.printStackTrace(t,null,this)}},u.viewSource=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?scope="+e);var s=d.v.getConfiguration("viewSourceURL");s||(s=n.x.baseURI+l.d.inquiresPath("message/viewSource.html")),window.open(s+o,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},u.viewCollection=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?scope="+e);var s=d.v.getConfiguration("viewCollectionURL");s||(s=n.x.baseURI+l.d.inquiresPath("message/viewCollection.html")),window.open(s+o,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},u.viewInstance=function(){var t="";WebSquare.domain&&(t="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var e=d.v.getConfiguration("viewInstanceURL");e||(e=n.x.baseURI+l.d.inquiresPath("message/viewInstance.html")),window.open(e+t,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},u.viewFiddle=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?scope="+e);var s=d.v.getConfiguration("fiddleURL");s||(s=n.x.baseURI+l.d.inquiresPath("fiddle/fiddle.html")),window.open(s+o,"_blank","top=30,height=710,left=50,width=1100,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},u.getSource=async function(t,e){var i,o=null;e&&(o=WebSquare.idCache[e]);var s;return s="xml"===(i=null!=o&&o.frameDoc&&o.frameDoc.xmlDocument?o.frameDoc:WebSquare.WebSquaredoc).getType()?null!=i.xmlDocument_org?i.xmlDocument_org:i.xmlDocument:null!=o&&o!==WebSquare.strictModeFrame?await WebSquare.xml.load(o.getMsaSrc()):await WebSquare.xml.load(d.v.getPageURL(WebSquare.w2xPath,{skipUri:!0})),void 0!==t&&"raw"==t?WebSquare.xml.serialize(s):void 0!==t&&"text"==t?WebSquare.xml.indent(s):WebSquare.xml.indent(s,"html")},u.getInstance=function(t){return void 0!==t&&"raw"==t?WebSquare.xml.serialize(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode):void 0!==t&&"text"==t?WebSquare.xml.indent(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode):WebSquare.xml.indent(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode,"html")},u.printRange=function(t){var e="?id="+t;WebSquare.domain&&(e+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain));var i=d.v.getConfiguration("printRangeURL");i||(i=n.x.baseURI+l.d.inquiresPath("message/printRange.html")),window.open(i+e,"_blank","top=0,height=670,left=0,width=1000,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},u.evalProp=function(t,e){return l.d.evalProp(t,e)},u.setCursor=function(t){p.body.style.cursor=t;var e=p.getElementsByTagName("div")
;if(null!=e)for(var i=0;i<e.length;i++)"undefined"!=e[i].id&&"none"!=e[i].currentStyle.display&&"hidden"!=e[i].currentStyle.visibility&&(e[i].style.cursor=t)},u.setCursorAsync=function(t){var e="WebSquare.util.setCursor('"+t+"');";window.setTimeout(e,1)},u.toPixel=function(t,e){if(-1!=String(t).indexOf("%")){var i=parseInt(t);return parseInt(i/100*("x"==e?screen.availWidth:screen.availHeight))}return t},u.dbltoHexacode=function(t){t=Math.floor(t);for(var e="0123456789ABCDEF",i=e.substr(15&t,1);t>15;)i=e.substr(15&(t>>=4),1)+i;return i},u.hexacodetoDbl=function(t){return parseInt(t,16)},u.isOdd=function(t){return parseInt(t)%2!=0},u.isInteger=function(t){var e=parseInt(t,10);return!isNaN(e)&&(t==e&&t.toString()==e.toString())},u.isExist=function(t,e){return null!=e[t]},u.isDef=function(t,e){return null==e&&(e=window),null!=e[t]&&void 0!==e[t]},u.getTDIndex=function(t){try{for(;"TABLE"!=t.tagName;){if("TD"==t.tagName){for(var e=t.parentNode.childNodes,i=0;i<e.length;i++)if(e.item(i)==t)return i;break}t=t.parentNode}}catch(t){}return-1},u.getTRIndex=function(t){try{for(;"TABLE"!=t.tagName;){if("TR"==t.tagName){for(var e=t.parentNode.childNodes,i=0;i<e.length;i++)if(e.item(i)==t)return i;break}t=t.parentNode}}catch(t){}return-1},u.getSiblingIndex=function(t){try{if(!t)return-1;for(var e=0;t.previousSibling;)t=t.previousSibling,e++;return e}catch(t){}return-1},u.getObjectValue=function(t,e,i){return void 0!==t&&null!=t&&void 0!==t[e]&&""!=t[e]?t[e]:void 0===i?null:i},u.objToXML=function(t){var e=WebSquare.xml.parse("<object/>");for(var i in t)"string"==typeof i&&"string"==typeof t[i]&&WebSquare.xml.setValue(e.documentElement,i,"value",t[i]);return e},u.getBoolean=function(t){return"boolean"==typeof t?t:"string"==typeof t&&"true"==t.toLowerCase()},u.checkUpdate=function(){},u.registContextMenu=function(t,e){var i=t,o=WebSquare.util.makeContextMenuString(e).menuStr;"string"==typeof t&&(i=d.v.getComponentById(t)),"object"==typeof i&&(void 0!==i.render&&null!=i.render&&(i=i.render),d.v.browserCheck.opera?i.onmousedown=function(t){if(t.ctrlKey){WebSquare.util.contextObject=WebSquare.event.getTarget(t);var i=window.innerWidth-WebSquare.event.getClientX(t),s=window.innerHeight-WebSquare.event.getClientY(t),r=p.getElementById("_contextMenuLayer");void 0!==r&&null!=r||(r=p.createElement("div"),p.body.insertBefore(r,null),r.id="_contextMenuLayer",r.style.position="absolute"),r.style.left=i<182?window.pageXOffset+WebSquare.event.getClientX(t)-182:window.pageXOffset+WebSquare.event.getClientX(t),r.style.top=s<176?window.pageYOffset+WebSquare.event.getClientY(t)-176:window.pageYOffset+WebSquare.event.getClientY(t);var a=19*e.size()+9;return e.size()>15&&(a="295px"),r.style.height=a,r.style.overflow="hidden",r.style.zIndex="20000",r.style.visibility="visible",r.innerHTML=o,!1}return!0}:i.oncontextmenu=function(t){WebSquare.util.contextObject=WebSquare.event.getTarget(t);var e=p.getElementById("_contextMenuLayer"),i=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,r=WebSquare.event.getClientX(t)+i,a=WebSquare.event.getClientY(t)+s;void 0!==e&&null!=e||((e=p.createElement("div")).id="_contextMenuLayer",e.style.position="absolute",document.body.appendChild(e)),e.style.zIndex="20000",e.style.visibility="visible",e.innerHTML=o;var n=e.offsetWidth+10,l=e.offsetHeight+10;return r+n>i+document.documentElement.clientWidth&&(r=i+document.documentElement.clientWidth-n-10),a+l>s+document.documentElement.clientHeight&&(a=s+document.documentElement.clientHeight-l-10),e.style.left=r+"px",e.style.top=a+"px",!1})},u.removeContextMenu=function(t){var e=t;"string"==typeof t&&(e=d.v.getComponentById(t)),"object"==typeof e&&(void 0!==e.render&&null!=e.render&&(e=e.render),e.oncontextmenu=null)},u.makeContextMenuString=function(t){for(var e="",i=175,o=0;o<t.size();o++){var s=t.elementAt(o),r=WebSquare.xml.getAttribute(s,"name","value"),a=WebSquare.util.getWidth(r)+30;i<a&&(i=a)}
if(d.v.browserCheck.ieAllVersion){var n=19*t.size()+10;t.size()>15&&(n=295),e+="<div id='contextLayer' onselectstart='return false' style='overflow-x:hidden; overflow-y: auto; width:"+(i+5)+"px; height:"+n+"px; '>",e+="<table width='"+i+"' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>"}else{n=19*t.size()+10;t.size()>15&&(n=286),e+="<div onselectstart='return false' style='position:relative; overflow:auto; width:"+i+"px;height:"+n+"px; border:4px solid #e7e7e7; '>",e+="<table width='"+i+"' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>"}for(o=0;o<t.size();o++){s=t.elementAt(o);"true"==WebSquare.xml.getAttribute(s,"separator","value")?e+=c.k.contextMenuAddRow1(WebSquare.xml.getAttribute(s,"method","value"),WebSquare.xml.getAttribute(s,"name","value")):e+=c.k.contextMenuAddRow(WebSquare.xml.getAttribute(s,"method","value"),WebSquare.xml.getAttribute(s,"name","value"))}var l={};return l.menuStr=e,l.width=i,l},u.getElement=function(t){window._elements||(window._elements=[]);var e=p.createElement(t);return window._elements.push(e),e},u.getURLString=function(t){try{if(-1!=t.toLowerCase().indexOf("url")){var e=t.indexOf("("),i=t.indexOf(")"),o=t.substring(e+1,i);return o=o.replace(/\"/g,"")}}catch(t){h.w.printStackTrace(t)}},u.toHexColor=function(t){try{if(-1!=t.indexOf("rgb")){var e=t.indexOf("("),i=t.indexOf(")"),o=t.substring(e+1,i).split(","),s=parseInt(o[0]).toString(16),r=parseInt(o[1]).toString(16),a=parseInt(o[2]).toString(16);return 1==s.length&&(s="0"+s),1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),"#"+s+r+a}return t}catch(t){h.w.printStackTrace(t)}},window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){return"float"==e&&(e="styleFloat"),e=e.capitalizeStyle(),t&&t.currentStyle&&t.currentStyle[e]?t.currentStyle[e]:null},this}),document.documentElement.currentStyle?u.getStyleProperty=function(t,e){e=e.wq_trim().capitalizeStyle();var i=t.currentStyle[e];return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i}:window.getComputedStyle?u.getStyleProperty=function(t,e){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e);return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i}:u.getStyleProperty=function(t,e){var i=t.style[e];return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i},u.setSize=function(t){if(!d.v.browserCheck.ie){var e=WebSquare.util.getStyleProperty(t,"width"),i=WebSquare.util.getStyleProperty(t,"height"),o=parseInt(WebSquare.util.getStyleProperty(t,"border-left-width"))||0,s=parseInt(WebSquare.util.getStyleProperty(t,"border-right-width"))||0,r=parseInt(WebSquare.util.getStyleProperty(t,"border-top-width"))||0,a=parseInt(WebSquare.util.getStyleProperty(t,"border-bottom-width"))||0,n=parseInt(WebSquare.util.getStyleProperty(t,"padding-left"))||0,l=parseInt(WebSquare.util.getStyleProperty(t,"padding-right"))||0,h=parseInt(WebSquare.util.getStyleProperty(t,"padding-top"))||0,c=parseInt(WebSquare.util.getStyleProperty(t,"padding-bottom"))||0;""!=e&&e.indexOf("px")>=0&&(t.style.width=parseInt(e)-o-s-n-l),""!=i&&i.indexOf("px")>=0&&(t.style.height=parseInt(i)-r-a-h-c)}},u.getWidth=function(t,e,i){e=null==e?"":e,i=null==i?"":i;var o=WebSquare.util.getRulerSpan();return o.style.cssText=e,o.style.visibility="hidden",o.style.position="absolute",o.style.width="",o.className=i,o.innerHTML=t,o.style.top="-10000px",o.style.left="-10000px",o.offsetWidth},u.getRulerSpan=function(t,e){var i=p.getElementById("__rulerSpan__");return null==i&&((i=p.createElement("span")).id="__rulerSpan__",i.style.visibility="hidden",i.style.position="absolute",p.body.appendChild(i)),i.style.cssText=t,i.style.visibility="hidden",i.style.position="absolute",i.className=e,i},u.getImageUrl=function(t,e){var i=WebSquare.util.getRulerSpan();return i.style.cssText=t,i.style.visibility="hidden",i.style.position="absolute",i.className=e,
i.style.top="-10000px",i.style.left="-10000px",WebSquare.util.getStyleProperty(i,"background-image")},u.getHeight=function(t,e,i){var o=WebSquare.util.getRulerSpan();return o.style.width=e,null!=i?(o.style.fontSize=i.style.fontSize,o.style.fontFamily=i.style.fontFamily,o.style.fontWeight=i.style.fontWeight):(o.style.fontSize="",o.style.fontFamily="",o.style.fontWeight=""),o.innerHTML=t,o.style.top="-10000px",o.style.left="-10000px",o.offsetHeight},u.getHeight2=function(t,e,i,o){var s=WebSquare.util.getRulerSpan();s.style.cssText=i,s.className=o,s.style.visibility="hidden",s.style.height="",s.style.position="",s.style.padding="0 0 0 0 ",s.style.width=WebSquare.util.getStyleProperty(s,"width"),s.style.fontSize=WebSquare.util.getStyleProperty(s,"font-size")||"12px",s.style.fontFamily=WebSquare.util.getStyleProperty(s,"font-family")||"",s.style.fontWeight=WebSquare.util.getStyleProperty(s,"font-weight")||"",s.innerHTML=t,s.style.top="-10000px",s.style.left="-10000px";var r=s.offsetHeight;return 0==r&&(r=parseInt(s.style.fontSize)),r},u.setVerticalAlignMiddle=function(t,e){var i=WebSquare.util.getStyleProperty(t,"height"),o=WebSquare.util.getStyleProperty(t,"vertical-align");o=""==o?"middle":o;var s=WebSquare.util.getStyleProperty(t,"padding-top");if((""==s||"0px"==s)&&"middle"==o&&""!=i&&i.indexOf("px")>=0){var r=document.createElement("div");t.appendChild(r),r.innerHTML=e,(n=WebSquare.util.getRulerSpan(t.style.cssText,t.className)).style.height="",n.style.top="-10000px",n.style.left="-10000px",n.innerHTML=e;var a=n.offsetHeight;r.style.marginTop=(parseInt(i)-a)/2}else if((""==s||"0px"==s)&&"bottom"==o&&""!=i&&i.indexOf("px")>=0){var n;r=document.createElement("div");t.appendChild(r),r.innerHTML=e,(n=WebSquare.util.getRulerSpan(t.style.cssText,t.className)).style.height="",n.style.top="-10000px",n.style.left="-10000px",n.innerHTML=e;a=n.offsetHeight;var l=parseInt(i)-a-3;r.style.marginTop=l}else t.innerHTML=e},u.getChildNodeAt=function(t,e){try{for(var i=WebSquare.util.first(t),o=0;null!=i&&o<e;)i=WebSquare.util.next(i),o++;return i}catch(t){h.w.printStackTrace(t)}},u.prev=function(t){do{t=t.previousSibling}while(t&&1!=t.nodeType);return t},u.next=function(t){do{t=t.nextSibling}while(t&&1!=t.nodeType);return t},u.first=function(t){return null==(t=t.firstChild)?t:t&&1!=t.nodeType?WebSquare.util.next(t):t},u.last=function(t){return(t=t.lastChild)&&1!=t.nodeType?WebSquare.util.prev(t):t},u.parent=function(t,e){e=e||1;for(var i=0;i<e;i++)null!=t&&(t=t.parentNode);return t},u.getEvent=function(t){try{t=t||event}catch(t){h.w.printStackTrace(t)}return t},u.getStringByteSize=function(t,e){if(!t)return 0;var i=d.v.getConfiguration("/WebSquare/byteCheckEncoding/@value");switch(i||(i="UTF-8"),i=i.toUpperCase()){case"UTF-8":return WebSquare.util.getByteLengthUtf8(t,e);default:return WebSquare.util.getByteLength(t,e)}},u.getByteLength=function(t,e){for(var i=0,o=(e=e||"",[]),s=0;s<e.length;s++)o.push(escape(e.charAt(s)));for(var r=0;r<t.length;r++){var a=escape(t.charAt(r));if(o.length>0){for(var n=!1,l=0;l<o.length;l++)if(a===o[l]){n=!0;break}if(n)continue}1==a.length?i++:-1!=a.indexOf("%u")?i+=2:-1!=a.indexOf("%")&&(i+=a.length/3)}return i},u.getByteLengthUtf8=function(t,e){for(var i=0,o=(e=e||"",[]),s=0;s<e.length;s++)o.push(escape(e.charAt(s)));for(var r=0;r<t.length;r++){var a=escape(t.charAt(r));if(o.length>0){for(var n=!1,l=0;l<o.length;l++)if(a===o[l]){n=!0;break}if(n)continue}i+=WebSquare.util.getCharByteSize(t.charAt(r))}return i},u.getStringByByteSize=function(t,e,i){if(!t)return"";var o=d.v.getConfiguration("/WebSquare/byteCheckEncoding/@value");switch(o||(o="UTF-8"),o=o.toUpperCase()){case"UTF-8":return WebSquare.util.getByteStringByLengthUtf8(t,e,i);default:return WebSquare.util.getByteStringByLength(t,e,i)}},u.getByteStringByLength=function(t,e,i){for(var o=0,s=(i=i||"",[]),r=0;r<i.length;r++)s.push(escape(i.charAt(r)));for(var a=0;a<t.length;a++){var n=escape(t.charAt(a));if(s.length>0){
for(var l=!1,h=0;h<s.length;h++)if(n===s[h]){l=!0;break}if(l)continue}if(1==n.length?o++:-1!=n.indexOf("%u")?o+=2:-1!=n.indexOf("%")&&(o+=n.length/3),o>e)return t.substring(0,a)}return t},u.getByteStringByLengthUtf8=function(t,e,i){for(var o=0,s=(i=i||"",[]),r=0;r<i.length;r++)s.push(escape(i.charAt(r)));for(var a=0;a<t.length;a++){var n=escape(t.charAt(a));if(s.length>0){for(var l=!1,h=0;h<s.length;h++)if(n===s[h]){l=!0;break}if(l)continue}if((o+=WebSquare.util.getCharByteSize(t.charAt(a)))>e)return t.substring(0,a)}return t},u.getCharByteSize=function(t){if(!t||0==t.length)return 0;var e=t.charCodeAt(0);return e<=127?1:e<=2047?2:e<=65535?3:4},u.getImageStyle=function(t,e){var i="",o=t.toLowerCase();if(o.indexOf("background-image")>=0){var s=(o=o.substring(o.indexOf("background-image"))).split(";")[0].split(":");s.shift(),(i=s.join("").wq_trim()).startsWith("url")&&"("==(i=i.substring(3).wq_trim()).charAt(0)&&")"==i.charAt(i.length-1)&&(i=d.v.getImageURL(i.substring(1,i.length-1)))}else i=WebSquare.skin.makeBackgroundImageUrl(e);return""!=i&&"none"!=i&&(i="background-image:url("+i+")"),i},u.getInnerText=function(t){var e="";try{void 0===(e=t.innerText)&&(e=t.textContent)}catch(t){h.w.printStackTrace(t)}return e},u.getTextNodeValue=function(t){try{var e=null;if(t)for(var i=t.firstChild;null!=i;i=i.nextSibling)if(3==i.nodeType){e=i.nodeValue;break}return e}catch(t){c.k.printLog("dataController.getTextNodeValue :"+t.message),h.w.printStackTrace(t)}},u.browserVersion=function(){try{return d.v.browserVersion()}catch(t){h.w.printStackTrace(t)}},u.isIE=function(t){try{var e=d.v.browserCheck.ieVersion[t];return null!=e||(e=d.v.browserCheck.ie,t&&(t+="",e=e&&t.indexOf(d.v.browserVersion())>-1,d.v.browserCheck.ieVersion[t]=e)),e}catch(t){h.w.printStackTrace(t)}},u.isIEAllVersion=function(t){try{var e=d.v.browserCheck.ieVersion[t];return null!=e||(e=d.v.browserCheck.ieAllVersion,t&&(t+="",e=e&&t.indexOf(d.v.browserVersion())>-1,d.v.browserCheck.ieVersion[t]=e)),e}catch(t){h.w.printStackTrace(t)}},u.isFF=function(t){try{var e=d.v.browserCheck.mozVersion[t];return null!=e||(e=d.v.browserCheck.moz,t&&(t+="",e=e&&t.indexOf(d.v.browserVersion())>-1,d.v.browserCheck.mozVersion[t]=e)),e}catch(t){h.w.printStackTrace(t)}},u.isChrome=function(t){try{var e=d.v.browserCheck.chromeVersion[t];return null!=e||(e=d.v.browserCheck.chrome,t&&(t+="",e=e&&t.indexOf(d.v.browserVersion())>-1,d.v.browserCheck.chromeVersion[t]=e)),e}catch(t){h.w.printStackTrace(t)}},u.isSafari=function(t){try{var e=d.v.browserCheck.safariVersion[t];return null!=e||(e=d.v.browserCheck.safari,t&&(t+="",e=e&&t.indexOf(d.v.browserVersion())>-1,d.v.browserCheck.safariVersion[t]=e)),e}catch(t){h.w.printStackTrace(t)}},u.isOpera=function(t){try{var e=d.v.browserCheck.operaVersion[t];return null!=e||(e=d.v.browserCheck.opera,t&&d.v.browserVersion()&&(t+="",e=e&&t.indexOf(d.v.browserVersion())>-1,d.v.browserCheck.operaVersion[t]=e)),e}catch(t){h.w.printStackTrace(t)}},u.isSpartan=function(){try{return d.v.browserCheck.spartan}catch(t){h.w.printStackTrace(t)}},u.isChromeEdge=function(t){try{var e=d.v.browserCheck.chromeEdgeVersion[t];return null!=e||(e=d.v.browserCheck.chromeEdge,t&&(t+="",e=e&&t.indexOf(d.v.browserVersion())>-1,d.v.browserCheck.chromeEdgeVersion[t]=e)),e}catch(t){h.w.printStackTrace(t)}},u.isMobile=function(){try{var t=d.v.browserCheck.isMobile;return null!=t?t:(t=!!(d.v.browserCheck.android||d.v.browserCheck.iphone||d.v.browserCheck.ipad||d.v.browserCheck.ipod||d.v.browserCheck.blackberry),d.v.browserCheck.isMobile=t,d.v.browserCheck.isMobile)}catch(t){h.w.printStackTrace(t)}},u.isNull=function(t){return void 0===t||null==t},u.isNumber=function(t){return!WebSquare.util.isNull(t)&&t.constructor==Number},u.isString=function(t){return!WebSquare.util.isNull(t)&&t.constructor==String},u.isArray=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")},u.isRegExp=function(t){
return!WebSquare.util.isNull(t)&&t instanceof RegExp},u.isKorean=function(t){if("string"!=typeof t)return!1;return/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t)},u.XMLToHTML=function(t){if(void 0===t.tagName&&3==t.nodeType)return document.createTextNode(t.nodeValue);var e=document.createElement(t.tagName),i=WebSquare.WebSquareparser.parseAttribute(t);try{for(var o in i)"style"!=o?"className"!=o?e[o]=i[o]:e.className=i[o]:e.style.cssText=i[o]}catch(t){h.w.printStackTrace(t,null,this)}for(var s=t.firstChild;null!=s;s=s.nextSibling)1==s.nodeType?e.appendChild(this.XMLToHTML(s)):2!=s.nodeType&&3!=s.nodeType&&4!=s.nodeType||e.appendChild(document.createTextNode(s.nodeValue));return e},u.setPrecision=function(t){try{return"number"==typeof t&&(t=parseFloat(t.toFixed(10)),t=parseFloat(t.toPrecision(15))),t}catch(t){h.w.printStackTrace(t)}},u.sum=function(t,e){try{if(!(t.length>0))return t;void 0!==e&&null!=e||(e={});for(var i=0,o=0,s=0;s<t.length;s++){"string"==typeof t[s]&&""==t[s].replace(/^\s+|\s+$/g,"")&&(t[s]="0");var r=t[s]-0;i+=r,o+=Math.abs(r)}var a=Math.round(Math.log(Math.max(o),10)*Math.LOG10E);a=null!==a&&!isNaN(a)&&isFinite(a)?a:0;var n=this.getPrecision(e.displayFormat);if(parseInt(i,10)===i&&0===n);else if(Math.abs(i)<1)i=-0===(i=parseFloat(i.toFixed(a>10?0:10-a)))?0:i;else if(Math.abs(i)<1e12){var l=Math.max(12,a+n);i=parseFloat(i.toPrecision(l))}else i=a+n<17?parseFloat(i.toPrecision(a+n)):Math.round(i);return i}catch(t){h.w.printStackTrace(t)}},u.getPrecision=function(t){var e=0;try{if(!t||"string"!=typeof t)return 0;var i=new RegExp("\\[(.*)\\]","g"),o=new RegExp("[.]+[#0]+"),s=t.replace(i,"").match(o);e=(s=null!=s?s.join(""):".").length-1}catch(t){h.w.printStackTrace(t)}return e},u.dynamicCreate=function(t,e,i,o,s,r,a){try{if(WebSquare.util.getComponentById(t))return void c.k.printLog("dynamicCreate error : id duplcation.\ndynamicCreate오류 : 해당 id를 가진 컴포넌트가 이미 존재합니다."+t);var n=null;!i.nodeType||1!==i.nodeType&&9!==i.nodeType?"string"==typeof i&&(n=WebSquare.xml.parse(i))&&(n=!0===WebSquare.convertPageXML?WebSquare.xmljs.xml2json(n).E[0]:n.documentElement,i={}):(n=9==i.nodeType?i.documentElement:i,i={}),null==n&&(i.pluginName=e);var l,p=null;if(r){var g=WebSquare.util.getComponentById(r,a.id);g&&(p=g.uuid)}else a&&(p=a.uuid);i._idCollisionCheck=!0,null==a||!a.options||"wframe"!==a.options.pluginName&&"pageInherit"!==a.options.pluginName&&"udc2"!==a.options.pluginName||(i.scope_obj=a),!0===WebSquare.convertPageXML&&d.v.isXML(n)&&(n=WebSquare.xmljs.xml2json(n).E[0]);var m=!0;i&&"wframe"===i.pluginName&&(i.preload=!0,i.src||(m=!1)),l=null==n||"true"!==d.v.getConfiguration("/WebSquare/dynamicCreate/parseChild/@value")?WebSquare.controlFactory.createControl(t,i,n,i.scope_obj||null,!0,p):WebSquare.controlFactory.create(t,i,n,i.scope_obj||null,p);var f=WebSquare.controlFactory._awaitObj.key.length>0||WebSquare.controlFactory._asyncList.length>0||"function"==typeof l.initAsync||l.constructor===Promise;if(m&&f){var b=WebSquare.controlFactory.initAsync(),y=i.scope_obj&&i.scope_obj.id,v=b.then((function(e,i){return l.constructor===Promise?l.then((function(e,i){var r=u.getComponentById(t,y);return u._dynamicCreateAfter(r,s,o)})):u._dynamicCreateAfter(l,s,o)}));return c.k.printLog("$p.dynamicCreate : return promise because engine files are not ready."),v}return u._dynamicCreateAfter(l,s,o),l}catch(t){h.w.printStackTrace(t)}},u._dynamicCreateAfter=function(t,e,i){try{return e&&t.modelControl.setItemset(e.nodeset,e.label,e.value),t.appendTo(i||WebSquare.getBody()),t.activate(),t.onComplete(),e&&t.refreshItemset(),t}catch(t){h.w.printStackTrace(t)}},u.getComponentById=function(t,e){try{var i=t;if(!e&&WebSquare.strictModeFrame&&WebSquare.strictModeFrame.id!==t&&(e=WebSquare.strictModeFrame.id),e){var o=WebSquare.util.getComponentById(e);if(null!=o)for(var s=o;null!=s&&null!=s.scope;s=s.scope_obj){if(null!=s.scope[t]){i=s.scope[t].id;break}if(s.scope_obj===s)break;if(WebSquare.strictMode)break}}return WebSquare.idCache[WebSquare.idToUUID[i]]||window[i]
}catch(t){h.w.printStackTrace(t,null,this)}},u.getEventTarget=function(t){var e={};try{return void 0!==t&&null!=t&&""!=t&&(e.pluginName=t.options.pluginName,e.id=t.org_id,e.realId=t.id),e}catch(t){return h.w.printStackTrace(t,null,this),e}},u.getGlobalFunction=function(t,e){try{if("function"==typeof t)return t;if("string"!=typeof t||!t)return null;if(!0===/^\s*function/.test(t))return new Function("return "+t)();var i=t.wq_trim(),o=i.indexOf("("),s=i.indexOf(")",o),r=[];o>=0&&s>=0&&(r=i.slice(o+1,s).split(","),i=i.slice(0,o)),i=i.split(".");var a=0,n=null;if(e){var l=WebSquare.util.getComponentById(e);if(null!=l)for(var d=l;null!=d&&null!=d.scope;d=d.scope_obj){for(var c=d.scope[i[a++]];c&&("object"==typeof c||"function"==typeof c)&&a<i.length;)c=c[i[a++]];if("function"==typeof(n=c))break;if(d.scope_obj===d)break;if(WebSquare.strictMode)break}if("function"!=typeof n)try{n=new Function("return "+t)()}catch(t){n=null}}else{for(c=i[0]&&window[i[a++]]||null;c&&("object"==typeof c||"function"==typeof c)&&a<i.length;)c=c[i[a++]];if("function"==typeof c)n=c;else try{n=new Function("return "+t)()}catch(t){n=null}}if(o>=0&&s>=0&&"function"==typeof n){for(var u=0;u<r.length;u++)try{r[u]=new Function("return "+r[u])()}catch(t){r[u]}n=n.apply(n,r)}return n}catch(t){h.w.printStackTrace(t,null,this)}},u.createPopup=function(t,e,i,o,s,r,a,n,l,d,c){try{WebSquare.uiplugin.popup.createPopup(t,e,i,o,s,r,a,n,l,d,c)}catch(t){h.w.printStackTrace(t,null,this)}},u.openPopup=function(t,e,i,o){try{WebSquare.uiplugin.popup.openPopup(t,e,i,o)}catch(t){h.w.printStackTrace(t,null,this)}},u.getPopupParam=function(){try{return WebSquare.uiplugin.popup.getPopupParam()}catch(t){h.w.printStackTrace(t,null,this)}},u.closePopup=function(t,e){try{var i="";i=null==t?WebSquare.net.getParameter("popupID"):t,null==t&&opener&&opener.WebSquare?opener.WebSquare.uiplugin.popup.callClose(i,e):parent!==window&&null!=parent.WebSquare?(parent.WebSquare.uiplugin.popup&&parent.WebSquare.uiplugin.popup.callClose(i,e),WebSquare.uiplugin.popup&&WebSquare.uiplugin.popup.callClose(i,e)):WebSquare.uiplugin.popup.callClose(i,e)}catch(t){h.w.printStackTrace(t,null,this)}},u.getPopup=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopup(t,e):null}catch(t){h.w.printStackTrace(t,null,this)}},u.getPopupList=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupList(t,e):[]}catch(t){h.w.printStackTrace(t,null,this)}},u.getPopupWindow=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupWindow(t,e):null}catch(t){h.w.printStackTrace(t,null,this)}},u.getPopupWindowList=function(t,e,i){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupWindowList(t,e,i):[]}catch(t){h.w.printStackTrace(t,null,this)}},u.getAllPopupList=function(){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getAllPopupList():[]}catch(t){h.w.printStackTrace(t,null,this)}},u.getAllPopupWindowList=function(t){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getAllPopupWindowList(t):[]}catch(t){h.w.printStackTrace(t,null,this)}},u.isPopup=function(){try{return null!=window.opener&&!window.opener.closed}catch(t){return!1}},u.isWFramePopup=function(){try{return!1}catch(t){h.w.printStackTrace(t,null,this)}},u.getPopupUrl=function(){try{return WebSquare.net.getParameter("w2xPath")}catch(t){h.w.printStackTrace(t,null,this)}},u.getPopupId=function(){try{return WebSquare.net.getParameter("popupID")}catch(t){h.w.printStackTrace(t,null,this)}},u.getFrameId=function(){try{return null}catch(t){h.w.printStackTrace(t,null,this)}},u.getFrame=function(){try{return null}catch(t){h.w.printStackTrace(t,null,this)}},u.getParentWindow=function(){try{var t=opener||parent||window;if(!WebSquare.strictMode)return t;try{return t.WebSquare&&t.WebSquare.strictModeFrame?t.WebSquare.strictModeFrame.scope:t}catch(e){return t}}catch(t){h.w.printStackTrace(t,null,this)}},u.getTopWindow=function(){try{var t=top
;if(!WebSquare.strictMode)return t;try{return t.WebSquare&&t.WebSquare.strictModeFrame?t.WebSquare.strictModeFrame.scope:t}catch(e){return t}}catch(t){h.w.printStackTrace(t,null,this)}},u.getMainFrame=function(){try{return WebSquare.strictMode?WebSquare.strictModeFrame.scope:window}catch(t){h.w.printStackTrace(t,null,this)}},u.jQuerySelector=function(t){try{if("undefined"!=typeof jQuery&&null!=jQuery)return jQuery(t)}catch(t){h.w.printStackTrace(t,null,this)}},u.getDocumentSize=function(t){try{return"height"==(t=t.toLowerCase())?document.documentElement.clientHeight||document.body.clientHeight:"width"==t?document.documentElement.clientWidth||document.body.clientWidth:void c.k.printLog("getDocumentSize : wrong sizeName["+t+"]")}catch(t){h.w.printStackTrace(t)}},u.getSubmissionURL=function(t,e){try{var i;i="string"==typeof WebSquare.hybridSubmissionURL&&""!=WebSquare.hybridSubmissionURL?WebSquare.hybridSubmissionURL:d.v.getConfiguration("/WebSquare/hybrid/submissionURL");var o=WebSquare.util.appendingPathComponent(i,t);return d.v._getMsaSrc(o,e)}catch(t){h.w.printStackTrace(t)}},u.appendingPathComponent=function(t,e){try{if(e.indexOf("://")>0||0==t.length)return e;var i=t.length;return"/"==t.charAt(i-1)?"/"==e.charAt(0)?t+e.substr(1):t+e:"/"==e.charAt(0)?t+e:t+"/"+e}catch(t){h.w.printStackTrace(t)}},u.setDocumentLang=function(t){try{document.documentElement.setAttribute("xml:lang",t)}catch(t){h.w.printStackTrace(t,null,this)}},u.setDisabled=function(t){try{var e,i,o=[],s=[],r=t.componentId,a=t.disabled,n=t.excludeIdList,l=t.includeIdList,d=t.skipTab;if(!(e=r?WebSquare.util.getComponentById(r):WebSquare.getBody())||!e.options||!e.options.pluginName)return c.k.printLog("[WebSquare.util.setDisabled]id:해당하는 WebSquareComponent를 찾을 수 없습니다."),{doneComponents:o,skipComponents:s};if(WebSquare.util.isArray(l)){i||(i={});for(var u=0;u<l.length;u++)i[l[u]]=!0}else l&&(i=l);var p=WebSquare.util.getDisabledComponentIdList(e,a),g=p.targetComponents;s=p.skipComponents;for(u=0;u<g.length;u++){if(f=WebSquare.util.getComponentById(g[u])){var m=f.options.disabled;if(i)try{i[f.id]&&(m!==a&&f.setDisabled(a,d),o.push(f.id))}catch(t){c.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}else try{m!==a&&f.setDisabled(a,d),o.push(f.id)}catch(t){c.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}}}if(n)for(u=0;u<n.length;u++){if((m=(f=WebSquare.util.getComponentById(n[u])).options.disabled)===a)try{f.setDisabled(!a,d)}catch(t){c.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}}for(u=0;u<s.length;u++){var f;if((m=(f=WebSquare.util.getComponentById(s[u])).options.disabled)!==a)try{f.setDisabled(a,d)}catch(t){c.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}}return{doneComponents:o,skipComponents:s}}catch(t){h.w.printStackTrace(t,null,this)}},u.getDisabledComponentIdList=function(t,e,i){try{if(i||((i={}).targetComponents=[],i.skipComponents=[]),t||(t=WebSquare.getBody()),t&&t.options&&"body"==t.options.pluginName);else{if("stop"==t.activeStatus)return i;if(!t.id||!t.options||!t.options.pluginName&&!t.options.udcName)return i;t.options.disabled===e?i.skipComponents.push(t.id):i.targetComponents.push(t.id)}for(var o=0;o<t.childControlList.length;o++){var s=t.childControlList[o];s&&WebSquare.util.getComponentById(s.id)&&s.options&&(s.options.pluginName||s.options.udcName)&&WebSquare.util.getDisabledComponentIdList(s,e,i)}return i}catch(t){h.w.printStackTrace(t,null,this)}},u.getIgnoreKeyPressCodes=function(){return{8:"backspace",9:"tab",37:"left",38:"up",39:"right",40:"down",36:"home",35:"end",4:"insert",46:"del",33:"pageup",34:"pagedown"}},u.getKeyCode=function(t,e){var i,o=WebSquare.text.getCaretPos(t.render),s=-1;if(s=o<=1?t.render.value.charCodeAt(0):t.render.value.charCodeAt(o-1),null!=e&&(i=e.charCode||e.keyCode||e.which),
i)return 0==i||229==i||i>=48&&s>=0?s:i},u.setDomain=function(t){try{WebSquare.domain=t,document.domain=t}catch(t){h.w.printStackTrace(t)}},u.getChildren=function(t,e){try{if(t||(t=t||WebSquare.getBody(),e&&(e.recursive=!1)),e){for(var i=[],o=e.recursive?t.getAllChildren(e.excludeInnerComp):t.getChildren(),s=!!e.excludePlugin&&" "+e.excludePlugin+" ",r=!!e.includePlugin&&" "+e.includePlugin+" ",a=!!e.excludeId&&" "+e.excludeId+" ",n=0;n<o.length;n++)(!a||a.indexOf(" "+o[n].id+" ")<0)&&(!s||s.indexOf(" "+o[n].options.pluginName+" ")<0)&&(!r||r.indexOf(" "+o[n].options.pluginName+" ")>-1)&&i.push(o[n]);return i}return t.getChildren().slice(0)}catch(t){h.w.printStackTrace(t)}},u.addClearMemory=function(t){try{t&&d.v.userClearMemoryStack.push(t)}catch(t){h.w.printStackTrace(t)}},u.loadUserComponent=async function(t,e,i,o,s,r,a){try{var n;a||(a=t);var l=!0===r?"Inherit":"User",u=WebSquare.util["loaded"+l+"ComponentURL"][t];n="false"!==s&&null!=u?"string"==typeof u&&"xml"===WebSquare.jsLoader.getPageTypeByString(u)?WebSquare.xml.parse(u):u:await WebSquare.jsLoader._loadObj(t);var p,g=d.v.isXML(n)?"xml":"js",m=[],f=WebSquare.util.getBoolean(d.v.getConfiguration("/WebSquare/supportW2Udc/@value"));if(e&&i)m.push(i);else if("xml"===g)for(var b=WebSquare.xml.findNodes(n.documentElement,"//@pluginName"),y=0;y<b.length;y++)m.push(b[y].value);else{p=WebSquare.jsonUtil.walk_DFS(n,(function(t){if(t.A&&t.A.pluginName)return t}));for(y=0;y<p.length;y++)m.push(p[y].A.pluginName)}if(!WebSquare.util["loaded"+l+"Component"][t+"#"+m[0]]){var v=WebSquare.w2xHome;for(y=0;y<m.length;y++){var w,S=m[y];if(S.indexOf("_")>-1||f)if(WebSquare.util["loaded"+l+"ComponentPluginName"][S]){var C=WebSquare.util["loaded"+l+"ComponentPluginName"][S].split("#")[0];C!=t?c.k.printLog("ERROR : udc.xml 을 로딩하는 중 udc의 src :"+t+" 와 udc의 src : "+C+" 에서 같은 udc컴포넌트명("+S+")을 중복해서 정의하고 있음."):c.k.printLog("ERROR : udc.xml 을 로딩하는 중 udc의 src :"+t+" 내부에서 같은 udc컴포넌트명("+S+")을 중복해서 정의하고 있음.")}else{w=e&&i?"xml"===g?WebSquare.xml.findNode(n.documentElement,"//*[@id='"+e+"']"):WebSquare.jsonUtil.walk_DFS(n,(function(t){if(t.A&&t.A.id===e)return t})):"xml"===g?WebSquare.xml.findNode(n.documentElement,"//*[@pluginName='"+S+"']"):p[y];var _=a.lastIndexOf("/");if(WebSquare.w2xHome=_<0?"/":a.slice(0,a.lastIndexOf("/"))+"/",w){if("xml"===g){for(var x=w.firstChild;null!=x;x=x.nextSibling)if("w2:style"===x.nodeName||"style"===x.nodeName){var I="";I=f?WebSquare.xml.getTextNodeValue(x):WebSquare.xml.getCDataNodeValue(x),WebSquare.cssManager.addInternalCSS(I)}else if("script"===x.nodeName){var T=WebSquare.util.getBoolean(x.getAttribute("scopeExternal"))||o&&o.options.scopeExternal,k=x.getAttribute("scopeVariable")||"",D=x.getAttribute(child,"msaName");await WebSquare.Parser.parseExternalScript({uri:x.getAttribute("src"),cache:x.getAttribute("cache"),lazy:x.getAttribute("defer"),frameObj:o,scopeExternal:T,scopeVariable:k,msaName:D})}else if("link"===x.nodeName){var L=WebSquare.Parser.parseAttribute(x);if(L.href){var W={frameObj:o,msaName:L.msaName};L.href=WebSquare.util.getAbsolutePath(d.v._getMsaSrc(L.href,W))}null==L.type&&(L.type="text/css"),null==L.rel&&(L.rel="stylesheet"),WebSquare.skin.addImport(L,!0)}w.setAttribute("udcHome",WebSquare.w2xHome)}else await WebSquare.jsonUtil.walk_DFS_async(w,(async function(t){if(t.N)switch(t.N){case"style":case"w2:style":var e=WebSquare.jsonUtil.getCDataNodeValue(t);WebSquare.cssManager.addInternalCSS(e);break;case"link":var i=WebSquare.Parser.parseAttribute(t);if(i.href){var s={frameObj:o,msaName:i.msaName};i.href=WebSquare.util.getAbsolutePath(d.v._getMsaSrc(i.href,s))}null==i.type&&(i.type="text/css"),null==i.rel&&(i.rel="stylesheet"),WebSquare.skin.addImport(i,!0);break;case"script":var r=new WebSquare.Elem(t),a=WebSquare.util.getBoolean(r.getAttribute("scopeExternal"))||o&&o.options.scopeExternal,n=r.getAttribute("scopeVariable")||"",l=r.getAttribute("msaName");await WebSquare.Parser.parseExternalScript({uri:r.getAttribute("src"),
cache:r.getAttribute("cache"),lazy:r.getAttribute("defer"),frameObj:o,scopeExternal:a,scopeVariable:n,msaName:l})}})),WebSquare.jsonUtil.setAttribute(w,"udcHome",WebSquare.w2xHome);WebSquare.util["loaded"+l+"Component"][t+"#"+S]=w,WebSquare.util["loaded"+l+"ComponentPluginName"][S]=t+"#"+S,WebSquare.util["loaded"+l+"ComponentURL"][t]="xml"===g?WebSquare.xml.serialize(n):n,o&&(o.userComponentList.push(t+"#"+S),o.userPluginList.push(S))}}else c.k.printLog("ERROR : udc의 src :"+t+"에서 오류 (pluginName: "+S+" 을 '프로젝트명_컴포넌트명'으로 정의해야 함.)")}"xml"===g?WebSquare.Parser.WebSquareParser.prototype.parseScript(n,null,null,!0):WebSquare.jsonParser.prototype.parseScript(n,null,null,!0),WebSquare.w2xHome=v}var A=WebSquare.Elem.api.getElementsByTagName(n,"head")[0],M=WebSquare.Elem.api.getElementsByTagName(A,"require",d.v._XML_NAMESPACE.W2);for(y=0;y<M.length;y++){t=d.v.getPageURL(M[y].getAttribute("src")),e=M[y].getAttribute("id"),i=M[y].getAttribute("pluginName"),s=M[y].getAttribute("cache");WebSquare.util.loadUserComponent(t,e,i,o,s)}}catch(t){h.w.printStackTrace(t)}},u.loadInheritComponent=function(t,e,i,o,s){try{return WebSquare.util.loadUserComponent(t,e,i,o,s,!0)}catch(t){h.w.printStackTrace(t)}},u.unloadUserComponent=function(t,e,i){},u.setTimeout=function(t,e){try{var i=(new Date).getTime(),o=e.key||t.toString().slice(0,30),s=e.delay||e.max||1,r=e.max||0,a=e.caller||window,n=e.args||[],l=WebSquare.userTimerHash[o];return l||(l=WebSquare.userTimerHash[o]={thread:null,timeoutKey:null,startTime:i}),l.thread=function(){window.WebSquare&&WebSquare.userTimerHash&&delete WebSquare.userTimerHash[o],e.before_call&&e.before_call.call(a,l);var i=t.apply(a,n);e.callback&&e.callback.call(a,i)},clearTimeout(l.timeoutKey),r<=0||i-l.startTime<r?(e.before_set&&e.before_set.call(a,l),l.timeoutKey=setTimeout(l.thread,s),e.after_set&&e.after_set.call(a,l)):l.thread(),o}catch(t){h.w.printStackTrace(t,null,this)}},u.clearTimeout=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30));var i=WebSquare.userTimerHash[t];i&&(clearTimeout(i.timeoutKey),e&&i.thread(),WebSquare.userTimerHash[t]=null,delete WebSquare.userTimerHash[t])}catch(t){h.w.printStackTrace(t,null,this)}},u.setInterval=function(t,e){try{var i=e.key||t.toString().slice(0,30),o=e.delay||1,s=e.caller,r=e.args,a=WebSquare.userIntervalHash[i];return a||(a=WebSquare.userIntervalHash[i]={thread:null,timeoutKey:null}),r?(s||(s=window),a.thread=function(){t.apply(s,r)}):a.thread=s?function(){t.call(s)}:function(){t()},null!=a.timeoutKey&&clearInterval(a.timeoutKey),a.timeoutKey=setInterval(a.thread,o),i}catch(t){h.w.printStackTrace(t,null,this)}},u.clearInterval=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30));var i=WebSquare.userIntervalHash[t];i&&(clearInterval(i.timeoutKey),e&&i.thread(),WebSquare.userIntervalHash[t]=null,delete WebSquare.userIntervalHash[t])}catch(t){h.w.printStackTrace(t,null,this)}},u.getTimeoutKeyList=function(){var t=[];for(var e in WebSquare.userTimerHash)t.push(e);return t},u.getIntervalKeyList=function(){var t=[];for(var e in WebSquare.userIntervalHash)t.push(e);return t},u.setData=function(t,e){try{WebSquare.userData[t]=e}catch(t){h.w.printStackTrace(t,null,this)}},u.getData=function(t){try{return WebSquare.userData[t]||null}catch(t){h.w.printStackTrace(t,null,this)}},u.removeData=function(t){try{if("object"==typeof WebSquare.userData[t])for(var e in WebSquare.userData[t])delete WebSquare.userData[t][e];WebSquare.userData[t]=null,delete WebSquare.userData[t]}catch(t){h.w.printStackTrace(t,null,this)}},u.url=function(t,e){try{null==e&&(e={});var i={msaName:e.msaName};if(null==e.shortURL&&(e.shortURL=t.indexOf("?w2xPath")<0&&t.indexOf("#w2xPath")<0&&t.slice(t.lastIndexOf(".")).startsWith(".xml")),!e.shortURL)return void("#"==t.charAt(0)?location.hash=t:e.replaceHistory?location.replace(t):location.assign(t));null==e.spa&&(e.spa="true"==d.v.getConfiguration("/WebSquare/spa/@value"));var o=""
;if(e.param)for(var s in e.param)WebSquare.util.getEncodeParameterOption("onlyParam")?o+="&"+WebSquare.util.encodeParameter(s)+"="+WebSquare.text.URLEncoder(e.param[s]):o+="&"+s+"="+WebSquare.text.URLEncoder(e.param[s]);var r="w2xPath";if(WebSquare.util.getEncodeParameterOption("pathName")?r=WebSquare.util.getEncodeParameterOption("pathName"):WebSquare.util.isEncodeParameter()&&(r=WebSquare.util.encodeParameter("w2xPath")),c.k.printLog("before change url"),e.spa){var a=d.v.getURL(t,i);(b=(f=location.toString()).indexOf("#"))<0&&(b=f.length);var l=f.substring(0,b);y=WebSquare.util.isEncodeParameter()?WebSquare.util.getEncodeParameterOption("onlyParam")?l+"#"+r+"="+a+o:l+"#"+r+"="+WebSquare.util.encodeParameter(a+o):l+"#"+r+"="+a+o;var u=e.transition?e.transition.toLowerCase():"",p="",g=d.v.getXMLHTTPObject(),m=n.x.baseURI+"suffix.txt?postfix="+(new Date).getTime()+1e4*Math.random();if(g.open("GET",m,!1),g.send(null),g.status>="400"||(p=g.responseText.wq_trim(),WebSquare.suffix!=p&&(WebSquare.suffix=p,e.forceReload=!0)),g=null,e.urlHashText&&(y=WebSquare.util.isEncodeParameter()?l+WebSquare.util.encodeParameter("#"+e.urlHashText+o):l+"#"+e.urlHashText+o,WebSquare.spaURLMapping[e.urlHashText]=WebSquare.text.URLDecoder(a),"sessionStorage"in window&&sessionStorage.setItem("wq_spaURLMapping",JSON.stringify(WebSquare.spaURLMapping))),e.forceReload){if("onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),e.replaceHistory)switch(u){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(y)}));break;default:location.replace(y)}else switch(u){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(y)}));break;default:location.assign(y)}if(d.v.firePageunload||d.v.onurlchange||(d.v.firePageunload=!0,WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload")),!d.v.onurlchange)"true"!==d.v.getConfiguration("/WebSquare/clearMemory/@value")&&WebSquare.clearMemory(),wq_reload(y)}else if(WebSquare.w2xPath="",y==f)WebSquare.util.onhashchange();else if(d.v.urlchangebyapi=!0,e.replaceHistory)switch(u){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(y)}));break;default:location.replace(y)}else switch(u){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(y)}));break;default:location.assign(y)}}else{var f,b;a=d.v.getURL(t,i);(b=(f=location.toString()).indexOf("?"))<0&&(b=f.indexOf("#"))<0&&(b=f.length);var y;l=f.substring(0,b);if(y=WebSquare.configPath?l+"?w2Config="+WebSquare.configPath+"&"+r+"=":l+"?"+r+"=",WebSquare.util.isEncodeParameter()?WebSquare.util.getEncodeParameterOption("onlyParam")?y=y+a+o:y+=WebSquare.util.encodeParameter(a+o):y=y+a+o,"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload"),e.replaceHistory)switch(u){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(y)}));break;default:location.replace(y)}else switch(u){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(y)}));break;default:location.assign(y)}}}catch(t){h.w.printStackTrace(t)}},u.clearPage=function(){return d.v.onclearpage=!0,WebSquare.util.url(WebSquare.net.getBlankXML(),{spa:!0,forceReload:!0})},u.reinitializeWframe=function(t,e){try{var i=JSON.stringify(e),o=WebSquare.util.getFrameFromPoint(i),s=null;o&&(s=WebSquare.idCache[o]),s&&s.reload()}catch(t){h.w.printStackTrace(t)}},u.reinitialize=function(t){try{if(c.k.printLog("before redraw page"),
t)"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),d.v.finalize(),location.reload();else{var e=WebSquare.net.getParameter("w2xPath");""!=e&&e==WebSquare.w2xPath||(location.hash=location.hash+"#w2xPath="+WebSquare.w2xPath),WebSquare.w2xPath="",WebSquare.util.onhashchange()}}catch(t){h.w.printStackTrace(t)}},u.reinitializeTop=function(){try{var t=WebSquare.util.getTop();t.WebSquare&&t.WebSquare.util.reinitialize(!1)}catch(t){h.w.printStackTrace(t)}},u.onhashchange=async function(t){try{var e=!1,i="",o=WebSquare.util.getUrlHashText();if(null!=o&&(e=!0,i=o),e||(i=WebSquare.net.getParameter("w2xPath")),""==i)return void location.toString().indexOf("."+WebSquare.w2xExtension);if(i==WebSquare.w2xPath)return;if(!d.v.urlchangebyapi&&""!==WebSquare.w2xPath&&location.hash.indexOf("w2xPath")<0&&!e)return;for(var s in"onhashchange"in window?window.onhashchange=null:window.clearInterval(WebSquare.util._hashTestKey),l.d.performanceCheck)l.d.performanceCheck[s]=new Date;l.d.printLog("[SPA1] The user request for new XML page. ");var r=location.href;if(d.v.onurlchange=!0,d.v.onclearpage=!1,d.v.finalize(),d.v.onurlchange=!1,d.v.urlchangebyapi=!1,d.v.onclearpage||!e&&WebSquare.net.getParameter("w2xPath")!=i)return d.v.onclearpage=!1,location.replace(r),"true"!==d.v.getConfiguration("/WebSquare/clearMemory/@value")&&WebSquare.clearMemory(),void window.wq_reload(r);d.v.onclearpage=!1,l.d.performanceCheck.mid1=new Date,l.d.printLog("[SPA2] Clear page resources. Time:"+(l.d.performanceCheck.mid1.getTime()-l.d.performanceCheck.start.getTime())+"ms"),WebSquare.w2xPath=i;WebSquare.w2xPath=WebSquare.w2xPath.replace(/[\\]/g,"/");var a=WebSquare.w2xPath.lastIndexOf("/");""==WebSquare.net.getParameter("w2xHome")?WebSquare.w2xHome=a>-1?WebSquare.w2xPath.substring(0,a+1):"/":WebSquare.w2xHome=WebSquare.net.getParameter("w2xHome"),WebSquare.logFileName=a>-1?" "+WebSquare.w2xPath.substring(a+1):" "+WebSquare.w2xPath;var n=WebSquare.net.getParameter("w2xDocumentRoot");"/"==n||"\\"==n?WebSquare.w2xDocumentRoot="":""!=n&&(WebSquare.w2xDocumentRoot=n),c.k.printLog("w2xDocumentRoot["+WebSquare.w2xDocumentRoot+"]"),c.k.printLog("w2xHome        ["+WebSquare.w2xHome+"]"),c.k.printLog("w2xPath        ["+WebSquare.w2xPath+"]"),c.k.printLog("w2xTheme       ["+WebSquare.w2xTheme+"]"),await l.d.loadEngineModuleAsync(!0),d.v._createGlobalVariable(),WebSquare._loadCSS({isSPA:!0,w2xPath:i});var u,p=d.v.getConfiguration("/WebSquare/spa/defer/@function"),g=parseInt(d.v.getConfiguration("/WebSquare/spa/defer/@delay"),10)||0;p&&(u=WebSquare.util.getGlobalFunction(p));var m=!1;"function"==typeof u&&g>0&&(m=u(i)),!0===m?WebSquare.util.setTimeout(WebSquare.util._onhashchange,{key:"WebSquare.util._onhashchange",caller:this,delay:g,args:[i]}):WebSquare.util._onhashchange(i)}catch(t){h.w.printStackTrace(t)}},u._onhashchange=function(t){if(!WebSquare.initialize(t,!0)){"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._hashTestKey=window.setInterval(WebSquare.util._hashTest,50),c.k.printLog("Runtime Error : "+t+" load failed.");var e=WebSquare.language.getMessage("E_initializer_XMLLoadFailError",t);WebSquare.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:e})}},u.getUrlHashText=function(){try{var t=null;for(var e in WebSquare.spaURLMapping)for(var i=location.hash.slice(1).split(/[\&\?\#]/),o=0;o<i.length;o++)if(e===i[o]){t=WebSquare.spaURLMapping[e];break}return t}catch(t){h.w.printStackTrace(t,null,this)}},u._stopProcess=function(t){if(t||location.hash&&location.hash.lastIndexOf("w2xPath")>=0){var e=WebSquare.util.getUrlHashText();if(null==e&&(e=WebSquare.net.getParameter("w2xPath")),!e)return!1;if(e!=WebSquare.w2xPath)return c.k.printLog("[SPA_Exception] Event Activation Canceled by New Page Request : #w2xPath="+e),WebSquare.util.onhashchange(),!0}return!1},u.isSPA=function(){return location.hash&&location.hash.lastIndexOf("w2xPath")>=0||null!=WebSquare.util.getUrlHashText()},
u.movePage=async function(t){try{var e=t;for(var i in"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),l.d.performanceCheck)l.d.performanceCheck[i]=new Date;if(l.d.printLog("[SPA1] The user request for new XML page. "),d.v.onurlchange=!0,d.v.onclearpage=!1,"true"===d.v.getConfiguration("/WebSquare/spa/autoReload/@value").toLowerCase()){for(var o in d.v.memoryLeakComponent)if(null!=WebSquare.componentsCache[o]){if(!WebSquare.hybridApp&&Number(d.v.getConfiguration("/WebSquare/spa/autoReload/@"+o))<=Object.keys(WebSquare.componentsCache[o]).length){try{if(r=d.v.getConfiguration("/WebSquare/spa/autoReload/@userFunction"))"function"==typeof(a=WebSquare.util.getGlobalFunction(r))&&a(t);else WebSquare.util.url(t,{spa:!1})}catch(t){}return}d.v.memoryLeakComponentCount+=Object.keys(WebSquare.componentsCache[o]).length*d.v.memoryLeakComponent[o]}var s=d.v.getConfiguration("/WebSquare/spa/autoReload/@count");if(s=""==s?NaN:Number(s),!WebSquare.hybridApp&&d.v.memoryLeakComponentCount>0&&d.v.memoryLeakComponentCount>s){try{var r,a;if(r=d.v.getConfiguration("/WebSquare/spa/autoReload/@userFunction"))"function"==typeof(a=WebSquare.util.getGlobalFunction(r))&&a(t);else WebSquare.util.url(t,{spa:!1})}catch(t){}return}}d.v.finalize(),d.v.onurlchange=!1,d.v.urlchangebyapi=!1,d.v.onclearpage=!1,l.d.performanceCheck.mid1=new Date,l.d.printLog("[SPA2] Clear page resources. Time:"+(l.d.performanceCheck.mid1.getTime()-l.d.performanceCheck.start.getTime())+"ms"),WebSquare.w2xPath=e;WebSquare.w2xPath=WebSquare.w2xPath.replace(/[\\]/g,"/");var n=WebSquare.w2xPath.lastIndexOf("/");""==WebSquare.net.getParameter("w2xHome")?WebSquare.w2xHome=n>-1?WebSquare.w2xPath.substring(0,n+1):"/":WebSquare.w2xHome=WebSquare.net.getParameter("w2xHome"),WebSquare.logFileName=n>-1?" "+WebSquare.w2xPath.substring(n+1):" "+WebSquare.w2xPath;var p=WebSquare.net.getParameter("w2xDocumentRoot");"/"==p||"\\"==p?WebSquare.w2xDocumentRoot="":""!=p&&(WebSquare.w2xDocumentRoot=p),c.k.printLog("w2xDocumentRoot["+WebSquare.w2xDocumentRoot+"]"),c.k.printLog("w2xHome        ["+WebSquare.w2xHome+"]"),c.k.printLog("w2xPath        ["+WebSquare.w2xPath+"]"),c.k.printLog("w2xTheme       ["+WebSquare.w2xTheme+"]"),await l.d.loadEngineModuleAsync(!0);var g=WebSquare.util._stopProcess;if(u._stopProcess=function(){},!await WebSquare.initialize(e,!0)){"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._hashTestKey=setInterval(WebSquare.util._hashTest,50),c.k.printLog("Runtime Error : "+e+" load failed.");var m=WebSquare.language.getMessage("E_initializer_XMLLoadFailError",e);WebSquare.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:m})}for(var f in d.v.clearTimer("WebSquare_startOnload"),WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp)WebSquare.DataCollection.comp[f].activate();WebSquare.getBody().activate(),l.d.performanceCheck.mid6=new Date,l.d.printLog("[SPA7][EVENT] Event Activation. Time:"+(l.d.performanceCheck.mid6.getTime()-l.d.performanceCheck.mid5.getTime())+"ms"),WebSquare.startOnLoad(!0),"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._wait_for_iframe_reload(),WebSquare.getBody().onComplete(),WebSquare.DataCollection.api.onComplete(),WebSquare.util._stopProcess=g}catch(t){h.w.printStackTrace(t)}},"onhashchange"in window||(u._hashTest=function(){if(WebSquare.util._hash){if(WebSquare.util._hash!=location.hash)WebSquare.util._hash=location.hash,WebSquare.util.onhashchange();else if(WebSquare.util._hiddenFrame&&!WebSquare.util._iframe_wait){try{var t=document.getElementById(WebSquare.util._hiddenFrame.id);if(null!=t){var e=t.contentWindow.location.search.slice(1);if(e!=WebSquare.w2xPath){var i=location.hash.lastIndexOf("#w2xPath");if(i<0)location.hash.length>0?location.hash=location.hash+"&w2xPath="+e:location.hash="#w2xPath="+e;else{var o=location.hash.substring(i+1).search(/[\&\?\#]/)+1
;o<0?location.hash=location.hash.slice(0,i)+"#w2xPath="+e:(location.hash=location.hash.slice(0,i)+"#w2xPath="+e+location.hash.substring(i+o),alert(location.hash.slice(0,i)),alert(e),alert(location.hash.substring(i+o))),alert(location.hash)}}}else document.body.appendChild(WebSquare.util._hiddenFrame)}catch(t){h.w.printStackTrace(t)}t=null}}else WebSquare.util._hash=location.hash},u._makeFrame=function(){try{var t=document.createElement("iframe");t.id="wq_hidden_frame_for_spa_history",t.src=n.x._resourceURI+"blank.html?"+WebSquare.w2xPath,t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.style.display="none",WebSquare.util._hiddenFrame=document.body.appendChild(t),t=null}catch(t){h.w.printStackTrace(t)}},u._wait_for_iframe_reload=function(t){(t||location.hash&&location.hash.lastIndexOf("w2xPath")>=0)&&WebSquare.util._iframe_wait&&(WebSquare.util._hiddenFrame.contentWindow.location.search.slice(1)!=WebSquare.w2xPath?setTimeout(WebSquare.util._wait_for_iframe_reload,5):(WebSquare.util._iframe_wait=!1,WebSquare.util._hashTestKey=setInterval(WebSquare.util._hashTest,50)))}),u.setFullView=function(t){try{function e(){var e=window.innerWidth||document.body.clientWidth,i=window.innerHeight||document.body.clientHeight;if(null!==t&&"function"==typeof t){var o=t();if(null!==o&&"object"==typeof o&&o.baseHeight&&o.baseWidth){var s,r,a=e/o.baseWidth,n=i/o.baseHeight;(s=a>n?n:a)<(r=!isNaN(parseFloat(o.minZoom))&&isFinite(o.minZoom)?o.minZoom:.5)&&(s=r),WebSquare.util.isIEAllVersion()&&(document.body.style.width=document.documentElement.offsetWidth/s+"px",document.body.style.height=document.documentElement.offsetHeight/s+"px"),WebSquare.util.zoomed(document.body,s),WebSquare.util.isIEAllVersion()||WebSquare.util.traverseAndZoom(document,s),WebSquare.util.fullViewed=!0,WebSquare.util.fullViewRatio=s,document.documentElement.style.overflow="hidden"}else!isNaN(parseFloat(o))&&isFinite(o)&&(WebSquare.util.isIEAllVersion()&&(document.body.style.width=document.documentElement.offsetWidth/s+"px",document.body.style.height=document.documentElement.offsetHeight/s+"px"),WebSquare.util.zoomed(document.body,o),WebSquare.util.isIEAllVersion()||WebSquare.util.traverseAndZoom(document,o),WebSquare.util.fullViewed=!0,WebSquare.util.fullViewRatio=o,document.documentElement.style.overflow="hidden")}}WebSquare.getBody().event.addListener(window,"onresize",e),e()}catch(t){h.w.printStackTrace(t)}},u.getMetaValue=function(t){try{var e="",i=WebSquare.Elem.api.getElementsByTagName(WebSquare.WebSquaredoc.getPageInfo(),"head")[0];return i&&(e=WebSquare.Elem.api.getAttribute(i,t)),e}catch(t){h.w.printStackTrace(t)}},u.traverseAndZoom=function(t,e){for(var i=t.getElementsByTagName("iframe"),o=0;o<i.length;o++)i[o].contentWindow.WebSquare.util.zoomed(i[o].contentWindow.document.body,e),i[o].contentWindow.WebSquare.util.traverseAndZoom(i[o].contentWindow.document,e)},u.zoomed=function(t,e){if(l.d.browserCheck.moz&&t&&t.style)t.style.MozTransform="scale("+e+")",t.style.MozTransformOrigin="left top";else if(t&&t.style&&(t.style.zoom=e,l.d.fullViewClass)){l.d.fullViewClass=!1;for(var i=document.getElementsByTagName("style"),o=0;o<i.length;o++)if(i[o].innerHTML==l.d.fullViewClassCssText){document.getElementsByTagName("head")[0].removeChild(i[o]);break}}},u.createProgressBar=function(t){try{if(t&&t.id){var e=WebSquare.util.dynamicCreate(t.id,"progressbar",t);e.render.style.zIndex=4500,e.setStyle("position","absolute")}else c.k.printLog("Please set Progressbar options id")}catch(t){h.w.printStackTrace(t)}},u.getNextTabbableComp=function(t){try{var e,i=function(t){if(null!=WebSquare.tabOrder[t]&&null!=WebSquare.tabOrder[t].nextTabID){var e=WebSquare.tabOrder[t].nextTabID,o=WebSquare.util.getComponentById(e);if(o)return!0===o.getReadOnly()||!0===o.getDisabled()||$("#"+e+":visible").length<1?i(e):e}};return e=i(t),WebSquare.util.getComponentById(e)||WebSquare.util.getComponentById(t)}catch(t){h.w.printStackTrace(t)}},u.getPreTabbableComp=function(t){try{
var e,i=function(t){if(null!=WebSquare.tabOrder[t]&&null!=WebSquare.tabOrder[t].preTabID){var e=WebSquare.tabOrder[t].preTabID,o=WebSquare.util.getComponentById(e);if(o)return!0===o.getReadOnly()||!0===o.getDisabled()||$("#"+e+":visible").length<1?i(e):e}};return e=i(t),WebSquare.util.getComponentById(e)||WebSquare.util.getComponentById(t)}catch(t){h.w.printStackTrace(t)}},u.setNextTabPageComp=function(t,e){try{var i=WebSquare.util.getComponentById(t);if(i&&("wframe"==i.options.pluginName||i.options.udcName)){var o,s=null;if(e&&e.firstTabID&&(i.options.firstTabID=e.firstTabID),e&&e.lastTabID&&(i.options.lastTabID=o=e.lastTabID),i.options.nextTabID){s=$("#"+i.id+" *:wq:tabbable"),null==WebSquare.tabOrder[i.id]&&(WebSquare.tabOrder[i.id]={});var r=null;i.options.udcName?i.parentFrame&&void 0!==WebSquare.idCache[i.parentFrame]&&(r=WebSquare.idCache[i.parentFrame].id):r=i.scope_id;var a,n=null!=r?WebSquare.util.getComponentById(i.options.nextTabID,r).id:i.options.nextTabID;if(WebSquare.tabOrder[i.id].nextTabID=n,o)a=null!=r?WebSquare.util.getComponentById(i.options.lastTabID,r).id:i.options.lastTabID;else{var l=$(s[s.length-1]).wq()[0];l&&(a=l.id)}a&&(null==WebSquare.tabOrder[n]&&(WebSquare.tabOrder[n]={}),WebSquare.tabOrder[n].preTabID=a,null==WebSquare.tabOrder[a]&&(WebSquare.tabOrder[a]={}),WebSquare.tabOrder[a].nextTabID=n)}if(null!=WebSquare.tabOrder[i.id]&&null!=WebSquare.tabOrder[i.id].preTabID){var d,c=null;if(null!=i.options.firstTabID)c=null!=r?WebSquare.util.getComponentById(i.options.firstTabID,r).id:i.options.firstTabID;else null==s&&(s=$("#"+i.id+" *:wq:tabbable")),(d=$(s[0]).wq()[0])&&(c=d.id);if(c){var u=WebSquare.tabOrder[i.id].preTabID;WebSquare.tabOrder[u].nextTabID=c,null==WebSquare.tabOrder[c]&&(WebSquare.tabOrder[c]={}),WebSquare.tabOrder[c].preTabID=u}}}}catch(t){h.w.printStackTrace(t)}},u.setNextTabID=function(t,e,i){try{if(null!=e){null==WebSquare.tabOrder[t]&&(WebSquare.tabOrder[t]={});var o=u.getComponentById(t,i),s=i||o.scope_id;o.options.inheritedCompName&&(s=WebSquare.idCache[o.parentFrame].id);var r=WebSquare.util.getComponentById(e,s);e=null!=s?r.id:e;if(WebSquare.tabOrder[e]&&r&&("wframe"===r.options.pluginName||r.options.udcName))if(WebSquare.tabOrder[e].preTabID!==t){var a=null;if(s||(r.options.udcName?r.parentFrame&&void 0!==WebSquare.idCache[r.parentFrame]&&(s=WebSquare.idCache[r.parentFrame].id):s=r.scope_id),null!=WebSquare.tabOrder[r.id]){var n,l=null;if(null!=r.options.firstTabID)l=null!=s?WebSquare.util.getComponentById(r.options.firstTabID,s).id:r.options.firstTabID;else null==a&&(a=$("#"+r.id+" *:wq:tabbable")),(n=$(a[0]).wq()[0])&&(l=n.id);l&&(WebSquare.tabOrder[t].nextTabID=l,null==WebSquare.tabOrder[l]&&(WebSquare.tabOrder[l]={}),WebSquare.tabOrder[l].preTabID=t)}}else WebSquare.tabOrder[t].nextTabID=e;else WebSquare.tabOrder[t].nextTabID=e;null==WebSquare.tabOrder[e]&&(WebSquare.tabOrder[e]={}),WebSquare.tabOrder[e].preTabID=t}}catch(t){h.w.printStackTrace(t)}},u.autoFocus=function(t,e){WebSquare.util.autoFocus;try{var i=WebSquare.util.getStringByByteSize(e,t.options.maxByteLength+2,t.options.byteCheckIgnoreChar),o=WebSquare.util.getByteLength(i)===t.options.maxByteLength&&!0!==WebSquare.util.isKorean(e.charAt(e.length-1)),s=WebSquare.util.getByteLength(i)>t.options.maxByteLength;t.options.autoFocus&&(o||s)&&WebSquare.util._autoFocus(t)}catch(t){h.w.printStackTrace(t)}},u._autoFocus=function(t){WebSquare.util.autoFocus;try{if(null!=WebSquare.tabOrder[t.id]&&null!=WebSquare.tabOrder[t.id].nextTabID){var e=WebSquare.util.getNextTabbableComp(t.id);e&&e.focus()}else{var i=WebSquare.util.getGlobalFunction(d.v.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof i&&i.call(t,t.id)}}catch(t){h.w.printStackTrace(t)}},u.multipleExcelDownload=function(t){try{for(var e,i=t.common,o=t.excelInfo,s={},r=[],a=[],n=!0,l=[],u="",p=i.advancedExcelDownloadURL||"",g=0;g<o.length;g++){for(var m in s={},r=[],s=o[g],i)s[m]=i[m];if(s.dataProvider=s.dataProvider||"",
s.splitProvider=s.splitProvider||"",""==s.dataProvider&&!1,""==s.sheetName){n=!1;break}var f;f=s.sheetName;for(var b=0;b<a.length;b++)if(a[b]==s.sheetName){s.sheetName=s.sheetName+"("+b+")";break}a.push(f),r=s.infoArr,u=s.wframeId||"",null!=(e=WebSquare.util.getComponentById(s.gridId,u))&&null!=e.delayedDrawObj&&e.setRedrawStatus("draw");var y=parseInt(s.rowsByN);switch(s.rowsByN=y>100?y:100,s.dataLength=e.getDataLength(),s.type+""){case"":case"0":s.type=0;break;case"2":s.type=2;break;default:s.type=1}if(0===s.type||1===s.type){0==g&&(!0===s.showProcess?(s.processMsg=s.processMsg||"composing excel data...",WebSquare.layer.showProcessMessage(s.processMsg,{scope:t.scopeId||s.wframeId||""})):WebSquare.getBody().showModal("w2modal_gridDownload")),s.cellInfo=[],s.isPlainDataCol=[],s.isSelectCol=[],s.isBasicCol=[],s.isExpCol=[],s.isCustomCol=[],s.isCustomModelCol=[],s.isCustomType=[],s.isEscapeFormatter=[];var v=e.oneRowDataLength;for(b=0;b<v;b++){var w=e.getCellInfo(b),S=w.options.inputType;s.cellInfo[b]=w,s.isCustomType[b]="custom"===S,s.isPlainDataCol[b]="checkbox"===S||"image"===S||"radio"===S||"autofinder"===S,s.isSelectCol[b]="select"===S||"checkcombobox"===S||"autoComplete"===S,s.isExpCol[b]="expression"===S,s.isCustomModelCol[b]=w.useCustomModelFormatter,s.isCustomCol[b]=w.useCustomFormatter,s.isBasicCol[b]=!(s.isPlainDataCol[b]||s.isSelectCol[b]||s.isExpCol[b]||s.isCustomModelCol[b]||s.isCustomType[b]),s.isEscapeFormatter[b]=w.useEscapeFormatter}}var C;s.multiexcel=!0,s.massStorage=!1,s.dataHandler=s.dataHandler||"",C=""!=s.dataHandler?e.sendExcelData(s,r,""):e.makeExcelData(0,[],s,r),0==l.length?(l=C)[0]="<vector result='"+o.length+"'>":(C[1]="<data vectorkey='"+g+"'><hashtable>",C.pop(),C.shift(),l.pop(),(l=l.concat(C)).push("</vector>"))}0==n&&c.k.printLog("sheetName has not been set. Set the properties sheetName."),1==n&&(""==p&&(p=e.options.advancedExcelDownloadURL),s.scopeId=t.scopeId||s.wframeId||"",d.v.excelDownload(p,l.join(""),"post",s),e.xmlData=null,void 0===s.showProcess||!1===s.showProcess?WebSquare.getBody().hideModal():!0===s.showConfirm&&this.hideDownloadLayer())}catch(t){h.w.printStackTrace(t,null,this)}},u.multipleExcelUpload=function(t){try{if(!t&&t.common)return;if(!t&&t.excelInfo)return;var e={status:[],uploadType:[],columnIds:[],dataList:[],gridID:[],wframeId:[]},i=t.common,o=t.excelInfo,s="",r=i.processMsg||"";r=WebSquare.text.BASE64URLEncoder(r);var a,n="",d="",c="",u="",p=i.callbackFunction||"",g=t.scopeId,m=[];m.push("<vector result='"+o.length+"'>");for(var f=0;f<o.length;f++){var b={};u=(S=o[f]).wframeId||"";var y=WebSquare.util.getComponentById(S.gridId,u),v=y.element._elementType;m.push("<data vectorkey='"+f+"'>"),m.push("<hashtable>");var w="";w="json"===v?WebSquare.xmljs.json2xml(y.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(y.element),m.push("<data hashkey='style'>"+w+"</data>");var S,C=(S=S||{}).type||"0",_=S.removeColumns||"",x=S.startRowIndex||"0",I=S.startColumnIndex||"0",T=S.endColumnIndex||"-1",k=S.sheetNo||"0",D=S.headerExist||"0";0===S.footerExist&&(S.footerExist="0");var L=S.footerExist||"1",W=S.append||"0",A=S.hidden||"0",M=S.fillHidden||"0";s=S.popupUrl||y.options.advancedExcelUploadPopupURL;var E=S.optionParam||"",q=S.skipSpace||"0",R=S.insertColumns||[],N="";if(y.options.dataList){var F=y.modelControl.getDataComp(y.options.dataList);null!=F&&(N=F.id)}var O=S.status||"R",B=S.delim||",",V="",P="",H=S.pwd||"",j=i.loadingMode||"POI";c=i.maxFileSize||"-1";var z=S.cellDataConvertor||"",G=S.decimal||"4";a=S.useModalDisable||"false";for(var U=S.useMaxByteLength||"false",X=i.advancedExcelUploadURL||"",K=0;K<R.length;K++){var Y=R[K],$=Y.columnIndex+""||"",J=Y.columnValue+""||"";""!=$&&(V=V+P+$+","+J,P="|")}D=parseInt(D,10),W=parseInt(W,10),A=parseInt(A,10),L=parseInt(L,10),b.header=1==D?"true":"false",b.footer=1==L?"true":"false",b.append=1==W?"true":"false",b.removeColumns=_,b.fillHidden=1==M?"true":"false",b.hidden=1==A?"true":"false",
b.type=1==C?"true":"false",b.uploadType=C,b.skipSpace=1==q?"true":"false",b.insertColumns=V,b.optionParam=E,n=""==X?y.options.advancedExcelUploadURL:X,b.gridID=y.id;var Z=[];for(K=y.defaultColCnt;K<y.hiddenList.length;K++)1==y.hiddenList[K]&&Z.push(K-y.defaultColCnt);b.columnNum=y.getTotalCol(),b.expressionColumns=y.getExpressionColumnArr().join(","),b.hiddenColumns=Z.join(","),b.headerRows=y.getElementById(y.id+"_head_table").rows.length,b.gridStartRow=x||"1",b.gridStartCol=I||"1",b.gridEndCol=T,b.gridSheetNo=k||"0",b.domain="",WebSquare.domain&&(b.domain=WebSquare.text.URLEncoder(WebSquare.domain)),b.delim=B,b.dataList=N,b.columnIds=y.cellIdList.join(","),b.status=O,b.pwd=H,b.loadingMode=j,b.maxFileSize=c,b.cellDataConvertor=z,b.decimal=G,b.useMaxByteLength=U+"","grid"==y.initializeType&&y.options.ref&&S.instanceBind&&(b.instanceBind=S.instanceBind);s=S.popupUrl||y.options.advancedExcelMultiUploadPopupURL;var Q=S.advancedHidden||"0",tt="";""!=b.pwd&&(tt=WebSquare.text.BASE64Encoder(b.pwd)),b.pwd=tt,m.push("<data hashkey='type' value='"+b.type+"'/>"),m.push("<data hashkey='header' value='"+b.header+"'/>"),m.push("<data hashkey='footer' value='"+b.footer+"'/>"),m.push("<data hashkey='append' value='"+b.append+"'/>"),m.push("<data hashkey='removeColumns' value='"+b.removeColumns+"'/>"),m.push("<data hashkey='fillHidden' value='"+b.fillHidden+"'/>"),m.push("<data hashkey='hidden' value='"+b.hidden+"'/>"),m.push("<data hashkey='uploadType' value='"+b.uploadType+"'/>"),m.push("<data hashkey='skip_space' value='"+b.skipSpace+"'/>"),m.push("<data hashkey='insertColumns' value='"+b.insertColumns+"'/>"),m.push("<data hashkey='optionParam' value='"+b.optionParam+"'/>"),m.push("<data hashkey='gridID' value='"+b.gridID+"'/>"),m.push("<data hashkey='columnNum' value='"+b.columnNum+"'/>"),m.push("<data hashkey='expressionColumns' value='"+b.expressionColumns+"'/>"),m.push("<data hashkey='hiddenColumns' value='"+b.hiddenColumns+"'/>"),m.push("<data hashkey='headerRows' value='"+b.headerRows+"'/>"),m.push("<data hashkey='gridStartRow' value='"+b.gridStartRow+"'/>"),m.push("<data hashkey='gridStartCol' value='"+b.gridStartCol+"'/>"),m.push("<data hashkey='gridEndCol' value='"+b.gridEndCol+"'/>"),m.push("<data hashkey='gridSheetNo' value='"+b.gridSheetNo+"'/>"),m.push("<data hashkey='domain' value='"+b.domain+"'/>"),m.push("<data hashkey='delim' value='"+b.delim+"'/>"),m.push("<data hashkey='dataList' value='"+b.dataList+"'/>"),m.push("<data hashkey='columnIds' value='"+b.columnIds+"'/>"),m.push("<data hashkey='status' value='"+b.status+"'/>"),m.push("<data hashkey='pwd' value='"+b.pwd+"'/>"),m.push("<data hashkey='loadingMode' value='"+b.loadingMode+"'/>"),m.push("<data hashkey='maxFileSize' value='"+b.maxFileSize+"'/>"),m.push("<data hashkey='cellDataConvertor' value='"+b.cellDataConvertor+"'/>"),m.push("<data hashkey='decimal' value='"+b.decimal+"'/>"),m.push("<data hashkey='useMaxByteLength' value='"+b.useMaxByteLength+"'/>"),m.push("<data hashkey='advancedHidden' value='"+b.advancedHidden+"'/>"),m.push("<data hashkey='bodyRows' value='"+y.struct.body.rowArr.length+"'/>"),m.push("</hashtable>"),m.push("</data>"),e.status.push(b.status),e.uploadType.push(b.uploadType),e.columnIds.push(b.columnIds),e.dataList.push(b.dataList),e.gridID.push(b.gridID),e.wframeId.push(u)}m.push("</vector>"),s+="?gridID="+b.gridID,WebSquare.domain&&(s+="&domain="+b.domain),s+=1==Q?"&advancedHidden=true":"&advancedHidden=false",s+="&multi=true",e.processMsg=r,e.maxFileSize=c,e.useModalDisable=a,e.action=n,e.append=W,e.delim=B,e.callbackFunction=p,e.scopeId=g,WebSquare._excelMultiInfo=JSON.stringify(e),WebSquare._excelMultiUploadInfo=m.join(""),d=void 0===i.features||"string"!=typeof i.features?"top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no":i.features,s=l.d.getEngineUri(s),window.open(s,"fileupWindow",d)}catch(t){h.w.printStackTrace(t,null,this)}},
u.multipleDataListDownload=function(t){try{for(var e,i=t.common,o=t.excelInfo,s={},r=[],a=[],n=!0,l=[],u="",p=i.dataListDownloadURL||WebSquare.baseServletURI+"dataListToExcel.wq",g=0;g<o.length;g++){for(var m in s={},r=[],s=o[g],i)s[m]=i[m];if(s.dataProvider=s.dataProvider||"",s.splitProvider=s.splitProvider||"",""==s.dataProvider&&!1,""==s.sheetName){n=!1;break}var f;f=s.sheetName;for(var b=0;b<a.length;b++)if(a[b]==s.sheetName){s.sheetName=s.sheetName+"("+b+")";break}a.push(f),r=s.infoArr,u=s.wframeId||"",e=WebSquare.util.getComponentById(s.dataListId,u);var y=parseInt(s.rowsByN);switch(s.rowsByN=y>100?y:100,s.dataLength=e.getDataLength(),s.type+""){case"":case"0":s.type=0;break;case"2":s.type=2;break;default:s.type=1}0==g&&(!0===s.showProcess?(s.processMsg=s.processMsg||"composing excel data...",WebSquare.layer.showProcessMessage(s.processMsg)):WebSquare.getBody().showModal("w2modal_gridDownload"));var v;s.multiexcel=!0,s.dataHandler=s.dataHandler||"",v=""!=s.dataHandler?WebSquare.util.sendDataList(e,s,r,""):WebSquare.util.makeDataListData(e,0,[],s,r),0==l.length?(l=v)[0]="<vector result='"+o.length+"'>":(v[1]="<data vectorkey='"+g+"'><hashtable>",v.pop(),v.shift(),l.pop(),(l=l.concat(v)).push("</vector>"))}0==n&&c.k.printLog("sheetName has not been set. Set the properties sheetName."),1==n&&(""==p&&c.k.printLog("multipleDataListDownload has not been set."),s.scopeId=t.scopeId||s.wframeId||"",d.v.excelDownload(p,l.join(""),"post",s),!1===s.showProcess?WebSquare.getBody().hideModal():!0===s.showConfirm&&(window.gridExceldownloadIframe.style.display="none",window.downloadGridId=null,WebSquare.getBody().hideModal()))}catch(t){h.w.printStackTrace(t,null,this)}},u.makeDataListData=function(t,e,i,o,s){try{var r=i.length,a=e+o.rowsByN;a=a<o.dataLength?a:o.dataLength;var n=o.separator||",";if(""==o.dataProvider&&""==o.splitProvider&&(a=o.dataLength,r=(i=t.getAllData()).length),!(a<o.dataLength&&""==o.dataProvider&&""==o.splitProvider)){var l;if(""==o.dataProvider&&""==o.splitProvider)if(i.length>=2)if(r>0){var c=i[0],u=i[r-1];i[0]='<array><![CDATA[["'+c,i[r-1]=u+'"]]]></array>',l=i.join('"'+n+'"'),i[0]=c,i[r-1]=u}else l="<array><![CDATA[["+i+"]]]></array>";else l="<array><![CDATA[["+(1===i.length?'"'+i[0]+'"':"")+"]]]></array>";else l="<array><![CDATA[[ ]]]></array>";return WebSquare.util.sendDataList(t,o,s,l)}WebSquare.util.makeDataListData(t,a,i,o,s)}catch(e){var p=d.v.getConfiguration("/WebSquare/dataList/excel/download/errorHandler/@value"),g=WebSquare.util.getGlobalFunction(p,t.scope_id);"function"==typeof g&&g.call(t,t.id),h.w.printStackTrace(e,null,t)}},u.sendDataList=function(t,e,i,o){var s=WebSquare.xml.encode(e.fileName)||"excel",r=e.sheetName||"sheet",a=(e.type,e.multipleSheet||"true"),n=e.removeColumns||"",l=e.startRowIndex||"0",h=e.startColumnIndex||"0",d=e.headerColor||"",c=e.headerFontName||"",u=e.headerFontSize||"",p=e.headerFontColor||"",g=e.bodyColor||"",m=e.bodyFontName||"",f=e.bodyFontSize||"",b=e.bodyFontColor||"",y=e.rowNumHeaderColor||"",v=e.rowNumHeaderFontName||"",w=e.rowNumHeaderFontSize||"",S=e.rowNumHeaderFontColor||"",C=e.rowNumBodyColor||"",_=e.rowNumBodyFontName||"",x=e.rowNumBodyFontSize||"",I=e.rowNumBodyFontColor||"",T=e.dataProvider||"",k=e.splitProvider||"",D=e.providerRequestXml||"",L=e.userDataXml||"",W=e.optionParam||"",A=e.bodyWordwrap||"",M=e.useEuroLocale||"false",E=e.useHeader||"true";e.printSet=e.printSet||{};var q=e.printSet.fitToPage||"false",R=e.printSet.landScape||"false",N=e.printSet.fitWidth||"1",F=e.printSet.fitHeight||"1",O=e.printSet.scale||"100",B=e.printSet.pageSize||"A4",V=e.separator||",",P=e.freezePane||"",H=e.autoSizeColumn||"false",j=e.displayGridlines||"",z=e.useDataFormat||"false",G=(e.columnOrder,WebSquare.xml.encode(e.rowNumHeaderValue)||""),U=e.rowNumVisible+""=="true",X=e.startRowNumber||"0",K=e.bodyNumberDefaultValue||"",Y=e.numberToText||"false",$=e.rowHeight||"-1",J=e.headerRowHeight||"-1",Z=e.maxDataSize||-1;Z=parseInt(Z,10)
;var Q=e.pwd||"",tt=e.headerAutoFilter||"false";e.httpReadOnly=e.httpReadOnly+""=="true";e.dataListDownloadURL;var et=e.useXHR||"false";e.useXHR=et+""=="true";var it=e.openFile||"false",ot=e.macroFileName||"",st=e.useMacro||"false",rt=e.sameSite||"",at=(et=e.useXHR||"",t.element),nt="";if(at&&"JSON"==at.elementType){nt="<w2:dataList id='"+at.id+"' baseNode='list' repeatNode='map'>",nt+="<w2:columnInfo>";for(var lt=0;lt<at.columnInfo.length;lt++){var ht=at.columnInfo[lt];nt+="<w2:column id='"+ht.id+"' name='"+ht.name+"' dataType='"+ht.dataType+"'/>"}nt+="</w2:columnInfo>",nt+="</w2:dataList>"}else nt=WebSquare.xml.serialize(at);var dt=[];if(dt.push("<vector result='1'>"),dt.push("<data vectorkey='0'><hashtable>"),dt.push("<data hashkey='style'>"+nt+"</data>"),e.dataHandler=e.dataHandler||"",""!=e.dataHandler){var ct=WebSquare.util.getGlobalFunction(e.dataHandler,t.scope_id);if("function"==typeof ct){var ut=ct.call(t,t.id);V=e.separator||",";o='<array><![CDATA[["'+ut.join('"'+V+'"')+'"]]]></array>'}}dt.push("<data hashkey='data'>"+o+"</data>"),dt.push("<data hashkey='rowNumVisible' value='"+U+"'/>"),dt.push("<data hashkey='fileName' value='"+s+"'/>"),dt.push("<data hashkey='sheetName' value='"+r+"'/>"),dt.push("<data hashkey='multipleSheet' value='"+a+"'/>"),dt.push("<data hashkey='stRowIndex' value='"+l+"'/>"),dt.push("<data hashkey='stColIndex' value='"+h+"'/>"),dt.push("<data hashkey='removeColumns' value='"+n+"'/>"),dt.push("<data hashkey='headerColor' value='"+d+"'/>"),dt.push("<data hashkey='headerFontName' value='"+c+"'/>"),dt.push("<data hashkey='headerFontSize' value='"+u+"'/>"),dt.push("<data hashkey='headerFontColor' value='"+p+"'/>"),dt.push("<data hashkey='bodyColor' value='"+g+"'/>"),dt.push("<data hashkey='bodyFontName' value='"+m+"'/>"),dt.push("<data hashkey='bodyFontSize' value='"+f+"'/>"),dt.push("<data hashkey='bodyFontColor' value='"+b+"'/>"),U&&(dt.push("<data hashkey='rowNumHeaderColor' value='"+y+"'/>"),dt.push("<data hashkey='rowNumHeaderFontName' value='"+v+"'/>"),dt.push("<data hashkey='rowNumHeaderFontSize' value='"+w+"'/>"),dt.push("<data hashkey='rowNumHeaderFontColor' value='"+S+"'/>"),dt.push("<data hashkey='rowNumBodyColor' value='"+C+"'/>"),dt.push("<data hashkey='rowNumBodyFontName' value='"+_+"'/>"),dt.push("<data hashkey='rowNumBodyFontSize' value='"+x+"'/>"),dt.push("<data hashkey='rowNumBodyFontColor' value='"+I+"'/>")),dt.push("<data hashkey='dataProvider' value='"+T+"'/>"),dt.push("<data hashkey='splitProvider' value='"+k+"'/>"),dt.push("<data hashkey='providerRequestXml' value=''>"+D+"</data>"),dt.push("<data hashkey='userDataXml' value=''>"+L+"</data>"),dt.push("<data hashkey='optionParam' value='"+W+"'/>"),""!=A&&dt.push("<data hashkey='bodyWordwrap' value='"+A+"'/>"),dt.push("<data hashkey='useEuroLocale' value='"+M+"'/>"),dt.push("<data hashkey='useHeader' value='"+E+"'/>"),dt.push("<data hashkey='fitToPage' value='"+q+"'/>"),dt.push("<data hashkey='landScape' value='"+R+"'/>"),dt.push("<data hashkey='fitWidth' value='"+N+"'/>"),dt.push("<data hashkey='fitHeight' value='"+F+"'/>"),dt.push("<data hashkey='scale' value='"+O+"'/>"),dt.push("<data hashkey='pageSize' value='"+B+"'/>"),dt.push("<data hashkey='separator' value='"+V+"'/>"),dt.push("<data hashkey='freezePane' value='"+P+"'/>"),dt.push("<data hashkey='autoSizeColumn' value='"+H+"'/>"),dt.push("<data hashkey='displayGridlines' value='"+j+"'/>"),dt.push("<data hashkey='useDataFormat' value='"+z+"'/>"),dt.push("<data hashkey='rowNumHeaderValue' value='"+G+"'/>"),dt.push("<data hashkey='startRowNumber' value='"+X+"'/>"),dt.push("<data hashkey='bodyNumberDefaultValue' value='"+K+"'/>"),dt.push("<data hashkey='numberToText' value='"+Y+"'/>"),dt.push("<data hashkey='rowHeight' value='"+$+"'/>"),dt.push("<data hashkey='headerRowHeight' value='"+J+"'/>"),dt.push("<data hashkey='pwd' value='"+Q+"'/>"),dt.push("<data hashkey='headerAutoFilter' value='"+tt+"'/>"),dt.push("<data hashkey='openFile' value='"+it+"'/>"),
dt.push("<data hashkey='macroFileName' value='"+ot+"'/>"),dt.push("<data hashkey='useMacro' value='"+st+"'/>"),""!=rt&&dt.push("<data hashkey='sameSite' value='"+rt+"'/>"),""!=et&&dt.push("<data hashkey='useXHR' value='"+et+"'/>"),null!=i&&void 0!==i||(i=[]),dt.push("<data hashkey='information'><vector result='"+i.length+"'>");for(lt=0;lt<i.length;lt++){var pt=i[lt];for(var gt in dt.push("<data vectorkey='"+lt+"'><hashtable>"),pt)"text"==gt?dt.push("<data hashkey='"+gt+"' value='"+WebSquare.xml.encode(pt[gt])+"'/>"):dt.push("<data hashkey='"+gt+"' value='"+pt[gt]+"'/>");dt.push("</hashtable></data>")}return dt.push("</vector></data>"),dt.push("</hashtable></data>"),dt.push("</vector>"),dt},u.mirrorView=function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e="height="+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+",width="+t+",location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no",i="";WebSquare.domain&&(i="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var o=n.x._resourceURI+"mirrorView.html";window.open(o+i,"_blank",e)},u.watermark=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.canvasId||"watermarkCanvas",o=e.target&&e.target.render,s=o?e.target.render:document.body,r=e.lineGap||300,a=t,n=document.getElementById(i);n||((n=document.createElement("canvas")).id=i,n.style.position=o?"relative":"fixed",n.style.pointerEvents="none",n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.bottom="0px",n.setAttribute("data-watermark_msg",a),n.setAttribute("data-watermark_target",o?e.target.uuid:""),n.setAttribute("data-watermark_linegap",r),s.appendChild(n),s.setAttribute("data-watermark_canvas",i),o||WebSquare.event.addListener(window,"onresize",WebSquare.util._watermarkResize)),WebSquare.util._watermarkRedraw(s)}catch(t){h.w.printStackTrace(t,null,this)}},u._watermarkDate=function(){try{var t=new Date;return WebSquare.text.fillZero(t.getFullYear(),4)+"-"+WebSquare.text.fillZero(t.getMonth()+1,2)+"-"+WebSquare.text.fillZero(t.getDate(),2)+" "+WebSquare.text.fillZero(t.getHours(),2)+":"+WebSquare.text.fillZero(t.getMinutes(),2)+":"+WebSquare.text.fillZero(t.getSeconds(),2)}catch(t){h.w.printStackTrace(t,null,this)}},u._watermarkResize=function(t){try{var e=WebSquare.event.getTarget(t);WebSquare.util.setTimeout((function(t){WebSquare.util._watermarkRedraw(t)}),{key:"wq_watermark",max:70,args:[e]})}catch(t){h.w.printStackTrace(t,null,this)}},u._watermarkRedraw=function(t){try{var e,i=t&&t!==self;e=i?document.getElementById(t.getAttribute("data-watermark_canvas")):document.getElementById(document.body.getAttribute("data-watermark_canvas")),i?(e.width=t.clientWidth,e.height=t.clientHeight):(e.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);var o=e.getContext("2d");o.globalAlpha=.2,o.rotate(6.9*Math.PI/4),o.fillStyle="#000",o.font="bold 30px Sans-Serif";var s=o.measureText(" ").width,r=WebSquare.util._watermarkDate(),a=o.measureText(r).width;o.font="bold 50px Sans-Serif";var n=o.measureText(" ").width,l=e.getAttribute("data-watermark_msg"),d=o.measureText(l).width,c=parseInt(e.getAttribute("data-watermark_linegap"));if(d<a)for(;d<a;)l+=" ",d+=n;else for(;d>a;)r+=" ",a+=s;function h(t,i){for(var s=Math.ceil(o.measureText(t).width),r=Math.ceil(e.width/s)+1,a=(t=new Array(r).join(t),0);a<Math.ceil(e.width/c);a++)o.fillText(t,-600,i+a*c)}h(l+="     ",250),o.font="bold 30px Sans-Serif",h(r+="        ",300)}catch(t){h.w.printStackTrace(t,null,this)}},u._watermarkRemove=function(t){try{if(!WebSquare.util._watermarkArr)return;for(var e=WebSquare.util._watermarkArr.length-1;e>=0;e--){WebSquare.util._watermarkArr[e]===t&&WebSquare.util._watermarkArr.splice(e,1);var i=document.getElementById(t);i&&i.parentNode.removeChild(i)}}catch(t){h.w.printStackTrace(t,null,this)}},
u.redrawComponent=function(t,e){try{var i=WebSquare.util.getComponentById(t),o=e;null==e&&i.render&&(o=i.render.parentElement);var s=i.element.cloneNode(!0),r=i.options.pluginName;return i.remove(),WebSquare.util.dynamicCreate(t,r,s,o)}catch(t){h.w.printStackTrace(t,null,this)}},u.emptySelection=function(){try{window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}catch(t){}},u.exportJSChartAll=function(t){try{var e=t.type,i=t.fcArr||[],o=t.fileName,s=t.direction||"vertical",r={};if(i.length>0)for(var a=0;a<i.length;a++)r["fc_"+i[a]]=FusionCharts.items["fc_"+i[a]];else for(var a in FusionCharts.items)r[a]=FusionCharts.items[a];var n="",l=0,c=0,u=0,p=0,g=0,m=0;for(var a in r)if(r[a].options.containerElement)if("horizontal"==s.toLowerCase()){c+=r[a].options.containerElement.offsetWidth;var f=r[a].options.containerElement.offsetHeight;f>u&&(u=f),(b=r[a].getSVGString())&&(b=(b=(b=b.wq_replaceAll('shape-rendering="default"',"shape-rendering='auto'")).wq_replaceAll('visibility=""',"visibility='inherit'")).wq_replaceAll('text-anchor="undefined"',"text-anchor='start'"),WebSquare.util.isIEAllVersion(11)&&(b=(b=b.wq_replaceAll("&quot;","")).wq_replaceAll(location.href,"")),"zoomline"==r[a].options.chartType.toLowerCase()&&(b=b.wq_replaceAll('stroke-dasharray="-','stroke-dasharray="')),"pie3d"!=r[a].options.chartType.toLowerCase()&&"doughnut3d"!=r[a].options.chartType.toLowerCase()||(b=b.wq_replaceAll('font-family="15"','font-family="Verdana"'))),n+="<g transform='translate("+m+",0)'>"+b+"</g>",m+=r[a].options.containerElement.offsetWidth}else{l+=r[a].options.containerElement.offsetHeight;var b,y=r[a].options.containerElement.offsetWidth;y>p&&(p=y),(b=r[a].getSVGString())&&(b=(b=(b=b.wq_replaceAll('shape-rendering="default"',"shape-rendering='auto'")).wq_replaceAll('visibility=""',"visibility='inherit'")).wq_replaceAll('text-anchor="undefined"',"text-anchor='start'"),WebSquare.util.isIEAllVersion(11)&&(b=(b=b.wq_replaceAll("&quot;","")).wq_replaceAll(location.href,"")),"zoomline"==r[a].options.chartType.toLowerCase()&&(b=b.wq_replaceAll('stroke-dasharray="-','stroke-dasharray="')),"pie3d"!=r[a].options.chartType.toLowerCase()&&"doughnut3d"!=r[a].options.chartType.toLowerCase()||(b=b.wq_replaceAll('font-family="15"','font-family="Verdana"'))),n+="<g transform='translate(0,"+g+")'>"+b+"</g>",g+=r[a].options.containerElement.offsetHeight}n="horizontal"==s.toLowerCase()?"<svg width='"+c+"' height='"+u+"' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+n+"</svg>":"<svg width='"+p+"' height='"+l+"' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+n+"</svg>";var v=encodeURI(n+"ExportType="+e+"ExportFileName="+o);d.v.download("engine/servlet/exportFusionChart.jsp",v,"post"),r=null}catch(t){h.w.printStackTrace(t,null,this)}},u.getRuntimeId=function(t,e){try{var i="";if(WebSquare.idToUUID[t]&&WebSquare.idCache[WebSquare.idToUUID[t]])i=t;else{var o=d.v._getGlobalVariable();if(o)for(var s=o.split(","),r=0;r<s.length;r++){if(t===s[r].wq_trim()){i=t;break}}}return i}catch(t){return h.w.printStackTrace(t,null,this),""}},u.serialize=function(t){var e={header:{ip:(t=t||{}).ip?t.ip:"",method:t.method?t.method:"HEAD",status:t.status?t.status:"-1",auth:t.auth?t.auth:"",sender:t.sender?t.sender:"",receiver:t.receiver?t.receiver:"",pageURL:WebSquare.w2xPath,pageName:t.pageName?t.pageName:"",extension:t.extension?t.extension:{},comps:{}},body:{}},i={header:!1,body:!1,validate:!1};switch(e.header.method){case"HEAD":i.header=!0,i.body=!0;break;case"HEADCOMP":i.header=this._serializeHeaderComps("top",window,e.header.comps),i.body=!0;break;case"HEADBODY":i.header=this._serializeHeaderComps("top",window,e.header.comps),i.body=this._serializeBody("top",window,e.body);break;default:return!1}return i.validate=this._serializeValidate(e),!!(i.validate&&i.header&&i.body)&&JSON.stringify(e)},u._serializeHeaderComps=function(t,e,i){
if("string"!=typeof t||arguments.length<=1)return!1;var o=e,s=o.WebSquare.DataCollection.comp;for(var r in i[t]={},s)i[t][r]=r;var a=o.WebSquare.idCache;for(var r in a){var n=a[r];switch(n.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:break;case o.WebSquare.uiplugin.iframe:this._serializeHeaderComps(n.id,o.document.getElementById(n.id).contentWindow,i[t]);break;default:n.options.serializable&&(i[t][n.id]=n.id)}}return!0},u._serializeBody=function(t,e,i){if("string"!=typeof t||arguments.length<=1)return!1;var o=e;i[t]=JSON.parse(o.WebSquare.DataCollection.api._getArrayEvalString());var s=o.WebSquare.idCache;for(var r in s){var a=s[r];switch(a.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:break;case o.WebSquare.uiplugin.iframe:this._serializeBody(a.id,o.document.getElementById(a.id).contentWindow,i[t]);break;default:a.options.serializable&&(i[t][a.id]=a.serialize())}}return!0},u._serializeValidate=function(t){return!0},u.parse=function(t){return JSON.parse(t)},u._restore=function(t,e,i){var o=i;if(o.WebSquare){var s=o.WebSquare.DataCollection.comp;for(var r in e){var a=s[r]||o.WebSquare.idCache[r]||o[r];if(a)switch(a.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:o.WebSquare.DataCollection.api._setArrayEvalString("{"+r+":"+JSON.stringify(e[r])+"}");break;case o.WebSquare.uiplugin.iframe:this._restore(a.id,e[a.id],o.document.getElementById(a.id).contentWindow);break;default:a.options&&a.options.serializable&&a.restore(e[r])}}}},u.restore=function(t,e){try{var i={};if("string"==typeof t)i=JSON.parse(t);else{if("object"!=typeof t)return!1;i=t}return this._restore("top",i.body.top,e||window.top),!0}catch(t){h.w.printStackTrace(t,null,this)}return!1},u.getFrameFromPoint=function(t){try{for(var e=JSON.parse(t),i=document.elementFromPoint(e.x,e.y),o=null;i&&"BODY"!==i.tagName;){if("DIV"==i.tagName&&WebSquare.xfControl.prototype.__hasClass(i,"w2wframe")){var s=WebSquare.util.getComponentById(i.getAttribute("id"));if(s&&s.options&&s.options.scope){o=s.uuid;break}}i=i.parentNode}return null==o&&WebSquare.strictModeFrame&&(o=WebSquare.strictModeFrame.uuid),o}catch(t){h.w.printStackTrace(t,null,this)}},u.getAbsolutePath=function(t){try{if(!t||"string"!=typeof t)return"";var e=document.createElement("a");e.setAttribute("href",t);var i=WebSquare.util._getAbsolutePath(e.href.toString());return e=null,i}catch(t){return""}},u._getAbsolutePath=function(t){try{var e=t.indexOf("?");return e<0&&(e=t.length),t.slice(0,e)}catch(t){return""}},u.getFrameByPath=function(t,e,i){try{var o;if("/"===(t=t.wq_trim()).charAt(0))o=WebSquare.util.getComponentById(t.slice(1));else{var s=t.split("/");o=WebSquare.util.getComponentById(e)||"";for(var r=0;r<s.length;r++){var a=s[r];""===a||"."===a||(".."===a?o=o.scope_obj||"":o&&o.options&&("wframe"===o.options.pluginName||"pageInherit"===o.options.pluginName)?o.options.scope&&(o=o.getObj(s[r])):o=WebSquare.util.getComponentById(s[r]))}}return i&&"component"===i.returnType?o:o.id}catch(t){h.w.printStackTrace(t)}},u.getComponentByPath=function(t,e){try{return WebSquare.util.getFrameByPath(t,e,{returnType:"component"})}catch(t){h.w.printStackTrace(t)}},u.getFocusedComponentId=function(t){try{for(var e=t||document.activeElement;e&&"BODY"!==e.tagName.toUpperCase();){var i=e.getAttribute("id")&&"idToUUID"in WebSquare&&WebSquare.idToUUID[e.getAttribute("id")]&&WebSquare.idCache[WebSquare.idToUUID[e.getAttribute("id")]],o=e.getAttribute("id")&&WebSquare.componentIdCache&&WebSquare.componentIdCache[e.getAttribute("id")],s=i||o;if(s&&s.getFocusedComponentId&&("function"==typeof s.getFocusedComponentId||"[object Function]"===s.getFocusedComponentId.toString()))return s.getFocusedComponentId();if(s)return s.id;e=e.parentNode}return""}catch(t){h.w.printStackTrace(t,null,this)}},u.arrayDiff=function(t,e,i){if(!this.isArray(e))return t.slice();for(var o=e.length,s=t.length,r=-1,a=[];++r<s;){
for(var n=t[r],l=!1,h=0;h<o;h++){var d=e[h];if(i&&i.call(null,n,d)){l=!0;break}if(n===d){l=!0;break}}!1===l&&a.push(n)}return a},u.scopingFuncBody=function(t,e,i,o){try{if(void 0!==o&&null!=o||(o={}),"string"!=typeof t)return!0===i?t:null;var s,r=WebSquare.util.getBoolean(d.v.getConfiguration("/WebSquare/wpack/@use"));if(e){var a=!0===r?"":"\n";s="scopeObj"===i?s="WebSquare.scope_obj="+e+".id;\n with("+e+".scope){\n var udc_obj = "+e+".id;\n"+t+" \nWebSquare.scope_obj=null;\n}":"WebSquare.scope_obj="+e+";"+a+" with(WebSquare.util.getComponentById('"+e+"').scope){"+a+" var udc_obj = "+e+";\n"+(!0===i?"":" var ret = ")+t+" \n WebSquare.scope_obj=null;"+(!0===i?"":"\n return ret;")+"\n}"}else{s=(a=!0===r?"\n":"")+(!0===i?"":"return ")+t+"\n"}return s}catch(t){h.w.printStackTrace(t,null,this)}},u.isNullReg=function(t){try{return t.source===/\/^[a-z0-9_-]{3,16}$\//gi.source||"/^[a-z0-9_-]{3,16}$/"===t.source}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.setScreenView=function(t){try{if(!WebSquare.util.isTop())return;void 0!==t&&null!=t||(t={});var e=parseInt(t.baseWidth,10),i=parseInt(t.baseHeight,10),o=parseFloat(t.maxRatio,10)||1e3,s=parseFloat(t.minRatio,10)||.001;if(o=Math.max(o,s),s=Math.min(s,s),"screen"===t.type){var r=(d.v.browserCheck.ipad||d.v.browserCheck.iphone||d.v.browserCheck.ipod)&&Math.floor(Math.abs(window.orientation/90))>=1&&window.orientation%90==0,a=r?window.screen.height:window.screen.width,n=r?window.screen.width:window.screen.height,l=a/e,c=n/i;if(!0===t.useRelativeScale)l=Math.min(Math.max(l,s),o),c=Math.min(Math.max(c,s),o),WebSquare.util._applyRelativeScreenView(l,c,e,i);else{var u=!0===t.allowScroll?Math.max(l,c):Math.min(l,c);if(1===(u=Math.min(Math.max(u,s),o)))WebSquare.util.clearScreenView();else{var p=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;document.documentElement.scrollHeight||document.body.scrollHeight;WebSquare.util._applyScreenView(u,p,g)}}}}catch(t){h.w.printStackTrace(t,null,this)}},u._applyScreenView=function(t,e,i){try{if(!WebSquare.util.isTop())return;var o="body {-webkit-transform : scale("+t+");-moz-transform : scale("+t+");-ms-transform : scale("+t+");-o-transform : scale("+t+");transform : scale("+t+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+e/t+"px;height : "+i/t+"px;}",s=document.getElementsByTagName("head")[0];l.d.fullViewClass=!0,l.d.fullViewed=!0,l.d.fullViewRatio=t;var r=null;d.v.browserCheck.ie?((r=document.createElement("style")).setAttribute("type","text/css"),r.styleSheet.cssText=o):(r=document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(o)),r.setAttribute("data-screenview","true"),s.appendChild(r)}catch(t){h.w.printStackTrace(t,null,this)}},u._applyRelativeScreenView=function(t,e,i,o){try{if(!WebSquare.util.isTop())return;var s="body {-webkit-transform : scale("+t+","+e+");-moz-transform : scale("+t+","+e+");-ms-transform : scale("+t+","+e+");-o-transform : scale("+t+","+e+");transform : scale("+t+","+e+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+i+"px;height : "+o+"px;}",r=document.getElementsByTagName("head")[0];l.d.fullViewClass=!0,l.d.fullViewed=!0,l.d.fullViewRatio=t;var a=null;d.v.browserCheck.ie?((a=document.createElement("style")).setAttribute("type","text/css"),a.styleSheet.cssText=s):(a=document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(s)),a.setAttribute("data-screenview","true"),r.appendChild(a)}catch(t){h.w.printStackTrace(t,null,this)}},u.clearScreenView=function(){try{if(!WebSquare.util.isTop()||!l.d.fullViewClass)return;for(var t=document.getElementsByTagName("style"),e=0;e<t.length;e++){var i=t[e];if("true"===i.getAttribute("data-screenview")){i.parentNode.removeChild(i);break}}l.d.fullViewClass=!1,l.d.fullViewed=!1,l.d.fullViewRatio=1}catch(t){h.w.printStackTrace(t,null,this)}},
u.getTop=function(){try{for(var t=self,e=0;e<1e3;e++)try{if(t.parent===t)break;if(void 0===t.parent.WebSquare||null==t.parent.WebSquare)break;t=t.parent}catch(t){break}return t}catch(t){return h.w.printStackTrace(t,null,this),self}},u.isTop=function(){try{return WebSquare.util.getTop()===self}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.isTouchDevice=function(){try{var t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)||function(t){return window.matchMedia&&window.matchMedia(t).matches}(["(",t.join("touch-enabled),("),"heartz",")"].join(""))}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.cloneObject=function(t,e){try{if("object"!=typeof t||null==t)return null;void 0!==e&&null!=e||(e={});var i=e.scope,o=e.exclude,s=!0===e.skipFunction,r=JSON.stringify(t,(function(t,e){return o&&!0===o[t]?void 0:null==e?e:e===window?"@wq_window":e===window.opener?"@wq_opener":e===window.parent?"@wq_parent":e===window.top?"@wq_top":"function"==typeof e?s?void 0:"@wq_function#"+e.toString():"object"==typeof e&&e.constructor===RegExp?"@wq_regExp#"+e.toString():e}));return JSON.parse(r,(function(t,e){try{if("string"!=typeof e||"@wq_"!==e.slice(0,4))return e;if("@wq_window"===e||"@wq_opener"===e||"@wq_parent"===e||"@wq_top"===e)return window[e.slice(4)];if("@wq_function#"===e.slice(0,13))return new Function(WebSquare.util.scopingFuncBody(e.slice(13),i))();if("@wq_regExp#"===e.slice(0,11))return new Function("return "+e.slice(11))()}catch(t){return e}}))}catch(t){return h.w.printStackTrace(t,null,this),null}},u._copyOptions=function(t){try{var e={};for(var i in t)e[i]=i instanceof Array?t[i].slice(0):t[i];return e.__copyOptions=!0,e}catch(t){return h.w.printStackTrace(t,null,this),null}},u.isHybrid=function(){try{return WebSquare.hybridApp}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.encodeParameter=(s=function(t,e){for(var i=-1,s=0;s<o.length;s++)if(o[s]==t){i=s;break}return i<0?t:o[(i+e)%o.length]},r=function(t,e){for(var i=0,o=(t=WebSquare.text.BASE64Encode(t)).length-1;o>=0&&"="==t[o];o--)i+=1;t=t.substring(0,t.length-i);var r="";for(o=0;o<t.length;o++)r=r.concat(s(t[o],Number(e)));return r},a=function(t,e){if(!t)return t;o||function(t){o=[];for(var e=[".","/","-","_","+"],i=0;i<26;i++)o.push(String.fromCharCode(i+65)),i<10?o.push(String.fromCharCode(i+48)):i>=t%8+12&&i<t%8+12+e.length&&o.push(e[i-(t%8+12)]),o.push(String.fromCharCode(i+97))}(e+100);for(var i="",s=0,a="";s<t.length;)"?"!=t[s]&&"&"!=t[s]&&"#"!=t[s]&&"="!=t[s]?a+=t[s]:(a.length>0&&(i+=r(a,e),a=""),i+=t[s]),s++;return a.length>0&&(i+=r(a,e)),i},function(t){var e=WebSquare.util.getEncodeParameterOption("key");e&&0!=e.length||(e=0),e=parseInt(e);try{return a(t,e)}catch(t){return""}}),u.decodeParameter=function(){var t,e=function(e,i){for(var o=-1,s=0;s<t.length;s++)if(t[s]==e){o=s;break}return o<0?e:((o=t.length-(i+t.length-o)%t.length)==t.length&&(o=0),t[o])},i=function(t,i){for(var o="",s=0;s<t.length;s++)o=o.concat(e(t[s],Number(i)));for(;o.length%4!=0;)o+="=";return o=WebSquare.text.BASE64Decode(o)},o=function(e,o){if(!e)return e;e=e.replace(" ","+"),t||function(e){t=[];for(var i=[".","/","-","_","+"],o=0;o<26;o++)t.push(String.fromCharCode(o+65)),o<10?t.push(String.fromCharCode(o+48)):o>=e%8+12&&o<e%8+12+i.length&&t.push(i[o-(e%8+12)]),t.push(String.fromCharCode(o+97))}(o+100);for(var s="",r=0,a="";r<e.length;){"?"!=e[r]&&"&"!=e[r]&&"#"!=e[r]&&"="!=e[r]?a+=e[r]:(a.length>0&&(s+=i(a,o),a=""),s+=e[r]),r++}return a.length>0&&(s+=i(a,o)),s};return function(t){var e=WebSquare.util.getEncodeParameterOption("key");e&&0!=e.length||(e=0),e=parseInt(e);try{return o(t,e)}catch(t){return""}}}(),u.isEncodeParameter=function(){try{return WebSquare.util.getBoolean(d.v.getConfiguration("/WebSquare/encodeParameter/@value"))||!1}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.getEncodeParameterOption=function(t){try{
if("pathName"==t)return d.v.getConfiguration("/WebSquare/encodeParameter/@pathName")||"";if("fallback"==t)return WebSquare.util.getBoolean(d.v.getConfiguration("/WebSquare/encodeParameter/@fallback"))||!1;if(WebSquare.util.isEncodeParameter()){if("value"==t)return WebSquare.util.getBoolean(d.v.getConfiguration("/WebSquare/encodeParameter/@value"))||!1;if("key"==t)return d.v.getConfiguration("/WebSquare/encodeParameter/@key")||"";if("onlyParam"==t)return WebSquare.util.getBoolean(d.v.getConfiguration("/WebSquare/encodeParameter/@onlyParam"))||!1}return!1}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.getMediaInfo=function(){try{var t;t="json"===WebSquare.WebSquaredoc.getType()?WebSquare.jsonUtil.getNodesByTagName(WebSquare.WebSquaredoc.getPageInfo(),"screen",WebSquare.core._XML_NAMESPACE.W2):WebSquare.xml.getElementsByTagName(WebSquare.WebSquaredoc.getPageInfo(),"screen",d.v._XML_NAMESPACE.W2);for(var e={currentScreen:u.getCurrentScreen(t),mediaInfo:[]},i=0;i<t.length;i++)e.mediaInfo[i]={},e.mediaInfo[i].name=WebSquare.Elem.api.getAttribute(t[i],"name"),e.mediaInfo[i].viewport=WebSquare.Elem.api.getAttribute(t[i],"viewport").split("x"),e.mediaInfo[i].pageSize=WebSquare.Elem.api.getAttribute(t[i],"pageSize").split("x");return e}catch(t){h.w.printStackTrace(t,null,this)}},u.getCurrentScreen=function(t){try{for(var e,i=Number(top.document.documentElement.clientWidth||top.document.body.clientWidth),o=null,s=e=9999,r=null,a=0;a<t.length;a++){var n=WebSquare.Elem.api.getAttribute(t[a],"viewport"),l=n.indexOf("x");-1!=l?s>(e=(o=Number(n.substring(0,l)))>=i?o:9999)&&(s=e,r=WebSquare.Elem.api.getAttribute(t[a],"name")):(e=9999,r=WebSquare.Elem.api.getAttribute(t[a],"name"))}return r}catch(t){h.w.printStackTrace(t,null,this)}},u._getDefaultProperties=function(t,e,i){try{if(!t)return;var o,s,r,a;WebSquare._defaultPropertiesComp||(WebSquare._defaultPropertiesComp=[]);var n={},l=t.split(".");l.length>3?(s=l.pop(),a=l.pop(),r=l.pop()):(a=l.pop(),r=l.pop().toLowerCase()),"dataList"==a||"dataMap"==a||"linkedDataList"==a||"aliasDataMap"==a||"aliasDataList"==a||"aliasLinkedDataList"==a?(r="dataCollection",n.type=a):n.pluginName=a;var c,u,p,g=e?e.split(","):[],m=i?i.split(","):[];if(g.length!==m.length)return;if(s)if("gridView"!=a&&"grid"!=a||"column"!=s)if("tableLayout"==a){u=n.pluginName+"_"+s;for(b=0;b<g.length;b++)n[g[b]]=m[b],u+="_"+g[b]+"_"+m[b];n.pluginName="group"}else if("accordion"==a){if("panels"==s){o=this.initPanel(this.panelInfoArr[b]),u="accordion_panels";for(b=0;b<g.length;b++)n[g[b]]=m[b],u+="_"+g[b]+"_"+m[b];n.pluginName="panels"}}else{if("dataList"!=a||"column"!=s)return null;u="dataList_column",p="col";for(b=0;b<g.length;b++)n[g[b]]=m[b],u+="_"+g[b]+"_"+m[b],p+="_"+g[b]+"_"+m[b];n.columnInfo=[{id:p}]}else{u=n.pluginName+"_"+s,p="col";for(var f="",b=0;b<g.length;b++)n[g[b]]=m[b],u+="_"+g[b]+"_"+m[b],p+="_"+g[b]+"_"+m[b],f+=" "+g[b]+'="'+m[b]+'"';f+=' id="'+p+'"';var y="";y+="<w2:"+n.pluginName+' xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" id="'+u+'">',y+='<w2:header style="">',y+='<w2:row style="">',y+="<w2:column></w2:column>",y+="</w2:row>",y+="</w2:header>",y+='<w2:gBody style="">',y+='<w2:row style="">',y+="<w2:column"+f+"></w2:column>",y+="</w2:row>",y+="</w2:gBody>",y+="</w2:"+n.pluginName+">",c=(c=WebSquare.xml.parse(y)).documentElement}else{u=n.pluginName||n.type;for(b=0;b<g.length;b++)n[g[b]]=m[b],u+="_"+g[b]+"_"+m[b];"tableLayout"==n.pluginName&&(n.pluginName="group")}if(WebSquare._defaultPropertiesComp.indexOf(u)>-1)return"column"==s&&p?"dataCollection"==r?o.getCellInfo(p).options:d.v.getComponentById(u).cellInfoHash[p].options:"Submission"==a?d.v.getComponentById(u):d.v.getComponentById(u).options;var v=null;if("dataCollection"==r){if(n.id=u,n.option={},WebSquare.DataCollection.api.create(n),o=d.v.getComponentById(u))return WebSquare._defaultPropertiesComp.push(u),
"column"==s?o.getCellInfo(p).options:o.options}else if("tag"==a)o=new WebSquare.tag(u,null,{});else{if("Submission"==a)return WebSquare.ModelUtil.createSubmission({id:u}),(o=d.v.getComponentById(u))&&WebSquare._defaultPropertiesComp.push(u),o;o=WebSquare.controlFactory.createControl(u,n,c,null,!0)}return o&&(o.appendTo(WebSquare.getBody()),o.activate(),o.onComplete(),WebSquare._defaultPropertiesComp.push(u),v="column"==s&&p?o.cellInfoHash[p].options:o.options),v}catch(t){return h.w.printStackTrace(t,null,this),null}},u.loadLocale=function(t){try{requires(t),l.d.importCache[t]}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.deleteLocale=function(t){try{l.d.importCache[t]="",WebSquare.WebSquareLang={}}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.getEscape=function(t,e){try{var i=e?d.v.getConfig(e):"";t=t||i.escape;var o=d.v.getConfiguration("escape");return t||o}catch(t){h.w.printStackTrace(t,null,this)}},u.updateSuffix=function(t){try{var e=d.v.getXMLHTTPObject(),i=WebSquare.baseURI+"suffix.txt?postfix="+(new Date).getTime()+1e4*Math.random();e.open("GET",i,!0),e.onreadystatechange=function(){u.updateSuffixCallback(e,t)},e.send(null)}catch(t){h.w.printStackTrace(t,null,this)}},u.updateSuffixCallback=function(t,e){try{if(4==t.readyState){if(t.status&&(200>t.status||300<=t.status)||0===t.status);else t.responseText.wq_trim()!=n.x.suffix&&(n.x.suffix=t.responseText.wq_trim(),c.k.printLog("suffix.txt updated."));if(e.callback&&""!=e.callback){var i=u.getGlobalFunction(e.callback,e.scopeId);i&&i()}t.onreadystatechange=function(){},t=null}}catch(t){h.w.printStackTrace(t,null,this)}},u.isHTML5=function(){try{if(null===document.doctype)return!1;var t=document.doctype;return"<!DOCTYPE html>"==="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC"'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"}catch(t){h.w.printStackTrace(t,null,this)}},u.setLanguagePack=async function(t){var e=d.v.getConfiguration("/WebSquare/languagePack/url[@lang='"+t+"']/@value");return e=l.d.getEngineUri(e),l.d.writeAsync(e)},u.getStyleFromCssStr=function(t,e){try{var i=null;if(!e)return i;for(var o=t.split(" "),s=0;s<o.length;s++)for(var r=0;r<document.styleSheets.length;r++){var a=document.styleSheets[r];try{a.cssRules}catch(t){continue}for(var n=0;a.cssRules&&n<a.cssRules.length;n++){var l=a.cssRules[n],d=l.selectorText,c=d.lastIndexOf(".");if(-1!=c)if(d.slice(c)=="."+o[s]){i||(i={});for(var u=0;u<e.length;u++){var p=e[u];""!=l.style[p]&&(i[p]=l.style[p])}r=document.styleSheets.length;break}}}return i}catch(t){h.w.printStackTrace(t,null,this)}},u._getChromeVersion=function(){try{var t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return t?parseInt(t[2],10):void 0}catch(t){h.w.printStackTrace(t,null,this)}},u.getDataPrefix=function(t){try{return 1==n.x.dataPrefix&&(t="data-"+t),t}catch(t){h.w.printStackTrace(t,null,this)}},function(t){var e={},i={},o=/^[^?#]*\//.exec(location.href)[0],s=/^[\w-]+\:\/\/\/?[^\/]+/.exec(o)[0],r=document.createElement("script"),a="boolean"==typeof r.preload||r.readyState&&"uninitialized"==r.readyState,n=!a&&!0===r.async||WebSquare.util.isIE(10)&&"async"in r,u=a&&!n;function g(t,e){var i=/^\w+\:\/\//;return/^\/\/\/?/.test(t)?t=location.protocol+t:i.test(t)||"/"==t.charAt(0)||(t=(e||"")+t),i.test(t)?t:("/"==t.charAt(0)?s:o)+t}function m(t){v(t)&&!t._done&&(t(),t._done=1)}function f(t){var e=t.split("/"),i=e[e.length-1],o=i.indexOf("?");return-1!=o?i.substring(0,o):i}function b(t){var e={};if("object"==typeof t)for(var o in t)t[o]&&(e={name:o,url:t[o]});else e={name:f(t),url:t};var s=i[e.url];if(s)return s;for(var t in i)if(i[t]==e.url)return i[t];return i[e.url]=e,e}function y(t,e){if(t){"object"==typeof t&&(t=[].slice.call(t));for(var i=0;i<t.length;i++)e.call(t,t[i],i)}}function v(t){return"[object Function]"==Object.prototype.toString.call(t)}function w(t){for(var e in t=t||i)if(3!=t[e].state)return!1;return!0}function S(t,e){t.state||(t.state=0,t.onpreload=[],_({
src:t.url,type:"cache"},(function(){!function(t){t.state=1,y(t.onpreload,(function(t){t.call()}))}(t)})))}function C(t,i){return void 0!==WebSquare.scriptCachedList[t.url]&&null!==WebSquare.scriptCachedList[t.url]||("false"===d.v.getConfiguration("/WebSquare/spa/scriptCache/@value")?WebSquare.scriptCachedList[t.url]=0:WebSquare.scriptCachedList[t.url]=1),3==t.state&&WebSquare.scriptCachedList[t.url]>1?(WebSquare.scriptCachedList[t.url]++,i?i():void 0):2==t.state?WebSquare.util.ready(t.url,i,t.name):0==t.state?t.onpreload.push((function(){C(t,i)})):(t.state=2,"false"!==d.v.getConfiguration("/WebSquare/spa/scriptCache/@value")&&WebSquare.scriptCachedList[t.url]++,void _(t.url,(function(){t.state=3,i&&i(),y(e[t.url],(function(t){m(t)})),w()&&y(e.ALL,(function(t){m(t)}))})))}function _(t,e){try{var i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=p.createElement("script");o.type="text/"+(t.type||"javascript");var s=d.v.getConfiguration("/WebSquare/script/@encoding");o.charset=s||"utf-8";var r=d.v.getConfiguration("/WebSquare/script/@postfix"),a=l.d.getEngineUri(t.src||t);"environment"===r&&(a=l.d.getResourcePostfix(t.src||t)),o.src=a,o.async=!1,o.setAttribute("data-wqExternal","true"),WebSquare.util.isIE(10)?(o.onload=function(){e.done||(o.onload=null,o=void 0,e(),e.done=!0)},o.onerror=function(){e(),e.done=!0}):o.onreadystatechange=o.onload=function(){var t=o.readyState;e.done||t&&!/loaded|complete/.test(t)||(o.onload=o.onreadystatechange=null,o=void 0,e(),e.done=!0)},WebSquare.util.isIE()||(o.onerror=function(){e(),e.done=!0}),i.appendChild(o),i=null}catch(t){h.w.printStackTrace(t,null,this)}}t.ready=function(t,o,s){v(s)&&(o=s,t="ALL");var r=i[t];if(r&&3==r.state||"ALL"==t&&w())return m(o),WebSquare.util;var a=e[t];return a?a.push(o):a=e[t]=[o],WebSquare.util},t.js=function(){if(n){c.k.printLog("[WebSquare.util.js]script loading[script_ordered_async]");var t=(a=arguments)[a.length-1],e={},i=-1;v(t)||(t=null),y(a,(function(o,s){o!=t&&(o=b(o),e[o.url]||i++,e[o.url]=o)}));var o=0;for(var r in e)!function(e,o){C(e,t&&o==i?function(){m(t)}:null)}(e[r],o),o++;return WebSquare.util}if(u){c.k.printLog("[WebSquare.util.js]script loading[script_cache]");var a=arguments,h=[];for(e={},o=0;o<a.length;o++)!function(t){v(t)?h.push(t):(e[t]||h.push(t),e[t]=t)}(a[o]);a=h;var d=[].slice.call(a,1),p=d[0];return p?(y(d,(function(t){v(t)||S(b(t))})),C(b(a[0]),v(p)?p:function(){WebSquare.util.js.apply(null,d)})):C(b(a[0])),WebSquare.util}c.k.printLog("[WebSquare.util.js]script loading[XHR]");t=(a=arguments)[a.length-1],e={},i=-1;v(t)||(t=null),y(a,(function(o,s){o!=t&&(o=b(o),e[o.url]||i++,e[o.url]=o)}));o=0;for(var r in e)!function(e,o){var r=g(e.url,"");0==r.indexOf(s)?l.d.globalEval(l.d.loadUri(r)):C(e,null),t&&o==i&&m(t)}(e[r],o),o++;return WebSquare.util}}(u)},1577:(t,e,i)=>{i.d(e,{s:()=>r,z:()=>a});var o=i(2981),s=i(2085),r={},a=function(){};a.prototype.validate=function(){return!0},a.prototype.setMandatory=function(t){this.validator&&(0==t?this.validator.removeCommand(new r.mandatoryCommand(this.options.mandatory)):this.validator.addCommand(new r.mandatoryCommand(t)),this.onPropertyChange("mandatory",t)),this.options.mandatory=t},a.prototype.getMandatory=function(){return this.options.mandatory},a.prototype.setMinLength=function(t){this.validator&&(this.validator.removeCommand(new r.minLengthCommand(this.options.minLength)),this.validator.addCommand(new r.minLengthCommand(t))),this.options.minlength=t},a.prototype.getMinLength=function(){return this.options.minlength},a.prototype.setMaxLength=function(t){"float"!=this.options.dataType&&"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType?(""===t||-1==t?(this.validator&&this.validator.removeCommand(new r.maxLengthCommand(this.options.maxLength,this.options.useMaxLength)),this.options.maxlength=t,
this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&this.render.removeAttribute("maxLength")):(this.validator&&(this.validator.removeCommand(new r.maxLengthCommand(this.options.maxLength,this.options.useMaxLength)),this.validator.addCommand(new r.maxLengthCommand(t,this.options.useMaxLength))),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&(this.render.maxLength=t)),this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&(""===t||-1==t?this.render.removeAttribute("maxlength"):this.render.maxLength=t)):this.setFloatMaxLength(t.toString(),this.options.decimalDelimiter,this.options.delimiter)},a.prototype.getMaxLength=function(){return"float"===this.options.dataType||"true"===this.options.floatNumber?this.floatMaxlength:this.options.maxlength},a.prototype.setFloatMaxLength=function(t,e,i){""===t||-1==t?(this.validator&&this.validator.removeCommand(new r.maxFloatLengthCommand(this.options.maxLength)),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&this.render.removeAttribute("maxLength")):(this.validator&&(this.validator.removeCommand(new r.maxFloatLengthCommand(this.options.maxLength)),this.validator.addCommand(new r.maxFloatLengthCommand(t,e,i))),this.floatMaxlength=t,this.options.maxlength="-1")},a.prototype.setMinByteLength=function(t){this.validator&&(this.validator.removeCommand(new r.minByteLengthCommand(this.options.minByteLength)),this.validator.addCommand(new r.minByteLengthCommand(t))),this.options.minByteLength=t},a.prototype.getMinByteLength=function(){return this.options.minByteLength},a.prototype.setMaxByteLength=function(t){this.validator&&(this.validator.removeCommand(new r.maxByteLengthCommand(this.options.maxByteLength)),this.validator.addCommand(new r.maxByteLengthCommand(t))),this.options.maxByteLength=t},a.prototype.getMaxByteLength=function(){return this.options.maxByteLength},a.prototype.getAllowChar=function(){return this.options.allowChar},a.prototype.setIgnoreChar=function(t){this.options.ignoreChar=t},a.prototype.getIgnoreChar=function(){return this.options.ignoreChar},a.prototype.getDisplayMessage=function(){return this.options.displaymessage},a.prototype.getInvalidMessage=function(){return this.options.invalidMessage},r.validateCommand=function(){},r.validateCommand.prototype.executeValidate=function(t){return alert("you should override 'executeValidate'"),!0},r.validateCommand.prototype.executeValidateString=function(t){return alert("you should override 'executeValidateString'"),t},r.validateCommand.prototype.executeValidateKeyPress=function(t,e,i){return alert("you should override 'executeValidateKeyPress'"),!0},r.validateCommand.prototype.executeValidateKeyDown=function(t,e,i){return alert("you should override 'executeValidateKeyPress'"),!0},r.validateCommand.prototype.executeValidateKeyInput=function(t,e,i){return alert("you should override 'executeValidateKeyInput'"),!0},r.validateCommand.prototype.executeInvalidMessage=function(){return alert("you should override 'executeInvalidMessage'"),"invalidMessage"},r.validateCommand.prototype.getType=function(){return alert("you should override 'getType'"),""},r.validateCommand.prototype.getValue=function(){return alert("you should override 'getValue'"),""},r.validateCommand.prototype.getDetail=function(){return alert("you should override 'getDetail'"),""},r.invalidObject=function(t,e){try{this.invalidCommand=e,this.callerId=t}catch(t){s.w.printStackTrace(t)}},r.invalidObject.prototype.getCaller=function(){var t=null;try{t=WebSquare.core.getComponentById(this.callerId)}catch(t){}return t},r.invalidObject.prototype.getType=function(){return this.invalidCommand?this.invalidCommand.getType():""},r.invalidObject.prototype.getDetail=function(){return this.invalidCommand?this.invalidCommand.getDetail():""},r.invalidObject.prototype.getValue=function(){
return this.invalidCommand?this.invalidCommand.getValue():""},r.invalidObject.prototype.getPrefix=function(){return null},r.validateInvoker=function(t,e){try{if(this.commandList=[],e=e||{},this.invalidMessage=e.invalidMessage||"",this.displaymessage=e.displaymessage||!1,this.invalidMessageFunc=e.invalidMessageFunc||null,this.scopeId=e._scope_obj_uuid&&WebSquare.idCache[e._scope_obj_uuid]&&WebSquare.idCache[e._scope_obj_uuid].id,this.invalidMessageFunc&&(this.invalidMessageFunc.indexOf("(")<0&&(this.invalidMessageFunc+="()"),this.invalidMsgFuncName=this.invalidMessageFunc.substring(0,this.invalidMessageFunc.indexOf("(")),this.tmpFunc=this.invalidMessageFunc.replace(this.invalidMsgFuncName,"_validator_.doValidate")),this.callerId=t,void 0!==e.mandatory&&1==e.mandatory&&this.addCommand(new r.mandatoryCommand(e.mandatory)),void 0!==e.allowChar&&""!=e.allowChar&&this.addCommand(new r.allowCharCommand(e.allowChar)),void 0!==e.ignoreChar&&""!=e.ignoreChar&&this.addCommand(new r.ignoreCharCommand(e.ignoreChar)),void 0!==e.maxlength&&-1!=e.maxlength)if(e.useMaxLength&&"number"===e.dataType){var i=[e.delimeter||e.delimiter||","].join("");this.addCommand(new r.ignoreCharCommand(i)),this.addCommand(new r.maxLengthCommand(e.maxlength,e.useMaxLength))}else"float"===e.datatype?this.addCommand(new r.maxFloatLengthCommand(e.maxlength)):this.addCommand(new r.maxLengthCommand(e.maxlength));void 0!==e.minlength&&-1!=e.minlength&&this.addCommand(new r.minLengthCommand(e.minlength)),void 0!==e.maxByteLength&&-1!=e.maxByteLength&&this.addCommand(new r.maxByteLengthCommand(e.maxByteLength,e.byteCheckIgnoreChar)),void 0!==e.minByteLength&&-1!=e.minByteLength&&this.addCommand(new r.minByteLengthCommand(e.minByteLength)),void 0!==e.validator&&""!=e.validator&&this.addCommand(new r.commandAdapter(e.validator,this.scopeId))}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.addCommand=function(t,e){try{!0===e?this.commandList.unshift(t):this.commandList.push(t)}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.removeCommand=function(t){try{for(var e=new Array,i=0;i<this.commandList.length;i++)this.commandList[i].getType()!=t.getType()&&e.push(this.commandList[i]);this.commandList=e}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.clearCommand=function(){try{this.commandList=null,this.commandList=[]}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.applyPriority=function(){},r.validateInvoker.prototype.validate=function(t){try{var e=!0,i="";this.obfuscator_invalidObject=null;for(var o=0;o<this.commandList.length;o++)if(!this.commandList[o].executeValidate(t)){e=!1,i+=this.commandList[o].executeInvalidMessage()+"\n",this.obfuscator_invalidObject=new r.invalidObject(this.callerId,this.commandList[o]);break}if(0==e){if(""!=this.invalidMessage&&null!=this.invalidMessage&&(i=this.invalidMessage),this.invalidMessageFunc&&this.obfuscator_invalidObject)try{i=new Function("_validator_","return "+this.tmpFunc)(this)}catch(t){i=""}if(1==this.displaymessage&&i)try{alert(i)}catch(t){}}return e}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.doValidate=function(...t){var e=WebSquare.util.getGlobalFunction(this.invalidMsgFuncName,this.scopeId);if("function"==typeof e)return e.apply(this.obfuscator_invalidObject,t)},r.validateInvoker.prototype.validateString=function(t){try{this.applyPriority();for(var e=0;e<this.commandList.length;e++)t=this.callerId?this.commandList[e].executeValidateString(t,this.callerId):this.commandList[e].executeValidateString(t);return t}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.validateKeyPress=function(t,e,i,o){try{if(!(1!=i.metaKey&&1!=i.ctrlKey||67!=i.charCode&&99!=i.charCode&&86!=i.charCode&&118!=i.charCode))return!0;for(var a=!0,n=0;n<this.commandList.length;n++)if(!this.commandList[n].executeValidateKeyPress(t,e,i,o)){a=!1,this.obfuscator_invalidObject=new r.invalidObject(this.callerId,this.commandList[n]);break}return a}catch(i){s.w.printStackTrace(i)}},
r.validateInvoker.prototype.validateKeyDown=function(t,e,i){try{if(!(1!=i.metaKey&&1!=i.ctrlKey||67!=i.charCode&&99!=i.charCode&&86!=i.charCode&&118!=i.charCode))return!0;for(var o=!0,r=0;r<this.commandList.length;r++)if(!this.commandList[r].executeValidateKeyDown(t,e,i)){o=!1;break}return o}catch(i){s.w.printStackTrace(i)}},r.validateInvoker.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.validateInvoker.prototype.validateKeyInput=function(t,e,i){try{for(var o=!0,r=e,a=0;a<this.commandList.length;a++){var n=this.commandList[a].executeValidateKeyInput(t,e,i);if("string"==typeof n?r=n:o=n,!o)break}return{str:r,valid:o}}catch(i){s.w.printStackTrace(i)}},r.mandatoryCommand=function(t){this.mandatory=t},o.x.extend(r.mandatoryCommand.prototype,r.validateCommand.prototype),r.mandatoryCommand.prototype.getType=function(){return"mandatory"},r.mandatoryCommand.prototype.getDetail=function(){return{}},r.mandatoryCommand.prototype.getValue=function(){return""},r.mandatoryCommand.prototype.executeValidate=function(t){try{return null!=t&&""!=t}catch(t){s.w.printStackTrace(t)}},r.mandatoryCommand.prototype.executeValidateString=function(t){return t},r.mandatoryCommand.prototype.executeValidateKeyPress=function(t){return!0},r.mandatoryCommand.prototype.executeValidateKeyDown=function(t){return!0},r.mandatoryCommand.prototype.executeValidateKeyInput=function(t){return!0},r.mandatoryCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_mandatory")},r.maxLengthCommand=function(t,e){this.maxLength=parseInt(t,10)||0,this.useMaxLength=!!e},o.x.extend(r.maxLengthCommand.prototype,r.validateCommand.prototype),r.maxLengthCommand.prototype.getType=function(){return"maxLength"},r.maxLengthCommand.prototype.getDetail=function(){return{}},r.maxLengthCommand.prototype.getValue=function(){return this.maxLength},r.maxLengthCommand.prototype.executeValidate=function(t){if(this.useMaxLength)return"-"!==t.charAt(0)&&"+"!==t.charAt(0)||(t=t.substr(1)),!(t.length>this.maxLength);var e=!0;return t.length>this.maxLength&&(e=!1),e},r.maxLengthCommand.prototype.executeValidateString=function(t){try{if(this.useMaxLength){var e="";return"-"!==t.charAt(0)&&"+"!==t.charAt(0)||(e=t.charAt(0),t=t.substr(1)),t.length>this.maxLength?e+t.substr(0,this.maxLength):e+t}return t&&t.length>this.maxLength&&(t=t.substr(0,this.maxLength)),t}catch(t){s.w.printStackTrace(t)}},r.maxLengthCommand.prototype.executeValidateKeyPress=function(t,e,i,o){try{if(this.useMaxLength){var r=WebSquare.text.getSelection(t),a=i.keyCode||i.charCode,n=a-48<0||a-48>9?i.key:a-48+"";e=e.substr(0,r.start)+n+e.substr(r.end);return this.executeValidate(e)}return t.maxLength=o>0?o:this.maxLength,!0}catch(i){s.w.printStackTrace(i)}},r.maxLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.maxLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxLength",this.maxLength)},r.minLengthCommand=function(t){this.minLength=t||0},o.x.extend(r.minLengthCommand.prototype,r.validateCommand.prototype),r.minLengthCommand.prototype.getType=function(){return"minLength"},r.minLengthCommand.prototype.getDetail=function(){return{}},r.minLengthCommand.prototype.getValue=function(){return this.minLength},r.minLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return t.length<this.minLength&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.minLengthCommand.prototype.executeValidateString=function(t){return t},r.minLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.minLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.minLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.minLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_minLength",this.minLength)},r.maxFloatLengthCommand=function(t,e,i){
this.decimalDelimiter=e||".",this.delimiter=i||",";var o=t.split(".")[0]||"*",s=t.split(".")[1]||"0";this.currentIntegerCount=0,this.currentFractionCount=0,this.integerMaxLength="*"!==o&&""!==o&&"-1"!==o&&o?parseInt(o,10):1/0,this.fractionMaxLength="*"!==s&&""!==s&&"-1"!==s&&s?parseInt(s,10):1/0},o.x.extend(r.maxFloatLengthCommand.prototype,r.validateCommand.prototype),r.maxFloatLengthCommand.prototype.getType=function(){return"maxFloatLength"},r.maxFloatLengthCommand.prototype.getDetail=function(){var t="init",e="올바르지 않은 입력입니다.",i=0;return-1!=this.integerMaxLength&&this.currentIntegerCount>this.integerMaxLength?(i=1,e="정수부 maxlength 초과",t="integer",this.currentIntegerCount=0):-1!=this.fractionMaxLength&&this.currentFractionCount>this.fractionMaxLength?(i=2,e="소수부 maxlength 초과",t="fraction",this.currentFractionCount=0):(t="init",i=3),{currentState:t,code:i,message:e}},r.maxFloatLengthCommand.prototype.getValue=function(){var t=this.integerMaxLength===1/0?"*":this.integerMaxLength,e=this.fractionMaxLength===1/0?"*":this.fractionMaxLength;return t+this.decimalDelimiter+e},r.maxFloatLengthCommand.prototype.executeValidate=function(t){var e=t.charAt(0)||t[0];"+"!==e&&"-"!==e||(t=t.split(e).join(""));var i=t.split(this.decimalDelimiter);if(2!==i.length||i[1]||(i=[i[0]]),1==i.length){if((o=i[0].wq_trim()).length>this.integerMaxLength)return this.currentIntegerCount=o.length,!1}else{if(2!=i.length)return!1;var o=i[0].wq_trim(),s=i[1].wq_trim();if(o.length>this.integerMaxLength||s.length>this.fractionMaxLength)return this.currentIntegerCount=o.length,this.currentFractionCount=s.length,!1}return!0},r.maxFloatLengthCommand.prototype.executeValidateString=function(t){try{var e="",i=t.charAt(0)||t[0];"+"!==i&&"-"!==i||(e=i,t=t.split(i).join(""));var o=t.split(this.decimalDelimiter);if(2!==o.length||o[1]||(o=[o[0]]),1==o.length)(r=o[0].wq_trim()).length>this.integerMaxLength&&(t=t.substr(0,this.integerMaxLength));else if(o.length>1){var r=o[0].wq_trim(),a=o[1].wq_trim();r.length>this.integerMaxLength&&(r=r.substr(0,this.integerMaxLength)),a.length>this.fractionMaxLength&&(a=a.substr(0,this.fractionMaxLength)),t=r+this.decimalDelimiter+a}return e+t}catch(t){s.w.printStackTrace(t)}},r.maxFloatLengthCommand.prototype.executeValidateKeyPress=function(t,e,i,o){if(WebSquare.util.isFF()&&0===i.charCode)return this.executeValidate(e.split(this.delimiter).join(""));e=t.value;var s=WebSquare.text.getSelection(t),r=i.keyCode||i.charCode,a=r-48<0||r-48>9?String.fromCharCode(r):r-48+"";a=96<=r&&r<=105?r-96+"":a,a=110==r||190==r?".":a,a=i.metaKey||i.ctrlKey||46!=r&&110!=r&&190!=r?a:".";var n=(e=e.substr(0,s.start)+a+e.substr(s.end)).split(this.delimiter).join("");return this.executeValidate(n)},r.maxFloatLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){var o=i.keyCode||i.charCode,s=t.value.split(this.delimiter).join("");return!!(i.shiftKey&&187==o||189==o||(i.metaKey||i.ctrlKey)&&65==o||(i.metaKey||i.ctrlKey)&&67==o||(i.metaKey||i.ctrlKey)&&86==o||(i.metaKey||i.ctrlKey)&&88==o||(i.metaKey||i.ctrlKey)&&90==o||o>=33&&o<=40||107==o||109==o||(110===o||190===o||173===o)&&"."===this.decimalDelimiter||8==o||13==o||12==o||144==o||9==o||46==o||45==o)||this.executeValidate(s)},r.maxFloatLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxFloatLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxFloatLength",this.integerMaxLength,this.fractionMaxLength)},r.maxByteLengthCommand=function(t,e){this.maxByteLength=t||0,this.byteCheckIgnoreChar=e||""},o.x.extend(r.maxByteLengthCommand.prototype,r.validateCommand.prototype),r.maxByteLengthCommand.prototype.getType=function(){return"maxByteLength"},r.maxByteLengthCommand.prototype.getDetail=function(){return{}},r.maxByteLengthCommand.prototype.getValue=function(){return this.maxByteLength},r.maxByteLengthCommand.prototype.executeValidate=function(t){try{var e=!0
;return WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar)>this.maxByteLength&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.maxByteLengthCommand.prototype.executeValidateString=function(t){try{for(var e=WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar);t.length>0&&e>this.maxByteLength;)t=t.substr(0,t.length-1),e=WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar);return t}catch(t){s.w.printStackTrace(t)}},r.maxByteLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxByteLength",this.maxByteLength)},r.minByteLengthCommand=function(t){this.minByteLength=t||0},o.x.extend(r.minByteLengthCommand.prototype,r.validateCommand.prototype),r.minByteLengthCommand.prototype.getType=function(){return"minByteLength"},r.minByteLengthCommand.prototype.getDetail=function(){return{}},r.minByteLengthCommand.prototype.getValue=function(){return this.minByteLength},r.minByteLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return WebSquare.util.getStringByteSize(t)<this.minByteLength&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.minByteLengthCommand.prototype.executeValidateString=function(t){return t},r.minByteLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_minByteLength",this.minByteLength)},r.allowCharCommand=function(t){this.allowChar=t,this.regExp=new RegExp("["+t+"]","g")},o.x.extend(r.allowCharCommand.prototype,r.validateCommand.prototype),r.allowCharCommand.prototype.getType=function(){return"allowChar"},r.allowCharCommand.prototype.getDetail=function(){return{}},r.allowCharCommand.prototype.getValue=function(){return this.allowChar},r.allowCharCommand.prototype.executeValidate=function(t){try{var e=!0;return""!=t&&(t.match(this.regExp)||(e=!1)),e}catch(t){s.w.printStackTrace(t)}},r.allowCharCommand.prototype.executeValidateString=function(t){try{var e=t.match(this.regExp);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.allowCharCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode;String.fromCharCode(r).match(this.regExp)||(o=!1),WebSquare.util.isFF()&&0==i.charCode&&(o=!0),WebSquare.util.isOpera()&&WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[r]&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.allowCharCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.allowCharCommand.prototype.executeValidateKeyInput=function(t,e,i){for(var o,s=[];null!==(o=this.regExp.exec(e));)s.push(o[0]);return s.join("")},r.allowCharCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_allowChar",this.allowChar)},r.ignoreCharCommand=function(t){this.ignoreChar=t,this.regExp=new RegExp("["+t+"]","g")},o.x.extend(r.ignoreCharCommand.prototype,r.validateCommand.prototype),r.ignoreCharCommand.prototype.getType=function(){return"ignoreChar"},r.ignoreCharCommand.prototype.getDetail=function(){return{}},r.ignoreCharCommand.prototype.getValue=function(){return this.ignoreChar},r.ignoreCharCommand.prototype.executeValidate=function(t){try{var e=!0;return""!=t&&t.match(this.regExp)&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.ignoreCharCommand.prototype.executeValidateString=function(t){try{return t=t.replace(this.regExp,"")}catch(t){s.w.printStackTrace(t)}},r.ignoreCharCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){
var r=i.charCode?i.charCode:i.keyCode;String.fromCharCode(r).match(this.regExp)&&(o=!1)}return o}catch(i){s.w.printStackTrace(i)}},r.ignoreCharCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.ignoreCharCommand.prototype.executeValidateKeyInput=function(t,e,i){try{return e=e.replace(this.regExp,"")}catch(i){s.w.printStackTrace(i)}},r.ignoreCharCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_ignoreChar",this.ignoreChar)},r.numberCommand=function(t,e){t||(t=","),e||(e="."),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.numberCommand.prototype,r.validateCommand.prototype),r.numberCommand.prototype.getType=function(){return"number"},r.numberCommand.prototype.getDetail=function(){return{}},r.numberCommand.prototype.getValue=function(){return""},r.numberCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.numberCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\.]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.numberCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode,a=String.fromCharCode(r),n=WebSquare.text.getSelection(t),l=e.substr(0,n.start)+a+e.substr(n.end),h=l.match(this.pattern);o=!(!h||h+""!=l),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[r])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.numberCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.numberCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.numberCommand.prototype.executeInvalidMessage=function(){return""},r.digitCommand=function(t,e){t||(t=","),e||(e="."),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.digitCommand.prototype,r.validateCommand.prototype),r.digitCommand.prototype.getType=function(){return"digit"},r.digitCommand.prototype.getDetail=function(){return{}},r.digitCommand.prototype.getValue=function(){return""},r.digitCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.digitCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.digitCommand.prototype.executeValidateString=function(t){try{var e="";"+"!==t.charAt(0)&&"-"!==t.charAt(0)||(e=t.charAt(0),t=t.substr(1));var i=t.match(/[^0]+[0-9]*/g);if(null!=i){var o="";null!=t.match(/^0+[^0-9]/)&&(o="0"),i=o+i.join("")}else i=""!==t?"0":"";return t=e+i}catch(t){s.w.printStackTrace(t)}},r.digitCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.digitCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.digitCommand.prototype.executeInvalidMessage=function(){return""},r.floatCommand=function(t,e,i){this.currentState="init",this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*$"),this.numberPattern=new RegExp("[0-9\\+\\-\\"+e+"]+","g"),this.delimiter=t||",",this.decimalDelimiter=e||".",this.applyFormat=i||"all"},o.x.extend(r.floatCommand.prototype,r.validateCommand.prototype),r.floatCommand.prototype.getType=function(){return"float"},r.floatCommand.prototype.getDetail=function(){return"error"===this.currentState?{currentState:"init",code:3,message:"올바르지 않은 입력입니다."}:{}},r.floatCommand.prototype.getValue=function(){return""},r.floatCommand.prototype.executeValidate=function(t){try{return""===t||""!==this.executeValidateString(t)}catch(t){s.w.printStackTrace(t)}return!1},r.floatCommand.prototype.executeValidateString=function(t){try{this.currentState="init";var e=(t=t.split(this.delimiter).join("")).split(this.decimalDelimiter).join("."),i=this.pattern.test(t),o=parseFloat(e);if(!i||"number"!=typeof o||t[t.length-1]===this.decimalDelimiter){this.currentState="error";var s=t.match(this.numberPattern);return s?s.join(""):""}return t}catch(t){}return""},r.floatCommand.prototype.executeValidateKeyPress=function(t,e,i){return this.executeValidate(e)
},r.floatCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_float")},r.floatCommand.prototype.executeValidateKeyDown=function(t,e,i){var o=i.keyCode||i.charCode,s=o-48<0||o-48>9?String.fromCharCode(o):o-48+"";if(s=96<=o&&o<=105?o-96+"":s,s=110!==o&&190!==o||"."!==this.decimalDelimiter?s:".",s=188===o&&","===this.decimalDelimiter?",":s,s=189===o||173===o||109===o?"-":s,s=i.metaKey||i.ctrlKey||46!==o&&110!==o&&190!==o||"."!==this.decimalDelimiter?s:".",s=i.shiftKey&&187===o||107==o?"+":s,(i.metaKey||i.ctrlKey)&&65===o||(i.metaKey||i.ctrlKey)&&67===o||(i.metaKey||i.ctrlKey)&&86===o||(i.metaKey||i.ctrlKey)&&88===o||(i.metaKey||i.ctrlKey)&&90===o||o>=33&&o<=40||8===o||13===o||(110===o||190===o||173===o)&&"."===this.decimalDelimiter||12==o||144==o||o>=112&&o<=123||o>=16&&o<=20||9===o||46===o||45==o||27===o)return!0;var r=WebSquare.text.getSelection(t),a=e.substr(0,r.start)+s+e.substr(r.end);return!!a.split(this.delimiter).join("").match(this.pattern)&&this.executeValidate(a)},r.floatCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.dateCommand=function(t){this.dateHelper=new WebSquare.uiplugin.dateHelper,this.ioFormat=t||"yyyyMMddHHmmSS"},o.x.extend(r.dateCommand.prototype,r.validateCommand.prototype),r.dateCommand.prototype.getType=function(){return"date"},r.dateCommand.prototype.getDetail=function(){return{}},r.dateCommand.prototype.getValue=function(){return""},r.dateCommand.prototype.executeValidate=function(t){try{var e=!0,i=this.ioFormat.indexOf("yyyy"),o=this.ioFormat.indexOf("MM"),r=this.ioFormat.indexOf("dd"),a=this.ioFormat.indexOf("HH"),n=this.ioFormat.indexOf("mm"),l=this.ioFormat.indexOf("SS"),h=t.substr(i,4),d=t.substr(o,2),c=t.substr(r,2),u=t.substr(a,2),p=t.substr(n,2),g=t.substr(l,2);switch(t.length){case 4:(isNaN(parseInt(h,10))||parseInt(h,10)<1)&&(e=!1);break;case 6:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);break;case 8:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);var m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>m)&&(e=!1);break;case 10:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>m)&&(e=!1),(isNaN(parseInt(u,10))||parseInt(u,10)<0||parseInt(u,10)>23)&&(e=!1);break;case 12:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>m)&&(e=!1),(isNaN(parseInt(u,10))||parseInt(u,10)<0||parseInt(u,10)>23)&&(e=!1),(isNaN(parseInt(p,10))||parseInt(p,10)<0||parseInt(p,10)>59)&&(e=!1);break;case 14:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>m)&&(e=!1),(isNaN(parseInt(u,10))||parseInt(u,10)<0||parseInt(u,10)>23)&&(e=!1),(isNaN(parseInt(p,10))||parseInt(p,10)<0||parseInt(p,10)>59)&&(e=!1),(isNaN(parseInt(g,10))||parseInt(g,10)<0||parseInt(g,10)>59)&&(e=!1);break;default:e=!1}return e}catch(t){s.w.printStackTrace(t)}},r.dateCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.w.printStackTrace(t)}},r.dateCommand.prototype.executeValidateKeyPress=function(t,e,i){try{return!0}catch(i){s.w.printStackTrace(i)}},r.dateCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.dateCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.dateCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_date")},r.euroCommand=function(t,e){t||(t="."),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.euroCommand.prototype,r.validateCommand.prototype),r.euroCommand.prototype.getType=function(){return"euro"},r.euroCommand.prototype.getDetail=function(){return{}},
r.euroCommand.prototype.getValue=function(){return""},r.euroCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.euroCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\,]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.euroCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.euroCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.euroCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.euroCommand.prototype.executeInvalidMessage=function(){return""},r.rupeeCommand=function(t,e){t||(t="."),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.rupeeCommand.prototype,r.validateCommand.prototype),r.rupeeCommand.prototype.getType=function(){return"rupee"},r.rupeeCommand.prototype.getDetail=function(){return{}},r.rupeeCommand.prototype.getValue=function(){return""},r.rupeeCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.rupeeCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\.]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.rupeeCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.rupeeCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.rupeeCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.rupeeCommand.prototype.executeInvalidMessage=function(){return""},r.numberMaskCommand=function(t,e,i){this.masking=t,this.maskFormat=e,this.applyFormat=i,this.pattern=new RegExp("^[0-9-+]")},o.x.extend(r.numberMaskCommand.prototype,r.validateCommand.prototype),r.numberMaskCommand.prototype.getType=function(){return"mask"},r.numberMaskCommand.prototype.getDetail=function(){return{}},r.numberMaskCommand.prototype.getValue=function(){return""},r.numberMaskCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.numberMaskCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.w.printStackTrace(t)}},r.numberMaskCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.numberMaskCommand.prototype.executeValidateKeyInput=function(t,e,i){try{if(i&&"all"==this.applyFormat){var o=WebSquare.event.getTarget(i),r=WebSquare.text.getCaretPos(o),a=e,n="-"==e[0]?e.length:e.length,l=this.masking,h=this.maskFormat;n="-"==e[0]?e.length-1:e.length;"reverse"==h&&n>l.length?/\d/g.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r)):"default"==h&&n>l.length&&/\d/g.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r))}return a}catch(i){s.w.printStackTrace(i)}},r.numberMaskCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i)if("all"==this.applyFormat){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=this.masking,d=this.maskFormat,c="-"==e[0]?e.length-1:e.length,u=h.length;a.start==a.end&&(this.pattern.test(l)?"reverse"==d&&c>=u?"0"==h[0]?("0"!=e[0]&&"-"!=e[0]||"-"==e[0]&&"0"!=e[1])&&(o=!1):o=!1:"default"==d&&c>=u&&("0"==h[u-1]?"0"!=e[e.length-1]&&(o=!1):"#"==h[u-1]&&(o=!1)):o=!1)}else if("display"==this.applyFormat){r=WebSquare.event.getTarget(i),
a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=this.masking,d=this.maskFormat,c="-"==e[0]?e.length-1:e.length,u=0;for(var p=0;p<h.length;p++)"0"!=h[p]&&"#"!=h[p]||(u+=1);a.start==a.end&&c>=u&&(o=!1),this.pattern.test(l)||(o=!1,0!=a.start||"-"!=i.key&&"Subtract"!=i.key||(o=!0))}return o}catch(i){s.w.printStackTrace(i)}},r.numberMaskCommand.prototype.executeInvalidMessage=function(){return""},r.textMaskCommand=function(t,e,i,o){this.masking=t,this.maskFormat=e,this.applyFormat=i,o?(this.pattern=new RegExp("^["+o+"]"),this.rPattern=new RegExp("["+o+"]")):(this.pattern=new RegExp("^[0-9]"),this.rPattern=new RegExp("[0-9]"))},o.x.extend(r.textMaskCommand.prototype,r.validateCommand.prototype),r.textMaskCommand.prototype.getType=function(){return"mask"},r.textMaskCommand.prototype.getDetail=function(){return{}},r.textMaskCommand.prototype.getValue=function(){return""},r.textMaskCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.textMaskCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.w.printStackTrace(t)}},r.textMaskCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.textMaskCommand.prototype.executeValidateKeyInput=function(t,e,i){try{if(i){var o=WebSquare.event.getTarget(i),r=WebSquare.text.getCaretPos(o),a=e,n=this.masking,l=this.maskFormat;"reverse"==l&&e.length>n.length?this.rPattern.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r)):"default"==l&&e.length>n.length&&this.rPattern.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r))}return a}catch(i){s.w.printStackTrace(i)}},r.textMaskCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i)if("all"==this.applyFormat){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=this.masking,h=String.fromCharCode(n),d=e.length,c=l.length;a.start==a.end&&d>=c&&(o=!1),this.pattern.test(h)||(o=!1)}else if("display"==this.applyFormat){r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),l=this.masking,n=i.charCode?i.charCode:i.keyCode,h=String.fromCharCode(n),d=e.length,c=0;for(var u=0;u<l.length;u++)"#"==l[u]&&(c+=1);a.start==a.end&&d>=c&&(o=!1),this.pattern.test(h)||(o=!1)}return o}catch(i){s.w.printStackTrace(i)}},r.textMaskCommand.prototype.executeInvalidMessage=function(){return""},r.tengeCommand=function(t,e){t||(t=" "),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.tengeCommand.prototype,r.validateCommand.prototype),r.tengeCommand.prototype.getType=function(){return"tenge"},r.tengeCommand.prototype.getDetail=function(){return{}},r.tengeCommand.prototype.getValue=function(){return""},r.tengeCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.tengeCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.tengeCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.tengeCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.tengeCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.tengeCommand.prototype.executeInvalidMessage=function(){return""},r.commandAdapter=function(t,e){this.userFunc=t,this.scopeId=e},o.x.extend(r.commandAdapter.prototype,r.validateCommand.prototype),r.commandAdapter.prototype.executeValidate=function(t){return!0},r.commandAdapter.prototype.getDetail=function(){return{}},r.commandAdapter.prototype.getType=function(){return"user"},
r.commandAdapter.prototype.getValue=function(){return""},r.commandAdapter.prototype.executeValidateString=function(t,e){try{if("function"!=typeof this.userFunc)try{this.userFunc=WebSquare.util.getGlobalFunction(this.userFunc,this.scopeId)}catch(t){}return"function"==typeof this.userFunc&&(t=this.userFunc(t,e)),t}catch(t){s.w.printStackTrace(t)}},r.commandAdapter.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.commandAdapter.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.commandAdapter.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.commandAdapter.prototype.executeInvalidMessage=function(){return""}},5543:(t,e,i)=>{i.d(e,{L:()=>v});var o,s,r,a,n,l,h,d,c,u,p=i(6301),g=i(2085),m=i(1656),f=i(7275),b=i(9304),y=i(701),v=(i(8449),{});v._MSMXL_PROGIDS=p.d._MSMXL_PROGIDS,v.loadDocumentCache={},v.load=async function(t,e,i,o){var s=null,r=t;try{if(void 0!==e&&e&&void 0!==(s=v.loadDocumentCache[r])&&null!=s)return s;if("string"==typeof t){var a=await m.v.loadAsync(t,{useXML:!0});if(!a)return null;var n="object"==typeof(s=void 0!==o&&o?v._parse(a):v.parse(a));if((o||!p.d.useWebSquareXMLParser)&&p.d.useActiveXObject&&0!=s.parseError.errorCode){if(f.k.debug){var l="top=120,height=485,left=50,width=800,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=no";window.open(t,"_blank",l)}var h=new Object;throw h.ParserException=b.d.getMessage("E_xml_ErrorOccurLoadingXML"),h.ParserException+="\nerrorCode: "+s.parseError.errorCode,h.ParserException+="\nfilepos : "+s.parseError.filepos,h.ParserException+="\nline    : "+s.parseError.line,h.ParserException+="\nlinepos : "+s.parseError.linepos,h.ParserException+="\nreason  : "+s.parseError.reason,h.ParserException+="srcText   : "+s.parseError.srcText,h.ParserException+="\nurl : "+s.parseError.url,s=null,h}if(!n){if(f.k.debug){l="top=120,height=485,left=50,width=800,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=no";window.open(t,"_blank",l)}return f.k.printLog("ERROR : "+b.d.getMessage("E_xml_ErrorOccurLoadingXMLWithURL",r)),null}}void 0!==e&&e&&(v.loadDocumentCache[r]=s)}catch(h){g.w.printStackTrace(h,"xml.load")}return s},v.loadSafari=function(t){var e=p.d.getXMLHTTPObject();e.open("GET",t,!1),e.send(null);var i=e.responseText;return e=null,this.parse(i)},v.parse=function(t,e){var i=null;try{if(p.d.useWebSquareXMLParser){if("string"==typeof t){if(""==(t=t.wq_trim()))return f.k.printLog("ERROR : xml.load Error. String is empty."),null;"<"!=t.charAt(0)&&(t="<"+t+"/>")}else null==t||9!=t.nodeType&&1!=t.nodeType||(t=v.serialize(t));var o=new DOMImplementation;o.namespaceAware=!0,o.errorChecking=!1,o.preserveWhiteSpace=!0,i=o.loadXML(t)}else i=v._parse(t,e)}catch(t){return g.w.printStackTrace(t,"xml.parse"),null}return i},v._parse=function(t,e){var i=null;try{if("string"==typeof t&&t.startsWith("<!DOCTYPE")){var o=t.indexOf("<",9);o>0&&(t=t.substring(o))}if(p.d.useActiveXObject){if((i=new ActiveXObject(v._MSMXL_PROGIDS[0])).async=!1,i.validateOnParse=!1,"true"==m.v.getConfiguration("/WebSquare/preserveWhiteSpace/@value")&&(i.preserveWhiteSpace=!0),"string"==typeof t){if(""==(t=t.wq_trim()))return f.k.printLog("ERROR : xml.load Error입니다. String이 공백입니다."),null;if("<"!=t.charAt(0)){var s="<"+t+"/>";i.loadXML(s)}else i.loadXML(t)}else null==t||9!=t.nodeType&&1!=t.nodeType||i.loadXML(t.xml);if(void 0!==e&&(1==e||"true"==e)){var r=m.v.getNamespaces(i),a="";for(var n in r)""!=n&&(a+="xmlns:"+n+'="'+r[n]+'" ');i.setProperty("SelectionLanguage","XPath"),i.setProperty("SelectionNamespaces",a)}}else if(m.v.supportDOM)try{var l=new DOMParser;if("string"==typeof t){if(""==(t=t.wq_trim()))return f.k.printLog("ERROR : xml.load Error입니다. String이 공백입니다."),null;if("<"!=t.charAt(0)){s="<"+t+"/>";i=l.parseFromString(s,"text/xml")}else i=l.parseFromString(t,"text/xml")}else null==t||9!=t.nodeType&&1!=t.nodeType||(i=l.parseFromString(v.serialize(t),"text/xml"));if(i.async=!1,
m.v.browserCheck.moz&&"parsererror"==i.documentElement.nodeName)return f.k.printLog("[Firefox]"+b.d.getMessage("E_xml_ErrorOccurParsingXML")+"(parsererror)"),null;if((m.v.browserCheck.chrome||m.v.browserCheck.safari)&&i.getElementsByTagName("parsererror").length>0)return f.k.printLog("[Safari/Chrome]"+b.d.getMessage("E_xml_ErrorOccurParsingXML")+"(parsererror)"),null}catch(t){return f.k.printLog("[DOMParser] "+b.d.getMessage("E_xml_ErrorOccurParsingXML")),g.w.printStackTrace(t,"xml.parse"),null}if(void 0===i||null==i)return f.k.printLog("ERROR : "+b.d.getMessage("E_xml_XMLUnsupportedBrowser")),null;if(p.d.useActiveXObject&&0!=i.parseError.errorCode){var h=new Object;throw h.ParserException=b.d.getMessage("E_xml_ErrorOccurParsingXML"),h.ParserException+="\nerrorCode      : "+i.parseError.errorCode,h.ParserException+="\nfilepos        : "+i.parseError.filepos,h.ParserException+="\nline           : "+i.parseError.line,h.ParserException+="\nlinepos        : "+i.parseError.linepos,h.ParserException+="\nreason         : "+i.parseError.reason,h.ParserException+="\nsrcText        : "+i.parseError.srcText,h.ParserException+="\nurl            : "+i.parseError.url,h.ParserException+="string"==typeof t?"\n\n: "+t:"\n\n: "+t.xml,h}}catch(h){return g.w.printStackTrace(h,"xml.parse"),null}return i},v.remove_xmlns_regexp=/xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml['"]|xmlns:w2=['"]http:\/\/www.inswave.com\/websquare['"]/,v.serialize=function(t){if(!t)return"";var e="";try{if(p.d.useWebSquareXMLParser)try{var i=[];v._serialize(t,i),e=i.join("")}catch(t){g.w.printStackTrace(t,"xml.serialize")}else if(p.d.useActiveXObject)e=null!=(e=t.xml)?e.wq_trim():"";else if(m.v.websquareSerializer)try{i=[];v._serialize(t,i),e=i.join("")}catch(t){g.w.printStackTrace(t,"xml.serialize")}else if(m.v.supportDOM){e=(new XMLSerializer).serializeToString(t)}}catch(t){g.w.printStackTrace(t,"xml.serialize")}return e},v.noNameSpaceSerialize=function(t){var e=v.serialize(t);return"true"==m.v.getConfiguration("/WebSquare/removeXmlNameSpace/@value")&&(e=e.replace(v.remove_xmlns_regexp,"")),e},v.nodeSerialize=function(t,e){try{switch(void 0===e&&(e={}),void 0===e.standalone&&(e.standalone=null),void 0===e.encoding&&(e.encoding="UTF-8"),void 0===e.omitXmlDeclaration&&(e.omitXmlDeclaration=!1),void 0===e.includeNamespacePrefixes&&(e.includeNamespacePrefixes=null),void 0===e.cdataSectionElements&&(e.cdataSectionElements=[]),t.nodeType){case 1:for(var i="<"+t.tagName,o=0;o<t.attributes.length;++o){var s=t.attributes[o];null!=s&&(s.specified&&(i+=i.nodeSerialize(s,e)))}if(t.hasChildNodes()){i+=">";for(var r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e);i+="</"+t.tagName+">"}else i+="></"+t.tagName+">";return i;case 2:return t.name.match(/^xmlns(:|$)/)&&!i.isVisiblyUtilized(t)?"":" "+t.name+'="'+t.value.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"';case 3:if(!i.isCDataSectionElement(t.parentNode))return t.data.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");case 4:return"<![CDATA["+t.data.replace(/]]>/g,"]]]]><![CDATA[>")+"]]>";case 7:return"<?"+t.target+" "+t.data+"?>";case 8:return"\x3c!--"+t.data+"--\x3e";case 9:i="";if(!e.omitXmlDeclaration)i+='<?xml version="1.0" encoding="'+("UTF-16"==e.encoding?"UTF-16":"UTF-8")+'"'+(null!=e.standalone?' standalone="'+(e.standalone?"yes":"no")+'"':"")+"?>\n\n";for(r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e)+"\n";return i;case 10:i="<!DOCTYPE "+t.name+' PUBLIC "'+t.publicId+'" "'+t.systemId+'" [\n';return i+="]>";case 11:for(i="",r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e);return i;default:f.k.printLog("Unsupported node: "+t.nodeName+" ("+t.nodeType+")")}}catch(t){g.w.printStackTrace(t)}},v.isVisiblyUtilized=function(t,e){if(!e.includeNamespacePrefixes)return!0;var i=t.name.substring(6),o=new XPath("..").selectNode(t);for(var s in e.includeNamespacePrefixes){var r=e.includeNamespacePrefixes[s]
;if(r==i||"#default"==r&&""==i)return!0}return"xmlns"==t.name?null==o.prefix:new XPath("parent::"+i+":* or ..//@"+i+":*").evaluate(t)},v.isCDataSectionElement=function(t,e){for(var i in e.cdataSectionElements)if(e.cdataSectionElements[i].matches(t))return!0;return!1},v.indent=function(t,e){if(void 0===e){try{var i=[];return v._treeWalk2(t,i,0),i.join("")}catch(t){g.w.printStackTrace(t,"xml.indent")}return null}try{i=[];return v._treeWalk(t,i,0),i.join("")}catch(t){g.w.printStackTrace(t,"xml.indent")}return""},v._serialize=function(t,e){if(1==t.nodeType){if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(var i=0;i<t.attributes.length;i++){var o=t.attributes.item(i);e.push(" "),e.push(o.name),e.push('="'),e.push(v._encode(o.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var s=t.childNodes,r=0;r<s.length;r++){var a=s.item(r);v._serialize(a,e)}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType)e.push(v._encode(t.nodeValue));else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(8==t.nodeType)e.push("\x3c!--"+t.nodeValue+"--\x3e");else if(9==t.nodeType)for(s=t.childNodes,r=0;r<s.length;r++){a=s.item(r);v._serialize(a,e)}},v._treeWalk=function(t,e,i){var o=!1;if(i=i||0,1==t.nodeType){o=!0,i&&e.push("<br />");for(var s=0;s<i;s++)e.push("&nbsp;");if(e.push("<font color='blue'><b>&lt;"),e.push(t.nodeName),e.push("</b></font>"),t.attributes.length>0)for(s=0;s<t.attributes.length;s++){var r=t.attributes.item(s);r.nodeValue.indexOf('"')>-1?e.push(" <font color='red'>"+r.name+"</font>='<i><font color='#888888'>"+v.encode2(r.nodeValue)+"</font></i>'"):e.push(" <font color='red'>"+r.name+"</font>=\"<i><font color='#888888'>"+v.encode2(r.nodeValue)+'</font></i>"')}if(t.hasChildNodes()){e.push(">");for(var a=t.childNodes,n=!1,l=0;l<a.length;l++){var h=a.item(l);v._treeWalk(h,e,i+4)&&(n=!0)}if(n){e.push("<br />");for(s=0;s<i;s++)e.push("&nbsp;")}e.push("<font color='blue'><b>&lt;/"),e.push(t.nodeName),e.push("&gt;</b></font>")}else e.push("<font color='blue'><b>/&gt;</b></font>")}else if(3==t.nodeType){var d=t.nodeValue||"";d=d.trim(),e.push(v.encode2(d))}else if(4==t.nodeType)e.push("&lt;![CDATA["+v.encode1(t.nodeValue)+"]]&gt;");else if(7==t.nodeType)e.push("<b>&lt;?"+t.nodeName+" "+v.encode1(t.nodeValue)+"?&gt;</b>");else if(8==t.nodeType);else if(9==t.nodeType)for(a=t.childNodes,l=0;l<a.length;l++){h=a.item(l);v._treeWalk(h,e,i)}return o},v._treeWalk2=function(t,e,i){var o=!1;if(i=i||0,1==t.nodeType){o=!0,i&&e.push("\n");for(var s=0;s<i;s++)e.push(" ");if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(s=0;s<t.attributes.length;s++){var r=t.attributes.item(s);e.push(" "),e.push(r.name),e.push('="'),e.push(v._encode(r.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var a=t.childNodes,n=!1,l=0;l<a.length;l++){var h=a.item(l);v._treeWalk2(h,e,i+4)&&(n=!0)}if(n){e.push("\n");for(s=0;s<i;s++)e.push(" ")}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType){var d=t.nodeValue||"";d=d.trim(),e.push(v._encode(d))}else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(8==t.nodeType)e.push("\x3c!--"+t.nodeValue+"--\x3e");else if(9==t.nodeType)for(a=t.childNodes,l=0;l<a.length;l++){h=a.item(l);v._treeWalk2(h,e,i)}return o},v.encode1=(o=/&/g,s=/</g,r=/>/g,a=/"/g,n=/\r\n/g,l=/\n/g,h=/\r/g,d=/ /g,c=/\t/g,function(t){var e=null;if(null==t)e="";else if("string"==typeof t)e=t;else{if(!v.isDocument(t))return t;e=v.serialize(t)}return e.replace(o,"&amp;").replace(s,"&lt;").replace(r,"&gt;").replace(a,"&quot;").replace(d,"&nbsp;").replace(c,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(n,"<br />").replace(l,"<br />").replace(h,"<br />")}),v.encode2=function(){var t=/&/g,e=/</g,i=/>/g,o=/\r\n/g,s=/\n/g,r=/\r/g,a=/ /g,n=/\t/g;return function(l){var h=null
;if(null==l)h="";else if("string"==typeof l)h=l;else{if(!v.isDocument(l))return l;h=v.serialize(l)}return h.replace(t,"&amp;amp;").replace(e,"&amp;lt;").replace(i,"&amp;gt;").replace(a,"&nbsp;").replace(n,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(o,"<br />").replace(s,"<br />").replace(r,"<br />")}}(),v._encode=function(){var t=/&/g,e=/</g,i=/>/g,o=/"/g,s=/'/g;return function(r){return r.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&quot;").replace(s,"&apos;")}}(),v._decode=function(){var t=/&lt;/g,e=/&gt;/g,i=/&apos;/g,o=/&quot;/g,s=/&amp;/g,r=/&apos;;/g;return function(a){return a.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"'")}}(),v.__decode=function(){var t=/&lt[;]{0,1}/g,e=/&gt[;]{0,1}/g,i=/&apos[;]{0,1}/g,o=/&quot[;]{0,1}/g,s=/&amp[;]{0,1}/g,r=/&apos[;]{0,1}/g,a=/&nbsp[;]{0,1}/g;return function(n){return n.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"'").replace(a," ")}}(),v.encode=function(){var t=/&/g,e=/</g,i=/>/g,o=/'/g,s=/"/g,r=/\r\n/g,a=/\n/g,n=/\r/g;return function(l){var h=null;if(null==l)h="";else if("string"==typeof l)h=l;else{if(!v.isDocument(l))return l;h=v.serialize(l)}return h.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&apos;").replace(s,"&quot;").replace(r,"&#xA;").replace(a,"&#xA;").replace(n,"&#xA;")}}(),v.decode=function(){var t=/&lt;/g,e=/&gt;/g,i=/&apos;/g,o=/&quot;/g,s=/&amp;/g,r=/&#xA;/g;return function(a){return a.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"\n")}}(),v.isDocument=function(t){try{return"object"==typeof t&&void 0!==t.documentElement&&9==t.nodeType}catch(t){}return!1},v.isDocumentString=function(t){var e;try{if(p.d.useActiveXObject)(e=new ActiveXObject(v._MSMXL_PROGIDS[0])).async=!1,e.validateOnParse=!1,e.loadXML(t);else if("<"==t.wq_trim().charAt(0))(e=(new DOMParser).parseFromString(t,"text/xml")).async=!1;if(void 0===e||null==e)return!1;if(m.v.browserCheck.moz&&"parsererror"==e.documentElement.nodeName)return!1;if(p.d.useActiveXObject&&0!=e.parseError.errorCode)return!1}catch(t){return!1}return!0},v.getElementsByTagName=function(t,e,i){if(!(m.v.browserCheck.ieAllVersion||p.d.browserCheck.chrome||p.d.browserCheck.safari||p.d.browserCheck.opera||WebSquare.util.isMobile()))return m.v.browserCheck.moz?void 0===i?t.getElementsByTagName(e):t.getElementsByTagNameNS(i,e):t.getElementsByTagName(e);try{return void 0===i?e.indexOf(":")>=0?t.selectNodes(".//*['"+e+"'=name()]"):t.selectNodes(".//*['"+e+"'=local-name()]"):t.selectNodes(".//*['"+e+"'=local-name()]['"+i+"'=namespace-uri()]")}catch(s){if(void 0===i)return t.getElementsByTagName(e);var o=e;return i==m.v._XML_NAMESPACE.SCHEMA?o=e:i==m.v._XML_NAMESPACE.XFORMS?o="xf:"+e:i==m.v._XML_NAMESPACE.XHTML||i==m.v._XML_NAMESPACE.XML||i==m.v._XML_NAMESPACE.XSL?o=e:i==m.v._XML_NAMESPACE.EVENTS?o="ev:"+e:i==m.v._XML_NAMESPACE.W2&&(o="w2:"+e),t.getElementsByTagName(o)}},v.matchNode=function(t,e,i){if(void 0===i)return t.nodeName==e;var o=t.nodeName.split(":"),s=2==o.length?o[1]:o[0];return i==t.namespaceURI&&s==e},v.nodeInfoObj=(u={},function(t){var e=t.nodeName;if(!u[e]){var i=t.namespaceURI;if(void 0!==i&&""!==i){var o=e.split(":");u[e]={nodeName:o[o.length-1],uri:i}}else u[e]={nodeName:e}}return u[e]}),v.getLocalName=function(t){var e=t.nodeName.split(":");return 2==e.length?e[1]:e[0]},v.findNode=function(t,e){try{return t.selectSingleNode(e)}catch(t){g.w.printStackTrace(t)}return null},v.findNodes=function(t,e){try{return t.selectNodes(e)}catch(t){g.w.printStackTrace(t)}return null},v.createElement=function(t,e){var i,o;if(m.v.browserCheck.opera)i=t.createElementNS("",e);else if(m.v.browserCheck.ieAllVersion&&!p.d.useActiveXObject){var s=e.indexOf(":");if(-1==s)o=v.parse("<"+e+"/>");else{var r=e.substring(0,s),a=m.v.getNamespaces(t);o=a[r]?v.parse("<"+e+" xmlns:"+r+'="'+a[r]+'"/>'):v.parse("<"+e+"/>")}null!=o&&(i=t.importNode(o.documentElement.cloneNode(!1),!1))
}else i=t.createElement(e);return i},v.createNode=function(t,e,i){try{if(i&&m.v.browserCheck.ieAllVersion&&p.d.useActiveXObject){var o=m.v.getNamespaces(t),s="";for(var r in o)""!=r&&(s+="xmlns:"+r+'="'+o[r]+'" ');9==t.nodeType?(t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",s)):1==t.nodeType&&(t.ownerDocument.setProperty("SelectionLanguage","XPath"),t.ownerDocument.setProperty("SelectionNamespaces",s))}var a=t.selectSingleNode(e);if(null==a){var n=e.lastIndexOf("/");if(n>0){var l=e.substring(0,n),h=e.substring(n+1);if(null==h.match(/[@'"()=]/i)){var d=v.createNode(t,l);null!=d&&(9==t.nodeType?a=v.createElement(t,h):1==t.nodeType&&(a=v.createElement(t.ownerDocument,h)),a=v.appendChild(d,a))}else{var c=h.split(/[[=\]]/);if((4==c.length||3==c.length)&&null!=c[1].match(/^@/)){var u=v.createNode(t,l);null!=u&&(9==t.nodeType?a=v.createElement(t,c[0]):1==t.nodeType&&(a=v.createElement(t.ownerDocument,c[0])),a.setAttribute(c[1].wq_trim().slice(1),c[2].wq_replaceAll("'","")),a=v.appendChild(u,a))}}}else 1==t.nodeType&&"/"!=e.charAt(0)&&(a=v.createElement(t.ownerDocument,e),a=v.appendChild(t,a))}return a}catch(t){g.w.printStackTrace(t)}return null},v.appendChild=function(t,e){var i;try{return t.ownerDocument==e.ownerDocument?i=t.appendChild(e):"function"==typeof t.ownerDocument.importNode?(i=t.ownerDocument.importNode(e,!0),i=t.appendChild(i)):i=t.appendChild(e)}catch(t){g.w.printStackTrace(t)}},v.getValue=function(t,e,i){var o="";try{var s=t.selectSingleNode(e);if(null!=s)if(void 0!==i)o=s.getAttribute(i);else if(2==s.nodeType||3==s.nodeType||4==s.nodeType)o=null!=s.value?s.value:s.nodeValue;else for(var r=s.childNodes,a=0;a<r.length;a++){var n=r[a];(3==n.nodeType||4==n.nodeType)&&(o+=n.nodeValue)}null==o&&(o="")}catch(t){g.w.printStackTrace(t)}return o},v.getAttribute=function(t,e,i){var o="";try{if("string"==typeof t&&(t=v.parse(t)),void 0===i)o=1==t.nodeType?t.getAttribute(e):t.documentElement.getAttribute(e);else{var s=null;null!=(s=1==t.nodeType?t.selectSingleNode(e):t.selectSingleNode("/*/"+e))&&(o=s.getAttribute(i)),null==o&&(o="")}null==o&&(o="")}catch(t){g.w.printStackTrace(t)}return o},v.getString=function(t,e){return v.getAttribute(t,e,"value")},v.getChildren=function(t,e){var i=[];try{var o=t.selectSingleNode(e);if(null!=o)for(var s=o.childNodes,r=0;r<s.length;r++){var a=s.item(r);if(1==a.nodeType){var n={};n["@tagName"]=a.nodeName;var l=a.attributes;if(null!=l)for(var h=0;h<l.length;h++)n[l[h].nodeName]=l[h].nodeValue;i.push(n)}}}catch(t){g.w.printStackTrace(t)}return i},v.setValue=function(t,e,i,o){try{var s=v.createNode(t,e);if(null!=s)if(void 0!==o)s.setAttribute(i,o);else{for(var r=s.childNodes,a=0;a<r.length;a++){var n=r.item(a);(3==n.nodeType||4==n.nodeType)&&s.removeChild(n)}var l=null;l=1==t.nodeType?t.ownerDocument.createTextNode(i):t.createTextNode(i),v.appendChild(s,l)}}catch(t){g.w.printStackTrace(t)}},v.setAttribute=function(t,e,i,o){try{if("string"==typeof t&&(t=v.parse(t)),void 0===o)1==t.nodeType?t.setAttribute(e,i):t.documentElement.setAttribute(e,i);else{1==t.nodeType||(e="/*/"+e);var s=v.createNode(t,e);null!=s&&s.setAttribute(i,o)}}catch(t){g.w.printStackTrace(t)}},v.setString=function(t,e,i){v.setAttribute(t,e,"value",i)},v.transform=async function(t,e,i){try{var o="false";(f.k.globalDebug1||f.k.getGlobalDebug())&&(o="true");var s=null;if("string"==typeof t)s=v._parse(t);else if(v.isDocument(t))s=p.d.useWebSquareXMLParser?v._parse(v.serialize(t)):t;else{if("object"!=typeof t||void 0===t.type||"vector"!=t.type&&"hashtable"!=t.type)return"";s=p.d.useWebSquareXMLParser?v._parse(v.serialize(t.toDocument())):t.toDocument()}var r=await v.load(e,!0,void 0,!0),a="";if(m.v.supportActiveX)a=s.transformNode(r);else if("undefined"!=typeof XSLTProcessor){var n=new XSLTProcessor;n.importStylesheet(r);var l=n.transformToDocument(s);(a=v.serialize(l)).indexOf("<transformiix:result")>-1&&(a=a.substring(a.indexOf(">")+1,a.lastIndexOf("<")))}else{var h=null;try{
h=new ActiveXObject("Msxml2.XSLTemplate")}catch(t){}if(!h)return f.k.printLog("ERROR : transform을 지원하지 않습니다."),"";var d=h,c=new ActiveXObject("Msxml2.FreeThreadedDOMDocument");c.loadXML(v.serialize(r)),d.stylesheet=c;var u=d.createProcessor();u.input=s,u.transform(),a=u.output}if(void 0!==i&&null!=i&&""!=i){if(document.getElementById(i).innerHTML=a+"<XSLINFO value='"+e+"'/>","true"==o){var b=/>[\s]*</g;(y={}).html=a.replace(b,">\n<"),y.xml=v.indent(s),y.xsl=v.indent(r),y.target=i,f.k.showDebugMsg(y,"xml","Transform 실행 결과")}}else if("true"==o){var y;b=/>[\s]*</g;(y={}).html=a.replace(b,">\n<"),y.xml=v.indent(s),y.xsl=v.indent(r),f.k.showDebugMsg(y,"xml","Transform 실행 결과")}return void 0!==a&&"undefined"!=a?a:""}catch(t){g.w.printStackTrace(t)}},v.hasChildElement=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(1==e.nodeType)return!0;return!1},v.getChildrenByTagName=function(t,e,i){var o=new Array;if(void 0===i)for(var s=t.firstChild;null!=s;s=s.nextSibling){if(1==s.nodeType)(a=2==(r=s.nodeName.split(":")).length?r[1]:r[0])==e&&o.push(s)}else for(s=t.firstChild;null!=s;s=s.nextSibling)if(1==s.nodeType){var r,a=2==(r=s.nodeName.split(":")).length?r[1]:r[0];i==s.namespaceURI&&a==e&&o.push(s)}return o},v.getFirstChildElement=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(1==e.nodeType)return e;return null},v.getFirstChildElements=function(t){for(var e=new Array,i=t.firstChild;null!=i;i=i.nextSibling)1==i.nodeType&&e.push(i);return e},v.getNextSiblingElement=function(t){for(var e=t.nextSibling;null!=e;e=e.nextSibling)if(1==e.nodeType)return e;return null},v.getTextNodeValue=function(t){for(var e=null,i="",o=t.firstChild;null!=o;o=o.nextSibling)3==o.nodeType&&(i+=o.nodeValue);return""!=i&&(e=i),e},v.setTextNodeValue=function(t,e){if(t&&1==t.nodeType)if(null==t.firstChild){var i=t.ownerDocument.createTextNode(e);v.appendChild(t,i)}else 3==t.firstChild.nodeType&&(t.firstChild.nodeValue=e)},v.getCDataNodeValue=function(t){for(var e=null,i=t.firstChild;null!=i;i=i.nextSibling)4==i.nodeType&&(e=i.nodeValue);return e},v.getCData=function(t,e){try{var i="",o=t.selectSingleNode("/*/"+e);if(null!=o)for(var s=o.getAttribute("encode"),r=0;r<o.childNodes.length;r++){var a=o.childNodes[r];if(4==a.nodeType){i=a.nodeValue,"base64"==s&&(i=y.f.BASE64Decoder(i));break}}return null==i&&(i=""),i}catch(t){g.w.printStackTrace(t)}},v.setCData=function(t,e,i){try{var o=null;i.indexOf("]]>")>=0?(o="base64",i=y.f.BASE64Encoder(i)):o="text";var s=t.selectSingleNode("/*/"+e);if(null==s){var r=t.createElement(e);r.setAttribute("type","CDATA"),r.setAttribute("encode",o),r.appendChild(t.createCDATASection(i)),v.appendChild(t.documentElement,r)}else{for(var a=s.childNodes.length-1;a>=0;a--)4==s.childNodes[a].nodeType&&s.removeChild(s.childNodes[a]);s.setAttribute("type","CDATA"),s.setAttribute("encode",o),s.appendChild(t.createCDATASection(i))}}catch(t){g.w.printStackTrace(t)}},v.nodeWellFormed=function(t){try{for(var e="",i="",o=!1,s=!1,r=0,a=0;a<t.length;a++){var n=t.charAt(a);if("="==n)'"'==t.charAt(a+1)?e+=n:(e=e+n+'"',s=!0);else if('"'==n)e+=n,o=0==o;else if(" "==n){if(" "==t.charAt(a-1))continue;r++,1==o?i=i+e+n:s?(i=i+e+'"'+n,s=!1):(1!=r&&'"'!=t.charAt(a-1)&&-1==e.indexOf("=")&&(e+='=""'),i=i+e+n),e=""}else">"==n?(1==s?(e=e+'"'+n,s=!1,o=!1):('"'!=t.charAt(a-1)&&-1==e.indexOf("=")&&(e+='=""'),e+=n),r=0):e+=n}return e.length>0&&(i+=e),i}catch(t){g.w.printStackTrace(t)}}},7719:(t,e,i)=>{i.r(e),i.d(e,{accordion:()=>d,panels:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.accordion",pluginName:"accordion",userEvents:["onclick"],tabIndex:"",useConfig:!0,cols:1,selectedPanel:"",collapsible:!1,collapseAll:!1,unCollapseAll:!1,titleDivTag:!1,enterKeyPanelToggle:!0,panelMoveSpeed:500,senseReader:!1,independentPanel:!1},d.prototype.initialize=function(t){this.panelIdCount=0,
this.colArr=[],this.panelInfoArr=this.makePanelArr(t,this.options),this.panelTitleArr=this.makePanelTitleArr(t,this.options,this.panelInfoArr),this.panelContentArr=this.makePanelContentArr(t,this.options,this.panelInfoArr),this.panelObjArr=this.makePanelObjArr(),this.panelArr=[],this.panelTitle=[],this.panelContent=[],this.options.panelMoveSpeed=parseInt(this.options.panelMoveSpeed,10),this.options.panelMoveSpeed<1?this.options.panelMoveSpeed=1:this.options.panelMoveSpeed>1e4&&(this.options.panelMoveSpeed=1e4)},d.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";t.push("<div id='"+this.id+"' "+e+" class='w2accordion "+this.options.className+"' "+i+">");for(var o=0;o<this.options.cols;o++)t.push("<div id='"+this.id+"_col_"+o+"' class=''></div>");return t.push("</div>"),t.join("")},d.prototype.setAction=function(){for(var t=0;t<this.render.childNodes.length;t++)this.colArr.push(this.render.childNodes[t]);this.initAllpanel()},d.prototype.makePanelArr=function(t,e){try{if(null==t)return[];for(var i=[],o=0,s=t.getChildNodes(),a=0;a<s.length;a++){var n=s[a];if(n.nodeType==WebSquare.Elem.type.element&&"w2:panels"==n.getTagName()){o++;var l,h=n.getAttribute("id"),d=this.options&&null!=this.options._scope_obj_org_id?this.options._scope_obj_org_id:null;null==h?(l=this.id+"_panel_"+this.panelIdCount,null!=d&&(d=d+"_panel_"+this.panelIdCount),this.panelIdCount++):(l=this.id+"_panel_"+h,null!=d&&(d=d+"_panel_"+h));var c=WebSquare.WebSquareparser.parseAttribute(n);void 0===c.title&&(c.title=""),void 0!==c.disabledPanels&&"true"===c.disabledPanels||(c.disabledPanels=!1),"true"===c.disabledPanels&&(c.disabledPanels=!0),!0===this.options.unCollapseAll?!0===c.disabledPanels?c.isOpen=!1:c.isOpen=!0:""!=this.options.selectedPanel&&-1!=this.options.selectedPanel||1!=o||!0===c.disabledPanels?this.options.selectedPanel==h&&!0!==c.disabledPanels?c.isOpen=!0:c.isOpen=!1:c.isOpen=!0;var u={id:l,org_id:d,col:0,isOpen:c.isOpen,userID:h,element:n,senseReader:this.options.senseReader,disabledPanels:c.disabledPanels};i.push(u)}}return i}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makePanelTitleArr=function(t,e,i){try{if(null==t)return[];for(var o=[],a=0,n=t.getChildNodes(),l=0;l<n.length;l++)if(n[l].nodeType==WebSquare.Elem.type.element&&"w2:panels"==n[l].getTagName()){var h=WebSquare.Elem.api.getElementsByTagName(n[l],"panelTitle",s.v._XML_NAMESPACE.W2);h=h[0];var d=WebSquare.WebSquareparser.parseAttribute(h);void 0===d.label&&(d.label="");var c=d.id,u={id:i[a].id+"_panelTitle_"+c,label:d.label,style:d.style,className:d.className,element:h};o.push(u),a++}return o}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makePanelContentArr=function(t,e,i){try{if(null==t)return[];for(var o=[],a=0,n=t.getChildNodes(),l=0;l<n.length;l++)if(n[l].nodeType==WebSquare.Elem.type.element&&"w2:panels"==n[l].getTagName()){var h=WebSquare.Elem.api.getElementsByTagName(n[l],"panelContent",s.v._XML_NAMESPACE.W2);if(h){h=h[0];var d=WebSquare.WebSquareparser.parseAttribute(h),c=d.id,u={id:i[a].id+"_panelContent_"+c,org_id:null==i[a].org_id?null:i[a].org_id+"_panelContent_"+c,title:d.title,style:d.style,className:d.className,xml:h};o.push(u),a++}}return o}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.initPanel=function(t){return this.scope_obj&&(t._scope_obj_uuid=this.scope_obj.uuid,t._scope_obj_org_id=t.org_id,t._scope_obj_runtime_id=t.id),new WebSquare.uiplugin.panels(t.id,t,t.element)},d.prototype.initPanelTitle=function(t){return t.className||(t.className="w2panel_title_text"),this.options.senseReader?t.tagname="strong":this.options.titleDivTag?t.tagname="div":t.tagname="span",new WebSquare.uiplugin.group(t.id,t,t.element)},d.prototype.makePanelObjArr=function(){try{for(var t=[],e=0;e<this.panelInfoArr.length;e++)t.push({panel:this.initPanel(this.panelInfoArr[e]).uuid,content:this.initPanelContent(this.panelContentArr[e]).uuid})
;return t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.initPanelContent=function(t){var e=t.org_id||t.id,i="w2panels_content_closed";return t.className&&(i+=" "+t.className),WebSquare.controlFactory.createByJSON(e,{className:i},t.xml._element,this.scope_obj,this.parentFrame)},d.prototype.initAllpanel=function(){try{for(var t,e,i,o=0;o<this.panelInfoArr.length;o++){var s=this.panelObjArr[o];t=WebSquare.idCache[s.panel],e=this.initPanelTitle(this.panelTitleArr[o]),(i=WebSquare.idCache[s.content]).activate(),this.addControl(t),t.appendTo(this.colArr[0]),t.activate(),t.addControl(e),t.addControl(i),e.appendTo(t.render.childNodes[0]),i.appendTo(t.render),i.addClass("w2panels_content_closed"),e.activate(),i.activate(),e.render.innerHTML=e.options.label,e.removeClass("w2group"),t.panelTitle=e,t.panelContent=i,this.panelArr.push(t),this.panelTitle.push(e),this.panelContent.push(i),this.options.collapseAll?t.options.isOpen&&this._closePanel(this.getOpenPanelInfo().id):t.options.isOpen&&(i.addClass("w2panels_content_open"),e.render.parentNode.setAttribute("aria-expanded","true"))}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getPanelById=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i.id==t)return i}},d.prototype.getPanelInfo=function(){for(var t=[],e=0;e<this.options.cols;e++){for(var i=this.render.childNodes[e],o=[],s=0;s<i.childNodes.length;s++)for(var r=i.childNodes[s],a=0;a<this.childControlList.length;a++){var n=this.childControlList[a];if(n.render==r){o.push({id:n.id,style:n.options.style,className:n.options.className});break}}t.push(o)}return t},d.prototype.getOpenPanelInfo=function(t){try{var e;e=null==t||null==t?0:t;var i=this.getOpenPanelListInfo();return e<i.length?i[e]:[]}catch(t){r.w.printStackTrace(t)}},d.prototype.getOpenPanelListInfo=function(){try{for(var t=[],e=0;e<this.childControlList.length;e++){1==this.childControlList[e].options.isOpen&&t.push(this.panelInfoArr[e])}return t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getPanelInfoById=function(t){for(var e=this.getPanelInfo(),i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var r=o[s];if(r.id==this.id+"_panel_"+t)return r}},d.prototype.setPanelTitle=function(t,e){try{var i=this.getPanelById(this.id+"_panel_"+t);i?(i.options.title=e,i.render.childNodes[0].childNodes[1].innerHTML=e):l.k.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setDisabledPanel=function(t,e){try{var i=this.getPanelById(this.id+"_panel_"+t);i?!0===(e=void 0===e||e)?(!0===i.options.isOpen&&(this._closePanel(i.id),i.options.isOpen=!1),i.options.disabledPanels=!0):i.options.disabledPanels=!1:l.k.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.openPanel=function(t){try{var e=this.getPanelById(this.id+"_panel_"+t),i=e.panelContent,o=e.panelTitle;if(!this.options.collapsible)for(var s=0;s<this.childControlList.length;s++)this.panelArr[s].options.id!=this.id+"_panel_"+t&&1==this.childControlList[s].options.isOpen&&!0!==this.options.independentPanel&&(this._closePanel(this.childControlList[s].options.id),this.childControlList[s].options.isOpen=!1);e.options.isOpen||!0===e.options.disabledPanels||(n.D.isIE(6)?(i.render.style.display="block",i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")):$("#"+i.render.id).slideDown(this.options.panelMoveSpeed,(function(){i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")})))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._openPanel=function(t){try{
for(var e=this.getPanelById(t),i=e.panelContent,o=e.panelTitle,s=0;s<this.childControlList.length;s++)this.panelArr[s].options.id!=this.id+"_panel_"+t&&1==this.childControlList[s].options.isOpen&&!0!==this.options.independentPanel&&(this._closePanel(this.childControlList[s].options.id),this.childControlList[s].options.isOpen=!1);e.options.isOpen||!0===e.options.disabledPanels||(n.D.isIE(6)?(i.render.style.display="block",i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")):$("#"+i.render.id).slideDown(this.options.panelMoveSpeed,(function(){i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")})))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.closePanel=function(t){try{var e=this.getPanelById(this.id+"_panel_"+t),i=e?e.panelContent:this.getPanelById(t).panelContent,o=e?e.panelTitle:this.getPanelById(t).panelTitle;e.options.isOpen&&!0!==e.options.disabledPanels&&(n.D.isIE(6)?(i.render.style.display="none",i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")):$("#"+i.render.id).slideUp(this.options.panelMoveSpeed,(function(){i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")})))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._closePanel=function(t){try{var e=this.getPanelById(t);if(e){var i=e.panelContent,o=e.panelTitle;e.options.isOpen&&!0!==e.options.disabledPanels&&(n.D.isIE(6)?(i.render.style.display="none",i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")):$("#"+i.render.id).slideUp(this.options.panelMoveSpeed,(function(){i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")})))}else l.k.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setColor=function(t){try{var e=this.getElementById(this.id);if(t.borderColor&&(e.style.borderColor=t.borderColor),t.panelColor)for(var i=0;i<this.panelArr.length;i++)this.getElementById(this.panelArr[i].id+"_title").style.background=t.panelColor}catch(t){r.w.printStackTrace(t,null,this)}};var c=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(c.prototype,h.s.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.panels",pluginName:"panels",title:"",src:"",scope:!1,isOpen:!1,disabledPanels:!1,userEvents:["onpanelsopen","onpanelsclose","onpanelsmouseover","onpanelsmouseout"]},c.prototype.initialize=function(t){},c.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2panels"+this.options.className+"'>"),this.options.senseReader?(t.push("<a id='"+this.id+"_title' class='w2panels_title' role='button' aria-expanded='false' href='javascript:void(null)'>"),t.push("<span id='"+this.id+"_title_image' class='w2panels_title_image'></span>"),t.push("</a>")):(t.push("<div id='"+this.id+"_title' class='w2panels_title' role='button' aria-expanded='false'>"),t.push("<div id='"+this.id+"_title_image' class='w2panels_title_image'></div>"),t.push("</div>")),t.push("</div>"),t.join("")},c.prototype.setAction=function(){this.dom.title=this.getElementById(this.id+"_title"),this.dom.Img=this.getElementById(this.id+"_title_image"),this.event.addListener(this.dom.title,"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),
this.event.addListener(this.dom.title,"onmouseover",this.event.bindAsEventListener(this,this.handleTitleOver)),this.event.addListener(this.dom.title,"onmouseout",this.event.bindAsEventListener(this,this.handleTitleOut)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.isOpen&&this.addClass(this.dom.Img,"w2panels_title_image_open")},c.prototype.handleTitleClick=function(t){try{if(!this.parentControl.options.collapsible)for(var e=0;e<this.parentControl.childControlList.length;e++)this.parentControl.panelArr[e].options.id!=this.id&&1==this.parentControl.childControlList[e].options.isOpen&&!0!==this.parentControl.options.independentPanel&&(this.parentControl._closePanel(this.parentControl.childControlList[e].options.id),this.parentControl.childControlList[e].options.isOpen=!1,a.B.fireEvent(this,"onpanelsclose",t));!0!==this.options.disabledPanels&&(this.options.isOpen?this.parentControl.options.collapsible&&(this.parentControl._closePanel(this.id),this.options.isOpen=!1,a.B.fireEvent(this,"onpanelsclose",t)):(this.parentControl._openPanel(this.id),this.options.isOpen=!0,a.B.fireEvent(this,"onpanelsopen",t)),a.B.fireEvent(this.parentControl,"onclick",this,this.options.isOpen))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleTitleOver=function(t){try{this.addClass(this.getElementById(this.id+"_title"),"w2panels_title_over"),a.B.fireEvent(this,"onpanelsmouseover",t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleTitleOut=function(t){try{this.removeClass(this.getElementById(this.id+"_title"),"w2panels_title_over"),a.B.fireEvent(this,"onpanelsmouseout",t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{if(13==(t.charCode?t.charCode:t.keyCode)&&this.parentControl.options.enterKeyPanelToggle)return void this.handleTitleClick(t)}catch(t){r.w.printStackTrace(t,null,this)}}},2819:(t,e,i)=>{i.r(e),i.d(e,{anchor:()=>l});var o=i(2981),s=i(2085),r=i(1960),a=i(3082),n=i(6615),l=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.anchor",pluginName:"anchor",userEvents:["onclick","ontooltipshow","ontooltiphide"],outerDiv:!0,clickEventElement:"anchor",label:"",href:"",name:"",target:"",title:"",tabIndex:"",useLocale:!1,localeRef:"",disabled:!1,escape:!0,enableReadOnly:!1},l.prototype.htmlStr1=["<div id='",,"' ",," class='w2anchor ",,"'><a href='",,"' ",,">",,"</a></div>"],l.prototype.htmlStr2=["<a id='",,"' ",," class='w2anchor2 ",,"' href='",,"' ",,">",,"</a>"],l.prototype.initialize=function(t){try{if(t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.label=e.value)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=this.options.outerDiv?this.htmlStr1:this.htmlStr2;t[1]=this.id,t[3]=this.options.style?'style="'+this.options.style+'"':"",t[5]=this.options.className;var e=this.options.href?this.options.href:"javascript:void(null);";e.indexOf("javascript:")>=0&&(e=e.replace(/'/g,'"')),t[7]=e,t[9]=(this.options.name?' name="'+this.options.name+'"':"")+(this.options.target?' target="'+this.options.target+'"':"")+(this.options.title?' title="'+this.options.title+'"':"")+(""==this.options.tabIndex?"":' tabIndex="'+this.options.tabIndex+'"')+(this.options.role?' role="'+this.options.role+'"':"");var i=this.options.label;if(this.options.useLocale&&this.options.localeRef){var o=this.getLocaleValue(this.options.localeRef);o&&(i=o)}return i=this.options.escape?WebSquare.xml._encode(i):i,t[11]=i,t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.dom.anchor="A"==this.render.tagName?this.render:this.render.firstChild,this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}
this.options.outerDiv&&"outerDiv"===this.options.clickEventElement?this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)):this.event.addListener(this.dom.anchor,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.anchor,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setVerticalAlign=function(){try{var t="top",e=this.options.style.toLowerCase();if(e.match(/vertical-align[\s]*:[\s]*middle/)?t="middle":e.match(/vertical-align[\s]*:[\s]*bottom/)&&(t="bottom"),"top"==t);else{var i=this.getStyleValue("height");if(i.indexOf("px")>-1){i=parseInt(i);var o=parseInt(this.getStyleValue("padding-top"))||0,r=parseInt(this.getStyleValue("font-size"))||0,a=0;"middle"==t?a=Math.floor((i-r)/2):"bottom"==t&&(a=Math.floor(i-r)),a+o>0&&i-a>0&&(this.setStyle("paddingTop",a+o+"px"),this.setStyle("height",i-a+"px"))}}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setValueNM(t),this.modelControl.setData(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValueNM=function(t){try{if(a.D.isNull(t))return;t=t.toString(),this.options.label=t,this.options.escape&&(t=WebSquare.xml._encode(t)),this.dom.anchor&&(this.dom.anchor.innerHTML=t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.options.label}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){try{var e=r.B.getTarget(t);if(e&&this.options.outerDiv&&e===this.render)return void this.dom.anchor.click();""==this.options.href.wq_trim()&&r.B.stopEvent(t),r.B.fireEvent(this,"onclick")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(r.B.preventDefault(t),e=a.D.getPreTabbableComp(this.id))return void e.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(r.B.preventDefault(t),e=a.D.getNextTabbableComp(this.id))return void e.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setHref=function(t){try{this.options.href=t,this.dom.anchor.href=t}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getHref=function(){try{return this.dom.anchor.href}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setDisabled=function(t){try{if("boolean"!=typeof t)return!1;this.options.outerDiv&&(this.dom.anchor.disabled=t),n.s.prototype.setDisabled.call(this,t),t?this.addClass(this.render,"w2anchor_disabled"):this.removeClass(this.render,"w2anchor_disabled")}catch(t){s.w.printStackTrace(t)}return t},l.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.ref=this.options.ref,t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t):null}catch(t){s.w.printStackTrace(t)}},l.prototype.focus=function(){try{this.dom.anchor.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){s.w.printStackTrace(t)}}},3435:(t,e,i)=>{i.r(e),i.d(e,{autoComplete:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(3729),d=i(1577),c=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(c.prototype,l.s.prototype),o.x.extend(c.prototype,h.E.prototype),o.x.extend(c.prototype,d.z.prototype),c.prototype.defaultOptions={
pluginType:"uiplugin.autoComplete",pluginName:"autoComplete",renderType:"component",userEvents:["onchange","oneditend","onviewchange","oneditkeyup","oneditenter","onselected"],useConfig:!0,serializable:!0,useOtherComponentId:"",value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,displayMode:"0",displayModeSync:!1,delimiter:"\t",defaultStyle:"",activeStyle:"",textAlign:"",defaultClass:"w2inputSelectDefault",activeClass:"w2inputSelectActive",useLocale:!1,submenuSize:"fixed",direction:"auto",dynamicDraw:!0,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,editable:!0,search:"start",editmode:!1,dataurl:"",interactionMode:!1,interactionKey:"default",interactionEnterKey:!1,submission:"",submissionFunc:"",keyInputRef:"",readOnly:!1,mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,interactionMinByteLength:0,title:"",noResult:"previous",noResultFirstItem:!1,ignoreBlankOnNoResult:!1,escape:!0,displayFormatter:"",useMousewheel:!0,editModeEvent:"onclick",showItemTableByFocus:!1,allowEmptySubmission:"false",searchTarget:"label",caseSensitive:!0,editType:"select",useKeywordHighlight:!1,returnValueType:"null",emptyItem:!1,emptyValue:"",emptyIndex:0,closeonmouseleave:!1,handleOtherClick:!0,animation:"",selectedData:!0,preventWheelEvent:!1,customLabelFormatter:"",disableEdit:!1,type:"text",wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",autocomplete:"off",placeholder:"",autoFocus:!1,noUseAutoFind:!1,findItemFirstKey:!1,nextTabByEnter:!1,customToggleKey:"",selectByTabKey:!1,preventKeyList:"",useFindItemFirstKeyChar:!0,setNodeSetNoOnchange:!1,hideListOnFocus:!1,itemEnterHandleMode:"arrow"},c.prototype.initialize=function(t){try{if(this._setSetting=!1,this.itemTable=null,this.gridOptions={},this.gridViewOptions={},this.isOpen=!1,this.statusSubLayer=!1,this._itemTableRedraw=!0,this.supportAutocomplete=!1,this.options.emptyItem?(this.options.noResult="clear",this.noResult="clear"):this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.editable=this.options.editable,this.search=this.options.search,this.orgSearchArr=[],this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.selectedGridViewRowObj={},this.viewArr=[],this.itemArr=[],this.dummyItemArr=[],this.dummyGridItemArr=[],this.mytime=null,this.hideTime=null,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.editmode=this.options.editmode,this.findkeymode=!1,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.skipMatch=!1,this.defaultAllOptionLabel=WebSquare.language.getMessage("AutoComplete_all"),t&&"$blank"==t.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("AutoComplete_choose"),this._initDisplayMode(),this.dataurl=this.options.dataurl,this.selectedIndex=-1,this.selectedAllIndex=-1,this.cursorIndex=-1,this.showRowIndex=0,this.displayCount=0,!this.options.interactionMode||this.options.submission||this.options.submissionFunc||(this.options.interactionMode=!1),this._showItemTableByFocus=!1,"onfocus"===this.options.editModeEvent&&this.options.showItemTableByFocus&&(this._showItemTableByFocus=!0),this.interactionMode=this.options.interactionMode,t){var e=WebSquare.Elem.api.getElementsByTagName(t,"choices",s.v._XML_NAMESPACE.W2)[0];if(e){var i=WebSquare.Elem.api.getElementsByTagName(e,"gridItemset",s.v._XML_NAMESPACE.W2)[0];null==i&&(i=WebSquare.Elem.api.getElementsByTagName(e,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0]),
i&&"w2:gridItemset"==i.getTagName()?this.itemTableMode="grid":i&&"w2:gridViewItemset"==i.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView");if("grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t),this.autoFinder="w2:autoFinder"==t.getTagName(),this.autoFinder){if(this.display_path=this.options.display_path,void 0!==this.display_path){this.display_path=this.display_path.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var o=this.display_path.split(" "),a=o[0],l=o[1],h=o[2];this.setItemSet(a,l,h),this.buildItemArr()}}else"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemsetObj=WebSquare.WebSquareparser.parseItemset(t))}if(this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.displayFormatter=null,this.onchangeFlag=!1,this.otherClicked=!1,this.options.autocomplete&&WebSquare.uiplugin.autoComplete.autocomplete&&(this.supportAutocomplete=!0),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.options.customSearchStrArrFunction&&(this.customSearchStrArrFunction=n.D.getGlobalFunction(this.options.customSearchStrArrFunction,this.scope_id)),this.myhelper=new WebSquare.korHelper,this.beforeEditValue="",this._preventKeyObj={},this.options.preventKeyList)if("all"===this.options.preventKeyList)this._preventKeyObj.all=!0;else for(var d=this.options.preventKeyList.split(","),c=0;c<d.length;c++){var u=d[c].wq_trim();u&&(this._preventKeyObj[u]=!0)}this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"ㅁ",67:"ㅊ",68:"ㅇ",69:"ㄷ",70:"ㄹ",71:"ㅎ",81:"ㅂ",82:"ㄱ",83:"ㄴ",84:"ㅅ",86:"ㅍ",87:"ㅈ",88:"ㅌ",90:"ㅋ"},this.korCharHash2={69:"ㄸ",81:"ㅃ",82:"ㄲ",84:"ㅆ",87:"ㅉ"},this.resizeObj={width:0,height:0}}catch(t){r.w.printStackTrace(t,null,this)}},c.autocomplete="string"==typeof document.createElement("input").autocomplete,c.prototype.toHTML=function(){try{var t=[],e=""==this.options.title?"":"title='"+this.options.title+"'",i=""==this.options.style?"":"style='"+this.options.style+"'",o="";o=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";var s=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'",a=""==this.options.textAlign?s:"style='text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",n="text"==this.options.type?"type = 'text' ":"type = '"+this.options.type+"' ",l=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",h=this.options.placeholder?"w2autoComplete_label w2autoComplete_placeholder":"w2autoComplete_label",d=this.options.placeholder?"data-placeholder='"+this.options.placeholder+"' ":"";return"native"==this.options.renderType?(h=this.options.placeholder?"w2autoComplete_ul_label w2autoComplete_placeholder":"w2autoComplete_ul_label",t.push("<div id='"+this.id+"' "+i+" class='w2autoComplete_acc "+this.options.className+"' "+o+" "+e+">"),t.push("<div id='"+this.id+"_div_input' class='w2autoComplete_ul_col_label'>"),t.push("<input id='"+this.id+"_input' role = 'combobox' aria-expanded = 'false' aria-haspopup = 'true' auto-complete = 'list' aria-owns = '#"+this.id+"_itemTable' class='w2autoComplete_input' style='border-width:0px; width:100%; padding:0px; display:none;' "+n+e+l+" />"),t.push("<span id='"+this.id+"_label' class='"+h+"' "+d+a+"></span>"),t.push("</div>"),
t.push("<div id='"+this.id+"_div_arrow' class='w2autoComplete_ul_col_arrow'>"),t.push("<a id='"+this.id+"_arrow' class='w2autoComplete_col_button' href='javascript:void(null);' aria-haspopup='true' aria-expanded='false'></a>"),t.push("</div>"),t.push("</div>")):(t.push("<div id='"+this.id+"' "+i+" class='w2autoComplete "+this.options.className+"' "+o+" "+e+" role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='inline' >"),t.push("<table class='w2autoComplete_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2autoComplete_row w2autoComplete_row_main'>"),t.push("<td class='w2autoComplete_col_label' "+s+">"),t.push("<div class='w2autoComplete_label'>"),t.push("<span id='"+this.id+"_label' class='"+h+"' "+d+a+"></span>"),t.push("<input id='"+this.id+"_input' class='w2autoComplete_input' style='border-width:0px; width:100%; padding:0px; display:none;' "+n+e+l+" />"),t.push("</div></td>"),t.push("<td class='w2autoComplete_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>"),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>")),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{if(this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.input=this.getElementById(this.id+"_input"),"native"==this.options.renderType){if(this.dom.divInput=this.getElementById(this.id+"_div_input"),this.dom.divArrow=this.getElementById(this.id+"_div_arrow"),this.dom.imgArrow=this.getElementById(this.id+"_arrow"),this.scope_obj&&this.scope_obj.uuid!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var t=this;this.scope_obj.bind("onsetsize",(function(){!1===t._setSetting&&(t.setSetting(),t._setSetting=!0)}))}l.s.addCheckResize(this.uuid,"checkResize")}""!=this.options.tabIndex&&(this.dom.input.tabIndex=this.options.tabIndex),n.D.isMobile()?"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{ontouchstart:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{ontouchstart:this.handleClickEventDocument}}):this.options.useOtherComponentId?s.v.setTimer((function(){this.otherComponent=n.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,event:{onmousedown:this.handleClickEventDocument}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.B.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{onmousedown:this.handleClickEventDocument}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{onmousedown:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{onmousedown:this.handleClickEventDocument}})}catch(t){
r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if("native"==this.options.renderType&&this.setSetting(),this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),a.B.stopPropagation(t)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleInputKeyupEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.bind("onviewchange",(function(t){this.onchangeFlag=!0})),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),"native"==this.options.renderType&&this.event.addListener(this.dom.imgArrow,"onfocusin",this.event.bindAsEventListener(this,this.handleArrowFocusInEvent)),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}-1!=this.selectedIndex||0!=this.options.emptyIndex&&this.options.emptyIndex?this.options.emptyIndex&&"number"==typeof this.options.emptyIndex&&(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(0),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.readOnly&&this.onPropertyChange("readOnly",n.D.getBoolean(this.options.readOnly)),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded())if(this._itemTableRedraw=!0,this.refreshItemArr(),this.componentRedraw(t),this.itemArr.length<=0&&-1!=this.selectedIndex&&this.initAutoComplete(),"grid"==this.itemTableMode?(this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid&&this.setGridData()):"gridView"==this.itemTableMode&&(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView&&this.setGridViewData()),this.modelControl.isBinded())this.refresh();else if(-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult)this.setSelectedIndexNM(-1,!0);else{var e=this.options.placeholder?-1:0;this.setSelectedIndexNM(e)}this.isOpen&&this.setItemTable(),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{
if(this.modelControl.isBinded()&&this.getItemCount()>0){var t=this.getValue(),e=this.modelControl.getData(),i=this.setValueNM(e);if(1==i)t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()}),null!=this.getValue()&&e!=this.getValue()&&this.modelControl.setData(this.getValue()),this.broadcast({linkedDataList:["refresh",["replace"]]});else if(isNaN(i))null!=this.getValue()&&e!=this.getValue()&&this.modelControl.setData(this.getValue());else if("clear"===this.noResult||this.options.emptyItem)this.setSelectedIndex(-1,!0,!1);else if("previous"===this.noResult){var o=this.options.placeholder?-1:0;this.setSelectedIndex(o,!1,!1)}else{if("noEnd"===this.noResult)return;if("useData"===this.noResult)return;if("first"===this.noResult)return void(this.options.noResultFirstItem&&this.setSelectedIndex(0))}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t){try{if(this.showRowIndex=0,this.setSelectOptions(),this.itemArr.length>0){var e=0;(this.options.placeholder||"useData"===this.noResult&&"gridView"===this.itemTableMode&&!1===this.options.selectedData)&&(e=-1),t&&"replace"!==t&&this.getSelectedIndex()>-1&&(e=this.getSelectedIndex()),this.itemArr&&this.itemArr[e]?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[e].label):this.itemArr[e].label:this.dom.label.innerHTML="";var i="replace"===t&&!0===this.options.setNodeSetNoOnchange;this.modelControl.isBinded()?this.setSelectedIndex(e,!1,!1,i):this.setSelectedIndex(e,void 0,void 0,i)}else this.dom.label.innerHTML="";this.showEditMode(!1),this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSubLayer=function(){try{if(null==this.itemTable){var t=this;if("grid"==this.itemTableMode)this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.findStop=!0,(t.editmode||t.findkeymode)&&(t.mozTrickBuffer=""),t.focus(),"dataList"===t.gridOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(t.viewArr[e].index)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(t.viewArr[o].index)}else 27==i&&(t._closeSubLayer(),t.showEditMode(!1),t.focus())}))),0===this.itemArr.length&&this.itemTable.hide();else if("gridView"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i){t.findStop=!0,(t.editmode||t.findkeymode)&&(t.mozTrickBuffer=""),t.focus();var o=t.viewArr[e].orgLabel+"|"+t.viewArr[e].value,s=t.findinItemArr(o,WebSquare.allValue||"all");t.setSelectedIndex1(s)})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex()
;"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(t.viewArr[o].index)}else 27==i&&(t._closeSubLayer(),t.showEditMode(!1),t.focus())}))),0===this.itemArr.length&&this.itemTable.hide();else{var e={row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2input_table "+this.options.className,w2table:"w2input_table_sb",w2table_main:"w2input_table_sb_main",w2table_row:"w2input_table_sb_row",w2table_col:"w2input_table_sb_col",w2table_col_over:"w2input_table_sb_col_over",escape:this.options.escape,wheelRows:this.options.wheelRows,parent_uuid:this.uuid};"native"===this.options.renderType?(e.className="w2table "+this.options.className,e.w2table="w2table_sb",e.w2table_main="w2table_sb_ul_main",e.w2table_row="w2table_sb_ul_row",e.w2table_col="w2table_sb_ul_col w2table_sb_ul_col2",e.w2table_col_over="w2table_sb_ul_col_over",e.tableRender="ul",e.noUseUpDownKey=!0):e.useFindItemFirstKeyChar=this.options.useFindItemFirstKeyChar,this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",e),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(e,i){a.B.fireEvent(t,"onitemclick",i),t.findStop=!0;var o=t.selectedIndex,s=t.getValue();if(t.editmode||t.findkeymode){t.mozTrickBuffer="";var r=t.viewArr[i].label;t.options.useKeywordHighlight&&(r=r.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=r,t.selectedItem={text:r,value:t.viewArr[i].value,orgLabel:t.viewArr[i].orgLabel};var n=t.selectedItem.orgLabel+"|"+t.selectedItem.value,l=t.findinItemArr(n,WebSquare.allValue||"all");t.setSelectedIndex1(l,!0),t.focus(),t.closeTable()}else{r=t.viewArr[i].label;t.options.useKeywordHighlight&&(r=r.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=r,t.selectedItem={text:r,value:t.viewArr[i].value,orgLabel:t.viewArr[i].orgLabel},"native"===t.options.renderType?"arrow"==t.options.itemEnterHandleMode?(t.setSelectedIndex1(t.viewArr[i].index),t.dom.imgArrow.focus()):"edit"==t.options.itemEnterHandleMode?(t.setSelectedIndex1(t.viewArr[i].index),t.focus()):(t.focus(),t.setSelectedIndex1(t.viewArr[i].index)):(t.setSelectedIndex1(i),t.focus(),t.closeTable())}var h={oldValue:s,newValue:t.getValue(),oldSelectedIndex:o,newSelectedIndex:t.selectedIndex};a.B.fireEvent(t,"onselected",h)})),this.itemTable.addKeyDownEventListener((function(e){var i=e.charCode?e.charCode:e.keyCode;if("ul"==this.options.tableRender&&t.itemTable.endReached)1==this.getItemCount()&&13==i?t.enterHandle(e):9==i&&(t.closeSubLayer(),t.dom.imgArrow.focus(),t.itemTable.endReached=!1);else{if(n.D.isIEAllVersion()){if(e.srcElement.parentElement!=this.render)return}else if(a.B.getTarget(e)!==this.render)return void("ul"==this.options.tableRender&&9==i&&(t._setLabel(t.viewArr[this.getSelectedIndex()].index),t.showEditMode(!1)));if(27==i)return t._closeSubLayer(),t.showEditMode(!1),void t.focus();if(t.options.customToggleKey==i)return t._closeSubLayer(),void t.focus();if(!t.options.findItemFirstKey)if(1==t.interactionMode||t.editmode||t.findkeymode){for(var o=0,s=t.selectedItem.orgLabel+"|"+t.selectedItem.value,r=0;r<t.viewArr.length;r++)if(s==t.viewArr[r].orgLabel+"|"+t.viewArr[r].value){o=r;break}if(13==i){if(0==t.viewArr.lenght)return}else if(38==i||9==i&&e.shiftKey){if(0==o)return;o-=1}else if(40==i||9==i){if(o+1==t.viewArr.length)return;o+=1}else 35==i?o=t.viewArr.length-1:36==i?o=0:33==i?(o-=t.viewArr.length)<0&&(o=0):34==i&&(o+=t.viewArr.length)>=t.viewArr.length&&(o=t.viewArr.length-1);if(t.viewArr.length>o){var l=t.viewArr[o].label;t.options.useKeywordHighlight&&(l=l.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=l,t.selectedItem={text:l,value:t.viewArr[o].value,
orgLabel:t.viewArr[o].orgLabel},t.itemTable.setSelectedIndex(o)}}else{var h=-1;h=t.getSelectedIndex(),38==i||9==i&&e.shiftKey?h>0&&(h-=1):40==i||9==i?h+1<t.getItemCount()&&(h+=1):35==i?h=t.getItemCount()-1:36==i?h=0:33==i?(h-=t.itemTable.rowCount)<0&&(h=0):34==i&&(h+=t.itemTable.rowCount)>=t.itemTable.getItemCount()&&(h=t.itemTable.getItemCount()-1),t.setSelectedIndex1(h,!0),t.itemTable.setSelectedIndex(h)}}})),1==this.options.closeonmouseleave&&this.itemTable.addMouseLeaveEventListener((function(e){var i=t.render.offsetHeight,o=t.getAbsolutePosition("top");e.clientY>=o&&e.clientY<=o+i||t.closeSubLayer()})),this.editmode&&this.viewArr.length>0?(this.setItemTable(),"native"!=this.options.renderType&&this.itemTable.setSelectedIndex(0)):null!=this.itemArr&&this.itemArr.length>0?this.setItemTable():(this.itemTable.hide(),null!=this.itemTable.mainTable&&this.itemTable.render.firstChild?this.setItemTable():$l("this.itemTable.mainTable이 null입니다.["+this.id+"]"))}if("native"===this.options.renderType){var i=this.dom.input;i&&i.setAttribute("aria-controls",this.id+"_itemTable");var o=this.dom.imgArrow;o&&o.setAttribute("aria-controls",this.id+"_itemTable")}this.isOpen=!0,this.closeSubLayer()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectOptions=function(){try{null!=this.itemTable&&(this.editmode?0==this.viewArr.length||"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemTable.setItemArr(this.viewArr),this.itemTable.setSelectedIndex(0)):"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemTable=function(){try{var t,e;"native"===this.options.renderType?(t=this.itemTable.render.getElementsByTagName("li"),e=this.itemTable.render.getElementsByTagName("li")):(t=this.itemTable.render.getElementsByTagName("tr"),e=this.itemTable.render.getElementsByTagName("td")),(t.length!==this.itemArr.length||this.viewArr.length!==this.itemArr.length||this._itemTableRedraw)&&(this._itemTableRedraw=!1,this.itemTable.setItemArr(this.viewArr));var i=this.render.offsetWidth,o=document.documentElement.clientWidth||document.body.clientWidth||0,a=WebSquare.style.getAbsoluteLeft(this.render),n=0;if(e&&e.length>0){for(var l=0,h=this.options.visibleRowNum,d=this.editmode?this.viewArr:this.itemArr,c=0,u=0;u<d.length&&h>0;u++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===d[u]._hidden||(l+=e[u].offsetHeight,h--,c++);s.v.browserCheck.moz&&l<34&&1===c&&(l=34),this.itemTable.setStyle("height",l+"px")}"fixed"==this.options.submenuSize||parseInt(i)>=parseInt(this.itemTable.render.offsetWidth)?(this.itemTable.setStyle("width",i-2+"px"),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=i+"px":this.itemTable.render.firstChild.style.width=i-17+"px"):this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+17+"px"):this.itemTable.render.firstChild.offsetWidth>i?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+"px"):(this.itemTable.render.firstChild.style.width=i+"px",this.itemTable.setStyle("width",i-2+"px"));var p=this.options.direction;if("auto"==p){var g=document.body.scrollTop;g<document.documentElement.scrollTop&&(g=document.documentElement.scrollTop);var m=WebSquare.style.getAbsoluteTop(this.render)-g,f=document.documentElement.clientHeight-(m+this.render.offsetHeight),b=this.itemTable.render.offsetHeight,y=Math.max(f,m);if(y<b&&e&&e.length>0){var v=0;for(u=0;u<e.length&&!(v+e[u].offsetHeight+2>y);u++)v+=e[u].offsetHeight;this.itemTable.rowCount=u,this.itemTable.setStyle("height",v+"px"),y!==f&&(p="up")}else f<b&&m>b&&(p="up")}
if(n="up"==p?WebSquare.style.getAbsoluteTop(this.render)-this.itemTable.render.offsetHeight:WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,o<a+this.itemTable.render.offsetWidth)if((a=a+this.render.offsetWidth-this.itemTable.render.offsetWidth)<0){a=WebSquare.style.getAbsoluteLeft(this.render);var w=document.body.offsetWidth-17-a;this.itemTable.setStyle("width",w+"px"),"auto"!=this.itemTable.getStyle("overflow-x")&&(l+=20),this.itemTable.setStyle("height",l+"px"),this.itemTable.setStyle("overflow-x","auto")}else this.itemTable.setStyle("overflow-x","hidden");else{w=this.itemTable.render.firstChild.offsetWidth;var S=this.itemTable.render.clientWidth;if(a+w<o&&"auto"==this.itemTable.getStyle("overflow-x")){var C=w>S?w:S;l-=20,this.itemTable.setStyle("height",l+"px"),this.itemTable.setStyle("width",C+"px"),this.itemTable.setStyle("overflow-x","hidden")}}this.itemTableDirection=p,this.itemTable.render.style.left=a+"px",this.itemTable.render.style.top=n+"px",WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.buildItemArr=function(){try{this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}t.sort(),"descending"==this.options.sortMethod&&t.reverse(),this.itemArr=t}for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].orgLabel||this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);if(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){var s=this._getChooseOptionLabel();this.itemArr=[{label:s,value:this.options.chooseOptionValue,orgLabel:s,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getViewItemText=function(t){try{var e="";if(t>-1&&t<this.viewArr.length)switch(e=this.viewArr[t].label,this.options.displayMode){case"0":break;case"1":e=this.viewArr[t].value+this.options.delimiter+e;break;case"2":e=e+this.options.delimiter+this.viewArr[t].value;break;case"3":e=this.viewArr[t].value}return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.parseLabel=function(t){try{if(this.itemsetObj.label.indexOf("@")>-1){var e=this.itemsetObj.label.split("@");if(this.itemsetObj.label.indexOf("/")>-1){var i=e[0].split("/"),o=i[i.length-2],s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,o);return WebSquare.WebSquareparser.getAttribute(s[0],e[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[t].xml,e[1])}return(s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.parseValue=function(t){try{if(this.itemsetObj.label.indexOf("@")>-1){var e=this.itemsetObj.value.split("@");if(this.itemsetObj.label.indexOf("/")>-1){
var i=e[0].split("/"),o=i[i.length-2],s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,o);return WebSquare.WebSquareparser.getAttribute(s[0],e[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[t].xml,e[1])}return(s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemSet=function(t,e,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var o=!1;if(e==this.itemsetObj.label&&i==this.itemsetObj.value||(o=!0),this.itemsetObj.nodeset=t,o&&(this.itemsetObj.label=e,this.itemsetObj.value=i),"grid"==this.itemTableMode){if(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),o)for(var a=0;a<this.itemsetObj.items.length;a++)this.itemsetObj.items[a].id==this.itemsetObj.labelId&&(this.itemsetObj.items[a].ref=e),this.itemsetObj.items[a].id==this.itemsetObj.valueId&&(this.itemsetObj.items[a].ref=i);this.refreshGridItemArr()}else"gridView"==this.itemTableMode?(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.refreshGridViewItemArr()):this.buildItemArr();for(a=0;a<this.itemArr.length;a++)this.itemArr[a].orgLabel=this.itemArr[a].label,this.itemArr[a].label=this.getItemText(a);if(this.options.interactionMode){if(s.v.clearTimer(this.id+"_showEditMode",!0),this.interactionMode&&(this.selectedIndex=-1,this.selectedItem={text:"",value:"",orgLabel:""},"useData"===this.options.noResult&&this.dummyItemArr.length))for(a=0;a<this.dummyItemArr.length;a++)this.itemArr=[{label:this.dummyItemArr[a].label,value:this.dummyItemArr[a].value,orgLabel:this.dummyItemArr[a].orgLabel}].concat(this.itemArr);if(1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr),"grid"==this.itemTableMode&&this.gridOptions.dataComp)){for(var n=-1,l={},h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),l[this.itemsetObj.items[h].id]="";l[this.itemsetObj.items[-1==n?0:n].id]=this.defaultAllOptionLabel,this.gridRowItemArr.unshift(l)}if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(a=0;a<this.itemArr.length;a++){var d=this.itemArr[a].label;if(this.options.useKeywordHighlight){var c=d.indexOf(this.mozTrickBuffer);c>=0&&(d=d.substring(0,c)+"<span class='w2autoComplete_keyword'>"+this.mozTrickBuffer+"</span>"+d.substring(c+this.mozTrickBuffer.length,d.length))}this.viewArr.push({label:d,orgLabel:this.itemArr[a].orgLabel,value:this.itemArr[a].value,index:a,_hidden:this.itemArr[a]._hidden,_disabled:this.itemArr[a]._disabled})}}else{if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a,_hidden:this.itemArr[a]._hidden,_disabled:this.itemArr[a]._disabled})}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){if(this.setSubLayer(),this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var u=[];for(n=-1,h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),u.push("");u[-1==n?0:n]=this.defaultAllOptionLabel,
this.itemTable.grid.setRowData(0,u,!1)}var p=[];if(this.options.allOption){var g=this.gridOptions.sortIndex.split(" ")[0],m=this.itemTable.grid.getCellInfo(g).options.dataType,f=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);p[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==m?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*f:t<e?-1*f:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:p})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.updateTable=function(){},c.prototype.openTable=function(){try{this.showTable()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{a.B.fireEvent(this,"ontoggleclick",this.isOpen),this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.openSubLayer=function(t){try{WebSquare.getBody().getLayerListener().show(this.id,t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._openSubLayer=function(t){try{t||(t={});var e=void 0===t.select||t.select;if(this.setSubLayer(),!this.isOpen){if(0==this.itemArr.length)return;if(this.itemTable.show(),this.addClass("w2autoComplete_open"),"native"===this.options.renderType){var i=this.dom.input;i&&i.setAttribute("aria-expanded","true");var o=this.dom.imgArrow;o&&o.setAttribute("aria-expanded","true")}if(this.itemTable.render.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),n.D.isMobile()||this.options.editable&&!this.options.disableEdit&&(this.editmode||!this.options.findItemFirstKey)||this.itemTable.focus(),-1!=this.selectedIndex&&e){var s=this.selectedIndex;0==s&&(this.itemTable._getCellDisabled(s)||this.itemTable._getCellHidden(s))&&s++,this.itemTable.setSelectedIndex(s)}if(""!=this.options.animation){var a="down",l=WebSquare.style.getAbsoluteTop(this.render),h=document.body.scrollTop;h<document.documentElement.scrollTop&&(h=document.documentElement.scrollTop);var d=l-h,c=document.documentElement.clientHeight-(d+this.render.offsetHeight),u=this.itemTable.render.offsetHeight;c<u&&d>u&&(a="up"),"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("slow"):"slidedown"==this.options.animation.toLowerCase()&&"down"==a&&$("#"+this.itemTable.id).hide().slideDown("fast")}this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._openOtherLayer=function(t){try{if(this.isOpen)this.setGridData();else{if(0==this.itemArr.length)return;var e=this.otherComponent;"grid"==this.itemTableMode?(this.setSubLayer(),this.setGridData(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),(e=this.itemTable).grid.removeFocusedCell(),e.setPosition(0,0),e.show(),e.grid.handleResize()):"gridView"==this.itemTableMode?(this.setSubLayer(),this.setGridViewData(),null!=(e=this.itemTable).gridView&&null!=e.gridView._dataList&&e.gridView.removeFocusedCell(),e.setPosition(0,0),e.show(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.offsetHeight+"px"),e.gridView.handleResize()):e.show(),this.addClass("w2autoComplete_open");var i=WebSquare.style.getAbsoluteLeft(this.render),o=WebSquare.style.getAbsoluteTop(this.render),s=this.options.direction;if("auto"==s||"fit"==s){var a=document.body.scrollTop;a<document.documentElement.scrollTop&&(a=document.documentElement.scrollTop);var l=o-a,h=document.documentElement.clientHeight-(l+this.render.offsetHeight),d=e.render.offsetHeight
;h<d&&l>d&&(s="up")}if("up"==s)if("gridView"==this.itemTableMode){o-=this.getElementById(this.id+"_gridViewItemTable_gridView_body_table").offsetHeight;var c=this.getElementById(this.itemTable.id+"_gridView_main_div").style.zIndex;this.setStyle("z-index",c+1)}else o-=e.render.offsetHeight;else o+=this.render.offsetHeight;if("fit"==this.options.direction){"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(this.itemTable.render.firstChild.style.width="100%"),i=WebSquare.style.getAbsoluteLeft(this.render),e.setPosition(i,o);var u=document.documentElement.clientWidth-i;e.setSize(u,e.render.offsetHeight)}else"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(i=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(e.render.style.width=this.render.offsetWidth+"px")),"fit"!=s&&document.documentElement.clientWidth<i+e.render.offsetWidth&&(i=i+this.render.offsetWidth-e.render.offsetWidth),i<0&&(i=0);this.itemTableDirection=s,e.render.style.left=i+"px",e.render.style.top=o+"px",this.isOpen=!0,WebSquare.style.adjustZIndex(this.uuid,e.uuid,"itemTable"),this.options.findItemFirstKey&&(n.D.isMobile()||this.options.editable&&!this.options.disableEdit&&this.editmode||("grid"==this.itemTableMode?e.grid.render.focus():"gridView"==this.itemTableMode&&e.gridView.render.focus()))}if(-1!=this.selectedIndex)for(var p=0;p<this.viewArr.length;p++)if(this.viewArr[p].index==this.selectedIndex){this.itemTable.setSelectedIndex(p,t&&t.noFocus);break}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.closeSubLayer=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._closeSubLayer=function(){try{if(this.isOpen&&null!=this.itemTable){if(this.itemTable.hide(),this.removeClass("w2autoComplete_open"),this.itemTable.render.setAttribute("aria-expanded","false"),"native"===this.options.renderType){var t=this.dom.input;t&&t.setAttribute("aria-expanded","false");var e=this.dom.imgArrow;e&&e.setAttribute("aria-expanded","false")}1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i&&(i.hide(),this.removeClass("w2autoComplete_open"),"grid"==this.itemTableMode?i.grid.handleResize():"gridView"==this.itemTableMode&&i.gridView.handleResize(),this.isOpen=!1,!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t,e,i,o){try{if(isNaN(t))return;if(n.D.isNull(t))return;if(this.options.emptyItem&&(t<0||t>=this.getItemCount()))if(this.modelControl.isBinded())(1==this.options.selectedData||0!=i)&&this.modelControl.setData(this.options.emptyValue),this.setSelectedIndexNM(-1);else{var s=this.getSelectedIndex(),l=this.getValue();this.setSelectedIndexNM(-1),-1!=s&&!0!==o&&a.B.fireEvent(this,"onchange",{oldValue:l,newValue:this.getValue()})}else{if(t>=this.getItemCount())return;if(t<0&&!e)return;t=parseInt(t);var h="";t>-1&&(h=this.itemArr[t].value),1==this.options.selectedData||"gridView"===this.itemTableMode&&!1===this.options.selectedData&&-1===t?this.modelControl.setData(h):0!=i?this.itemArr[t].value!=WebSquare.allValue?(this.modelControl.setData(h),1==this.options.chooseOption&&0==t&&this.setSelectedIndexNM(0)):(this.modelControl.setData(""),this.setSelectedIndexNM(t)):this.setSelectedIndexNM(-1);s=this.getSelectedIndex(),l=this.getValue();this.setSelectedIndexNM(t,e),s!=this.getSelectedIndex()&&(!0!==o&&a.B.fireEvent(this,"onchange",{oldValue:l,
newValue:this.getValue()}),this.broadcast({linkedDataList:["refresh"]}))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t,e){try{if(this.dummyData=null,t=parseInt(t),isNaN(t))return!1;if(this.options.emptyItem&&(t<0||t>=this.getItemCount()))this.selectedIndex=-1,this.dom.label.innerHTML="",this.dom.input.value="",this.itemTable&&this.itemTable.setSelectedIndex(0),this.selectedItem={text:"",value:"",orgLabel:""},this.showEditMode(!1);else{if(isNaN(t)||t>=this.getItemCount())return!1;if(t<0&&!e)return!1;if(this.selectedIndex=t,t>-1){"grid"==this.itemTableMode?this.gridOptions.dataComp?this.selectedGridRowObj=this.gridOptions.dataComp.getRowArray(t):this.selectedGridRowObj=this.gridRowItemArr[t]:"gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(t));var i=this.itemArr[t].label;this._setLabel(t),this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=i,this.selectedItem={text:i,value:this.itemArr[t].value,orgLabel:this.itemArr[t].orgLabel},this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t)}else-1==t&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?("gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(t)),this.dom.label.innerHTML=this._domInputValue,this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=this._domInputValue,this.selectedItem={text:this._domInputValue},this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t)):(this.dom.label.innerHTML="",this.dom.input.value="",this.showEditMode(!1))}return!0}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._setLabel=function(t){try{if(this.dom.label){if(t<0||t>=this.getItemCount())return;var e=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[t].value+"",o=this.itemArr[t].orgLabel+"";(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(e=this.customLabelFormatter.call(this,o,i,this.isOpen)),this.dom.label.innerHTML=e}else{var s=this.options.escape?this._encode(e):e;s=this.getFormattedValue(t,s),this.dom.label.innerHTML=s}}}catch(t){r.w.printStackTrace(t)}},c.prototype._getLabel=function(t){try{if(this.dom.label){var e=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[t].value+"",o=this.itemArr[t].orgLabel+"";(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(e=this.customLabelFormatter.call(this,o,i,this.isOpen))}return e}}catch(t){r.w.printStackTrace(t)}},c.prototype.setDisplayMode=function(t){try{if("label"==t||"value"==t||"value delim label"==t||"label delim value"==t){var e=this.options.displayMode;this.options.displayMode=t,this._initDisplayMode(),e!=this.options.displayMode&&this._refreshItemTable()}}catch(t){r.w.printStackTrace(t)}},c.prototype.setDelimiter=function(t){try{this.options.delimiter!=t&&(this.options.delimiter=t||"\t","0"!=this.options.displayMode&&"3"!=this.options.displayMode&&this._refreshItemTable())}catch(t){r.w.printStackTrace(t)}},c.prototype._refreshItemTable=function(){try{this.isOpen&&this.closeSubLayer(),this.setSelectItemArr(),
"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable&&this.itemTable.setItemArr(this.itemArr),this._setLabel(this.getSelectedIndex())}catch(t){r.w.printStackTrace(t)}},c.prototype._getChooseOptionLabel=function(){try{var t=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var e=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);e&&(t=e)}return t}catch(t){r.w.printStackTrace(t)}},c.prototype.setAllSelectedIndex=function(t,e){try{return this.allItemArr[t]?(this.selectedIndex=-1,this.selectedAllIndex=t,this.setDummyData(this.allItemArr[t].value,this.allItemArr[t].label+""),e&&this.modelControl.setData(this.allItemArr[t].value),NaN):(this.selectedAllIndex=-1,!1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue(),i=this.setValueNM(t);1==i?(this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})):isNaN(i)?this.modelControl.isBinded()&&this.modelControl.setData(t):this.options.emptyItem?this.setSelectedIndex(-1):-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?(this._domInputValue=t,this.setSelectedIndex(-1,!0)):this.setSelectedIndex(0),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;t=t.toString();var e=this.getItemCount();t&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&(this.selectedIndex=-1);for(var i=0;i<e;i++)if(this.itemArr[i].value==t)return this.setSelectedIndexNM(i),!0;return this.setAllValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}if(n.D.isNull(t))return!1;t=t.toString();for(var i=this.allItemArr.length,o=0;o<i;o++)if(this.allItemArr[o].value==t)return this.setAllSelectedIndex(o,e);return!1}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getValue=function(){try{if(this.dummyData)return this.dummyData.value;if(this.itemArr[this.selectedIndex])return this.itemArr[this.selectedIndex].value;if(this.options.emptyItem&&-1==this.selectedIndex)return this.options.emptyValue;if("empty"==this.options.returnValueType)return"";var t=null;return"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&this._domInputValue&&(t=this._domInputValue),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setText=function(t,e){try{var i=this.getItemCount(),o="";if(e)for(var s=0;s<i;s++)this.itemArr[s].orgLabel==t&&(o=this.itemArr[s].value);else for(s=0;s<i;s++)this.itemArr[s].label==t&&(o=this.itemArr[s].value);this.setValue(o)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{return this.dummyData?this.dummyData.label:this.itemArr[this.selectedIndex]?t?this.itemArr[this.selectedIndex].orgLabel:this.itemArr[this.selectedIndex].label:null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItem=function(t,e,i,o){try{if(!this.itemArr)return;if(this.itemArr.length<=o)return;this.itemArr[o].label=t,this.itemArr[o].value=e,this.itemArr[o].orgLabel=t,this.itemArr[o].label=this.getItemText(o),this.itemArr[o].xml=i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i,o){try{var s,a=!0;if(t+="",e+="",null==i){var n="<DATA><label>"+WebSquare.xml.encode(t)+"</label><value>"+WebSquare.xml.encode(e)+"</value></DATA>";s=WebSquare.xml.parse(n)}var l={label:t,value:e,orgLabel:t,
xml:s};o=parseInt(o,10),(isNaN(o)||o<0||o>=this.getItemCount())&&(o=this.getItemCount());for(var h=0;h<this.itemArr.length;h++)if("all"==this.options.searchTarget){if(this.itemArr[h].value==l.value&&this.itemArr[h].orgLabel==l.orgLabel){a=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}}else if(this.itemArr[h].value==l.value){a=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}if(a){void 0===o?("0"!=this.options.displayMode&&(l.label=this.getItemText(o)),this.itemArr.push(l)):(this.itemArr.splice(o,0,l),"0"!=this.options.displayMode&&(this.itemArr[o].label=this.getItemText(o)),o<=this.selectedIndex&&this.setSelectedIndexNM(this.selectedIndex+1)),this.viewArr=[];for(h=0;h<this.itemArr.length;h++)this.viewArr.push({label:this.itemArr[h].label,value:this.itemArr[h].value,orgLabel:this.itemArr[h].orgLabel,index:h,_hidden:this.itemArr[h]._hidden,_disabled:this.itemArr[h]._disabled});return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getItem=function(t){try{if(void 0===t)return;if(t>=this.itemArr.length||t<0)return;return this.itemTable&&this.gridOptions.sortIndex&&this.gridItemArr.length>0?this.itemArr[this.itemTable.grid.getRealRowIndex(t)]:this.itemArr[t]}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSearchedItems=function(){try{return this.viewArr}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedRow=function(){try{if("grid"==this.itemTableMode)return this.selectedGridRowObj;if("gridView"==this.itemTableMode)return this.selectedGridViewRowObj;var t={};return t.label=this.selectedItem.orgLabel,t.value=this.selectedItem.value,t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":var i=this.dom.button;1==e?(this.closeSubLayer(),this.addClass("w2autoComplete_disabled"),null!=i&&this.addClass(i,"w2autoComplete_button_disabled")):(this.removeClass("w2autoComplete_disabled"),null!=i&&this.removeClass(i,"w2autoComplete_disabled"));var o=this.getElementById(this.id+"_input");1==e?o.setAttribute("disabled","disabled"):o.removeAttribute("disabled");break;case"readOnly":1==e?this.addClass("w2autoComplete_readonly"):this.removeClass("w2autoComplete_readonly");o=this.getElementById(this.id+"_input");1==e?o.setAttribute("readonly","readonly"):o.removeAttribute("readonly");break;case"mandatory":1==e?this.addClass(this.render,"w2autoComplete_mandatory"):this.removeClass(this.render,"w2autoComplete_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex1=function(t,e,i){try{var o=this.selectedIndex,s=this.getValue();if(this.setSelectedIndex(t,i),o!=this.selectedIndex){var n={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onviewchange",n)}e||this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var a=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(a){
var l=n.D.getGlobalFunction(a,o.scope_id),h=!0;if("function"==typeof l&&(h=l(o)),!h)return}}catch(t){r.w.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2autoComplete_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=this._encode(i)),this.tooltip.render.innerHTML=i})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.disableEdit=function(t){try{this.options.disableEdit=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2autoComplete_input")&&this.isOpen)return void this.changeMode();if(e.match("w2autoComplete_col_label")||e.match("w2autoComplete_ul_col_label"))return this.isOpen?this._showItemTableByFocus||"onfocus"===this.options.editModeEvent&&this.viewArr.length<this.itemArr.length||"native"==this.options.renderType||this.closeSubLayer():(1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),!0!==this.options.disableEdit&&!1!==this.options.editable||this.openSubLayer()),void(!this.options.disableEdit&&this.options.editable&&this.changeMode({hideListOnFocus:this.options.hideListOnFocus}));e.match("w2autoComplete_col_button")&&(this.mytime&&clearTimeout(this.mytime),this.isOpen&&(this._showItemTableByFocus||this.viewArr.length<this.itemArr.length)&&this.closeSubLayer())}this.mozTrickBuffer="",this.editmode=!1,this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled});this.options.useOtherComponentId||this.options.useKeywordHighlight&&this.options.interactionMode&&(this._itemTableRedraw=!0),this.toggle(),e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleClickEventDocument=function(t){try{!this.event.isMe(t,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&(s.v.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0),this.otherClicked=!0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.endEdit=function(t){try{var e,i=this.dom.input.value,o=t&&!0===t.noEvent;a.B.fireEvent(this,"oneditend",i),this.mytime&&window.clearTimeout(this.mytime),this.hideTime&&window.clearTimeout(this.hideTime);var l,h=this.dom.input.value,d=this.options.searchTarget,c=!1;1==this.options.displayMode?(l=h.split(this.options.delimiter),"value"==d?h=l[0]:"label"==d?null!=(h=l[1])&&""!==h||(h=l[0]):"both"==d?l[0]&&l[1]?(h=l[1]+"|"+l[0],c=!0):null!=(h=l[1])&&""!==h||(h=l[0]):"all"==d&&(null==l[1]&&1==l.length&&(l[1]=l[0],l[0]=""),h=l[1]+"|"+l[0])):2==this.options.displayMode&&(l=h.split(this.options.delimiter),"value"==d?null!=(h=l[1])&&""!==h||(h=l[0]):"label"==d||"both"==d?h=l[0]:"all"==d&&(null==l[1]&&(l[1]=""),h=l[0]+"|"+l[1]));var u=this.itemArr[this.selectedIndex]
;if(null!=(e=null!=u&&(("value"===d||"both"===d)&&h===u.value||("label"===d||"both"===d)&&h===u.orgLabel||"all"===d&&h===u.orgLabel+"|"+u.value)?this.selectedIndex:this.findinItemArr(h,this.options.searchTarget,c)))"useData"!==this.noResult||o?"clear"===this.noResult?o?this.setSelectedIndex(e,!0):this.setSelectedIndex1(e,!0,!0):!0===this.otherClicked?(!0===this.options.handleOtherClick&&this.setSelectedIndex1(e,!0),this.otherClicked=!1):this.setSelectedIndex(e):this.setSelectedIndex1(e,!0);else if("useData"===this.noResult){if(e=1==this.options.allOption||1==this.options.chooseOption?1:0,this.options.ignoreBlankOnNoResult&&""===this.dom.input.value)e=0;else{if("gridView"===this.itemTableMode){var p={label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value};this.dummyGridItemArr.push(p)}"all"===d&&2===l.length?(this.options.interactionMode&&this.dummyItemArr.push({label:l[0],value:l[0],orgLabel:l[0]}),1==this.options.displayMode?this.addItem(l[1],l[0],null,e):this.addItem(l[0],l[1],null,e)):(this.options.interactionMode&&this.dummyItemArr.push({label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value}),this.addItem(this.dom.input.value,this.dom.input.value,null,e))}o?this.setSelectedIndex(e):this.setSelectedIndex1(e,!0)}else"clear"===this.noResult&&(e=1==this.options.allOption||1==this.options.chooseOption?0:-1,o?this.setSelectedIndex(e,!0):this.setSelectedIndex1(e,!0,!0));var g="";null!=this.dom.input&&null!=this.itemArr&&-1!=this.selectedIndex&&(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.selectedItem.text==this.dom.input.value&&""!=this.dom.input.value?("function"==typeof this.customLabelFormatter?g=this._getLabel(this.selectedIndex):(g=this.options.escape?this._encode(this.selectedItem.text):this.selectedItem.text,g=this.getFormattedValue(this.selectedIndex,g)),this.dom.label.innerHTML=g):this.itemArr&&this.itemArr[this.selectedIndex]?("function"==typeof this.customLabelFormatter?g=this._getLabel(this.selectedIndex):(g=this.options.escape?this._encode(this.itemArr[this.selectedIndex].label):this.itemArr[this.selectedIndex].label,g=this.getFormattedValue(this.selectedIndex,g)),this.dom.label.innerHTML=g,this.selectedItem={text:g,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}):this.dom.label.innerHTML=""),this.showEditMode(!1),this.mozTrickBuffer="",(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0,n.D.clearInterval(this.id+"_mozTrickCompare"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleblurEventInput=function(){if("native"==this.options.renderType){var t=""===this.options.tabIndex?"0":this.options.tabIndex;this.render.getAttribute("tabIndex")||this.render.setAttribute("tabIndex",t)}"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer()),this.otherClicked=!1},c.prototype.handleKeypressEvent=function(t){try{var e=this.dom.input.value;this.validator.validateKeyPress(this.dom.input,e,t)||a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=!0;if(!0===this._preventKeyObj[e]||!0===this._preventKeyObj.all)return;if(13==e&&(this.options.disableEdit||!this.editable))return void this.handleClickEvent(t);if(this.event.isMe(t,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(t,!1),(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.mozTrickCompare(),n.D.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),"native"==this.options.renderType&&9==e&&!t.shiftKey)return;return 9!=e&&13!=e||(i=a.B.fireEvent(this,"oneditenter",t)),void((9==e||13==e&&!0===this.options.nextTabByEnter)&&(this.tabOrderMoveStart=!1,
!1!==i&&(t.shiftKey?("native"==this.options.renderType&&this.render.removeAttribute("tabIndex"),null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t))):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))))}e=t.charCode?t.charCode:t.keyCode;if(this.options.customToggleKey==e)return void this.toggle();if(s.v.browserCheck.opera){if(18==e&&!this.isOpen)return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void("native"==this.options.renderType&&t.target.matches(".w2autoComplete_col_button")||this.changeMode())}else{if(!(40!=e&&38!=e||this.isOpen))return this.handleClickEvent(t),void a.B.preventDefault(t);if(13==e&&!this.isOpen)return void("native"==this.options.renderType&&t.target.matches(".w2autoComplete_col_button")||this.changeMode())}if(9!=e&&13!=e||(i=a.B.fireEvent(this,"oneditenter",t)),(9==e||13==e&&!0===this.options.nextTabByEnter)&&(this.tabOrderMoveStart=!1,!1!==i&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))),this.findItemStartedWithKeyChar(t,e),null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&(27==e?(this._closeSubLayer(),this.showEditMode(!1),this.focus()):this.itemTable.handleKeydownEvent(t)),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;return void(null!=this.itemTable&&this.itemTable.render.style.display)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode;if(!0===this._preventKeyObj[i]||!0===this._preventKeyObj.all)return;if(9==i||13==i&&!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleInputKeyupEvent=function(t){try{if(this.editmode){var e=t.charCode?t.charCode:t.keyCode,i={oldValue:this.beforeEditValue,newValue:this.dom.input.value,keyCode:e};this.options.maxByteLength&&a.B.fireEvent(this,"oneditfull");a.B.fireEvent(this,"oneditkeyup",i,t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleInputEvent=function(t){try{var e=this.dom.input.value,i=this.validator.validateKeyInput(this.render,e,t);i.valid?this.dom.input.value=i.str:a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleArrowFocusInEvent=function(t){try{this.dom.input,t.relatedTarget;this.dom.input!=t.relatedTarget&&!this.options.disableEdit&&this.options.editable&&this.changeMode({noFocus:!0})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.find=function(t,e){try{var i=this.dom.input.value;if("function"==typeof this.customSearchStrArrFunction)return void this._findInSearchStrArr();if(""==i&&!e)return this.mozTrickBuffer=i,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==i)return void(this.mozTrickBuffer=i);this.mozTrickBuffer=i,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(i=i.toLowerCase());var o=!1;if(this._showItemTableByFocus&&e)for(var s=0;s<this.itemArr.length;s++)this.viewArr.push({label:this.itemArr[s].label,value:this.itemArr[s].value,orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled});else for(s=0;s<this.itemArr.length;s++)if(!this.itemArr[s].noItem){var a=!1
;if(this.itemArr[s].orgLabel||(this.itemArr[s].orgLabel=this.itemArr[s].label,this.itemArr[s].label=this.getItemText(s)),!a&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var l=this.options.caseSensitive?this.itemArr[s].orgLabel:this.itemArr[s].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(l=this.options.caseSensitive?this.itemArr[s].label:this.itemArr[s].label.toLowerCase()),"contain"==this.search?a=this.myhelper.containWith(l,i):"start"==this.search?a=this.myhelper.startWith(l,i):"none"==this.search&&(a=l==i),l==i&&(o=!0)}if(!a&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var h=this.options.caseSensitive?this.itemArr[s].value:this.itemArr[s].value.toLowerCase();"contain"==this.search?a=this.myhelper.containWith(h,i):"start"==this.search?a=this.myhelper.startWith(h,i):"none"==this.search&&(a=h==i),h==i&&(o=!0)}var d=this.itemArr[s].label;if(this.options.useKeywordHighlight){var c=this.options.caseSensitive?d:d.toUpperCase(),u=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),p=c.indexOf(u);if(p>=0){var g=d.substring(p,p+this.mozTrickBuffer.length);d=d.substring(0,p)+"<span class='w2autoComplete_keyword'>"+g+"</span>"+d.substring(p+this.mozTrickBuffer.length,d.length)}}a&&this.viewArr.push({value:this.itemArr[s].value,label:d,orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled})}if(this.options.disabled)return!1;1!==this.viewArr.length&&(o=!1),this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):this.openSubLayer({select:!1})):this.closeSubLayer(),this.options.autoFocus&&!0===o&&!0!==t&&n.D._autoFocus(this)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._findInSearchStrArr=function(){try{var t=this.customSearchStrArrFunction.call(this,this.dom.input.value),e=this.dom.input.value;if(this.mozTrickBuffer=e,""==e||t&&t.lengh<1)return void(null!=this.itemTable&&this.closeSubLayer());this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(e=e.toLowerCase());for(var i=0;i<t.length;i++){e=this.options.caseSensitive?t[i]:t[i].toLowerCase();for(var o=0;o<this.itemArr.length;o++){var s=!1;if(this.itemArr[o].orgLabel||(this.itemArr[o].orgLabel=this.itemArr[o].label,this.itemArr[o].label=this.getItemText(o)),!s&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var a=this.options.caseSensitive?this.itemArr[o].orgLabel:this.itemArr[o].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(a=this.options.caseSensitive?this.itemArr[o].label:this.itemArr[o].label.toLowerCase()),"contain"==this.search?s=this.myhelper.containWith(a,e):"start"==this.search?s=this.myhelper.startWith(a,e):"none"==this.search&&(s=a==e)}if(!s&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var n=this.options.caseSensitive?this.itemArr[o].value:this.itemArr[o].value.toLowerCase();"contain"==this.search?s=this.myhelper.containWith(n,e):"start"==this.search?s=this.myhelper.startWith(n,e):"none"==this.search&&(s=n==e)}var l=this.itemArr[o].label;if(this.options.useKeywordHighlight){var h=this.options.caseSensitive?l:l.toUpperCase(),d=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),c=h.indexOf(d);if(c>=0){var u=l.substring(c,c+this.mozTrickBuffer.length);l=l.substring(0,c)+"<span class='w2autoComplete_keyword'>"+u+"</span>"+l.substring(c+this.mozTrickBuffer.length,l.length)}}s&&this.viewArr.push({value:this.itemArr[o].value,label:l,orgLabel:this.itemArr[o].orgLabel,index:o,
_hidden:this.itemArr[o]._hidden,_disabled:this.itemArr[o]._disabled})}}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):this.openSubLayer({select:!1})):this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.runSubmission=function(t){try{var e=!0,i=this.dom.input.value,o=n.D.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>o&&(e=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(e=!1),e)if(this._itemTableRedraw=!0,this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var s=n.D.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof s&&s(i,t)}else if(""!=this.options.submission.wq_trim()){var a="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(a),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.inputKeyDown=function(t,e){try{if(0==e)var i=t.charCode?t.charCode:t.keyCode;if("native"==this.options.renderType&&(t.shiftKey||37==i||38==i||39==i||40==i))return;if(this.interactionMode){if(this.editmode=!1,0==e)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey){if("native"!=this.options.renderType||9!=i||t.shiftKey)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()));if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(t));if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(t),WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()),s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else if(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode)return this.editmode=!1,this.itemTable.inputBlurInside=!0,this.itemTable.setSelectedIndex(0),this._setLabel(this.viewArr[0].index),this.showEditMode(!1),void a.B.preventDefault(t)}else this.options.interactionKey;if(!this.options.interactionEnterKey){var o=this;this.mytime=setTimeout((function(){o.runSubmission(i)}),100)}return}if(0==e)if(40!=i||this.isOpen){if("native"!=this.options.renderType||9!=i||t.shiftKey){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.focus())
;if(13==i)return void this.enterHandle(t);if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length||this.viewArr.length!=this.itemArr.length)return;return this.arrowHandle(t),s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}if(27===i)return this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),void this.closeTable()}else if(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode)return this.editmode=!1,this.itemTable.inputBlurInside=!0,this.itemTable.setSelectedIndex(0),this._setLabel(this.viewArr[0].index),this.showEditMode(!1),void a.B.preventDefault(t)}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.beforeEditValue=this.dom.input.value,this.itemArr.length>0){o=this;this.mytime=setTimeout((function(){o.find()}),100)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.arrowHandle=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(null==this.itemTable)return;if((this.editmode||this.findkeymode)&&(""==this.dom.input.value||0==this.viewArr.length))return void a.B.stopEvent(t);for(var i=0,o=0;o<this.viewArr.length;o++)if(this.selectedItem.orgLabel==this.viewArr[o].orgLabel){i=o;break}if(9==e||9==e&&t.shiftKey?this.setSelectedIndex1(this.viewArr[i].index):this.itemTable.handleKeydownEvent(t),this.viewArr.length>0){var s="";s="value"==this.options.searchTarget?this.viewArr[i].value:this.viewArr[i].label,this.options.useKeywordHighlight&&(s=s.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),this.dom.input.value=s,this.selectedItem={text:s,value:this.viewArr[i].value,orgLabel:this.viewArr[i].orgLabel},this.itemTable.setSelectedIndex(i)}return void(this.mozTrickBuffer="")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.enterHandle=function(t){try{var e,i=this.dom.input.value;if(a.B.fireEvent(this,"oneditend",i),(null==this.itemTable||null==this.itemTable.selectedCell)&&(null!=this.itemTable||this.options.useOtherComponentId||this.setSubLayer(),null==this.itemTable.selectedCell)){var o=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode&&void 0===o&&(o=-1),this.setSelectedIndex1(o,!0,!0);else if("noEnd"===this.noResult){if(void 0===o)return;this.setSelectedIndex1(o,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(e=null==o?this.findinItemArr(this.viewArr[0].value,"value"):o,this.setSelectedIndex1(e,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(e,!0)))}if(s.v.browserCheck.opera&&a.B.stopEvent(t),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(e=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?(void 0===e&&(e=-1),this.setSelectedIndex1(e,!0,!0)):(void 0===e&&void 0===(e=this.itemTable.selectedCell.index)&&(e=this.itemTable.selectedCell.getAttribute("index")),this.setSelectedIndex1(e,!0));else if("noEnd"===this.noResult){if(void 0===e)return;this.setSelectedIndex1(e,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==e&&(e=this.findinItemArr(this.viewArr[0].value,"value")),this.setSelectedIndex1(e,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(e,!0)))
;this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),"native"===this.options.renderType?this.isOpen?this.viewArr&&1==this.viewArr.length?(this.closeTable(),this.focus()):(this.showEditMode(!1),this.focus(),this.closeTable()):(this.showEditMode(!1),this.isOpen=!0,this.focus(),this.isOpen=!1):(this.showEditMode(!1),this.closeTable(),this.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.findinItemArr=function(t,e,i,o){try{var s=e||"label";function r(t,e){return e&&"string"==typeof t?t.toLowerCase():t}for(var a=o&&!0===o.ignoreCaseSensitive,n=r(t,a),l=0;l<this.itemArr.length;l++)if(!0!==this.itemArr[l]._disabled){var h=r(this.itemArr[l].value,a),d=r(this.itemArr[l].label,a),c=r(this.itemArr[l].orgLabel,a);if("value"===s){if(n==h)return l}else if("label"===s){if(1==this.options.displayMode||2==this.options.displayMode){if(n==c)return l}else if(n==d)return l}else if("both"===s){if(1==i){if(n==c+"|"+h)return l;var u=this.dom.input.value;if(u===d||u===c||u===h)return l}else if(n==c||n==h)return l}else if("all"===s&&n==c+"|"+h)return l}if(!this.options.caseSensitive&&!a)return this.findinItemArr(t,e,i,{ignoreCaseSensitive:!0});if(this.dummyData&&(("value"===s||"both"===s)&&this.dummyData.value||("label"===s||"both"===s)&&t===this.dummyData.label||"all"===s&&t===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.closeTable=function(){try{this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMousewheelEvent=function(t){try{if(this.options.preventWheelEvent)return;if(a.B.stopEvent(t),!this.options.useMousewheel)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2autoComplete_selected"))if(this.isOpen){if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode){if(this.itemTable.selectedCell)void 0===(i=this.itemTable.selectedCell.index)&&(i=this.itemTable.selectedCell.getAttribute("index"),this.dom.input.value=this.viewArr[i].label),this.itemTable.setSelectedIndex(i)}}else{var i=this.getSelectedIndex();t.wheelDelta>0||t.detail<0?this.setSelectedIndex1(i-1):this.setSelectedIndex1(i+1)}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusEvent=function(t){try{if(a.B.stopEvent(t),!this.isOpen){if("native"==this.options.renderType)this.addClass("w2autoComplete_selected");else{var e=document.getElementById(this.id+"_main_tbody");this.addClass(e,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected")}"onfocus"!=this.options.editModeEvent&&"native"!=this.options.renderType||!0===this.options.disableEdit||!1===this.options.editable||this.changeMode()}this.onchangeFlag&&(this.onchangeFlag=!1,a.B.fireEvent(this,"onafteredit"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleBlurEvent=function(t){try{if(a.B.stopEvent(t),!this.isOpen)if("native"==this.options.renderType)this.removeClass("w2autoComplete_selected");else{var e=document.getElementById(this.id+"_main_tbody");this.removeClass(e,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{if(a.B.stopEvent(t),!n.D.isIE(6)&&!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");"native"==this.options.renderType?this.addClass("w2autoComplete_selected"):(this.addClass(e,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected"))}if(!this.isOpen){for(var i=this.event.getTargetIterator(t,this.render);i.next();)if((i.match("w2autoComplete")||i.match("w2autoComplete_acc"))&&!(1!=this.options.tooltipDisplay||this.editmode&&this.event.isMe(t,this.dom.input))){var o=i.getElement(),s=WebSquare.style.getAbsoluteLeft(o)+20,l=WebSquare.style.getAbsoluteTop(o)+this.render.offsetHeight+3,h=this.dom.label.innerHTML;this.showTooltip(s,l,h)}
i=null}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{if(a.B.stopEvent(t),1==this.options.tooltipDisplay&&this.hideTooltip(),!this.isOpen)if("native"==this.options.renderType)this.removeClass("w2autoComplete_selected");else{var e=document.getElementById(this.id+"_main_tbody");this.removeClass(e,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.changeMode=function(t){try{if(!1===this.options.editable)return;if(void 0!==t&&null!=t||(t={}),this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){var e="";if(e=-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult||"both"===this.options.searchTarget&&this.options.displayModeSync?this.selectedItem.text:"value"==this.options.searchTarget?this.selectedItem.value:"label"==this.options.searchTarget||"both"==this.options.searchTarget?this.selectedItem.orgLabel:"all"==this.options.searchTarget?this.selectedItem.text:this.selectedItem.orgLabel,"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&!0!==t.noFocus&&this.setfFocus();var i=WebSquare.xml.decode(e+"");this.dom.input.value=i,(n.D.isOpera()||n.D.isFF())&&this.dom.input.setSelectionRange(i.length,i.length)}else this.dom.input.value=WebSquare.xml.decode(e+""),this.showEditMode(!0),!0!==t.noFocus&&(this.dom.input.select(),this.setfFocus())}if(!this.interactionMode&&"native"!=this.options.renderType&&!0!==t.noFocus&&this.itemArr.length>0&&!0!==t.hideListOnFocus){var o=this;(this._showItemTableByFocus||this.dom.input.value&&this.dom.input.value!==this.defaultAllOptionLabel&&this.dom.input.value!==this._getChooseOptionLabel())&&(this.mytime&&clearTimeout(this.mytime),this.mytime=setTimeout((function(){o.find(!0,!0)}),100))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showEditMode=function(t){t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):s.v.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(t){}}),{key:this.id+"_showEditMode",caller:this,delay:1})},c.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.w.printStackTrace(t)}return t},c.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInputFocus=function(){try{this.changeMode()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setEditMode=function(){try{this.setInputFocus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.removeAll=function(t){try{if(this.selectedItem={text:"",value:"",orgLabel:""},this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){
var e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}if(this.setSelectOptions(this.itemArr),this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML="","grid"==this.itemTableMode)this.viewArr=[],this.gridItemArr=[],this.gridRowItemArr=[],this.selectedGridRowObj={},this.itemTable&&this.itemTable.grid.removeAll();else if("gridView"==this.itemTableMode){if(this.viewArr=[],this.gridViewItemArr=[],this.gridViewRowItemArr=[],this.selectedGridViewRowObj={},this.itemTable)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).removeAll()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.initAutoComplete=function(){try{this.removeAll(),this.selectedIndex=-1,this.selectedItem={text:"",value:"",orgLabel:""},this.dom.input.value="",this.dummyData=null,this._itemTableRedraw=!0,this.isOpen&&this.closeSubLayer(),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hide=function(){try{this.closeSubLayer(),l.s.prototype.hide.call(this)}catch(t){r.w.printStackTrace(t)}},c.prototype.getFormattedValue=function(t,e){try{var i=e;return this.options.displayFormatter&&(this.displayFormatter||(this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++,this.displayFormatter=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id)),"function"==typeof this.displayFormatter&&t>this.fixedIndex&&(i=this.displayFormatter(e))),i}catch(t){r.w.printStackTrace(t)}},c.prototype.findItemStartedWithKeyChar=function(t,e){try{if(!1===this.options.useFindItemFirstKeyChar)return;var i=this.keyCharHash[e],o=-1;if(i){var s=this.korCharHash[e],a=this.korCharHash2[e],l=this.selectedIndex;this.options.findItem?(this._keyBuffer+=i,l=0):(this._keyBuffer=i,l++);for(var h=1;;)if(l%=this.itemArr.length,!0!==this.itemArr[l]._hidden){var d=this.itemArr[l].label.toLowerCase();if(0!=l||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=l&&1!=l||!0!==this.options.chooseOption||!0!==this.options.allOption){var c=!1;s&&!t.shiftKey?c=this.myhelper.startWith(d,s):a&&t.shiftKey&&(c=this.myhelper.startWith(d,a));var u=this.options.findItem?this._keyBuffer:i;if(d.startsWith(u)||c&&n.D.getBoolean(this.options.findItemKor)){o=l;break}if(d.startsWith(u)){this._keyBuffer="",o=l;break}if(h>this.itemArr.length)break;l++,h++}else{if(this.itemArr.length<=2)break;l++}else{if(this.itemArr.length<=1)break;l++}}else l++;if(o>-1)return this.setSelectedIndex1(o),!0}if(-1==o)return this._keyBuffer="",!1}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},c.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),t.focus())}}catch(t){r.w.printStackTrace(t)}},c.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),t.focus())}}catch(t){r.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype.setGridData=function(){this.itemTable.grid.clearFilter(),this.itemTable.grid.setTopRowIndex(0);var t=this.itemsetObj.labelId,e=this.itemsetObj.valueId;if(!this.options.interactionMode)if(this.gridItemArr=[],this.gridOptions.dataComp){var i=this.itemTable.grid.getColCnt();if(this.gridOptions.dataComp.getColumnCount()!=i){var o,s=[],r={},a=[]
;for(var n in this.itemTable.grid.cellInfoHash)s.push(this.itemTable.grid.cellInfoHash[n].id);if(o=this.gridOptions.dataComp.getColData(s[0]).length,null==this.gridOptions.dataComp.sortStatusArr){for(var l=0;l<s.length;l++)r[s[l]]=this.gridOptions.dataComp.getColData(s[l]);for(var h=0;h<o;h++)for(var n in a[h]={},r)a[h][n]=r[n][h];for(n=0;n<this.viewArr.length;n++)for(l=0;l<a.length;l++)if(this.viewArr[n].orgLabel===a[l][this.itemsetObj.label]&&this.viewArr[n].value===a[l][this.itemsetObj.value]){var d=[];for(var c in a[l])d.push(a[l][c]);this.gridItemArr=this.gridItemArr.concat(d);break}}}else for(n=0;n<this.viewArr.length;n++)for(l=0;l<this.itemArr.length;l++)if(this.viewArr[n].orgLabel===this.itemArr[l].label&&this.viewArr[n].value===this.itemArr[l].value){this.gridItemArr=this.gridItemArr.concat(this.gridOptions.dataComp.getRowData(l));break}}else for(n=0;n<this.viewArr.length;n++)for(l=0;l<this.gridRowItemArr.length;l++)if(this.viewArr[n].orgLabel===this.gridRowItemArr[l][t]&&this.viewArr[n].value===this.gridRowItemArr[l][e]){for(var u in this.gridRowItemArr[l])this.gridItemArr.push(this.gridRowItemArr[l][u]);break}if(this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var p=[],g=-1;for(l=0;l<this.itemsetObj.items.length;l++)-1==g&&this.itemsetObj.items[l].ref==this.itemsetObj.label&&(g=l),p.push("");p[-1==g?0:g]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,p,!1)}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){var m=[];if(this.options.allOption){var f=this.gridOptions.sortIndex.split(" ")[0],b=this.itemTable.grid.getCellInfo(f).options.dataType,y=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);m[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==b?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*y:t<e?-1*y:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:m})}else{var v=this.gridItemArr.length>0&&this.itemTable.grid.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;v&&this.itemTable.show(),this.itemTable.grid.notifyDataChanged({keepTop:!0}),v&&this.itemTable.hide()}},c.prototype.setGridViewData=function(){this.itemTable.gridView.setTopRowIndex(0);var t=null;if((t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList)).removeAll(),t.setData(this.gridViewOptions.dataComp.getAllFilteredData()),this.options.allOption||this.options.chooseOption){for(var e=[],i=-1,o=0;o<this.itemsetObj.items.length;o++)-1==i&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(i=t.bodyIdColIndexMap[this.itemsetObj.label]),e.push("");this.options.allOption&&(e[-1==i?0:i]=this.defaultAllOptionLabel,t.setRowData(0,e,!1)),this.options.chooseOption&&(e[-1==i?0:i]=this._getChooseOptionLabel(),t.setRowData(0,e,!1))}if(this.dummyGridItemArr.length>0){var s=0;this.options.allOption&&s++,this.options.chooseOption&&s++;e=[],i=-1;var r=t.bodyIdColIndexMap[this.itemsetObj.value];for(o=0;o<this.itemsetObj.items.length;o++)-1==i&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(i=t.bodyIdColIndexMap[this.itemsetObj.label]),e.push("");for(var a=0;a<this.dummyGridItemArr.length;a++)e[-1==i?0:i]=this.dummyGridItemArr[a].label,e[-1==r?1:r]=this.dummyGridItemArr[a].value,t.setRowData(s,e,!1)}if(!this.options.interactionMode){if(this.viewArr&&0==this.viewArr.length)for(a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a,_hidden:this.itemArr[a]._hidden,_disabled:this.itemArr[a]._disabled});if(this.gridViewItemArr=[],this.gridViewOptions.dataComp)if(this.viewArr.length===this.itemArr.length)this.gridViewItemArr=this.gridViewItemArr.concat(t.dataArr);else for(a=0;a<this.viewArr.length;a++)for(o=0;o<this.itemArr.length;o++)if(this.viewArr[a].orgLabel===this.itemArr[o].orgLabel&&this.viewArr[a].value===this.itemArr[o].value){
for(var n=t.getRowData(o),l=0;l<n.length;l++)this.gridViewItemArr.push(n[l]);break}}t.setData(this.gridViewItemArr.slice(0));for(a=0;a<this.viewArr.length;a++)this.viewArr[a]._hidden?this.itemTable.gridView.setRowVisible(a,!1):this.itemTable.gridView.setRowVisible(a,!0);if(this.gridViewOptions.sortIndex&&this.gridViewItemArr.length>0){var h=[];if(this.options.allOption){var d=this.gridViewOptions.sortIndex.split(" ")[0],c=this.itemTable.gridView.getCellInfo(d).options.dataType,u=parseInt(this.gridViewOptions.sortOrder.split(" ")[0],10);h[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==c?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*u:t<e?-1*u:0)}}this.itemTable.gridView._dataList.multisort({sortIndex:this.gridViewOptions.sortIndex,sortOrder:this.gridViewOptions.sortOrder,sortFuncArr:h})}else{var p=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;p&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),p&&this.itemTable.hide()}},c.prototype.setDummyData=function(t,e){this.dummyData={value:t,label:e},this.selectedIndex=-1,this.showEditMode(!1),this.selectedItem={text:e,value:t,orgLabel:e};var i=this.options.escape?this._encode(e):e;this.dom.label.innerHTML=i,this.dom.input.value=e},c.prototype.setStyle=function(t,e){try{if(!this.render)return;WebSquare.style.setStyle(this.render,t,e),"font-size"==t&&(this.dom.label.style[t]=e)}catch(t){r.w.printStackTrace(t)}},c.prototype.changeChooseOption=function(t,e){try{var i=-2;if(!0===this.options.chooseOption){i=-1;for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value===this.options.chooseOptionValue){i=s;break}i>-1&&this.itemArr.splice(i,1)}this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.itemArr=[{label:e,value:t,orgLabel:e}].concat(this.itemArr),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr);var a=this.getSelectedIndex();i!==a&&-1!==a||this.setSelectedIndex(0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},c.prototype.restore=function(t){try{return this.setSelectedIndex(t.selectedIndex),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},c.prototype.setItemTableFocus=function(){try{WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._encode=function(t){var e=t;try{var i="<span class='w2autoComplete_keyword'>",o="</span>",s=t.indexOf(i),a=t.indexOf(o,i.length);return e=this.options.useKeywordHighlight&&s>=0&&a>=0&&t.slice(s,s+i.length)===i&&t.slice(a,a+o.length)===o?t.slice(0,s)+i+WebSquare.xml._encode(t.slice(s+i.length,a))+o+WebSquare.xml._encode(t.slice(a+o.length)):WebSquare.xml._encode(t)}catch(t){return r.w.printStackTrace(t,null,this),e}},c.prototype.stopRefreshItemTable=function(t){try{this.refreshStopItemTable=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getVisibleItemCountViewArr=function(){try{for(var t=0,e=0;e<this.viewArr.length;e++)!0!==this.viewArr[e]._hidden&&t++;return t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSetting=function(){try{if(!this.render||"native"!=this.options.renderType)return;var t,e,i=WebSquare.style.getStyle(this.render,"width"),o=WebSquare.style.getStyle(this.dom.divArrow,"width");if(o=o.lastIndexOf("px")>-1?Math.ceil(1*o.wq_replaceAll("px","")):0,(i="auto"==i?"100%":i).lastIndexOf("px")>-1)s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=parseInt(i.wq_replaceAll("px",""),10)-o-s;else if(i.lastIndexOf("%")>-1&&this.parentControl){
if(w=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id)){var s,a=WebSquare.style.getStyle(w,"padding-left"),n=WebSquare.style.getStyle(w,"padding-right"),l=WebSquare.style.getStyle(w,"border-left-width"),h=WebSquare.style.getStyle(w,"border-right-width");a=a.lastIndexOf("px")>-1?parseInt(a,10):0,n=n.lastIndexOf("px")>-1?parseInt(n,10):0,l=l.lastIndexOf("px")>-1?parseInt(l,10):0,h=h.lastIndexOf("px")>-1?parseInt(h,10):0,s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=(w.offsetWidth-(a+n+l+h))*parseInt(i.wq_replaceAll("%",""),10)/100-o-s}}var d=WebSquare.style.getStyle(this.dom.input,"border-right-width");d=(d=1*d.wq_replaceAll("px",""))>1?parseInt(d,10):Math.ceil(d);var c=WebSquare.style.getStyle(this.dom.input,"border-left-width");c=(c=1*c.wq_replaceAll("px",""))>1?parseInt(c,10):Math.ceil(c);var u=WebSquare.style.getStyle(this.dom.input,"border-top-width");u=(u=1*u.wq_replaceAll("px",""))>1?parseInt(u,10):Math.ceil(u);var p=WebSquare.style.getStyle(this.dom.input,"border-bottom-width");p=(p=1*p.wq_replaceAll("px",""))>1?parseInt(p,10):Math.ceil(p);var g=WebSquare.style.getStyle(this.dom.input,"padding-right");g=(g=1*g.wq_replaceAll("px",""))>1?parseInt(g,10):Math.ceil(g);var m=WebSquare.style.getStyle(this.dom.input,"padding-left");m=(m=1*m.wq_replaceAll("px",""))>1?parseInt(m,10):Math.ceil(m);var f=WebSquare.style.getStyle(this.dom.input,"padding-top");f=(f=1*f.wq_replaceAll("px",""))>1?parseInt(f,10):Math.ceil(f);var b,y=WebSquare.style.getStyle(this.dom.input,"padding-bottom");y=(y=1*y.wq_replaceAll("px",""))>1?parseInt(y,10):Math.ceil(y),t=i-(d+c+g+m),WebSquare.style.setStyle(this.dom.divInput,"width",Math.max(i,0)+"px"),WebSquare.style.setStyle(this.dom.input,"width",Math.max(t,0)+"px");var v=WebSquare.style.getStyle(this.render,"height");if((v="auto"==v?this.render.offsetHeight+"px":v).lastIndexOf("px")>-1)v=parseInt(v.wq_replaceAll("px",""),10);else if(v.lastIndexOf("%")>-1){var w;if(w=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id))v=w.offsetHeight*parseInt(v.wq_replaceAll("%",""),10)/100}e=v-(u+p+f+y);var S=parseInt(WebSquare.style.getStyle(this.dom.imgArrow,"height"),10);b=S>0?(v-S)/2:(v-16)/2,(WebSquare.util.isIE(6)||WebSquare.util.isIE(7))&&(e-=2),WebSquare.style.setStyle(this.dom.imgArrow,"top",Math.max(b,0)+"px"),WebSquare.style.setStyle(this.dom.divInput,"height",Math.max(v,0)+"px"),WebSquare.style.setStyle(this.dom.input,"height",Math.max(e,0)+"px")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkResize=function(){try{if(!this.render)return;var t=this.render.offsetWidth,e=this.render.offsetHeight;if(t>0&&e>0)if(0==this.resizeObj.width&&0==this.resizeObj.height);else{var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.setSetting()}this.resizeObj={width:t,height:e}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._setSize=function(t,e){try{WebSquare.style.setSize.call(this,this.render,t,e),this.setSetting()}catch(t){r.w.printStackTrace(t)}}},5175:(t,e,i)=>{i.r(e),i.d(e,{balloonTip:()=>a});var o=i(2981),s=i(2085),r=i(6615),a=function(t,e,i){r.s.call(this,t,e,i)};o.x.extend(a.prototype,r.s.prototype),a.prototype.defaultOptions={pluginType:"uiplugin.balloonTip",pluginName:"balloonTip",editable:!0},a.prototype.initialize=function(t){},a.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2balloonTip'>"),t.push("<table id='"+this.id+"_mytable' class='w2balloonTip_table'>"),t.push("<tr>"),t.push("<td class='w2balloonTip_col_topleft'></td>"),t.push("<td class='w2balloonTip_col_topcenter'></td>"),t.push("<td class='w2balloonTip_col_topright'></td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td class='w2balloonTip_col_centerleft'><div class='w2balloonTip_left'></div></td>"),t.push("<td class='w2balloonTip_col_centercenter'>"),
t.push("<div id='"+this.id+"_label' role='tooltip' class='w2balloonTip_label'>12121212</div>"),t.push("</td>"),t.push("<td class='w2balloonTip_col_centerright'><div class='w2balloonTip_right'></div></td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td id='bleft' class='w2balloonTip_col_bottomleft'></td>"),t.push("<td class='w2balloonTip_col_bottomcenter'></td>"),t.push("<td id='bright' class='w2balloonTip_col_bottomright'></td>"),t.push("</tr>"),t.push("</table>"),t.push("</div>"),t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},a.prototype.setAction=function(){try{this.dom.label=document.getElementById(this.id+"_label")}catch(t){s.w.printStackTrace(t,null,this)}},a.prototype.setValue=function(t){try{this.dom.label.innerHTML=t}catch(t){s.w.printStackTrace(t,null,this)}},a.prototype.getValue=function(){try{return this.dom.label.innerHTML}catch(t){s.w.printStackTrace(t,null,this)}}},1072:(t,e,i)=>{i.r(e),i.d(e,{calendar:()=>d});var o=i(2981),s=i(2085),r=i(3082),a=i(9304),n=i(1960),l=i(7275),h=i(6615),d=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.calendar",pluginName:"calendar",userEvents:["ondateselect","onconfirm","oncancel","onchange","onviewchange","onyearselect","onmonthselect"],systemEvents:["onclick","ondblclick"],useConfig:!0,dateFormat:"",delimiter:"",calendarClass:"class1",monthNames:"",yearSuffix:"",calendarValueType:"yearMonthDate",wmode:!1,holiday:"",holidayRef:"",disabledDate:"",enabledDate:"*",keepFocusSelect:!1,minYear:1978,maxYear:2030,serverSync:!1,serverSyncType:"once",useUnlimitedYear:!0,initValue:"",cancleButtonShow:!1,cancelButtonShow:!1,footerDiv:!1,title:"",summary:"",caption:"",focusOnOuterDiv:!1,renderType:"component",pickerType:"selectbox",dynamicHeaderOrder:"month",fixPickerStatus:"default",backlink:"",useYearSelect:!0,useMonthSelect:!0,displayFormat:"",displayFormatFunc:"",visibleRowNum:5,weekStartsOn:0,focusOnStart:!0,displayHrMinSec:!1,skipConfirm:!1,skipConfirmOnly:!1,topLayout:!1,disableBeforeToday:!1,disableAfterToday:!1,disableBeforeAfterDate:!1,visibleHourList:"",visibleMinList:"",visibleSecList:"",useMonthYearFormat:!1,keepFixedDate:!1,useButton:!1,highlightSelectedWeek:!1,displayDayType:"image",showToday:!0,senseReader:!1,chooseOption:!1,visibleWeekNum:6,todaySelect:!1,dayMoveFixed:!1},d.prototype.initialize=function(t){try{if(this.options.cancleButtonShow=this.options.cancleButtonShow||this.options.cancelButtonShow,"yearMonthDateTime"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMddHHmm":"yearMonthDateHour"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMddHH":"yearMonthDate"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMdd":"yearMonth"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMM":"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.options.dateFormat=this.options.dateFormat||"yyyyMMddHHmmSS"),!this.options.displayFormat&&this.options.displayFormatFunc){var e=r.D.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof e&&(this.options.displayFormat=e.call(this,this.options.calendarValueType))}if(this.options.displayFormat||(this.options.delimiter?this.options.displayFormat="yyyy"+this.options.delimiter+"MM":this.options.displayFormat="yyyy/MM","yearMonthDate"!=this.options.calendarValueType&&"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(this.options.delimiter?this.options.displayFormat+=this.options.delimiter+"dd":this.options.displayFormat+="/dd")),this.todayHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id),this.selectedDateHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id,{useUnlimitedYear:this.options.useUnlimitedYear,
maxYear:this.options.maxYear}),this.oldYearValue=this.todayHelper.getYear(),this.oldMonthValue=this.todayHelper.getMonth(),"dynamic"==this.options.pickerType){this.pickerSelectedDateHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id);for(var i,o=this.pickerSelectedDateHelper.getYear(),l=[],h=this.options.maxYear-(this.options.minYear-1),d=this.options.minYear,c=Math.ceil(h/12),u=0;u<c;u++){var p=[];i=u==c-1?this.options.maxYear:d+11,p.push(d),p.push(i),l.push(p),o>=d&&o<=i&&(this.pickerSelectedDateHelper.selectedDecadeIndex=u,this.pickerSelectedDateHelper.startDecadeIndex=12*Math.floor(u/12)),d+=12}this.pickerSelectedDateHelper.decadeArr=l}var g,m,f;if(this.holidayXpath(),this.formatter=WebSquare.format.createFormatter("date",this.options.dateFormat,null,null,null,null,this.scope_id,this.id),this.objCellClass={},"yearMonth"==this.options.calendarValueType&&("dynamic"==this.options.pickerType?this.options.calendarClass="classYearMonth_dynamic":this.options.outsideClickEvent?this.options.calendarClass="classYearMonth_outsideClick_"+this.options.calendarClass:this.options.calendarClass="classYearMonth_"+this.options.calendarClass),"year"==this.options.calendarValueType&&("dynamic"==this.options.pickerType||(this.options.calendarClass="classYear_"+this.options.calendarClass)),"dynamic"==this.options.pickerType&&("year"==this.options.calendarValueType?this.dynamicCalendarStatus="year":"yearMonth"==this.options.calendarValueType?this.dynamicCalendarStatus="month":this.dynamicCalendarStatus="day"),this.minYear=this.options.minYear,this.maxYear=this.options.maxYear,r.D.isMobile()&&(this.options.mobileRenderType?this.options.renderType=this.options.mobileRenderType:this.options.renderType="native"),this.dayIndexArray=[0,1,2,3,4,5,6],this.shiftDay=0-this.options.weekStartsOn,this.shiftDayIndex(this.shiftDay),this.options.visibleHourList)g=this.options.visibleHourList.split(",");else{g=[];for(u=0;u<24;u++)g.push(u+"")}if(this.options.visibleMinList)m=this.options.visibleMinList.split(",");else{m=[];for(u=0;u<60;u++)m.push(u+"")}if(this.options.visibleSecList)f=this.options.visibleSecList.split(",");else{f=[];for(u=0;u<60;u++)f.push(u+"")}if("native"==this.options.renderType){if(this.selectboxYearHTMLstr=[],this.options.useYearSelect){this.selectboxYearHTMLstr.push("<select id='"+this.id+"_selectbox_year' class='w2calendar_selectbox_year_native' title='"+a.d.getMessage("Calendar_select_year")+"' >");for(var b=a.d.getMessage("Calendar_yearsuffix"),y=this.options.yearSuffix?this.options.yearSuffix:b,v=this.minYear;v<this.maxYear+1;v++)this.selectboxYearHTMLstr.push("    <option value='"+v+" '>"+v+y+"</option>");this.selectboxYearHTMLstr.push("</select>")}else{var w=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_year",{className:"w2calendar_selectbox_year_native",labelWidthAuto:!1,wmode:this.options.wmode,readOnly:!0,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum});for(v=this.minYear;v<this.maxYear+1;v++)w.addItemArr(v+y,v);if(!1!==this.options.useUnlimitedYear&&w.addItemArr("9999"+y,"9999"),this.options.selectUnlimitedYear){var S=this.options.selectUnlimitedYear.split(",");for(u=0;u<S.length;u++)S[u]<this.options.minYear?w.addItem(S[u],S[u]+y,0):S[u]>this.options.maxYear&&w.addItemArr(S[u]+y,S[u])}this.addControl(w)}if(this.selectboxMonthHTMLstr=[],this.options.useMonthSelect){this.selectboxMonthHTMLstr.push("<select id='"+this.id+"_selectbox_month' class='w2calendar_selectbox_month_native'  title='"+a.d.getMessage("Calendar_select_month")+"' >");for(var C=a.d.getMessage("Calendar_monthnames").split(","),_=this.options.monthNames?this.options.monthNames.split(","):C,x=0;x<12;x++){var I=x+1,T=_[x]||x+1;this.selectboxMonthHTMLstr.push("   <option value='"+I+" '>"+T+"</option>")}this.selectboxMonthHTMLstr.push("</select>")}else{var k=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_month",{className:"w2calendar_selectbox_month_native",labelWidthAuto:!1,
wmode:this.options.wmode,readOnly:!0,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum});for(C=a.d.getMessage("Calendar_monthnames").split(","),_=this.options.monthNames?this.options.monthNames.split(","):C,x=0;x<12;x++){T=_[x]||x+1;k.addItemArr(T,x+1)}this.addControl(k)}this.selectboxHourHTMLstr=[],this.selectboxHourHTMLstr.push("<select id='"+this.id+"_selectbox_hour' class='w2calendar_selectbox_hour_mobile'  title='"+a.d.getMessage("Calendar_select_hour")+"' onchange='event.fireEvent(util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var D=0;D<g.length;D++)this.selectboxHourHTMLstr.push("    <option value='"+g[D]+" '>"+g[D]+"</option>");this.selectboxHourHTMLstr.push("</select>"),this.selectboxMinuteHTMLstr=[],this.selectboxMinuteHTMLstr.push("<select id='"+this.id+"_selectbox_minute' class='w2calendar_selectbox_minute_mobile' title='"+a.d.getMessage("Calendar_select_minute")+"' onchange='event.fireEvent(util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var L=0;L<m.length;L++)this.selectboxMinuteHTMLstr.push("  <option value='"+m[L]+" '>"+m[L]+"</option>");this.selectboxMinuteHTMLstr.push("</select>"),this.selectboxSecondHTMLstr=[],this.selectboxSecondHTMLstr.push("<select id='"+this.id+"_selectbox_second' class='w2calendar_selectbox_second_mobile' title='"+a.d.getMessage("Calendar_select_second")+"' onchange='event.fireEvent(util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var W=0;W<f.length;W++)this.selectboxSecondHTMLstr.push("  <option value='"+f[W]+" '>"+f[W]+"</option>");this.selectboxSecondHTMLstr.push("</select>")}else{var A="",M="";this.options.useMonthYearFormat?(A="w2calendar_selectbox_year_monthAfter",M="w2calendar_selectbox_month_yearBefore"):(A="w2calendar_selectbox_year",M="w2calendar_selectbox_month");for(w=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_year",{className:A,labelWidthAuto:!1,submenuSize:"auto",wmode:this.options.wmode,title:a.d.getMessage("Calendar_select_year"),readOnly:!this.options.useYearSelect,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),k=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_month",{className:M,labelWidthAuto:!1,submenuSize:"auto",wmode:this.options.wmode,title:a.d.getMessage("Calendar_select_month"),readOnly:!this.options.useMonthSelect,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),b=a.d.getMessage("Calendar_yearsuffix"),y=this.options.yearSuffix?this.options.yearSuffix:b,v=this.minYear;v<this.maxYear+1;v++)w.addItemArr(v+y,v);if(!1!==this.options.useUnlimitedYear&&w.addItemArr("9999"+y,"9999"),this.options.selectUnlimitedYear)for(S=this.options.selectUnlimitedYear.split(","),u=0;u<S.length;u++)S[u]<this.options.minYear?w.addItem(S[u],S[u]+y,0):S[u]>this.options.maxYear&&w.addItemArr(S[u]+y,S[u]);for(C=a.d.getMessage("Calendar_monthnames").split(","),_=this.options.monthNames?this.options.monthNames.split(","):C,x=0;x<12;x++){T=_[x]||x+1;k.addItemArr(T,x+1)}w.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){this.getParent().gotoYear(this.getValue())}}}],w.options.xmlEvents=[{name:"onviewchange",action:"script",param:{handler:function(t){var e,i=this.getParent(),o=i.getValue();i.gotoYear(this.getValue()),o!=(e=i.getValue())&&n.B.fireEvent(i,"onviewchange",{oldValue:o,newValue:e}),(o=t.oldValue)!=(e=t.newValue)&&n.B.fireEvent(i,"onyearselect",{oldValue:o,newValue:e})}}}],k.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){this.getParent().gotoMonth(this.getValue())}}}];var E=this;if(k.options.xmlEvents=[{name:"onviewchange",action:"script",param:{handler:function(t){var e,i=this.getParent(),o=i.getValue();i.gotoMonth(this.getValue()),o!=(e=i.getValue())&&n.B.fireEvent(i,"onviewchange",{oldValue:o,newValue:e}),"yearMonth"===E.options.calendarValueType&&(E.options.skipConfirm||E.options.skipConfirmOnly)&&n.B.fireEvent(E,"onconfirm"),
(o=t.oldValue)!=(e=t.newValue)&&n.B.fireEvent(i,"onmonthselect",{oldValue:o,newValue:e})}}},{name:"onclose",action:"script",param:{handler:function(t){var e=this.getParent(),i=e.getValue();e.gotoMonth(this.getValue()),i==e.getValue()&&"yearMonth"===E.options.calendarValueType&&(E.options.skipConfirm||E.options.skipConfirmOnly)&&n.B.fireEvent(E,"onconfirm")}}}],this.addControl(w),this.addControl(k),"yearMonthDateHour"==this.options.calendarValueType||"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType)if(this.options.displayHrMinSec){function t(t,e){try{var i=WebSquare.idCache[e];if(t=parseInt(t,10),isNaN(t))return!1;if(t<0||t>=i.getItemCount())return!!i.options.emptyItem&&(i.selectedIndex=-1,i.dom.label.innerHTML="",i.itemTable&&i.itemTable.setSelectedIndex(0),!0);i.selectedIndex=t;var o=i.itemArr[t].label+"";return o.indexOf("&")>-1&&(o=o.wq_replaceAll("&","&amp;")),i.options.escape&&(o=WebSquare.xml._encode(o)),i.dom.label&&(o=parseInt(o,10),i.dom.label.innerHTML=o),i.itemTable&&i.render.setAttribute("aria-activedescendant",i.itemTable.id+"_"+t),!0}catch(t){s.w.printStackTrace(t,null,i)}}var q=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_hour",{className:"w2calendar_selectbox_hour",submenuSize:"auto",labelWidthAuto:!1,title:a.d.getMessage("Calendar_select_hour"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"});for(D=0;D<g.length;D++)q.addItem(g[D],a.d.getMessage("Calendar_valuetype_hour"));if(q.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.B.fireEvent(this.getParent(),"onchange")}}}],q.setSelectedIndexNM=function(e){return t(e,this.uuid)},this.addControl(q),"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType){var R=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_minute",{className:"w2calendar_selectbox_minute",submenuSize:"auto",labelWidthAuto:!1,title:a.d.getMessage("Calendar_select_minute"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"});for(L=0;L<m.length;L++)R.addItem(m[L],a.d.getMessage("Calendar_valuetype_minute"));if(R.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.B.fireEvent(this.getParent(),"onchange")}}}],R.setSelectedIndexNM=function(e){return t(e,this.uuid)},this.addControl(R),"yearMonthDateTimeSec"==this.options.calendarValueType){var N=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_second",{className:"w2calendar_selectbox_second",submenuSize:"auto",labelWidthAuto:!1,title:a.d.getMessage("Calendar_select_second"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"});for(W=0;W<f.length;W++)N.addItem(f[W],a.d.getMessage("Calendar_valuetype_second"));N.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.B.fireEvent(this.getParent(),"onchange")}}}],N.setSelectedIndexNM=function(e){return t(e,this.uuid)},this.addControl(N)}}}else{for(q=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_hour",{className:"w2calendar_selectbox_hour",submenuSize:"auto",labelWidthAuto:!1,title:a.d.getMessage("Calendar_select_hour"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"}),D=0;D<g.length;D++)q.addItemArr(g[D],g[D]);if(q.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.B.fireEvent(this.getParent(),"onchange")}}}],this.addControl(q),"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType){for(R=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_minute",{className:"w2calendar_selectbox_minute",submenuSize:"auto",labelWidthAuto:!1,title:a.d.getMessage("Calendar_select_minute"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),
L=0;L<m.length;L++)R.addItemArr(m[L],m[L]);if(R.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.B.fireEvent(this.getParent(),"onchange")}}}],this.addControl(R),"yearMonthDateTimeSec"==this.options.calendarValueType){for(N=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_second",{className:"w2calendar_selectbox_second",submenuSize:"auto",labelWidthAuto:!1,title:a.d.getMessage("Calendar_select_second"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),W=0;W<f.length;W++)N.addItemArr(f[W],f[W]);N.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.B.fireEvent(this.getParent(),"onchange")}}}],this.addControl(N)}}}}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.toHTML=function(){try{var t=r.D.getDataPrefix("name"),e=[],i=""==this.options.title?"":"title='"+this.options.title+"'",n=""==this.options.style?"":"style='"+this.options.style+"'",l=""==this.options.tabIndex?this.options.focusOnOuterDiv?"tabIndex='0'":"":"tabIndex='"+this.options.tabIndex+"'";if(e.push("<div id='"+this.id+"' "+t+"='"+this.id+"' "+n+" class='w2calendar w2calendar_"+this.options.calendarClass+" "+this.options.className+"' role='calendar' "+i+" "+l+">"),!0===this.options.senseReader&&r.D.isMobile()&&e.push("<button id='"+this.id+"_start' "+t+"='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2calendar w2calendar_start'>"+a.d.getMessage("Calendar_start")+"</button>"),e.push("<div class='w2calendar_wrap'>"),"dynamic"==this.options.pickerType?(e.push("<div class='w2calendar_picker_header'>"),e.push("<div id='"+this.id+"_picker_header_last_entity' class='w2calendar_picker_header_last_entity' role='button' tabindex='0' title=''></div>"),e.push("<div id='"+this.id+"_picker_header_dynamic_entity' class='w2calendar_picker_header_dynamic_entity' role='button' tabindex='0' title=''></div>"),e.push("<div id='"+this.id+"_picker_header_next_entity' class='w2calendar_picker_header_next_entity' role='button' tabindex='0' title=''></div>"),e.push("</div>")):(e.push("<div class='w2calendar_header'>"),"native"==this.options.renderType?(e.push("<button id='"+this.id+"_last_year' class='w2calendar_header_last_year'>"+a.d.getMessage("Calendar_previous_year")+"</button>"),e.push("<button class='w2calendar_header_last_month' >"+a.d.getMessage("Calendar_previous_month")+"</button>")):(e.push("<div id='"+this.id+"_last_year' "+t+"='"+this.id+"_last_year' class='w2calendar_header_last_year' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_previous_year")+"'></div>"),e.push("<div class='w2calendar_header_last_month' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_previous_month")+"'></div>")),"native"==this.options.renderType?(e.push(this.options.useYearSelect?this.selectboxYearHTMLstr.join(""):this.getChild(this.id+"_selectbox_year").toHTML()),e.push(this.options.useMonthSelect?this.selectboxMonthHTMLstr.join(""):this.getChild(this.id+"_selectbox_month").toHTML())):(e.push(this.getChild(this.id+"_selectbox_year").toHTML()),e.push(this.getChild(this.id+"_selectbox_month").toHTML())),"native"==this.options.renderType?(e.push("<button class='w2calendar_header_next_month' >"+a.d.getMessage("Calendar_next_month")+"</button>"),"year"==this.options.calendarValueType?e.push("<button class='w2calendar_header_next_year_yearType' >"+a.d.getMessage("Calendar_next_year")+"</button>"):e.push("<button class='w2calendar_header_next_year' >"+a.d.getMessage("Calendar_next_year")+"</button>")):(e.push("<div class='w2calendar_header_next_month' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_next_month")+"'></div>"),
"year"==this.options.calendarValueType?e.push("<div class='w2calendar_header_next_year_yearType' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_next_year")+"'></div>"):e.push("<div class='w2calendar_header_next_year' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_next_year")+"'></div>")),1==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<button id='"+this.id+"_today_btn' class='w2calendar_go_today'>"+a.d.getMessage("Calendar_today")+"</button>"):e.push("<div class='w2calendar_go_today' role='button' title='"+a.d.getMessage("Calendar_today")+"' tabindex='0'></div>"),1==this.options.cancleButtonShow&&(e.push("<td class='w2calendar_blank' ></td>"),"native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel' role='button' >"+a.d.getMessage("Calendar_cancel")+"</a></td>"):e.push("<td><div class='w2calendar_date_cancel' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div></td>"))),"yearMonth"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType||this.options.outsideClickEvent||(this.options.skipConfirm&&!this.options.skipConfirmOnly||("year"==this.options.calendarValueType?e.push("<div class='w2calendar_header_btn_ok_yearType' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"'></div>"):this.options.useButton?e.push("<button class='w2inputCalendar_header_btn_ok_div' >"+a.d.getMessage("Calendar_ok")+"</button>"):e.push("<div class='w2calendar_header_btn_ok' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"'></div>")),"year"==this.options.calendarValueType?e.push("<div class='w2calendar_header_btn_close_yearType' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_close")+"'></div>"):this.options.useButton?e.push("<button class='w2inputCalendar_header_btn_close_div' >"+a.d.getMessage("Calendar_close")+"</button>"):e.push("<div class='w2calendar_header_btn_close' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_close")+"'></div>")),e.push("</div>")),"dynamic"==this.options.pickerType){var h="";"html5"!=o.x.docType&&(h=" summary='calendar period'"),e.push("<div id='"+this.id+"_picker_content' class='w2calendar_picker_content' style='display:none;'>"),e.push("<table class='w2calendar_picker_content_table' "+h+">"),e.push("<tbody>"),e.push("<tr>"),e.push("<td>");for(var d=0;d<12;d++)e.push("<div id='"+this.id+"_picker_cell_"+d+"' index='"+d+"' class='w2calendar_picker_cell'>"),e.push("<span style='display: table-cell; vertical-align: middle;'></span>"),e.push("</div>");e.push("</td>"),e.push("</tr>"),e.push("</tbody>"),e.push("</table>"),e.push("</div>")}h="";"html5"!=o.x.docType&&(h="summary='"+(h=this.options.summary?this.options.summary:a.d.getMessage("Calendar_summary"))+"'");var c=this.options.caption?this.options.caption:a.d.getMessage("Calendar_caption");e.push("<div id='"+this.id+"_content' class='w2calendar_content'>"),e.push("<table class='w2calendar_content_table'"+h+">"),e.push("<caption>"+c+"</caption>"),e.push("<thead>"),e.push("<tr>");for(var u=0;u<7;u++){var p=a.d.getMessage("Calendar_weekdaynames_"+this.dayIndexArray[u]);if("native"==this.options.renderType)if("text"===this.options.displayDayType){var g=a.d.getMessage("Calendar_weekdaynames_short_"+this.dayIndexArray[u]);e.push("<th class='w2calendar_col_day_text w2calendar_day_text_"+this.dayIndexArray[u]+"' scope='col'>"+g+"</th>")}else e.push("<th class='w2calendar_col_day w2calendar_day"+this.dayIndexArray[u]+"' scope='col'>"+p+"</th>");else if("text"===this.options.displayDayType){g=a.d.getMessage("Calendar_weekdaynames_short_"+this.dayIndexArray[u]);e.push("<td class='w2calendar_col_day_text'><div class='w2calendar_day w2calendar_day_text_"+this.dayIndexArray[u]+"' title='"+p+"' >"+g+"</div></td>")
}else e.push("<td class='w2calendar_col_day'><div class='w2calendar_day w2calendar_day"+this.dayIndexArray[u]+"' title='"+p+"' ></div></td>")}e.push("</tr>"),e.push("</thead>");for(var m=this.options.visibleWeekNum,f=0;f<m;f++){e.push("<tr>");for(var b=0;b<7;b++)e.push("<td id='"+this.id+"_cell_"+f+"_"+b+"' ></td>");e.push("</tr>")}return e.push("</table>"),e.push("</div>"),this.options.footerDiv?(e.push("<div class='w2calendar_footer'>"),"yearMonthDate"==this.options.calendarValueType?("native"==this.options.renderType?e.push("<button class='w2calendar_go_today w2calendar_go_today_div'>"+a.d.getMessage("Calendar_today")+"</button>"):e.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+a.d.getMessage("Calendar_today")+"' tabindex='0'></div>"),e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),1==this.options.cancleButtonShow&&(e.push("<div class='w2calendar_blank w2calendar_blank_div'></div>"),"native"==this.options.renderType?e.push("<a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel w2calendar_date_cancel_div' role='button'>"+a.d.getMessage("Calendar_cancel")+"</a>"):e.push("<div class='w2calendar_date_cancel w2calendar_date_cancel_div' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div>"))):"yearMonthDateHour"==this.options.calendarValueType?"native"==this.options.renderType?(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile w2calendar_footer_date_mobile_div'></span>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0'>"+a.d.getMessage("Calendar_ok")+"</a>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0'>"+a.d.getMessage("Calendar_cancel")+"</a>")):(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"' ></div>"),e.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div>")):"yearMonthDateTime"==this.options.calendarValueType?"native"==this.options.renderType?(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile w2calendar_footer_date_mobile_div'></span>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.selectboxMinuteHTMLstr.join("")+"</div>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0'>"+a.d.getMessage("Calendar_ok")+"</a>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0'>"+a.d.getMessage("Calendar_cancel")+"</a>")):(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),e.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+a.d.getMessage("Calendar_today")+"' tabindex='0'></div>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</div>"),
this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"' ></div>"),e.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div>")):"yearMonthDateTimeSec"==this.options.calendarValueType&&("native"==this.options.renderType?(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.selectboxMinuteHTMLstr.join("")+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_sec_div'>"+this.selectboxSecondHTMLstr.join("")+"</div>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0'>"+a.d.getMessage("Calendar_ok")+"</a>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0'>"+a.d.getMessage("Calendar_cancel")+"</a>")):(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),e.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+a.d.getMessage("Calendar_today")+"' tabindex='0'></div>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_sec_div'>"+this.getChild(this.id+"_selectbox_second").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"' ></div>"),e.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div>"))),e.push("</div>")):(e.push("<table class='w2calendar_footer'><tr>"),"yearMonthDate"==this.options.calendarValueType?(0==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<td><button class='w2calendar_go_today'>"+a.d.getMessage("Calendar_today")+"</button></td>"):e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.d.getMessage("Calendar_today")+"' tabindex='0'></div></td>")),e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date'></div></td>"),1==this.options.cancleButtonShow&&0==r.D.getBoolean(this.options.topLayout)&&(e.push("<td class='w2calendar_blank' ></td>"),"native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel' role='button' >"+a.d.getMessage("Calendar_cancel")+"</a></td>"):e.push("<td><div class='w2calendar_date_cancel' role='button' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div></td>"))):"yearMonthDateHour"==this.options.calendarValueType?(0==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<td><button class='w2calendar_go_today'>"+a.d.getMessage("Calendar_today")+"</button></td>"):e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.d.getMessage("Calendar_today")+"' tabindex='0'></div></td>")),"native"==this.options.renderType?(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile'></div></td>"),e.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>")):(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date'></div></td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>")),
this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"' ></div></td>"),e.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div></td>")):"yearMonthDateTime"==this.options.calendarValueType?(0==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<td><button class='w2calendar_go_today'>"+a.d.getMessage("Calendar_today")+"</button></td>"):e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.d.getMessage("Calendar_today")+"' tabindex='0'></div></td>")),"native"==this.options.renderType?(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile'></div></td>"),e.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.selectboxMinuteHTMLstr.join("")+"</td>")):(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date'></div></td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"' ></div></td>"),e.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div></td>")):"yearMonthDateTimeSec"==this.options.calendarValueType&&("native"==this.options.renderType?(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),e.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.selectboxMinuteHTMLstr.join("")+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.selectboxSecondHTMLstr.join("")+"</td>")):(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.d.getMessage("Calendar_today")+"' ></div></td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_second").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+a.d.getMessage("Calendar_ok")+"' ></div></td>"),e.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+a.d.getMessage("Calendar_cancel")+"' ></div></td>")),e.push("</tr></table>")),e.push("</div></div>"),e.join("")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setPreAction=function(){try{if(this.render.style.width="",this.render.style.height="",this.dom.content=document.getElementById(this.id+"_content"),this.dom.currentDate=document.getElementById(this.id+"_currentDate"),this.dom.selectboxYear=document.getElementById(this.id+"_selectbox_year"),this.dom.selectboxMonth=document.getElementById(this.id+"_selectbox_month"),this.dom.selectboxHour=document.getElementById(this.id+"_selectbox_hour"),this.dom.selectboxMinute=document.getElementById(this.id+"_selectbox_minute"),this.dom.selectboxSecond=document.getElementById(this.id+"_selectbox_second"),WebSquare.style.adjustZIndex(this.uuid,this.uuid,"calendar"),"dynamic"==this.options.pickerType){this.dom.pickerLastEntity=document.getElementById(this.id+"_picker_header_last_entity"),this.dom.pickerDynamicEntity=document.getElementById(this.id+"_picker_header_dynamic_entity"),this.dom.pickerNextEntity=document.getElementById(this.id+"_picker_header_next_entity"),this.dom.pickerContent=document.getElementById(this.id+"_picker_content"),this.dom.pickerCells=[];for(var t=0;t<12;t++)this.dom.pickerCells.push(document.getElementById(this.id+"_picker_cell_"+t))
;"year"===this.options.calendarValueType?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("year"),this._setDynamicHeaderHTML("year")):"yearMonth"===this.options.calendarValueType?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("month")):this._setDynamicHeaderHTML("month")}if(!1===this.options.showToday){var e;if(r.D.isIE(8)||r.D.isIE(7)||r.D.isIE(6)){var i;i="native"==this.options.renderType?this.render.getElementsByTagName("button"):this.render.getElementsByTagName("div");for(t=0;t<i.length;t++)if("w2calendar_go_today"===i[t].className){e=i[t];break}}else e=this.render.getElementsByClassName("w2calendar_go_today")[0];e.style.width="0px"}else if("yearMonthDateTime"==this.options.calendarValueType){var o=this.getElementById(this.id+"_currentDate");o&&(o.style.display="none")}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){try{this.refresh(),r.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)}))),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),"dynamic"!=this.options.pickerType&&(this.event.addListener2(this.dom.selectboxYear,"onchange",this.event.bindAsEventListener(this,this.selectboxYearEvent)),this.event.addListener2(this.dom.selectboxMonth,"onchange",this.event.bindAsEventListener(this,this.selectboxMonthEvent)),this.event.addListener2(this.dom.selectboxYear,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)}))),this.event.addListener2(this.dom.selectboxMonth,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)}))),this.dom.selectboxHour&&this.event.addListener2(this.dom.selectboxHour,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)}))),this.dom.selectboxMinute&&this.event.addListener2(this.dom.selectboxMinute,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)}))),this.dom.selectboxSecond&&this.event.addListener2(this.dom.selectboxSecond,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)})))),"native"==this.options.renderType&&(this.dom.selectboxYear&&this.event.addListener2(this.dom.selectboxYear,"onchange",this.event.bindAsEventListener(this,this.handleYearChange)),this.dom.selectboxMonth&&this.event.addListener2(this.dom.selectboxMonth,"onchange",this.event.bindAsEventListener(this,this.handleMonthChange))),this.options.holidayRef&&this.refreshItemset()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.selectboxYearEvent=function(t){this.gotoYear(t.srcElement?t.srcElement.value:t.originalTarget.value)},d.prototype.selectboxMonthEvent=function(t){this.gotoMonth(t.srcElement?t.srcElement.value:t.originalTarget.value)},d.prototype.refresh=function(){try{if(this.holidayXpath(),this.updateCalendar(),this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();e&&(this.selectedDateHelper.setDateAllByString(e),this.setSelectedDay(this.selectedDateHelper.getDate()),
this.dom.currentDate&&(this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat)),t!=this.getValue()&&n.B.fireEvent(this,"onchange"))}if("yearMonth"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType&&(this.options.keepFixedDate?this.dom.currentDate.innerHTML=this.todayHelper.getFormatDateAll(this.options.displayFormat):this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat),!r.D.isMobile()&&"none"!=this.getStyle("display")))for(var i=0;i<this.options.visibleWeekNum;i++)for(var o=0;o<7;o++){var l=this.getElementById(this.id+"_cell_"+i+"_"+o);if(l){var h=l;if("native"!=this.options.renderType||r.D.isMobile()||null==(h=l.getElementsByTagName("button")[0])&&(h=l),this.__hasClass(l,"w2calendar_selected")){if("native"==this.options.renderType){if(0==this.options.keepFocusSelect)try{this.options.focusOnStart&&l.firstChild.focus()}catch(t){}}else try{l.setAttribute("tabIndex","0"),this.options.focusOnStart&&l.focus()}catch(t){}h.setAttribute("title",a.d.getMessage("Calendar_select_title"))}else l.setAttribute("tabIndex","-1"),h.removeAttribute("title")}}this.broadcast({linkedDataList:["refresh"]})}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.updateCalendar=function(){try{var t=this.selectedDateHelper.getYear(),e=this.selectedDateHelper.getMonth(),i=this.selectedDateHelper.getDate(),o=this.selectedDateHelper.getHour(),n=this.selectedDateHelper.getMinute(),l=this.selectedDateHelper.getSecond(),h=this.todayHelper.getYear(),d=this.todayHelper.getMonth(),c=this.todayHelper.getDate(),u=!1;if(t===h&&e===d&&(u=!0),"dynamic"!==this.options.pickerType)if("native"==this.options.renderType){if(this.options.useYearSelect)for(var p=0;p<this.dom.selectboxYear.options.length;p++)this.dom.selectboxYear.options[p].value==t&&(this.dom.selectboxYear.options[p].selected=!0);else this.getChild(this.id+"_selectbox_year").setValue(t);if(this.options.useMonthSelect)for(p=0;p<this.dom.selectboxMonth.options.length;p++)this.dom.selectboxMonth.options[p].value==e&&(this.dom.selectboxMonth.options[p].selected=!0);else this.getChild(this.id+"_selectbox_month").setValue(e)}else this.getChild(this.id+"_selectbox_year").setValue(t),this.getChild(this.id+"_selectbox_month").setValue(e),"yearMonthDateHour"==this.options.calendarValueType&&this.options.serverSync?this.getChild(this.id+"_selectbox_hour").setValue(o):"yearMonthDateTime"==this.options.calendarValueType&&this.options.serverSync?(this.getChild(this.id+"_selectbox_hour").setValue(o),this.getChild(this.id+"_selectbox_minute").setValue(n)):"yearMonthDateTimeSec"==this.options.calendarValueType&&this.options.serverSync&&(this.getChild(this.id+"_selectbox_hour").setValue(o),this.getChild(this.id+"_selectbox_minute").setValue(n),this.getChild(this.id+"_selectbox_second").setValue(l));var g=this.selectedDateHelper.getMonthCount(),m=this.selectedDateHelper.getFirstDay();(m+=this.shiftDay)<=0&&(m+=7);var f=this.options.visibleWeekNum,b=0,y=new WebSquare.uiplugin.dateHelper;y.setDateAllByString(this.selectedDateHelper.getDateAll()),y.setLastMonth();var v=y.getMonthCount(),w=1==e?t-1:t,S=1==e?12:e-1,C=12==e?t+1:t,_=12==e?1:e+1,x=new WebSquare.uiplugin.dateHelper;x.setDateAllByString(this.selectedDateHelper.getDateAll()),x.setNextMonth();var I=x.getMonthCount(),T=this.options.disableAfterDate,k=this.options.disableBeforeDate,D=this.options.disabledDate;if(this.options.ioFormat&&this.options.ioFormat.length>=8&&"yyyyMMdd"!==this.options.ioFormat){var L=this.options.ioFormat;if(T&&(T=WebSquare.text.unformatDate(L.substr(0,8),T)),k&&(k=WebSquare.text.unformatDate(L.substr(0,8),k)),D){var W=D.split(" ");for(p=0;p<W.length;p++)W[p]=WebSquare.text.unformatDate(L.substr(0,8),W[p]);D=W.join(" ")}}for(var A=0;A<f;A++)for(var M=0;M<7;M++){var E=++b-m,q=(m+E-1)%7,R="",N=this.getElementById(this.id+"_cell_"+A+"_"+M);if(N){if(k){
if(8==k.length)var F=parseInt(k.substr(0,4),10)||0,O=parseInt(k.substr(4,2),10)||0,B=parseInt(k.substr(6,2),10)||0;var V=F>this.selectedDateHelper.getYear()||F==this.selectedDateHelper.getYear()&&O>this.selectedDateHelper.getMonth()||F==this.selectedDateHelper.getYear()&&O==this.selectedDateHelper.getMonth()&&B>E}else V=this.options.disableBeforeToday&&(this.todayHelper.getYear()>this.selectedDateHelper.getYear()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()>this.selectedDateHelper.getMonth()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()==this.selectedDateHelper.getMonth()&&this.todayHelper.getDate()>E);if(T){if(8==T.length)F=parseInt(T.substr(0,4),10)||0,O=parseInt(T.substr(4,2),10)||0,B=parseInt(T.substr(6,2),10)||0;var P=F<this.selectedDateHelper.getYear()||F==this.selectedDateHelper.getYear()&&O<this.selectedDateHelper.getMonth()||F==this.selectedDateHelper.getYear()&&O==this.selectedDateHelper.getMonth()&&B<E}else P=this.options.disableAfterToday&&(this.todayHelper.getYear()<this.selectedDateHelper.getYear()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()<this.selectedDateHelper.getMonth()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()==this.selectedDateHelper.getMonth()&&this.todayHelper.getDate()<E);var H=r.D.getDataPrefix("index");if(E<1)R=v+E,N.innerHTML=R,N.className=V||P?"w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_lastmonth w2calendar_date_disable":"w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_lastmonth",N.setAttribute(H,R),N.setAttribute("title",a.d.getMessage("Calendar_tooltip",w,S<10?"0"+S:S,R)),"native"!=this.options.renderType&&N.setAttribute("tabindex","-1");else if(E>g){if((R=E-g)>I&&(R-=I,g+=I,x.setNextMonth(),I=x.getMonthCount()),N.innerHTML=R,N.className=P||V?"w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_nextmonth w2calendar_date_disable":"w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_nextmonth",N.setAttribute(H,R),N.setAttribute("title",a.d.getMessage("Calendar_tooltip",C,_<10?"0"+_:_,R)),"native"!=this.options.renderType&&N.setAttribute("tabindex","-1"),this.options.highlightSelectedWeek&&6===M&&E-M<=i&&i<=E)for(var j=0;j<7;j++){var z=this.getElementById(this.id+"_cell_"+A+"_"+j);this.addClass(z,"w2calendar_selected_week")}}else{var G,U;R=E;var X=t+""+(U=e<10?"0"+e:e)+(G=E<10?"0"+R:R),K="*"+U+G;if(i===E?(-1!==this.options.holiday.indexOf(X)?N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_holiday w2calendar_selected "+(this.objCellClass[X]||""):-1!==D.indexOf(X)&&-1===this.options.enabledDate.indexOf(X)?N.className="w2calendar_col_date w2calendar_date_"+E+" w2calendar_date_disable":N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_day_"+this.dayIndexArray[q]+" w2calendar_selected "+(this.objCellClass[X]||""),"native"!==this.options.renderType&&N.setAttribute("tabindex","0")):(-1!==this.options.holiday.indexOf(X)||-1!==this.options.holiday.indexOf(K)?N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_holiday "+(this.objCellClass[X]||""):-1===D.indexOf(X)&&-1===D.indexOf("*")||-1!==this.options.enabledDate.indexOf(X)?N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_day_"+this.dayIndexArray[q]+" "+(this.objCellClass[X]||""):N.className="w2calendar_col_date w2calendar_date_"+E+" w2calendar_date_disable","native"!=this.options.renderType&&N.setAttribute("tabindex","-1")),u&&c===E&&(N.className+=" w2calendar_today"),(V||P)&&(N.className="w2calendar_col_date w2calendar_date_"+E+" w2calendar_date_disable"),"native"!=this.options.renderType||r.D.isMobile()?N.innerHTML=R:N.innerHTML="<button>"+R+"</button>",this.options.highlightSelectedWeek&&6===M&&E-M<=i&&i<=E)for(j=0;j<7;j++){
z=this.getElementById(this.id+"_cell_"+A+"_"+j);this.addClass(z,"w2calendar_selected_week")}N.setAttribute("title",""),N.setAttribute(H,E)}}}"dynamic"===this.options.pickerType&&("year"===this.options.calendarValueType?(this._setDynamicHeaderHTML("year"),this._drawDynamicTable("year")):this._setDynamicHeaderHTML("month")),6!==this.options.visibleWeekNum&&this.setSize(null,this.dom.content.parentNode.offsetHeight)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.holidayXpath=function(){try{if(""!=this.options.holidayRef)if(this.options.holidayRef.match("data:")){var t=this.options.holidayRef.replace(/^data:/,"").split("."),e=t[0],i=this.modelControl.getDataComp(e,{type:"aliasDataCollection"});if(i){var o="";i.getRowCount()>0&&(o=i.getColData(t[1]).join(" ").replace(/[^0-9*\s*]/g,"")),this.options.holiday=o,WebSquare.DataCollection.api.addRelation(this.id,i.id)}}else for(var r=WebSquare.ModelUtil.findInstanceNodes(this.options.holidayRef,null,this.scope_id),a=0;a<r.length;a++){var n=WebSquare.xml.serialize(r[a]).replace(/[^0-9*\s*]/g,"");-1==this.options.holiday.indexOf(n)&&(this.options.holiday=this.options.holiday+" "+n)}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoCalendar=function(t){try{if(r.D.isNull(t))return;t=t.toString();var e=this.getValue();this.selectedDateHelper.setDateAllByString(t);var i=this.selectedDateHelper.getYear(),o=!1;if(this.options.selectUnlimitedYear)for(var a=this.options.selectUnlimitedYear.split(","),l=0;l<a.length;l++)a[l]==i&&(o=!0);if(i<this.minYear&&!o&&this._gotoYear(this.minYear,!1),"native"==this.options.renderType?i>this.maxYear&&this._gotoYear(this.maxYear,!1):i>this.maxYear&&!o&&(this.options.useUnlimitedYear&&"9999"==i?this._gotoYear(i,!1):this._gotoYear(this.maxYear,!1)),"native"==this.options.renderType&&e.substring(0,6)==this.getValue().substring(0,6)?(this.setSelectedDay(this.selectedDateHelper.getDate()),this.dom.currentDate&&(this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat))):this.refresh(),this.getValue()!=e&&n.B.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]}),"dynamic"==this.options.pickerType){switch("day"!==this.dynamicCalendarStatus&&"month"!==this.dynamicCalendarStatus&&"year"!==this.dynamicCalendarStatus&&"decade"!==this.dynamicCalendarStatus&&(WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.dynamicCalendarStatus="day"),this.dynamicCalendarStatus){case"month":this.setSelectedDay(this.selectedDateHelper.getMonth()-1)}this.pickerSelectedDateHelper.setDateAllByString(t),this._refreshDynamicSelectedDecateIndex(),"year"===this.options.calendarValueType?(this._setDynamicHeaderHTML("year"),this._drawDynamicTable("year")):this._setDynamicHeaderHTML("month")}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoToday=function(){try{this.options.serverSync&&this.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType});var t=this.todayHelper.getYear(),e=this.todayHelper.getMonth(),i=this.todayHelper.getDate();this.gotoCalendar(this.getDateString(t,e,i)),this._pickerStatusRefresh()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoNextYear=function(){try{var t=this.getValue();this.selectedDateHelper.setNextYear(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setNextYear(),this.refresh(),this.getValue()!=t&&n.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoNextMonth=function(){try{var t=this.getValue();this.selectedDateHelper.setNextMonth(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setNextMonth(),this.refresh(),this.getValue()!=t&&n.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoLastYear=function(){try{var t=this.getValue();this.selectedDateHelper.setLastYear(),
"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setLastYear(),this.refresh(),this.getValue()!=t&&n.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoLastMonth=function(){try{var t=this.getValue();this.selectedDateHelper.setLastMonth(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setLastMonth(),this.refresh(),this.getValue()!=t&&n.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoYear=function(t){try{this._gotoYear(t,!0)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype._gotoYear=function(t,e){try{e=void 0===e||e;var i=this.getValue();this.selectedDateHelper.setYear(t),this.selectedDateHelper._checkValidDate(),"dynamic"==this.options.pickerType&&(this.pickerSelectedDateHelper.setYear(t),this.pickerSelectedDateHelper._checkValidDate()),this.refresh(),this.getValue()!=i&&e&&n.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoMonth=function(t){try{var e=this.getValue();this.selectedDateHelper.setMonth(t),this.selectedDateHelper._checkValidDate(),"dynamic"==this.options.pickerType&&(this.pickerSelectedDateHelper.setMonth(t),this.pickerSelectedDateHelper._checkValidDate()),this.refresh(),this.getValue()!=e&&n.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.gotoTime=function(t,e,i){try{if(this.options.visibleHourList||(t=parseInt(t,10)),this.options.visibleMinList||(e=parseInt(e,10)),this.options.visibleSecList||(i=parseInt(i,10)),"native"==this.options.renderType)if("yearMonthDateHour"==this.options.calendarValueType){var o=this.dom.selectboxHour.value;this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxHour.value!=o&&n.B.fireEvent(this,"onchange")}else if("yearMonthDateTime"==this.options.calendarValueType){o=this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value;this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxMinute.value=parseInt(e,10)+" ",this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value!=o&&n.B.fireEvent(this,"onchange")}else"yearMonthDateTimeSec"==this.options.calendarValueType&&(o=this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value+"_"+this.dom.selectboxSecond.value,this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxMinute.value=parseInt(e,10)+" ",this.dom.selectboxSecond.value=parseInt(i,10)+" ",this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value+"_"+this.dom.selectboxSecond.value!=o&&n.B.fireEvent(this,"onchange"));else{var r=this.getChild(this.id+"_selectbox_hour"),a=this.getChild(this.id+"_selectbox_minute"),l=this.getChild(this.id+"_selectbox_second");o=null;"yearMonthDateHour"==this.options.calendarValueType?(o=r.getValue(),r.setValue(t),r.getValue()!=o&&n.B.fireEvent(this,"onchange")):"yearMonthDateTime"==this.options.calendarValueType?(o=r.getValue()+"_"+a.getValue(),r.setValue(t),a.setValue(e),r.getValue()+"_"+a.getValue()!=o&&n.B.fireEvent(this,"onchange")):"yearMonthDateTimeSec"==this.options.calendarValueType&&(o=r.getValue()+"_"+a.getValue()+"_"+l.getValue(),r.setValue(t),a.setValue(e),l.setValue(i),r.getValue()+"_"+a.getValue()+"_"+l.getValue()!=o&&n.B.fireEvent(this,"onchange"))}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getValue=function(){try{var t="";return"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType||"year"==this.options.calendarValueType?t=this.getDate():"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(t=this.getDate()+""+this.getTime()),t}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getDate=function(){try{var t="";if("yearMonthDate"==this.options.calendarValueType)t=this.selectedDateHelper.getDateAll();else if("yearMonth"==this.options.calendarValueType){var e=this.selectedDateHelper.getYear(),i=this.selectedDateHelper.getMonth()
;parseInt(i)<10&&(i="0"+i),t=e+""+i}else if("year"==this.options.calendarValueType){t=(e=this.selectedDateHelper.getYear())+""}else"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(t=this.selectedDateHelper.getDateAll());return t}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getTime=function(){try{var t="";if("yearMonthDateHour"==this.options.calendarValueType){if("native"==this.options.renderType)var e=this.dom.selectboxHour.value.wq_trim();else e=this.getChild(this.id+"_selectbox_hour").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),t=e+""}else if("yearMonthDateTime"==this.options.calendarValueType){if("native"==this.options.renderType){e=this.dom.selectboxHour.value.wq_trim();var i=this.dom.selectboxMinute.value.wq_trim()}else e=this.getChild(this.id+"_selectbox_hour").getValue(),i=this.getChild(this.id+"_selectbox_minute").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),parseInt(i,10)<10&&i.length<2&&(i="0"+i),t=e+""+i}else if("yearMonthDateTimeSec"==this.options.calendarValueType){if("native"==this.options.renderType){e=this.dom.selectboxHour.value.wq_trim(),i=this.dom.selectboxMinute.value.wq_trim();var o=this.dom.selectboxSecond.value.wq_trim()}else e=this.getChild(this.id+"_selectbox_hour").getValue(),i=this.getChild(this.id+"_selectbox_minute").getValue(),o=this.getChild(this.id+"_selectbox_second").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),parseInt(i,10)<10&&i.length<2&&(i="0"+i),parseInt(o,10)<10&&o.length<2&&(o="0"+o),t=e+""+i+o}return t}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getDateFormat=function(){try{return this.options.dateFormat}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getFormattedValue=function(){try{var t=this.getValue();if("yearMonthDate"==this.options.calendarValueType)if(""!=(n=this.getDateFormat()||"")){var e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6);t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)}else t=this.formatter.format(t);else if("yearMonth"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4);t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)}else t=this.formatter.format(t)}else if("yearMonthDateHour"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8);var r=t.substring(8,10);t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)}else t=this.formatter.format(t)}else if("yearMonthDateTime"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8),r=t.substring(8,10);var a=t.substring(10);t=(t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)).replace(/mm/g,a)}else t=this.formatter.format(t)}else if("yearMonthDateTimeSec"==this.options.calendarValueType){var n;if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8),r=t.substring(8,10),a=t.substring(10,12);var l=t.substring(12);t=(t=(t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)).replace(/mm/g,a)).replace(/SS/gi,l)}else t=this.formatter.format(t)}return t}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getSelectedDay=function(){try{return"yearMonth"==this.options.calendarValueType?"":this.selectedDateHelper.getDayStr(this.selectedDateHelper.getDay())}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setDateFormat=function(t){try{if("yearMonthDate"==this.options.calendarValueType){if(t.indexOf("HH")>0||t.indexOf("mm")>0||t.indexOf("SS")>0)return void l.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonthDate'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM, dd입니다.")}else if("yearMonth"==this.options.calendarValueType){
if(t.indexOf("dd")>0||t.indexOf("HH")>0||t.indexOf("mm")>0||t.indexOf("SS")>0)return void l.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonth'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM입니다.")}else if("yearMonthDateHour"==this.options.calendarValueType){if(t.indexOf("mm")>0||t.indexOf("SS")>0)return void l.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonthDateHour'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM, dd, HH입니다.")}else if("yearMonthDateTime"==this.options.calendarValueType){if(t.indexOf("SS")>0)return void l.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonthDateTime'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM, dd, HH, mm입니다.")}else this.options.calendarValueType;this.options.dateFormat=t,this.formatter.setMasking(t)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setSkin=function(t){try{"class1"!=t&&"class2"!=t&&"class3"!=t&&"class4"!=t&&"class5"!=t||(this.changeClass(this.render,"w2calendar_"+this.options.calendarClass,"w2calendar_"+t),this.options.calendarClass=t)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setInitValue=function(t){try{if(""===this.options.initValue?this.gotoToday():this.gotoCalendar(this.options.initValue),t.fireEvent){var e=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.B.fireEvent(this,"ondateselect",this.getFormattedValue(),e)}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.updateYearSelect=function(t,e){try{var i=this.getChild(this.id+"_selectbox_year"),o=i.getValue();t&&(this.options.minYear=t,this.minYear=t),e&&(this.options.maxYear=e,this.maxYear=e),i.removeAll(),i.itemTable=null;for(var r=a.d.getMessage("Calendar_yearsuffix"),n=this.options.yearSuffix?this.options.yearSuffix:r,l=this.options.minYear;l<this.options.maxYear+1;l++)i.addItemArr(l+n,l);if(!1!==this.options.useUnlimitedYear&&i.addItemArr("9999"+n,"9999"),this.options.selectUnlimitedYear)for(var h=this.options.selectUnlimitedYear.split(","),d=0;d<h.length;d++)h[d]<this.options.minYear?i.addItem(h[d],h[d]+n,0):h[d]>this.options.maxYear&&i.addItemArr(h[d]+n,h[d]);if(o<t||o>e){o<t?(i.setValue(t),this.gotoYear(t)):o>e&&(i.setValue(e),this.gotoYear(e));var c=this.getFormattedValue();c=this.parentControl.validator.validateString(c),c=this.parentControl.sub_validator.validateString(c),""!=this.parentControl.getValue()&&this.parentControl.setValue(c),this.gotoCalendar(c),this.selectedDateHelper.setDateAll(c.substring(0,4),c.substring(4,6),c.substring(6,8),c.substring(8,10),c.substring(10,12),c.substring(12,14))}else i.setValue(o)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setDisabled=function(t){try{t=r.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),this.render.disabled=t,"native"===this.options.renderType?"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled")):"yearMonthDateHour"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled")):"yearMonthDateTime"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled"),this.dom.selectboxMinute.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled"),
this.dom.selectboxMinute.removeAttribute("disabled")):"yearMonthDateTimeSec"==this.options.calendarValueType&&(t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled"),this.dom.selectboxMinute.setAttribute("disabled","disabled"),this.dom.selectboxSecond.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled"),this.dom.selectboxMinute.removeAttribute("disabled"),this.dom.selectboxSecond.removeAttribute("disabled"))):"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t)):"yearMonthDateHour"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t)):"yearMonthDateTime"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t),this.getChild(this.id+"_selectbox_minute").setDisabled(t)):"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t),this.getChild(this.id+"_selectbox_minute").setDisabled(t),this.getChild(this.id+"_selectbox_second").setDisabled(t))}catch(t){s.w.printStackTrace(t)}return t},d.prototype.handleFocusEvent=function(t){try{if((t.srcElement?t.srcElement:t.originalTarget)==this.render){if("yearMonth"==this.options.calendarValueType){var e=this.getElementById(this.id+"_selectbox_year");return void(e&&e.focus())}var i,o,r;for(i=0;i<this.options.visibleWeekNum;i++)for(o=0;o<7;o++)if(r=this.getElementById(this.id+"_cell_"+i+"_"+o),this.__hasClass(r,"w2calendar_selected")){if("native"==this.options.renderType){if(0==this.options.keepFocusSelect)try{r.firstChild.focus()}catch(t){}}else try{r.focus()}catch(t){}return}}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(13!=e&&37!=e&&38!=e&&39!=e&&40!=e&&9!=e)return;if(13==e)return void this.handleClickEvent(t);if("native"==this.options.renderType)return;var i="year"===this.options.calendarValueType||"yearMonth"===this.options.calendarValueType;if(9==e)return void(i&&this.options.pickerType);if(i)return;for(var o,a=r.D.getDataPrefix("index"),l=this.event.getTargetIterator(t,this.render),h=!1;l.next();)if(1==(o=l.getElement()).nodeType&&"td"==o.nodeName.toLowerCase()&&o.getAttribute(a)){h=!0;break}if(0==h)return;var d=o.id.substr((this.id+"_cell_").length),c=-1,u=-1;u=parseInt(d.substr(0,d.indexOf("_")),10),((c=parseInt(d.substr(d.indexOf("_")+1),10))<0||u<0)&&(c=u=0),37==e?--c<0&&(u>0?(c=6,u--):c=0):38==e?u>0&&u--:39==e?++c>6&&(u<7?(c=0,u++):c=6):40==e&&u<7&&u++;var p=document.getElementById(this.id+"_cell_"+u+"_"+c);if(null==p)return;o.setAttribute("tabIndex",-1),p.setAttribute("tabIndex",0),p.focus(),n.B.stopEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setSelectedDay=function(t){try{var e=r.D.getDataPrefix("index");if("selectbox"===this.options.pickerType)for(var i=0;i<this.options.visibleWeekNum;i++)for(var o=0;o<7;o++){if((l=this.getElementById(this.id+"_cell_"+i+"_"+o))&&this.hasClass(l,"w2calendar_date_on")){var n=l;"native"!=this.options.renderType||r.D.isMobile()||null==(n=l.getElementsByTagName("button")[0])&&(n=l),l.getAttribute(e)==t?(this.addClass(l,"w2calendar_selected"),n.setAttribute("title",a.d.getMessage("Calendar_select_title"))):(this.removeClass(l,"w2calendar_selected"),n.removeAttribute("title"))}
}else if("dynamic"===this.options.pickerType)if("year"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType)for(var l=0;l<12;l++){var h=this.getElementById(this.id+"_picker_cell_"+l);h&&(h.getAttribute(e)==t?(this.addClass(h,"active"),h.setAttribute("title",a.d.getMessage("Calendar_select_title"))):(this.removeClass(h,"active"),h.removeAttribute("title")))}else for(i=0;i<this.options.visibleWeekNum;i++)for(o=0;o<7;o++){if((l=this.getElementById(this.id+"_cell_"+i+"_"+o))&&this.hasClass(l,"w2calendar_date_on")){n=l;"native"!=this.options.renderType||WebSquare.util.isMobile()||null==(n=l.getElementsByTagName("button")[0])&&(n=l),l.getAttribute(e)==t?(this.addClass(l,"w2calendar_selected"),n.setAttribute("title",a.d.getMessage("Calendar_select_title"))):(this.removeClass(l,"w2calendar_selected"),n.removeAttribute("title"))}}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setFocus=function(t){try{for(var e=r.D.getDataPrefix("index"),i=0;i<this.options.visibleWeekNum;i++)for(var o=0;o<7;o++){var a=this.getElementById(this.id+"_cell_"+i+"_"+o);if(a&&(this.hasClass(a,"w2calendar_date_on")&&a.getAttribute(e)==t))return void a.focus()}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.hide=function(){try{h.s.prototype.hide.call(this),"yearMonth"==this.options.calendarValueType&&this.options.outsideClickEvent&&n.B.fireEvent(this,"onoutsideclick");for(var t=0;t<this.childControlList.length;t++){this.childControlList[t].hide()}}catch(t){s.w.printStackTrace(t)}},d.prototype.show=function(t,e){try{e&&WebSquare.idCache[e]||(e=this.uuid),h.s.prototype.show.call(this,t),WebSquare.style.adjustZIndex(e,this.uuid,"calendar");for(var i=0;i<this.childControlList.length;i++){this.childControlList[i].show(t)}}catch(t){s.w.printStackTrace(t)}},d.prototype.getDateString=function(t,e,i){try{void 0===t&&(t=this.selectedDateHelper.getYear()),void 0===e&&(e=this.selectedDateHelper.getMonth()),void 0===i&&(i=this.selectedDateHelper.getDate());var o=t+"",r=e+"",a=i+"";return 1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),o+r+a}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleClickEvent=function(t){try{for(var e=r.D.getDataPrefix("index"),i=this.event.getTargetIterator(t,this.render),o=this.getValue();i.next();){if(i.match("w2calendar_header_last_year")||i.match("w2calendar_header_next_year")||i.match("w2calendar_header_next_year_yearType")||i.match("w2calendar_header_last_month")||i.match("w2calendar_header_next_month")||i.match("w2calendar_go_today"))for(var a=0;a<this.childControlList.length;a++){var l=this.childControlList[a];WebSquare.getBody().getLayerListener().hide(l.id)}if(i.match("w2calendar_date_disable")&&(n.B.stopEvent(t),i.stop()),i.match("w2calendar_header_last_year")){if(this.selectedDateHelper.getYear()>this.minYear){var h=1;1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),this.selectedDateHelper.setDate(h),this.gotoLastYear()}if("native"==this.options.renderType){var d=this.selectedDateHelper.getYear();(o=Number(this.oldYearValue))!=d&&n.B.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldYearValue=d}i.stop()}if(i.match("w2calendar_header_next_year")||i.match("w2calendar_header_next_year_yearType")){h=1;if(1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),(this.selectedDateHelper.getYear()<this.maxYear||this.options.useUnlimitedYear&&this.selectedDateHelper.getYear()==this.maxYear)&&(this.selectedDateHelper.setDate(h),this.gotoNextYear()),"native"==this.options.renderType){d=this.selectedDateHelper.getYear();(o=Number(this.oldYearValue))!=d&&n.B.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldYearValue=d}i.stop()}if(i.match("w2calendar_header_last_month")){if(this.selectedDateHelper.getYear()>=this.minYear)if(this.selectedDateHelper.getYear()==this.minYear&&1==this.selectedDateHelper.getMonth());else{h=1;1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),
this.selectedDateHelper.setDate(h),this.gotoLastMonth()}if("native"==this.options.renderType){d=this.selectedDateHelper.getMonth();(o=Number(this.oldMonthValue))!=d&&n.B.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldMonthValue=d}i.stop()}if(i.match("w2calendar_header_next_month")){h=1;if(1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),this.selectedDateHelper.getYear()<=this.maxYear?this.selectedDateHelper.getYear()==this.maxYear&&12==this.selectedDateHelper.getMonth()?this.options.useUnlimitedYear&&(this.selectedDateHelper.setDate(h),this.gotoNextMonth()):(this.selectedDateHelper.setDate(h),this.gotoNextMonth()):this.options.useUnlimitedYear&&"9999"==this.selectedDateHelper.getYear()&&this.selectedDateHelper.getMonth()<12&&(this.selectedDateHelper.setDate(h),this.gotoNextMonth()),"native"==this.options.renderType){d=this.selectedDateHelper.getMonth();(o=Number(this.oldMonthValue))!=d&&n.B.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldMonthValue=d}i.stop()}if(i.match("w2calendar_date_lastmonth")){if(1==this.options.disableBeforeAfterDate)return;var c=this.selectedDateHelper.getYear(),u=this.selectedDateHelper.getMonth(),p=i.getElement().getAttribute(e);if(c>=this.minYear)if(c==this.minYear&&1==u);else if(u>1?u-=1:(c-=1,u=12),this.options.nextLastMonthDateSelect){var g=new Date(c,u,p),m=this.getDateString(c,u,p);this.gotoCalendar(m),n.B.fireEvent(this,"ondateselect")}else this.gotoCalendar(this.getDateString(c,u,p)),this.setFocus(p);i.stop()}if(i.match("w2calendar_date_nextmonth")){if(1==this.options.disableBeforeAfterDate)return;c=this.selectedDateHelper.getYear(),u=this.selectedDateHelper.getMonth(),p=i.getElement().getAttribute(e);if(c<=this.maxYear)if(c==this.maxYear&&12==u);else if(u<12?u+=1:(c+=1,u=1),this.options.nextLastMonthDateSelect){g=new Date(c,u,p),m=this.getDateString(c,u,p);this.gotoCalendar(m),n.B.fireEvent(this,"ondateselect")}else this.gotoCalendar(this.getDateString(c,u,p)),this.setFocus(p);i.stop()}if((i.match("w2calendar_header_btn_ok")||i.match("w2calendar_header_btn_ok_yearType")||i.match("w2inputCalendar_header_btn_ok_div"))&&(n.B.fireEvent(this,"onconfirm"),i.stop()),(i.match("w2calendar_header_btn_close")||i.match("w2calendar_header_btn_close_yearType")||i.match("w2inputCalendar_header_btn_close_div"))&&(n.B.fireEvent(this,"oncancel"),i.stop()),i.match("w2calendar_time_confirm")&&(n.B.fireEvent(this,"onconfirm"),i.stop()),i.match("w2calendar_time_cancel")&&(n.B.fireEvent(this,"oncancel"),n.B.stopEvent(t),i.stop()),i.match("w2calendar_date_cancel")&&(n.B.fireEvent(this,"oncancel"),n.B.stopEvent(t),i.stop()),i.match("w2calendar_go_today")){if(this.gotoToday(),"native"==this.options.renderType||this.options.todaySelect){c=this.todayHelper.getYear(),u=this.todayHelper.getMonth(),p=this.todayHelper.getDate(),g=new Date(c,u-1,p);n.B.fireEvent(this,"ondateselect",this.getFormattedValue(),g)}i.stop()}if(i.match("w2calendar_date_on")){c=this.selectedDateHelper.getYear(),u=this.selectedDateHelper.getMonth(),p=i.getElement().getAttribute(e);this.gotoCalendar(this.getDateString(c,u,p));g=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.B.fireEvent(this,"ondateselect",this.getFormattedValue(),g),i.stop()}if(i.match("w2calendar_picker_header_dynamic_entity")&&("day"==this.dynamicCalendarStatus?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year"),this.dynamicCalendarStatus="month"):"month"==this.dynamicCalendarStatus?"month"!=this.options.fixPickerStatus&&(this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"),this.dynamicCalendarStatus="year"):"year"==this.dynamicCalendarStatus&&(this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century"),this.dynamicCalendarStatus="decade"),i.stop()),
i.match("w2calendar_picker_header_last_entity"))if("day"==this.dynamicCalendarStatus)this.selectedDateHelper.getYear()>=this.minYear&&(this.selectedDateHelper.getYear()==this.minYear&&1==this.selectedDateHelper.getMonth()||(this.selectedDateHelper.setDate(1),this.gotoLastMonth(),this._setDynamicHeaderHTML("month"))),i.stop();else if("month"==this.dynamicCalendarStatus){(f=this.selectedDateHelper.getYear()-1)>=this.minYear&&(this.pickerSelectedDateHelper.setYear(f),this.selectedDateHelper.setYear(f),this._setDynamicHeaderHTML("year"))}else if("year"==this.dynamicCalendarStatus)this.pickerSelectedDateHelper.selectedDecadeIndex>0&&(this.pickerSelectedDateHelper.selectedDecadeIndex-=1,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"));else if("decade"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.startDecadeIndex-12<0)return;this.pickerSelectedDateHelper.startDecadeIndex-=12,this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century")}if(i.match("w2calendar_picker_header_next_entity"))if("day"==this.dynamicCalendarStatus)this.selectedDateHelper.getYear()<=this.maxYear&&(this.selectedDateHelper.getYear()==this.maxYear&&12==this.selectedDateHelper.getMonth()||(this.selectedDateHelper.setDate(1),this.gotoNextMonth(),this._setDynamicHeaderHTML("month"))),i.stop();else if("month"==this.dynamicCalendarStatus){var f;(f=this.selectedDateHelper.getYear()+1)<=this.maxYear&&(this.pickerSelectedDateHelper.setYear(f),this.selectedDateHelper.setYear(f),this._setDynamicHeaderHTML("year"))}else if("year"==this.dynamicCalendarStatus)this.pickerSelectedDateHelper.selectedDecadeIndex<this.pickerSelectedDateHelper.decadeArr.length-1&&(this.pickerSelectedDateHelper.selectedDecadeIndex+=1,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"));else if("decade"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.startDecadeIndex+12>=this.pickerSelectedDateHelper.decadeArr.length)return;this.pickerSelectedDateHelper.startDecadeIndex+=12,this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century")}if(i.match("w2calendar_picker_cell")){if("month"==this.dynamicCalendarStatus){var b=parseInt(i.getElement().getAttribute(e),10);if("yearMonth"==this.options.calendarValueType){o=this.getValue();this.pickerSelectedDateHelper.setMonth(b+1),this.selectedDateHelper.setMonth(b+1),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("month");d=this.getValue();n.B.fireEvent(this,"onmonthselect",{oldValue:o,newValue:d})}else WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.pickerSelectedDateHelper.setMonth(b+1),this.gotoMonth(b+1),this._setDynamicHeaderHTML("month"),this.dynamicCalendarStatus="day"}else if("year"==this.dynamicCalendarStatus){b=parseInt(i.getElement().getAttribute(e),10);var y=this.pickerSelectedDateHelper.selectedDecadeIndex,v=this.pickerSelectedDateHelper.decadeArr;if(v[y][0]+b<=this.options.maxYear)if("year"==this.options.calendarValueType){o=this.getValue();this.pickerSelectedDateHelper.setYear(v[y][0]+b),this.selectedDateHelper.setYear(v[y][0]+b),this._drawDynamicTable("year"),this._setDynamicHeaderHTML("year");d=this.getValue();n.B.fireEvent(this,"onyearselect",{oldValue:o,newValue:d})}else this.pickerSelectedDateHelper.setYear(v[y][0]+b),this.selectedDateHelper.setYear(v[y][0]+b),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year"),this.dynamicCalendarStatus="month"}else if("decade"==this.dynamicCalendarStatus){b=parseInt(i.getElement().getAttribute(e),10);this.pickerSelectedDateHelper.selectedDecadeIndex=this.pickerSelectedDateHelper.startDecadeIndex+b,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"),this.dynamicCalendarStatus="year"}i.stop()}}i=null,o!=(d=this.getValue())&&n.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:d})}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleMouseoverEvent=function(t){try{n.B.stopEvent(t)
;for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2calendar_go_today")?this.addClass(e.getElement(),"w2calendar_go_today_over"):e.match("w2calendar_date_on")?this.addClass(e.getElement(),"w2calendar_date_over"):e.match("w2calendar_time_confirm")?this.addClass(e.getElement(),"w2calendar_time_confirm_over"):e.match("w2calendar_time_cancel")?this.addClass(e.getElement(),"w2calendar_time_cancel_over"):e.match("w2calendar_header_btn_ok")||e.match("w2calendar_header_btn_ok_yearType")?this.addClass(e.getElement(),"w2calendar_header_btn_ok_over"):(e.match("w2calendar_header_btn_close")||e.match("w2calendar_header_btn_close_yearType"))&&this.addClass(e.getElement(),"w2calendar_header_btn_close_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleMouseoutEvent=function(t){try{n.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2calendar_go_today")?this.removeClass(e.getElement(),"w2calendar_go_today_over"):e.match("w2calendar_date_on")?this.removeClass(e.getElement(),"w2calendar_date_over"):e.match("w2calendar_time_confirm")?this.removeClass(e.getElement(),"w2calendar_time_confirm_over"):e.match("w2calendar_time_cancel")?this.removeClass(e.getElement(),"w2calendar_time_cancel_over"):e.match("w2calendar_header_btn_ok")||e.match("w2calendar_header_btn_ok_yearType")?this.removeClass(e.getElement(),"w2calendar_header_btn_ok_over"):(e.match("w2calendar_header_btn_close")||e.match("w2calendar_header_btn_close_yearType"))&&this.removeClass(e.getElement(),"w2calendar_header_btn_close_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleYearChange=function(t){try{var e=t.target||t.srcElement,i=Number(e.value),o=Number(this.oldYearValue);o!=i&&n.B.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:i}),this.oldYearValue=i}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleMonthChange=function(t){try{var e=t.target||t.srcElement,i=Number(e.value),o=Number(this.oldMonthValue);o!=i&&n.B.fireEvent(this.getParent(),"onmonthselect",{oldValue:o,newValue:i}),this.oldMonthValue=i}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getServerDate=function(){return WebSquare.date.getCurrentServerDate()},d.prototype.shiftDayIndex=function(t){if(t>0)for(var e=0;e<t;e++)this.dayIndexArray.unshift(this.dayIndexArray.pop());else for(e=0;e<Math.abs(t);e++)this.dayIndexArray.push(this.dayIndexArray.shift())},d.prototype.setCellClass=function(t,e){try{this.objCellClass[t]=e,this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.removeCellClass=function(t){try{this.objCellClass[t]="",this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.removeAllCellClass=function(){try{for(var t in this.objCellClass)this.objCellClass[t]="";this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.finalize=function(){for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove()},d.prototype.setHolidayRef=function(t){try{t&&(this.options.holidayRef=t,this.modelControl.useItemset=!0,this.refreshItemset())}catch(t){s.w.printStackTrace(t)}},d.prototype.refreshItemset=function(){try{var t=this.options.holidayRef.replace(/^data:/,"").split(".")[0],e=this.modelControl.getDataComp(t,{type:"aliasDataCollection"});null==this._dataList&&null!=e&&(this._dataList=e,this._dataList.addChild(this),this.modelControl.useItemset=!0);var i=this.options.holiday.slice(0);this.holidayXpath(),i!=this.options.holiday&&this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setHoliday=function(t,e){try{t&&(this.options.holiday=e?t:this.options.holiday+" "+t),this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.removeHoliday=function(){try{this.options.holiday="",this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.disableDate=function(t){try{t&&(this.options.disabledDate=this.options.disabledDate+" "+t)
;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.enabledDate=this.options.enabledDate.replace(new RegExp(o,"g"),"")}this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.enableDate=function(t){try{this.options.enabledDate=this.options.enabledDate+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.disabledDate=this.options.disabledDate.replace(new RegExp(o,"g"),"")}this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.disableBeforeDate=function(t){try{t&&(this.options.disableBeforeDate=t),this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.disableAfterDate=function(t){try{t&&(this.options.disableAfterDate=t),this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.enableAllDate=function(){try{this.options.disableBeforeDate="",this.options.disableAfterDate="",this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t={};return t.ref=this.options.ref,t.holidayRef=this.options.holidayRef,t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t}return null}catch(t){s.w.printStackTrace(t)}},d.prototype.getFocusedComponentId=function(){try{return this.id.split("_")[0]}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype._setDynamicHeaderHTML=function(t){try{var e=a.d.getMessage("Calendar_yearsuffix"),i=this.options.yearSuffix?this.options.yearSuffix:e;switch(t){case"month":var o=this.pickerSelectedDateHelper.getYear(),r=this.pickerSelectedDateHelper.getMonth(),n=a.d.getMessage("Calendar_monthnames").split(","),l=this.options.monthNames?this.options.monthNames.split(","):n;"month"==this.options.dynamicHeaderOrder?this.dom.pickerDynamicEntity.innerHTML="<span class='month'>"+l[r-1]+"</span><span class='year'>"+o+i+"</span>":"year"==this.options.dynamicHeaderOrder&&(this.dom.pickerDynamicEntity.innerHTML="<span class='year'>"+o+i+"</span><span class='month'>"+l[r-1]+"</span>");break;case"year":o=this.pickerSelectedDateHelper.getYear();this.dom.pickerDynamicEntity.innerHTML=o+i;break;case"decade":var h=this.pickerSelectedDateHelper.decadeArr[this.pickerSelectedDateHelper.selectedDecadeIndex];this.dom.pickerDynamicEntity.innerHTML=h[0]+" - "+h[1];break;case"century":var d=this.pickerSelectedDateHelper.startDecadeIndex,c=d+11,u=this.pickerSelectedDateHelper.decadeArr;void 0===u[c]&&(c=u.length-1),this.dom.pickerDynamicEntity.innerHTML=u[d][0]+" - "+u[c][1]}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype._drawDynamicTable=function(t){try{switch(t){case"month":for(var e=this.pickerSelectedDateHelper.getMonth(),i=this.pickerSelectedDateHelper.getYear(),o=a.d.getMessage("Calendar_monthnames").split(","),r=this.options.monthNames?this.options.monthNames.split(","):o,n=0;n<12;n++){var l=r[n]||n+1;this.dom.pickerCells[n].firstChild.innerHTML=l,this.removeClass(this.dom.pickerCells[n],"active"),n==e-1&&this.addClass(this.dom.pickerCells[n],"active")}break;case"year":for(var h=this.pickerSelectedDateHelper.decadeArr[this.pickerSelectedDateHelper.selectedDecadeIndex],d=(i=this.pickerSelectedDateHelper.getYear(),0);d<12;d++){(l=d+h[0])>this.options.maxYear?this.dom.pickerCells[d].firstChild.innerHTML="":this.dom.pickerCells[d].firstChild.innerHTML=l,this.removeClass(this.dom.pickerCells[d],"active"),l==i&&this.addClass(this.dom.pickerCells[d],"active")}break;case"decade":for(var c=this.pickerSelectedDateHelper.selectedDecadeIndex,u=this.pickerSelectedDateHelper.startDecadeIndex,p=this.pickerSelectedDateHelper.decadeArr,g=0;g<12;g++){var m=u+g;h=p[m];m<p.length?this.dom.pickerCells[g].firstChild.innerHTML=h[0]+" - "+h[1]:this.dom.pickerCells[g].firstChild.innerHTML="",this.removeClass(this.dom.pickerCells[g],"active"),m==c&&this.addClass(this.dom.pickerCells[g],"active")}}
6!==this.options.visibleWeekNum&&this.setSize(null,this.dom.content.parentNode.offsetHeight)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype._pickerStatusRefresh=function(){try{"dynamic"===this.options.pickerType&&("yearMonth"===this.options.calendarValueType?(this.dynamicCalendarStatus="month",this._drawDynamicTable("month")):"year"===this.options.calendarValueType?(this._refreshDynamicSelectedDecateIndex(),this._drawDynamicTable("year"),this.dynamicCalendarStatus="year"):(WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.dynamicCalendarStatus="day"))}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype._refreshDynamicSelectedDecateIndex=function(){try{for(var t=this.pickerSelectedDateHelper.getYear(),e=0;e<this.pickerSelectedDateHelper.decadeArr.length;e++)if(t>=this.pickerSelectedDateHelper.decadeArr[e][0]&&t<=this.pickerSelectedDateHelper.decadeArr[e][1]){this.pickerSelectedDateHelper.selectedDecadeIndex=e,this.pickerSelectedDateHelper.startDecadeIndex=12*Math.floor(e/12);break}}catch(t){s.w.printStackTrace(t,null,this)}}},3730:(t,e,i)=>{i.r(e),i.d(e,{checkbox:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(3729),d=i(1577),c=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(c.prototype,l.s.prototype),o.x.extend(c.prototype,h.E.prototype),o.x.extend(c.prototype,d.z.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.checkbox",pluginName:"checkbox",userEvents:["onchange","onlabelclick","oncheckboxclick","onviewchange","onkeyup","onkeydown"],useConfig:!0,serializable:!0,renderType:"",tagname:"div",itemTagname:"div",value:"",cols:0,rows:0,name:"",selectedindex:-1,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",useCheckboxTitle:!0,escape:!0,falseValue:"",ignoreTabIndex:!1,separator:" ",tooltipItemLabel:"",tooltipShowAlways:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",refInitSync:!1},c.prototype.initialize=function(t){try{this.inputType="checkbox";var e=s.v.getConfiguration("/WebSquare/checkbox/renderType/@value");""==this.options.renderType&&""!=e?this.options.renderType=e:""==this.options.renderType&&(this.options.renderType="table"),"native"==this.options.renderType?this.itemArr=[{label:"",value:this.options.value}]:this.initializeItemArr(t),this.itemDisabledArray=[];for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.setTableCount(),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.oldValueForIE=[],this.settingData=!1,this.options.tooltipFormatter&&(this.tooltipFormatter=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=this.itemArr.length,i=this.options.name||this.id+"_input",o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.title?"":"title='"+this.options.title+"'",a=1==this.options.ignoreTabIndex?" tabindex='-1'":""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",l=n.D.getDataPrefix("index");if("native"==this.options.renderType.toLowerCase())t.push("<input type='"+this.inputType+"' "+o+" class='w2"+this.inputType+"_input "+this.options.className+"' name='"+i+"' id='"+this.id+"' "+l+"='0' "+s+a+" />");else if("checkboxgroup"==this.options.renderType.toLowerCase()){t.push("<"+this.options.tagname+" id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+">");for(var h=0;h<e;h++){var d="";this.itemArr&&this.itemArr[h]&&!0===this.itemArr[h]._hidden&&(d=" style='display:none;'")
;var c=this.id+"_input_"+h,u=this.options.escape?WebSquare.xml._encode(this.itemArr[h].label):this.itemArr[h].label,p="",g="";this.itemDisabledArray[h]&&(p="disabled",g="w2checkbox_disabled"),t.push("<"+this.options.itemTagname+" class='w2checkbox_item w2checkbox_item_"+h+"'"+d+">"),t.push("<input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' "+l+"='"+h+"' id='"+c+"' "+p+a+" />"),t.push("<label class='w2"+this.inputType+"_label "+g+"' "+l+"='"+h+"' for='"+c+"'>"+u+"</"+"label>"),t.push("</"+this.options.itemTagname+">")}t.push("</"+this.options.tagname+">")}else{t.push("<div id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+">"),t.push("<table class='w2"+this.inputType+"_main'>");for(var m=0;m<this.rowCount;m++){c=this.id+"_input_"+m,t.push("<tr class='w2"+this.inputType+"_row'>");for(var f=0;f<this.colCount;f++){var b=m*this.colCount+f;d="";this.itemArr&&this.itemArr[b]&&!0===this.itemArr[b]._hidden&&(d=" style='display:none;'");c=this.id+"_input_"+b,p="",g="";if(this.itemDisabledArray[b]&&(p="disabled",g="w2checkbox_disabled"),b<e){u=this.options.escape?WebSquare.xml._encode(this.itemArr[b].label):this.itemArr[b].label;var y=this.options.useCheckboxTitle?" title='"+u+"' ":"";t.push("<td class='w2"+this.inputType+"_td_input'"+d+"><input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' "+l+"='"+b+"'  id='"+c+"'"+y+p+a+"/></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+d+"><"+"label class='w2"+this.inputType+"_label "+g+"' "+l+"='"+b+"' for='"+c+"'>"+u+"</"+"label></td>")}else t.push("<td class='w2"+this.inputType+"_td_input'"+d+"></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+d+"></td>")}t.push("</tr>")}t.push("</table>"),t.push("</div>")}return t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw(),this.options.enableColumn&&this.refreshEnable()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}var e=this.getCheckboxList();if(this.options.selectedindex>-1){for(var i=0;i<e.length;i++){e[i].checked=!1,this.oldValueForIE[i]=!1}this.setSelectedIndexNM(this.options.selectedindex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())}else{for(i=0;i<e.length;i++)this.modelControl.isBinded()||(this.oldValueForIE[i]=!1);this.options.falseValue&&this.modelControl.isBinded()&&this.options.refInitSync&&this.modelControl.setData(this.options.falseValue)}this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getAccessibiltyId=function(){try{return"native"==this.options.renderType?this.id:this.id+"_input_0"}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=this.getValue();this.refreshItemArr(),this.itemDisabledArray=new Array;for(var e=0;e<this.itemArr.length;e++)this.itemDisabledArray.push(this.options.disabled);this.componentRedraw(t),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){
var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t){try{this.setTableCount(),this.redraw(),this.setValueNM(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t,e){try{if(n.D.isNull(t)||1==isNaN(Number(t)))return;t=parseInt(t);var i=this.getValue();n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8?this.setSelectedIndexNM(t,null,e):this.setSelectedIndexNM(t),this.settingData=!0,this.modelControl.setData(this.getValue()),this.settingData=!1,i!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(t){try{t||(t=this.options.separator||" ");for(var e=[],i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].checked&&e.push(o);return e.join(t).wq_trim()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t,e,i){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;var o=this.getCheckboxList()[t];return e=null==e?!o.checked:e,o.checked=e,2!=i&&1!=this.settingData&&(this.oldValueForIE[t]=e),!0}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;for(var e=(t=t.toString()).split(this.options.separator||" "),i=[],o=0;o<e.length;o++)i[e[o]+""]="";var s=this.getItemCount();for(o=0;o<s;o++){null!=i[t=this.itemArr[o].value]?this.setSelectedIndexNM(o,!0):this.setSelectedIndexNM(o,!1)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInstanceValue=function(t){try{if(null!=t){if(n.D.isNull(t))return;t=parseInt(t)}var e=this.getValue(),i="";this.modelControl.isBinded()?(i=this.modelControl.getData(),this.modelControl.setData(e),i!=e&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:e})):(i=this.getValue(null,t),a.B.fireEvent(this,"onchange",{oldValue:i,newValue:e}))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setTableCount=function(){try{if(this.rowCount=this.itemArr.length,this.colCount=1,0!=this.options.rows){var t=this.options.rows;this.rowCount=t,this.colCount=Math.ceil(this.itemArr.length/t)}if(0!=this.options.cols){var e=this.options.cols;this.colCount=e,this.rowCount=Math.ceil(this.itemArr.length/e)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{t||(t=this.options.separator||" ");for(var e=[],i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].checked&&e.push(this.itemArr[o].label);return e.join(t).wq_trim()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getValue=function(t,e){try{t||(t=this.options.separator||" ");for(var i=[],o=this.getCheckboxList(),s=0;s<o.length;s++)void 0!==e&&s===e?o[s].checked||i.push(this.itemArr[s].value):o[s].checked&&i.push(this.itemArr[s].value);return i.join(t).wq_trim()||this.options.falseValue}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o=this.getValue(),s={};s.value=t,s.label=e,this.itemArr.splice(i,0,s),this.itemDisabledArray.splice(i,0,!!this.options.disabled);for(var a=this.getCheckboxList(),n=[],l=0;l<a.length;l++)n.push(a[l].itemDisabled);n.splice(i,0,!1),this.componentRedraw(o);var h=this.getCheckboxList();for(l=0;l<h.length;l++)h[l].itemDisabled=n[l];return i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return
;for(var e=this.getValue(),i=null,o=this.getCheckboxList(),s=[],a=0;a<o.length;a++)s.push(o[a].itemDisabled);t>=0&&t<this.getItemCount()&&(i=this.itemArr.splice(t,1)[0],this.itemDisabledArray.splice(t,1),s.splice(t,1)),this.componentRedraw(e);var n=this.getCheckboxList();for(a=0;a<n.length;a++)n[a].itemDisabled=s[a];return i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.removeAll=function(){try{this.itemArr=new Array,this.itemDisabledArray=new Array,this.componentRedraw("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"readOnly":for(var i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].disabled=e;break;case"mandatory":1==e?this.addClass(this.render,"w2checkbox_mandatory"):this.removeClass(this.render,"w2checkbox_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getCheckboxList=function(){try{return"native"==this.options.renderType?[this.render]:this.getDomList("checkboxArr","input")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getLabelList=function(){try{return this.getDomList("labelArr","label")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.focus=function(){try{this.getCheckboxList()[0].focus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.click=function(t){try{this.getCheckboxList()[t].click()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.reset=function(){try{for(var t=this.getCheckboxList(),e=this.getValue(),i=0;i<t.length;i++)t[i].checked&&(t[i].checked=!1,this.oldValueForIE[i]=!1);var o=this.getValue();this.modelControl.setData(o),e!=o&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:o})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkAll=function(t){try{for(var e=this.getItemCount(),i=0;i<e;i++)this.setSelectedIndexNM(i,t);this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t);for(var e=this.getCheckboxList(),i=this.getLabelList(),o=0;o<e.length;o++)e[o].itemDisabled||(this.itemDisabledArray[o]=t,t?(this.addClass(i[o],"w2checkbox_disabled"),e[o].setAttribute("disabled","disabled")):(this.removeClass(i[o],"w2checkbox_disabled"),e[o].removeAttribute("disabled")));return this.options.disabled=t,t?this.render.setAttribute("disabled","disabled"):this.render.removeAttribute("disabled"),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;e=n.D.getBoolean(e);var i=this.getCheckboxList(),o=this.getLabelList();i[t].disabled=e,i[t].itemDisabled=e,this.itemDisabledArray[t]=e,1==e?(this.addClass(o[t],"w2checkbox_disabled"),i[t].setAttribute("disabled","disabled")):(this.removeClass(o[t],"w2checkbox_disabled"),i[t].removeAttribute("disabled")),this.itemDisabledArray.indexOf(!1)>-1?(this.options.disabled=!1,this.render.removeAttribute("disabled")):(this.options.disabled=!0,this.render.setAttribute("disabled","disabled"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.getCheckboxList()[t].disabled}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{var e=this.getValue();this.checkAll(!1),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),
t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype.handleClickEvent=function(t){try{this.setRefPosition();for(var e=this.event.getTargetIterator(t,this.render),i=n.D.getDataPrefix("index");e.next();){var o;if(e.match("w2"+this.inputType+"_input")){var l=e.getElement().getAttribute(i);n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8||this.setInstanceValue(l),o=1,this.fireOnclick({type:"1",index:l})}else if(e.match("w2"+this.inputType+"_label")&&!e.match("w2"+this.inputType+"_disabled")){l=e.getElement().getAttribute(i);a.B.preventDefault(t),o=2,n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8?this.setSelectedIndex(l,o):this.setSelectedIndex(l),this.fireOnclick({type:"2",index:l})}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{for(var e=a.B.getTarget(t),i=n.D.getDataPrefix("index");e&&(!e.firstChild||"LABEL"!=e.firstChild.tagName)&&!("checkboxgroup"===this.options.renderType&&e&&"DIV"===e.tagName&&e.className.indexOf("w2checkbox_item")>=0);)e=e.parentNode;if(e){var o;o="checkboxgroup"===this.options.renderType?e.getElementsByClassName("w2checkbox_label")[0]:e.firstChild;e.offsetWidth,e.offsetHeight;var s=WebSquare.style.getStyle(e,"text-overflow"),l=o.innerHTML;if(this.options.tooltipFormatter&&"function"!=typeof this.tooltipFormatter&&(this.tooltipFormatter=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)),!0===this.options.tooltipShowAlways){var h=WebSquare.style.getAbsoluteLeft(o),d=WebSquare.style.getAbsoluteTop(o);if("function"==typeof this.tooltipFormatter){var c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else if("ellipsis"==s){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=e.className,this.toolTipRuler.innerHTML=e.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(e,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(e,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(e,"font-weight");var u=this.toolTipRuler.firstChild.offsetWidth,p=e.clientWidth;if(o.nodeType!=WebSquare.Elem.type.text){var g=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),m=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");u-=parseInt(g||"0",10),u-=parseInt(m||"0",10),p-=parseInt(WebSquare.style.getStyle(o,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(o,"padding-right"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(p<u){h=WebSquare.style.getAbsoluteLeft(o),d=WebSquare.style.getAbsoluteTop(o);if(document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel)l=this.options.tooltipItemLabel;else if("function"==typeof this.tooltipFormatter){c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),!0!==this.options.tooltipDisplay&&!0!==this.options.tooltipShowAlways||this.hideTooltip()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{
this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var a=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(a){var l=n.D.getGlobalFunction(a,o.scope_id),h=!0;if("function"==typeof l&&(h=l(o)),!h)return}}catch(t){r.w.printStackTrace(t)}var d=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2checkbox_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i;var c=Math.max(e-(this.tooltip.render.offsetHeight+3),0);if(this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",c+"px"),document.body.scrollWidth>d){var u=t-(document.body.scrollWidth-d);u<0&&(u=0),this.tooltip.setStyle("left",u+"px")}})),100*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{if(9==(t.charCode?t.charCode:t.keyCode)){this.tabOrderMoveStart=!1;var e=this.getCheckboxList();if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){if(document.activeElement!=e[0])return;this.tabOrderMoveStart=!0,a.B.preventDefault(t)}}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){if(document.activeElement!=e[e.length-1])return;this.tabOrderMoveStart=!0,a.B.preventDefault(t)}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.fireOnchange=function(){try{a.B.fireEvent(this,"onchange")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.fireOnclick=function(t){try{if(!t)return;var e=t.type||"1",i=t.index,o=this.getCheckboxList(),l=o[i].checked,h=this.itemArr[i].value,d=!1;n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8&&(null==this.oldValueForIE[i]?(this.oldValueForIE[i]=l,"1"===e&&this.setInstanceValue(i)):l==this.oldValueForIE[i]?d=!0:(this.oldValueForIE[i]=l,"1"===e&&this.setInstanceValue(i))),o[i].disabled||("1"===e?a.B.fireEvent(this,"oncheckboxclick",i,l,h):"2"===e&&a.B.fireEvent(this,"onlabelclick",i,l,h),0==d&&a.B.fireEvent(this,"onviewchange",{index:i,checked:l,value:h}))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},c.prototype.restore=function(t){try{this.checkAll(!1);for(var e=t.selectedIndex.split(this.options.separator),i=0,o=e.length;i<o;i++)this.setSelectedIndex(parseInt(e[i],10));return!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},c.prototype.refreshVisible=function(){try{if(!this.render)return;this._refreshVisible(this.render.getElementsByTagName("input")),"checkboxgroup"!==this.options.renderType.toLowerCase()&&this._refreshVisible(this.render.getElementsByTagName("label"))}catch(t){
r.w.printStackTrace(t,null,this)}},c.prototype._refreshVisible=function(t){try{for(var e=0;e<t.length;e++){var i=parseInt(t[e].getAttribute("index"),10);this.itemArr[i]&&!0===this.itemArr[i]._hidden?t[i].parentNode.style.display="none":t[i].parentNode.style.display=""}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.w.printStackTrace(t,null,this)}}},4810:(t,e,i)=>{i.r(e),i.d(e,{checkcombobox:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(3729),d=i(1577),c=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(c.prototype,l.s.prototype),o.x.extend(c.prototype,h.E.prototype),o.x.extend(c.prototype,d.z.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.checkcombobox",pluginName:"checkcombobox",renderType:"component",userEvents:["onchange","onclose","onviewchange","oncheckboxclick","oncellclick"],systemEvents:["onblur","onclick","ondblclick","onfocus"],serializable:!0,useConfig:!0,separator:" ",value:"",sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,visibleColNum:1,visibleColMax:1,displayMode:"0",delimiter:"\t",textAlign:"",chooseOption:!1,chooseOptionLabel:"",allOption:!1,tooltipMode:"none",readOnly:!1,defaultStyle:"",activeStyle:"",defaultClass:"w2checkcombobox_default",activeClass:"w2checkcombobox_active",useLocale:!1,submenuSize:"auto",direction:"auto",checkboxClickSync:!1,showCheckedTop:!1,mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",setDataRemoveAll:!0,escape:!0,closeonmouseleave:!1,animation:"",customLabelFormatter:"",navBtn:!1,displayAllOptionLabel:!1,checkDisabledOnAllCheck:!0,search:"start",searchTarget:"label",editable:!1,editType:"select",editModeEvent:"onclick",handleOtherClick:!0,noResult:"previous",interactionMode:!1,ignoreBlankOnNoResult:!1,useKeywordHighlight:!1,wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",visibleColumnAutoClear:!1,useDrag:!1,useEdit:!1,rangeSeparator:"",validateOnInput:!1},c.prototype.initialize=function(t){try{if(this.itemTable=null,this.isOpen=!1,this.statusSubLayer=!1,this.separator=this.options.separator=this.options.separator||" ",this.selectedInfo={},this.originArrInfo=[],this.editable=this.options.editable,this.search=this.options.search,this.myhelper=new WebSquare.korHelper,this.viewArr=[],this.mytime=null,this.hideTime=null,this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.interactionMode=this.options.interactionMode,this.itemTableLastCell=null,this.navBtnReached=!1,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.displayFormatter=null,this.labelColumn=-1,this._currentTarget=null,this._dragGhost=null,this.defaultAllOptionLabel=WebSquare.language.getMessage("CheckCombobox_all"),t&&"$blank"==t.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("CheckCombobox_choose"),this._initDisplayMode(),t){var e="xf"==t.getTagName().split(":")[0]?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,i=WebSquare.Elem.api.getElementsByTagName(t,"choices",e)[0];if(i){var o=WebSquare.Elem.api.getElementsByTagName(i,"gridItemset",s.v._XML_NAMESPACE.W2)[0];null==o&&(o=WebSquare.Elem.api.getElementsByTagName(i,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0]),o&&"w2:gridItemset"==o.getTagName()?this.itemTableMode="grid":o&&"w2:gridViewItemset"==o.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView")}
"grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t),this.itemDisabledArray=new Array;for(var a=0;a<this.itemArr.length;a++)this.itemDisabledArray.push(!1);!1===this.options.checkboxClickSync&&(this.options.showCheckedTop=!1),"native"==this.options.renderType&&(this.options.tableRender="ul"),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{l.s.prototype.finalize.call(this),this.itemTable&&(this.itemTable.remove(),this.itemTable=null),this._dragGhost&&this._dragGhost.remove(),this.labelRuler=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.title?"":"title='"+this.options.title+"'",o=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+'"',s=""==this.options.textAlign?"":"style= 'text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",a="";return a=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'","native"===this.options.renderType?(t.push("<div id='"+this.id+"' "+e+" role='combobox' aria-labelledby='"+this.id+"_itemTable' class='w2checkcombobox_acc "+this.options.className+"' tabIndex='0' "+i+">"),t.push("<div id='"+this.id+"_nativeLabel' class='w2checkcombobox_acc_custom' style=''>"),this.options.editable||this.options.useEdit?(t.push("<div class='w2checkcombobox_acc_custom_native_useEditLabel' style='"+o+"'>"),t.push("<span id='"+this.id+"_label' class='w2checkcombobox_acc_custom_label' style='"+s+"'></span>"),t.push("<input id='"+this.id+"_input' class='w2checkcombobox_input w2checkcombobox_acc_custom_label' style='margin:0 auto;display:none;visibility:hidden;' type='text' "+i+" />"),t.push("</div>")):(t.push("<div class='w2checkcombobox_acc_custom_native_label' style=''"+o+">"),t.push("<label id='"+this.id+"_label' class='w2checkcombobox_acc_custom_label' style='display:inline-block;' ></label>"),t.push("</div>")),t.push("<a id='"+this.id+"_button' aria-haspopup='true' class='w2checkcombobox_acc_custom_arrow w2checkcombobox_acc_custom_arrow_native' aria-controls='"+this.id+"_itemTable' style=''></a>"),t.push("</div>"),t.push("</div>")):(t.push("<div id='"+this.id+"' role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none' "+e+" class='w2checkcombobox "+this.options.className+"' "+a+i+">"),t.push("<table class='w2checkcombobox_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2checkcombobox_row w2checkcombobox_row_main'>"),this.options.editable||this.options.useEdit?(t.push("<td class='w2checkcombobox_col_label' "+o+">"),t.push("<div class='w2checkcombobox_label'>"),t.push("<span id='"+this.id+"_label' class='w2checkcombobox_label' "+s+"></span>"),t.push("<input id='"+this.id+"_input' class='w2checkcombobox_input' style='border-width:0px; width:100%; padding:0px; display:none;' type='text' "+i+" />"),t.push("</div></td>"),t.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")):(t.push("<td class='w2checkcombobox_col_label' "+o+"><div id='"+this.id+"_label' role='document' aria-live='assertive' aria-automatic='true' class='w2checkcombobox_label' "+s+"></div></td>"),t.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>")),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{this.dom.button=this.getElementById(this.id+"_button"),
this.dom.label=this.getElementById(this.id+"_label"),this.dom.input=this.getElementById(this.id+"_input"),"native"===this.options.renderType&&(this.dom.nativeLabel=this.getElementById(this.id+"_nativeLabel")),this.dom.tbody=this.getElementById(this.id+"_main_tbody")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.useOtherComponentId?s.v.setTimer((function(){this.otherComponent=n.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.B.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:this.options.editable||this.options.useEdit?{onmousedown:this.handleClickEventDocument}:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),a.B.stopPropagation(t)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),"native"===this.options.renderType?this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownNativeEvent)):this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.useEdit&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),(this.options.editable||this.options.useEdit)&&(this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()?(this.refreshItemArr(),this.componentRedraw()):!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}if(1==this.options.chooseOption){var e=this._getChooseOptionLabel();e=WebSquare.xml.decode(e).replace("&nbsp;"," "),
this.dom.label.innerHTML=e}this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.options.visibleColumnAutoClear&&this.bind("onviewchange",this._clearVisibleColumnChecked)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){this.refreshItemArr(),this.componentRedraw(),this.itemDisabledArray=new Array;for(var t=0;t<this.itemArr.length;t++)this.itemDisabledArray.push(!1);if("grid"==this.itemTableMode)this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid&&(this.itemTable.grid.clearFilter(),this.setGridData(),this.options.allOption&&this.gridItemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr)));else if("gridView"==this.itemTableMode){if(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).setData(this.gridViewItemArr,!1),this.setGridViewData()}if(this.options.editable&&this.itemArr.length<=0&&this.initCheckCombobox(),this.modelControl.isBinded())this.refresh();else{var e=[];for(t=0;t<this.itemArr.length;t++)this.itemArr[t].value!=WebSquare.allValue&&e.push({index:t,checked:!1});this.setSelectedInfoNM(e)}}this.isOpen?this.setItemTable():this.options.useEdit&&this.itemTable&&(this.itemTable.show(),this.setItemTable(),this.itemTable.hide())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();1==this.setValueNM(e)&&t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(){try{!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.setSelectOptions(),(this.options.editable||this.options.useEdit)&&this.showEditMode(!1),this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setLabelWidthByItemLength=function(){try{this.labelRuler&&document.getElementById("checkcombobox_ruler")||(this.labelRuler=document.createElement("div"),this.labelRuler.style.position="absolute",this.labelRuler.style.top="-1000px",this.labelRuler.style.left="-1000px",this.labelRuler.style.visibility="hidden",this.labelRuler.id="checkcombobox_ruler",document.body.appendChild(this.labelRuler));for(var t=0,e=0;e<this.itemArr.length;e++)this.labelRuler.innerHTML=this.itemArr[e].label,this.labelRuler.offsetWidth>t&&(t=this.labelRuler.offsetWidth);if(this.render){var i=document.getElementById(this.id+"_button");this.render.style.width=t+i.offsetWidth+10+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.itemTableHandleKeydownEvent=function(t){try{var e=a.B.getTarget(t),i=parseInt(this.itemTable.getSelectedIndex()),o=t.charCode?t.charCode:t.keyCode,s=i,n=this.itemTable.getItemCount();if(9==o)if(t.shiftKey)if(a.B.preventDefault(t),!0!==this.navBtnReached)if(s>0){for(;0<=s-1&&this.itemTable._getCellDisabled(s-1)||this.itemTable._getCellHidden(s-1);)0===--s&&(this.itemTable.endReached=!0);s>0&&this.itemTable.setSelectedIndex(s-1)}else this.itemTable.endReached=!0;else e===this.dom.confirmBtn&&(this.selectedCell=this.itemTableLastCell,this.dom.confirmBtn.removeAttribute("tabIndex"),this.itemTable.setSelectedIndex(this.selectedCell.getAttribute("index")),this.navBtnReached=!1),e===this.dom.cancelBtn&&this.dom.confirmBtn&&(this.dom.cancelBtn.removeAttribute("tabIndex"),this.dom.confirmBtn.setAttribute("tabIndex",0),this.dom.confirmBtn.focus());else{if(a.B.preventDefault(t),s+1<n){for(s++;s+1<=n&&this.itemTable._getCellDisabled(s)||this.itemTable._getCellHidden(s);)++s===n&&(this.options.navBtn?this.navBtnReached=!0:this.itemTable.endReached=!0);s<n&&this.itemTable.setSelectedIndex(s)
}else this.options.navBtn?this.navBtnReached=!0:this.itemTable.endReached=!0;!0===this.navBtnReached&&(e!==this.dom.confirmBtn&&e!==this.dom.cancelBtn&&(this.itemTableLastCell=this.itemTable.selectedCell,this.dom.confirmBtn&&(this.dom.confirmBtn.setAttribute("tabIndex",0),this.dom.confirmBtn.focus()),this.removeClass(this.itemTable.selectedCell,this.itemTable.options.w2table_col_over)),e===this.dom.confirmBtn&&this.dom.cancelBtn&&(this.dom.confirmBtn.removeAttribute("tabIndex"),this.dom.cancelBtn.setAttribute("tabIndex",0),this.dom.cancelBtn.focus()),e===this.dom.cancelBtn&&(null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null),this.itemTable.endReached=!0,this.navBtnReached=!1,this.isOpen&&this._closeSubLayer(),this.dom.button.focus()))}else if(32==o)if(a.B.preventDefault(t),e===this.dom.confirmBtn)null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null),this.dom.confirmBtn.click(),this.navBtnReached=!1,this.dom.button.focus();else if(e===this.dom.cancelBtn)null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null),this.dom.cancelBtn.click();else{if(this.itemTable.options.checkbox&&!this.itemTable._getCellDisabled(s)&&i>=0)document.getElementById(this.itemTable.id+"_"+i+"_checkbox").click()}!0===this.itemTable.endReached&&(this.removeClass(this.itemTable.selectedCell,this.itemTable.options.w2table_col_over),this.itemTable.selectedCell=null,this.isOpen&&this._closeSubLayer(),this.itemTable.endReached=null,this.dom.button.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSubLayer=function(){try{var t=this;if(null==this.itemTable)if("grid"==this.itemTableMode){if(this.gridItemArr.length<=0)return;this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridData()}else if("gridView"==this.itemTableMode){if(this.gridViewItemArr.length<=0)return;"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,submenuSize:this.options.submenuSize,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,navBtn:this.options.navBtn,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i,o,s){t.focus(),s=s||{},"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e));var r=parseInt(t.itemTable.options.gridViewOptions.checkColumn);if("checkbox"===this.getCellInputType(e,i)&&i===r){var n="";if(!0===s.checked){if(0===e&&this.getCellData(e,t.labelColumn)===t.defaultAllOptionLabel){for(var l=1;l<t.itemArr.length;l++)t.addSelectedInfo({index:l,checked:!0});this.checkAll(r,!0),t.checkAll(r,!0)}else t.itemArr[e].checked=!0,t.addSelectedInfo({index:e,checked:!0}),this.setCellChecked(e,i,!0);n=!0}else{if(0===e&&this.getCellData(e,t.labelColumn)===t.defaultAllOptionLabel){for(l=1;l<t.itemArr.length;l++)t.addSelectedInfo({index:l,checked:!1});this.checkAll(r,!1),
t.checkAll(r,!1)}else t.itemArr[e].checked=!1,t.addSelectedInfo({index:e,checked:!1}),this.setCellChecked(e,i,!1);n=!1}if(t.options.allOption&&e>0){var h=!0;if(!0===s.checked){for(l=1;l<t.itemArr.length;l++)if(!t.itemArr[l].checked){h=!1;break}}else t.itemArr[e].checked=!1,h=!1;this.setCellChecked(0,i,h)}a.B.fireEvent(t,"oncellclick",e,i,n)}})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){27==(e.charCode?e.charCode:e.keyCode)&&(t._closeSubLayer(),t.focus())})));for(var e=parseInt(this.itemTable.options.gridViewOptions.checkColumn),i=this.itemTable.gridView.getRowCount(),o=1==this.options.allOption?1:0,l=o;l<i;l++)"1"===this.itemTable.gridView.getCellData(l,e)?this.addSelectedInfo({index:l+o,checked:!0}):this.addSelectedInfo({index:l+o,checked:!1});this.setGridViewData()}else{var h={row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_ccb",w2table_main:"w2table_ccb_main",w2table_row:"w2table_ccb_row",w2table_col:"w2table_ccb_col",w2table_col_over:"w2table_ccb_col_over",w2table_col_checkbox:"w2table_ccb_col_checkbox",w2table_col_label:"w2table_ccb_col_label",checkbox:!0,navBtn:this.options.navBtn,escape:this.options.escape,editable:this.options.editable,wheelRows:this.options.wheelRows,parent_uuid:this.uuid,parentPluginName:this.options.pluginName,visibleColNum:this.options.visibleColNum,visibleColMax:this.options.visibleColMax};"native"===this.options.renderType&&(h.w2table="w2table_ccb_native",h.w2table_main="w2table_ccb_ul_main",h.w2table_col="w2table_ccb_ul_col",h.w2table_row="w2table_ccb_ul_row",h.w2table_col_over="w2table_ccb_ul_col_over",h.w2table_col_checkbox="w2table_ccb_ul_col_checkbox",h.w2table_col_label="w2table_ccb_ul_col_label",h.tableRender=this.options.tableRender),this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",h);t=this;if("native"===this.options.renderType&&(this.itemTable.handleKeydownEvent=function(e){return t.itemTableHandleKeydownEvent(e)}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(e,i){var o=document.getElementById(t.id+"_itemTable_"+i+"_checkbox");if(o&&o.value==WebSquare.allValue){for(var s=n.D.getBoolean(o.checked),r=1;r<t.itemArr.length;r++)if(n.D.getBoolean(t.options.checkDisabledOnAllCheck)||!t.itemDisabledArray[r]){var l=document.getElementById(t.id+"_itemTable_"+r+"_checkbox");l&&l.checked!=s&&(l.checked=s),t.addSelectedInfo({index:r,checked:s})}}else t.options.editable&&(t.mozTrickBuffer="",i=t.viewArr[i].index),t.addSelectedInfo({index:i,checked:o.checked});if(t.options.allOption)if(i>0){var h=!0;if(o.checked)if(t.options.editable&&t.editmode){t.itemArr[i].checked=!0;for(r=1;r<t.itemArr.length;r++)if(!t.itemArr[r].checked){h=!1;break}}else for(r=1;r<t.itemArr.length;r++){var d=document.getElementById(t.id+"_itemTable_"+r+"_checkbox");if(d&&!d.checked){h=!1;break}}else h=!1;document.getElementById(t.id+"_itemTable_0_checkbox").checked=h,t.options.editable&&(t.itemArr[0].allchecked=h)}else t.options.editable&&(t.itemArr[0].allchecked=o.checked);if(t.options.checkboxClickSync){var c=t.getValue(),u=t.getInfoArray(),p=t.convertInfoHash2Array(t.selectedInfo);p.length>0&&t.setSelectedInfo(p);var g=t.getValue();if(c!=g){var m={oldInfo:u,newInfo:t.getInfoArray(),oldValue:c,newValue:g};a.B.fireEvent(t,"onviewchange",m)}}a.B.fireEvent(t,"oncheckboxclick",i,o.checked,o.value)})),this.itemTable.addKeyDownEventListener((function(e,i){var o=e.charCode?e.charCode:e.keyCode;(13==o||27==o)&&(t.focus(),t.closeSubLayer())})),1==this.options.closeonmouseleave&&this.itemTable.addMouseLeaveEventListener((function(e){var i=t.render.offsetHeight,o=t.getAbsolutePosition("top");e.clientY>=o&&e.clientY<=o+i||t.closeSubLayer()})),
this.options.useDrag&&(this.itemTable.event.addListener(this.itemTable.render,"onmousedown",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousedown)),this._dragGhost||(this._dragGhost=new WebSquare.uiplugin.group(this.id+"_dragGhost",{className:"w2checkcombobox_ghost"}),this._dragGhost.writeTo(WebSquare.getBody(),null,this.parentFrame),this._dragGhost.activate(),this._dragGhost.onComplete())),this._getSelectedInfo().length>0&&!0===this.options.showCheckedTop){for(l=0;l<this.getItemCount();l++){if(this.itemArr[l].checked)null!=(c=document.getElementById(this.id+"_itemTable_"+l+"_checkbox"))&&(c.checked=!0),this.addSelectedInfo({index:l,checked:null==c||c.checked})}this._sortCheckItemArr()}this.setSelectOptions(),this.setItemTable();var d=!0;for(l=0;l<this.getItemCount();l++){var c;if(this.itemArr[l].checked)null!=(c=document.getElementById(this.id+"_itemTable_"+l+"_checkbox"))&&(c.checked=!0),this.addSelectedInfo({index:l,checked:null==c||c.checked});else 1==this.options.allOption?(1==this.getItemCount()||this.itemArr[l].value!=WebSquare.allValue)&&(d=!1):d=!1}1==d&&1==this.options.allOption&&this.getItemCount()>0&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!0)}if(!this.options.editable)for(l=0;l<this.itemDisabledArray.length;l++)this.setItemDisabled(l,this.itemDisabledArray[l]);if(this.options.enableColumn&&this.refreshEnable(),this.options.navBtn&&!this.itemTable.getElementById(this.id+"_btnArea")){var u,p=[],g=WebSquare.language.getMessage("itemTable_cancel")||"선택해제",m=WebSquare.language.getMessage("itemTable_confirm")||"선택적용",f=document.createElement("div");if(f.className="w2checkcombobox_btnArea",f.id=this.id+"_btnArea",f.setAttribute("role","listitem option"),f.setAttribute("aria-setsize",this.options.visibleRowNum),f.setAttribute("aria-posinset",this.options.visibleRowNum),p.push("<div id='"+this.id+"_btn_confirm' class='w2checkcombobox_btn_confirm' role='button' title='"+m+"'>"+m+"</div>"),p.push("<div id='"+this.id+"_btn_cancel' class='w2checkcombobox_btn_cancel' role='button' title='"+g+"'>"+g+"</div>"),p=p.join(""),f.innerHTML=p,n.D.isIE()&&s.v.browserVersion()<=8){var b,y=this.itemTable.render.getElementsByTagName("div");for(l=0;b=y[l++];)if("w2checkcombobox_btn_div"==b.className){u=b;break}}else u=this.itemTable.render.getElementsByClassName("w2checkcombobox_btn_div")[0];u.appendChild(f),this.dom.confirmBtn&&this.dom.cancelBtn||(this.dom.confirmBtn=this.itemTable.getElementById(this.id+"_btn_confirm"),this.dom.cancelBtn=this.itemTable.getElementById(this.id+"_btn_cancel")),this.event.addListener(this.dom.confirmBtn,"onclick",this.event.bindAsEventListener(this,(function(){this.closeSubLayer()}))),this.event.addListener(this.dom.cancelBtn,"onclick",this.event.bindAsEventListener(this,(function(){if(this.options.editable){var t=0;if(this.options.allOption)document.getElementById(this.id+"_itemTable_0_checkbox").checked=!1,this.itemArr[0].allchecked=!1,t=1;for(var e=t;e<this.viewArr.length;e++){var i=this.viewArr[e].index;if(this.itemArr[i].checked=!1,this.addSelectedInfo({index:i,checked:!1}),(u=document.getElementById(this.id+"_itemTable_"+e+"_checkbox")).checked=!1,this.options.checkboxClickSync){var o=this.getValue(),s=this.getInfoArray(),r=this.convertInfoHash2Array(this.selectedInfo);r.length>0&&this.setSelectedInfo(r);var n=this.getValue();if(o!=n){var l={oldInfo:s,newInfo:this.getInfoArray(),oldValue:o,newValue:n};a.B.fireEvent(this,"onviewchange",l)}}}}else{var h=this.getItemCount();if("gridView"===this.itemTableMode){var d=parseInt(this.itemTable.options.gridViewOptions.checkColumn);for(h=this.itemTable.gridView.getRowCount(),this.options.allOption,e=0;e<h;e++){var c=this.itemTable.gridView._getTdElem(e,d);c&&(c.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:e,checked:!1})}}else for(e=0;e<h;e++){var u;(u=document.getElementById(this.id+"_itemTable_"+e+"_checkbox"))&&(u.checked=!1,this.addSelectedInfo({index:e,checked:u.checked}))}}})))}
}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectOptions=function(){try{null!=this.itemTable&&"gridView"!=this.itemTableMode&&(this.options.editable?this.editmode?0==this.viewArr.length||this.itemTable.setItemArr(this.viewArr):null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide():this.itemTable.setItemArr(this.itemArr))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemTable=function(){try{if(this.options.editable){for(var t=0;t<this.viewArr.length;t++)this.viewArr[t].checked=!(!this.itemArr[this.viewArr[t].index].checked&&!this.itemArr[this.viewArr[t].index].allchecked)||"";this.itemTable.setItemArr(this.viewArr);for(var e=0;e<this.viewArr.length;e++)this.setItemDisabled(e,this.itemDisabledArray[e])}var i=this.render.offsetWidth-2,o=WebSquare.style.getAbsoluteLeft(this.render),a=WebSquare.style.getAbsoluteTop(this.render),n=this.getVisibleItemCount(),l=0,h=this.options.visibleColNum>1||this.options.visibleColMax>1;if(!0===this.options.navBtn)if(this.getElementById(this.id+"_btnArea"))l=WebSquare.style.getSize(this.getElementById(this.id+"_btn_confirm"),"outermarginwidth")+WebSquare.style.getSize(this.getElementById(this.id+"_btn_cancel"),"outermarginwidth");"gridView"===this.itemTableMode||"grid"===this.itemTableMode||"column"===this.options.submenuSize||h||(this.itemTable.setStyle("width",this.render.offsetWidth+"px"),this.itemTable.render.firstChild.style.width=this.render.offsetWidth+"px");var d=this.itemTable.render.getElementsByTagName("tr"),c=this.itemTable.render.getElementsByTagName("td");if("native"===this.options.renderType)var u=this.itemTable.render.getElementsByTagName("li");if("gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode)if("native"!==this.options.renderType&&c&&c.length>0){var p=0,g=n;h?(f=Math.min(d.length,this.options.visibleRowNum),g=d.length):this.options.editable?(f=Math.min(c.length,this.options.visibleRowNum),g=c.length):f=Math.min(n,this.options.visibleRowNum);var m=0;for(e=0;e<g&&f>0;e++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===this.itemArr[e]._hidden||(p+=h?d[e].offsetHeight:c[e].offsetHeight,f--,m++);1==this.options.navBtn?(this.getElementById(this.itemTable.id+"_wrapper").style.height=p+"px",p+=c[0].offsetHeight):s.v.browserCheck.moz&&p<34&&1===m&&(p=34),this.itemTable.setStyle("height",p+"px")}else if("native"===this.options.renderType&&u&&u.length>0){var f,b=0;g=n;this.options.editable?(f=Math.min(u.length,this.options.visibleRowNum),g=u.length):f=Math.min(n,this.options.visibleRowNum);for(m=0,e=0;e<g&&f>0;e++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===this.itemArr[e]._hidden||(b+=parseInt(WebSquare.style.getStyle(u[e],"height").wq_replaceAll("px",""),10)+parseInt(WebSquare.style.getStyle(u[e],"padding-top").wq_replaceAll("px",""),10)+parseInt(WebSquare.style.getStyle(u[e],"padding-bottom").wq_replaceAll("px",""),10)+parseInt(WebSquare.style.getStyle(u[e],"border-top").slice(0,1),10),f--,m++);1==this.options.navBtn?(this.getElementById(this.itemTable.id+"_wrapper").style.height=b+"px",this.getElementById(this.itemTable.id+"_wrapper").style.left="-1px",b+=u[0].offsetHeight):s.v.browserCheck.moz&&p<34&&1===m&&(p=34),this.itemTable.setStyle("height",b+"px")}if("column"==this.options.submenuSize){if(this.itemTable.render.scrollHeight>this.itemTable.render.offsetHeight){var y=this.itemTable.mainTable.offsetWidth+17;this.itemTable.render.offsetWidth!==y&&this.itemTable.setStyle("width",y+"px")}}else if(this.itemTableMode&&this[this.itemTableMode+"Options"].width)!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=this.itemTable.render.offsetWidth+"px");else if("fixed"==this.options.submenuSize)this.itemTable.setStyle("width",i+"px"),!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=i+"px",
this.getElementById(this.id+"_btnArea")&&(l>i&&l/2<i&&(p+=c[0].offsetHeight,this.itemTable.setStyle("height",p+"px")),this.getElementById(this.id+"_btnArea").style.width=i+"px")),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=i+"px":this.itemTable.render.firstChild.style.width=i-17+"px";else if("auto"==this.options.submenuSize){var v=2;"gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode||(v=0);var w=this.render.offsetWidth-v,S=this.itemTable.render.clientWidth,C=this.itemTable.maxWidth,_=0;if((S=w<C?C:w)<w-2&&(S=w-2),n>this.options.visibleRowNum&&(_=17),S=Math.max(l,S),this.itemTable.setStyle("width",S+"px"),!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=S+"px"),this.itemTable.render.clientHeight>=this.itemTable.render.scrollHeight||n<=this.options.visibleRowNum)this.itemTable.render.firstChild.style.width=S+"px",!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=S+"px");else{this.itemTable.render.firstChild.style.width=S-_+"px";var x=this.itemTable.render.firstChild.offsetWidth;x>S-_&&(this.itemTable.render.firstChild.style.width=x+"px",this.itemTable.setStyle("width",Math.max(l,x)+_+"px"))}}else this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1&&this.itemTable.setStyle("width",Math.max(l,this.itemTable.render.firstChild.offsetWidth)+_+"px");var I=this.options.direction;if("auto"==I){var T=document.body.scrollTop;T<document.documentElement.scrollTop&&(T=document.documentElement.scrollTop);var k=a-T,D=document.documentElement.clientHeight-(k+this.render.offsetHeight),L=this.itemTable.render.offsetHeight,W=Math.max(D,k);if(W<L&&c&&c.length>0){var A=0;for(e=0;e<c.length&&!(A+c[e].offsetHeight+2>W);e++)A+=c[e].offsetHeight;this.itemTable.rowCount=e,this.itemTable.setStyle("height",A+"px"),W!==D&&(I="up")}else D<L&&k>L&&(I="up")}"up"==I?a-=this.itemTable.render.offsetHeight:a+=this.render.offsetHeight,document.documentElement.clientWidth<o+this.itemTable.render.offsetWidth&&(o=o+this.render.offsetWidth-this.itemTable.render.offsetWidth),this.itemTableDirection=I,this.itemTable.render.style.left=o+"px",this.itemTable.render.style.top=a+"px",WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._sortItemArr=function(){try{var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}return t.sort(),"descending"==this.options.sortMethod&&t.reverse(),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption&&(this.itemArr=this._sortItemArr()),!0===this.options.showCheckedTop&&(this.originArrInfo=this.itemArr),this.options.editable){for(var t=0;t<this.itemArr.length;t++)this.itemArr[t].orgLabel=this.itemArr[t].orgLabel||this.itemArr[t].label,this.itemArr[t].label=this.getItemText(t);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0,allchecked:""}].concat(this.itemArr)),this.viewArr=[];for(t=0;t<this.itemArr.length;t++)this.viewArr.push({label:this.itemArr[t].label,value:this.itemArr[t].value,orgLabel:this.itemArr[t].orgLabel,index:t,checked:""})}else{for(t=0;t<this.itemArr.length;t++)this.itemArr[t].orgLabel=this.itemArr[t].orgLabel||this.itemArr[t].label,this.itemArr[t].label=this.getItemText(t);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.openSubLayer=function(){try{
WebSquare.getBody().getLayerListener().show(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._openSubLayer=function(){try{if(this.oldValue=this.getValue(),this.setSubLayer(),!this.isOpen){if(this.itemTable.show(),this.addClass("w2checkcombobox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),this.options.useEdit||this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),!this.options.editable)if("native"===this.options.renderType){var t=this._getSelectedInfo(),e=t.length;if(0===e){for(var i=0;i<this.itemArr.length;i++)if(!this.itemTable._getCellDisabled(i)&&!this.itemTable._getCellHidden(i)){this.itemTable.setSelectedIndex(i);break}}else this.itemTable.setSelectedIndex(t[e-1].index)}else this.itemTable.focus();if(""!=this.options.animation){var o="down",s=WebSquare.style.getAbsoluteTop(this.render),a=document.body.scrollTop;a<document.documentElement.scrollTop&&(a=document.documentElement.scrollTop);var l=s-a,h=document.documentElement.clientHeight-(l+this.render.offsetHeight),d=this.itemTable.render.offsetHeight;h<d&&l>d&&(o="up"),"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("fast"):"slidedown"==this.options.animation.toLowerCase()&&"down"==o&&$("#"+this.itemTable.id).hide().slideDown("fast")}if(this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var c=this._getSelectedInfo();if(c.length>0){var u=this.customLabelFormatter.call(this,c,this.isOpen);this.dom.label&&(this.dom.label.innerHTML=u)}}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.closeSubLayer=function(t){try{var e={documentClick:t};"grid"==this.itemTableMode&&this.gridItemArr.length>0?this.itemTable.grid.applyFocusedCellOut(this.itemTable.grid.focusedCell[0]):"gridView"==this.itemTableMode&&this.gridViewItemArr.length>0&&this.itemTable.gridView.applyFocusedCellOut(this.itemTable.gridView.focusedCell[0]),WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.closeSubLayer1=function(t){try{var e={documentClick:t};WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._closeSubLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.getValue(),o=this.getInfoArray();if(this.isOpen&&null!=this.itemTable){1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id);var s=this.convertInfoHash2Array(this.selectedInfo);if(s.length>0&&this.setSelectedInfo(s),!0===this.options.showCheckedTop&&this._sortCheckItemArr(),this.itemTable.hide(),this.removeClass("w2checkcombobox_open"),this.itemTable.render.setAttribute("aria-expanded","false"),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var l=this._getSelectedInfo(),h=this.customLabelFormatter.call(this,l,this.isOpen);""==h&&1==this.options.chooseOption&&(h=this._getChooseOptionLabel(),h=WebSquare.xml.decode(h).replace("&nbsp;"," ")),this.dom.label&&(this.dom.label.innerHTML=h)}var d=this.getValue();if(i!=d){var c={oldInfo:o,newInfo:this.getInfoArray(),oldValue:i,newValue:d};a.B.fireEvent(this,"onviewchange",c)}!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1),this.selectedInfo={},"native"===this.options.renderType&&!0===this.itemTable.inputBlurInside&&(this.itemTable.inputBlurInside=!1)}this._dragGhost&&this._dragGhost.hide()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._originArrInfoHashMap=function(){try{
for(var t=this.originArrInfo,e={},i=0;i<t.length;i++)e[t[i].value]=i;return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._originArrHashSortItemArr=function(t){try{for(var e=this._originArrInfoHashMap(),i=0;i<t.length;i++)t[i].value&&(t[i].orgIndex=e[t[i].value]||0);return t.sort((function(t,e){return t.orgIndex-e.orgIndex})),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._checkClassification=function(t){try{var e=!1,i=0;if(1==this.options.allOption){i++;var o=document.getElementById(this.id+"_itemTable_0_checkbox");o&&t[0].value===WebSquare.allValue&&(!0===o.checked?e=!0:t.shift())}if(!0!==e){for(var s=[],a=[],n=[],l=0;l<t.length;l++)!0===t[l].checked?(s.push(t[l]),this._deleteSelectedInfo({index:l+i})):a.push(t[l]);if(this._originArrHashSortItemArr(s),this._originArrHashSortItemArr(a),!0===this.options.allOption){var h={label:this.defaultAllOptionLabel,value:WebSquare.allValue};n.push(h)}for(var d=0;d<s.length;d++)n.push(s[d]),this.addSelectedInfo({index:d+i,checked:!0});for(d=0;d<a.length;d++)n.push(a[d]);this.itemArr=n.slice(0),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.w.printStackTrace(t)}},c.prototype._sortCheckItemArr=function(){try{var t=this.selectedInfo;if(!0!==n.D.isEmptyObject(t)){this._checkClassification(this.itemArr),this.setSelectOptions(),this.setItemTable();var e=this.convertInfoHash2Array(t);e.length>0&&this.setSelectedInfoNM(e),this.modelControl.isBinded()&&this.refresh()}}catch(t){r.w.printStackTrace(t)}},c.prototype.setSelectedInfo=function(t){try{if(this.modelControl.isBinded())this.modelControl.setData(this.getInfoValue(t));else{var e=this.getValue();this.setSelectedInfoNM(t)&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getInfoValue=function(t){try{for(var e=0;e<this.itemArr.length;e++){var i=this.itemArr[e].checked;if(i){for(var o=null,s=0;s<t.length;s++)if(e==parseInt(t[s].index,10)){o=t[s];break}o||t.push({index:e,checked:i})}}var a=[],n=this.convertInfoArray2Hash(t);for(e=0;e<this.itemArr.length;e++){(o=n[e])&&o.checked&&a.push(this.itemArr[e].value)}return a.join(this.separator)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.convertInfoArray2Hash=function(t){try{for(var e={},i=0;i<t.length;i++)e[t[i].index]=t[i];return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.convertInfoHash2Array=function(t){try{var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addSelectedInfo=function(t){try{return!(!t||void 0===t.index)&&(this.selectedInfo[t.index]=t,!0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._deleteSelectedInfo=function(t){try{return!(!t||void 0===t.index)&&(delete this.selectedInfo[t.index],!0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedInfoNM=function(t){try{if(!n.D.isArray(t))return!1;for(var e=0;e<t.length;e++){var i=t[e].index,o=n.D.getBoolean(t[e].checked);i=parseInt(i);var s=document.getElementById(this.id+"_itemTable_"+i+"_checkbox");s&&(s.checked=o),this.itemArr[i].checked=o}var a="";if(1==this.options.allOption){for(var l=!0,h=document.getElementById(this.id+"_itemTable_0_checkbox"),d=1;d<this.itemArr.length;d++)if(!this.itemArr[d].checked){l=!1;break}if(h&&h.checked!=l&&(h.checked=l),1==this.options.displayAllOptionLabel)if(document.getElementById(this.id+"_itemTable_0_checkbox")){if(h)if(1==h.checked)a=WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택";else a=this.getText()}else a=1==l?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택":this.getText();else a=this.getText()}else a=this.getText();return this.options.escape&&(a=this._encode(a)),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),
"function"==typeof this.customLabelFormatter&&""==(a=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen))&&1==this.options.chooseOption&&(a=this._getChooseOptionLabel(),a=WebSquare.xml.decode(a).replace("&nbsp;"," ")),this.dom.label&&(this.dom.label.innerHTML=a),""==a&&1==this.options.chooseOption&&(a=this._getChooseOptionLabel(),a=WebSquare.xml.decode(a).replace("&nbsp;"," "),this.dom.label&&(this.dom.label.innerHTML=a)),(this.options.editable||this.options.useEdit)&&(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=a),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=a),!0}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisplayMode=function(t){try{if("label"==t||"value"==t||"value delim label"==t||"label delim value"==t){var e=this.options.displayMode;this.options.displayMode=t,this._initDisplayMode(),e!=this.options.displayMode&&this._refreshItemTable()}}catch(t){r.w.printStackTrace(t)}},c.prototype.setDelimiter=function(t){try{this.options.delimiter!=t&&(this.options.delimiter=t||"\t","0"!=this.options.displayMode&&"3"!=this.options.displayMode&&this._refreshItemTable())}catch(t){r.w.printStackTrace(t)}},c.prototype._refreshItemTable=function(){try{this.isOpen&&this.closeSubLayer(),this.setSelectItemArr();var t=this.getSelectedInfo(),e=this.convertInfoHash2Array(t);"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable&&this.itemTable.setItemArr(this.itemArr),e.length>0&&this.setSelectedInfo(e)}catch(t){r.w.printStackTrace(t)}},c.prototype._getChooseOptionLabel=function(){try{var t=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var e=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);e&&(t=e)}return t}catch(t){r.w.printStackTrace(t)}},c.prototype.getSelectedInfo=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)this.itemArr[i].checked&&e.push({index:i,label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,checked:!0});return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getSelectedInfo=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)if(this.itemArr[i].checked){var o=this.itemArr[i].orgLabel;void 0===o&&(o=this.itemArr[i].label),e.push({index:i,label:o,value:this.itemArr[i].value})}return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getInfo=function(t){try{var e;return this.itemArr.length>t&&((e={}).index=t,e.label=this.itemArr[t].label,e.value=this.itemArr[t].value,e.checked=n.D.getBoolean(this.itemArr[t].checked)),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getInfoArray=function(){try{for(var t=[],e=0;e<this.itemArr.length;e++){var i={};i.index=e,i.label=this.itemArr[e].label,i.value=this.itemArr[e].value,i.checked=n.D.getBoolean(this.itemArr[e].checked),t.push(i)}return t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();if(this.modelControl.isBinded()?this.modelControl.setData(t):1==this.setValueNM(t)&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}),"gridView"===this.itemTableMode)for(var i=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),o=parseInt(this.itemTable.options.gridViewOptions.checkColumn),s=this.itemTable.gridView.getCellInfo(0,o),l=s.options.trueValue,h=s.options.falseValue,d=1==this.options.allOption?1:0,c=this.itemTable.gridView.getRowCount()-d,u=0;u<c;u++){var p=this.itemTable.gridView._getTdElem(u+d,o);!0===this.itemArr[u+d].checked?(p&&(p.getElementsByTagName("input")[0].checked=!0),this.addSelectedInfo({index:u+d,checked:!0}),i.setCellData(u+d,o,l)):(p&&(p.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:u+d,checked:!1}),i.setCellData(u+d,o,h))}
if(this._getSelectedInfo().length>0&&!0===this.options.showCheckedTop&&null!==this.itemTable&&1==this.setValueNM(t)&&e!=this.getValue()){for(u=0;u<this.getItemCount();u++)if(this.itemArr[u].checked){var g=document.getElementById(this.id+"_itemTable_"+u+"_checkbox");null!=g&&(g.checked=!0),this.addSelectedInfo({index:u,checked:null==g||g.checked})}this._sortCheckItemArr()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(!n.D.isArray(t)){if(n.D.isNull(t))return;var e=t.toString();t=e.split(this.separator)}for(var i=[],o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value!=WebSquare.allValue){var a={};a.index=s,a.checked=!1;for(var l=0;l<t.length;l++)if(t[l]==this.itemArr[s].value){a.checked=!0;break}i.push(a)}return this.setSelectedInfoNM(i)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getValue=function(t){try{t||(t=this.separator);for(var e=this.getItemCount(),i=[],o=0;o<e;o++)this.itemArr[o].checked&&i.push(this.itemArr[o].value);return i.join(t).wq_trim()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getValueArray=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)this.itemArr[i].checked&&e.push(this.itemArr[i].value);return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setText=function(t){try{for(var e=this.getItemCount(),i=[],o=this._getRangeTextArray(t),s=0;s<e;s++)for(var a=0;a<o.length;a++)if(this.itemArr[s].label==o[a]){i.push(this.itemArr[s].value);break}this.setValue(i.join(this.separator))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{return this._getRangeText(this.itemArr,this.getItemCount(),t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getRangeText=function(t,e,i,o){try{i||(i=this.separator);for(var s,a=[],n=!1,l=!1,h=0;h<e;h++){(o?!0===o[h+"_"]:t[h].checked)?this.options.rangeSeparator?(h-s==1&&h!==e-1?n||(n=!0,a.push(this.options.rangeSeparator),l=!0):(n=!1,a.push(t[h].label)),s=h):a.push(t[h].label):n&&(a.push(t[s].label),n=!1)}var d="";if(l)for(h=0;h<a.length;h++)d+=a[h],h!==a.length-1&&a[h]!==this.options.rangeSeparator&&a[h+1]!==this.options.rangeSeparator&&(d+=i);else d=a.join(i).wq_trim();return d}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getTextArray=function(t){try{for(var e=this.getItemCount(),i=[],o=0;o<e;o++)this.itemArr[o].checked&&i.push(this.itemArr[o].label);return i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getRangeTextArray=function(t){try{var e=t.split(this.separator);if(this.options.rangeSeparator&&t.indexOf(this.options.rangeSeparator)>=0){for(var i=[],o=this.getItemCount(),s=0;s<e.length;s++)if(e[s].indexOf(this.options.rangeSeparator)>=0){for(var a=e[s].split(this.options.rangeSeparator),n=NaN,l=NaN,h=0;h<o&&(this.itemArr[h].label==a[0]?n=h:this.itemArr[h].label==a[1]&&(l=h),isNaN(n)||isNaN(l));h++);for(h=n;h<=l;h++)i.push(this.itemArr[h].label)}else i.push(e[s]);return i}return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addItemArr=function(t,e){try{this.itemArr.push({label:t,value:e}),this.itemDisabledArray.push(!1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._addOrgArrInfo=function(t,e){try{for(var i=t,o=this.originArrInfo,s=t;s<o.length;s++)i++,o[s].orgIndex=i;e.orgIndex=t,o.splice(t,0,e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o={value:t,label:e};if(!0===this.options.showCheckedTop&&this.itemArr.length>0){this._addOrgArrInfo(i,o);var s=this._getSelectedInfo().length;!0===this.options.allOption&&s++,this.itemArr.splice(s,0,o)}else this.itemArr.splice(i,0,o);if("0"!=this.options.displayMode&&(this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i)),this.itemDisabledArray.splice(i,0,!1),this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,
value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a})}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;var e=null;if(t>=0&&t<this.getItemCount()){if(e=this.itemArr.splice(t,1)[0],this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}this.itemDisabledArray.splice(t,1)}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.removeAll=function(t){try{if(this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){var e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.setSelectOptions(this.itemArr),this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML=""}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":"component"!=this.options.renderType&&"native"!=this.options.renderType||(e?(this.closeSubLayer(),this.getElementById(this.id+"_label").style.color="#848684"):this.getElementById(this.id+"_label").style.color="");var i=this.dom.button;1==e?(this.addClass(this.render,"w2checkcombobox_disabled"),null!=i&&this.addClass(i,"w2checkcombobox_button_disabled")):(this.removeClass(this.render,"w2checkcombobox_disabled"),null!=i&&this.removeClass(i,"w2checkcombobox_button_disabled"));break;case"mandatory":1==e?this.addClass(this.render,"w2checkcombobox_mandatory"):this.removeClass(this.render,"w2checkcombobox_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hide=function(){try{this.closeSubLayer(),l.s.prototype.hide.call(this)}catch(t){r.w.printStackTrace(t)}},c.prototype.checkAll=function(t){try{void 0===t&&(t=!0);for(var e=[],i=0;i<this.itemArr.length;i++)this.itemArr[i].value!=WebSquare.allValue&&e.push({index:i,checked:t});return null!=this.itemTable&&1==this.options.allOption&&0!=e.length&&document.getElementById(this.id+"_itemTable_0_checkbox")&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!!t),this.setSelectedInfo(e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype.setInitValue=function(t){try{
var e=this.getValue();""===this.options.initValue&&this.itemArr&&this.itemArr[0]&&(this.options.initValue=this.itemArr[0].value),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount()||"gridView"===this.itemTableMode)return;if(e=n.D.getBoolean(e),this.itemDisabledArray[t]=e,this.itemTable){var i=this.itemTable.getDomList("checkboxArr","input"),o="";o="native"===this.options.renderType?this.itemTable.getDomList("checkboxItemArr","li"):this.itemTable.getDomList("checkboxItemArr","td"),i[t].disabled=e,i[t].itemDisabled=e,1==e?this.addClass(o[t],"w2checkcombobox_item_disabled"):this.removeClass(o[t],"w2checkcombobox_item_disabled")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.itemDisabledArray[t]}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;if(this.options.editable||this.options.useEdit){this._parent_uuid&&a.B.stopPropagation(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2checkcombobox_input")&&this.isOpen)return;if(e.match("w2checkcombobox_col_label")||e.match("w2checkcombobox_acc_custom_native_useEditLabel"))return this.isOpen&&!this.options.useEdit?this.closeSubLayer():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),this.changeMode(),void(this.options.useEdit&&this.openSubLayer())}if(this.mozTrickBuffer="",this.editmode=!1,this.options.allOption&&this.getItemDisabled(0)&&this.setItemDisabled(0,!1),!this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}"native"===this.options.renderType&&null!==this.itemTable&&null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null);var o=this.isOpen;this.setSubLayer(),o==this.isOpen&&(this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()),e=null}else this.focus(),this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(this.options.useEdit&&this.event.isMe(t,this.dom.input))return void(13===e&&this.dom.input.blur());if(this.options.editable){if(this.event.isMe(t,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(t,!1),(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.mozTrickCompare(),n.D.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.B.preventDefault(t),i=n.D.getPreTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.B.preventDefault(t),i=n.D.getNextTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus();return}e=t.charCode?t.charCode:t.keyCode;if(s.v.browserCheck.opera){if(18==e&&!this.isOpen)return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void this.changeMode()}else{if(!(40!=e&&38!=e||this.isOpen))return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void this.changeMode()}if(9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(a.B.preventDefault(t),
i=n.D.getPreTabbableComp(this.id)))return this.isOpen&&this.closeSubLayer(),void i.focus()}else null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(a.B.preventDefault(t),(i=n.D.getNextTabbableComp(this.id))&&(this.isOpen&&this.closeSubLayer(),i.focus()));if(null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.handleKeydownEvent(t),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;if(null!=this.itemTable&&""==this.itemTable.render.style.display)return}else{if(13==e||40==e)return void this.handleClickEvent(t);var i;if(9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(a.B.preventDefault(t),i=n.D.getPreTabbableComp(this.id)))return void i.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(a.B.preventDefault(t),i=n.D.getNextTabbableComp(this.id)))return void i.focus();if(this.isOpen)return}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownNativeEvent=function(t){try{for(var e=t.charCode?t.charCode:t.keyCode,i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2checkcombobox_acc"))return void(9==e&&(t.shiftKey?this.dom.input&&this.endEdit():this.options.useEdit?(this.showEditMode(!0),this.changeMode()):this.dom.label.setAttribute("tabIndex",0)));if(i.match("w2checkcombobox_input"))return 9==e&&(this.dom.input.blur(),t.shiftKey||this.dom.button.setAttribute("tabIndex",0)),void(13===e&&this.dom.input.blur());if(i.match("w2checkcombobox_acc_custom_label")&&(this.dom.label.removeAttribute("tabIndex"),this.dom.button.setAttribute("tabIndex",0)),i.match("w2checkcombobox_acc_custom_arrow")){if(9==e){if(t.shiftKey)this.options.useEdit?null!==this.dom.input&&(this.showEditMode(!0),this.changeMode()):this.dom.label.setAttribute("tabIndex",0);else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){a.B.preventDefault(t);var o=n.D.getNextTabbableComp(this.id);if(o)return this.isOpen&&this.closeSubLayer(),void o.focus()}}else 13!=e&&40!=e||this.handleClickEvent(t);return}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{if(!this.event.isMe(t,this.dom.input))return;var e;if(t.key)e=t.key;else{var i=t.charCode?t.charCode:t.keyCode;e=String.fromCharCode(i)}if(e===this.options.separator)for(var o=this._getRangeTextArray(this.dom.input.value),s=this.getItemCount(),a=0;a<s;a++)if(this.itemArr[a].value!==WebSquare.allValue&&this.itemArr[a].value!==this.options.chooseOptionValue){var n=document.getElementById(this.id+"_itemTable_"+a+"_checkbox"),l=!1;this.itemArr[a].label===o[0]&&(l=!0,o.shift()),n&&(n.checked=l),this.itemArr[a].checked=l}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusEvent=function(t){try{if(a.B.stopEvent(t),(this.options.editable||this.options.useEdit)&&!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");this.addClass(e,"w2checkcombobox_selected"),"onfocus"==this.options.editModeEvent&&this.changeMode()}"native"===this.options.renderType?this.addClass(this.dom.nativeLabel,"w2checkcombobox_focus"):(this.addClass(this.dom.tbody,"w2checkcombobox_focus"),this.addClass("w2checkcombobox_body_focus"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleClickEventDocument=function(t){try{!this.event.isMe(t,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&(s.v.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0))}catch(t){r.w.printStackTrace(t,null,this)}},
c.prototype.handleBlurEvent=function(t){try{a.B.stopEvent(t),"native"===this.options.renderType?this.removeClass(this.dom.nativeLabel,"w2checkcombobox_focus"):(this.removeClass(this.dom.tbody,"w2checkcombobox_focus"),this.removeClass("w2checkcombobox_body_focus"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleblurEventInput=function(){"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),"native"===this.options.renderType&&this.showEditMode(!1))},c.prototype.handleMouseoverEvent=function(t){try{a.B.stopEvent(t),"native"==this.options.renderType?this.addClass("w2checkcombobox_native_over"):(this.addClass(this.dom.tbody,"w2checkcombobox_over"),this.addClass("w2checkcombobox_body_over"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),"native"==this.options.renderType?this.removeClass("w2checkcombobox_native_over"):(this.removeClass(this.dom.tbody,"w2checkcombobox_over"),this.removeClass("w2checkcombobox_body_over"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisplayAllOptionLabel=function(t){try{if(!this.options.allOption)return;var e=this.options.displayAllOptionLabel,i=n.D.getBoolean(t);this.options.displayAllOptionLabel=i;var o=document.getElementById(this.id+"_itemTable_0_checkbox");if(e!=i){var s=!0;if(!o||!o.checked)for(var a=1;a<this.getItemCount();a++)if(!this.itemArr[a].checked){s=!1;break}if(!1===s)return;var l="";l=1==i?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택":this.getText(),this.options.escape&&(l=this._encode(l)),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&(l=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen)),this.dom.label&&(this.dom.label.innerHTML=l),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=l)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.serialize=function(){return{selectedInfo:this.getSelectedInfo()}},c.prototype.restore=function(t){try{return this.checkAll(!1),this.setSelectedInfo(t.selectedInfo),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},c.prototype.changeMode=function(){try{if(this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){if(this.options.rangeSeparator)return this.dom.input.value=this.getText(),this.showEditMode(!0),void("focus"!=this.options.editType?(this.dom.input.select(),this.setfFocus()):document.activeElement!=this.dom.input&&this.setfFocus());var t="",e=this.getCheckedValue(this.options.searchTarget);e.length>0&&(t=e.join(this.separator).wq_trim());var i=t;if(this.options.useEdit||(i+=" "),"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&this.setfFocus();var o=WebSquare.xml.decode(i);this.dom.input.value=o,(n.D.isOpera()||n.D.isFF())&&this.dom.input.setSelectionRange(o.length,o.length)}else this.dom.input.value=WebSquare.xml.decode(i),this.showEditMode(!0),this.dom.input.select(),this.setfFocus()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getCheckedValue=function(t){var e=[];t||(t="orgLabel");for(var i=0;i<this.itemArr.length;i++)this.itemArr[i].checked&&e.push(this.itemArr[i][t]);return e},c.prototype.showEditMode=function(t){t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",
this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):s.v.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(t){}}),{key:this.id+"_showEditMode",caller:this,delay:1})},c.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.w.printStackTrace(t)}return t},c.prototype.initCheckCombobox=function(){try{this.removeAll(),this.dom.input.value="",this.dummyData=null,this.isOpen&&this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInputFocus=function(){try{this.changeMode()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.inputKeyDown=function(t,e){try{if(0==e)var i=t.charCode?t.charCode:t.keyCode;if(this.interactionMode){if(this.editmode=!1,0==e)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(t));if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(t),WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus(),s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else this.options.interactionKey;if(!this.options.interactionEnterKey){var o=this;this.mytime=setTimeout((function(){o.runSubmission(i)}),100)}return}if(0==e)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void this.enterHandle(t);if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(t),s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.itemArr.length>0){o=this;this.mytime=setTimeout((function(){o.find()}),100)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.arrowHandle=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(null==this.itemTable)return;var i=this.findinItemArr(this.dom.input.value,this.options.searchTarget);return!this.editmode&&!this.findkeymode||""!=this.dom.input.value&&0!=this.viewArr.length?(9==e||9==e&&t.shiftKey?this.addSelectedInfo({index:i,checked:!0
}):this.itemTable.handleKeydownEvent(t),void(this.mozTrickBuffer="")):void a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.find=function(){try{var t=this.dom.input.value;if(""==t)return this.mozTrickBuffer=t,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==t)return void(this.mozTrickBuffer=t);this.mozTrickBuffer=t,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(t=t.toLowerCase());for(var e=0;e<this.itemArr.length;e++)if(!this.itemArr[e].noItem){var i=!1;if(this.itemArr[e].orgLabel||(this.itemArr[e].orgLabel=this.itemArr[e].label,this.itemArr[e].label=this.getItemText(e)),!i&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var o=this.options.caseSensitive?this.itemArr[e].orgLabel:this.itemArr[e].orgLabel.toLowerCase();"contain"==this.search?i=this.myhelper.containWith(o,t):"start"==this.search?i=this.myhelper.startWith(o,t):"none"==this.search&&(i=o==t)}if(!i&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var s=this.options.caseSensitive?this.itemArr[e].value:this.itemArr[e].value.toLowerCase();"contain"==this.search?i=this.myhelper.containWith(s,t):"start"==this.search?i=this.myhelper.startWith(s,t):"none"==this.search&&(i=s==t)}var a=this.itemArr[e].label;if(this.options.useKeywordHighlight){var n=a.indexOf(this.mozTrickBuffer);n>=0&&(a=a.substring(0,n)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+a.substring(n+this.mozTrickBuffer.length,a.length))}i&&this.viewArr.push({value:this.itemArr[e].value,label:a,orgLabel:this.itemArr[e].orgLabel,index:e})}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr),this.setItemDisabled(0,!0)),this.openSubLayer({select:!1})):this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getFormattedValue=function(t,e){try{var i=e;if(this.options.displayFormatter){if(!this.displayFormatter){this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++;try{var o=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof o&&(this.displayFormatter=o)}catch(t){}}this.displayFormatter&&t>this.fixedIndex&&(i=this.displayFormatter(e))}return i}catch(t){r.w.printStackTrace(t)}},c.prototype.enterHandle=function(t){try{var e,i=this.dom.input.value;a.B.fireEvent(this,"oneditend",i);var o=n.D.getDataPrefix("index");if((null==this.itemTable||null==this.itemTable.selectedCell)&&(null==this.itemTable&&this.setSubLayer(),null==this.itemTable.selectedCell)){var l=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)void 0===l||this.addSelectedInfo({index:l,checked:!0});else if("noEnd"===this.noResult){if(void 0===l)return;this.addSelectedInfo({index:l,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==l?(this.selectedInfo={},e=this.findinItemArr(this.viewArr[0].value,"value")):e=l,this.addSelectedInfo({index:e,checked:!0})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(this.selectedInfo={},e=this.findinItemArr(this.itemArr[0].value,"value"),this.addSelectedInfo({index:e,checked:!0})))}if(s.v.browserCheck.opera&&a.B.stopEvent(t),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(e=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?void 0===e&&(this.selectedInfo={}):(void 0===e&&void 0===(e=this.itemTable.selectedCell.index)&&(e=this.itemTable.selectedCell.getAttribute(o)),this.addSelectedInfo({index:e,checked:!0
}));else if("noEnd"===this.noResult){if(void 0===e)return;this.addSelectedInfo({index:e,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==e&&(e=this.findinItemArr(this.viewArr[0].value,"value")),this.addSelectedInfo({index:e,checked:!0})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.selectedInfo={},this.addSelectedInfo({index:e,checked:!0})));this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),this.closeTable()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.findinItemArr=function(t,e){try{for(var i=e||"label",o=0;o<this.itemArr.length;o++)if("value"===i){if(t==this.itemArr[o].value)return o}else if("label"===i){if(1==this.options.displayMode||2==this.options.displayMode){if(t==this.itemArr[o].orgLabel)return o}else if(t==this.itemArr[o].label)return o}else if("both"===i){if(t==this.itemArr[o].orgLabel||t==this.itemArr[o].value)return o}else if("all"===i&&t==this.itemArr[o].orgLabel+"|"+this.itemArr[o].value)return o;if(this.dummyData&&("value"===i&&this.dummyData.value||"label"===i&&t===this.dummyData.label||"all"===i&&t===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.runSubmission=function(t){try{var e=!0,i=this.dom.input.value,o=n.D.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>o&&(e=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(e=!1),e)if(this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var s=n.D.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof s&&s(i,t)}else if(""!=this.options.submission.wq_trim()){var a="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(a),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemSet=function(t,e,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var o=!1;e==this.itemsetObj.label&&i==this.itemsetObj.value||(o=!0),this.itemsetObj.nodeset=t,o&&(this.itemsetObj.label=e,this.itemsetObj.value=i),this.buildItemArr();for(var a=0;a<this.itemArr.length;a++)this.itemArr[a].orgLabel=this.itemArr[a].label,this.itemArr[a].label=this.getItemText(a);if(this.options.interactionMode){if(s.v.clearTimer(this.id+"_showEditMode",!0),1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(a=0;a<this.itemArr.length;a++){var n=this.itemArr[a].label;if(this.options.useKeywordHighlight){var l=n.indexOf(this.mozTrickBuffer);l>=0&&(n=n.substring(0,l)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+n.substring(l+this.mozTrickBuffer.length,n.length))}this.viewArr.push({label:n,orgLabel:this.itemArr[a].orgLabel,value:this.itemArr[a].value,index:a})}}else{if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a})}var h=this.getCheckedValue(this.options.searchTarget),d="";h.length>0&&(d=h.join(this.separator).wq_trim()),this.itemArr.length>0?this.dom.label.innerHTML=d:this.dom.label.innerHTML=""}catch(t){r.w.printStackTrace(t,null,this)}},
c.prototype.buildItemArr=function(){try{this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.closeTable=function(){try{this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.openTable=function(){try{this.showTable()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.endEdit=function(){try{var t=this.dom.input.value;if(a.B.fireEvent(this,"oneditend",t),this.options.useEdit)return void this.setText(t);this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.mozTrickBuffer="",(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0,n.D.clearInterval(this.id+"_mozTrickCompare"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setGridViewData=function(){try{var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),e=this.gridViewOptions.dataComp.filterManager.filterArr;if(e)for(var i=0;i<e.length;i++)t.setColumnFilter({type:e[i].options.type,colIndex:e[i].options.colIndex,key:e[i].options.key,condition:e[i].options.condition});if(this.options.allOption){var o=t.getAllData(),s=WebSquare.language.getMessage("CheckCombobox_all")||"-전체-";if(o[0]!=s){for(var a=[],n=-1,l=0;l<t.cellIdList.length;l++)-1==n&&t.cellIdList[l]==this.itemsetObj.label&&(n=l),a.push("");this.labelColumn=-1==n?0:n,a[this.labelColumn]=this.defaultAllOptionLabel,t.setRowData(0,a,!1)}}var h=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;h&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),h&&this.itemTable.hide()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i){i.hide(),this.removeClass("w2checkcombobox_open");var o=this.getValue(),s=this.getInfoArray(),n=this.convertInfoHash2Array(this.selectedInfo);n.length>0&&this.setSelectedInfo(n),this.isOpen=!1;var l=this.getValue();if(o!=l){var h={oldInfo:s,newInfo:this.getInfoArray(),oldValue:o,newValue:l};a.B.fireEvent(this,"onviewchange",h)}this.isOpen=!1,!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1),this.selectedInfo={}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._openOtherLayer=function(){try{if("gridView"==this.itemTableMode&&this.gridViewItemArr.length<=0)return;var t=this.otherComponent;if("grid"==this.itemTableMode?(this.setSubLayer(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),t=this.itemTable):"gridView"==this.itemTableMode&&(this.setSubLayer(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.style.height),t=this.itemTable),!this.isOpen){t.setPosition(0,0),t.show(),this.addClass("w2checkcombobox_open");var e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render),o=this.options.direction;if("auto"==o){var s=document.body.scrollTop;s<document.documentElement.scrollTop&&(s=document.documentElement.scrollTop);var a=i-s,n=document.documentElement.clientHeight-(a+this.render.offsetHeight),l=t.render.offsetHeight;n<l&&a>l&&(o="up")}
"up"==o?i-=t.render.offsetHeight:i+=this.render.offsetHeight,document.documentElement.clientWidth<e+t.render.offsetWidth&&(e=e+this.render.offsetWidth-t.render.offsetWidth),"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(e=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(t.render.style.width=this.render.offsetWidth+"px")),t.render.style.left=e+"px",t.render.style.top=i+"px",this.isOpen=!0,this.itemTableDirection=o,WebSquare.style.adjustZIndex(this.uuid,t.uuid,"itemTable")}if("grid"==this.itemTableMode)null!=this.targetFocusedIndex?h=this.targetFocusedIndex:-1==(h=this.itemTable.grid.getFocusedRowIndex())&&(h=0),this.itemTable.grid.setFocusedCell(h,0),this.targetFocusedIndex=null;else if("gridView"==this.itemTableMode){var h;null!=this.targetFocusedIndex?h=this.targetFocusedIndex:-1==(h=this.itemTable.gridView.getFocusedRowIndex())&&(h=0),this.itemTable.gridView.setFocusedCell(h,0),this.targetFocusedIndex=null}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._clearVisibleColumnChecked=function(){try{for(var t=!1,e=0;e<this.itemArr.length;e++){var i=this.itemArr[e];!0===i._hidden&&!1!==i.checked&&(i.checked=!1,t=!0)}if(t){var o=this.getValue();this.modelControl.isBinded()&&this.modelControl.setData(o),this.setValueNM(o)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._encode=function(t){var e=t;try{var i="<span class='w2checkcombobox_keyword'>",o="</span>",s=t.indexOf(o,i.length);return e=this.options.useKeywordHighlight&&s>=0&&t.slice(0,i.length)===i&&t.slice(s,s+o.length)===o?i+WebSquare.xml._encode(t.slice(i.length,s))+o+WebSquare.xml._encode(t.slice(s+o.length)):WebSquare.xml._encode(t)}catch(t){return r.w.printStackTrace(t,null,this),e}},c.prototype.handleItemtableMousedown=function(t){try{for(var e=this.itemTable.event.getTargetIterator(t),i=n.D.getDataPrefix("row"),o=n.D.getDataPrefix("col");e.next();)if("native"!==this.options.renderType&&e.match(this.itemTable.options.w2table_col,null,"td")||"native"===this.options.renderType&&e.match(this.itemTable.options.w2table_col,null,"li")){var s=e.getElement(),l=a.B.getMouseX(t),h=a.B.getMouseY(t);this._currentTarget={row:parseInt(s.getAttribute(i),10),col:parseInt(s.getAttribute(o),10),mouseX:l,mouseY:h,selectedIndex:{},shiftKey:t.shiftKey},this._dragGhost.setPosition(l,h),this._dragGhost.show();var d={passive:!1};return n.D.emptySelection(),a.B.preventDefault(t),void(1==n.D.isMobile()?(this.itemTable.event.addListener(document.documentElement,"ontouchmove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),d),this.itemTable.event.addListener(document.documentElement,"ontouchend",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),d)):(this.itemTable.event.addListener(document.documentElement,"onmousemove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),d),this.itemTable.event.addListener(document.documentElement,"onmouseup",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),d)))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleItemtableMousemove=function(t){try{if(!this._currentTarget)return;var e=a.B.getMouseX(t),i=a.B.getMouseY(t),o=e-this._currentTarget.mouseX,s=i-this._currentTarget.mouseY,l=o>0?0:o,h=s>0?0:s;(l<0||h<0)&&this._dragGhost.setPosition(this._currentTarget.mouseX+l,this._currentTarget.mouseY+h),this._dragGhost.setSize(Math.abs(o),Math.abs(s));for(var d=a.B.getTarget(t),c=this.itemTable.event.getTargetIterator(t),u=n.D.getDataPrefix("row"),p=n.D.getDataPrefix("col");c.next();)if("native"!==this.options.renderType&&c.match(this.itemTable.options.w2table_col,null,"td")||"native"===this.options.renderType&&c.match(this.itemTable.options.w2table_col,null,"li")){d=c.getElement()
;for(var g=parseInt(d.getAttribute(u),10),m=parseInt(d.getAttribute(p),10),f=d.parentNode.childNodes.length,b=g-this._currentTarget.row,y=m-this._currentTarget.col,v=Math.abs(b),w=Math.abs(y),S={},C=0;C<=v;C++)for(var _=0;_<=w;_++){var x,I;x=b>0?this._currentTarget.row+C:this._currentTarget.row-C,I=y>0?this._currentTarget.col+_:this._currentTarget.col-_;var T=-1;if(S[T="native"===this.options.renderType?x:x*f+I]=!0,!this._currentTarget.selectedIndex[T])(D=document.getElementById(this.itemTable.id+"_"+T))&&D.firstChild&&D.firstChild.checked===this._currentTarget.shiftKey&&D.click()}for(var k in this._currentTarget.selectedIndex){var D;if(!S[k])(D=document.getElementById(this.itemTable.id+"_"+k))&&D.click()}this._currentTarget.selectedIndex=S,c.stop()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleItemtableMouseup=function(t){try{this._currentTarget=null,this._dragGhost.setSize(0,0),this._dragGhost.hide(),1==n.D.isMobile()?(this.itemTable.event.removeEvent(document.documentElement,"ontouchmove"),this.itemTable.event.removeEvent(document.documentElement,"ontouchend")):(this.itemTable.event.removeEvent(document.documentElement,"onmousemove"),this.itemTable.event.removeEvent(document.documentElement,"onmouseup"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleInputValidator=function(t){try{var e=this.dom.input.value,i=this.validator.validateKeyInput(this.dom.input,e,t);if(i.valid){if(e!==i.str){var o=WebSquare.text.getCaretPos(this.dom.input);n.D.isIEAllVersion()||(o-=e.length-i.str.length),this.dom.input.value=i.str,WebSquare.text.setCaretPos(this.dom.input,o)}}else a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.w.printStackTrace(t,null,this)}}},5763:(t,e,i)=>{i.r(e),i.d(e,{floatingLayer:()=>h});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.floatingLayer",pluginName:"floatingLayer",parseChild:!0,userEvents:["onclose","onlayermove","onlayerclick","onbeforeclose","onlayerresize"],useConfig:!0,bodyComplex:!0,dragAlwaysView:!1,title:"",titleClass:"",useResizeDrag:!1,modal:!1,closeButtonSrc:"",closeButtonClass:"",headerLeftClass:"",headerCenterClass:"",headerRightClass:"",bodyLeftClass:"",bodyCenterClass:"",bodyRightClass:"",bodyLeftBottomClass:"",bodyBottomClass:"",bodyRightBottomClass:"",useModal:!1,useModalStack:"",frameModal:"",useAnchor:!1,dragAutoPosition:!1,movable:!0,documentTitle:!0,closeTitle:"close",ghostLayer:!1,headerHTML:"",dragResizable:!1,fixed:!1},h.prototype.initialize=function(t){try{this.zIndex=0,""==this.options.useModalStack&&(this.options.useModalStack=s.v.getConfiguration("/WebSquare/floatingLayer/@useModalStack")),this.modalStack=0}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t=[],e=this.options.title?"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'":"",i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'";if(t.push("<div role='application' id='"+this.id+"' "+i+" class='w2floatingLayer "+this.options.className+"' "+o+">"),t.push("<table class='w2floatingLayer_table'>"),t.push("<tr class='w2floatingLayer_dragArea'>"),t.push("<td class='w2floatingLayer_topleft "+this.options.headerLeftClass+"'></td>"),t.push("<td id='"+this.id+"_headerHTML' class='w2floatingLayer_topcenter "+this.options.headerCenterClass+"' "+e+" >"),this.options.headerHTML){var s=this.options.headerHTML;try{var a=n.D.getGlobalFunction(this.options.headerHTML,this.scope_id);s="function"==typeof a?a():a}catch(t){s=this.options.headerHTML}t.push(s)
}else t.push("<div id='"+this.id+"_titleDiv' class='w2floatingLayer_title "+this.options.titleClass+"' >"+this.options.title+"</div>"),n.D.getBoolean(this.options.useATagBtn)?t.push("<a id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+o+"' href='javascript:void(null);' title='"+this.options.closeTitle+"' ></a></div>"):t.push("<div id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+o+" title='"+this.options.closeTitle+"' ></div>");if(t.push("</td>"),t.push("<td class='w2floatingLayer_topright "+this.options.headerRightClass+"'></td>"),t.push("</tr>"),n.D.getBoolean(this.options.fullContentArea)){t.push("<tr>"),t.push("<td class='w2floatingLayer_fullContentArea' colSpan=3>"),t.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),t.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' tabIndex='0'>"+this.options.title+"</div>");for(var l=this.getChildren(),h=0;h<l.length;h++)t.push(l[h].toHTML());t.push("</div>"),t.push("</td>"),t.push("</tr>")}else{t.push("<tr>"),t.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerleft "+this.options.bodyLeftClass+"'></td>"),t.push("<td class='w2floatingLayer_centercenter'>"),t.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),t.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' "+o+">"+this.options.title+"</div>");for(l=this.getChildren(),h=0;h<l.length;h++)t.push(l[h].toHTML());t.push("</div>"),t.push("</td>"),t.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerright "+this.options.bodyRightClass+"'></td>"),t.push("</tr>"),t.push("<tr class='w2floatingLayer_dragArea'>"),t.push("<td class='w2floatingLayer_bottomleft "+this.options.bodyLeftBottomClass+"'></td>"),t.push("<td class='w2floatingLayer_bottomcenter "+this.options.bodyBottomClass+"'></td>"),t.push("<td class='w2floatingLayer_bottomright "+this.options.bodyRightBottomClass+"'></td>"),t.push("</tr>")}return t.push("</table>"),this.options.dragResizable&&(t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_right'></div>"),t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize'></div>"),t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_bottom'></div>")),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setPreAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=n.D.getStyleProperty(this.render,"z-index");t&&"auto"!=t||(t=4500),this.render.style.zIndex=t,this.zIndex=t}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=n.D.getStyleProperty(this.render,"z-index");n.D.getStyleProperty(this.render,"z-index")&&"auto"!=t||(this.render.style.zIndex=4500)}this.resetContentSize(),n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStart)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),
this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),this.render.offsetWidth>0&&this.render.offsetHeight>0&&this.options.useModal&&this.showModal()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleKeydownEvent=function(t){try{if(13!=(t.charCode?t.charCode:t.keyCode))return;this.handleClickEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleFocusEvent=function(t){try{this.dom.titleDiv||(this.dom.titleDiv=this.getElementById(this.id+"_titleDiv")),this.dom.titleDiv&&this.options.documentTitle&&(document.title=this.dom.titleDiv.innerHTML)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleBlurEvent=function(t){try{this.options.documentTitle&&(document.title=WebSquare.docTitle)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.focus=function(){try{this.render.focus()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{a.B.fireEvent(this,"onlayerclick"),a.B.stopPropagation(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2floatingLayer_close_button")){if(!1===a.B.fireEvent(this,"onbeforeclose"))break;this.hide(),this.options.useModal,a.B.fireEvent(this,"onclose")}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMousedownEvent=function(t){try{if(!this.options.movable)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2floatingLayer_dragArea")&&!this.options.fixed){var i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:10,mode:"move",makeGhostLayer:function(t){t.setSize(i.render.offsetWidth,i.render.offsetHeight);var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render);return t.setPosition(e,o),t},handleStart:function(){1==i.options.useModal&&WebSquare.getBody().showModal("w2modal_onmove")},handleFinish:function(t,e,o,s){var r,n,l=/matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/,h=WebSquare.style.getStyle(document.body,"transform");h?(r=null==(r=h.match(l))?1:parseFloat(r[1])||1,n=null==(n=h.match(l))?1:parseFloat(n[2])||1):(r=1,n=1),WebSquare.idCache[i.parentFrame]?i.setPosition((t+o-WebSquare.style.getAbsoluteLeft(WebSquare.idCache[i.parentFrame].render))/r,(e+s-WebSquare.style.getAbsoluteTop(WebSquare.idCache[i.parentFrame].render))/n):i.setPosition((t+o-WebSquare.style.getAbsoluteLeft(document.body))/r,(e+s-WebSquare.style.getAbsoluteTop(document.body))/n),1==i.options.useModal&&WebSquare.getBody().hideModal(!0),a.B.fireEvent(i,"onlayermove",t+o,e+s)}})}if(e.match("w2floatingLayer_resize")){a.B.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10)+o,n=parseInt(i.getStyle("height"),10)+s;i.setSize(a,n)}})}if(e.match("w2floatingLayer_resize_right")){a.B.stopEvent(t);i=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_right",makeGhostLayer:function(t){
var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10),n=parseInt(i.getStyle("height"),10),l=a+o;i.setSize(l,n)}})}if(e.match("w2floatingLayer_resize_bottom")){a.B.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_bottom",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10),n=parseInt(i.getStyle("height"),10)+s;i.setSize(a,n)}})}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.addClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.removeClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleSelectStart=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_dragArea")&&a.B.stopEvent(t);e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setSize=function(t,e){try{if(!this.render)return;t=parseInt(t),e=parseInt(e),null!=t&&!isNaN(t)&&t>=0&&(this.render.style.width=t+"px"),null!=e&&!isNaN(e)&&e>=0&&(this.render.style.height=e+"px",this.resetContentSize()),a.B.fireEvent(this,"onlayerresize")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.resetContentSize=function(){try{var t=n.D.getStyleProperty(this.render,"height");if(t=parseInt(t,10),isNaN(t)){var e=this.getSize("height")-42;this.dom.contents.style.height="number"==typeof e&&e>0?this.getSize("height")-42+"px":""}else this.dom.contents.style.height=t-42+"px";this.options.fullContentArea&&(this.dom.contents.style.width=this.render.style.width)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setTitle=function(t){try{this.dom.titleDiv||(this.dom.titleDiv=this.getElementById(this.id+"_titleDiv")),this.dom.titleDiv&&(this.dom.titleDiv.innerHTML=t,this.dom.titleDiv.parentNode.setAttribute("title",t.wq_replaceAll("'","&#39;")))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.showModal=function(){var t=WebSquare.getBody();if(this.modalStack<=0){if(WebSquare.util.getBoolean(this.options.useModalStack)){var e={},i=this.options.pluginName;if(this.options.frameModal){e[i="popup"]={id:this.uuid};var o={className:"w2modal_floatingLayer",popupModal:this.options.useModal,stackComponents:e};if("true"===this.options.frameModal){var s=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&s!=this.scope_obj.uuid?this.scope_obj.showFrameModal(o):t.showModal(o)
}else"false"===this.options.frameModal&&t.showModal(o)}else e[i]=this.uuid,t.showModal("w2modal_floatingLayer",null,e)}else t.showModal("w2modal_floatingLayer");this.modalStack++}},h.prototype.hideModal=function(){if(this.modalStack>0){if(WebSquare.util.getBoolean(this.options.useModalStack))if(this.options.frameModal)if("true"===this.options.frameModal){var t=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&t!=this.scope_obj.uuid?this.scope_obj.hideFrameModal(this.uuid):WebSquare.getBody().hideModal(null,this.uuid)}else WebSquare.getBody().hideModal(null,this.uuid);else WebSquare.getBody().hideModal();else WebSquare.getBody().hideModal(!0);this.modalStack--}},h.prototype.show=function(t){if(l.s.prototype.show.call(this,t),1==this.options.useModal&&this.showModal(),this.options.useAnchor){var e=this.id+"_innerLink";this.getElementById(e).setAttribute("name",e+"_name");var i=document.createElement("a");document.body.appendChild(i),i.setAttribute("href","#"+e+"_name"),i.click(),document.body.removeChild(i),i=null}},h.prototype.hide=function(){if(l.s.prototype.hide.apply(this),1==this.options.useModal&&this.hideModal(),this.options.useAnchor&&this.backlink){var t=n.D.getComponentById(this.backlink);t.render.setAttribute("name",t.id+"_backlink");var e=document.createElement("a");document.body.appendChild(e),e.setAttribute("href","#"+t.id+"_backlink"),e.click(),document.body.removeChild(e)}},h.prototype.setBackLink=function(t){"string"==typeof t?this.backlink=t:t&&"string"==typeof t.id&&(this.backlink=t.id)},h.prototype.setHeaderHTML=function(t){try{if(t){var e=t;try{var i=n.D.getGlobalFunction(t,this.scope_id);e="function"==typeof i?i():i}catch(i){e=t}var o=this.getElementById(this.id+"_headerHTML");o&&(o.innerHTML=e,this.options.headerHTML=e)}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getMaxSize=function(){for(var t,e,i=this.parentControl;null!=i&&null==i.render;)i=i.parentControl;(i?(t=WebSquare.style.getSize(i.render,"width"),e=WebSquare.style.getSize(i.render,"height")):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(n.D.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(n.D.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},h.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(n.D.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(n.D.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},h.prototype.finalize=function(){try{this.hide(),WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){r.w.printStackTrace(t,null,this)}}},2592:(t,e,i)=>{i.r(e),i.d(e,{generator:()=>l});var o=i(2981),s=i(1656),r=i(2085),a=i(3082),n=i(6615),l=function(t,e,i){n.s.call(this,t,e,i)};l.prototype.initAsync=async function(){await this._parse()},o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.generator",pluginName:"generator",tagname:"div"},l.prototype.initialize=function(t){this.idCounter=0,this.dynamicCreateHash=a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10?{tbody:!0,thead:!0,tfoot:!0,
tr:!0}:{},this.passHash={script:!0,label:!0,value:!0,choices:!0,item:!0,itemset:!0,attributes:!0},t&&1==t.nodeType&&!this.id&&(this.id=t.getAttribute("id")),this.tagName=this.options.tagname,this.itemCnt=0,this.insertItemCnt=0,this.generatedIndexSet=[],this.generatedElementSet=[]},l.prototype.toHTML=function(){try{var t=[],e=WebSquare.Parser.parseAttribute(this.element);for(var i in t.push("<"+this.options.tagname),e)if("id"==i){var o=this.id?" id='"+this.id+"'":" id='"+e[i]+"'";t.push(o)}else if("tagname"!=i){"className"==i&&(e[i="class"]=e.className,delete e.className);o=e[i]?" "+i+"='"+e[i]+"'":"";t.push(o)}return t.push(">"),t.push("</"+this.options.tagname+">"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){},l.prototype.setChildElement=function(t,e){try{if(1==t.nodeType){var i=t.getLocalName();if(!this.passHash[i]){var o="",s=a.D.getDataPrefix("g_index"),n=a.D.getDataPrefix("original_id");o=this.scope_obj&&null!=this.org_id?this.org_id+"_"+e+"_":this.id+"_"+e+"_";var l=t.getAttribute("id")||"",h=t.getAttribute("label"),d=t.getTagName();if(t.setAttribute(s,e),"w2:tag"==d&&""==l&&(l="w2generator_"+this.idCounter++),l&&(t.setAttribute(n,l),"w2:listColumn"!=d&&t.setAttribute("id",o+l)),h&&"w2:textbox"!==d&&"w2:span"!==d&&(t.setAttribute("org_label",h),t.setAttribute("label",WebSquare.xml.encode(h))),"w2:generator"!=d)for(var c=t.getChildNodes(),u=0;u<c.length;u++)this.setChildElement(c[u],e)}}}catch(t){r.w.printStackTrace(t)}},l.prototype.restoreChildElement=function(t){try{if(1==t.nodeType){var e=t.getLocalName();if(!this.passHash[e]){var i=a.D.getDataPrefix("g_index"),o=a.D.getDataPrefix("original_id"),s=a.D.getDataPrefix("original_ref"),n=a.D.getDataPrefix("original_nodeset"),l=a.D.getDataPrefix("nodeset"),h=t.getAttribute(o),d=t.getAttribute(s),c=t.getAttribute("org_label");if(t.removeAttribute(i),h&&(t.setAttribute("id",h),t.removeAttribute(o)),d&&(t.setAttribute("ref",d),t.removeAttribute(s)),c&&(t.setAttribute("label",c),t.removeAttribute("original_label")),"w2:generator"==t.getTagName()){var u=t.getAttribute(n);u&&(t.setAttribute(l,u),t.removeAttribute(n))}else for(var p=t.getChildNodes(),g=0;g<p.length;g++)this.restoreChildElement(p[g])}}}catch(t){r.w.printStackTrace(t)}},l.prototype.getLength=function(){return this.generatedIndexSet.length},l.prototype.getChild=function(t,e){var i=this.generatedIndexSet[t],o=this.id+"_"+i+"_"+e;return a.D.getComponentById(o)||document.getElementById(o)},l.prototype.insertChild=function(t){return this.insert(t)},l.prototype.insert=function(t){try{if("number"==typeof t&&null!=this.generatedElementSet[t]){for(var e=0,i=0;i<t;i++)e+=this.generatedElementSet[i].length;this.targetNode=this.render.childNodes[e]}var o=[],a=[],n=[],l=this.dynamicCreateHash[this.options.tagname],h=this.element.cloneNode(!0),d=0,c=h.getChildNodes();for(i=0;i<c.length;i++){var u=c[i];this.setChildElement(u,this.insertItemCnt);var p=null;1===u.nodeType?(p=this._compHash[d]._cloneRecursive(u),d++):(3!==u.nodeType||l)&&(p=WebSquare.controlFactory.createByJSON(null,null,u._element,this.scope_obj,this.parentFrame)),p&&(this.addControl(p),l?this.dynamicAppend(this.render,p,t):3==u.nodeType?a.push(u.nodeValue):(a.push(p.toHTML()),n.push(p))),l&&this.restoreChildElement(u),p&&o.push(p)}var g=WebSquare.controlFactory.initAsync(),m=WebSquare.controlFactory._asyncList.length>0||WebSquare.controlFactory._awaitObj.key.length>0;if(!l){var f=a.join(""),b=document.createElement(this.options.tagname);for(b.innerHTML=f;b.childNodes.length>0;)this.targetNode?this.targetNode=this.render.insertBefore(b.childNodes[b.childNodes.length-1],this.targetNode):this.render.appendChild(b.childNodes[0]);if(m){for(var y=this.uuid,v=[],w=0;w<n.length;w++)v.push(n[w].uuid);g.then((function(t,e){s.v.executePointScript(4);for(var i=WebSquare.idCache[y],o=[],r=0;r<v.length;r++)o.push(WebSquare.idCache[v[r]]);i._insertAfter(o)}))}else this._insertAfter(n)}var S=this.itemCnt
;return"number"==typeof t?(this.generatedIndexSet.splice(t,0,this.insertItemCnt),this.generatedElementSet.splice(t,0,o),S=t):(this.generatedIndexSet.push(this.insertItemCnt),this.generatedElementSet.push(o)),this.targetNode=null,this.itemCnt++,this.insertItemCnt++,S}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype._insertAfter=function(t){try{for(;t.length>0;){var e=t.shift();e.activate(),e.onComplete()}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.dynamicAppend=function(t,e,i){try{var o=e.toHTML(),s=o.match(/(<)([^ >\/]*)/),a=s&&s[2]?s[2]:null;if(a){var l=document.createElement(a),h=WebSquare.xml.parse(o),d=WebSquare.WebSquareparser.parseAttribute(h.documentElement);try{for(var c in d)"style"==c?l.style.cssText=d[c]:"className"==c?l.className=d[c]:l.setAttribute(c,d[c])}catch(t){r.w.printStackTrace(t,null,this)}if("number"==typeof i&&this.targetNode?(t.insertBefore(l,this.targetNode),e.activate(),e.onComplete()):(t.appendChild(l),e.activate(),e.onComplete()),0==e.childControlList.length)for(var u=0;u<h.documentElement.childNodes.length;u++){var p=h.documentElement.childNodes[u];(g=WebSquare.controlFactory.create(null,null,p))&&e.addControl(g)}for(u=0;u<e.childControlList.length;u++){var g;3==(g=e.childControlList[u]).element.nodeType?l.appendChild(document.createTextNode(g.element.data)):this.dynamicCreateHash[a]?this.dynamicAppend(l,g):(n.s.prototype.writeTo.call(g,l),g.activate(),g.onComplete())}}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype._clone=function(t){try{var e=n.s.prototype._clone.call(this,t);return e._compHash=this._compHash.slice(0),e}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.removeChild=function(t){return null==t&&(t=this.generatedElementSet.length-1),this.remove(t)},l.prototype.remove=function(t){if(null!=t){if("number"==typeof t&&this.generatedElementSet[t]){for(var e=0;e<this.generatedElementSet[t].length;e++){var i=this.generatedElementSet[t][e];i.remove&&i.remove()}var o=this.generatedIndexSet.splice(t,1);return this.generatedElementSet.splice(t,1),this.itemCnt--,o}}else n.s.prototype.remove.call(this)},l.prototype.removeAll=function(){for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove&&this.childControlList[t].remove();WebSquare.removeChildren(this.render),this.generatedIndexSet=[],this.generatedElementSet=[],this.itemCnt=0,this.insertItemCnt=0},l.prototype.getIndexArray=function(){return this.generatedIndexSet.slice(0)},l.prototype.setStyle=function(t,e){try{if(!this.render)return;if(WebSquare.style.setStyle(this.render,t,e),"width"==t||"height"==t)for(var i=this.getChildren(),o=this.getChildrenCount(),s=0;s<o;s++)i[s].render.style[t]=e}catch(t){r.w.printStackTrace(t)}},l.prototype.finalize=function(){try{if(n.s.prototype.finalize.call(this),this._compHash)for(var t=0;t<this._compHash.length;t++)this._compHash[t].remove();this.removeAll()}catch(t){r.w.printStackTrace(t)}},l.prototype._parse=async function(){try{this._compHash=[];for(var t=this.dynamicCreateHash[this.options.tagname],e=this.element.cloneNode(!0).getChildNodes(),i=0;i<e.length;i++){var o=e[i];this.setChildElement(o,"_base_");var s=null;if((3!==o.nodeType||t)&&(s=WebSquare.controlFactory.createByJSON(null,null,o._element,this.scope_obj,this.parentFrame)),s)if(!0===s._wqAsync){var a=this.uuid,n=this._compHash.length;s.then((function(t,e){var i=WebSquare.idCache[a];t.scope_obj=i.scope_obj,i._compHash.splice(n,0,t)}))}else s.scope_obj=this.scope_obj,this._compHash.push(s)}}catch(t){r.w.printStackTrace(t,null,this)}}},8137:(t,e,i)=>{i.r(e),i.d(e,{gridLayout:()=>d});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(7275),d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.gridLayout",pluginName:"gridLayout",gridTemplateColumns:"",gridTemplateRows:"",gridColumnGap:"",gridRowGap:"",gridRow:"",gridColumn:"",defaultClassPostfix:null,parseChild:!0,parseAttributes:!0},
d.prototype.initialize=function(t){try{var e=null;if(this.adaptive=[],this.isIE=null,this.gridLayout={},this.updatedGridLayout={templateColumns:[],templateRows:[],column:[],row:[]},this.layoutStyle=document.getElementById(this.id+"_style"),null==this.layoutStyle){var i=document.createElement("style");i.type="text/css",i.id=this.id+"_style",document.getElementsByTagName("head")[0].appendChild(i),this.layoutStyle=i}this.adaptive=s.v.getChildConfiguration("/WebSquare/mediaInfo",{singleMode:!0}),0===this.adaptive.length&&this.adaptive.push({name:"default"}),n.D.isIEAllVersion()||/Edge/.test(navigator.userAgent)?this.isIE=!0:this.isIE=!1,this.gridLayout={templateColumns:this.options.gridTemplateColumns.split(";"),templateRows:this.options.gridTemplateRows.split(";"),column:this.options.gridColumn.split(";"),row:this.options.gridRow.split(";"),columnGap:this.options.gridColumnGap.split(";"),rowGap:this.options.gridRowGap.split(";")},this.gridLayout.templateColumns[0]=this.gridLayout.templateColumns[0].wq_trim().split(" "),this.gridLayout.templateRows[0]=this.gridLayout.templateRows[0].wq_trim().split(" "),this.gridLayout.column[0]=this.gridLayout.column[0].wq_trim().split(":"),this.gridLayout.row[0]=this.gridLayout.row[0].wq_trim().split(":"),this.updatedGridLayout.column[0]=this.gridLayout.column[0],this.updatedGridLayout.row[0]=this.gridLayout.row[0],e=null;for(var o=1;o<this.adaptive.length;o++)null==this.gridLayout.templateColumns[o]?this.gridLayout.templateColumns[o]=this.gridLayout.templateColumns[0].slice():(e=this.gridLayout.templateColumns[o].replace(/(\s*)/g,""),this.gridLayout.templateColumns[o]=""==e?this.gridLayout.templateColumns[0].slice():this.gridLayout.templateColumns[o].wq_trim().split(" ")),null==this.gridLayout.templateRows[o]?this.gridLayout.templateRows[o]=this.gridLayout.templateRows[0].slice():(e=this.gridLayout.templateRows[o].replace(/(\s*)/g,""),this.gridLayout.templateRows[o]=""==e?this.gridLayout.templateRows[0].slice():this.gridLayout.templateRows[o].wq_trim().split(" ")),null==this.gridLayout.column[o]?this.gridLayout.column[o]=this.gridLayout.column[0].slice():(e=this.gridLayout.column[o].replace(/(\s*)/g,""),this.gridLayout.column[o]=""==e?this.gridLayout.column[0].slice():this.gridLayout.column[o].wq_trim().split(":")),this.updatedGridLayout.column[o]=this.gridLayout.column[o],null==this.gridLayout.row[o]?this.gridLayout.row[o]=this.gridLayout.row[0].slice():(e=this.gridLayout.row[o].replace(/(\s*)/g,""),this.gridLayout.row[o]=""==e?this.gridLayout.row[0].slice():this.gridLayout.row[o].wq_trim().split(":")),this.updatedGridLayout.row[o]=this.gridLayout.row[o],null==this.gridLayout.columnGap[o]?this.gridLayout.columnGap[o]=this.gridLayout.columnGap[0].slice():(e=this.gridLayout.columnGap[o].replace(/(\s*)/g,""),this.gridLayout.columnGap[o]=""==e?this.gridLayout.columnGap[0].slice():this.gridLayout.columnGap[o].wq_trim()),null==this.gridLayout.rowGap[o]?this.gridLayout.rowGap[o]=this.gridLayout.rowGap[0].slice():(e=this.gridLayout.rowGap[o].replace(/(\s*)/g,""),this.gridLayout.rowGap[o]=""==e?this.gridLayout.rowGap[0].slice():this.gridLayout.rowGap[o].wq_trim());this._initializeIE(),this._resizeObj=null,this._bResizeInit=!1,this._resizeInfo={row:{},col:{},orgInfoStr:"",resizeComp:[]}}catch(t){r.w.printStackTrace(t)}},d.prototype._initializeIE=function(t){try{if(!this.isIE)return;for(var e=0;e<this.adaptive.length;e++){for(var i=this.gridLayout.templateColumns[e].slice(),o=this.gridLayout.templateRows[e].slice(),s=2*Math.max(i.length,o.length)-1,a=1;a<s;a++)n.D.isOdd(a)&&(null!=i[a]&&i.splice(a,0,this.gridLayout.columnGap[e]),null!=o[a]&&o.splice(a,0,this.gridLayout.rowGap[e]));for(var l=this.gridLayout.row[e].slice(),h=0;h<l.length;h++){var d=l[h].wq_trim();if(-1==d.indexOf("/")){var c=parseInt(o.length/2)+1,u=Number(d);u>c&&(u=c),l[h]=String(2*u-1)}}for(var p=this.gridLayout.column[e].slice(),g=0;g<p.length;g++){var m=p[g].wq_trim();if(-1==m.indexOf("/")){c=parseInt(i.length/2)+1;var f=Number(m)
;f>c&&(f=c),p[g]=String(2*f-1)}}if(null==t)this.gridLayout.templateColumns[e]=i,this.gridLayout.templateRows[e]=o,this.gridLayout.column[e]=p,this.gridLayout.row[e]=l;else{if(e!=t)continue;this.gridLayout.templateColumns[e]=i,this.gridLayout.templateRows[e]=o,this.gridLayout.column[e]=p,this.gridLayout.row[e]=l}}}catch(t){r.w.printStackTrace(t)}},d.prototype.toHTML=function(){var t=[],e=this.getChildren(),i=e.length,o=""==this.options.style?"":"style='"+this.options.style+"'",s=null==this.options.defaultClassPostfix?"":this.options.defaultClassPostfix;t.push("<div id='"+this.id+"' class='w2gridLayout"+s+" "+this.id+" "+this.options.className+"'"+o+">"),this._createTemplateRules(0),this._createItemRules(0,e),this._createMediaRules();for(var r=0;r<i;r++){if(e[r]._isTag)if(null==e[r].element.getAttribute("class"))e[r].element.setAttribute("class",e[r].id);else{var a=e[r].element.getAttribute("class")+" "+e[r].id;e[r].element.setAttribute("class",a)}else""==e[r].options.className?e[r].options.className=e[r].id:e[r].options.className+=" "+e[r].id;t.push([e[r].toHTML()])}return t.push("</div>"),t.join("")},d.prototype.setAction=function(){},d.prototype._createMediaRules=function(t,e){try{for(var i=null==t?this.adaptive.length:t+1,o=this.getChildren(),s=[],a=null,n=null,l=1;l<i;l++){a=this._createTemplateRules(l),n=this._createItemRules(l,o);var h=this.adaptive[l];h.maxWidth?s[l]="@media all and (max-width: "+h.maxWidth+"px) { ":h.minWidth&&(s[l]="@media all and (min-width: "+h.minWidth+"px) { "),this.isIE,s[l]+=a,s[l]+=n,s[l]+="}",null==e?this.layoutStyle.sheet.insertRule(s[l],this.layoutStyle.sheet.cssRules.length):l==t&&this.layoutStyle.sheet.insertRule(s[l],e)}}catch(t){r.w.printStackTrace(t)}},d.prototype._createTemplateRules=function(t){try{var e=[];if(e[0]="",e[0]+="."+this.id+"{",this.isIE){var i=this._getTemplateIE(t);e[0]+="display: -ms-grid;",e[0]+="-ms-grid-columns:"+i.ieColumns+";",e[0]+="-ms-grid-rows:"+i.ieRows+";"}else e[0]+="display: grid;",e[0]+="grid-template-columns:"+this.gridLayout.templateColumns[t].join(" ")+";",e[0]+="grid-template-rows:"+this.gridLayout.templateRows[t].join(" ")+";",e[0]+="grid-column-gap:"+this.gridLayout.columnGap[t]+";",e[0]+="grid-row-gap:"+this.gridLayout.rowGap[t]+";";if(e[0]+="}",0!=t)return e;this.layoutStyle.sheet.insertRule(e,0)}catch(t){r.w.printStackTrace(t)}},d.prototype._createItemRules=function(t,e,i){try{var o=[],s=e.length;if(this.isIE)var a=this._getItemIE(e,t,"column"),n=this._getItemIE(e,t,"row");else this._getItemNotIE(e,t,"column"),this._getItemNotIE(e,t,"row");for(var l=0;l<s;l++)if(o[l]="",o[l]+="."+e[l].id+"{",this.isIE?(""==a.itemSpanSection[l]?o[l]+="-ms-grid-column:"+a.itemSection[l]+";-ms-grid-column-span: 1;":o[l]+="-ms-grid-column:"+a.itemSection[l]+";-ms-grid-column-span: "+a.itemSpanSection[l]+";",""==n.itemSpanSection[l]?o[l]+="-ms-grid-row:"+n.itemSection[l]+";-ms-grid-row-span: 1;":o[l]+="-ms-grid-row:"+n.itemSection[l]+";-ms-grid-row-span: "+n.itemSpanSection[l]+";"):(o[l]+="grid-column:"+this.gridLayout.column[t][l]+";",o[l]+="grid-row:"+this.gridLayout.row[t][l]+";"),o[l]+="}",0==t){if(null!=i){this.layoutStyle.sheet.insertRule(o[l],i);break}this.layoutStyle.sheet.insertRule(o[l],l+1)}return o.join(" ")}catch(t){r.w.printStackTrace(t)}},d.prototype._getTemplateIE=function(t){try{var e={};return e.ieColumns=this.gridLayout.templateColumns[t].join(" "),e.ieRows=this.gridLayout.templateRows[t].join(" "),e}catch(t){r.w.printStackTrace(t)}},d.prototype._getItemIE=function(t,e,i){try{i="row"==i.toLowerCase()?i:"column";var o=this.gridLayout[i][e],s="row"==i?"templateRows":"templateColumns",a=n.D.parseInt(this.gridLayout[s][e].length/2)+1,l=this.gridLayout[s][e].length,h={},d=null,c=t.length;h.itemSection=[],h.itemSpanSection=[];for(var u=0;u<c;u++)d=null,n.D.isNull(o[u])||NaN==o[u]?(h.itemSection[u]=l,h.itemSpanSection[u]="",o.push(String(a))):-1==o[u].indexOf("/")?(o[u]<=0&&(h.itemSection[u]="1"),h.itemSection[u]=o[u].wq_trim(),
h.itemSpanSection[u]=""):((d=o[u].split("/"))[0]<=0&&(d[0]="1"),h.itemSection[u]=d[0].wq_trim(),h.itemSpanSection[u]=d[1].wq_trim(),1!=h.itemSection[u]&&h.itemSection[u]<h.itemSpanSection[u]?h.itemSpanSection[u]=Number(h.itemSpanSection[u])-Number(h.itemSection[u]):h.itemSection[u]==h.itemSpanSection[u]&&(h.itemSpanSection[u]="1"),h.itemSection[u]>a&&(h.itemSection[u]=a),h.itemSection[u]=2*Number(h.itemSection[u])-1,h.itemSpanSection[u]>l?h.itemSpanSection[u]=l:n.D.isOdd(h.itemSpanSection[u])||(h.itemSpanSection[u]=Number(h.itemSpanSection[u])+1)),h.itemSection[u]=String(h.itemSection[u]),h.itemSpanSection[u]=String(h.itemSpanSection[u]),""==h.itemSpanSection[u]?o.splice(u,1,h.itemSection[u]):o.splice(u,1,h.itemSection[u]+" / "+h.itemSpanSection[u]);return h}catch(t){r.w.printStackTrace(t)}},d.prototype._getItemNotIE=function(t,e,i){try{for(var o="row"==(i="row"==i.toLowerCase()?i:"column")?"templateRows":"templateColumns",s=this.gridLayout[o][e].length,a=this.gridLayout[i][e],l=[],h=t.length,d=0;d<h;d++)n.D.isNull(a[d])||NaN==a[d]?a.push(String(s)):-1==a[d].indexOf("/")?(a[d]<=0?a[d]="1":a[d]>s&&(a[d]=s),a[d]=String(a[d])):((l=a[d].split("/"))[0]<=0?l[0]="1":l[0]>s&&(l[0]=String(s)),l[1]>s+1&&(l[1]=" "+(s+1)),a[d]=l.join("/"),l=[])}catch(t){r.w.printStackTrace(t)}},d.prototype.setActiveLayout=function(t,e,i){try{var o=this.getScreenIdx(),s=!1,a=this.getChildren(),n=a.length;if(n>t&&(0!=e&&(this.gridLayout.column[o].splice(t,1,String(e)),s=!0),0!=i&&(this.gridLayout.row[o].splice(t,1,String(i)),s=!0)),s)if(0==o)this.layoutStyle.sheet.deleteRule(t+1),this._createItemRules(o,[a[t]],t+1);else for(var l=this.layoutStyle.sheet.cssRules.length,h=0,d=n+1;d<l;d++)if(4==this.layoutStyle.sheet.cssRules[d].type&&++h==o){this.layoutStyle.sheet.deleteRule(d),this._createMediaRules(o,d);break}}catch(t){r.w.printStackTrace(t)}},d.prototype.setLayout=function(t,e,i){try{this.setActiveLayout(t,e,i);for(var o={},s=[],a=[],n=0;n<this.adaptive.length;n++)s[n]=this.gridLayout.column[n][t],a[n]=this.gridLayout.row[n][t];return o.column=s.join(":"),o.row=a.join(":"),"columnInfo: "+o.column+", rowInfo: "+o.row}catch(t){r.w.printStackTrace(t)}},d.prototype.getScreenIdx=function(){try{this.adaptive;for(var t,e,i=Number(top.document.documentElement.clientWidth||top.document.body.clientWidth),o=0,s=0;s<this.adaptive.length;s++){var a=parseInt(this.adaptive[s].minWidth,10),n=parseInt(this.adaptive[s].maxWidth,10);n>=0&&i<=n?(null==t||t>n)&&(o=s,t=n):a>=0&&i>=a&&(null==e||e<a)&&(o=s,e=a)}return o}catch(t){r.w.printStackTrace(t)}},d.prototype.getLayout=function(t){try{for(var e={},i=[],o=[],s=0;s<this.adaptive.length;s++)i[s]=this.gridLayout.column[s][t],o[s]=this.gridLayout.row[s][t];return e.column=i.join(":"),e.row=o.join(":"),"columnInfo: "+e.column+", rowInfo: "+e.row}catch(t){r.w.printStackTrace(t)}},d.prototype.setGap=function(t,e){try{var i=this.getScreenIdx(),o="columnGap"==(t="col"==t?"columnGap":"rowGap")?"templateColumns":"templateRows";if(this.isIE){var s=this.gridLayout[t][i],a=this.gridLayout[o][i].map((function(t){return t==s&&(t=e),t}));this.gridLayout[o][i]=a}this.gridLayout[t][i]=e,this._changeRules(i)}catch(t){r.w.printStackTrace(t)}},d.prototype.getTemplate=function(){try{for(var t={},e=[],i=[],o=0;o<this.adaptive.length;o++)e[o]=this.gridLayout.templateColumns[o].join(" "),i[o]=this.gridLayout.templateRows[o].join(" ");return t.templateColumns=e.join(":"),t.templateRows=i.join(":"),"templateColumnsInfo: "+t.templateColumns+", templateRowsInfo: "+t.templateRows}catch(t){r.w.printStackTrace(t)}},d.prototype._changeRules=function(t,e){try{var i=this.getChildren();if(this.isIE&&this._initializeIE(t),0==t)if(e){for(var o=this.layoutStyle.sheet.rules.length,s=o-1;s>=0;s--)4!=this.layoutStyle.sheet.rules[s].type&&this.layoutStyle.sheet.deleteRule(s);this._createTemplateRules(0),this._createItemRules(0,i)}else this.layoutStyle.sheet.deleteRule(t),this._createTemplateRules(t,1);else{var a=this.layoutStyle.sheet.cssRules.length,n=0
;for(s=i.length+1;s<a;s++)if(4==this.layoutStyle.sheet.cssRules[s].type&&++n==t){this.layoutStyle.sheet.deleteRule(s),this._createMediaRules(t,s);break}}}catch(t){r.w.printStackTrace(t)}},d.prototype.setTemplate=function(t,e,i){try{if(Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t}),e="col"==e?"templateColumns":"templateRows",-1!=Math.sign(t)){var o=this.getScreenIdx(),s=this.gridLayout[e][o].length;this.isIE?s>2*t&&(t*=2,this.gridLayout[e][o][t]=i,this._changeRules(o)):s>t&&(this.gridLayout[e][o][t]=i,this._changeRules(o))}}catch(t){r.w.printStackTrace(t)}},d.prototype.setAllTemplate=function(t,e){try{var i=this.getScreenIdx(),o=e.split(" ");if(t="col"==t?"templateColumns":"templateRows",this.isIE)for(var s=2*o.length-1,a="templateColumn"==t?"columnGap":"rowGap",l=1;l<s;l++)n.D.isOdd(l)&&o.splice(l,0,this.gridLayout[a][i]);this.gridLayout[t][i]=o,this._changeRules(i)}catch(t){r.w.printStackTrace(t)}},d.prototype._copyLayout=function(){try{if(!this.isIE)return t={templateColumns:this.gridLayout.templateColumns,templateRows:this.gridLayout.templateRows,row:this.gridLayout.row,column:this.gridLayout.column};for(var t={templateColumns:[],templateRows:[],row:[],column:[]},e=this.getChildren(),i=0;i<this.adaptive.length;i++){for(var o=this.gridLayout.templateColumns[i].slice(),s=this.gridLayout.templateRows[i].slice(),a=Math.max(o.length,s.length);a>0;a--)n.D.isOdd(a)&&(null!=o[a]&&o.splice(a,1),null!=s[a]&&s.splice(a,1));t.templateColumns.push(o),t.templateRows.push(s),this.updatedGridLayout.templateColumns.push(o),this.updatedGridLayout.templateRows.push(s);for(var l="column",h="templateColumns",d=0;d<2;d++){var c=this.updatedGridLayout[h][i].length,u=this.updatedGridLayout[l][i],p=[],g=e.length;for(a=0;a<g;a++)n.D.isNull(u[a])||NaN==u[a]?u.push(String(c)):-1==u[a].indexOf("/")?(u[a]<=0?u[a]="1":u[a]>c&&(u[a]=c),u[a]=String(u[a])):((p=u[a].split("/"))[0]<=0?p[0]="1":p[0]>c&&(p[0]=String(c)),p[1]>c+1&&(p[1]=" "+(c+1)),u[a]=p.join("/"),p=[]);t[l].push(u),l="row",h="templateRows"}}return t}catch(t){r.w.printStackTrace(t)}},d.prototype.getLayoutInfo=function(){try{for(var t=this.getChildren(),e=t.length,i=this.getScreenIdx(),o=this._copyLayout(),s={layout:"grid",currentScreen:this.adaptive[i].name,layoutInfo:[]},a=0;a<this.adaptive.length;a++){var n={name:this.adaptive[a].name,minWidth:this.adaptive[a].minWidth,maxWidth:this.adaptive[a].maxWidth,templateColumns:o.templateColumns[a],templateRows:o.templateRows[a],itemInfo:[]};s.layoutInfo.push(n);for(var l=0;l<e;l++){var h={id:t[l].id,rowStart:"",rowEnd:"",colStart:"",colEnd:""},d=null;-1==o.row[a][l].indexOf("/")?h.rowStart=o.row[a][l]:(d=o.row[a][l].split("/"),h.rowStart=d[0].wq_trim(),h.rowEnd=d[1].wq_trim()),d=null,-1==o.column[a][l].indexOf("/")?h.colStart=o.column[a][l]:(d=o.column[a][l].split("/"),h.colStart=d[0].wq_trim(),h.colEnd=d[1].wq_trim()),s.layoutInfo[a].itemInfo.push(h)}}return s}catch(t){r.w.printStackTrace(t)}},d.prototype._checkId=function(t){try{var e=t.length,i=this.getChildren(),o={},s=[];for(var a in i)o[i[a].id]=i[a];for(a=0;a<e;a++)if(null!=t[a].itemInfo){var n={},l=t[a].itemInfo;for(var h in l){if(null==l[h].id)return!1;null!=o[l[h].id]?n[l[h].id]=l[h]:console.log("id["+l[h].id+"]와 일치하는 항목이 없습니다.")}s.push(n)}else t[a].itemInfo=[],s.push("dumy");return s}catch(t){r.w.printStackTrace(t)}},d.prototype._setEmptyScreenInfo=function(t){try{var e={};for(var i in t.layoutInfo){e[t.layoutInfo[i].name]=t.layoutInfo[i].name}for(i=0;i<this.adaptive.length;i++)null==e[this.adaptive[i].name]&&t.layoutInfo.splice(i,0,new Object({name:void 0}));return t}catch(t){r.w.printStackTrace(t)}},d.prototype.setLayoutInfo=function(t){try{t=this._setEmptyScreenInfo(t);var e=this._checkId(t.layoutInfo);if(0==e)return;for(var i=0;i<this.adaptive.length;i++){var o=t.layoutInfo[i];if(null!=o.name){this.isIE&&(this.gridLayout.templateColumns[i]=this.updatedGridLayout.templateColumns[i],this.gridLayout.templateRows[i]=this.updatedGridLayout.templateRows[i]);var s=o.itemInfo
;if(0==s.length)continue;for(var a in s){var n=s[a].id;e[i][n]&&(""==s[a].rowEnd?this.gridLayout.row[i].splice(a,1,s[a].rowStart):this.gridLayout.row[i].splice(a,1,s[a].rowStart+" / "+s[a].rowEnd),this.updatedGridLayout.row[i]=this.gridLayout.row[i],""==s[a].colEnd?this.gridLayout.column[i].splice(a,1,s[a].colStart):this.gridLayout.column[i].splice(a,1,s[a].colStart+" / "+s[a].colEnd),this.updatedGridLayout.column[i]=this.gridLayout.column[i])}o.templateColumns&&o.templateColumns.constructor,o.templateRows&&o.templateRows.constructor,this._changeRules(i,!0)}}}catch(t){r.w.printStackTrace(t)}},d.prototype._updateLayoutInfo=function(t){},d.prototype.addResizeBar=function(t,e,i){try{if(isNaN(t)||t<=0)return void h.k.printLog("gridLayout.addResizeBar error : invalid index.");"row"!==e&&(e="col");var s=this.id+"_resizeBar_"+e+"_"+t,l=this.scope_id+"_"+s;if(null!=n.D.getComponentById(s))return;void 0!==i&&null!=i||(i={});var d=this.getLayoutInfo(),c=o.x.extend({},d),u=c.layoutInfo,p=-1,g=this.getScreenIdx(),m=u[g],f=!1;if(this._resizeInfo.orgInfoStr||(this._resizeInfo.orgInfoStr=JSON.stringify(m)),"row"===e){if(t>=m.templateRows.length)return void h.k.printLog("gridLayout.addResizeBar error : invalid index.");var b=t;for(var y in this._resizeInfo.row)this._resizeInfo.row[y]>b?this._resizeInfo.row[y]++:t++;m.templateRows.splice(t,0,i.size||"5px"),this._resizeInfo.row[s]=t;for(var v=0;v<m.itemInfo.length;v++){var w=m.itemInfo[v],S=Number(w.rowStart),C=Number(w.rowEnd||w.rowStart);if(S>t){if(!1===f)f=!0,(I={}).id=l,I.rowStart=w.rowStart,I.rowEnd="",I.colStart=i.start||"1",I.colEnd=i.end||String(m.templateColumns.length+1),m.itemInfo.splice(v,0,I),p=v,v++;w.rowStart=String(S+1),w.rowEnd=String(C+1)}else C>t+1&&(w.rowEnd=String(C+1))}}else{if(t>=m.templateColumns.length)return void h.k.printLog("gridLayout.addResizeBar error : invalid index.");b=t;for(var y in this._resizeInfo.col)this._resizeInfo.col[y]>b?this._resizeInfo.col[y]++:t++;m.templateColumns.splice(t,0,i.size||"5px"),this._resizeInfo.col[s]=t;for(v=0;v<m.itemInfo.length;v++){w=m.itemInfo[v];var _=Number(w.colStart),x=Number(w.colEnd||w.colStart);if(_>t){var I;if(!1===f)f=!0,(I={}).id=l,I.colStart=w.colStart,I.colEnd="",I.rowStart=i.start||"1",I.rowEnd=i.end||String(m.templateRows.length+1),m.itemInfo.splice(v,0,I),p=v,v++;w.colStart=String(_+1),w.colEnd=String(x+1)}else x>t+1&&(w.colEnd=String(x+1))}}var T="w2gridLayout_resizeBarH";"row"===e&&(T="w2gridLayout_resizeBarV");var k=WebSquare.controlFactory.create(s,{className:"w2gridLayout_resizeBar "+T+" "+l,pluginName:"group",parseChild:!1},null,this.scope_obj,this.parentFrame,!0);k.bind("onmousedown",function(t,e,i,o,s,r,n){return function(l){var h=WebSquare.idCache[t],d=WebSquare.idCache[r],c=WebSquare.idCache[n];"row"!==i&&(i="col");var u=h._resizeInfo[i][e];h._resizeObj={index:u-1,direction:i,screenIdx:o,cssStr:s,startX:a.B.getMouseX(l),startY:a.B.getMouseY(l),heightFront:d.render.offsetHeight,heightBack:c.render.offsetHeight,widthFront:d.render.offsetWidth,widthBack:c.render.offsetWidth},h.addClass(s)}}(this.uuid,s,e,g,T,this.childControlList[p-1].uuid,this.childControlList[p].uuid)),k.bind("onmouseup",(D=this.uuid,L=T,function(){var t=WebSquare.idCache[D];t._resizeObj=null,t.removeClass(L)})),k.writeTo(this,null,this.parentFrame,{index:p}),k.activate(),this.addControl(k,void 0,void 0,{index:p}),this._resizeInfo.resizeComp.push(k.uuid),this.setLayoutInfo(c),!1===this._bResizeInit&&(this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this._bResizeInit=!0)}catch(t){r.w.printStackTrace(t)}var D,L},d.prototype.clearResizeBar=function(){try{if(!this._resizeInfo.orgInfoStr&&0===this._resizeInfo.resizeComp.length)return;var t=this.getLayoutInfo(),e=o.x.extend({},t),i=e.layoutInfo,s=this.getScreenIdx()
;this._resizeInfo.orgInfoStr&&(i[s]=JSON.parse(this._resizeInfo.orgInfoStr),this.gridLayout.templateColumns[s]=i[s].templateColumns,this.gridLayout.templateRows[s]=i[s].templateRows);for(var a=0;a<this._resizeInfo.resizeComp.length;a++){var n=WebSquare.idCache[this._resizeInfo.resizeComp[a]];n&&n.remove()}this._resizeInfo={row:{},col:{},orgInfoStr:"",resizeComp:[]},this.setLayoutInfo(e)}catch(t){r.w.printStackTrace(t)}},d.prototype.handleClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next(););e=null},d.prototype.handleMouseoverEvent=function(t){a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2gridLayout")&&this.addClass(e.getElement(),"w2gridLayout_over");e=null},d.prototype.handleMouseoutEvent=function(t){a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2gridLayout")&&this.removeClass(e.getElement(),"w2gridLayout_over");e=null},d.prototype.handleMousemoveEvent=function(t){try{if(this._resizeObj){var e=this._resizeObj.screenIdx,i=this._resizeObj.index,o=this._resizeObj.direction,s=this._resizeObj.startX,n=this._resizeObj.startY,l=this._resizeObj.heightFront,h=this._resizeObj.heightBack,d=this._resizeObj.widthFront,c=this._resizeObj.widthBack,u=this.getLayoutInfo(),p=u.layoutInfo[e];if("row"===o){var g=h-(m=a.B.getMouseY(t)-n);l+m>5&&g>5&&(p.templateRows[i]=l+m+"px",p.templateRows[i+2]=h-m+"px")}else{var m;g=h-(m=a.B.getMouseX(t)-s);l+m>5&&g>5&&(p.templateColumns[i]=d+m+"px",p.templateColumns[i+2]=c-m+"px")}this.setLayoutInfo(u)}}catch(t){r.w.printStackTrace(t)}},d.prototype.handleMouseupEvent=function(t){try{this._resizeObj&&this.removeClass(this._resizeObj.cssStr),this._resizeObj=null}catch(t){r.w.printStackTrace(t)}},d.prototype.finalize=function(){try{null!=this.layoutStyle&&null!=this.layoutStyle.parentNode&&this.layoutStyle.parentNode.removeChild(this.layoutStyle)}catch(t){r.w.printStackTrace(t)}}},4047:(t,e,i)=>{i.r(e),i.d(e,{cellInfo:()=>A,drilldown:()=>k,gridView:()=>M,headerInfo:()=>w,linkedMappingController:()=>L,mappingController:()=>D.v});var o=i(2981),s=i(1656),r=i(2085),a=i(3082),n=i(6615),l=function(){};l.prototype.notifySettedGridData=function(t,e,i,o,s,a){try{if(this.options.scrollFix&&this.settedData){for(var n=this.getTopRowIndex(),l=0;l<=this.lastIndex;l++){var h=n+l;this.drawRowData(h-this.rowIndex,h)}return}this.dataList.clearFilter(!0),this._oldFilterArrStr||this.notifyClearFilter(!0),this.settedData=!1;i=i;(e=e||!1)||(this.rowStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowReadOnlyArr=[],this.cellReadOnlyArr=[],this.rowDisabledArr=[],this.cellDisabledArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1,this.extraData={grid:{},row:[],col:[],cell:[]},i=0,this._removeAllTDCellClass()),this.hasFooter&&(this.footerTempSum=[]),this.beforeDataLength=-1,1==this.isDrillDown&&(this.setCellInfo(),1==this.isPaste?this.initPasteDrilldown():this.initDrilldown()),this.initStyleArr(i),0==this.loadFlag&&e?this.loadFlag=!1:this.loadFlag=!0,this.lastTopRowIndex=null;var d={gridData:!0!==a};e&&(d.append=!0,d.keepTop=!0),this.notifyDataChanged(d),this.loadFlag=!0,0==this.getTotalRow()&&this.removeFocusedCell(),this.options.focusOnSetData&&this._setFocusedCell(0,0),this.setScrollYHeight(),this.settedData=!0,this.options.fixedRightColumn>0&&this._handleScrollX(),(!e&&this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0),(!0===s||this.options.instanceBindBySetData)&&this.options.ref&&this._refreshInstance(t,e)}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeSettedCellData=function(){try{if(null!=this.editedCell)return void this.editedCell.handleEndEdit()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifySettedCellData=function(t,e,i,o){try{this.hasFooter&&(this.footerTempSum=[])
;var s=this.getColumnIndex(e);t=this._getGroupbyGroupedRowIndex(t);this.notifyCellChanged(t,s,o),null==s&&null!=this._dataList.getColumnIndex(e)&&this._refreshExpression(t,e),this.isDrillDown&&(null==s&&this._dataList.options.depthColumn&&(s=this._dataList.getColumnIndex(e)),this.drilldown.options.depthColumn==s&&(this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight()));var n=a.D.getDataPrefix("colMerged"),l=this.getCellInfo(e),h=t,d=this.getTotalRow();if(l&&l.options.colMerge&&l.options.colMergeEdit&&!this.groupbyStatus.grouped){var c=this.data_td_list[(h-this.rowIndex)*this.oneRowDataLength+s];if(c){var u,p=c.getAttribute(n);if("1"==p&&i!=this.dataList.getCellData(h-1,s))if(c.setAttribute(n,"0"),this.drawCellData(h-this.rowIndex,h,s),h<d-1)(u=this.data_td_list[(h-this.rowIndex+1)*this.oneRowDataLength+s])&&(i==this.dataList.getCellData(h+1,s)?u.setAttribute(n,"1"):u.setAttribute(n,"0"),this.drawCellData(h-this.rowIndex+1,h+1,s));if("0"==p)if(h>=1&&i==this.dataList.getCellData(h-1,s)&&(c.setAttribute(n,"1"),this.drawCellData(h-this.rowIndex,h,s)),h<d-1)(u=this.data_td_list[(h-this.rowIndex+1)*this.oneRowDataLength+s])&&(i==this.dataList.getCellData(h+1,s)?u.setAttribute(n,"1"):u.setAttribute(n,"0"),this.drawCellData(h-this.rowIndex+1,h+1,s))}}this.moveDirection=null}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeInsertedRow=function(t){try{!this.isDrillDown&&t>this.getDataLength()&&(t=this.getDataLength());var e=!1,i=[];if(this.isDrillDown){for(var o=this.drilldown.getParentRowIndex(t);o>-1;)this.drilldown.isOpen(this.drilldown.getDisplayRowIndex(o))||(e=!0,i.push(o)),o=this.drilldown.getParentRowIndex(o);if(e)for(var s=i.length-1;s>=0;s--)if(!this.drilldown.isOpen(i[s])){var a=this.drilldown.getDisplayRowIndex(i[s]);this._toggle(a)}}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyAfterInsertedRow=function(t,e){try{this.settedData=!1;for(var i=this.dataList.getRealRowIndex(t),o=this.getTotalCol(),s=[i*o,0],a=0;a<o;a++)s.push(null);if(this.resetExpressionFunc(),[].splice.apply(this.cellStyleArr,s),[].splice.apply(this.cellClassArr,s),[].splice.apply(this.cellReadOnlyArr,s),[].splice.apply(this.cellDisabledArr,s),this.extraData.row.splice(t,0,null),this.extraData.cell.splice(t,0,null),1==this.options.setCellInputTypeCustom&&!this.validTypeGetter){var n=this.getColumnCount();for(a=0;a<n;a++){var l=this.getCellInfo(a);"custom"==l.options.inputType&&(l.cellManagerHashByRowIndex.splice(i,0,null),l.cellManagerIDByRowIndex.splice(i,0,null))}}if(this.isDrillDown&&this.drilldown.statusArr.splice(i,0,!0),this.hasFooter&&(this.footerTempSum=[]),this._mergeNotifyRowChanged("insertRow",t),!0!==e&&(this.notifyRowInserted(t),this.notifyStatusChanged({rowIndex:[t]})),this.options.ref&&1!=this.insertRowByInstance&&!0!==e&&this.repeatNodeChildTagName&&this.repeatNodeChildTagName.length>0){var h;h=1==this.repeatNodeTagNameFilter&&1==this.repeatNodeTagName.length?this.filteredRepeatNodeTagName[0]:this.repeatNodeTagName[0];var d,c=WebSquare.xml.parse("<"+h+"></"+h+">").documentElement,u=c,p=h;this.repeatNodeTagName.length>1&&(p=this.repeatNodeTagName.slice(1,this.repeatNodeTagName.length).join("/"));for(a=1;a<this.repeatNodeTagName.length;a++)u=WebSquare.xml.createNode(u,this.repeatNodeTagName[a],!1);d=this.repeatNodeTagName.length>1?WebSquare.xml.findNode(c,p):c;for(a=0;a<this.repeatNodeChildTagName.length;a++)WebSquare.xml.createNode(d,this.repeatNodeChildTagName[a],!1);t>=this.maxRowLength?WebSquare.ModelUtil.setInstanceNode(c,this.options.ref,null,"append",!1,this.scope_id):WebSquare.ModelUtil.setInstanceNode(c,this.options.ref+"/"+h+"["+(t+1)+"]",null,"insertBeforeSibling",!1,this.scope_id)}return this.settedData=!0,this.loadFlag=null==this.loadFlag||this.loadFlag,this._refreshColumnClass(),t}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeRemovedRow=function(t){try{if(this.options.ref&&1!=this.removeRowByInstance){
var e=this.getRealRowIndex(t)+1;WebSquare.ModelUtil.removeInstanceNode(this.options.ref+"/"+this.repeatNodeTagName[0]+"["+e+"]",!1,this.scope_id)}if(this.isDrillDown&&this._dataList.options.depthColumn){for(var i=!1,o=[],s=this.drilldown.getParentRowIndex(t);s>-1;)this.drilldown.isOpen(this.drilldown.getDisplayRowIndex(s))||(i=!0,o.push(s)),s=this.drilldown.getParentRowIndex(s);if(i)for(var a=o.length-1;a>=0;a--)if(!this.drilldown.isOpen(o[a])){var n=this.drilldown.getDisplayRowIndex(o[a]);this._toggle(n)}t=this.drilldown.getDisplayRowIndex(t)}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeKeepFilter=function(){try{var t=this._dataList.getFilterList();if(t.length<=0||isNaN(t.length))return;this._oldFilterArrStr=JSON.stringify(t,(function(t,e){return"function"==typeof e||e&&"object"==typeof e&&e.constructor===RegExp?e.toString():e})),this.customFilterStatusObj&&(this._oldStatusObj=JSON.stringify(this.customFilterStatusObj)),this.customFilterList&&this.customFilterList.customFilterListFilterInfo?this._oldFilterInfo=JSON.stringify(this.customFilterList.customFilterListFilterInfo,(function(t,e){return"function"==typeof e||"object"==typeof e&&e.constructor===RegExp?e.toString():e})):this.groupbyStatus.grouped&&this.groupbyStatus.filter&&(this._oldFilterInfo=JSON.stringify(this.groupbyStatus.filter,(function(t,e){return"function"==typeof e||"object"==typeof e&&e.constructor===RegExp?e.toString():e})))}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyAfterKeepFilter=function(){try{if(!this._oldFilterArrStr)return;this._refreshCustomFilterHistory(this._oldFilterArrStr,this._oldFilterInfo,this._oldStatusObj),this._oldFilterArrStr=null,this._oldFilterInfo=null,this._oldStatusObj=null}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyAfterRemovedRow=function(t,e,i,o){try{this.removed=!0,this.isDrillDown&&this.drilldown.statusArr.splice(i,1);!this.isDrillDown||this.options.drilldownRealRowIndexAll;this.cellStyleArr.splice(this.oneRowDataLength*i,this.oneRowDataLength),this.cellClassArr.splice(this.oneRowDataLength*i,this.oneRowDataLength),this.cellReadOnlyArr.splice(this.oneRowDataLength*i,this.oneRowDataLength),this.cellDisabledArr.splice(this.oneRowDataLength*i,this.oneRowDataLength);for(var s=this.getColumnCount(),n=0;n<s;n++){var l=this.getCellInfo(n);if("custom"==l.options.inputType&&1==this.options.setCellInputTypeCustom&&!this.validTypeGetter){if(this.options.senseReader||l.options.embeddedInput){var h=l.cellManagerHashByRowIndex[i];if(h&&h.options.embeddedInput){var d=l.cellManagerIDByRowIndex[i],c=this.id+"_"+d,u=this.dom[c],p=null;null!=u&&(p=WebSquare.idCache[u.uuid]),p&&"function"==typeof p.remove&&p.remove(),delete this.dom[c]}}l.cellManagerHashByRowIndex.splice(i,1),l.cellManagerIDByRowIndex.splice(i,1)}}if(this.itemValueObj)for(var g in this.itemValueObj){var m=o.split(",")[this._dataList.bodyIdColIndexMap[g]];for(var f in this.itemValueObj[g])-1!=f.indexOf("auto")&&this.itemValueObj[g][f]===m&&(this.itemValueObj[g][f]="")}if(!0!==e){var b=this.checkScrollEnd,y=this.scrollEvent;if(this.checkScrollEnd=!1,this.scrollEvent=!1,this._getFocusedRowIndex()==this.getDataLength()){var v=this._getFocusedRowIndex(),w=this.getFocusedColumnIndex();this.removeRowFocus(this.getDataLength()),this._setFocusedCell(v-1,w)}this.resetExpressionFunc(),this.hasFooter&&(this.footerTempSum=[]),this._mergeNotifyRowChanged("removeRow",t),this.notifyRowChanged(t),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.notifyStatusChanged({rowindex:[t]}),a.D.setTimeout((function(t,e){this.checkScrollEnd=t,this.scrollEvent=e}),{key:this.id+"_notifyAfterRemovedRow",caller:this,delay:150,args:[b,y]})}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyRemovedRows=function(t,e){try{if(!0!==e){var i=this.checkScrollEnd,o=this.scrollEvent;this.checkScrollEnd=!1,this.scrollEvent=!1,this.resetExpressionFunc()
;for(var s=t.split(","),n=0;n<s.length;n++)this._mergeNotifyRowChanged("removeRow",s[n]);this.notifyRowChanged(),a.D.setTimeout((function(t,e){this.checkScrollEnd=t,this.scrollEvent=e}),{key:this.id+"_notifyAfterRemovedRow",caller:this,delay:150,args:[i,o]})}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyRemovedAll=function(t){try{this.removed=!0;var e=this.hiddenRowObj.extraRow;this.hiddenRowObj={length:0,extraRow:e,row:{},init:!1},this.loadFlag=!0,this.rowStyleArr=[],this.rowReadOnlyArr=[],this.rowDisabledArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this.cellReadOnlyArr=[],this.cellDisabledArr=[],this.extraData={grid:{},row:[],col:[],cell:[]},this._removeAllTDCellClass(),this.resetExpressionFunc();for(var i=this.getTotalCol(),o=0;o<i;o++){var s=this.getCellInfo(o);if(s&&s.options&&"expression"==s.options.inputType)for(var a=this.drawedRowLength,n=0;n<a;n++)s.options.expressionFunc&&s.options.expressionFunc[n]&&(s.options.expressionFunc[n]={});else if("custom"==s.options.inputType)if(1!=this.options.setCellInputTypeCustom||this.validTypeGetter)s.options.typeGetter&&(s.cellManagerHashByID={},s.cellManagerHashByRowIndex={},s.cellManagerIDByRowIndex={});else{if(this.options.senseReader||s.options.embeddedInput)for(var l=0;l<s.cellManagerIDByRowIndex.length;l++){var h=s.cellManagerHashByRowIndex[l];if(h&&h.options.embeddedInput){var d=s.cellManagerIDByRowIndex[l],c=this.id+"_"+d,u=this.dom[c],p=null;null!=u&&(p=WebSquare.idCache[u.uuid]),p&&"function"==typeof p.remove&&p.remove(),delete this.dom[c],s.cellManagerIDByRowIndex[l]=null,s.cellManagerHashByRowIndex[l]=null}}s.cellManagerHashByRowIndex=[],s.cellManagerIDByRowIndex=[]}}this.removeFocusedCell();for(o=0;o<this.dataRowList.length;o++){var g=this.dataRowList[o];g.style.display="none",this.__addClass(g,"w2grid_hidedRow"),this.__hasClass(g,"w2grid_lastRow")&&this.__removeClass(g,"w2grid_lastRow")}this.lastDisplayedRow=-1,this.subtotalHidden(),this.rowIndex=-1,this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1,this.maxRowLength=0,this.displayNoResultMessage(),this.drawFooter();var m={sortIcon:this.options.hideSortIconOnNoData};this.drawHeader(void 0,m),this._setCheckboxHead(),0==this.getDataLength()&&(this.removeFocusedCell(),"all"===this.options.visibleRowNum&&this.setSize(null,this.defaultDataLayerHeight)),this.setScrollYHeight(),this.options.ref&&1!=this.removeRowByInstance&&WebSquare.ModelUtil.removeInstanceNodes({xpath:this.options.ref+"/"+this.repeatNodeTagName[0],gridNoRefresh:!0,scopeId:this.scope_id}),this.options.groupbyFilterBox&&!1!==t&&this.clearFilterHistory(),1==this.isDrillDown&&this.initDrilldown(),this.itemValueObj={}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyRemovedRange=function(t){try{this.removed=!0,this.notifyRowChanged(t)}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyCreatedRowStatus=function(t){try{this.rowStyleArr=this.rowStyleArr.slice(0,t).concat([null]).concat(this.rowStyleArr.slice(t)),this.rowReadOnlyArr=this.rowReadOnlyArr.slice(0,t).concat([null]).concat(this.rowReadOnlyArr.slice(t)),this.rowDisabledArr=this.rowDisabledArr.slice(0,t).concat([null]).concat(this.rowDisabledArr.slice(t)),this.rowStyleFixedArr=this.rowStyleFixedArr.slice(0,t).concat([null]).concat(this.rowStyleFixedArr.slice(t)),this.rowStyleDataArr=this.rowStyleDataArr.slice(0,t).concat([null]).concat(this.rowStyleDataArr.slice(t))}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyRemovedRowStatus=function(t){try{this.rowStyleArr.splice(t,1),this.rowReadOnlyArr.splice(t,1),this.rowDisabledArr.splice(t,1),this.rowStyleFixedArr.splice(t,1),this.rowStyleDataArr.splice(t,1)}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyDeleteRow=function(t){try{this._drawRowStatus(t-this.rowIndex,t);for(var e=0;e<this.oneRowDataLength;e++)this._drawCellStatus(t-this.rowIndex,t,e);this.displayNoResultMessage(),
this.hasFooter&&this.options.excludeDeletedRows&&this.drawFooter(),this.hasSubtotal&&this.options.excludeDeletedRows&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex));for(var i=0;i<this.getColCnt();i++){var o=this.getColumnID(i),s=this.expressionAssArr[o];if(null!=s)for(e=0;e<s.length;e++){var a=this.getColumnIndex(s[e]);this.drawCellData(t-this.rowIndex,t,a)}}}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyUndeleteRow=function(t){try{this._drawRowStatus(t-this.rowIndex,t);for(var e=0;e<this.oneRowDataLength;e++)this._drawCellStatus(t-this.rowIndex,t,e);this.displayNoResultMessage(),this.hasFooter&&this.options.excludeDeletedRows&&this.drawFooter(),this.hasSubtotal&&this.options.excludeDeletedRows&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex));for(var i=0;i<this.getColCnt();i++){var o=this.getColumnID(i),s=this.expressionAssArr[o];if(null!=s)for(e=0;e<s.length;e++){var a=this.getColumnIndex(s[e]);this.drawCellData(t-this.rowIndex,t,a)}}}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyReformed=function(){try{if(this.options.rowStatusVisible)for(var t=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,e=0;e<=t;e++)this._drawRowStatus(e,this.rowIndex+e);if(this.options.cellStatusVisible)for(t=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,e=0;e<=t;e++)for(var i=0;i<this.oneRowDataLength;i++)this._drawCellStatus(e,this.rowIndex+e,i)}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyModifyAllStatus=function(t){try{for(var e=0;e<this.getDataLength();e++)this._drawRowStatus(e-this.rowIndex,e);this.displayNoResultMessage(),this.notifyStatusChanged({rowIndex:"all"})}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyModifyRangeStatus=function(t,e,i){try{var o=this.getDataLength();if(0<=t&&e<=o)for(var s=t;s<=e;s++)this._drawRowStatus(s-this.rowIndex,s);this.displayNoResultMessage(),this.notifyStatusChanged({startIndex:t,endIndex:e})}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyModifyRowStatus=function(t,e){try{t>-1&&t<this.getDataLength()&&(this._drawRowStatus(t-this.rowIndex,t),this.displayNoResultMessage(),this.notifyStatusChanged({rowIndex:[t]}))}catch(t){r.w.printStackTrace(t)}},l.prototype.notifyModifyMatchedStatus=function(t,e,i){try{for(var o=[],s=this.getDataLength(),a=0;a<s;a++){var n=this.getColumnID(t),l=this.dataList.getRealRowIndex(a);if(this.dataList._getCellData(l,n)+""==e+"")i!=this.dataList._setRowStatus(l,i)&&o.push(a),this._drawRowStatus(a-this.rowIndex,a),this.displayNoResultMessage()}this.notifyStatusChanged({rowIndex:o})}catch(t){r.w.printStackTrace(t)}},l.prototype.notifySetColumnDefaultValue=function(t,e){try{this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifySettedData=function(t){try{this.groupbyStatus.grouped&&this.clearGroupby(),this.loadCheck=[],t||this.options.focusOnSetData||this.removeFocusedCell()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifySetRowXML=function(t,e){e?this.notifyRowChanged(t):this.notifyRowInserted(t)},l.prototype.notifyRowMoveUp=function(t){try{var e=this.extraData.row[t-1];this.extraData.row[t-1]=this.extraData.row[t],this.extraData.row[t]=e,e=this.extraData.cell[t-1],this.extraData.cell[t-1]=this.extraData.cell[t],this.extraData.cell[t]=e,this._getFocusedRowIndex()==t&&this._setFocusedCell(t-1,this.getFocusedColumnIndex()),this.notifyRowChanged(t-1)}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyRowMoveDown=function(t){try{var e=this.extraData.row[t+1];this.extraData.row[t+1]=this.extraData.row[t],this.extraData.row[t]=e,e=this.extraData.cell[t+1],this.extraData.cell[t+1]=this.extraData.cell[t],this.extraData.cell[t]=e,this._getFocusedRowIndex()==t&&this._setFocusedCell(t+1,this.getFocusedColumnIndex()),this.notifyRowChanged(t)}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyRowModified=function(t){try{this.changeCount++,this.drawRowData(t-this.rowIndex,t),
this.hasSubtotal&&this.refreshSubtotalRow(t),this.drawFooter(),this.drawHeader()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyStatusChanged=function(t){try{var e,i,o=!1;"object"==typeof t.rowIndex?(e=0,i=t.rowIndex.length,o=!0):"all"==t.rowIndex?(e=0,i=this.getDataLength()):"number"==typeof t.startIndex&&"number"==typeof t.endIndex&&(e=t.startIndex,i=t.endIndex);for(var s=e;s<i;s++){var a;if(a=o?t.rowIndex[s]:s,null!=this.rowStatusColIDArr)for(var n=0;n<this.rowStatusColIDArr.length;n++){var l=this.getColumnIndex(this.rowStatusColIDArr[n]);this.drawCellData(a-this.rowIndex,a,l)}}this.hasFooter&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&this.drawFooter(),this.hasSubtotal&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex))}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifySaveFocusedCell=function(){try{this.focusedCellInfo.beforeFocusedCell=!(0==this.focusedCell.length),this.focusedCellInfo.beforeFocusedCell&&(this.focusedCellInfo.beforeFocusedCellRealRowIndex=this.dataList.getRealRowIndex(this.focusedCell[0].focusedRowIndex),this.focusedCellInfo.beforeFocusedCellRealColumnIndex=this.focusedCell[0].focusedColIndex)}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifySetFocusedCell=function(t){try{var e=this.options.filterFocusMode,i=this.focusedCellInfo.beforeFocusedCellRealRowIndex;if("outfocus"!==e&&"infocus"!==e){if(this.focusedCellInfo.beforeFocusedCell)for(var o=0;o<this.getDataLength();o++)if(this.dataList.getRealRowIndex(o)==i){this._setFocusedCell(o,this.focusedCellInfo.beforeFocusedCellRealColumnIndex,!1,{isSort:t});break}}else"outfocus"==e&&this.outFocusedCell();this.focusedCellInfo={}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifySettedFilter=function(t){try{var e=t&&t.isSort,i=t&&t.fiteredColID;if(this.notifySetFocusedCell({isSort:e}),e&&this.syncWithSortStatus(),this.groupbyStatus.grouped)for(var o in this.customFilterStatusObj)if(this.customFilterStatusObj[o]){this.rowNumArr=[];for(var s=0;s<this.getDataLength();s++)this.rowNumArr.push(s);break}1==this.isDrillDown&&this._linkedDataList&&(this.setCellInfo(),this.initDrilldown());var a=!t||!1!==t.keepTop,n=[];if(this.hiddenRowObj.init){for(var l in this.hiddenRowObj.row)!0===this.hiddenRowObj.row[l]&&n.push(l);this.clearRowVisible({noDraw:!0})}if(this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:a}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),e&&!this.groupbyStatus.grouped&&this.drawHeaderSortImages(),i&&!e&&this.options.useFilterList){var h=this.bodyToHeaderRelation[i];if(h){var d=this.getElementById(this.id+"_"+h+"_filter");d&&WebSquare.style.addClass(d,"w2grid_customFilter_filter")}}for(s=0;s<n.length;s++)this.setRowVisible(n[s])}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifySettedFilterByUser=function(t){try{if(this.options.useFilterListSync){var e=t.colID,i=JSON.parse(t.oldFilteredRowIndexArr),o=JSON.parse(t.newFilteredRowIndexArr);if(this.groupbyStatus.grouped);else if(this.options.useFilterList){this.customFilterList||this.createCustomFilterList(null,!0),this.customFilterList.filterHistory.column[0]!==e&&(this.customFilterList.filterHistory.column.unshift(e),this.customFilterList.filterHistory.filteredRowIndexArr.unshift(i));var s=this.dataList.getColData(e,o),a=this.getUniqueValueOfArray(s),n=this.changeItemValue("label",e,a);this.customFilterList.customFilterListFilterInfo||(this.customFilterList.customFilterListFilterInfo={}),this.customFilterList.customFilterListFilterInfo[e]=[];for(var l=0;l<n.length;l++){var h=n[l],d=this;"string"==typeof h&&(h=h.replace(/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,(function(t){return d.replacechar(t)}))),this.customFilterList.customFilterListFilterInfo[e].push(h)}}}}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeClearSort=function(){try{this.notifySaveFocusedCell(),
this.clearHeaderSort()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyClearSortFilter=function(){try{var t=this._getFocusedRowIndex(),e=this.getFocusedColumnIndex();this.syncWithSortStatus(),this.rowNumArr=null,this.removeFocusedCell(),this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),"infocus"==this.options.filterFocusMode&&this._setFocusedCell(t,e)}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeSettedColumnFilter=function(){try{this.lastTopRowIndex=null,this.scrollEvent=!1,this.rowIndex=0}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyAfterSettedColumnFilter=function(){try{var t=this.getElementById(this.id+"_scrollY_div"),e=t.scrollTop;this.bScrollTop=-1,this.scrollEvent=!0,t.scrollTop=e,this.options.groupbyFilterBox&&this.refreshGroupbyFilterBox()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeRemovedColumnFilter=function(){try{this.lastTopRowIndex=null,this.scrollEvent=!1,this.rowIndex=0}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyAfterRemovedColumnFilter=function(){try{var t=this.getElementById(this.id+"_scrollY_div"),e=t.scrollTop;this.bScrollTop=-1,this.scrollEvent=!0,t.scrollTop=e,this.options.groupbyFilterBox&&this.refreshGroupbyFilterBox()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyRemovedFilter=function(t){try{!0===t&&this.clearHeaderSort(),this.rowNumArr=null,this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.lastTopRowIndex=null,this.setScrollYHeight()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyClearFilter=function(t){try{for(var e in this.clearHeaderSort(),this.rowNumArr=null,this._mergeNotifyFilter(),t||(this.adjustDraw_keepTop=!0,this.notifyDataChanged({keepTop:!0}),this.adjustDraw_keepTop=null),0==this.getDataLength()&&this.removeFocusedCell(),this.lastTopRowIndex=null,this.setScrollYHeight(),this.headerInfoHash){var i=this.getElementById(this.id+"_"+e+"_filter");i&&WebSquare.style.removeClass(i,"w2grid_customFilter_filter")}this.itemValueObj={},this.firstOpenCustomFilter={},this.customFilterStatusObj={},this.customFilterList&&(this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]},this.customFilterList.customFilterListFilterInfo={}),this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]})}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyMultisort=function(){try{this.syncWithSortStatus(),this.drawHeaderSortImages()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyBeforeInitDataList=function(){try{this.removeAllFinish=!0}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyAfterInitDataList=function(){try{this.loadCheck=[],this.initFlag=!0,this.skipScrollEndEvent=!0,this.skipScrollStartEvent=!0,this.hasFooter&&this.initFooterDataObj(),this.initHeaderDataObj(),1==this.isDrillDown&&this.initDrilldown(),this.removeAllFinish=!1,this.initColumns()}catch(t){r.w.printStackTrace(t,null,this)}},l.prototype.notifyRefresh=function(t){try{!this.startedDisplayNone&&this.rowIndex>=0&&(t&&this.setDataTable(),this._mergeRefresh(),this.drawData(this.rowIndex,0),t&&this.setScrollYHeight(),this.displayNoResultMessage())}catch(t){r.w.printStackTrace(t,null,this)}};var h,d=i(1960),c=i(7275),u=function(){};u.prototype.toHTML=function(){try{var t=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/mainZIndex/@value")||"10",e=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/xScrollZIndex/@value")||"20",i=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/yScrollZIndex/@value")||"15";if(this.uncompleted)return;var o=[],a="scroll"===this.options.overflowY,n=(this.options.drawType,
"hidden"),l=!0===this.options.scrollXNative?"display:none;":"",h="native"===this.options.drawType?"visibility:hidden;":"",d=this.options.title?" title='"+this.options.title.wq_replaceAll("'","&#39;")+"'":"",c=this.options.moreButtonTitle?this.options.moreButtonTitle.wq_replaceAll("'","&#39;"):WebSquare.language.getMessage("Grid_more_Button")||"목록 더보기",u=c?" title='"+c+"'":"",p="none"==this.options.focusMode||"linear"==this.options.focusFlow?"":" tabIndex='0'",g=this.options.scrollFocus?" tabIndex='0'":"",m=""==this.options.style?"style='overflow:"+n+";'":"style='"+this.options.style+";overflow:"+n+";'",f=this.options.readOnly?" w2grid_readonly_outer":"",b=function(t){return this._useRole()?" role='"+t+"' ":""};if(o.push("<div id='"+this.id+"' class='w2grid "+this.options.className+f+"' "+m+d+p+">"),this.options.senseReader&&this.options.useStartEndDiv&&o.push("<div id='"+this.id+"_gridstart_div' class='w2grid_start_div' tabindex='0'>그리드 시작</div>"),this.options.groupbyZone&&this.options.groupbyFilterBox&&"top"==this.options.groupbyFilterBoxLocation&&(o.push("<div id='"+this.id+"_groupbyFilterBox_div' class='w2grid_groupbyFilterBox' style='top:0px;left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px;float:left;'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_main' class='w2grid_groupbyFilterBox_main'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_buttons' class='w2grid_groupbyFilterBox_buttons' >"),o.push('<input id="'+this.id+'_groupbyFilterBox_delete" type="button" value="X" class="w2grid_groupbyFilterBox_delete" />'),o.push('<input id="'+this.id+'_groupbyFilterBox_apply" type="checkbox" class="w2grid_groupbyFilterBox_apply" />'),o.push("</div>"),o.push('<div id="'+this.id+'_groupbyFilterBox_select"'+b.call(this,"combobox")+'aria-labelledby="'+this.id+'_groupbyFilterBox_itemTable" aria-autocomplete="none" class="" tabindex="0">'),o.push("</div>"),o.push("</div>"),o.push("</div>")),this.options.groupbyZone){var y="<div id='"+this.id+"_groupbyZone_div' class='w2grid_groupbyZone' style='width:0px; height:0px;'>",v="";this.options.groupbyZoneSearch&&(v="<div id='"+this.id+"_groupbyZone_search' class='w2grid_groupbyZone_search'></div>"),o.push(y+v+"</div>")}return o.push("<div id='"+this.id+"_main_div' class='w2grid_main' style='z-index:"+t+";overflow:"+n+";position:absolute;left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px; top:0px; bottom:"+this.scrollLayerWidthSize+"px;float:left;'>"),o.push(this.mainDataGridLayout()),this.options.useMoreButton&&o.push("<button id='"+this.id+"_grid_more_button' class='w2_grid_more_button'"+u+"></button>"),o.push("</div>"),this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"==this.options.groupbyFilterBoxLocation&&(o.push("<div id='"+this.id+"_groupbyFilterBox_div' class='w2grid_groupbyFilterBox' style='left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px; bottom:0px;float:left;'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_main' class='w2grid_groupbyFilterBox_main' >"),o.push("<div id='"+this.id+"_groupbyFilterBox_buttons' class='w2grid_groupbyFilterBox_buttons' >"),o.push('<input id="'+this.id+'_groupbyFilterBox_delete" type="button" value="X" class="w2grid_groupbyFilterBox_delete"/>'),o.push('<input id="'+this.id+'_groupbyFilterBox_apply" type="checkbox" class="w2grid_groupbyFilterBox_apply" />'),o.push("</div>"),o.push('<div id="'+this.id+'_groupbyFilterBox_select"'+b.call(this,"combobox")+'aria-labelledby="'+this.id+'_groupbyFilterBox_itemTable" aria-autocomplete="none" class="" tabindex="0">'),o.push("</div>"),o.push("</div>"),o.push("</div>")),o.push("<div id='"+this.id+"_scrollX_div' class='w2grid_scrollX' style='z-index:"+e+";overflow-x:hidden;overflow-y:hidden;position:absolute; height:0px; left:0px; right:"+(a?this.scrollWidthSize:"0")+"px; bottom:0px;"+l+"'>"),o.push(this.getScrollX()),o.push("</div>"),
o.push("<div id='"+this.id+"_scrollY_div' class='w2grid_scrollY' style='z-index:"+i+";position:absolute; overflow-x:hidden;overflow-y:scroll;width:"+(a||"native"===this.options.drawType?this.scrollLayerWidthSize:"0")+"px; height: 100%;right:0px;"+h+g+"'>"),o.push(this.getScrollY()),o.push("</div>"),o.push("<div id='"+this.id+"_iScrollX' class='w2grid_iScrollX' style='visibility:hidden;'></div>"),o.push("<div id='"+this.id+"_iScrollY' class='w2grid_iScrollY' style='visibility:hidden;'></div>"),o.push("<div id='"+this.id+"_resize_line' class='w2grid_resize_line' style='display:none;position:absolute;top:10px; bottom:0px;border:0px dashed #222222; border-left-width:1px;'></div>"),o.push("<div id='"+this.id+"_noresult' style='display:none;position:absolute;"+this.options.noResultMessageStyle+"' class='"+this.options.noResultMessageClass+"'>"+this.options.noResultMessage+"</div>"),(this.options.senseReader&&this.options.useStartEndDiv||1==this.options.moveKeyEditModeAll)&&o.push("<div id='"+this.id+"_gridend_div' class='w2grid_end_div' tabindex='0'>그리드 끝</div>"),o.push("</div>"),o.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getScrollY=function(){try{return"<div id='"+this.id+"_size_y' style='height:0px; position:absolute; top:0px; left:0px; width:18px;'></div>"}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getScrollX=function(){try{for(var t=this.getFixedColumnLastIndex(),e=0,i=0;i<t;i++)this.hiddenList[i]||(e+=this.colWidthList[i]);var o=this.getFixedRightColumnLastIndex(),s=0;for(i=this.colWidthList.length-1;i>=o;i--)this.hiddenList[i]||(s+=this.colWidthList[i]);var a=this.options.scrollFocus?" tabIndex='0'":" tabIndex='-1'",n=[],l=this.options.fixedColumnScrollHidden?"hidden":"scroll";return n.push("<table id='"+this.id+"_scrollX_table' style='height:18px;table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:100%'>"),n.push("<tr>"),n.push("<td id='"+this.id+"_scrollX_left' style='border:0px solid red;padding:0px 0px 0px 0px;height:"+this.scrollLayerWidthSize+"px;width:"+e+"px;vertical-align:bottom;'>"),n.push("<div style='height:"+this.scrollLayerWidthSize+"px;overflow-x:"+l+";overflow-y:hidden'></div>"),n.push("</td>"),n.push("<td style='border:0px solid orange;padding:0px 0px 0px 0px;height:18px;'>"),n.push("<div id='"+this.id+"_scrollX_right' style='height:18px;border:0px solid blue; overflow-x:scroll;overflow-y:hidden;padding:0px 0px 0px 0px;'"+a+">"),n.push("<div id='"+this.id+"_scroll_size' style='height:1px;width:"+parseInt(this.gridWidth-e-s)+"px'></div>"),n.push("</div>"),n.push("</td>"),n.push("<td id='"+this.id+"_scrollX_fixedRight' style='border:0px solid red;padding:0px 0px 0px 0px;height:"+this.scrollLayerWidthSize+"px;width:"+s+"px;vertical-align:bottom;'>"),n.push("<div style='height:"+this.scrollLayerWidthSize+"px;overflow-x:scroll;overflow-y:hidden'></div>"),n.push("</td>"),n.push("</tr>"),n.push("</table>"),n.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.mainDataGridLayout=function(){try{this.setTableStruct();var t=[];return t.push(this.getBodyTable()),t.push(this.getFooterTable()),this.setInitialCSS(),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setColArr=function(){try{this.colGroupArr=[],this.setColWidth(),this.gridWidth=0;var t,e,i=-1;if(this.options.rowStatusVisible){var o=40;this.options.rowStatusWidth.length>0&&(this.options.rowStatusWidth.indexOf("*")>-1?(o=this.options.rowStatusWidth,i++):this.options.rowStatusWidth-0>-1&&(o=this.options.rowStatusWidth-0)),this.colWidthList.unshift(o),this.hiddenList.unshift(!1),this.hiddenAdaptiveList.unshift(!1)}if(this.options.rowNumVisible){o=40;this.options.rowNumWidth.length>0&&(this.options.rowNumWidth.indexOf("*")>-1?(o=this.options.rowNumWidth,i++):this.options.rowNumWidth-0>-1&&(o=this.options.rowNumWidth-0)),this.colWidthList.unshift(o),this.hiddenList.unshift(!1),this.hiddenAdaptiveList.unshift(!1)}if(i>-1){this.autofitColumn=!0
;for(var s=0;s<2;s++)this.colWidthList[s]&&"string"==typeof this.colWidthList[s]&&this.colWidthList[s].indexOf("*")>-1&&(this.autofitColumnIndexArr.push(s),this.autofitColumnWidthArr[s]=this.colWidthList[s])}if(this.isIE6or7){t=[],e=this.colIndexes.bodyColInfo.colSpanArr;var a=this.colIndexes.bodyColInfo.colIndexArr.length;for(s=0;s<a;s++)if(e[s])for(var n=0;n<e[s];n++)t[n]=!0}this.colGroupArr.push("<colgroup>");for(s=0;s<this.colWidthList.length;s++){null==this.colWidthList[s]&&(this.colWidthList[s]=70);var l=isNaN(this.colWidthList[s])?0:this.colWidthList[s];this.hiddenList[s]?l=0:(this.gridWidth+=l,this.isIE6or7&&(s<this.defaultColCnt||!t[s])&&(l--,s==this.defaultColCnt&&l--)),this.colGroupArr.push("<col id='colGroupID_"+s+"' style='width:"+l+"px;white-space:nowrap' />")}this.colGroupArr.push("</colgroup>")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setCss=function(){try{if(this.options.headerTableClass=this.struct.head.attr.class||"gridHeaderTableDefault",this.options.headerTrClass=this.struct.head.attr.rowClass||"gridHeaderTRDefault",this.options.headerTdClass=this.struct.head.attr.columnClass||"gridHeaderTDDefault",this.options.bodyTableClass=this.struct.body.attr.class||"gridBodyTableDefault",this.options.bodyTrClass=this.struct.body.attr.rowClass||"gridBodyTRDefault",this.options.bodyTdClass=this.struct.body.attr.columnClass||"gridBodyDefault",a.D.isIEAllVersion()?this.options.gridNativeClass="gridNativeIE":this.options.gridNativeClass="gridNative",this.hasFooter&&(this.options.footerTableClass=this.struct.foot.attr.class||"gridFooterTableDefault",this.options.footerTrClass=this.struct.foot.attr.rowClass||"gridFooterTRDefault",this.options.footerTdClass=this.struct.foot.attr.columnClass||"gridFooterTDDefault"),this.hasSubtotal){this.options.subtotalTrClass=this.struct.subtotalArr[this.struct.subtotalArr.length-1].attr.rowClass||"gridSubtotalTRDefault",this.options.subtotalTdClass=this.struct.subtotalArr[this.struct.subtotalArr.length-1].attr.columnClass||"gridSubtotalDefault";for(var t=0;t<this.struct.subtotalArr.length;t++)if(this.struct.subtotalArr[t].attr.subtotalClass){this.subtotalClassList=[];break}if(this.subtotalClassList)for(t=0;t<this.struct.subtotalArr.length;t++){var e=this.struct.subtotalArr[t].attr.subtotalClass||"gridSubtotalDefault";this.subtotalClassList.push(e)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInitialCSS=function(){try{this.options.oddEvenColorDisplay&&(WebSquare.cssStyleSheet.addRule("#"+this.id+" .evenTd","background-color:"+this.options.evenRowBackgroundColor),WebSquare.cssStyleSheet.addRule("#"+this.id+" .oddTd","background-color:"+this.options.oddRowBackgroundColor)),this.rowStyleIndex=0,this.cellStyleIndex=0,this.readOnlyTdStyle="",this.readOnlyTdImg="",this.disabledTdStyle="",this.rowOverStyle="",""!=this.options.readOnlyBackgroundColor&&(this.readOnlyTdStyle="background-color:"+this.options.readOnlyBackgroundColor),""==this.options.readOnlyBackgroundImg&&""==this.options.readOnlyBackgroundImgCSS||(this.options.readOnlyBackgroundImgCSS?this.readOnlyTdImg=this.options.readOnlyBackgroundImgCSS:this.readOnlyTdImg="background:url("+this.options.readOnlyBackgroundImg+") no-repeat center center; background-size: cover"),""!=this.options.disabledBackgroundColor&&(this.disabledTdStyle="background-color:"+this.options.disabledBackgroundColor),""!=this.options.disabledFontColor&&(this.disabledTdStyle=""!=this.disabledTdStyle?this.disabledTdStyle+";":"",this.disabledTdStyle+="color:"+this.options.disabledFontColor),""!=this.options.rowNumBackgroundColor&&WebSquare.cssStyleSheet.addRule("#"+this.id+" ."+this.options.bodyTdClass+"_rowNumber","background-color:"+this.options.rowNumBackgroundColor),this.options.rowMouseOver&&(this.rowOverStyle="background-color:"+this.options.rowMouseOverColor),-1!=this.options.defaultHeaderCellHeight&&WebSquare.cssStyleSheet.addRule("#"+this.id+" th."+this.options.headerTdClass,"height:"+this.options.defaultHeaderCellHeight+"px"),
-1!=this.options.defaultCellHeight&&(WebSquare.cssStyleSheet.addRule("#"+this.id+" td."+this.options.bodyTdClass,"height:"+this.options.defaultCellHeight+"px"),-1==this.options.defaultHeaderCellHeight&&WebSquare.cssStyleSheet.addRule("#"+this.id+" th."+this.options.headerTdClass,"height:"+this.options.defaultCellHeight+"px"))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getGridClassName=function(t,e){try{return null==t||""==t?e:t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.grid2TableXml=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(this.element,t,s.v._XML_NAMESPACE.W2);return e.length>0?this.oneGrid2TableXml(e[0]):null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.xml2JSON=function(t){try{var e={attr:{},rowArr:[],rowAttrArr:[]};e.attr=WebSquare.Parser.parseAttribute(t);for(var i=WebSquare.Elem.api.getElementsByTagName(t,"row",s.v._XML_NAMESPACE.W2),o=0;o<i.length;o++){e.rowAttrArr[o]=WebSquare.Parser.parseAttribute(i[o]);for(var a=WebSquare.Elem.api.getElementsByTagName(i[o],"column",s.v._XML_NAMESPACE.W2),n=[],l=0;l<a.length;l++){var h=WebSquare.Parser.parseAttribute(a[l]);h["@xml"]=a[l],n.push(h)}e.rowArr.push(n)}return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.oneGrid2TableXml=function(t){try{var e=WebSquare.xml.serialize(t),i=e.indexOf("w2:header")>=0?"th":"td";return e=(e=(e=(e=(e=e.wq_replaceAll("w2:header",this.options.fixPrint?"tbody":"thead")).wq_replaceAll("w2:gBody","tbody")).wq_replaceAll("w2:footer","tbody")).wq_replaceAll("w2:row","tr")).wq_replaceAll("w2:column",i),WebSquare.xml.parse(e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setColWidth=function(){try{var t=this.getColCnt();this.colWidthList=[],this.autoFitColWidthList=null,this.hiddenList=[],this.hiddenAdaptiveList=[];for(var e=0;e<t;e++)this.colWidthList[e]=null,this.hiddenList[e]=!1,this.hiddenAdaptiveList[e]=!1;this.initializeTableInfo()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getColCnt=function(){try{for(var t=0,e=this.htmlInfo?this.htmlInfo.head.rowArr[0]:this.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.initializeTableInfo=function(){try{var t=this,e=function(e){if(null==e)return null;for(var i=[],o=[],s=[],r=[],a=[],n=e.rowArr,l=[],h=0;h<n.length;h++){for(var d=[],c=0;c<t.colWidthList.length;c++)d.push(!1);l.push(d)}var u=0;t.options.rowNumVisible&&(i.push(0),s.push(0),r.push(n.length),a.push([u++])),t.options.rowStatusVisible&&(i.push(!0===t.options.rowNumVisible?1:0),s.push(0),r.push(n.length),a.push([u++]));for(h=0;h<n.length;h++){var p=n[h],g=0;for(c=0;c<p.length;c++){for(var m=p[c],f=parseInt(m.colSpan||1),b=parseInt(m.rowSpan||1);void 0!==l[h][g]&&l[h][g];)g++;m.colIndex=g+t.defaultColCnt,i.push(g+t.defaultColCnt),s.push(h),r.push(b);var y=m.width||"";if(f>1){if("string"==typeof y&&y.indexOf("*")>-1){t.autofitColumn=!0;for(var v=0;v<f;v++){var w=g+v;t.colWidthList[w]=y,t.autofitColumnWidthArr[w+t.defaultColCnt]=y,t.autofitColumnIndexArr.push(w+t.defaultColCnt)}}o[i.length-1]=f}if(1==f&&null==t.colWidthList[g])if("string"==typeof y&&y.indexOf("*")>-1){t.autofitColumn=!0;w=g;t.colWidthList[w]=y,t.autofitColumnIndexArr.push(w+t.defaultColCnt),t.autofitColumnWidthArr[w+t.defaultColCnt]=y}else t.colWidthList[g]=parseInt(y||0);for(var S=0;S<f;S++){a[g+t.defaultColCnt+S]||(a[g+t.defaultColCnt+S]=[]),a[g+t.defaultColCnt+S].push(u),l[h][g+S]=!0,"true"==m.hidden&&(t.hiddenList[g+S]=!0);for(var C=1;C<b;C++)l[h+C][g+S]=!0}u++,delete m.hidden}}return{colIndexArr:i,colSpanArr:o,trIndexArr:s,rowSpanArr:r,colIndexMatch:a}};if(this.colIndexes={headerColInfo:e(this.struct.head),bodyColInfo:e(this.struct.body),footerColInfo:e(this.struct.foot)},this.hasSubtotal){this.colIndexes.subtotalColInfo=[];for(var i=0;i<this.struct.subtotalArr.length;i++){var o=e(this.struct.subtotalArr[i]);this.colIndexes.subtotalColInfo.push(o),
this.colIndexes.subtotalColInfo[this.struct.subtotalArr[i].attr.targetColumnID]=o}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getFooterTable=function(){try{if(!this.hasFooter)return"";this.hasFooter=!0;var t="";this.options.footerSummary?t=this.options.footerSummary?" summary='"+this.options.footerSummary.wq_replaceAll("'","&#39;")+"'":"":this.options.captionTitle&&this.options.footerSummaryAuto&&(t=" summary='"+this.options.captionTitle+WebSquare.language.getMessage("Grid_footer_caption")+"'"),"html5"==WebSquare.docType&&(t="");var e="";if(e="<table id='"+this.id+"_foot_table' class='"+this.options.footerTableClass+"' style='position:absolute; bottom:0px; table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:"+this.gridWidth+"px;'"+t+">",this.options.footerCaption?e+="<caption>"+this.options.footerCaption+"</caption>":this.options.captionTitle&&this.options.footerCaptionAuto&&(e+="<caption>"+this.options.captionTitle+WebSquare.language.getMessage("Grid_footer_caption")+"</caption>"),e+=this.getColGroup(this.id+"_col_footer"),a.D.isSafari()||a.D.isChrome()&&a.D._getChromeVersion()<94)e+="<thead><tr></tr></thead>";else if(a.D.isIE()){for(var i="",o=0;o<this.getColCnt();o++)i+="<td></td>";e+="<thead style='visibility:collapse;'><tr>"+i+"</tr></thead>"}e+=this.getTableHtml(this.htmlInfo.foot,"tbody","td",this.options.footerTdClass),e+="</table>";var s=a.D.getDataPrefix("or_wd="),n=a.D.getDataPrefix("dis="),l=a.D.getDataPrefix("width=");return e=(e=e.wq_replaceAll(l,s)).wq_replaceAll("disabled=",n)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getBodyTable=function(){try{var t="width:"+this.gridWidth+"px;'";this.isIE6or7&&(t="'");var e="";this.options.summary&&"html5"!=WebSquare.docType&&(e=" summary = '"+(this.element.getAttribute("summary")||"").wq_replaceAll("'","&#39;")+"' ");var i="",o="native"===this.options.drawType?"auto":"hidden",s=!0===this.options.scrollXNative?"auto":"hidden",n="native"===this.options.drawType?" "+this.options.gridNativeClass:"",l="native"===this.options.drawType?"":" border-collapse:collapse";if(i="<div id='"+this.id+"_dataLayer' class='w2grid_dataLayer' style='position:absolute; width:100%; top:0px;bottom:0px;overflow-x:"+s+";overflow-y:"+o+";'>",i+=this.getGridHeaderFillerTable(this.headerXml,this.options.headerTdClass,this.options.headerTrClass,this.id+"_head_table",this.options.headerTableClass),i+="<table id='"+this.id+"_body_table' class='"+this.options.headerTableClass+n+"' style='position:absolute;left:0px;top:0px;table-layout:fixed;"+l+"; border-spacing:0px;"+t+e+">",this.captionXml){var h=WebSquare.xml.parse("<caption/>"),d=null,c=WebSquare.Parser.parseAttribute(this.captionXml);for(var u in c){if("id"==u){var p=c[u];p&&h.documentElement.setAttribute("id",this.id+"_"+p)}else h.documentElement.setAttribute(u,c[u]);"value"==u&&(d=c[u])}if(d)h.documentElement.appendChild(h.createTextNode(d)),h.documentElement.removeAttribute("value");else for(var g=this.captionXml.getChildNodes(),m=0;m<g.length;m++)if(3===g[m].getNodeType()){var f=h.createTextNode(g[m].getNodeValue());h.documentElement.appendChild(f)}i+=WebSquare.xml.noNameSpaceSerialize(h)}if(this.isWebKit){if(!this.captionXml){var b="transparent",y="0";try{for(m=0;m<document.styleSheets.length;m++){var v=document.styleSheets[m];try{v.cssRules}catch(t){continue}for(var w=0;v.cssRules&&w<v.cssRules.length;w++){var S=v.cssRules[w];if(S.selectorText=="."+this.options.headerTableClass){b=S.style["border-top-color"],y=parseInt(S.style["border-top-width"])/2,m=document.styleSheets.length;break}}}}catch(t){}i+="<caption style='height:"+y+"px;background-color:"+b+";'></caption>"}a.D.isSafari()||a.D.isChrome()&&a.D._getChromeVersion()<94?(i+=this.getColGroup(this.id+"_col_body"),i+="<thead><tr></tr></thead>"):i+=this.getColGroup(this.id+"_col_body")}else i+=this.getColGroup(this.id+"_col_body");i+=this.getTableHtml(this.htmlInfo.head,"thead","th",this.options.headerTdClass);n=""
;"native"===this.options.drawType&&(n=" class='"+this.options.gridNativeClass+"'"),i+="<tbody id='"+this.id+"_body_tbody'"+n+"></tbody>",i+="</table>",i+="</div>";var C=a.D.getDataPrefix("or_wd="),_=a.D.getDataPrefix("width=");return i=i.wq_replaceAll(_,C)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getTableInfo=function(t,e,i){try{var s=o.x.extend({},t.attr),a=[],n=t.rowAttrArr||[{}],l=t.rowArr;s.id=this.id+"_"+e+"_tbody",s.style="";for(var h=0;h<l.length;h++){a.push([]);for(var d=0;d<l[h].length;d++){var c=o.x.extend({},l[h][d]);if(c.class=e+" "+e+"_data",this.isIE6or7){var u=parseInt(c.colSpan||"1"),p=parseInt(c.colIndex);if(u>1){for(var g=1;g<u;g++)0!=this.hgap[i+"_"+p]&&(this.hgap[i+"_"+(p+g)]=!0);this.hgap[i+"_"+p]=!0}else this.hgap[i+"_"+p]=!1}var m=c.textAlign,f=c.style?c.style+";":"";f=f+"text-align:"+(m||"center"),c.style=f,a[h].push(c)}}return{attr:s,rowArr:a,rowAttrArr:n}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getBodyHtmlInfo=function(){try{var t=this.options.bodyTdClass,e=this.options.bodyTrClass,i=this.getTableInfo(this.struct.body,t,e),o=i.attr,a=i.rowArr,n=i.rowAttrArr;this.oneRowLength=a.length,this.oneRowDataLength=0,this.tdIdList=[],this.bodyIdColIndexMap={},this.colMoveIndexMap={};for(var l=0,h={},d=0;d<a.length;d++){n[d].trIndex=d,this.oneRowDataLength+=a[d].length;for(var u=0;u<a[d].length;u++){var p=a[d][u],g=p.style.split(";");if(g.length>0)for(var m=0;m<g.length;m++)if(g[m].indexOf(":")>-1){try{var f=g[m].split(":")[0].wq_trim(),b=g[m].split(":")[1].wq_trim();this.options.useDefaultStyle?this.setDefaultStyle(l,f,b):"text-align"!==f||p.textAlign?this.setColumnStyle(l,f,b):this._setInitStyle(l,f,b)}catch(t){}if(!this.options.applyAllColumnStyle)break}var y=this.options.adaptiveStyle||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/adaptiveStyle/@value");if("none"==this.options.adaptiveStyle&&(y=""),y=p.adaptiveStyle||y,"none"==p.adaptiveStyle&&(y=""),y){var v=y.split(";");if(v.length>0)for(var w=0;w<v.length;w++)if(v[w].indexOf(":")>-1)try{var S=v[w].split(":")[0].wq_trim(),C=v[w].split(":")[1].wq_trim();this.setAdaptiveColumnStyle(l,S,C)}catch(t){}}"textarea"==p.inputType&&"all"==p.displayType&&(p.style+=";word-break:break-all;white-space:normal;");var _=p.id;if(null==p.col_id?(p.col_id=_,p.id=this.id+"_"+_,p["@xml"]=p["@xml"].cloneNode(!0),p["@xml"].setAttribute("col_id",_),p["@xml"].setAttribute("id",this.id+"_"+_)):_=p.col_id,this._setCellInfo(_,p["@xml"]),this.bodyIdColIndexMap[_]=l,0==d&&(this.colMoveIndexMap[_]=l),h[_]){var x=WebSquare.language.getMessage("E_comp_duplicated_Msg",_)||"id["+_+"] 가 중복사용되었습니다. 소스코드를 확인하세요.";$l(x)}else h[_]=_;this.tdIdList.push(_),""===_&&c.k.printLog("warning : The "+this.id+" column name for column index "+l+" is missing."),l++}}return{attr:o,rowArr:a,rowAttrArr:n}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getHeaderHtmlInfo=function(){try{var t=this.options.headerTdClass,e=this.options.headerTrClass,i=this.getTableInfo(this.struct.head,t,e),o=i.attr,s=i.rowArr,a=i.rowAttrArr,n=[];this.thIdList=[],this.colMoveHeaderIndexMap={},o.id=this.id+"_head_table",o.class=this.options.headerTableClass;var l=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(this.struct.head.attr.style);l&&2==l.length&&(this.headerHeight=parseInt(l[1])),o.style=this.options.hideHeader?"display:none":"",this.headCellInfoHash={};for(var h=0;h<s.length;h++){n.push([]);for(var d=0;d<s[h].length;d++){var c=s[h][d],u=null,p=c.inputType,g=c.dataType,m=c.value;if(void 0!==m&&null!=m||void 0!==(m=c.defaultValue)&&null!=m||(m=""),"checkbox"==p)u="<input type='checkbox' style='border:0px solid blue;background-color:transprent;' />";else if("select"==p){var f="";if(this.options.chooseOption){if(f=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef)(y=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef))&&(f=y)}else if(this.options.allOption){
f=WebSquare.language.getMessage("Grid_all")||"-전체-"}else if("json"!==c["@xml"]._elementType){var b=(WebSquare.xml.serialize(c["@xml"]).match(/label\s*>[^<]+<\//)||"").toString();""!==b&&(f=b.slice(b.toString().indexOf(">")+1,-2))}u="<div style='width:100%;height:20px;top:0px;left:0px;position:relative;background-color:#ffffff' class='w2selectbox "+this.options.headerTdClass+" "+this.options.headerTdClass+"_data'><span style='display:none'></span><table class='w2selectbox_table_main'><tr class='w2selectbox_row w2selectbox_row_main'><td class='w2selectbox_col_label'><div class='w2selectbox_label'>"+f+"</div></td><td class='w2selectbox_col_button'></td></tr></table></div>"}else if("text"==p&&"own"==g)u="<input type='text' class='w2grid_head_input' style='width:95%; height:18px;' />";else{var y;if(this.options.useLocale&&c.localeRef)(y=this.getLocaleValue(c.localeRef))&&(m=y);m=null!=m?m:"";var v="";"span"==this.options.dataTag&&(v="class='w2grid_span'"),u="<"+this.options.dataTag+" "+v+" style='padding-top:0px; padding-left:4px;padding-right:4px' >"+m+this.dataTagClose}n[h].push(u),this.thIdList.push(c.id),this.headCellInfoHash[c.id]=c["@xml"],this._setHeaderInfo(c.id,c["@xml"]),null==c.col_id&&(c.col_id=c.id)}}return{attr:o,rowArr:s,rowAttrArr:a,headerTdHtml:n}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getFooterHtmlInfo=function(){try{for(var t=this.options.footerTdClass,e=this.options.footerTrClass,i=this.getTableInfo(this.struct.foot,t,e),o=i.attr,s=i.rowArr,a=i.rowAttrArr,n=0;n<s.length;n++)a[n]["data-trindex"]=n;var l=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(this.struct.foot.attr.style);return l&&2==l.length&&(this.footerHeight=parseInt(l[1])),{attr:o,rowArr:s,rowAttrArr:a}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSubtotalHtmlInfo=function(t){try{var e=this.options.subtotalTdClass;this.subtotalClassList&&(e=t.attr.subtotalClass||"gridSubtotalDefault");for(var i=this.options.subtotalTrClass,o=this.getTableInfo(t,e,i),s=o.attr,a=o.rowArr,n=o.rowAttrArr,l=0;l<a.length;l++){n[l].trIndex=l,n[l].targetColumnID=s.targetColumnID;for(var h=0;h<a[l].length;h++)a[l][h].class=a[l][h].class+" "+this.id+"_subtotal__column"+h,delete a[l][h].hidden}return{attr:s,rowArr:a,rowAttrArr:n}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getTableHtml=function(t,e,i,s){try{var n=t.attr,l=t.rowArr,h=t.rowAttrArr,d=[],c="";if("native"===this.options.drawType){var u={};o.x.extend(u,n),u.class?u.class+=" "+this.options.gridNativeClass:u.class=this.options.gridNativeClass,c=this.getAttributesString(u)}else c=this.getAttributesString(n);d.push("<"+e+c+">");var p="",g="";l.length>=2&&(p=!1===this.options.rowNumRowSpan?" rowSpan='1'":" rowSpan='"+l.length+"'",g=!1===this.options.rowStatusRowSpan?" rowSpan='1'":" rowSpan='"+l.length+"'");var m="";"native"===this.options.drawType&&t===this.htmlInfo.head&&(m=" "+this.options.gridNativeClass);for(var f=a.D.getDataPrefix("colIndex"),b=a.D.getDataPrefix("value"),y=0;y<l.length;y++){if(t==this.htmlInfo.head?d.push("<tr"+this.getAttributesString(h[y])+" class='gridHeaderStyle_"+y+m+"'>"):t==this.htmlInfo.foot?d.push("<tr"+this.getAttributesString(h[y])+" class='gridFooterStyle_"+y+"'>"):d.push("<tr"+this.getAttributesString(h[y])+">"),0==this.options.rowNumRowSpan&&this.options.rowNumVisible)if(y===l.length-1){var v="";t==this.htmlInfo.head&&(v=this.options.rowNumHeaderValue),d.push("<"+i+p+" class='"+s+" "+s+"_rowNumber' "+b+"='"+v+"' "+f+"='0' id='_headerRowNumber'></"+i+">")}else d.push("<"+i+p+" class='"+s+" "+s+"_rowNumber' "+b+"='' "+f+"='0' id='_headerRowNumber'></"+i+">");else if(0===y){v="";t==this.htmlInfo.head&&(v=this.options.rowNumHeaderValue),this.options.rowNumVisible&&d.push("<"+i+p+" class='"+s+" "+s+"_rowNumber' "+b+"='"+v+"' "+f+"='0' id='_headerRowNumber'></"+i+">")}if(!1===this.options.rowStatusRowSpan){if(y===l.length-1){var w="";t==this.htmlInfo.head&&(w=this.options.rowStatusHeaderValue),
this.options.rowStatusVisible&&d.push("<"+i+g+" class='"+s+" "+s+"_rowStatus' "+b+"='"+w+"' "+f+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else if(this.options.rowStatusVisible)if(this.options.rowStatusColSpan&&0==y){var S=1;l[y][0].colSpan?S+=Number(l[y][0].colSpan):S++;var C=" colSpan='"+S+"'",_=l[y][0].value;d.push("<"+i+g+C+" class='"+s+" "+s+"_rowStatus' "+b+"='"+_+"' "+f+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else d.push("<"+i+g+" class='"+s+" "+s+"_rowStatus' "+b+"='' "+f+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else if(0==y){w="";t==this.htmlInfo.head&&(w=this.options.rowStatusHeaderValue),this.options.rowStatusVisible&&d.push("<"+i+g+" class='"+s+" "+s+"_rowStatus' "+b+"='"+w+"' "+f+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}for(var x=0;x<l[y].length;x++){if(s!==this.options.subtotalTdClass&&s!==this.options.footerTdClass||null==l[y][x].columnClass)if(this.subtotalClassList&&l[y][x].columnClass){for(var I=0;I<this.subtotalClassList.length;I++)if(this.subtotalClassList[I]&&s===this.subtotalClassList[I]){T=l[y][x].class;l[y][x].class=l[y][x].columnClass+" "+l[y][x].class,d.push("<"+i+this.getAttributesString(l[y][x])+">"),l[y][x].class=T;break}}else d.push("<"+i+this.getAttributesString(l[y][x])+">");else{var T=l[y][x].class;l[y][x].class=l[y][x].columnClass+" "+l[y][x].class,d.push("<"+i+this.getAttributesString(l[y][x])+">"),l[y][x].class=T}t.headerTdHtml&&t.headerTdHtml[y][x]&&d.push(t.headerTdHtml[y][x]),d.push("</"+i+">")}d.push("</tr>")}return d.push("</"+e+">"),d.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getGridHeaderFillerTable=function(t,e,i,o,s){try{if(!this.options.headFiller)return"";var a=[],n="";return this.options.hideHeader&&(n="display:none"),a.push("<table class='"+this.options.headerTableClass+"' style='z-index:-1;position:absolute;table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:"+this.gridWidth+"px; '>"),a.push("<tbody id='"+this.id+"_"+e+"_tbody_tmp' style='"+n+"' class='"+s+"'>"),a.push("<tr class='"+i+"'>"),a.push("<td style='' id='"+this.id+"_header_bg_td' class='"+e+" "+e+"_rowNumber'>&nbsp;</td>"),a.push("</tr>"),a.push("</tbody>"),a.push("</table>"),a.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getColGroup=function(t){try{return this.colGroupArr.join("").wq_replaceAll("colGroupID",t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.initializeLayoutEvents=function(){try{!0!==this.options.scrollXNative&&this.event.addListener2(this.getElementById(this.id+"_scrollX_right"),"onscroll",this.handleScrollX,this),this.event.addListener2(this.getElementById(this.id+"_scrollY_div"),"onscroll",this.handleScrollY,this),this.event.addListener2(this.render,"onmousewheel",this.handleWheel,this),this.options.groupbyZone&&(this.event.addListener2(this.getElementById(this.id+"_groupbyZone_div"),"onclick",this.handleGroupbyZoneClick,this),this.event.addListener2(this.getElementById(this.id+"_groupbyZone_div"),"onmousedown",this.handleChangeGroupDepth,this)),this.options.resize&&!a.D.isMobile()&&(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousemove",this.event.bindAsEventListener(this,this.handleColumnResize)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousedown",this.event.bindAsEventListener(this,this.doColumnResize)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.endColumnResize)),this.options.rowResize&&(this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onmousemove",this.event.bindAsEventListener(this,this.handleRowResize)),this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onmousedown",this.event.bindAsEventListener(this,this.doRowResize)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.endRowResize))),
a.D.isIE()&&s.v.browserVersion()<=8&&this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,(function(t){(this.resizeStarted||this.options.rowResize&&this.rowResizeStarted||null!=this.columnMoveTarget)&&d.B.preventDefault(t)})))),this.options.resize&&a.D.isMobile()&&(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"ontouchmove",this.event.bindAsEventListener(this,this.handleColumnResize)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"ontouchstart",this.event.bindAsEventListener(this,this.doColumnResize)),this.event.addListener(document.documentElement,"ontouchend",this.event.bindAsEventListener(this,this.endColumnResize)))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleScrollX=function(t){try{var e=d.B.getTarget(t);e&&(this._scrollXPrev||(this._scrollXPrev={}),this._scrollXPrev.scrollLeft===e.scrollLeft&&this._scrollXPrev.scrollTop===e.scrollTop&&this._scrollXPrev.scrollWidth===e.scrollWidth&&this._scrollXPrev.scrollHeight===e.scrollHeight&&(this.scrollXPreventEndEdit=!0),this._scrollXPrev.scrollLeft=e.scrollLeft,this._scrollXPrev.scrollTop=e.scrollTop,this._scrollXPrev.scrollWidth=e.scrollWidth,this._scrollXPrev.scrollHeight=e.scrollHeight),s.v.clearTimer(this.id+"_completiveDrawData",!0),s.v.clearTimer(this.id+"_applyStyleOptions",!0),null==this.editedCell||this.scrollXPreventEndEdit||this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t]),this._handleScrollX(),this.scrollXPreventEndEdit&&this.editedCell&&this.editedCell.setPosition&&this.editedCell.setPosition(),this.scrollXPreventEndEdit=!1,d.B.fireEvent(this,"onscrollx",t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._handleScrollX=function(){try{this.body_table||(this.head_table=this.getElementById(this.id+"_head_table"),this.body_table=this.getElementById(this.id+"_body_table"),this.hasFooter&&(this.foot_table=this.getElementById(this.id+"_foot_table")),this.scrollX_right=this.getElementById(this.id+"_scrollX_right")),void 0!==this.colGroup&&null!=this.colGroup||(this.colGroup={},this.colGroup.bodyColList=this.body_table.getElementsByTagName("col"),this.hasFooter?this.colGroup.footerColList=this.foot_table.getElementsByTagName("col"):this.colGroup.footerColList=null);var t=0;if(this.options.scrollByColumn){var e=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;e>1?t=1+Math.round(e):e<1&&(t=1+Math.round(1/e))}var i=this.getFixedColumnLastIndex(),o=this.scrollX_right.scrollLeft,s=this.gridWidth-o-t-this.fixedWidth-1-this.fixedWidthRight,n=s;s=s>0?s:0;var l=this.options.fixedRightColumn>0;if(!l){if(this.head_table.style.width=s+"px",this.isWebKit){for(var h=[],d=this.defaultColCnt;d<this.hiddenList.length;d++)1==this.hiddenList[d]&&h.push(d-this.defaultColCnt);(A=s-this.colGroup.bodyColList.length-h.length-1)<0&&(A=0),this.body_table.style.width=A+"px",this.hasFooter&&(this.foot_table.style.width=A+"px")}else this.body_table.style.width=s+"px",this.hasFooter&&(this.foot_table.style.width=s+"px");this.hasFooter&&(this.foot_table.style.width=s+"px")}var c=[],u=[],p=0,g=-1,m=0;if(l||this.options.scrollByColumn||a.D.isIE(8)){var f=parseInt(document.getElementById(this.id+"_scrollY_div").style.width,10)-1;if(p=(m=this.resizeObj&&this.resizeObj.clientWidth?this.resizeObj.clientWidth:this.render.clientWidth)-1-this.fixedWidth-this.fixedWidthRight,a.D.isChrome()&&(p+=1),-1!=f&&(p-=f),l){this.options.scrollByColumn=!1;var b=m-1-f;b<this.gridWidth&&(this.head_table.style.width=m-1-f+"px",this.body_table.style.width=m-1-f+"px",this.hasFooter&&(this.foot_table.style.width=m-1-f+"px"))}}var y=this.getFixedRightColumnLastIndex(),v=l,w=-1;for(d=this.colWidthList.length-1;d>=y;d--)this.hiddenList[d]||(this.colGroup.bodyColList[d].style.width=this.colWidthList[d]+"px");for(d=y-1;d>=0;d--){var S=0,C=parseInt(this.colWidthList[d],10)||0;if(this.hiddenList[d]&&(C=0),l&&v)if(s>p+C)s-=C,C=0;else{var _=C;b<this.gridWidth&&(C-=s-p),s-=_,v=!1,w=d
}else s>C?s-=C:(s>0&&n<=p&&(g=d,this.options.scrollByColumn&&(S=s)),C=s,s=0),d<i&&!this.hiddenList[d]&&(C=parseInt(this.colWidthList[d],10)||0);var x=0,I=0;if(this.isIE6or7&&0!=C&&(1==this.hgap[this.options.headerTrClass+"_"+d]?0:1,x=1==this.hgap[this.options.bodyTrClass+"_"+d]?0:1,this.hasFooter&&(I=1==this.hgap[this.options.footerTrClass+"_"+d]?0:1)),a.D.isIE(8)&&0==this.defaultColCnt&&0==d&&0==C&&(C=1,g>=0&&(c[g]=c[g]-1,this.colGroup.bodyColList[g].style.width=c[g]+"px",this.hasFooter&&(u[g]=u[g]-1,this.colGroup.footerColList[g].style.width=u[g]+"px"))),this.options.scrollByColumn){var T=this.colWidthList[d];1==C&&a.D.isIE(8)&&0==this.defaultColCnt&&0==d&&(T=1),0==C&&(T=0),S>0&&(T=S),w===d&&(T=0),(0==T||1==T||T==this.colWidthList[d]||S>0||w===d)&&(this.colGroup.bodyColList[d].style.width=T-x+"px",c[d]=T-x,this.hasFooter&&(this.colGroup.footerColList[d].style.width=T-I+"px",u[d]=T-I))}else this.hiddenList[d]&&(C=0),this.colGroup.bodyColList[d].style.width=C-x+"px",c[d]=C-x,this.hasFooter&&(this.colGroup.footerColList[d].style.width=C-I+"px",u[d]=C-I)}f=this.getElementById(this.id+"_scrollY_div").offsetWidth;if(this.isWebKit&&-1==this.options.className.indexOf("w2gridViewItemTable")&&0===f&&"allColumn"===this.options.autoFit&&!this.options.autoFitMinWidth){var k=this.render.getBoundingClientRect().width,D=!0;this.head_table.getBoundingClientRect().width<=0&&(D=!1);for(d=y-1;d>=0;d--){var L=k-(D?this.head_table.getBoundingClientRect().width:this.body_table.getBoundingClientRect().width),W=1;if(!(L>=0))break;if(!this.hiddenList[d]){if(L<2)break;var A=parseInt(this.colGroup.bodyColList[d].style.width);this.colGroup.bodyColList[d].style.width=A+W+"px",c[d]=A+W,(L=k-(D?this.head_table.getBoundingClientRect().width:this.body_table.getBoundingClientRect().width))<1&&(W=-1,this.colGroup.bodyColList[d].style.width=A+W+"px",c[d]=A+W),this.hasFooter&&(this.colGroup.footerColList[d].style.width=A+W+"px",u[d]=A+W)}}}this.setColIndexInfo(c,u),this._setGridBorder(),(this.groupbyZoneStatus.groupbyZoneRender||this.options.useFilterList)&&(this.resizeGroupbyZone(),this.resizeGridList())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.redrawTable=function(){try{if(this.isWebKit)if("native"===this.options.drawType){var t=this.colGroup.bodyColList[0],e=t.offsetWidth,i=t.id;t.style.width=e+1+"px",a.D.setTimeout((function(){document.getElementById(i).style.width=e+"px"}),{key:this.id+"_redrawTable",delay:20})}else{null==this._redrawTable_transform&&(this._redrawTable_transform=this.body_table.style.webkitTransform),this.body_table.style.webkitTransform="rotateZ(0deg)";var o=this.uuid;a.D.setTimeout((function(){var t=WebSquare.idCache[o];t.body_table.style.webkitTransform=t._redrawTable_transform,delete t._redrawTable_transform}),{key:this.id+"_redrawTable",delay:20})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setColIndexInfo=function(t,e){try{if(void 0===this.colGroup||null==this.colGroup){this.colGroup={},this.colGroup.bodyColList=this.getElementById(this.id+"_body_table").getElementsByTagName("col");var i=this.getElementById(this.id+"_foot_table");this.colGroup.footerColList=i?i.getElementsByTagName("col"):null}this.colIndexInfo={};var o=this.getVisibleColRange(this.colGroup.bodyColList,t),s=this.getVisibleTds(this.colIndexes.bodyColInfo,o);if(this.colIndexInfo.body={colInfo:this.colIndexes.bodyColInfo,visibleTds:s.visibleTds,invisibleTds:s.invisibleTds,visibilityArr:s.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex},this.isIE6or7){var a=this.getVisibleTds(this.colIndexes.headerColInfo,o);if(this.colIndexInfo.header={colInfo:this.colIndexes.headerColInfo,visibleTds:a.visibleTds,invisibleTds:a.invisibleTds,visibilityArr:a.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex},this.hasFooter){var n=this.getVisibleColRange(this.colGroup.footerColList,e),l=this.getVisibleTds(this.colIndexes.footerColInfo,n);this.colIndexInfo.footer={colInfo:this.colIndexes.footerColInfo,visibleTds:l.visibleTds,
invisibleTds:l.invisibleTds,visibilityArr:l.visibilityArr,firstCoveredColIndex:n.firstCoveredColIndex}}if(this.hasSubtotal)for(var h in this.colIndexInfo.subtotal={},this.subtotalRowHash){var d=this.getVisibleTds(this.colIndexes.subtotalColInfo[h],o);this.colIndexInfo.subtotal[h]={colInfo:this.colIndexes.subtotalColInfo[h],visibleTds:d.visibleTds,invisibleTds:d.invisibleTds,visibilityArr:d.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex}}}this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideInvisibleTds=(h=!0,function(){try{if(h){if(h=!1,this.groupbyStatus.grouped){this.options.lazyDrawHiddenColumn=!1;var t=WebSquare.language.getMessage("Grid_warning6",this.id)||this.id+" groupby가 활성화되어서 lazyDrawHiddenColumn 속성이 비활성화 되었습니다.";return void $l(t)}for(var e=this.defaultColCnt;e<this.colIndexes.bodyColInfo.rowSpanArr.length;e++)if(this.colIndexes.bodyColInfo.rowSpanArr[e]>=2){this.options.lazyDrawHiddenColumn=!1;var i=WebSquare.language.getMessage("Grid_warning7",this.id)||this.id+" : rowSpan이 있기 때문에 lazyDrawHiddenColumn 속성이 비활성화 되었습니다.";return void $l(i)}}var o=this.colIndexInfo.body.visibilityArr,s=[];for(e=0;e<this.drawedRowLength;e++)if("none"!=this.dataRowList[e].style.display)for(var a=0,n=0,l=this.defaultColCnt;l<o.length;l++){this.colIndexes.bodyColInfo.trIndexArr[l]>a&&(n=0,a++);var d=this._getColumnMoveIndex(l-this.defaultColCnt),c=this.data_td_list[d+e*this.oneRowDataLength],u=this.colIndexes.bodyColInfo.colSpanArr[l]||1;o[l]?(this.initVisibilityArr[l]||(this.drawCellData(e,e+this.rowIndex,d),this.applyCellStyleOptions(e+this.rowIndex,d),s[l]=!0),c.style.display="",u+n>1?(c.setAttribute("colSpan",u+n),c.setAttribute("data-lazydrawtd","true")):(c.removeAttribute("colSpan"),c.removeAttribute("data-lazydrawtd")),n=0):(c.style.display="none",n+=u)}for(e=0;e<s.length;e++)s[e]&&(this.initVisibilityArr[e]=!0)}catch(t){r.w.printStackTrace(t,null,this)}}),u.prototype.getVisibleColRange=function(t,e){try{for(var i=this.render.clientWidth,o=[],s=0,a=-1,n=-1,l=e?e.length:t.length,h=0;h<l;h++){var d=e?e[h]:parseInt(t[h].style.width);if((s+=d)>i){a>=0?(d<3?o.push([a,h]):o.push([a,h+1]),n=h+1,a=-1):(o.push([h,h+1]),n=h+1);break}d<3?-1!=a&&(o.push([a,h]),a=-1):-1==a&&(a=h)}return-1!=a&&a<h&&o.push([a,h]),o.firstCoveredColIndex=-1!==n?n:l,-1==n&&(n=l),o}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getVisibleTds=function(t,e){try{for(var i=[],o=[],s=[],a=0;a<t.colIndexArr.length;a++){for(var n=t.colIndexArr[a],l=t.colSpanArr[a]||1,h=0;h<e.length;h++)if(e[h][0]<=n&&n<e[h][1]||e[h][0]<=n+l-1&&n+l-1<e[h][1]||n<=e[h][0]&&e[h][0]<n+l||n<=e[h][1]-1&&e[h][1]-1<n+l){i[i.length]=a,s[s.length]=!0;break}h==e.length&&(o[o.length]=a,s[s.length]=!1)}return{visibleTds:i,invisibleTds:o,visibilityArr:s}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setGridBorder=function(){try{var t=a.D.getDataPrefix("colIndex");if(a.D.isIE(8)){if(0==this.defaultColCnt){var e=this.colGroup.bodyColList[0].style.width,i="1px"==e||"0px"==e?"0px":"";if(!this.leftMostTds){this.leftMostTds=[];for(var o=this.getElementById(this.id+"_head_table").getElementsByTagName("th"),s=this.hasFooter?this.getElementById(this.id+"_foot_table").getElementsByTagName("td"):[],n=0;n<o.length;n++)0==o[n].getAttribute(t)&&this.leftMostTds.push(o[n]);for(n=0;n<s.length;n++)0==s[n].getAttribute(t)&&this.leftMostTds.push(s[n])}for(n=0;n<this.leftMostTds.length;n++)this.leftMostTds[n].style.borderLeftWidth=i,this.leftMostTds[n].style.borderRightWidth=i;if(this.all_data_td_list.length>0){if(!this.leftMostIndexArr){this.leftMostIndexArr=[];for(n=0;n<this.oneRowDataLength;n++)0==this.all_data_td_list[n].getAttribute(t)&&this.leftMostIndexArr.push(n)}for(n=0;n<this.leftMostIndexArr.length;n++)for(var l=0;l<this.drawedRowLength;l++){(h=this.all_data_td_list[this.leftMostIndexArr[n]+l*this.oneRowDataLength]).style.borderLeftWidth=i,h.style.borderRightWidth=i}}
if(this.hasSubtotal&&this.drawedSubtotal)for(n=0;n<this.drawedSubtotal.length;n++)for(l=0;l<this.drawedSubtotal[n].length;l++){var h;0==(h=this.drawedSubtotal[n][l].cells[0]).cellIndex&&(h.style.borderLeftWidth=i,h.style.borderRightWidth=i)}}if(!this._setGridBorderNoRefresh){var d=(u=this.getElementById(this.id+"_dataLayer")).style.display,c=document.activeElement;u.style.display="none",u.offsetHeight,u.style.display=d,document.activeElement!=c&&this.hasClass(c,this.options.bodyTdClass)&&c.focus()}}if(this.isIE6or7&&(this.colIndexInfo||this.setColIndexInfo(),this.colGroup&&(this._setBorderFolding(this.all_data_td_list,this.colIndexInfo.body,this.drawedRowLength),this.headerTds||(this.headerTds=this.getElementById(this.id+"_head_table").getElementsByTagName("th")),this._setBorderFolding(this.headerTds,this.colIndexInfo.header)),this.hasFooter&&(this.footerTds||(this.footerTds=this.getElementById(this.id+"_foot_table").getElementsByTagName("td")),this._setBorderFolding(this.footerTds,this.colIndexInfo.footer)),this.hasSubtotal&&this._setSubtotalBorder(),!this._setGridBorderNoRefresh)){var u,p=(u=this.getElementById(this.id+"_dataLayer")).style.filter;c=document.activeElement;u.style.filter="alpha(opacity=99)",u.style.filter=p,document.activeElement!=c&&this.hasClass(c,this.options.bodyTdClass)&&c.focus()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setBorderFolding=function(t,e,i){try{if(this.groupbyStatus.grouped)return;if(!t||0==i)return;i=i||1;for(var o=e.firstCoveredColIndex,s=this.oneRowDataLength+this.defaultColCnt,a=0,n=e.visibilityArr.length;a<n;a++){var l=e.colInfo.colIndexArr[a],h=e.visibilityArr[a],d="0px"===t[a].style.borderWidth;if(i>1&&(d=d||"0px"===t[a+s].style.borderWidth),l<o&&!h&&!d)for(var c=0;c<i;c++)t[a+c*s].style.borderWidth="0px";else if((l>=o||h)&&d)for(c=0;c<i;c++)t[a+c*s].style.borderWidth="",t[a+c*s].style.borderStyle=""}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setSubtotalBorder=function(){try{if(!this.drawedSubtotal)return;for(var t={},e=0;e<this.drawedSubtotal.length;e++){var i=this.drawedSubtotal[e];if(!t[i.targetID]){t[i.targetID]=!0;for(var o=this.colIndexInfo.subtotal[i.targetID],s=o.firstCoveredColIndex,a=0,n=0;n<i.length;n++)for(var l=i[n],h=0;h<l.cells.length;h++,a++){var d=o.colInfo.colIndexArr[a],c=o.visibilityArr[a],u="0px"===l.cells[h].style.borderWidth;if(d<s&&!c&&!u)for(var p=e;p<this.drawedSubtotal.length;p++)this.drawedSubtotal[p].targetID==i.targetID&&(this.drawedSubtotal[p][n].cells[h].style.borderWidth="0px");else if((d>=s||c)&&u)for(p=e;p<this.drawedSubtotal.length;p++)this.drawedSubtotal[p].targetID==i.targetID&&(this.drawedSubtotal[p][n].cells[h].style.borderWidth="")}}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleWheel=function(t){try{if(this.options.groupbyZone||this.options.useFilterList)for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2grid_groupbyZone_scrollView")||e.match("w2grid_customFilter_scrollView"))return void d.B.stopPropagation(t);var i=d.B.getMouseWheelDelta(t),o=t.wheelDeltaY,s=t.wheelDeltaX,n=Math.floor(this.options.wheelRows*Math.abs(i));if("wheelDeltaX"in t&&Math.abs(s)>Math.abs(o))return this.getElementById(this.id+"_scrollX_right").scrollLeft-=s,void d.B.stopEvent(t);var l=this.getElementById(this.id+"_scrollY_div");if(this.scrollEvent=!0,i>0){if(0==l.scrollTop)return void(this.options.wheelStop&&d.B.stopEvent(t));l.scrollTop=this.oneRowScrollHeight*(this._getScrollRowIndex(this.rowIndex)-n)}else if(i<0){var h=this.getElementById(this.id+"_scrollY_div"),c=this._getEpsilon(),u=h.scrollHeight-h.clientHeight,p=Math.min(Math.round(h.scrollTop)+c,u);if(this.rowIndex<0||0==h.clientHeight||p==u)return void(this.options.wheelStop&&d.B.stopEvent(t));l.scrollTop=this.oneRowScrollHeight*(this._getScrollRowIndex(this.rowIndex)+n)}a.D.isMobile()&&this.moveYScroll(0),d.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleColumnResize=function(t){try{if(2==t.button)return
;var e,i,o,s,n,l,h=a.D.getDataPrefix("colIndex"),c=a.D.getDataPrefix("header_id");if("drag"!==this.resizeStatus){for(var u=this.event.getTargetIterator(t,this.render),p=null;u.next();){var g=u.getElement();if("TH"!=g.tagName&&"TD"!=g.tagName||(p=g),"NOBR"==g.tagName||"SPAN"==g.tagName&&g.className.indexOf("w2grid_span")>-1){p=null;break}}if(null!=p){e=d.B.getMouseX(t),i=WebSquare.style.getAbsoluteLeft(p),o=parseInt(p.getAttribute("colSpan")||1,10),s=parseInt(p.getAttribute(h),0),n=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;var m=WebSquare.style.getComputedStyle(document.body,"zoom");1==n&&m&&(n=parseFloat(m)),e/=n,l=i;var f=s,b=p.getAttribute(c);"_headerRowNumber"!=b&&"_headerRowStatus"!=b&&(f=this._getRealColIndex("head",b)+this.defaultColCnt),f=this._getMouseColumnIndex({colIndex:s,offsetX:e,offsetLeft:l,colSpan:o}),"col-resize"===this.resizeStatus&&!1===this.isColumnResizable(f)&&(this.resizeStatus="init")}}switch(this.resizeStatus){case"init":this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor="";break;case"col-resize":this.getElementById(this.id+"_head_table").style.cursor="col-resize",this.getElementById(this.id+"_head_table").cursor="col-resize";break;case"drag":return this.resizeStatus="drag",this.handleResizeLine(t),void(a.D.isMobile()&&d.B.stopEvent(t))}if(null!=this.columnMoveTarget)return;if(null==p)return void(this.resizeStatus="init");if(e-l<(v=.3*this.colWidthList[s]>10?10:parseInt(.3*this.colWidthList[s],10))&&0!=s){if("init"===this.resizeStatus||"col-resize"===this.resizeStatus)return void(this.isColumnResizable(s)&&(this.resizeStatus="col-resize"))}else this.resizeStatus="drag"!==this.resizeStatus?"init":this.resizeStatus;if("_headerRowNumber"!=b&&"_headerRowStatus"!=b)for(var y=0;y<o;y++){if(1==this.options.columnMove){p.getAttribute(c);s=this._getRealColIndex("head",b)+this.defaultColCnt}var v,w=parseInt(this.colGroup.bodyColList[s+y].style.width,10);if((l+=w)-(v=.3*w>10?10:parseInt(.3*w,10))<e&&e<l+v)return void("init"!==this.resizeStatus&&"col-resize"!==this.resizeStatus||this.isColumnResizable(s)&&(this.resizeStatus="col-resize"));this.resizeStatus="drag"!==this.resizeStatus?"init":this.resizeStatus}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.doColumnResize=function(t){try{if(2==t.button)return;if(a.D.isMobile()&&this.handleColumnResize(t),!this.options.columnMove&&!this.options.groupbyZone&&"init"==this.resizeStatus||"drag"==this.resizeStatus)return;var e=this.event.getTargetIterator(t,this.render),i=null;for(this.resize_colIndex=null,this.resize_colId=null;e.next();)e.match(this.options.headerTdClass)&&(i=e.getElement());if(null==i)return;this.startResizeX=d.B.getScreenX(t);var o=a.D.getDataPrefix("header_id"),s=a.D.getDataPrefix("colindex"),n=a.D.getDataPrefix("value"),l=i.getAttribute(o);if("col-resize"==this.resizeStatus){d.B.preventDefault(t),this.resizeStarted=!0,this.resizeStatus="drag";var h=d.B.getMouseX(t),c=WebSquare.style.getAbsoluteLeft(i),u=parseInt(i.getAttribute("colSpan")||1,10),p=this._getRealColIndex("head",l)+this.defaultColCnt;"_headerRowNumber"!=l&&"_headerRowStatus"!=l||(p=parseInt(i.getAttribute(s),10));var g=c;this.resizeColIndex=this._getMouseColumnIndex({colIndex:p,offsetX:h,offsetLeft:g,colSpan:u})}else if(this.options.columnMove&&(0===this.getHeaderRowIndex(l)||this.options.allColumnMove)){this.resizeStatus="drag";var m=null,f=this.htmlInfo.head.rowArr[0],b=!0;if(0!=parseInt(this.options.stopColumnMoveRow,10))for(var y=0;y<f.length;y++)if(f[y].id==l){b=!1;break}if(this.options.allColumnMove)for(y=1;y<this.htmlInfo.head.rowArr.length;y++)if(parseInt(this.options.stopColumnMoveRow,10)!=y)for(var v=0;v<this.htmlInfo.head.rowArr[y].length;v++)if(this.htmlInfo.head.rowArr[y][v].id==l){b=!1,m=l,l=this.htmlInfo.head.rowArr[0][v].id;break}if(b)return;this.resizeStauts="init",
"_headerRowNumber"!=l&&"_headerRowStatus"!=l&&(null!=m&&(this.realColumnMoveTarget=this.getHeaderIndex(m)),this.columnMoveTarget=this.getHeaderIndex(l),this.columnMoveTargetId=l,this.getElementById(this.id+"_head_table").style.cursor="pointer",this.addClass("w2noselect"),a.D.emptySelection())}else if(this.options.groupbyZone&&(this.resizeStatus="drag","_headerRowNumber"!=l&&"_headerRowStatus"!=l)){if(this.groupbyZoneStatus.clickedHeaderInfo={},this.groupbyZoneStatus.clickedHeaderInfo.index=this._getRealHeaderColIndex(l),this.groupbyZoneStatus.clickedHeaderInfo.value=i.getAttribute(n),this.groupbyZoneStatus.clickedHeaderInfo.headerID=l,null==this.groupbyStatus.sortIndexArr||null==this.groupbyStatus.sortOrderArr||this.options.groupbyFilterIcon)this.showGroupbyHeaderGhost(t,l);else{this.resizeStatus="init";var w=!1,S={};S.render=i,S.parentRender=this.render.getElementsByTagName("div")[0],S.headerID=i.getAttribute(o),S.headerIndex=this.getHeaderIndex(S.headerID);for(y=0;y<this.groupbyStatus.sortIndexArr.length;y++)if(S.headerIndex==this.groupbyStatus.sortIndexArr[y]){w=!0;break}w?this.groupbyFilterList?this.toggleGroupbyFilterList(S):this.createGroupbyFilterList(S):(this.hideGroupbyFilterList(),this.showGroupbyHeaderGhost(t,l))}this.getElementById(this.id+"_head_table").style.cursor="pointer",this.addClass("w2noselect"),a.D.emptySelection()}this.handleResizeLine(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.endColumnResize=function(t){try{if(2==t.button)return;if("drag"!==this.resizeStatus&&(this.resizeStatus="init"),this.options.columnMove&&null!=this.columnMoveTarget){var e=this.event.getTargetIterator(t,this.render),i=null;if(this.event.isMe(t,this.render))for(;e.next();)e.match(this.options.headerTdClass)&&(e.match(this.options.headerTdClass+"_rowNumber")||e.match(this.options.headerTdClass+"_rowStatus")||(i=e.getElement()),e.stop());var o=this.resize_colId;if(null!=i){var s=a.D.getDataPrefix("header_id");o=i.getAttribute(s)||this.resize_colId}this.moveColumnByHeaderId(this.columnMoveTargetId,o),this.resizeStatus="init",this.resizeStarted=!1,this.columnMoveTarget=null,this.realColumnMoveTarget=null,this.handleResizeLine(t),a.D.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}else if(null!=this.groupbyZoneStatus.clickedHeaderInfo){for(e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2grid_groupbyZone")){e.getElement(),null==this.groupbyStatus.sortIndexArr&&(this.groupbyStatus.sortIndexArr=[]),null==this.groupbyStatus.sortOrderArr&&(this.groupbyStatus.sortOrderArr=[]);for(var n=0;n<this.groupbyStatus.sortIndexArr.length;n++)if(this.groupbyZoneStatus.clickedHeaderInfo.index==this.groupbyStatus.sortIndexArr[n])return this.groupbyZoneStatus.clickedHeaderInfo=null,void(this.resizeStarted=!1);if(-1!=this.options.groupbyMaxCount&&this.options.groupbyMaxCount<=this.groupbyStatus.sortIndexArr.length)return c.k.printLog("groupby max column count has been exceeded.["+this.id+"]"),this.groupbyZoneStatus.clickedHeaderInfo=null,void(this.resizeStarted=!1);this.groupbyStatus.sortIndexArr.push(this.groupbyZoneStatus.clickedHeaderInfo.index),this.groupbyStatus.sortOrderArr.push(1);var l={};if(l.sortIndex=this.groupbyStatus.sortIndexArr,l.sortOrder=this.groupbyStatus.sortOrderArr,null!=this.groupbyStatus.filter&&(l.filter=this.groupbyStatus.filter),!1===d.B.fireEvent(this,"ongroupby",l)){var h=this.getColCnt()+this.defaultColCnt;l.rowNumHeader={colSpan:h,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' 건 ] ' ",align:"left"},l.footerVisible=!1,l.rowNumFooter={colSpan:h},this.groupby(l)}this.groupbyFilterList&&this.hideGroupbyFilterList();break}this.groupbyZoneStatus.clickedHeaderInfo=null,this.resizeStatus="init",this.handleResizeLine(t),a.D.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}else if("drag"===this.resizeStatus){this.endResizeX=d.B.getScreenX(t)
;for(var u=this.resizeColIndex;1==this.hiddenList[u]&&!(--u<0););if(u>=0&&this.isColumnResizable(u)){var p=this.colWidthList[u],g=this.getElementById(this.id+"_dataLayer").offsetWidth,m=p+this.endResizeX-this.startResizeX,f=0;if(this.options.fixedColumn>0){var b=this.getFixedColumnLastIndex();if(b>=u){for(n=0;n<b;n++)this.hiddenList[n]||(f+=n==u?m:this.colWidthList[n]);var y=30;null==this.colWidthList[b]&&(y=1),f>g-y&&(m=m-(f-g)-y-1)}}var v=this.cellInfoHash[this.getColumnID(this.columnOrder[u-this.defaultColCnt])];m=v&&m<v.options.minWidth?v.options.minWidth:m,this.setColumnWidth(u,m,!0),0!=Math.abs(p-m)&&d.B.fireEvent(this,"onaftercolumnresize",u-this.defaultColCnt,p,m)}this.resizeStatus="init",this.resizeStarted=!1,this.columnMoveTarget=null,this.realColumnMoveTarget=null,this.handleResizeLine(t),a.D.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleResizeLine=function(t){try{var e=this.getElementById(this.id+"_resize_line");if(this.resize_ghost||(this.resize_ghost=document.createElement("div"),this.resize_ghost.className="w2grid_columnMove_ghost",this.resize_ghost.style.display="none",document.body.appendChild(this.resize_ghost),this.resize_arrow=document.createElement("div"),this.resize_arrow.className="w2grid_columnMove_arrow",this.resize_arrow.style.display="none",document.body.appendChild(this.resize_arrow)),this.options.columnMove&&null!=this.columnMoveTarget){for(var i=this.event.getTargetIterator(t,this.render),o=null;i.next();)i.match(this.options.headerTdClass)&&(o=i.getElement());if(null!=o){this.columnBlock||this.createBlockedHeaderInfo();var s=this.columnMoveTargetId,n=this.getHeaderColIndex(s);n=this.columnBlock.hash[n-this.defaultColCnt],s=this.getHeaderColID(n+this.defaultColCnt);var l=a.D.getDataPrefix("header_id"),h=o.getAttribute(l),c=this.getHeaderColIndex(h);c=this.columnBlock.hash[c-this.defaultColCnt],h=this.getHeaderColID(c+this.defaultColCnt);var u=this.getHeaderIndex(s),p=this.getHeaderIndex(h);if(u<p)for(var g=this.columnBlock.info[c],m=g.length-1;m>=0;m--){var f=this.getHeaderColID(g[m]+this.defaultColCnt,{firstRow:!0});if(f){h=f,p=this.getHeaderIndex(h);break}}var b=this._getRealColIndex("head",h),y=this.htmlInfo.head.rowArr[0],v=!0;for(m=0;m<y.length;m++)if(y[m].id==h){v=!1;break}if(this.options.allColumnMove)for(m=1;m<this.htmlInfo.head.rowArr.length;m++)for(var w=0;w<this.htmlInfo.head.rowArr[m].length;w++)if(this.htmlInfo.head.rowArr[m][w].id==h){v=!1,h=this.htmlInfo.head.rowArr[0][w].id,p=this.getHeaderIndex(h),b=this.colMoveHeaderIndexMap[h];break}if(v)return;if("_headerRowNumber"==h||"_headerRowStatus"==h||u==p)e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none";else{if(this.options.fixedColumnNoMove&&(this.getFixedColumnLastIndex()>u+this.defaultColCnt||this.getFixedColumnLastIndex()>p+this.defaultColCnt))return e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none",void(!1===this.isColumnResizable(this.resizeColIndex)&&(this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor=""));this.resize_colIndex=p,this.resize_colId=h;var S=null;for(m=0;m<this.htmlInfo.body.rowArr.length;m++){for(w=0;w<this.htmlInfo.body.rowArr[m].length;w++)if(this.htmlInfo.body.rowArr[m][w]["@col"]==b){S=this.bodyIdColIndexMap[this.htmlInfo.body.rowArr[m][w].col_id];break}if(null!==S)break}var C=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),_=WebSquare.style.getAbsoluteTop(this.render),x=WebSquare.style.getAbsoluteLeft(this.render),I=C[p+this.defaultColCnt],T=I.offsetLeft,k=I.offsetWidth,D=T+(u<p?k:0);null!=this.realColumnMoveTarget?this.resize_ghost.innerHTML=C[this.realColumnMoveTarget+this.defaultColCnt].innerHTML:this.resize_ghost.innerHTML=C[this.columnMoveTarget+this.defaultColCnt].innerHTML,
this.resize_ghost.style.display="block",this.resize_ghost.style.top=_+C[this.columnMoveTarget].offsetHeight+5+"px",this.resize_ghost.style.left=x+D+5+"px",!this.resize_ghost.firstChild||!this.resize_ghost.firstChild.tagName||"NOBR"===this.resize_ghost.firstChild.tagName.toUpperCase()||"SPAN"==this.resize_ghost.firstChild.tagName.toUpperCase()&&this.resize_ghost.firstChild.className.indexOf("w2grid_span")>-1?this.resize_ghost.style.width="auto":this.resize_ghost.style.width=k+"px",this.resize_arrow.style.display="block",this.resize_arrow.style.top=_-this.resize_arrow.offsetHeight+"px",this.resize_arrow.style.left=x+D-parseInt(this.resize_arrow.offsetWidth/2,10)+1+"px",e.style.display="block",e.style.zIndex=9999,e.style.border="1px solid #3a3f44",e.style.top=0,e.style.left=D+"px",e.style.height=this.render.offsetHeight+"px",this.getElementById(this.id+"foot_table")&&(e.style.height=this.render.offsetHeight-this.getElementById(this.id+"_foot_table").offsetHeight-this.getElementById(this.id+"_scrollX_div").offsetHeight+"px"),a.D.emptySelection()}}}else if(null!=this.groupbyZoneStatus.clickedHeaderInfo)e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none";else if("drag"==this.resizeStatus&&this.resizeStarted&&this.isColumnResizable(this.resizeColIndex)){e.style.cssText="position:absolute;top:10px; bottom:0px;border:0px dashed #222222; border-left-width:1px; cursor:col-resize;",e.style.display="block",e.style.zIndex=100,e.style.top=0,e.style.height=this.render.offsetHeight+"px",this.getElementById(this.id+"foot_table")&&(e.style.height=this.render.offsetHeight-this.getElementById(this.id+"_foot_table").offsetHeight-this.getElementById(this.id+"_scrollX_div").offsetHeight+"px");var L=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,W=WebSquare.style.getComputedStyle(document.body,"zoom");1==L&&W&&(L=parseFloat(W)),e.style.left=(d.B.getMouseX(t)-WebSquare.style.getAbsoluteLeft(this.render)*L)/L+"px",this.resize_ghost.style.display="none"}else e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none",!1===this.isColumnResizable(this.resizeColIndex)&&(this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor="")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleRowResize=function(t){try{if("started"==WebSquare.dragdrop.gDragManager.status)return void(this.rowResizeTarget&&(this.rowResizeTarget.style.cursor="",this.rowResizeTarget.cursor=""));if(this.handleRowResizeLine(t),null!=this.rowMoveTarget)return;for(var e=this.event.getTargetIterator(t,this.render),i=null;e.next();){var o=e.getElement();if("TD"==o.tagName&&(i=o),"TH"==o.tagName){i=null;break}}if(null==i)return;i.style.cursor="",i.cursor="";var s=d.B.getMouseY(t),n=WebSquare.style.getAbsoluteTop(i),l=a.D.getDataPrefix("tdIndex"),h=parseInt(i.getAttribute(l),0),c=parseInt(h/this.realRowDataLength)+this.rowIndex;if(s-n<10&&0!=c)return i.style.cursor="row-resize",i.cursor="row-resize",this.rowResizeTarget&&this.rowResizeTarget!=i&&(this.rowResizeTarget.style.cursor="",this.rowResizeTarget.cursor=""),void(this.rowResizeTarget=i)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.doRowResize=function(t){try{if("started"==WebSquare.dragdrop.gDragManager.status)return;var e=this.event.getTargetIterator(t,this.render),i=null;for(this.resize_rowIndex=null;e.next();)e.match(this.options.bodyTdClass)&&(i=e.getElement());if(null==i)return;if(this.startResizeY=d.B.getScreenY(t),"row-resize"==i.cursor){d.B.preventDefault(t),this.rowResizeStarted=!0,this.rowResizeTarget=i;var o=a.D.getDataPrefix("tdIndex"),s=parseInt(i.getAttribute(o),0),n=parseInt(s/this.realRowDataLength)+this.rowIndex;this.resizeRowIndex=n-1}this.handleRowResizeLine(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.endRowResize=function(t){try{if(this.rowResizeStarted){this.endResizeY=d.B.getScreenY(t);var e=this.resizeRowIndex||0
;if(e>=0){var i=this.rowResizeTarget.offsetHeight+this.endResizeY-this.startResizeY;i=i<20?20:i,this.rowStyleArr[e]="rowResizeStyle_"+e,this.rowStyleValueObj[this.rowStyleArr[e]]||(this.rowStyleValueObj[this.rowStyleArr[e]]={}),this.rowStyleValueObj[this.rowStyleArr[e]].style="height:"+i+"px;",this.applyRowStyleOptions(e),this.drawData(this.rowIndex,e+1,"async")}if(this.rowResizeStarted=!1,this.rowResized=!0,this.rowMoveTarget=null,this.handleRowResizeLine(t),window.getSelection)window.getSelection().removeAllRanges();else if(document.selection)try{document.selection.empty()}catch(t){}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleRowResizeLine=function(t){try{var e=this.getElementById(this.id+"_resize_line");this.resize_ghost||(this.resize_ghost=document.createElement("div"),this.resize_ghost.className="w2grid_columnMove_ghost",this.resize_ghost.style.display="none",document.body.appendChild(this.resize_ghost),this.resize_arrow=document.createElement("div"),this.resize_arrow.className="w2grid_columnMove_arrow",this.resize_arrow.style.display="none",document.body.appendChild(this.resize_arrow)),this.rowResizeStarted?(e.style.cssText="position:absolute;left:10px;right:0px;border:0px dashed #222222; border-top-width:1px;",e.style.display="block",e.style.zIndex=100,e.style.top=d.B.getMouseY(t)-WebSquare.style.getAbsoluteTop(this.render)+"px",e.style.width=this.render.offsetWidth+"px",e.style.left=0,this.resize_ghost.style.display="none"):(e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setColumnWidth=function(t,e){try{if(this.autoFitColWidthList=null,this.hiddenList[t])this.colWidthList[t]=e;else{var i=isNaN(this.colWidthList[t])?0:this.colWidthList[t];this.colWidthList[t]=e,this.gridWidth+=e-i,this.arrangeOverflowXScroll(),this.setOverflowX(),this.handleScrollX();var o=t-this.defaultColCnt;if(o>=0){var s=this.getCellInfo(o);if("textarea"==s.options.inputType)this.drawColumnData(o);else if(("text"==s.options.inputType||"secret"==s.options.inputType||"calendar"==s.options.inputType)&&s.options.embeddedInput){for(var a=0,n=0;n<=o;n++)if((a+=(s=this.getCellInfo(n)).options.colSpan-0)-1==o){o=n;break}this.embeddedWidthObj[o]&&(this.embeddedWidthObj[o].isChanged=!0),this.drawColumnData(o)}}this.handlerResize_drawInitializer()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setColumnVisible=function(t,e){try{e=a.D.getBoolean(e);var i=this.getCellInfo(t);if(null==(t=this.getColumnIndex(t)))return;var o=this._getRealColIndex("body",i.options.col_id)+this.defaultColCnt;if(this.hiddenList[o]!=e)return;for(var n=0;n<this.getColumnCount();n++){var l=this.getCellInfo(n);"textarea"==l.options.inputType&&"all"==l.options.displayType&&(this.setScrollTop(0),this.setScrollLeft(0))}if(this.options.fixedColumn>0&&e&&this.options.fixedColumn>t){var h=0,d=this.getFixedColumnLastIndex();for(n=0;n<d;n++)this.hiddenList[n]&&n-this.defaultColCnt!=t||(h+=this.colWidthList[n]);if(h>this.getElementById(this.id+"_dataLayer").offsetWidth-30)return void WebSquare.logger.printLog(this.id+" setColumnVisible error : not enough space to show the column.  ")}for(n=0;n<i.options.colSpan;n++)this.hiddenList[o+n]=!e;this.gridWidth=0;for(n=0;n<this.colWidthList.length;n++)this.hiddenList[n]||(this.gridWidth+=this.colWidthList[n]);if(0===this.render.offsetHeight&&0===this.render.offsetWidth&&(this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),this.delayedDraw({rowIndex:-1==this.rowIndex?0:this.rowIndex})),""!=this.options.hiddenClass||""!=i.options.hiddenClass){this.drawData(this.rowIndex,0);var c=this.getColumnID(t),u=this.options.hiddenClass;""!=i.options.hiddenClass&&(u=i.options.hiddenClass);var p=null!=this.bodyToHeaderRelation[c]?this.getHeaderLayer(this.bodyToHeaderRelation[c]):null
;e?null!=p&&this.hasClass(p,u)&&this.removeClass(p,u):null==p||this.hasClass(p,u)||this.addClass(p,u)}if(this.options.lazyDrawHiddenColumn&&e&&this.initVisibilityArr&&!this.initVisibilityArr[o]){var g=this.colIndexInfo.body.colInfo.colIndexArr;for(n=0;n<g.length;n++)if(g[n]==o)for(var m=0;m<=this.lastIndex;m++)this.drawCellData(m,m+this.rowIndex,n-this.defaultColCnt),this.applyCellStyleOptions(m+this.rowIndex,n-this.defaultColCnt);this.initVisibilityArr[o]=!0}"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")&&this.setAdaptiveColumnVisible(o,e),s.v.setTimer((function(){try{this.arrangeOverflowXScroll(),this.options.groupbyZone&&this.options.groupbyFilterBox?this.handlerResize_drawInitializer():this.setOverflowX(),this.handleScrollX(),(this.options.autoFit||this.autofitColumn)&&this._setAutoFit(),e&&this._setRedrawTextAreaColumn()}catch(t){r.w.printStackTrace(t,null,this)}}),{key:this.id+"_setColumnVisible",caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setRowVisible=function(t,e,i){try{if((t=parseInt(t,10))<0||t>=this.getTotalRow()||isNaN(t))return void c.k.printLog(this.id+" setRowVisible error : invalid rowIndex "+t);var o=a.D.getBoolean(e);if(this.hiddenRowObj.row[t]===!o||null==this.hiddenRowObj.row[t]&&!0===o)return;this.hiddenRowObj.row[t]=!o,this.hiddenRowObj.init=!0;var s=this.delayedDraw({rowIndex:Math.max(this.rowIndex,0)});if(!1===o?(this.hiddenRowObj.length++,"all"===this.options.visibleRowNum||s||this.hiddenRowObj.extraRow<this.hiddenRowObj.length&&this._addHiddenRow(this.drawedRowLength+this.hiddenRowObj.length-1)):(delete this.hiddenRowObj.row[t],this.hiddenRowObj.length--),s)return;a.D.setTimeout((function(){this.lastTopRowIndex=null,this.initHeightCompleted=!1;var t=this.getDataLength();if(t-this.hiddenRowObj.length<=this.lastIndex+1&&0!==this.rowIndex)return this.bScrollY=0,this.setScrollTop(0),void this.drawData(0);var e=t-this._getVisibleLastIndex(this.lastIndex+1);if(e<this.rowIndex){var i=this.getLastFocusedCell();return this.removeFocusedCell(),this.rowIndex=e,e<this.bScrollTop&&(this.bScrollTop=e),this.setScrollYHeight({restRowCnt:this._getScrollRowIndex(e),skipScrollEnd:!0}),this.drawData(e),void(i.focusedRowIndex>-1&&null!=i.focusedColIndex&&!0===this.getRowVisible(i.focusedRowIndex)&&this.setFocusedCell(i.focusedRowIndex,i.focusedColIndex))}this._applyRowVisible({applyStyle:!0,refreshColumn:!0}),this.setScrollYHeight(),this.dynamicMergeHTML(),this._setRedrawTextAreaColumn(!0)}),{key:this.id+"_setRowVisible",caller:this,delay:100})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.clearRowVisible=function(t){try{var e=this.hiddenRowObj.extraRow;if(this.hiddenRowObj.init&&(this.lastTopRowIndex=null),this.hiddenRowObj={length:0,extraRow:e,row:{},init:!1},this._refreshRowVisible({lastIndex:this.lastIndex,noDraw:!0}),t&&!0===t.noDraw)return;0!==this.rowIndex?(this.bScrollY=0,this.setScrollTop(0),this.drawData(0),this.setScrollYHeight()):(this.setScrollYHeight(),this.dynamicMergeHTML(),this.applyStyleOptions(this.lastIndex))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getRowVisible=function(t){try{return!(null==t||t<0||t>this.getTotalRow())&&!0!==this.hiddenRowObj.row[t]}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getRowVisible=function(t){try{return!(null==t||t<0||t>this.getTotalRow())&&(!(this.hiddenRowObj.length>0)||this.getRowVisible(this.dataList.getRealRowIndex(t)))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getHiddenRowCount=function(t){try{var e=this.hiddenRowObj.length;if(this.isDrillDown&&isNaN(t)&&(t=0),this.hiddenRowObj.length>0&&(t||this.isDrillDown)){e=0;for(var i=this.getDataLength(),o=t;o<i;o++)this._getRowVisible(o)||e++}return e}catch(t){return r.w.printStackTrace(t,null,this),0}},u.prototype._getVisibleRowIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;var e=this.getDataLength();if(t>=e)return e;for(var i=t,o=0;i>=0&&o<e;)this._getRowVisible(o)&&i--,i>=0&&o++;return o}catch(e){
return r.w.printStackTrace(e,null,this),t}},u.prototype._getVisibleTrRowIndex=function(t,e){try{if(this._getHiddenRowCount()<=0)return t;for(var i=this.getDataLength(),o=0,s=this.drawedRowLength+this.hiddenRowObj.extraRow-1,a=t,n=e;a>=0&&n<i&&s>o;n++)this._getRowVisible(n)&&a--,a>=0&&o++;return o}catch(e){return r.w.printStackTrace(e,null,this),t}},u.prototype._getScrollRowIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;if(t<=0)return 0;for(var e=0,i=this._getScrollMaxRowIndex(),o=t-1;o>=0&&i>e;o--)this._getRowVisible(o)&&e++;return e}catch(e){return r.w.printStackTrace(e,null,this),t}},u.prototype._getScrollMaxRowIndex=function(){try{var t=parseInt(document.getElementById(this.id+"_size_y").style.height,10)-document.getElementById(this.id+"_scrollY_div").offsetHeight;return Math.floor((t+this._getEpsilon())/this.oneRowScrollHeight)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getEpsilon=function(){try{var t=Math.min(2,Math.round(this.oneRowScrollHeight/10)),e=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;return e<1&&(t=Math.min(Math.round(t/e),Math.round(this.oneRowScrollHeight/2.4))),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getVisibleLastIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;for(var e=t,i=this.getDataLength(),o=0,s=i-1;s>=0&&e>0;s--)this._getRowVisible(s)&&e--,o++;return o}catch(e){return r.w.printStackTrace(e,null,this),t}},u.prototype._getTrIndex=function(t){try{var e=t;return this.rowIndex>=0&&(this.options.fixedRow>0&&this.options.fixedRow>t||this.options.lastFixedRow>0&&t>this.lastIndex-this.options.lastFixedRow||(e-=this.rowIndex)),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getTdElem=function(t,e){try{for(var i=0,o=this.rowIndex;o<t&&this.hiddenRowObj.length>0;o++)this._getRowVisible(o)||i++;var s=this._getTrIndex(t);if(s<0||s-i>=this.drawedRowLength)return;return this.data_td_list[s*this.oneRowDataLength+e]}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._addHiddenRow=function(t){try{var e=[];0==this.drawedRowLength&&this.hasSubtotal&&(e=e.concat(this.createSubtotalRows(-1)));for(var i=[],o=0;o<this.oneRowLength;o++){var s=this.tempTr.rows[o].cloneNode(!0);i[o]=s,e.push(s)}this.addBodyRow(t,i),this.hasSubtotal&&(e=e.concat(this.createSubtotalRows(t)));var a=this.getElementById(this.id+"_body_table"),n=this.getElementById(this.id+"_body_tbody");0==this.drawedRowLength?a.style.borderWidth="0px":a.style.borderWidth="";for(o=0;o<e.length;o++)n.appendChild(e[o]);this._setRowDisplay(t,"none"),this.hiddenRowObj.extraRow++}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._applyRowVisible=function(t){try{if(void 0!==t&&null!=t||(t={}),this.delayedDraw({rowIndex:Math.max(this.rowIndex,0)}))return;var e=0,i=!0,o=this.getDataLength()+this._getLastSubtotalCount(),s=this.lastIndex;s=""===this.options.visibleRowNum?Math.min(this.drawedRowLength,o-this.rowIndex)-1:"all"===this.options.visibleRowNum?this.drawedRowLength:Math.min(parseInt(this.options.visibleRowNum,10),o)-1;var a=o-this._getVisibleLastIndex(s+1),n=this.rowIndex;this.subtotalHidden();for(var l=!1,h={skipSubtotal:!0,refreshColumn:t.refreshColumn},d=0,c=s,u=0;u<=s;u++){var p=u+this.rowIndex;if(!0===t.drawRow&&(this.options.fixedRow>0&&this.options.fixedRow>u?(p=u,this.fastDrawRowData(u,p,h)):this.options.lastFixedRow>0&&u>this.lastIndex-this.options.lastFixedRow||this.fastDrawRowData(u,p,h)),this._getRowVisible(u+this.rowIndex)?(this._setRowDisplay(u,""),i=!1,l=!0):(this._setRowDisplay(u,"none"),e++,i&&n<a&&n++),this.hasSubtotal&&l)this.options.initFixedHeightByRowNum>-1&&(f={maxCount:s-u+e}),(b=this.drawSubtotalRow(u+1,p,f))>0&&(l=!1,this.options.initFixedHeightByRowNum>-1&&(u>=(s-=b)&&(e-=u-s),d+=b));c=u}var g=this.hiddenRowObj.extraRow+d,m=0;for(u=0;u<g&&s>=0;u++){var f,b,y=u+c+1;p=y+this.rowIndex;if(this._getRowVisible(p)&&e>0&&p<o?(this._setRowDisplay(y,""),this.fastDrawRowData(y,p,h),e--,i=!1,l=!0):(this._setRowDisplay(y,"none"),
i&&n<a&&n++,e<=0&&(l=n>=a),!0===t.drawRow&&this.fastDrawRowData(y,p,h)),this.hasSubtotal&&y+this.rowIndex<o&&l)this.options.initFixedHeightByRowNum>-1&&(f={maxCount:e}),(b=this.drawSubtotalRow(y+1,p,f))>0&&(l=!1,this.options.initFixedHeightByRowNum>-1&&(m+=b,e-=b))}n!==this.rowIndex&&!0!==t.noDraw?this.drawData(n):""===this.options.visibleRowNum?(!0===t.applyStyle&&this.applyStyleOptions(s),this.cutGridBottom()):this.lastIndex=s-m}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setCellVisible=function(t,e,i){try{if(!0!==i&&!1!==i)return;e=this.getColumnIndex(e);var o,s=!0===this.hiddenCellObj[t+"_"+e],n=!1;if(!0===i&&s?(this.hiddenCellObj[t+"_"+e]=!1,o=!0,this.hiddenCellObj.length--):!1!==i||s||(this.hiddenCellObj[t+"_"+e]=!0,o=!0,this.hiddenCellObj.length++,this.hiddenCellObj.init||(n=!0),this.hiddenCellObj.init=!0),!0===o){var l=this._getTdElem(t,e);null!=l&&(l.style.display=!0===i?"":"none")}n&&(""!==this.options.visibleRowNum&&"native"!==this.options.drawType&&(this.options.visibleRowNum=""),this.setDataTable()),"native"!==this.options.drawType&&a.D.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:100})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setCellVisibleRefresh=function(){try{if("native"===this.options.drawType)return;this.lastTopRowIndex=null;var t=this.rowIndex,e=Math.max(this.getDataLength()-this.drawedRowLength,0);this.rowIndex=e,this.subtotalHidden();var i=this.completiveDrawData(0,{extraRowByCellHidden:!0});if(this.lastTopRowIndex=e+i,0===e&&0===i){0!==(o=this.getElementById(this.id+"_size_y")).offsetHeight&&(o.style.height="0px",this.handlerResize_drawInitializer())}else{var o=this.getElementById(this.id+"_size_y"),s=this.getElementById(this.id+"_scrollY_div"),a=o.offsetHeight;if(a<1e6&&(a=parseInt(o.style.height,10)),o.style.height=s.offsetHeight+this.oneRowScrollHeight*this.lastTopRowIndex+"px",t=Math.min(t,this.lastTopRowIndex),this.hasSubtotal&&this.struct.subtotalArr&&this.struct.subtotalArr.length>0)this.lastTopRowIndex+=this.struct.subtotalArr.length,this.drawData(t);else{var n=this.oneRowScrollHeight*t;t!==this.rowIndex?this.drawData(t):s.scrollTop!==n&&(this.bScrollY=n,s.scrollTop=n),this.handlerResize_drawInitializer()}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getCellVisible=function(t,e){try{e=this.getColumnIndex(e);return!0!==this.hiddenCellObj[t+"_"+e]}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.clearCellVisible=function(){try{for(var t in this.hiddenCellObj)if(!0===this.hiddenCellObj[t]){var e=t.split("_"),i=Number(e[0]),o=Number(e[1]),s=this._getTdElem(i,o);null!=s&&(s.style.display="")}this.hiddenCellObj={length:0,init:!1},this.cutGridBottom(this.lastIndex)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._moveCellVisible=function(t,e,i){try{if(!(this.hiddenCellObj.length>0))return;void 0!==i&&null!=i||(i={});var s=[];t.sort((function(t,e){return t-e}));for(var a={},n=0;n<t.length;n++)a[t[n]]=!0;var l=this.getRowCount();for(n=0;n<l;n++)!0===i.remove&&!0===a[n]||s.push(n);!0===i.insert&&(s=s.slice(0,e).concat(t).concat(s.slice(e)));var h={};for(n=0;n<s.length;n++)s[n]!==n&&(h[s[n]]=n);var d=o.x.extend({},this.hiddenCellObj),c=this.getColumnCount();for(var u in h){var p=Number(u),g=h[p];if(p!==g)for(var m=0;m<c;m++)this.setCellVisible(g,m,!d[p+"_"+m])}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._refreshRowVisible=function(t){try{this._applyRowVisible(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setScrollLeft=function(t){t=parseInt(t,10);try{this.getElementById(this.id+"_scrollX_right").scrollLeft=t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setScrollTop=function(t){t=parseInt(t,10);try{this.scrollEvent=!0,this.getElementById(this.id+"_scrollY_div").scrollTop=t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getScrollLeft=function(){try{return this.getElementById(this.id+"_scrollX_right").scrollLeft}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.getScrollTop=function(){try{return this.getElementById(this.id+"_scrollY_div").scrollTop}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setGridStyle=function(t){try{if(!t)return;if("string"==typeof t){t=t.match(/"\s*N\s*"\s*:\s*"\s*w2:gridView\s*"/)?JSON.parse(t):WebSquare.xml.parse(t)}t instanceof WebSquare.Elem&&(t=t._element),!0===WebSquare.convertPageXML&&s.v.isXML(t)&&(t=WebSquare.xmljs.xml2json(t).E[0]),!0===s.v.isXML(t)&&9==t.nodeType&&(t=t.documentElement);var e=this.getParent();e&&e.parentControl&&"wframe"==e.parentControl.options.pluginName&&(e=e.parentControl);var i,o=this.scope_obj,a=this.parentFrame;this.options.groupbyFilterBox&&this.options.customFilterBox&&this.groupbyFilterBox_history.length>0&&(i=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()].customFilterListFilterInfo),this.remove(),this.__removed_object__=!0;var n=WebSquare.controlFactory.create(null,null,t,o,a);n.options&&isNaN(n.options.fixedRightColumn)&&(n.options.fixedRightColumn=0),n.writeTo(e),n.activate(),n.onComplete(),n.options.groupbyFilterBox&&n.options.customFilterBox&&(n.refreshGroupbyFilterBox(),n.applyFilterHistory(),i?(n.customFilterList.customFilterListFilterInfo=JSON.parse(i,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"==typeof i&&i.constructor===RegExp?i:"object"==typeof i&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})),n.groupbyFilterBox_history[n.groupbyFilterBox_select.getSelectedIndex()].customFilterListFilterInfo=i):n.customFilterList&&(n.customFilterList.customFilterListFilterInfo={}));var l=n.options._sortStatus;if(l){for(var h=JSON.parse(l),d=[],c=[],u=[],p=0;p<h.length;p++){var g=h[p];d.push(g.colID),c.push(g.sortOrder),u.push(g.dataType)}n.dataList.setFilter({type:"sort",sortIndex:d.join(" "),sortOrder:c.join(" "),dataType:u.join(" "),focuseMode:n.options.filterFocusMode,ignoreEmptyStringOnSort:n.options.ignoreEmptyStringOnSort,setEmptyStringFirstOnSort:n.options.setEmptyStringFirstOnSort,setEmptyStringSortableOnSort:n.options.setEmptyStringSortableOnSort}),n.drawHeaderSortImages()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getGridStyle=function(){try{return"json"===this.element._elementType?WebSquare.jsonUtil.serialize(this.element._element):WebSquare.xml.serialize(this.element._element)}catch(t){r.w.printStackTrace(t)}},u.prototype.getCurrentGridStyle=function(){try{var t=this.element.cloneNode(!0);t.setAttribute("columnOrder",this.getColumnOrder()),t.setAttribute("fixedColumn",this.options.fixedColumn),t.setAttribute("fixedRow",this.options.fixedRow),t.setAttribute("fixedRightColumn",this.options.fixedRightColumn);for(var e=t.getChildNodes(),i=0;i<e.length;i++){if("w2:header"==e[i].getTagName())for(var o=e[i].getChildNodes(),s={},n=0,l=this.htmlInfo.head.rowAttrArr.length,h=0;h<o.length;h++)if("w2:row"===o[h].getTagName()){for(var d=o[h].getChildNodes(),c=[],u=0;u<d.length;u++)"w2:column"==d[u].getTagName()&&c.push(d[u]);for(var p=0,g=0,m={},f=0;f<c.length;f++){for(;null!=s[i]&&null!=s[i][f+p+g];)g+=s[i][f+p+g];m[f+p-0+g]=f;var b=parseInt(c[f].getAttribute("colSpan"),10)||1,y=parseInt(c[f].getAttribute("rowSpan"),10)||1;if(y>1)for(var v=n;v<n+y-1;v++)null==s[v+1]&&(s[v+1]={}),null==s[v+1][f-0+p+g]?s[v+1][f-0+p+g]=b:s[v+1][f-0+p+g]+=b;b>1&&(p+=b-1)}if(n===l-1){var w=0,S=0;for(f=0;f<c.length;f++){for(;null!=s[n]&&null!=s[n][this.columnOrder[f+S+w]];)S+=s[n][this.columnOrder[f+S+w]];var C=m[[this.columnOrder[f-0+w+S]]];null==C&&(C=0);var _=c[C];(b=parseInt(_.getAttribute("colSpan"),10))>1&&(w+=b-1),_.setAttribute("width",this.colWidthList[f+this.defaultColCnt+w+S]),this.hiddenList[f+this.defaultColCnt+w+S]?_.setAttribute("hidden","true"):_.setAttribute("hidden","false")}}n++}if("w2:gBody"==e[i].getTagName())for(o=e[i].getChildNodes(),h=0;h<o.length;h++)if("w2:row"===o[h].getTagName()){var x=o[h].getChildNodes(),I=[]
;for(u=0;u<x.length;u++)"w2:column"==x[u].getTagName()&&I.push(x[u]);for(p=0,m={},f=0;f<I.length;f++){m[f+p]=f,(b=parseInt(I[f].getAttribute("colSpan"),10))>1&&(p+=b-1)}for(w=0,f=0;f<I.length;f++){_=I[m[[this.columnOrder[f+w]]]];(b=parseInt(_.getAttribute("colSpan"),10))>1&&(w+=b-1),_.setAttribute("width",this.colWidthList[f+this.defaultColCnt+w]),a.D.isChrome()?_.setAttribute("hidden",this.hiddenList[f+this.defaultColCnt+w]):this.hiddenList[f+this.defaultColCnt+w]?_.setAttribute("hidden","true"):_.setAttribute("hidden","false");var T=_.getAttribute("col_id");T&&(_.setAttribute("id",T),_.removeAttribute("col_id"))}}}var k=this.getSortableStatus();return k&&k.length>0&&t.setAttribute("_sortStatus",JSON.stringify(k)),t.serialize()}catch(t){r.w.printStackTrace(t)}},u.prototype.setTableStruct=function(){try{if(this.headerXml=WebSquare.Elem.api.getElementsByTagName(this.element,"header",s.v._XML_NAMESPACE.W2)[0],this.bodyXml=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",s.v._XML_NAMESPACE.W2)[0],this.struct={head:this.xml2JSON(this.headerXml),body:this.xml2JSON(this.bodyXml)},this.updateStruct(this.struct.head.rowArr),this.updateStruct(this.struct.body.rowArr),this.changeRowID(this.struct.head.rowAttrArr),this.changeRowID(this.struct.body.rowAttrArr),this.footerXml=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0],this.footerXml&&(this.hasFooter=!0,this.struct.foot=this.xml2JSON(this.footerXml),this.updateStruct(this.struct.foot.rowArr)),this.subtotalXmlArr=WebSquare.Elem.api.getElementsByTagName(this.element,"subTotal",s.v._XML_NAMESPACE.W2),this.subtotalXmlArr.length>0){this.options.showLastRow=!1,this.hasSubtotal=!0,this.drawedSubtotal=[],this.drawedSubtotal.drawedRowLength=0,this.struct.subtotalArr=[];for(var t=0;t<this.subtotalXmlArr.length;t++){var e=this.xml2JSON(this.subtotalXmlArr[t]);this.struct.subtotalArr.push(e),this.struct.subtotalArr[e.attr.id]=e,this.updateStruct(e.rowArr)}}if(this.setCss(),this.setColArr(),this.htmlInfo={head:this.getHeaderHtmlInfo(),body:this.getBodyHtmlInfo()},this.footerXml&&(this.htmlInfo.foot=this.getFooterHtmlInfo()),this.subtotalXmlArr.length>0){this.htmlInfo.subtotalArr=[],this.subtotalStrList={};for(t=0;t<this.struct.subtotalArr.length;t++){e=this.getSubtotalHtmlInfo(this.struct.subtotalArr[t]);this.htmlInfo.subtotalArr.push(e),this.htmlInfo.subtotalArr[e.attr.id]=e,this.subtotalStrList[e.attr.targetColumnID]=e}}this.captionXml=WebSquare.Elem.api.getElementsByTagName(this.element,"caption",s.v._XML_NAMESPACE.W2)[0];var i=this.getColCnt();this.columnOrder=[];for(t=0;t<i;t++)this.columnOrder.push(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.updateStruct=function(t){try{for(var e=0,i=[],o=this.getColCnt(),s=0;s<t.length;s++){for(var a=[],n=0;n<o;n++)a.push(null);i.push(a)}for(s=0;s<t.length;s++)for(n=0;n<t[s].length;n++){var l;for(l=0;l<i[s].length&&null!==i[s][l];l++);var h=t[s][n];h["@col"]=l;for(var d=h.colSpan||h.colspan||1,c=h.rowSpan||h.rowspan||1,u=0;u<c;u++)for(var p=0;p<d;p++)i[s+u][l+p]=e;e++}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.changeRowID=function(t){try{for(var e=0;e<t.length;e++){var i=t[e];null!=i.id&&(i["data-tr-id"]=i.id,delete i.id)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getRealColIndex=function(t,e){try{for(var i=0;i<this.htmlInfo[t].rowArr.length;i++)for(var o=0;o<this.htmlInfo[t].rowArr[i].length;o++)if(this.htmlInfo[t].rowArr[i][o].col_id==e)return this.htmlInfo[t].rowArr[i][o]["@col"];return null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getRealHeaderColIndex=function(t){try{return this.getColumnIndex(this.headerToBodyRelation[t])}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getDataColIndex=function(t){try{return this._dataList.getColumnIndex(this.getColumnID(t))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._moveColumn=function(t,e,i,o,s,a){try{e=e||"td"
;for(var n=[],l=0;l<t[i].childNodes.length;l++)t[i].childNodes[l].nodeName.toLowerCase()==e&&n.push(t[i].childNodes[l]);var h=n[o];h.parentNode.removeChild(h);var d=[];for(l=0;l<t[i].childNodes.length;l++)t[i].childNodes[l].nodeName.toLowerCase()==e&&d.push(t[i].childNodes[l]);if(a<d.length){var c=d[a];c.parentNode.insertBefore(h,c)}else t[s].appendChild(h)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.moveBodyColumn=function(t,e,i,o){try{var s=this.htmlInfo.body.rowArr[t].splice(e,1);this.htmlInfo.body.rowArr[i].splice(o,0,s[0]),this.updateStruct(this.htmlInfo.body.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=this.getElementById(this.id+"_body_tbody"),n=0;this.hasSubtotal&&this.drawedSubtotal&&this.drawedSubtotal.length>0&&(n=this.drawedSubtotal[0].length);for(var l=0;l<this.drawedRowLength;l++){for(var h=[],d=0;d<this.oneRowLength;d++)h.push(a.rows[l*(this.oneRowLength+n)+d+n]);this._moveColumn(h,"td",t,e,i,o);for(d=0;d<n;d++)if(0===t&&0===i){var c=d>0?this.defaultColCnt:0;this._moveColumn([a.rows[l*(this.oneRowLength+n)+d]],"td",0,e-c,0,o-c)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.moveHeadColumn=function(t,e,i,o){try{var s=this.htmlInfo.head.rowArr[t].splice(e,1);this.htmlInfo.head.rowArr[i].splice(o,0,s[0]),this.updateStruct(this.htmlInfo.head.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=this.getElementById(this.id+"_head_table");this._moveColumn(a.rows,"th",t,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._moveFooterColumn=function(t,e,i,o){try{var s=this.htmlInfo.foot.rowArr[t].splice(e,1);this.htmlInfo.foot.rowArr[i].splice(o,0,s[0]),this.updateStruct(this.htmlInfo.foot.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=document.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0];this._moveColumn(a.rows,"td",t,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.moveFooterColumn=function(t,e){try{var i,o,s=parseInt(t,10),a=[];"string"==typeof t&&isNaN(s)?(o="id",i=t):(o="@col",i=this.colIndexes.footerColInfo.colIndexArr[s+this.defaultColCnt]-this.defaultColCnt);for(var n=0;n<this.htmlInfo.foot.rowArr.length;n++)for(var l=0;l<this.htmlInfo.foot.rowArr[n].length;l++)this.htmlInfo.foot.rowArr[n][l][o]==i&&a.push({row:n,col:l});var h,d,c=parseInt(e,10);"string"==typeof e&&isNaN(c)?(d="id",h=e):(d="@col",h=this.colIndexes.footerColInfo.colIndexArr[c+this.defaultColCnt]-this.defaultColCnt);for(n=0;n<a.length;n++){var u=null;for(l=0;l<this.htmlInfo.foot.rowArr[a[n].row].length;l++)if(this.htmlInfo.foot.rowArr[a[n].row][l][d]==h){u=l;break}null!==u?this._moveFooterColumn(a[n].row,a[n].col,a[n].row,u):this._moveFooterColumn(a[n].row,a[n].col,a[n].row,c)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.moveColumnByHeaderId=function(t,e){try{if(!t||!e||t===e)return!1;var i=this.getHeaderColIndex(t),o=this.getHeaderColIndex(e);if(isNaN(i)||isNaN(o))return!1;var s=this.columnBlock.hash[i-this.defaultColCnt],a=this.columnBlock.hash[o-this.defaultColCnt];if(s===a)return!1;var n=this.getFixedColumnLastIndex();if(this.options.fixedColumnNoMove&&(n>s||n>a))return!1;for(var l=-1,h=-1,c=0;c<this.columnOrder.length;c++){var u=this.columnOrder[c];if(u===s&&(l=c),u===a&&(h=c),l>-1&&h>-1)break}var p=this.headerToBodyRelation[t],g=this.headerToBodyRelation[e];if(!1===d.B.fireEvent(this,"onbeforecolumnmove",{startColumnID:p,startColumnIndex:l,endColumnID:g,endColumnIndex:h}))return!1;this.columnBlock||this.createBlockedHeaderInfo();var m=this.getColumnOrder(),f=-1,b=-1;for(c=0;c<m.length;c++){var y=m[c];if(y===s?f=c:y===a&&(b=c),-1!==f&&-1!==b)break}var v=this.columnBlock.info[s],w=this.columnBlock.info[a],S=m.slice(0);S.splice(f,v.length);var C=b+(f<b?w.length-v.length:0),_=S.slice(0,C).concat(v).concat(S.slice(C)),x=this.setColumnOrder(_);return d.B.fireEvent(this,"onaftercolumnmove",{startColumnID:p,startColumnIndex:l,endColumnID:g,endColumnIndex:h}),x}catch(t){
r.w.printStackTrace(t,null,this)}},u.prototype.moveColumn=function(t,e){try{if(t==e)return;if(this.options.fixedColumnNoMove&&(this.getFixedColumnLastIndex()>t+this.defaultColCnt||this.getFixedColumnLastIndex()>e+this.defaultColCnt))return;var i=this.getHeaderID(t),o=this._getRealColIndex("head",i)+this.defaultColCnt,s=this.headerToBodyRelation[i];if(!s||this.colMoveBolockedHeaderObj[i])return;var a=this.colMoveIndexMap[s],n=this._getRealColIndex("body",s)+this.defaultColCnt,l=this.getHeaderID(e),h=this.headerToBodyRelation[l];if(!h||this.colMoveBolockedHeaderObj[l])return;var c=this._getRealColIndex("head",l)+this.defaultColCnt,u=this.colMoveIndexMap[h],p=this.colIndexes.bodyColInfo.colIndexArr[u+this.defaultColCnt];if(!1===d.B.fireEvent(this,"onbeforecolumnmove",{startColumnID:s,startColumnIndex:a,endColumnID:h,endColumnIndex:u}))return!1;for(var g=[],m=n-this.defaultColCnt,f=0;f<this.htmlInfo.body.rowArr.length;f++)for(var b=0;b<this.htmlInfo.body.rowArr[f].length;b++)this.htmlInfo.body.rowArr[f][b]["@col"]==m&&g.push({row:f,col:b});var y=p-this.defaultColCnt;for(f=0;f<g.length;f++){var v=null;for(b=0;b<this.htmlInfo.body.rowArr[g[f].row].length;b++)if(this.htmlInfo.body.rowArr[g[f].row][b]["@col"]==y){v=b;break}null!==v?this.moveBodyColumn(g[f].row,g[f].col,g[f].row,v):this.moveBodyColumn(g[f].row,g[f].col,g[f].row,u)}g=[];var w=o-this.defaultColCnt;for(f=0;f<this.htmlInfo.head.rowArr.length;f++)for(b=0;b<this.htmlInfo.head.rowArr[f].length;b++)this.htmlInfo.head.rowArr[f][b]["@col"]==w&&g.push({row:f,col:b});var S=c-this.defaultColCnt;for(f=0;f<g.length;f++){for(v=null,b=0;b<this.htmlInfo.head.rowArr[g[f].row].length;b++)if(this.htmlInfo.head.rowArr[g[f].row][b]["@col"]==S){v=b;break}null!==v?this.moveHeadColumn(g[f].row,g[f].col,g[f].row,v):this.moveHeadColumn(g[f].row,g[f].col,g[f].row,e)}this.hasFooter&&this.options.columnMoveWithFooter&&this.moveFooterColumn(t,e);var C=function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])};if(null!=this.initVisibilityArr)for(f=0;f<this.htmlInfo.body.rowArr.length;f++)C(this.initVisibilityArr,n+f*this.getColCnt(),p+f*this.getColCnt());for(var _ in C(this.columnOrder,n-this.defaultColCnt,p-this.defaultColCnt),C(this.colIndexInfo.body.colInfo.colIndexMatch,n,p),C(this.colWidthList,n,p),C(this.hiddenList,o,c),this.colMoveIndexMap)this.colMoveIndexMap[_]==a?this.colMoveIndexMap[_]=u:a<u?a<this.colMoveIndexMap[_]&&this.colMoveIndexMap[_]<=u&&(this.colMoveIndexMap[_]-=1):a>u&&a>this.colMoveIndexMap[_]&&this.colMoveIndexMap[_]>=u&&(this.colMoveIndexMap[_]+=1);for(var _ in this.colMoveHeaderIndexMap)this.colMoveHeaderIndexMap[_]==a?this.colMoveHeaderIndexMap[_]=u:a<u?a<this.colMoveHeaderIndexMap[_]&&this.colMoveHeaderIndexMap[_]<=u&&(this.colMoveHeaderIndexMap[_]-=1):a>u&&a>this.colMoveHeaderIndexMap[_]&&this.colMoveHeaderIndexMap[_]>=u&&(this.colMoveHeaderIndexMap[_]+=1);this.arrangeOverflowXScroll(),this._handleScrollX(),d.B.fireEvent(this,"onaftercolumnmove",{startColumnID:s,startColumnIndex:a,endColumnID:h,endColumnIndex:u})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.resetMoveColumn=function(){try{for(var t=this.getColCnt(),e=[],i=0;i<t;i++)e.push(i);this.setColumnOrder(e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setColumnOrder=function(t){try{if(!a.D.isEmptyObject(this.cellMergeInfo))return void c.k.printLog("warning : setColumnOrder refused due to mergeCells. ["+this.id+"]");t=t.slice();if(!this.render||0===this.render.offsetHeight&&0===this.render.offsetWidth)return this.resizeObj={width:0,height:0},this.setRedrawStatus("stop"),void this.delayedDraw({newColumnOrder:t});var e=this.getColCnt(),i=[];"string"==typeof t&&(t=t.split(","));for(var o=0;o<t.length;o++){if(null!=this.bodyIdColIndexMap[t[o]]&&(t[o]=this.bodyIdColIndexMap[t[o]]),t[o]=Number(t[o]),"number"!=typeof t[o])return void $l(this.id+".setColumnOrder : wrong column order array.");i[t[o]]=!0}if(e>t.length){
for(o=0;o<t.length;o++)t[o]=this.colIndexes.headerColInfo.colIndexArr[t[o]+this.defaultColCnt]-this.defaultColCnt;for(o=0;o<t.length;o++){var s=this.getCellInfo(t[o]).options.colSpan;if(s>1)for(var n=1;n<s;n++)t.splice(o+n,0,t[o]+n)}for(o=0;o<t.length;o++)i[t[o]]=!0}for(o=t.length-1;o>=0;o--)for(n=o-1;n>=0;n--)t[o]===t[n]&&t.splice(o,1);for(o=0;o<e;o++)i[o]||t.push(o);if(e!=t.length)return $l(this.id+".setColumnOrder : wrong column order array."),!1;var l=[];for(o=0;o<t.length;o++)for(n=0;n<this.columnOrder.length;n++)if(this.columnOrder[n]==t[o]){l[o]=n;break}if(!0===this.checkRefreshAdaptive()&&this.removeAdaptive(),this.columnOrder=l.slice(0),this.drawedRowLength<=0&&this.drawDataTable(),this._moveColumnByOrder(this.id+"_body_tbody",this.htmlInfo.body.rowArr),this._moveColumnByOrder(this.id+"_head_table",this.htmlInfo.head.rowArr),this.hasFooter&&this.options.columnMoveWithFooter){var h=document.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0];this._moveColumnByOrder(h.getAttribute("id"),this.htmlInfo.foot.rowArr)}if(null!=this.initVisibilityArr){var d=[];for(o=0;o<this.initVisibilityArr.length-this.defaultColCnt;o++){var u=Math.floor(o/this.columnOrder.length),p=o%this.columnOrder.length,g=u*this.columnOrder.length+this.columnOrder[p]+this.defaultColCnt;d.push(this.initVisibilityArr[g])}for(o=0;o<d.length;o++)this.initVisibilityArr[o+this.defaultColCnt]=d[o]}this._swapItem(this.colIndexInfo.body.colInfo.colIndexMatch,this.columnOrder,this.defaultColCnt),this._swapItem(this.colWidthList,this.columnOrder,this.defaultColCnt),this.initialColWidthList=this.colWidthList.slice(),this._swapItem(this.hiddenList,this.columnOrder,this.defaultColCnt),"allColumn"===this.options.autoFit&&this._swapItem(this.autoFitColWidthList,this.columnOrder,this.defaultColCnt);for(o=0;o<this.tdIdList.length;o++)for(n=0;n<t.length;n++)if(o==t[n]){this.colMoveIndexMap[this.tdIdList[o]]=n,this.colMoveHeaderIndexMap[this.thIdList[o]]=n;break}return this.columnOrder=t.slice(0),this.arrangeOverflowXScroll(),this._handleScrollX(),!0===this.checkRefreshAdaptive()&&this.addAdaptive(),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype._moveColumnByOrder=function(t,e){try{var i=document.getElementById(t),o=[],s={},n=e.length;(isNaN(n)||n<=0)&&(n=1);for(var l=0;l<n;l++){if(!(C=i.rows[l]))break;var h=0;0===l&&(h=this.defaultColCnt);for(var d={},c=0,u=0,p=h;p<C.childNodes.length;p++){for(;null!=s[l]&&null!=s[l][p+c+u];)u+=s[l][p+c+u];d[p+c-h+u]=p;var g=parseInt(C.childNodes[p].getAttribute("colSpan"),10)||1;this.options.lazyDrawHiddenColumn&&"true"==C.childNodes[p].getAttribute("data-lazydrawtd")&&(g=1);var m=parseInt(C.childNodes[p].getAttribute("rowSpan"),10)||1;if(m>1)for(var f=l;f<l+m-1;f++)null==s[f+1]&&(s[f+1]={}),null==s[f+1][p-h+c+u]?s[f+1][p-h+c+u]=g:s[f+1][p-h+c+u]+=g;g>1&&(c+=g-1)}var b=0,y=0;o[l]=[];for(p=h;p<C.childNodes.length;p++){for(;null!=s[l]&&null!=s[l][this.columnOrder[p+y+b]];)y+=s[l][this.columnOrder[p+y+b]];var v=d[[this.columnOrder[p-h+b+y]]];null==v&&(v=0),o[l].push(v-h);var w=C.childNodes[v];g=parseInt(w.getAttribute("colSpan"),10);this.options.lazyDrawHiddenColumn&&"true"==w.getAttribute("data-lazydrawtd")&&(g=1),g>1&&(b+=g-1)}}for(l=0;l<i.rows.length;l++){h=0;var S=l%n;0===S&&(h=this.defaultColCnt);var C=i.rows[l];a.D.isIEAllVersion()&&"11"==a.D.browserVersion()&&l>=(this.lastIndex+1)*this.oneRowLength&&(C.style.backgroundColor="");var _=[];for(p=0;p<o[S].length;p++)_.push(C.childNodes[o[S][p]+h]);for(p=0;p<_.length;p++)C.appendChild(_[p])}for(l=0;l<n;l++)this._swapItem(e[l],o[l],0);this.updateStruct(e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._swapItem=function(t,e,i){try{for(var o=[],s=null==i?0:i,a=0;a<e.length;a++)o.push(t[e[a]+s]);for(a=0;a<o.length;a++)t[a+s]=o[a]}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getColumnOrder=function(t){try{if(t){for(var e=[],i=this.colIndexInfo.body.colInfo.colIndexMatch,o=this.defaultColCnt;o<i.length;o++){
if(0==i[o].length)return void $l(this.id+".getColumnOrder : use getColumnOrder(false). cannot express column order by name.");for(var s=this.tdIdList[i[o][0]-this.defaultColCnt],a=!1,n=0;n<e.length;n++)if(e[n]===s){a=!0;break}a||e.push(s)}return e}return this.columnOrder.slice(0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getDisplayColumnIndex=function(t){try{for(var e=parseInt(t,10),i=0;i<this.columnOrder.length;i++)if(e===this.columnOrder[i])return i;return t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getColumnMoveIndex=function(t){try{if(t<0||isNaN(t))return t;for(var e=this.colIndexInfo.body.colInfo.colIndexArr[t+this.defaultColCnt],i=this.colIndexInfo.body.colInfo.trIndexArr[t+this.defaultColCnt],o=this.colIndexInfo.body.colInfo.colIndexMatch[e],s=0;s<o.length;s++){var a=o[s];if(a>=t+this.defaultColCnt)break;var n=this.colIndexInfo.body.colInfo.rowSpanArr[a];n>1&&(i=i-n+1)}return o[i]-this.defaultColCnt}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleGroupbyZoneClick=function(t){try{for(var e=a.D.getDataPrefix("header_id"),i=a.D.getDataPrefix("col_id"),o=this.event.getTargetIterator(t,this.render);o.next()&&(!this.options.groupbyZoneSearch||!o.match("w2grid_groupbyZone_search"));){if(o.match("w2grid_groupbyZone_column")){var s=o.getElement(),n={};n.render=s,n.parentRender=this.render.getElementsByTagName("div")[0],n.headerID=s.getAttribute(e),n.headerIndex=this._getColumnMoveIndex(this.getHeaderIndex(n.headerID)),n.dataIndex=this._getDataColIndex(this._getRealHeaderColIndex(n.headerID)),this.toggleGroupbyFilterList(n),d.B.stopEvent(t);break}if(o.match("w2grid_groupbyZone_column_closeButtonImg")){s=o.getElement();this.hideGroupbyFilterList(),this.ungroupColumn(s.getAttribute(i));break}if(o.match("w2grid_groupbyZone")){this.hideGroupbyFilterList(),d.B.stopEvent(t);break}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toggleGroupbyFilterList=function(t){try{var e=t.render.tagName,i=t.headerIndex;"number"==typeof this.groupbyZoneStatus.beforeOpenedColIndex?(this.groupbyFilterList.saveState(this.groupbyZoneStatus.beforeOpenedColIndex.toString()),i==this.groupbyZoneStatus.beforeOpenedColIndex&&e==this.groupbyZoneStatus.beforeOpenedColTagName?"block"==this.groupbyFilterList.render.style.display?this.hideGroupbyFilterList():this.showGroupbyFilterList(t,!0):this.showGroupbyFilterList(t,!0,!0)):this.createGroupbyFilterList(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.applyFilterListFormat=function(t,e){try{var i=this.headerToBodyRelation[e],o=this.getCellInfo(i);if(this.options.displayValueOnUseFilterList)for(var s=0;s<t.length;s++)null!=t[s].id3&&(this.groupbyStatus.grouped?this.groupbyFilterList.setCellDataNM(s,"id2",t[s].id3):this.customFilterList.setCellDataNM(s,"id2",t[s].id3));else if(this.options.useFilterListFormat&&!this.options.useFilterSearch&&!this.options.useSearchFilter&&!o.useCustomFormatter){var a=0,n=this.headerInfoHash[e];if(n&&n.options.hideCustomFilter&&(a=1),o.options.displayFormat||o.options.displayFormatter||o.options.ioFormat)for(s=2-a;s<t.length;s++){var l=o.formatter.format(t[s].id2);this.groupbyStatus.grouped?this.groupbyFilterList.setCellDataNM(s,"id2",l):this.customFilterList.setCellDataNM(s,"id2",l)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.createGroupbyFilterList=function(t){try{var e=t.render,i=t.parentRender,o=t.headerIndex,s=t.headerID;if(!this.groupbyFilterList){this.groupbyStatus.filter={};"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_groupbyZone_list' virtualized='true' labelCheck='true'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_groupbyZone_list_listRow' check_id='id1' >","        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_groupbyZone_list_listColumn_checkbox'/>",
"        <w2:listColumn id='id2' check_id='id1' inputType='text' style='' class='w2grid_groupbyZone_list_listColumn_text'/>","    </w2:listRow>","</w2:list>";var n=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_groupbyZone_list' virtualized='true' labelCheck='true'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_groupbyZone_list_listRow' check_id='id1' >        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_groupbyZone_list_listColumn_checkbox'/>        <w2:listColumn id='id2' check_id='id1' inputType='text' style='' class='w2grid_groupbyZone_list_listColumn_text'/>    </w2:listRow></w2:list>",!0).documentElement;this.groupbyFilterList=new WebSquare.uiplugin.list(this.id+"_groupbyZone_list","",n),this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]};var l=this;this.groupbyFilterList._handleClickEvent=this.groupbyFilterList.handleClickEvent,this.groupbyFilterList.handleClickEvent=function(t){try{this._handleClickEvent(t),d.B.stopPropagation(t);var e=d.B.getTarget(t),i=e;if((e.className.match("w2grid_groupbyZone_list_listColumn_checkbox")||e.className.match("w2grid_groupbyZone_list_listColumn_text"))&&(i=e.parentElement),!i.className.match("w2grid_groupbyZone_list_listRow"))return;var o=i.children[0],s=l.getHeaderID(this.headerIndex),n=l.getColumnID(this.headerIndex);0==this.isGroupbyColumn&&(s=this.currentHeaderID,n=l.headerToBodyRelation[s]);var h=a.D.getDataPrefix("unique_id"),c=i.getAttribute(h),u=this.getAllData(),p=l.getCellInfo(n);if(this.options.useFilterSearch&&this.options.useFilterListFormat&&p.formatter&&(p.options.displayFormat||p.options.displayFormatter||p.options.ioFormat))for(var g=2;g<u.length;g++)u[g].id2=p.formatter.unformat(u[g].id2);var m=o.checked,f=!1,b=!1,y=!1;if(u[0].customerFilter&&u[0][h]==c){if(m)return l.hideGroupbyFilterList(),l.firstOpenCustomFilter[s]?(l._dataList.filterManager.headerID=s,l._dataList.filterManager.targetColID=n,void l.setCustomFilterExpression()):(l.firstOpenCustomFilter[s]||(l.firstOpenCustomFilter[s]=!0),void(l.options.groupbyFilterIcon?l._showCustomFilter(s):l.showCustomFilter(s)));for(var v in l.customFilterStatusObj[s]=!1,l.dataList.removeColumnFilter(n),l.customFilterStatusObj)if(l.customFilterStatusObj[v])return;f=!0,b=!0,y=!0;for(g=1;g<u.length;g++)u[g].id1=!0}else if(u[1].gridCheckedAll&&u[1][h]==c){b=!0,m&&(y=!0);for(g=2;g<u.length;g++)u[g].id1=m}if(!f&&!y&&u.length-2>0){l.groupbyStatus.filter[n]=[];for(g=2;g<u.length;g++)u[g].id1&&l.groupbyStatus.filter[n].push(u[g].id2);l.groupbyStatus.filter[n]=l.changeItemValue("value",n,l.groupbyStatus.filter[n]);var w=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(g=0;g<l.groupbyStatus.filter[n].length;g++){var S=l.groupbyStatus.filter[n][g];"string"==typeof S&&(l.groupbyStatus.filter[n][g]=S.replace(w,(function(t){return l.replacechar(t)})))}}if(b){if(y&&this.filterHistory.column[0]===n)this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift(),delete l.groupbyStatus.filter[n];else if(!y&&this.filterHistory.column[0]!==n&&u.length-2>0){for(g=1;g<this.filterHistory.column.length;g++)if(this.filterHistory.column[g]===n){l.dataList.removeColumnFilter(n,{noRefresh:!0,noRefreshAfter:!0});break}this.filterHistory.column.unshift(n),this.filterHistory.filteredRowIndexArr.unshift(l._dataList.filteredRowIndexArr.slice(0))}}else{var C=u.length-2;if(C>l.groupbyStatus.filter[n].length){if(u[1].id1=!1,this.filterHistory.column[0]!==n){for(var g=1;g<this.filterHistory.column.length;g++)if(this.filterHistory.column[g]===n){l.dataList.removeColumnFilter(n,{noRefresh:!0,noRefreshAfter:!0});break}this.filterHistory.column.unshift(n),this.filterHistory.filteredRowIndexArr.unshift(l._dataList.filteredRowIndexArr.slice(0))}}else l.groupbyStatus.filter[n].length==C&&(u[1].id1=!0,
delete l.groupbyStatus.filter[n],this.filterHistory.column[0]===n&&(this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift()))}this.setFirstRowIndex(this.firstListIndex,!0);var _={};if(_.sortIndex=l.groupbyStatus.sortIndexArr,_.sortOrder=l.groupbyStatus.sortOrderArr,null!=l.groupbyStatus.filter&&(_.filter=l.groupbyStatus.filter,l.groupbyStatus.filter[n]&&2*l.groupbyStatus.filter[n].length>u.length)){var x=[],I="*";for(g=2;g<u.length;g++)if(!u[g].id1){if(u[g].id2===l.filterEmptyStr){I="+";continue}x.push(u[g].id2)}((p=l.getCellInfo(n)).itemsetObj||p.itemArr)&&(x=l.changeItemValue("value",n,x));var T="^\\n*(?:(?!^";for(w=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,g=0;g<x.length;g++){var k=x[g];"string"==typeof k&&(k=k.replace(w,(function(t){return l.replacechar(t)}))),T+=k+="$)(?!^"}T+="$).)"+I+"\\n*$",_.filterRegExp={},_.filterRegExp[n]=new RegExp(T,"gi")}if(_.noRefreshAfter=!0,!1===d.B.fireEvent(l,"ongroupby",_)){var D=l.getColCnt()+l.defaultColCnt;_.rowNumHeader={colSpan:D,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' 건 ] ' ",align:"left"},_.footerVisible=!1,_.rowNumFooter={colSpan:D},l.groupby(_)}l.options.groupbyFilterBox&&(this.isChanged=!0)}catch(t){r.w.printStackTrace(t,null,this)}},this.groupbyFilterList.writeTo(this),this.groupbyFilterList.activate()}if(!0===t.noDraw)return;var h=e.clientWidth,c=WebSquare.style.getRelativeTop(e,i)+e.offsetHeight,u=WebSquare.style.getRelativeLeft(e,i);this.groupbyFilterList.setPosition(u,c),this.groupbyFilterList.render.style.width=h+"px";var p=this.render.offsetHeight-c;this.groupbyFilterList.options.visibleRowNum=Math.floor(p/21);var g=this.getGroupbyDepthInfo(t);if(this.groupbyFilterList.setJSON(g),this.applyFilterListFormat(g,s),this.groupbyFilterList.currentHeaderID=s,this.groupbyFilterList.headerIndex=o,this.groupbyFilterList.isGroupbyColumn=t.isGroupbyColumn,WebSquare.style.show(this.groupbyFilterList.render),a.D.getBoolean(this.headerInfoHash[s].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)){var m=this.groupbyFilterList.getMaxItemWidth();m>h&&(this.groupbyFilterList.render.style.width=m+"px")}this.groupbyFilterList.focus(),this.groupbyZoneStatus.beforeOpenedColIndex=o,this.groupbyZoneStatus.beforeOpenedColTagName=e.tagName}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showGroupbyFilterList=function(t,e,i){try{var o=t.render,s=t.parentRender,n=t.headerIndex,l=t.headerID;if(this.groupbyFilterList.currentHeaderID=t.headerID,this.groupbyFilterList.headerIndex=n,this.groupbyZoneStatus.beforeOpenedColIndex=n,this.groupbyZoneStatus.beforeOpenedColTagName=o.tagName,WebSquare.style.show(this.groupbyFilterList.render),this.groupbyFilterList.focus(),e){var h,d=WebSquare.style.getRelativeTop(o,s)+o.offsetHeight,c=WebSquare.style.getRelativeLeft(o,s),u=this.render.offsetHeight-d;this.groupbyFilterList.options.visibleRowNum=Math.floor(u/21);var p=this.getGroupbyDepthInfo(t);this.groupbyFilterList.setJSON(p),!0===i&&this.groupbyFilterList.loadState(n),a.D.getBoolean(this.headerInfoHash[l].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)?(h=this.groupbyFilterList.getMaxItemWidth(),o.clientWidth>h&&(h=o.clientWidth)):h=o.clientWidth,this.groupbyFilterList.setPosition(c,d),this.groupbyFilterList.render.style.width=h+"px",this.applyFilterListFormat(p,l)}else if(!0===i){this.groupbyFilterList.loadState(n);p=this.getGroupbyDepthInfo(t);this.applyFilterListFormat(p,l)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideGroupbyFilterList=function(){try{this.groupbyFilterList&&(WebSquare.style.hide(this.groupbyFilterList.render),this.groupbyFilterList.isChanged&&this.options.groupbyFilterBox&&(this.refreshGroupbyFilterBox(),this.groupbyFilterList.isChanged=!1))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getGroupbyDepthInfo=function(t){try{t.headerIndex;var e,i=t.headerID,o=this.headerToBodyRelation[i];0==t.isGroupbyColumn&&(o=this.headerToBodyRelation[i]),
e=this.groupbyFilterList.filterHistory.column[0]===o?this.groupbyFilterList.filterHistory.filteredRowIndexArr[0]:this._dataList.filteredRowIndexArr;var s=this.dataList.getColData(o,e),a=this.getCellInfo(o),n=this.getUniqueValueOfArray(s),l=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];l.push("");var h,d,c=this.changeItemValue("label",o,n.slice(0)),u=this.customFilterStatusObj[i]||!1,p=WebSquare.language.getMessage("Grid_Customized_Filter")||"사용자필터",g=WebSquare.language.getMessage("Grid_checked_all")||"전체선택",m=[];m.push({id1:u,id2:p,customerFilter:!0}),m.push({id1:!u,id2:g,gridCheckedAll:!0}),!u&&this.groupbyStatus.filter&&o in this.groupbyStatus.filter&&(d=(h=this.groupbyStatus.filter[o]).slice(0));for(var f=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,b=this,y=0;y<c.length;y++){var v={};if(d){var w=!1,S=a.itemArr?a.itemHash[c[y]]:c[y];"string"==typeof S&&(S=S.replace(f,(function(t){return b.replacechar(t)})));for(var C=d.length-1;C>-1;C--){if(S==d[C]){w=!0,d.splice(C,1);break}if("string"==typeof d[C]){for(var _=!1,x=0;x<l.length;x++)if(l[x]==d[C]){_=!0;break}if(_&&(c[y]==this.options.useFilterEmptyMsg||c[y]==this.filterEmptyStr)){w=!0;break}}}v.id1=w}else v.id1=!u;v.id2=c[y],this.options.displayValueOnUseFilterList&&(v.id3=n[y]),m.push(v)}if(h){var I=!0,T=m;for(y=2;y<T.length;y++)if(!T[y].id1){I=!1;break}m[1].id1=!!I}return this._dataList.getDataLength()||(m[1].id1=!1),m}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showGroupbyZone=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.groupbyZoneStatus.groupbyZoneRender){if(this.groupbyZoneStatus.groupbyZoneRender.offsetHeight>0)return;if(WebSquare.style.show(this.groupbyZoneStatus.groupbyZoneRender),this.dom[this.id+"_main_div"].style.top=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px",this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight-this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){}this.setDataTable(),this.drawData(this.rowIndex,0)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideGroupbyZone=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.groupbyZoneStatus.groupbyZoneRender){if(0==this.groupbyZoneStatus.groupbyZoneRender.offsetHeight)return;if(this.dom[this.id+"_main_div"].style.top="0px",this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight+this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){}WebSquare.style.hide(this.groupbyZoneStatus.groupbyZoneRender),this.setDataTable(),this.drawData(this.rowIndex,0)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showGroupbyZoneMessage=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.options.groupbyZoneMessage){var t=this.groupbyZoneStatus.groupbyZoneMessageRender;t&&WebSquare.style.show(t)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideGroupbyZoneMessage=function(){try{if(this.options.groupbyZone&&this.options.groupbyZoneMessage){var t=this.groupbyZoneStatus.groupbyZoneMessageRender;t&&WebSquare.style.hide(t)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.syncWithGroupbyZone=function(){try{if(this.groupbyStatus.grouped&&this.options.groupbyZone){this.clearGroupbyZone();for(var t=a.D.getDataPrefix("header_id"),e=a.D.getDataPrefix("col_id"),i=this.groupbyStatus.sortIndexArr,o=0;o<i.length;o++){var s=i[o],n=this.getColumnID(s),l=this.bodyToHeaderRelation[n],h=document.createElement("div");h.setAttribute(t,l),h.className="w2grid_groupbyZone_column";var d=document.createElement("div");d.className="w2grid_groupbyZone_column_closeButtonDiv";var c=document.createElement("div");c.className="w2grid_groupbyZone_column_closeButtonImg",c.setAttribute(e,n);var u=document.createElement("div");u.className="w2grid_groupbyZone_column_labelDiv";var p=document.createElement("span"),g="textContent"in p?"textContent":"innerText"
;p[g]=this.getHeaderValue(l).replace(/<(\/)?br(\\s)*(\/)?>/gi," "),p.setAttribute("title",p[g]),u.appendChild(p),d.appendChild(c),h.appendChild(u),h.appendChild(d),this.groupbyZoneStatus.groupbyZoneRender.appendChild(h),p.className="w2grid_groupbyZone_column_value"}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.clearGroupbyZone=function(){try{if((this.groupbyStatus.grouped||this.clearGrouping)&&this.options.groupbyZone){for(var t=this.groupbyZoneStatus.groupbyZoneRender,e=t.childNodes,i=[],o=0;o<e.length;o++)null!=e[o].className.match("w2grid_groupbyZone_column")&&i.push(e[o]);for(o=0;o<i.length;o++)t.removeChild(i[o])}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleChangeGroupDepth=function(t){try{for(var e=a.D.getDataPrefix("header_id"),i=this.event.getTargetIterator(t);i.next();)if(i.match("w2grid_groupbyZone_column")){this.addClass("w2noselect"),a.D.emptySelection();var o=i.getElement().getAttribute(e),s=this.getHeaderIndex(o),n=this.getHeaderValue(o),l=this;return void WebSquare.dragdrop.gDragManager.activate(t,null,{id:this.id+"_drag",className:"w2grid_groupbyZone_column_drag",contents:n,delay:15,applyMousePosition:!0,onDrop:function(t,i,o,r,a,n,h){var d,c=null;for(this.isMobile?(c=new WebSquare.targetIterator(document.elementFromPoint(h.changedTouches[0].clientX,h.changedTouches[0].clientY)),h.preventDefault()):c=l.event.getTargetIterator(h);c.next();){if(c.match("w2grid_groupbyZone_column")){d=l.getHeaderIndex(c.getElement().getAttribute(e));break}if(c.match("w2grid_groupbyZone")){var u=l.groupbyStatus.sortIndexArr;d=u[u.length-1];break}if(c.match(null,null,"body"))return}s!=d&&(!1===l.options.noSelect&&!1===l.options.preventCopy&&l.removeClass("w2noselect"),l.hideGroupbyFilterList(),l.changeGroupDepth(s,d))}})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.createContextMenu=function(t,e){try{if("object"==typeof e&&!0===e.hideSystemMenu)return;"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2grid_contextMenu'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_contextMenu_row'>","        <w2:listColumn id='col1' inputType='text' style='' class='w2grid_contextMenu_column'/>","    </w2:listRow>","</w2:list>";var i=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2grid_contextMenu'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_contextMenu_row'>        <w2:listColumn id='col1' inputType='text' style='' class='w2grid_contextMenu_column'/>    </w2:listRow></w2:list>",!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",i),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate();var o=this;this.contextMenu.event.addListener(this.contextMenu.render,"onclick",(function(t){try{d.B.stopPropagation(t);for(var e,i,s=o.event.getTargetIterator(t,this.render),a=o.contextMenu;s.next();){if(s.match("w2grid_contextMenu_column")){e=s.getElement().parentNode;break}if(s.match("w2grid_contextMenu_row")){e=s.getElement();break}if(s.match("w2grid_contextMenu"))break}for(var n=0;n<a.getLength();n++)if(e==a.render.childNodes[n]){i=n;break}o.callSelectedAPI(a.getRowData(n).col1,a.info),o.hideContextMenu();var l=o.contextMenu.getAllData()[i],h={row:a.info.rowIndex,col:a.info.colIndex,focusedCell:a.info.focusedCell,userMenuId:l.userMenuId,isSystemMenu:l.isSystemMenu,systemMenu:l.systemMenu};a.info=null,d.B.fireEvent(o,"oncontextclick",h.row,h.col,h.userMenuId,h.isSystemMenu,h.systemMenu,h.focusedCell)}catch(t){r.w.printStackTrace(t,null,this)}}));var s=this.getContextMenuData(t);if(e&&e.hideSystemMenu&&"object"==typeof e.hideSystemMenu&&e.hideSystemMenu.indexOf)for(var a=0;a<s.length;a++){var n=s[a].systemMenu;e.hideSystemMenu.indexOf(n)>-1&&(s.splice(a,1),a--)}
if(e&&e.appendMenu&&"object"==typeof e.appendMenu&&e.appendMenu.length)for(a=0;a<e.appendMenu.length;a++){var l=e.appendMenu[a];l.col1=l.label,l.isSystemMenu=!1,s.push(l)}if(s.length>0){this.showContextMenu(t,s);for(a=0;a<s.length;a++){var h=s[a];h.className&&(this.contextMenu.render.children[a].className=this.contextMenu.render.children[a].className+" "+h.className)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getContextMenuData=function(t){try{var e=[],i=!0;if(this.groupbyStatus.grouped)for(var o=WebSquare.language.getMessage("Grid_ungroup")||"선택 컬럼 그룹 해제",s=0;s<this.groupbyStatus.sortIndexArr.length;s++)if(t.focusedCell&&t.focusedCell.length>1){for(var a=0;a<t.focusedCell.length;a++)if(this.groupbyStatus.sortIndexArr[s]==t.focusedCell[a].focusedColIndex){e.push({col1:o,isSystemMenu:!0,systemMenu:"Ungroup"}),i=!1;break}if(!i)break}else if(this.groupbyStatus.sortIndexArr[s]==t.colIndex){e.push({col1:o,isSystemMenu:!0,systemMenu:"Ungroup"}),i=!1;break}if(i){var n=WebSquare.language.getMessage("Grid_group")||"선택 컬럼 그룹";e.push({col1:n,isSystemMenu:!0,systemMenu:"Group"})}var l=WebSquare.language.getMessage("Grid_column_hide")||"선택 컬럼 숨기기";if(e.push({col1:l,isSystemMenu:!0,systemMenu:"ColumnHide"}),0==this.options.fixedColumn||this.options.fixedColumn-1<t.colIndex){var h=WebSquare.language.getMessage("Grid_column_fix")||"선택 컬럼 틀고정";e.push({col1:h,isSystemMenu:!0,systemMenu:"ColumnFix"})}if(this.options.fixedColumn>0){var d=WebSquare.language.getMessage("Grid_column_unfix")||"전체 컬럼 틀고정 취소";e.push({col1:d,isSystemMenu:!0,systemMenu:"ColumnUnfixAll"})}var c=WebSquare.language.getMessage("Grid_column_adjustWidth")||"선택 컬럼 크기 자동 맞추기",u=WebSquare.language.getMessage("Grid_column_showAll")||"전체 컬럼 숨기기 해제";e.push({col1:c,isSystemMenu:!0,systemMenu:"ColumnAdjustWidth"});for(s=0;s<this.hiddenList.length;s++)if(this.hiddenList[s]){e.push({col1:u,isSystemMenu:!0,systemMenu:"ColumnShowAll"});break}var p=WebSquare.language.getMessage("Grid_column_adjustAuto")||"전체 컬럼 크기 자동 맞추기";e.push({col1:p,isSystemMenu:!0,systemMenu:"ColumnAdjustAuto"});var g=WebSquare.language.getMessage("Grid_column_adjustAuto_none")||"컬럼 크기 자동 맞추기 해제";if(e.push({col1:g,isSystemMenu:!0,systemMenu:"ColumnAdjustAutoNone"}),this.groupbyStatus.grouped){var m=WebSquare.language.getMessage("Grid_fold_all")||"전체 그룹 접기",f=WebSquare.language.getMessage("Grid_unfold_all")||"전체 그룹 펼치기",b=WebSquare.language.getMessage("Grid_ungroup_all")||"전체 그룹 해제";e.push({col1:m,isSystemMenu:!0,systemMenu:"FoldAll"}),e.push({col1:f,isSystemMenu:!0,systemMenu:"UnfoldAll"}),e.push({col1:b,isSystemMenu:!0,systemMenu:"UngroupAll"})}return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showContextMenu=function(t,e){try{e||(e=this.getContextMenuData(t),this.contextMenu.setPosition(0,0));var i=e.length*(this.options.contextMenuRowHeight+1);this.contextMenu.show(),this.contextMenu.setSize(null,i),this.contextMenu.setJSON(e);var o=d.B.getMouseX(t.event),s=d.B.getMouseY(t.event),a=document.body.scrollTop;a<document.documentElement.scrollTop&&(a=document.documentElement.scrollTop);var n=(s-a)*WebSquare.style.getScale(),l=document.documentElement.clientHeight-n,h=Math.max(l,n),c=WebSquare.style.getSize(this.contextMenu.render,"outerheight");(h<c&&e.length>0||l<c&&n>c)&&(s-=c),document.documentElement.clientWidth<o+this.contextMenu.render.offsetWidth&&(o-=this.contextMenu.render.offsetWidth)<0&&(o=WebSquare.style.getAbsoluteLeft(this.render)),this.contextMenu.setPosition(o,s),this.contextMenu.info=t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideContextMenu=function(){try{this.contextMenu&&this.contextMenu.hide()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.callSelectedAPI=function(t,e){try{
var i=WebSquare.language.getMessage("Grid_column_hide")||"선택 컬럼 숨기기",s=WebSquare.language.getMessage("Grid_column_showAll")||"전체 컬럼 숨기기 해제",a=WebSquare.language.getMessage("Grid_column_fix")||"선택 컬럼 틀고정",n=WebSquare.language.getMessage("Grid_column_unfix")||"전체 컬럼 틀고정 취소",l=WebSquare.language.getMessage("Grid_column_adjustWidth")||"선택 컬럼 크기 자동 맞추기",h=WebSquare.language.getMessage("Grid_column_adjustAuto")||"전체 컬럼 크기 자동 맞추기",c=WebSquare.language.getMessage("Grid_column_adjustAuto_none")||"컬럼 크기 자동 맞추기 해제",u=WebSquare.language.getMessage("Grid_fold_all")||"전체 그룹 접기",p=WebSquare.language.getMessage("Grid_unfold_all")||"전체 그룹 펼치기",g=WebSquare.language.getMessage("Grid_ungroup_all")||"전체 그룹 해제",m=WebSquare.language.getMessage("Grid_ungroup")||"선택 컬럼 그룹 해제",f=WebSquare.language.getMessage("Grid_group")||"선택 컬럼 그룹",b=e.focusedCell||[],y=[];if(b.length>0){for(var v=0;v<e.focusedCell.length;v++)y.push(e.focusedCell[v].colIndex);y.sort((function(t,e){return t-e}));for(v=0;v<y.length-1;)y[v]===y[v+1]?y.splice(v,1):v++}switch(t){case i:if(-1===e.colIndex)break;if(y.length>1)for(v=0;v<y.length;v++)this.setColumnVisible(y[v],!1),this.groupbyStatus.grouped&&this.ungroupColumn(y[v]);else this.setColumnVisible(e.colIndex,!1),this.groupbyStatus.grouped&&this.ungroupColumn(e.colIndex);break;case s:for(v=0;v<this.hiddenList.length;v++)this.hiddenList[v]&&this.setColumnVisible(this.columnOrder[v-this.defaultColCnt],!0);break;case a:if(-1===e.colIndex)break;if(y.length>1)for(v=0;v<y.length;v++)this.setFixedColumn(parseInt(y[v],10)+1);else this.setFixedColumn(parseInt(e.colIndex,10)+1);break;case n:if(-1===e.colIndex)break;this.setFixedColumn(0);break;case l:if(-1===e.colIndex)break;if(!this.autofitColumn){var w={type:"selectedColumn",colIndex:e.colIndex};this.setAutoFit(w)}break;case h:w={type:"allColumn"};this.setAutoFit(w);break;case c:this.clearAutoFit();break;case u:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.foldAll();break;case p:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.unfoldAll();break;case g:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.clearGroupby();break;case m:if(-1===e.colIndex)break;if(y.length>1)for(v=0;v<y.length;v++)this.ungroupColumn(y[v]);else this.ungroupColumn(e.colIndex);break;case f:if(-1===e.colIndex)break;if(this.groupbyStatus.grouped){if((w={}).sortIndex=this.groupbyStatus.sortIndexArr,w.sortOrder=this.groupbyStatus.sortOrderArr,y.length>1)for(v=0;v<y.length;v++)w.sortIndex.push(y[v]),w.sortOrder.push(1);else w.sortIndex.push(e.colIndex),w.sortOrder.push(1);!1===d.B.fireEvent(this,"ongroupby",w)&&((w=o.x.extend({},this.groupbyDisplayOptions)).sortIndex=this.groupbyStatus.sortIndexArr,w.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(w,!0))}else{w={};if(y.length>1){w.sortIndex=y,w.sortOrder=[];for(v=0;v<y.length;v++)w.sortOrder.push(1)}else w.sortIndex=[e.colIndex],w.sortOrder=[1];if(!1===d.B.fireEvent(this,"ongroupby",w)){var S=this.getColCnt()+this.defaultColCnt;w.rowNumHeader={colSpan:S,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' 건 ] ' ",align:"left"},w.rowNumFooter={colSpan:S},this.groupby(w,!0)}}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.createCustomFilterList=function(t,e){try{var i;!0!==e&&(i=this.headerToBodyRelation[t]);var o=this.options.filterListRowHeight+1,s=this.options.filterListVisibleRowNum||this.options.customFilterListVisibleRowNum,n=WebSquare.language.getMessage("Grid_filter_search")||"검색",l=this.getElementById(this.id+"_head_table");this._dataLayerHeight=this.dataLayerHeight?this.dataLayerHeight:this.getElementById(this.id+"_body_table").parentNode.offsetHeight,this._dataLayerHeight=this._dataLayerHeight-l.offsetHeight;var h=0;this.options.useFilterSearch?(h=Math.min(parseInt(this._dataLayerHeight/o),s),this.customFilterScrollViewRenderHeight=h*o):this.customFilterScrollViewRenderHeight=s*o
;"<w2:scrollView xmlns:w2=\"http://www.inswave.com/websquare\" style='position:absolute; z-index:11;' class='w2grid_customFilter_scrollView'>","</w2:scrollView>";var c=WebSquare.xml.parse("<w2:scrollView xmlns:w2=\"http://www.inswave.com/websquare\" style='position:absolute; z-index:11;' class='w2grid_customFilter_scrollView'></w2:scrollView>",!0).documentElement;WebSquare.xml.setAttribute(c,"bounce",!1),WebSquare.xml.setAttribute(c,"horizontalScroll",!1),WebSquare.xml.setAttribute(c,"paging",!1),WebSquare.xml.setAttribute(c,"scrollType","auto"),WebSquare.xml.setAttribute(c,"showHorizontalScroll",!1),WebSquare.xml.setAttribute(c,"showVerticalScroll",!1),WebSquare.xml.setAttribute(c,"verticalScroll",!1),this.customFilterScrollView=new WebSquare.uiplugin.scrollView(this.id+"_customFilter_scrollView","",c);var u="";if(this.options.useFilterSearch)u+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_customFilter_list' placeholder='"+n+"' virtualized='true' visibleRowNum='"+(h-1)+"' useSearch='true' wheelRows='1' _listRowHeight='"+o+"'>";else{this.options.useSearchFilter&&(useSearchFilterStr=" useSearchFilter='true'"),u+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_customFilter_list'>"}u+="    <w2:listRow tagName='div' style='height: "+this.options.filterListRowHeight+"px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_customFilter_list_listRow'>",u+="        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_customFilter_list_listColumn_checkbox'/>",u+="        <w2:listColumn id='id2' inputType='text' style='' class='w2grid_customFilter_list_listColumn_text'/>",u+="        <w2:listColumn id='id3' inputType='text' style='display:none;'/>",u+="    </w2:listRow>",u+="</w2:list>";var p=WebSquare.xml.parse(u,!0).documentElement;if(this.customFilterList=new WebSquare.uiplugin.list(this.id+"_customFilter_list","",p),this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]},this.customFilterScrollView.addControl(this.customFilterList),this.customFilterScrollView.writeTo(this),this.customFilterScrollView.activate(),this.options.useSearchFilter){this.customFilterList.myhelper=new WebSquare.korHelper;var g=WebSquare.document.createElement("div");g.id=this.id+"_filter_Search_div",g.style.position="relative",g.style.backgroundColor="white",g.style.boxSizing="border-box",this._filter_searchInput=WebSquare.document.createElement("input"),this._filter_searchInput.id=this.id+"_filter_search_input",this._filter_searchInput.className="w2grid_filter_search_input",this._filter_searchInput.name=this.id+"_filter_search_input",this._filter_searchInput.style.height=o-3+"px",a.D.isIEAllVersion(),this._filter_searchInput.placeholder=n,g.appendChild(this._filter_searchInput),this.customFilterScrollView.render.insertBefore(g,this.customFilterScrollView.render.firstChild);var m=this.uuid,f=this.id;d.B.addListener(g,"onkeydown",(function(t){d.B.stopPropagation(t),a.D.setTimeout((function(){WebSquare.idCache[m].customFilterList.find()}),{key:f+"_customFilterList_search",delay:100})})),d.B.addListener(g,"onkeyup",(function(t){d.B.stopPropagation(t);var e=WebSquare.idCache[m],i=e.getHeaderDIV(e.customFilterList.currentHeaderID).getElementsByClassName("w2grid_customFilter_open")[0];if(13==t.keyCode){(e.options.useFilterSearch?this.dom.input.value:e._filter_searchInput.value)&&(e.hideCustomFilterList(),i&&i.focus())}else 27==t.keyCode&&(e.hideCustomFilterList(),i&&i.focus())})),this.customFilterScrollViewRenderHeight+=o}var b=this;if(this.customFilterScrollView.event.addListener(this.customFilterScrollView.render,"onclick",this.customFilterScrollView.event.bindAsEventListener(this.customFilterList,(function(t){try{d.B.stopPropagation(t);var e=d.B.getTarget(t)
;if(e.className.match("w2list_input")||e.className.match("w2list_scroll_thumb")||e.className.match("w2grid_filter_search_input")||e.className.match("w2grid_customFilter_scrollView"))return;var i,o=e.parentNode,s=0;if(this.options.virtualized?(i=this.getElementById(this.id+"_items_main").childNodes,s=this.firstListIndex):i=this.render.childNodes,e.className.match("w2grid_customFilter_list_listRow")){e=(o=e).firstChild;for(var a=0;a<this.getLength();a++)if(o==i[a]){this.setCellData(a+s,"id1",!e.checked);break}}if(e.className.match("w2grid_customFilter_list_listColumn_text")&&(i[0]!=o||this.options.virtualized&&s>0)){e=o.firstChild;for(a=0;a<this.getLength();a++)if(o==i[a]){this.setCellData(a+s,"id1",!e.checked);break}}var n=this.currentHeaderID,l=b.headerToBodyRelation[n],h=b._dataList.getColumnIndex(l),c=b.headerInfoHash[n],u=0;if(c&&c.options.hideCustomFilter&&(u=1),1!==u&&o==i[0]&&0===s){if(e.className.match("w2grid_customFilter_list_listColumn_checkbox")){if(e.checked){if(b.firstOpenCustomFilter[n]){b.headerID=n,b.targetColID=l,(b.options.useFilterSearch||b.options.useSearchFilter)&&b.setAutoCompleteItem(l,n),b.setCustomFilterExpression();for(a=1;a<this.getLength();a++)this.setCellData(a,"id1",!1);if(b.options.useFilterSearch||b.options.useSearchFilter){var p=b.getCustomFilterListJSON({colID:l,headerID:n});b._setFilterListHeight(n,p.length)}return}return b.hideCustomFilterList(),b.firstOpenCustomFilter[n]||(b.firstOpenCustomFilter[n]=!0),void b._showCustomFilter(n)}if(b.customFilterStatusObj[n]=!1,delete this.customFilterListFilterInfo[l],b.dataList.removeColumnFilter(l),b.options.useFilterSearch||b.options.useSearchFilter){(p=b.getCustomFilterListJSON({colID:l,headerID:n}))[0].id1=!1;for(a=1-u;a<p.length;a++)p[a].id1=!0}for(a=1;a<this.getLength();a++)this.setCellData(a,"id1",!0);b.options.useFilterSearch&&(this.setJSON(p),b._setFilterListHeight(n,p.length))}else if(e.className.match("w2grid_customFilter_list_listColumn_text"))return void b._showCustomFilter(n)}else if(1!==u&&this.setCellData(0,"id1",!1),b.customFilterStatusObj[n]=!1,delete this.customFilterListFilterInfo[l],o==i[1-u-s]){var g=e.checked;if(e.className.match("w2grid_customFilter_list_listColumn_text"))g=!i[1-u].firstChild.checked;for(a=1-u;a<this.getLength();a++)this.setCellData(a,"id1",g)}var m=[],f=[],y=[],v=this.getLength();for(a=2-u;a<v;a++)this.getCellData(a,"id1")?f.push(a):y.push(a);var w=f.length>y.length,S=(b._dataList.getFilterList(),this.getLength()-2+u),C=b.getCellInfo(l),_=w?y:f,x="*";for(a=0;a<_.length;a++){var I=this.getCellData(_[a],"id2");(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&C.formatter&&(C.options.displayFormat||C.options.displayFormatter||C.options.ioFormat)&&(I=C.formatter.unformat(I)),b.options.useFilterListFormat&&C.useCustomFormatter&&""===(I=this.getCellData(_[a],"id3"))&&(x="+"),w&&I===b.filterEmptyStr?x="+":m.push(I)}b.options.useFilterListFormat&&C.useCustomFormatter||(m=b.changeItemValue("value",l,m));var T=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(a=0;a<m.length;a++){var k=m[a];"string"==typeof k&&(m[a]=k.replace(T,(function(t){return b.replacechar(t)})))}var D="";0==f.length?D+="/^[a-z0-9_-]{3,16}$/":D+=w?"^\\n*(?:(?!^"+m.join("$)(?!^")+"$).)"+x+"\\n*$":"^"+m.join("$|^")+"$";var L,W="";if(C&&(W=b.getColumnOption(C.options.col_id,"dataType")),L="number"==W?new RegExp(D):new RegExp(D,"gi"),d.B.fireEvent(b._dataList,"onbeforecolumnfilterchange"),f.length<S&&(WebSquare.DataCollection.stopBroadCast=!0),b.dataList.removeColumnFilter(l,{noRefreshAfter:!0}),this.filterHistory.column[0]!==l&&(this.filterHistory.column.unshift(l),this.filterHistory.filteredRowIndexArr.unshift(b._dataList.filteredRowIndexArr.slice(0))),f.length<S){if(WebSquare.DataCollection.stopBroadCast=!1,w){this.customFilterListFilterInfo[l]=[];for(a=0;a<f.length;a++){I=this.getCellData(f[a],"id2")
;(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&C.formatter&&(C.options.displayFormat||C.options.displayFormatter||C.options.ioFormat)&&(I=C.formatter.unformat(I)),b.options.useFilterListFormat&&C.useCustomFormatter&&(I=this.getCellData(f[a],"id3")),this.customFilterListFilterInfo[l].push(I)}(C.itemsetObj||C.itemArr)&&(b.options.useFilterListFormat&&C.useCustomFormatter||(this.customFilterListFilterInfo[l]=b.changeItemValue("value",l,this.customFilterListFilterInfo[l])));for(a=0;a<this.customFilterListFilterInfo[l].length;a++){var A=this.customFilterListFilterInfo[l][a];A===b.filterEmptyStr?this.customFilterListFilterInfo[l][a]="":"string"==typeof A&&(A=A.replace(T,(function(t){return b.replacechar(t)})),this.customFilterListFilterInfo[l][a]=A)}}else this.customFilterListFilterInfo[l]=m;b.dataList.setColumnFilter({type:"regExp",colIndex:h,key:L,condition:"and",columnfilterchangeFire:!1,noRefreshAfter:!0})}else delete this.customFilterListFilterInfo[l];var M=b.getElementById(b.id+"_"+n+"_filter");1!==u&&this.getCellData(0,"id1")||WebSquare.style.removeClass(M,"w2grid_customFilter_filter");var E=!0,q=(S=this.getLength()-2+u,this.getAllData());for(a=2-u;a<q.length;a++)if(!q[a].id1){E=!1;break}E?(this.setCellData(1-u,"id1",!0),this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift()):(this.setCellData(1-u,"id1",!1),WebSquare.style.addClass(M,"w2grid_customFilter_filter")),d.B.fireEvent(b._dataList,"onaftercolumnfilterchange"),b.options.groupbyFilterBox&&(this.isChanged=!0)}catch(t){r.w.printStackTrace(t,null,this)}}))),(this.options.useFilterSearch||this.options.useSearchFilter)&&(this.customFilterList.find=function(){this.search="contain";var t="";t=b.options.useFilterSearch?this.dom.input.value:b._filter_searchInput.value;var e=[],i=this.currentHeaderID,o=b.headerToBodyRelation[i],s=b._dataList.getColumnIndex(o),r=b.getCellInfo(o),a=b.headerInfoHash[i],n=0;a&&a.options.hideCustomFilter&&(n=1);for(var l=0;l<2-n;l++)e.push({id1:l-n==1,id2:y[l].id2});if(""!=t){b.itemValueObj={},b.customFilterStatusObj[i]=!1,b.firstOpenCustomFilter[i]=!1;var h=e.length;b.dataList.removeColumnFilter(o),delete this.customFilterListFilterInfo[o];for(N=b.getCustomFilterListJSON({colID:o,headerID:i,useFormat:!1}),l=2-n;l<N.length;l++){var c=!1,u=N[l].id2+"";if("contain"==this.search?c=this.myhelper.containWith(u,t):"start"==this.search?c=this.myhelper.startWith(u,t):"none"==this.search&&(c=u==t),c){var p,g=N[l].id2;(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.formatter&&(r.options.displayFormat||r.options.displayFormatter||r.options.ioFormat)&&(g=r.formatter.format(g)),(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.useCustomFormatter&&(g=N[l].id2,p=N[l].id3),e.push({id1:!0,id2:g,id3:p})}}h===e.length&&e.splice(1-n,1),this.setJSON(e),b._setFilterListHeight(i,N.length,e.length);var m=[],f=[],v=[],w=this.getLength();for(l=2-n;l<w;l++)this.getCellData(l,"id1")?f.push(l):v.push(l);if(0!=f.length||0!=v.length){var S=f.length>v.length;0===v.length&&(S=!1);var C=S?v:f,_="*";for(l=0;l<C.length;l++){g=this.getCellData(C[l],"id2");(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.formatter&&(r.options.displayFormat||r.options.displayFormatter||r.options.ioFormat)&&(g=r.formatter.unformat(g)),(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.useCustomFormatter&&(g=this.getCellData(C[l],"id3")),S&&g===b.filterEmptyStr?_="+":m.push(g)}b.options.useFilterListFormat&&r.useCustomFormatter||(m=b.changeItemValue("value",o,m));var x=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(l=0;l<m.length;l++){var I=m[l];"string"==typeof I&&(m[l]=I.replace(x,(function(t){return b.replacechar(t)})))}var T="";0==f.length?T+="/^[a-z0-9_-]{3,16}$/":T+=S?"^\\n*(?:(?!^"+m.join("$)(?!^")+"$).)"+_+"\\n*$":"^"+m.join("$|^")+"$";var k,D=""
;(r=b.getCellInfo(o))&&(D=b.getColumnOption(r.options.col_id,"dataType")),k="number"==D?new RegExp(T):new RegExp(T,"gi"),d.B.fireEvent(b._dataList,"onbeforecolumnfilterchange");var L=this.getLength()-2+n;if(f.length<L&&(WebSquare.DataCollection.stopBroadCast=!0),b.dataList.removeColumnFilter(o,{noRefreshAfter:!0}),this.filterHistory.column[0]!==o&&(this.filterHistory.column.unshift(o),this.filterHistory.filteredRowIndexArr.unshift(b._dataList.filteredRowIndexArr.slice(0))),f.length<=L){if(WebSquare.DataCollection.stopBroadCast=!1,S){this.customFilterListFilterInfo[o]=[];for(l=0;l<f.length;l++){g=this.getCellData(f[l],"id2");(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.formatter&&(r.options.displayFormat||r.options.displayFormatter||r.options.ioFormat)&&(g=r.formatter.unformat(g)),(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.useCustomFormatter&&(g=this.getCellData(f[0],"id3")),this.customFilterListFilterInfo[o].push(g)}(r.itemsetObj||r.itemArr)&&(this.customFilterListFilterInfo[o]=b.changeItemValue("value",o,this.customFilterListFilterInfo[o]));for(l=0;l<this.customFilterListFilterInfo[o].length;l++){var W=this.customFilterListFilterInfo[o][l];W===b.filterEmptyStr?this.customFilterListFilterInfo[o][l]="":"string"==typeof W&&(W=W.replace(x,(function(t){return b.replacechar(t)})),this.customFilterListFilterInfo[o][l]=W)}}else this.customFilterListFilterInfo[o]=m;b.dataList.setColumnFilter({type:"regExp",colIndex:s,key:k,condition:"and",columnfilterchangeFire:!1,noRefreshAfter:!0})}else delete this.customFilterListFilterInfo[o];R=b.getElementById(b.id+"_"+i+"_filter");1!==n&&this.getCellData(0,"id1")||WebSquare.style.removeClass(R,"w2grid_customFilter_filter");var A=!0,M=(L=this.getLength()-2+n,this.getAllData());for(l=2-n;l<M.length;l++)if(!M[l].id1){A=!1;break}A?(this.setCellData(1-n,"id1",!0),this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift(),this.listRowObjArr.length!==y.length&&WebSquare.style.addClass(R,"w2grid_customFilter_filter")):(this.setCellData(1-n,"id1",!1),WebSquare.style.addClass(R,"w2grid_customFilter_filter")),d.B.fireEvent(b._dataList,"onaftercolumnfilterchange"),b.options.groupbyFilterBox&&(this.isChanged=!0)}}else{for(var E=b._dataList.getFilterList(),q=!1,l=0;l<E.length;l++)if(E[l]&&E[l].colIndex===s&&"func"!==E[l].type){q=!0;break}if(this.listRowObjArr.length!==y.length&&q){b.itemValueObj={},b.customFilterStatusObj[i]=!1,delete this.customFilterListFilterInfo[o],b.firstOpenCustomFilter[i]=!1,b.dataList.removeColumnFilter(o);var R=b.getElementById(b.id+"_"+i+"_filter");1!==n&&this.getCellData(0,"id1")||WebSquare.style.removeClass(R,"w2grid_customFilter_filter");for(var N=b.getCustomFilterListJSON({colID:o,headerID:i}),l=2-n;l<N.length;l++)e.push({id1:!0,id2:N[l].id2});this.setJSON(e),b._setFilterListHeight(i,e.length)}else q||e.length-(2-n)!=0||(this.setJSON(y),b._setFilterListHeight(i,y.length))}},this.customFilterList._inputKeyDown=this.customFilterList.inputKeyDown,this.customFilterList.inputKeyDown=function(t,e){var i=this;this.mytime=setTimeout((function(t){i.find()}),100,t)}),!0===e)return;var y=this.getCustomFilterListJSON({colID:i,headerID:t});if(this.customFilterList.setJSON(y),this.applyFilterListFormat(y,t),this._setFilterListSize({headerID:t,dataLen:y.length,type:"create"}),this.options.useFilterSearch){this.removeFocusedCell();var v=this.customFilterList.getElementById(this.customFilterList.id+"_input");WebSquare.style.getSize(v,"innerwidth"),WebSquare.style.getSize(v,"width");this.customFilterList.dom.input.focus()}else if(this.options.useSearchFilter){this.removeFocusedCell();v=this.customFilterScrollView.getElementById(this.id+"_filter_search_input"),WebSquare.style.getSize(v,"innerwidth"),WebSquare.style.getSize(v,"width");v.focus()}this.customFilterList.currentHeaderID=t,this.customFilterList.customFilterListFilterInfo={},this.customFilterList.customFilterListAction=!1,
this.customFilterList.customUserFilterListAction=!1,WebSquare.style.show(this.customFilterScrollView.render)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setFilterListSize=function(t){try{var e,i,o=t.headerID,s=t.dataLen,n=t.type,l=this.getElementById(this.id+"_"+o),h=this.options.filterListRowHeight+1,d=(this.options.useFilterSearch?s+1:s)*h-1,c=d;if("height"!=n){var u=this.options.filterListVisibleRowNum||this.options.customFilterListVisibleRowNum;if(this.options.useFilterSearch){var p=Math.min(parseInt(this._dataLayerHeight/h),u);this.customFilterScrollViewRenderHeight=p*h}else this.customFilterScrollViewRenderHeight=u*h}var g=WebSquare.style.getSize(this.customFilterScrollView.render,"outerwidth")-WebSquare.style.getSize(this.customFilterScrollView.render,"width"),m=WebSquare.style.getSize(this.customFilterScrollView.render,"outerHeight")-WebSquare.style.getSize(this.customFilterScrollView.render,"height"),f=WebSquare.style.getRelativeTop(l,this.render)+l.offsetHeight+1,b=WebSquare.style.getRelativeLeft(l,this.render),y=0,v=this.getElementById(this.id+"_head_table"),w=this.dataLayerHeight?this.dataLayerHeight:this.getElementById(this.id+"_body_table").parentNode.offsetHeight;w-=v.offsetHeight,this.options.useSearchFilter&&(y=h);var S=Math.min(this.customFilterScrollViewRenderHeight+y,d+y,w-m),C=this.getElementById(this.id+"_customFilter_scrollView_container");this.options.useFilterSearch?d=S:WebSquare.style.setStyle(C,"overflow-x","auto");var _=this.getElementById(this.id+"_size_y").clientWidth,x=this.getElementById(this.id+"_body_table"),I=WebSquare.style.getSize(x,"outerwidth")-WebSquare.style.getSize(x,"width"),T=this.getElementById(this.id+"_dataLayer").clientWidth-l.offsetLeft-g-I,k=e=this.customFilterList.getMaxItemWidth();if(a.D.getBoolean(this.headerInfoHash[o].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList))l.clientWidth>e&&(e=l.clientWidth),i=Math.min(T,e),this.options.useSearchFilter||(this.options.useFilterSearch?c>S&&(e+=_,i+=_):S<d&&i+_<=T&&(i+=_)),this.options.useSearchFilter?e>k&&WebSquare.style.setStyle(C,"overflow-x","hidden"):this.options.useFilterSearch&&WebSquare.style.setStyle(C,"overflow-x","hidden");else{var D=parseInt(this.headerInfoHash[o].options.filterListWidth);D>0?e<(i=D-g)&&(e=i):this.options.filterListWidth>0?e<(i=this.options.filterListWidth-g)&&(e=i):(i=l.clientWidth,l.clientWidth>e&&(e=l.clientWidth)),T<i&&(i=T),(this.options.useFilterSearch||e>k)&&WebSquare.style.setStyle(C,"overflow-x","hidden")}"height"!=n&&this.customFilterScrollView.setPosition(b,f-1);var L=0;if(this.options.useSearchFilter){var W=this.customFilterScrollView.getElementById(this.id+"_filter_search_input");L=W.offsetHeight,C.style.height=S-L+"px"}this.customFilterScrollView.setSize(i,S),this.customFilterList.setSize(e,d);var A,M,E=0;if(this.options.useFilterSearch||(C.clientWidth<k?(E=C.offsetHeight-C.clientHeight,this._dataLayerHeight>S+E&&(this.customFilterScrollView.setSize(null,S+E),this.options.useSearchFilter&&(C.style.height=C.offsetHeight+E+"px"))):WebSquare.style.setStyle(C,"overflow-x","hidden")),this.options.useResizeFilterList)this.customFilterScrollView.addClass("w2scrollView_resize"),a.D.getBoolean(this.headerInfoHash[o].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)?(A=l.clientWidth,M=i):(A=i,M=Math.min(T,e)),this.customFilterScrollView.render.style.minWidth=A+"px",this.customFilterScrollView.render.style.maxWidth=M+"px",this.customFilterScrollView.render.style.minHeight=C.offsetHeight+L+"px",this.customFilterScrollView.render.style.maxHeight=Math.min(this._dataLayerHeight,d+L)+E+"px","create"==n&&(scrollViewObserver=new ResizeObserver((function(t){var e=t[0].contentRect.height-L;C.offsetHeight!=e&&(C.style.height=e+"px")})),scrollViewObserver.observe(this.customFilterScrollView.render))}catch(t){r.w.printStackTrace(t)}},u.prototype._setFilterListHeight=function(t,e,i){try{var o=i||e;this._setFilterListSize({headerID:t,dataLen:o,
type:"height"})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toggleCustomFilterList=function(t){try{this.customFilterScrollView&&this.customFilterList&&("none"==this.customFilterScrollView.render.style.display||this.customFilterList.currentHeaderID!=t?this.moveCustomFilterList(t):this.hideCustomFilterList())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showCustomFilterList=function(t,e){try{if(this.customFilterScrollView&&this.customFilterList){if(e){WebSquare.style.show(this.customFilterScrollView.render),this.options.useResizeFilterList&&(this.customFilterScrollView.render.style.minWidth="",this.customFilterScrollView.render.style.maxWidth="",this.customFilterScrollView.render.style.minHeight="",this.customFilterScrollView.render.style.maxHeight="");var i=t.headerID,o=t.dataLength;this._setFilterListSize({headerID:i,dataLen:o})}var s=this.getElementById(this.id+"_customFilter_scrollView_container");if(this.customFilterList.currentHeaderID=i,s.scrollLeft=0,s.scrollTop=0,this.options.useFilterSearch){this.removeFocusedCell(),this.customFilterList.dom.input.value="";var a=this.customFilterList.getElementById(this.customFilterList.id+"_input");WebSquare.style.getSize(a,"innerwidth"),WebSquare.style.getSize(a,"width");this.customFilterList.dom.input.focus()}else if(this.options.useSearchFilter){this.removeFocusedCell();a=this.customFilterScrollView.getElementById(this.id+"_filter_search_input"),WebSquare.style.getSize(a,"innerwidth"),WebSquare.style.getSize(a,"width"),s.offsetWidth,s.clientWidth;WebSquare.style.getSize(a,"outerwidth")-WebSquare.style.getSize(a,"width"),a.value="",a.focus()}WebSquare.style.show(this.customFilterScrollView.render)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.moveCustomFilterList=function(t){try{if(this.customFilterScrollView&&this.customFilterList){var e=this.headerToBodyRelation[t];WebSquare.style.show(this.customFilterScrollView.render);var i=this.getCustomFilterListJSON({colID:e,headerID:t});this.customFilterList.setJSON(i),this.applyFilterListFormat(i,t),this.customFilterList.currentHeaderID=t,this.showCustomFilterList({headerID:t,dataLength:i.length},!0)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideCustomFilterList=function(){try{this.customFilterScrollView&&this.customFilterList&&(WebSquare.style.hide(this.customFilterScrollView.render),this.customFilterList.isChanged&&this.options.groupbyFilterBox&&(this.refreshGroupbyFilterBox(),this.customFilterList.isChanged=!1))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getCustomFilterListJSON=function(t){try{var e;if(this.customFilterList.filterHistory.column[0]!==t.colID||this.options.showAllFilterList)if(this.options.useFilterSearch||this.options.useSearchFilter){var i=this._dataList.getFilterList();if(i.length>0){var o=!1;1==i.length&&this.getColumnID(i[0].colIndex)===t.colID&&(o=!0)}e=o?this._dataList.filterManager.allRowIndexArr:this._dataList.filteredRowIndexArr}else this.options.showAllFilterList?(this.customFilterList.customFilterListFilterInfo,e=this._dataList.filterManager.firstFiltering?this._dataList.filteredRowIndexArr:this._dataList.filterManager.allRowIndexArr):e=this._dataList.filteredRowIndexArr;else e=this.customFilterList.filterHistory.filteredRowIndexArr[0];var s=this.dataList.getColData(t.colID,e),a=this.getCellInfo(t.colID),n=this.getUniqueValueOfArray(s),l=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];l.push("");var h,d,c=("select"==a.options.inputType||"text"==a.options.inputType)&&this.options.useFilterListFormat&&a.useCustomFormatter?"customFormatted":"label",u=this.changeItemValue(c,t.colID,n.slice(0)),p=this.customFilterStatusObj[t.headerID]||!1,g=WebSquare.language.getMessage("Grid_Customized_Filter")||"사용자필터",m=WebSquare.language.getMessage("Grid_checked_all")||"전체선택",f=!p
;if(!p)if(this.customFilterList.customFilterListFilterInfo&&Object.keys(this.customFilterList.customFilterListFilterInfo).length>0)t.colID in this.customFilterList.customFilterListFilterInfo&&(d=(h=this.customFilterList.customFilterListFilterInfo[t.colID]).slice(0));else if(this.options.showAllFilterList){var b=this._dataList.getFilteredColData(t.colID);d=this.getUniqueValueOfArray(b).slice(0),p||s.length==b.length||(f=!1)}for(var y=[{id1:p,id2:g},{id1:f,id2:m}],v=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,w=this,S=0;S<u.length;S++){var C={};if(d){var _,x=!1;"string"==typeof(_=a.useCustomFormatter&&a.mainGrid.options.useFilterListFormat?n[S]:a.itemArr?a.itemHash[u[S]]:u[S])&&(_=_.replace(v,(function(t){return w.replacechar(t)})));for(var I=d.length-1;I>-1;I--){if(_==d[I]){x=!0,d.splice(I,1);break}if("string"==typeof d[I]){for(var T=!1,k=0;k<l.length;k++)if(l[k]==d[I]){T=!0;break}if(T&&(u[S]==this.options.useFilterEmptyMsg||u[S]==this.filterEmptyStr)){x=!0;break}}}C.id1=x}else C.id1=!p;var D=u[S],L=n[S];(this.options.useFilterSearch||this.options.useSearchFilter)&&this.options.useFilterListFormat&&a.useCustomFormatter&&(D=this._applyFormatter(a,L)),C.id2=D,(this.options.displayValueOnUseFilterList||this.options.useFilterListFormat&&a.useCustomFormatter)&&(C.id3=n[S]),y.push(C)}var W=0,A=this.headerInfoHash[t.headerID];if(A&&A.options.hideCustomFilter&&(y.shift(),W=1),h){var M=!0,E=y;for(S=2-W;S<E.length;S++)if(!E[S].id1){M=!1;break}y[1-W].id1=!!M}return this._dataList.getDataLength()||(y[1-W].id1=!1),y}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.changeItemValue=function(t,e,i,o){try{var s,n=[],l=!1,h=this.getCellInfo(e),d=h.options.inputType;if("custom"==d&&(h=h.cellManagerHashByRowIndex[h.editRowIndex]?h.cellManagerHashByRowIndex[h.editRowIndex]:h),h.itemHash={},!1===o||(s=h.options.filterDisplayMode?h.options.filterDisplayMode:"label"),h.itemsetObj&&""!=h.itemsetObj.nodeset&&h.itemsetObj.nodeset.wq_replaceAll(" ","").indexOf("data:")>=0&&(!h.itemArr||h.itemArr.length<1)){h.itemArr=[];var c=h.itemsetObj.nodeset.replace("data:",""),u=this.modelControl.getDataComp(c),p=function(t,e){var i=t,o=h.options.delimiter?h.options.delimiter:"";switch(s){case"value delim label":i=e+o+i;break;case"label delim value":i=i+o+e;break;case"value":i=e}return i};if(u&&WebSquare.idCache[u.uuid])switch(u.initializeType){case"linkedDataList":for(var g=[],m={},f=u.getAllNoFilteredData(),b=0;b<u._dataList.getDataLength();b++){var y=f[b*u.cellIdList.length+u.bodyIdColIndexMap[h.itemsetObj.label]],v=f[b*u.cellIdList.length+u.bodyIdColIndexMap[h.itemsetObj.value]];a.D.isNumber(v)&&(v+=""),m[y]!=v&&(m[y]=v,g.push({orgLabel:y,label:p(y,v),value:v}))}h.itemArr=g;break;case"dataList":for(g=[],m={},b=0;b<u.getDataLength();b++){y=u.getCellData(b,h.itemsetObj.label),v=u.getCellData(b,h.itemsetObj.value);a.D.isNumber(v)&&(v+=""),m[y]!=v&&(m[y]=v,g.push({orgLabel:y,label:p(y,v),value:v}))}h.itemArr=g;break;case"dataMap":for(g=[],m={},b=0;b<u.getCount();b++){y=u.get(h.itemsetObj.label),v=u.get(h.itemsetObj.value);a.D.isNumber(v)&&(v+=""),m[y]!=v&&(m[y]=v,g.push({orgLabel:y,label:p(y,v),value:v}))}h.itemArr=g}}if(h.itemArr){if("customFormatted"==t){for(b=0;b<i.length;b++){var w=this._applyFormatter(h,i[b]);n.push(w),h.itemHash[w]=i[b]}return n}var S="label"==t?"value":"label";"label"==t&&!1===o&&h.itemArr.length>0&&h.itemArr[0].orgLabel&&(t="orgLabel");var C=h.itemArr.slice(0);for(b=0;b<i.length;b++){var _=i[b];if(a.D.isNumber(_)&&(_+=""),"custom"==d)-1==this.modelControl.getDataComp(h.dataComp).dataArr.indexOf(i[b])&&n.push(i[b]);for(var x=C.length-1;x>-1;x--){var I=C[x];if(I[S]==_){n.push(I[t]),C.splice(x,1),"label"==t&&(h.itemHash[I[t]]=I[S]);break}if("label"==t||"orgLabel"==t){if(!_||this.useFilterEmptyValueInfo[_]){l||(l=!0,n.push(this.filterEmptyStr));break}}else if("value"==t&&_==this.filterEmptyStr){for(var T in this.useFilterEmptyValueInfo)n.push(T);break}}}}else{if("customFormatted"==t){for(b=0;b<i.length;b++){w=this._applyFormatter(h,i[b]);n.push(w),
h.itemHash[w]=i[b]}return n}for(b=0;b<i.length;b++){if("label"==t){if(!i[b]&&0!==i[b]||this.useFilterEmptyValueInfo[i[b]]){l||(l=!0,n.push(this.filterEmptyStr));continue}}else if("value"==t&&i[b]==this.filterEmptyStr){for(var T in this.useFilterEmptyValueInfo)n.push(T);continue}n.push(i[b]),h.itemHash[i[b]]=i[b]}}return n}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.resizeGridList=function(){try{var t,e;if(this.groupbyFilterList)return;if(!this.customFilterList)return;t=this.customFilterList,e=this.customFilterScrollView;var i=document.getElementById(this.id+"_"+t.currentHeaderID);if(i){var o,s=i.clientWidth,n=(this.options.useFilterSearch?t.listRowObjArr.length+1:t.listRowObjArr.length)*(this.options.filterListRowHeight+1)-1,l=e.render.clientHeight,h=WebSquare.style.getSize(this.customFilterScrollView.render,"outerwidth")-WebSquare.style.getSize(this.customFilterScrollView.render,"width"),d=WebSquare.style.getRelativeTop(i,this.render)+i.offsetHeight+1,c=WebSquare.style.getRelativeLeft(i,this.render),u=this.getElementById(this.id+"_customFilter_scrollView_container");this.options.useSearchFilter&&WebSquare.style.setStyle(u,"overflow-x","auto");var p=this.getElementById(this.id+"_size_y").clientWidth,g=this.getElementById(this.id+"_body_table"),m=WebSquare.style.getSize(g,"outerwidth")-WebSquare.style.getSize(g,"width"),f=this.getElementById(this.id+"_dataLayer").clientWidth-i.offsetLeft-h-m,b=s=this.customFilterList.getMaxItemWidth();if(a.D.getBoolean(this.getHeaderInfo(t.currentHeaderID).options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList))this.customFilterList?(i.clientWidth>s&&(s=i.clientWidth),o=Math.min(f,s),this.options.useSearchFilter||(this.options.useFilterSearch?n>l&&(s+=p,o+=p):l<t.render.clientHeight&&o+p<=f&&(o+=p)),this.options.useSearchFilter?s>b&&WebSquare.style.setStyle(u,"overflow-x","hidden"):this.options.useFilterSearch&&WebSquare.style.setStyle(u,"overflow-x","hidden")):this.groupbyFilterList&&(o=s=b);else if(this.customFilterList){var y=parseInt(this.headerInfoHash[t.currentHeaderID].options.filterListWidth);y>0?s<(o=y-h)&&(s=o):this.options.filterListWidth>0?s<(o=this.options.filterListWidth-h)&&(s=o):(o=i.clientWidth,i.clientWidth>s&&(s=i.clientWidth)),f<o&&(o=f),(this.options.useFilterSearch||s>b)&&WebSquare.style.setStyle(u,"overflow-x","hidden")}e.setPosition(c,d-1),t.setSize(s,null),e.setSize(o,l)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showGroupbyHeaderGhost=function(t,e){try{var i=this.getHeaderValue(e);WebSquare.dragdrop.gDragManager.activate(t,null,{id:this.id+"_drag",className:"w2grid_groupbyZone_header_drag",contents:i,delay:15,applyMousePosition:!0,onDrop:function(t,e,i,o,s,r,a){}})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAdaptiveColumnVisible=function(t,e){try{if(this.hiddenAdaptiveList[t]==!e||t>=this.hiddenAdaptiveList.length)return;var i=this;function r(t){var e=i.getColumnID(t),o=null!=i.bodyToHeaderRelation[e]?i.getHeaderLayer(i.bodyToHeaderRelation[e]):null;return null!=o?o:r(t-1)}var o=r(t),s=document.getElementsByClassName(this.id+"_columnstyle_"+(t-this.defaultColCnt)+"_"),n=this.getColumnStyleValue(t-this.defaultColCnt,"height");if(null==this.oldOptions.headerColBorder&&null!=o&&(this.oldOptions.headerColBorder=WebSquare.style.getStyle(o,"border-top")),null==this.oldOptions.headerPaddingTop&&null!=o&&(this.oldOptions.headerPaddingTop=WebSquare.style.getStyle(o,"padding-top")),null==this.oldOptions.headerPaddingBottom&&null!=o&&(this.oldOptions.headerPaddingBottom=WebSquare.style.getStyle(o,"padding-bottom")),s.length>0&&""!=this.oldOptions.bodyColBorder&&(this.oldOptions.bodyColBorder=WebSquare.style.getStyle(s[0],"border-top")),this.hasSubtotal)for(var l=0,h=0,d=this.drawedSubtotal[0][0].childNodes,c=0;c<d.length&&((w=parseInt(d[c].getAttribute("colSpan")))||(w=1),!(h<=t&&t<h+w));c++)h+=w,l++;if(this.hasFooter){var u=0,p=0,g=this.htmlInfo.foot.rowArr;for(c=0;c<g.length;c++)for(var m=g[c],f=0;f<m.length;f++){
var b=m[f];if((w=parseInt(b.colSpan))||(w=1),p<=t-this.defaultColCnt&&t-this.defaultColCnt<p+w)break;p+=w,u++}}if(e){o.style.height=n,o.style.removeProperty("padding"),o.style.borderTop=this.oldOptions.headerColBorder;for(c=0;c<s.length;c++)s[c].style.height=n,s[c].style.removeProperty("padding"),s[c].style.borderTop=this.oldOptions.bodyColBorder;if(this.setAdaptiveColumnStyle(t,"height",n),this.setAdaptiveColumnStyle(t,"padding",""),this.setAdaptiveColumnStyle(t,"border-top",this.oldOptions.bodyColBorder),this.hasFooter)for(c=0;c<g.length;c++){b=g[c][u];var y=parseInt(this.getFooterStyle(b.id,"height"))+parseInt(o.offsetHeight);!(w=parseInt(b.colSpan))||parseInt(this.getFooterStyle(b.id,"height"))<=0?(this.setFooterStyle(b.id,"height",o.style.height),this.setFooterStyle(b.id,"padding",o.style.padding),this.setFooterStyle(b.id,"borderTop",o.style.borderTop)):this.setFooterStyle(b.id,"height",y+"px")}if(this.hasSubtotal)for(c=0;c<this.drawedSubtotal.length;c++)for(f=0;f<this.drawedSubtotal[c].length;f++){var v=this.drawedSubtotal[c][f].childNodes;y=parseInt(v[l].style.height)+parseInt(o.offsetHeight);!(w=parseInt(v[l].getAttribute("colSpan")))||parseInt(v[l].style.height)<=0?(v[l].style.height=o.style.height,v[l].style.padding=o.style.padding,v[l].style.borderTop=o.style.borderTop):v[l].style.height=y+"px"}}else{if(this.hasFooter)for(c=0;c<g.length;c++){b=g[c][u],y=parseInt(this.getFooterStyle(b.id,"height"))-parseInt(o.offsetHeight);!(w=parseInt(b.colSpan))||y<=0?(this.setFooterStyle(b.id,"height","0px"),this.setFooterStyle(b.id,"padding","0px"),this.setFooterStyle(b.id,"borderTop","0px")):this.setFooterStyle(b.id,"height",y+"px")}if(this.hasSubtotal)for(c=0;c<this.drawedSubtotal.length;c++)for(f=0;f<this.drawedSubtotal[c].length;f++){var w;v=this.drawedSubtotal[c][f].childNodes,y=parseInt(v[l].style.height)-parseInt(o.offsetHeight);!(w=parseInt(v[l].getAttribute("colSpan")))||y<=0?(v[l].style.height="0px",v[l].style.padding="0px",v[l].style.borderTop="0px"):v[l].style.height=y+"px"}var S=parseInt(o.colSpan,10),C=!1;if(S>1)for(var _=a.D.getDataPrefix("header_id"),x=this.headerToBodyRelation[o.getAttribute(_)],I=this.getColumnIndex(x),T=I;T<I+S;T++)this.hiddenList[T]||(C=!0);(S<2||!C)&&(o.style.height="0px",o.style.padding="0px",o.style.borderTop="0px");for(c=0;c<s.length;c++)s[c].style.height="0px",s[c].style.padding="0px",s[c].style.borderTop="0px";this.setAdaptiveColumnStyle(t,"height","0px"),this.setAdaptiveColumnStyle(t,"padding","0px"),this.setAdaptiveColumnStyle(t,"border-top","0px")}parseInt(o.colSpan,10)>1&&this.setAdaptiveGridHeaderHeight(),this.hiddenAdaptiveList[t]=!e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.applyFilterHistory=function(){try{if(this.getElementById(this.id+"_groupbyFilterBox_apply").checked=this.groupbyFilterBox_history.length>0,!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var t=this.groupbyFilterBox_select.getSelectedIndex(),e=this.groupbyFilterBox_history[t];if(e.groupbyOptions)this.groupby(JSON.parse(e.groupbyOptions,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"==typeof i&&i.constructor===RegExp?i:e}catch(t){return e}}))),this.customFilterList&&(this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),e.customFilterStatusObj?this.customFilterStatusObj=JSON.parse(e.customFilterStatusObj):this.customFilterStatusObj={};else{for(var i in this.groupbyStatus.grouped&&this.clearGroupby(),this._dataList.clearFilter(e.filterOption.length>0),this._dataList.sortStatusInfo={},this._dataList.sortStatusArr=[],this.headerInfoHash){var o=this.getElementById(this.id+"_"+i+"_filter");o&&WebSquare.style.removeClass(o,"w2grid_customFilter_filter")}this.refreshCustomFilterHistory(t),this._dataList.broadcast({gridView:["clearHeaderSort"]}),this._dataList.broadcast({gridView:["notifyMultisort"]})}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._refreshCustomFilterHistory=function(t,e,i){try{
for(var o=t?JSON.parse(t,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"==typeof i&&i.constructor===RegExp?i:"object"==typeof i&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):[],s="",a="",n=0;n<o.length;n++){var l=o[n];l.noRefresh=n<o.length-1,l.keepTop=!1,l.internal=!0;var h="";for(var d in l.bodyIdColIndexMap)l.bodyIdColIndexMap[d]===l.colIndex&&(h=d);"sort"!==l.type&&(s=',"'+h+'"'+s,a=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+a),this._dataList.setFilter(l);var c=this.bodyToHeaderRelation[this._dataList.cellIdList[l.colIndex]],u=this.getElementById(this.id+"_"+c+"_filter");u&&WebSquare.style.addClass(u,"w2grid_customFilter_filter")}s=s.slice(1)+"],",a=a.slice(1)+"]}",this.customFilterList||this.createCustomFilterList(null,!0);var p='{"column":['+s+'"filteredRowIndexArr":['+a;this.customFilterList.filterHistory=JSON.parse(p),this.customFilterList.customFilterListFilterInfo=e?JSON.parse(e,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"==typeof i&&i.constructor===RegExp?i:"object"==typeof i&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):{},this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),this.customFilterStatusObj=i?JSON.parse(i):{},this.groupbyStatus.grouped||this.drawHeaderSortImages()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshCustomFilterHistory=function(t){try{for(var e=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()],i="",o="",s=0;s<e.filterOption.length;s++){var a=e.filterOption[s];a.noRefresh=s<e.filterOption.length-1,a.keepTop=!1,a.internal=!0;var n="";for(var l in a.bodyIdColIndexMap)a.bodyIdColIndexMap[l]===a.colIndex&&(n=l);"sort"!==a.type&&(i=',"'+n+'"'+i,o=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+o),this._dataList.setFilter(a);var h=this.bodyToHeaderRelation[this._dataList.cellIdList[a.colIndex]],d=this.getElementById(this.id+"_"+h+"_filter");d&&WebSquare.style.addClass(d,"w2grid_customFilter_filter")}i=i.slice(1)+"],",o=o.slice(1)+"]}",this.customFilterList||this.createCustomFilterList(null,!0);var c='{"column":['+i+'"filteredRowIndexArr":['+o;this.customFilterList.filterHistory=JSON.parse(c),e.customFilterListFilterInfo?this.customFilterList.customFilterListFilterInfo=JSON.parse(e.customFilterListFilterInfo,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"==typeof i&&i.constructor===RegExp?i:"object"==typeof i&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):this.customFilterList.customFilterListFilterInfo={},this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),e.customFilterStatusObj?this.customFilterStatusObj=JSON.parse(e.customFilterStatusObj):this.customFilterStatusObj={}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.clearFilterHistory=function(){try{this.getElementById(this.id+"_groupbyFilterBox_apply").checked=!1,this.groupbyFilterBox_history=[],this.groupbyFilterBox_select.removeAll(),this.groupbyStatus.grouped?this.clearGroupby():this._dataList.clearFilter()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshGroupbyFilterBox=function(){try{var t=this._dataList.getFilterList(),e="",i=!(!this.options.customFilterBox||!this.groupbyStatus.groupbyOptions),o=i?"[Groupby] ":"";if(!this.options.customFilterBox&&!this.groupbyStatus.groupbyOptions)return;e+=o,e+="(";for(var s,n=null,l="",h=!0,d=o,c=!1,u=this.options.groupbyFilterBoxLabelSize,p=0;p<t.length;p++){var g="regExp"===(I=t[p]).type,m="func"===I.type&&I.param;if(g||m){h||(e+=" "+I.condition+" ",d+=I.condition),e+="(";var f=this._dataList.cellIdList[I.colIndex],b=this.getHeaderValue(this.bodyToHeaderRelation[f])||f;if(g){
var y=this.dataList.getColData(f,this._dataList.filteredRowIndexArr);if((D=this.getUniqueValueOfArray(y)).length<=0){if(a.D.isNullReg(I.key)){n=f,l=b;break}continue}for(var v=0,w=0;w<D.length;w++){var S=D[w];this.useFilterEmptyValueInfo[S]&&(S=this.filterEmptyStr),v>0&&(v<u&&(e+=" OR "),d+="OR"),v<u&&(e+=b+" = "+S),d+=f+"="+S,v++}v>u&&(e+=" OR ... ("+(v-u)+" omitted)")}else if(m)for(w=0;w<I.param.length;w++){null!=(A=I.param[w]).radio&&(e+=1===A.radio?" OR ":" AND ",d+=1===A.radio?" OR ":" AND ");var C="string"==typeof A.auto?A.auto.replace(/[\\](?![\\])/g,""):A.auto;e+=b+" "+this.selectboxItemSet[A.select-1]+" "+C,d+=f+" "+this.selectboxItemSet[A.select-1]+" "+A.auto}e+=")",h=!1}}if(e+=")",n&&(e=o+"("+l+" = NULL)",d=o+n+"_NULL_"),"()"!==e&&e!==o+"()"||(e=o+"ALL",d=o+"_ALL_",c=!0),!c&&this.options.groupbyFilterBoxFormatter){var _=a.D.getGlobalFunction(this.options.groupbyFilterBoxFormatter,this.scope_id);if("function"==typeof _){var x=[];if(d===o+n+"_NULL_")x.push({header:l,filter:[]});else for(p=0;p<t.length;p++){var I;g="regExp"===(I=t[p]).type,m="func"===I.type&&I.param;if(g||m){f=this._dataList.cellIdList[I.colIndex];var T=this.getHeaderValue(this.bodyToHeaderRelation[f])||f;if(g){var k={header:T,filter:[]},D=(y=this.dataList.getColData(f,this._dataList.filteredRowIndexArr),this.getUniqueValueOfArray(y)),L=[];for(w=0;w<D.length;w++){S=D[w];this.useFilterEmptyValueInfo[S]&&(S=this.filterEmptyStr),L.push(S)}var W=this.getCellInfo(f);k.filter.push({operator:"in",values:L,labels:W.itemsetObj||W.itemArr?this.changeItemValue("label",f,D.slice(0)):L}),x.push(k)}else if(m){for(k={header:T,filter:[]},w=0;w<I.param.length;w++){var A=I.param[w],M={};null!=A.radio&&(M.gate=1===A.radio?"or":"and"),M.operator=this.selectboxItemSet[A.select-1];C="string"==typeof A.auto?A.auto.replace(/[\\](?![\\])/g,""):A.auto;M.values=C;W=this.getCellInfo(f);M.labels=W.itemsetObj||W.itemArr?this.changeItemValue("label",f,[C])[0]:C,k.filter.push(M)}I.param.length>0&&x.push(k)}}}var E=_.call(this,x,i);null!=E&&!1!==E&&(e=E)}}if(!c&&!1===this.groupbyFilterBox_select.setValueNM(d))this.groupbyFilterBox_select.addItem(d,e),this.groupbyFilterBox_select.setValueNM(d),d===o+"_ALL_"?s={filterOption:[],customFilterStatusObj:"{}"}:(s={filterOption:t,customFilterStatusObj:JSON.stringify(this.customFilterStatusObj)},this.groupbyStatus.grouped&&this.groupbyStatus.filter?s.customFilterListFilterInfo=JSON.stringify(this.groupbyStatus.filter,(function(t,e){return"function"==typeof e||"object"==typeof e&&e.constructor===RegExp?e.toString():e})):this.customFilterList&&this.customFilterList.customFilterListFilterInfo&&(s.customFilterListFilterInfo=JSON.stringify(this.customFilterList.customFilterListFilterInfo,(function(t,e){return"function"==typeof e||"object"==typeof e&&e.constructor===RegExp?e.toString():e})))),this.groupbyStatus.groupbyOptions&&(s.groupbyOptions=this.groupbyStatus.groupbyOptions),this.groupbyFilterBox_history.push(s);this.getElementById(this.id+"_groupbyFilterBox_apply").checked=!c}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getMouseColumnIndex=function(t){try{var e=t.colIndex,i=t.offsetX,o=t.offsetLeft,s=t.colSpan;if(i-o<(n=.3*this.colWidthList[e]>10?10:parseInt(.3*this.colWidthList[e],10))&&0!=e)e--;else for(var a=0;a<s;a++){var n,l=parseInt(this.colGroup.bodyColList[e+a].style.width,10);if((o+=l)-(n=.3*l>10?10:parseInt(.3*l,10))<i&&i<o+n){e+=a;break}}return e}catch(t){return r.w.printStackTrace(t,null,this),e}},u.prototype._useRole=function(){try{return!a.D.isMobile()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAdaptive=function(){try{var t=this.options.adaptive,e=parseInt(this.options.adaptiveThreshold)||480;for(var i in this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}
"crosstab"==t&&(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=e?this.addAdaptive():this.removeAdaptive()))}catch(t){r.w.printStackTrace(t)}},u.prototype.addAdaptive=function(){try{var t,e=this.options.adaptive;for(var i in"crosstab"==e&&(t=this.hasFooter?"w2grid_adaptive_crosstab w2grid_adaptive_crosstab_footer":"w2grid_adaptive_crosstab"),this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}if(!this.hasClass(t)){this.oldOptions.visibleRowNum=this.options.visibleRowNum,this.options.visibleRowNum="all",this.adjustDraw(this.lastIndex),this.addClass(t),this.setAdaptiveGridBodyHeight(),this.setAdaptiveGridHeaderHeight(),this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(var o=this.defaultColCnt;o<this.hiddenList.length;o++)1==this.hiddenList[o]&&this.setAdaptiveColumnVisible(o,!1);this.event.hasEvent(this.id+"_body_tbody","onscroll")||this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onscroll",this.event.bindAsEventListener(this,this.tbodyMoveXScroll))}if(this.options.adaptiveSlideHeader){var s=this.getElementById(this.id+"_head_table"),n=this.getElementById(this.id+"_body_tbody");this.slideHeadObj||(this.slideHeadObj={},this.slideHeadObj.render=s,this.slideHeadObj.headTableWidth=s.offsetWidth,this.slideHeadObj.hidden=!1),"absolute"!=this.slideHeadObj.render.style.position?n.scrollWidth>n.clientWidth+this.slideHeadObj.headTableWidth&&(this.slideHeadObj.render.style.position="absolute",this.options.adaptiveSlideHeaderOnScroll||($(this.slideHeadObj.render.firstChild).animate({width:"hide"}),this.slideHeadObj.hidden=!0)):n.scrollWidth==n.clientWidth&&(a.D.clearTimeout(this.id+"_adaptiveSlideHeader"),this.slideHeadObj.render.style.position="",this.slideHeadObj.render.firstChild.style.display="",this.slideHeadObj.hidden=!1)}}catch(t){r.w.printStackTrace(t)}},u.prototype.removeAdaptive=function(){try{var t;if("crosstab"==this.options.adaptive&&(t=this.hasFooter?"w2grid_adaptive_crosstab w2grid_adaptive_crosstab_footer":"w2grid_adaptive_crosstab"),this.options.adaptiveSlideHeader&&this.slideHeadObj&&(this.slideHeadObj.render.style.position="",this.slideHeadObj.render.firstChild.style.display="",this.slideHeadObj.hidden=!1),this.hasClass(t)){this.options.visibleRowNum=this.oldOptions.visibleRowNum;for(var e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!0);if(this.removeClass(t),this.removeAdaptiveGridBodyHeight(),this.removeAdaptiveGridHeaderHeight(),this.hasSubtotal&&this.removeAdaptiveGridSubtotalHeight(),""!=this.options.visibleRowNum){this.focusedCell=[],this.initializeDrawController(),this.dataRowList=[],this.drawedRowLength=0,this.lastDisplayedRow=-1;for(var i=this.getElementById(this.id+"_body_tbody");i.firstChild;)i.removeChild(i.firstChild);if(this.options.senseReader){for(e=0;e<this.adaptiveEmbeddedInputIdList.length;e++)delete this.dom[this.adaptiveEmbeddedInputIdList[e]];this.adaptiveEmbeddedInputIdList=[]}this.drawDataTable(0)}this.event.removeEvent(this.id+"_body_tbody","onscroll")}}catch(t){r.w.printStackTrace(t)}},u.prototype.doAdaptive=function(){try{if(""!=this.options.adaptive)return;this.options.adaptive="crosstab",this.options.adaptiveThreshold="9999999",this.setAdaptive(),this.adaptiveDoneBy="doAdaptive"}catch(t){r.w.printStackTrace(t)}},u.prototype.undoAdaptive=function(){try{if("doAdaptive"!=this.adaptiveDoneBy)return;this.options.adaptive="crosstab",this.options.adaptiveThreshold="1",this.setAdaptive(),this.options.adaptive="",this.options.adaptiveThreshold="",this.adaptiveDoneBy=""}catch(t){r.w.printStackTrace(t)}},u.prototype.checkRefreshAdaptive=function(){try{var t=!1;if(!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var e=WebSquare.BootLoader.fullViewed||!1,i=a.D.fullViewed||!1
;if(!e&&!i&&this.checkAdaptiveGridType()&&(""!=this.options.adaptive||0!=Object.keys(this.hideThresholdObj).length)){var o=this.options.adaptive,n=parseInt(this.options.adaptiveThreshold)||480;"crosstab"==o&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=n&&(t=!0)}}return t}catch(t){r.w.printStackTrace(t)}},u.prototype.refreshAdaptive=function(t){try{if(!0===this.checkRefreshAdaptive())if(t&&!0===t.simple){for(var e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!0);for(var i in this.hasSubtotal&&this.removeAdaptiveGridSubtotalHeight(),this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!1)}else this.removeAdaptive(),this.addAdaptive()}catch(t){r.w.printStackTrace(t)}},u.prototype._applyFormatter=function(t,e){try{var i=a.D.getGlobalFunction(t.options.customFormatter,this.scope_id),o=e,s=e;if("text"==t.options.inputType)(t.options.displayFormat||t.options.displayFormatter||t.options.ioFormat)&&(s=t.formatter.format(e));else if("select"==t.options.inputType)for(var n=t.itemArr.slice(0),l=0;l<=n.length-1;l++)if(n[l].value==e){s=n[l].label;break}return"function"==typeof(i=a.D.getGlobalFunction(t.options.customFormatter,this.scope_id))&&(o=i.call(t.mainGrid,o,s)),""!=o?o:this.filterEmptyStr}catch(t){r.w.printStackTrace(t,null,this)}};var p=function(){};p.prototype.setTableLayout=function(){try{this.initializeHead(),this.initializeFooter(),this.setDataLayerPosition(),this.arrangeOverflowXScroll(),this.handlerResize_drawInitializer(),this.setTrRowTable(),this.setTrSubtotalRowTable(),this.initialColWidthList=this.colWidthList.slice(),this.initialGridWidth=this.gridWidth,this._setAutoFit(),this.realRowDataLength=this.oneRowDataLength+this.defaultColCnt,this.associateHeaderBody(),this.options.columnMove&&this.createBlockedHeaderInfo(),this.lastDisplayedRow=-1;for(var t=0;t<this.oneRowDataLength;t++){var e=this.cellInfoHash2[this.tdIdList[t]],i=new WebSquare.uiplugin.cellInfo(e,this);"textarea"==i.options.inputType&&(this.isExistTextarea=!0),i.options.colMerge&&(this.isColMerge=!0,a.D.getBoolean(this.options.colMergeAnd)&&(this.isColMergeAnd=!0),i.options.upperColumn&&(this.upperToLowerColumnRelation[i.options.upperColumn]||(this.upperToLowerColumnRelation[i.options.upperColumn]=[]),this.upperToLowerColumnRelation[i.options.upperColumn].push(i.options.id))),null!=i.options.maxLength&&""!==i.options.maxLength&&(i.options.maxlength=i.options.maxLength),this.cellInfoHash[i.id]=i,this.cellIdList.push(i.id);var o=i.options.hideThreshold;void 0!==o&&(this.hideThresholdObj[i.id]=o)}this.drawFooter(),this.drawHeader();for(var s=0;s<this.thIdList.length;s++){var n=this.headerInfoHash2[this.thIdList[s]];if(n){var l=new WebSquare.uiplugin.headerInfo(n,this);this.headerInfoHash[l.id]=l,this.colMoveHeaderIndexMap[l.id]=s}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setDataLayerPosition=function(){try{var t=this.getElementById(this.id+"_dataLayer");if(this.hasFooter){var e=this.getElementById(this.id+"_foot_table").offsetHeight;e=0==e?this.footerHeight:e,t.style.bottom=e+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.arrangeOverflowXScroll=function(t){try{this.fixedWidth=0;for(var e=this.getFixedColumnLastIndex(),i=0;i<e;i++)this.hiddenList[i]||(this.fixedWidth+=this.colWidthList[i]);this.fixedWidth=parseInt(this.fixedWidth,10)||0,this.fixedWidthRight=0;var o=this.getFixedRightColumnLastIndex(),s=this.colWidthList.length;for(i=s-1;i>=o;i--)this.hiddenList[i]||(this.fixedWidthRight+=this.colWidthList[i]);if(this.fixedWidthRight=parseInt(this.fixedWidthRight,10)||0,
e>this.defaultColCnt||o<s)for(var a=this.getColumnCount(),n=this.data_td_list.length/a,l=0;l<n+1;l++){var h;if(e>this.defaultColCnt)(h=this.data_td_list[l*a+(e-this.defaultColCnt)])&&this.addClass(h,"w2grid_fixedColumn");if(o<s)(h=this.data_td_list[l*a+(o-this.defaultColCnt)])&&this.addClass(h,"w2grid_fixedRightColumn")}if(!0!==t){var d=this.getElementById(this.id+"_scrollX_div"),c=this.getElementById(this.id+"_scrollX_table"),u=0===d.offsetWidth?0:d.offsetWidth-c.offsetWidth,p=this.getElementById(this.id+"_scrollX_left"),g=this.getElementById(this.id+"_scroll_size"),m=this.getElementById(this.id+"_scrollX_fixedRight");p.style.width=this.fixedWidth+"px",g.style.width=this.gridWidth-this.fixedWidth-this.fixedWidthRight-u+"px",m.style.width=this.fixedWidthRight+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handlerResize_drawInitializer=function(){try{if(0==this.render.offsetWidth||0==this.render.offsetHeight)return;if(this.setOverflowY(),this.setOverflowX(),this.setIE6Fix(),this.options.headFiller){var t=this.getElementById(this.id+"_header_bg_td"),e=this.getElementById(this.id+"_dataLayer").offsetWidth-1,i=this.getElementById(this.id+"_head_table").offsetHeight,o=e,s=i;for(t.style.width=e+"px";t.offsetWidth!=o;)t.offsetWidth>o?e--:e++,t.style.width=e+"px";for(t.style.height=i+"px";t.offsetHeight!=s;)t.offsetHeight>s?i--:i++,t.style.height=i+"px"}if(this.options.groupbyZone){var a=this.getElementById(this.id+"_main_div"),n=this.groupbyZoneStatus.groupbyZoneRender?this.groupbyZoneStatus.groupbyZoneRender.offsetHeight:0;if(this.isIE6or7&&(a.style.height=a.offsetHeight-n),this.options.groupbyFilterBox){var l=this.getElementById(this.id+"_groupbyFilterBox_div"),h=this.getElementById(this.id+"_groupbyFilterBox_buttons");if(this.isIE6or7){a.style.height=a.offsetHeight-(this.scrollLayerWidthSize+l.offsetHeight)-3+"px",h.style.left=-h.offsetWidth;var d=this.scrollLayerWidthSize+l.offsetHeight+n,c=Math.ceil(d/this.oneRowScrollHeight),u=this.getElementById(this.id+"_scrollY_div");this.lastIndex>-1&&this.lastIndex>c&&u.offsetHeight<u.scrollHeight&&this.cutGridBottom(this.lastIndex-c)}else"bottom"===this.options.groupbyFilterBoxLocation&&(a.style.bottom=this.scrollLayerWidthSize+l.offsetHeight+"px",a.style.height="")}else this.isIE6or7&&this.cutGridBottom(this.lastIndex-Math.ceil(n/this.oneRowScrollHeight))}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setIE6Fix=function(){try{var t=this.options.fixPrint&&(a.D.isIE(9)||a.D.isIE(10)||s.v.browserCheck.ieAllVersion&&"11"==document.documentMode||a.D.isFF());if(this.isIE6or7||a.D.isOpera()||t){var e=this.getElementById(this.id+"_scrollX_div"),i=this.getElementById(this.id+"_scrollY_div"),o=this.getElementById(this.id+"_main_div"),n=this.render.offsetHeight-e.offsetHeight,l=this.render.offsetWidth-i.offsetWidth+2;n=n<0?0:n,l=l<0?0:l,o.style.height=n+"px",o.style.width=l+"px";var h,d=0;if(this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d),""!==this.options.visibleRowNum){var c=this.getElementById(this.id+"_body_table");h=!this.defaultDataLayerHeight||c.offsetHeight>this.defaultDataLayerHeight?c.offsetHeight+d:this.defaultDataLayerHeight+d}else h=n-d-1;h=h<0?0:h;var u=this.getElementById(this.id+"_dataLayer");u.style.height=h+"px",this.dataLayerHeight=h;var p=this.getElementById(this.id+"_scrollX_right");p.style.width=p.parentNode.offsetWidth+"px",t&&(o.style.position="relative",o.style.bottom="",o.style.right="",u.style.position="relative",u.style.bottom="")}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setOverflowXNative=function(t){if("native"===this.options.drawType){var e=document.getElementById(this.id+"_scrollX_div"),i=document.getElementById(this.id+"_dataLayer");if(!1===t||this.options.fixedColumn<=0&&this.options.fixedRightColumn<=0)return e.style.visibility="hidden",void(i.style.overflowX="auto");!0===t&&(e.style.visibility="visible",i.style.overflowX="hidden")}},
p.prototype.setOverflowX=function(t){var e=!0;switch(void 0!==t?("hidden"!=t&&"auto"!=t&&"scroll"!=t&&(t="auto"),this.options.overflowX=t):e=!1,t=this.isMobile?"hidden":this.options.overflowX){case"auto":this.setOverflowXAuto();break;case"hidden":this.setOverflowXHidden();break;default:this.setOverflowXScroll()}this.isMobile&&this.setIScrollX(),e&&this.setIE6Fix()},p.prototype.setOverflowXAuto=function(){var t=this.getElementById(this.id+"_scrollX_div"),e=this.getElementById(this.id+"_scrollX_left"),i=this.getElementById(this.id+"_scrollX_right"),o=e.offsetWidth;if(this.options.fixedRightColumn){var s=this.getElementById(this.id+"_scrollX_fixedRight");s&&(o+=s.offsetWidth)}i.firstChild.offsetWidth>t.offsetWidth-o?this.setOverflowXScroll():this.setOverflowXHidden()},p.prototype.setOverflowXScroll=function(){try{var t=(l=this.getElementById(this.id+"_scrollX_div")).style.height;if(l.style.height=this.scrollLayerWidthSize+"px",this.options.scrollFocus){var e=this.getElementById(this.id+"_scrollX_right"),i=this.getElementById(this.id+"_scrollX_left");e.setAttribute("aria-hidden","true"),e.firstChild.offsetWidth>l.offsetWidth-i.offsetWidth?e.setAttribute("tabIndex","0"):e.setAttribute("tabIndex","-1")}var o=this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation;if(-1!==this.rowIndex&&"0px"===t&&!o&&"native"!==this.options.drawType)if(""!==this.options.visibleRowNum){var s=parseInt(this.render.style.height,10);this.setSize(null,s+this.scrollWidthSize)}else{this.dataLayerHeight-=this.scrollWidthSize;var a=this.dataRowList[(this.lastIndex+1)*this.oneRowLength-1];a&&a.offsetTop+a.offsetHeight>this.dataLayerHeight&&(this._setRowDisplay(this.lastIndex,"none"),this.lastIndex=this.lastIndex-1,this.maxRowLength=this.maxRowLength-1,this.lastDisplayedRow=this.lastIndex,this.lastTopRowIndex=null,this.setScrollYHeight({noDraw:!0}),this.setOverflowYAuto())}if(!this.isIE6or7){var n=this.getElementById(this.id+"_main_div"),l=this.getElementById(this.id+"_scrollX_div"),h=parseInt(l.style.height,10);if(n.style.bottom=h+"px",this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation){var d=this.getElementById(this.id+"_groupbyFilterBox_div");n.style.bottom=this.scrollLayerWidthSize+d.offsetHeight+"px"}}if(o)(d=this.getElementById(this.id+"_groupbyFilterBox_div")).style.bottom=this.scrollLayerWidthSize+"px"}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setOverflowXHidden=function(){try{var t=this.getElementById(this.id+"_scrollX_div"),e=t.style.height;if(t.style.height="0px",this.options.scrollFocus){var i=this.getElementById(this.id+"_scrollX_right"),o=this.getElementById(this.id+"_scrollX_left");i.setAttribute("aria-hidden","true"),i.firstChild.offsetWidth>t.offsetWidth-o.offsetWidth?i.setAttribute("tabIndex","0"):i.setAttribute("tabIndex","-1")}"0px"!=e&&this.handleScrollX();var s=this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation;if(-1!==this.rowIndex&&"0px"!==e&&!s&&"native"!==this.options.drawType)if(""!==this.options.visibleRowNum){var a=parseInt(this.render.style.height,10);this.setSize(null,a-this.scrollWidthSize)}else{this.dataLayerHeight+=this.scrollWidthSize,this.maxRowLength=this.maxRowLength+1;var n=this.getDataLength();this.maxRowLength>=n&&(this.getElementById(this.id+"_size_y").style.height="0px"),this.setOverflowYAuto(),this.drawData(this.rowIndex,this.lastIndex);for(var l=0;l<this.tdIdList.length;l++){var h=this.cellInfoHash[this.tdIdList[l]];if(h.dataComp){var d=this.modelControl.getDataComp(h.dataComp);"linkedDataList"===d.initializeType&&d.syncWithParent()}}this.lastTopRowIndex=null}var c=this.getElementById(this.id+"_main_div");if(this.isIE6||(c.style.bottom="0px"),s)this.getElementById(this.id+"_groupbyFilterBox_div").style.bottom="0px"}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setOverflowY=function(t){if("native"!==this.options.drawType){var e=!0
;switch(void 0!==t?("hidden"!=t&&"auto"!=t&&"scroll"!=t&&(t="auto"),this.options.overflowY=t):e=!1,t=this.isMobile?"hidden":this.options.overflowY){case"auto":this.setOverflowYAuto();break;case"hidden":this.setOverflowYHidden();break;default:this.setOverflowYScroll()}this.isMobile&&this.setIScrollY(),e&&this.setIE6Fix()}},p.prototype.setOverflowYAuto=function(){if("native"!==this.options.drawType){var t=this.getElementById(this.id+"_scrollY_div");t.offsetHeight<t.scrollHeight?this.setOverflowYScroll():this.setOverflowYHidden()}},p.prototype.setOverflowYScroll=function(){var t=this.getElementById(this.id+"_scrollY_div"),e=this.getElementById(this.id+"_scrollX_div"),i=this.getElementById(this.id+"_main_div"),o=parseInt(t.style.width,10);if(t.style.width=this.scrollLayerWidthSize+"px",t.style.overflowY="scroll",this.isIE6){var s=this.render.offsetWidth-this.scrollWidthSize;e.style.width=(s>0?s:0)+"px",t.style.height=this.render.offsetHeight+"px"}else i.style.right=this.scrollWidthSize-1+"px",e.style.right=this.scrollWidthSize+"px";this.options.groupbyZone&&this.options.groupbyFilterBox&&(this.getElementById(this.id+"_groupbyFilterBox_div").style.right=i.style.right);0==o&&!0!==this._setOverflowYScrollFlag&&(this._setOverflowYScrollFlag=!0,this._setAutoFit(),this._setOverflowYScrollFlag=!1),this.options.scrollFocus&&(t.setAttribute("aria-hidden","true"),t.offsetHeight<t.scrollHeight?t.setAttribute("tabIndex","0"):t.setAttribute("tabIndex","-1"))},p.prototype.setOverflowYHidden=function(){var t=this.getElementById(this.id+"_scrollY_div"),e=parseInt(t.style.width,10);t.style.width="0px",t.style.overflowY="hidden";var i=this.getElementById(this.id+"_main_div");this.isIE6||(i.style.right="0px",this.getElementById(this.id+"_scrollX_div").style.right="0px");this.options.groupbyZone&&this.options.groupbyFilterBox&&(this.getElementById(this.id+"_groupbyFilterBox_div").style.right=i.style.right);0!=e&&!0!==this._setOverflowYHiddenFlag&&(this._setOverflowYHiddenFlag=!0,this._setAutoFit(),this._setOverflowYHiddenFlag=!1),this.options.scrollFocus&&(t.setAttribute("aria-hidden","true"),t.offsetHeight<t.scrollHeight?t.setAttribute("tabIndex","0"):t.setAttribute("tabIndex","-1"))},p.prototype.setTrRowTable=function(){try{this.tempDiv=document.createElement("div"),this.tempDiv.style.width="0px",this.tempDiv.style.height="0px",this.tempDiv.style.overflow="hidden",this.tempDiv.innerHTML="<table id='tempTable' style='table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.htmlInfo.body,"tbody","td",this.options.bodyTdClass)+"</table>",this.tempTr=this.tempDiv.getElementsByTagName("table")[0];var t=this.tempTr.getElementsByTagName("td");this.aria_labelledby=[];for(var e=0;e<t.length;e++)this.options.autoScope&&0==e&&t[e].setAttribute("scope","row"),this.aria_labelledby[e]=t[e].getAttribute("aria-labelledby"),t[e].innerHTML="";this.tempDiv.id=this.id,this.tempDiv.className=this.options.className+" w2grid",this.render.parentNode.appendChild(this.tempDiv);var i,o=this.tempDiv.getElementsByTagName("tbody")[0],s=o.getElementsByTagName("tr")[0];0==(i=s?s.offsetHeight:o.offsetHeight)?(i=-1!=this.options.defaultCellHeight?this.options.defaultCellHeight:20,this._visibleRowNumFixResetFlag=!0):this._visibleRowNumFixResetFlag=!1,this.oneRowHeight=i+(a.D.isIE(6)||a.D.isIE(7)?1:0),this.options.scrollRowHeight&&(this.oneRowScrollHeight=this.oneRowHeight),this.render.parentNode.removeChild(this.tempDiv)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setTrSubtotalRowTable=function(){try{for(var t in this.subtotalTableList={},this.subtotalStrList){var e=document.createElement("div");e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",
this.subtotalClassList&&this.subtotalStrList[t].attr?e.innerHTML="<table id='tempTable' style='width:100%;table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.subtotalStrList[t],"tbody","td",this.subtotalStrList[t].attr.subtotalClass)+"</table>":e.innerHTML="<table id='tempTable' style='width:100%;table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.subtotalStrList[t],"tbody","td",this.options.subtotalTdClass)+"</table>";for(var i=e.getElementsByTagName("table")[0],o=i.getElementsByTagName("td"),s=a.D.getDataPrefix("or_wd"),n=a.D.getDataPrefix("width"),l=0;l<o.length;l++){var h=o[l],d=h.getAttribute(n);d&&(h.removeAttribute(n),h.setAttribute(s,d))}this.subtotalTableList[t]=i}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setAutoFit=function(t){if(0!=this.render.offsetWidth&&0!=this.render.offsetHeight){this.autofitDone=!0;var e=(t=t||{}).type?t.type:this.options.autoFit;"none"!==e&&e||(e="clear");var i=t.exceptCol,o=t.exceptWidth||0,s=this.options.autoFitFixYScroll?this.scrollLayerWidthSize:parseInt(this.getElementById(this.id+"_scrollY_div").style.width,10),r=this.render.clientWidth;a.D.isIEAllVersion()&&(r=this.render.clientWidth||parseInt(this.render.style.width,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"width"),10)),this.autofit_clientWidth=r;for(var n=0,l=this.colWidthList.length-1;l>=0;l--)if(0==this.hiddenList[l]){n=l;break}if("selectedColumn"==e&&!this.autofitColumn){if(this.gridWidth>=r)return;this.autofitColumn=!0;var h=this.defaultColCnt+t.colIndex;this.gridWidth-=this.colWidthList[h],this.autofitColumnIndexArr.push(h),this.colWidthList[h]="*",this.autofitColumnWidthArr[h]="*"}if(this.autofitColumn){var d=r,c=this.autofitColumnIndexArr.slice();s>0&&(d-=s);for(l=c.length-1;l>=0;l--){var u=c[l];1!=this.hiddenList[u]&&u!==i||c.splice(l,1)}var p=0,g=[];for(l=0;l<this.colWidthList.length;l++)if(1!=this.hiddenList[l])if(l===i)this._setColumnWidth(l,o),d-=o;else if(l<this.autofitColumnWidthArr.length&&this.autofitColumnWidthArr[l]){var m=this.autofitColumnWidthArr[l].substring(0,this.autofitColumnWidthArr[l].indexOf("*"));m.length>0?g.push(parseInt(m,10)):0==m.length&&g.push(1)}else d-=this.colWidthList[l];var f=function(t){if(!t.length)return 0;for(var e,i=t.length-1,o=t[i];i;)for(var s=t[--i];e=s%o;s=o,o=e);return o}(g);for(l=0;l<g.length;l++)g[l]=g[l]/f,p+=g[l];var b=Math.floor(d/p),y=d-b*p;for(l=0;l<c.length;l++){var v=this.options.autoFitMinWidth||0,w=b*g[l];g[l]=Math.max(w,v)}if(y>0)if(1==c.length)g=[d];else{var S=g.slice();for(l=y;l>0;l--){for(var C={},_=0;_<g.length;_++)if(1!=this.hiddenList[c[_]]){var x=Math.abs((S[_]-(g[_]+1))*(this.gridWidth/S[_]));(null==C.distortion||C.distortion>x)&&(C.distortion=x,C.index=_)}g[C.index]++}}for(var I=0;I<g.length;I++)this._setColumnWidth(c[I],g[I])}if("lastColumn"==e){this.autoFitGridWidth||(this.autoFitGridWidth=this.gridWidth,this.orgLastWidth=this.colWidthList[n],this.orgLastVisibleCol=n),"number"==typeof i&&i!=n&&(this.autoFitGridWidth+=o-this.colWidthList[i],this._setColumnWidth(i,o));var T=r-s-this.gridWidth+this.colWidthList[n];T>this.orgLastWidth?this._setColumnWidth(n,T):this._setColumnWidth(n,this.orgLastWidth)}else if("allColumn"==e){if(!this.autofitColumn){var k=this.autoFitColWidthList||this.colWidthList,D=r-s,L={};if(this.options.keepDefaultColumnWidth)for(l=0;l<this.defaultColCnt;l++)L[l]=!0;for(l=this.defaultColCnt;l<k.length;l++)!1===this.isColumnResizable(l)&&(this.hiddenList[l]||(L[l]=!0));v=parseInt(t.minWidth?t.minWidth:this.options.autoFitMinWidth,10);for(var W in!isNaN(v)&&v>D&&(D=v),D-=o,L)D-=this.colWidthList[W];var A=0;for(l=0;l<k.length;l++)A+=this.hiddenList[l]||l===i||L[l]?0:k[l];var M=0,E=A?D/A:0,q=[];if(E){for(l=0;l<k.length;l++)if(l==i)this.colWidthList[l]=o;else if(L[l]);else{q[l]=E*k[l];var R=Math.round(q[l]);this.colWidthList[l]=R,M+=this.hiddenList[l]?0:R}var N=D-M,F=N>0?1:-1;for(l=0;l<N*F;l++){var O={}
;for(_=0;_<k.length;_++)if(!this.hiddenList[_]&&_!=i&&!L[_]){x=Math.abs(q[_]-(this.colWidthList[_]+F))*(M/this.colWidthList[_]);(null==O.value||O.value>x)&&(O.value=x,O.index=_)}this.colWidthList[O.index]+=F,M+=F}if(this.hiddenList[0]&&a.D.isIE(8))for(l=0;l<this.colWidthList.length;l++)if(!this.hiddenList[l]){this.colWidthList[l]=this.colWidthList[l]-2;break}}for(var W in this.autoFitColWidthList||(this.autoFitColWidthList=this.colWidthList.slice(0)),this.gridWidth=M+o,L)this.gridWidth+=this.colWidthList[W];this.arrangeOverflowXScroll();var B="";this.options.autoFitMinWidth||(B="hidden"),this.setOverflowX(B),this.scrollXPreventEndEdit=!0,this.handleScrollX(),this.scrollXPreventEndEdit=!1,this.handlerResize_drawInitializer()}if(!this.groupbyStatus.grouped)for(l=0;l<this.oneRowDataLength;l++){var V=this.getCellInfo(l);"text"!=V.options.inputType&&"secret"!=V.options.inputType&&"calendar"!=V.options.inputType||!V.options.embeddedInput||!this.options.autoResizeEmbeddedInput&&"calendar"!=V.options.inputType||this.hiddenList[l]||(this.embeddedWidthObj[l]&&(this.embeddedWidthObj[l].isChanged=!0),this.drawColumnData(l))}}else"clear"==e&&"number"==typeof i&&(this.autoFitGridWidth||(this.autoFitGridWidth=this.gridWidth),this.autoFitGridWidth+=o-this.colWidthList[i],this._setColumnWidth(i,o))}},p.prototype.setAutoFit=function(t){try{t&&(this.options.autoFit=t.type),this._setAutoFit(t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.clearAutoFit=function(t){try{this.options.autoFit="",-1===this.initialColWidthList.indexOf("*")&&(this.autofitColumn=!1,this.autofitColumnIndexArr=[],this.autofitColumnWidthArr=[],this.autoFitColWidthList=null,this.gridWidth=this.initialGridWidth,this.colWidthList=this.initialColWidthList.slice(),this.arrangeOverflowXScroll(),this.setOverflowX("auto"),this.handleScrollX())}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.autoFitFunc=function(){this.autofit_clientWidth===this.render.clientWidth?s.v.clearTimer(this.id+"_autofit"):s.v.setTimer(this._setAutoFit,{key:this.id+"_autofit",caller:this,delay:100})},p.prototype.setIScrollX=function(){try{var t=this.getElementById(this.id+"_iScrollX");if(!t)return;var e=this.getElementById(this.id+"_scrollX_right");if(e.offsetWidth>=e.firstChild.offsetWidth)return void(t.style.visibility="hidden");var i=this.getElementById(this.id+"_dataLayer"),o=parseInt(this.getElementById(this.id+"_scrollX_left").style.width,10),s=e.firstChild.offsetWidth-e.offsetWidth,a=parseInt(e.offsetWidth*e.offsetWidth/e.firstChild.offsetWidth,10);t.style.width=(a<30?30:a)+"px",t.style.left=o+e.scrollLeft/s*(i.offsetWidth-o-t.offsetWidth)+"px",t.style.visibility=""}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setIScrollY=function(){try{var t=this.getElementById(this.id+"_iScrollY");if(!t)return;var e=this.getDataLength(),i=this.rowIndex,o=this.getElementById(this.id+"_size_y").parentNode.offsetHeight;if(0==o&&(o=parseInt(this.getStyleValue("height"))),-1==i||0==i&&i+this.lastIndex+1==e){var s=!this.hasSubtotal;if(this.hasSubtotal&&this.drawedSubtotal.length>0){var a=this.drawedSubtotal[this.drawedSubtotal.length-1];if(a.rowIndex==e-1)"none"!=a[a.length-1].style.display&&(s=!0)}if(s)return void(t.style.visibility="hidden")}var n=this.getElementById(this.id+"_scrollY_div"),l=n.firstChild.offsetHeight,h=this.getElementById(this.id+"_dataLayer"),d=l-h.offsetHeight,c=parseInt(h.offsetHeight*h.offsetHeight/l,10);t.style.height=(c<30?30:c)+"px",t.style.top=n.scrollTop/d*(h.offsetHeight-t.offsetHeight)+"px",t.style.visibility=""}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.createBlockedHeaderInfo=function(){try{this.columnBlock={info:{},hash:{}};for(var t=[],e=this.getColCnt(),i=0;i<e;i++)t.push(1);for(var o in this.struct){var s;if("subtotalArr"===o)s=this.struct[o][0].rowArr;else{if(!this.struct[o]||!this.struct[o].rowArr)continue;s=this.struct[o].rowArr}for(var a=0;a<s.length;a++)for(var n=0,l=0;l<s[a].length;l++){var h=parseInt(s[a][l].colSpan,10)||1
;for(i=1;i<h;i++)t[n+i]=0;n+=h}}var d=0;for(i=0;i<t.length;i++){var c=t[i];1===c?(this.columnBlock.info[i]=[i],this.columnBlock.hash[i]=i,d=i):0===c&&(this.columnBlock.info[d].push(i),this.columnBlock.hash[i]=d)}}catch(t){r.w.printStackTrace(t,null,this)}};var g=function(){};g.prototype.initializeEvent=function(){try{if(this.otherClickEvent(),this.checkResize(),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),a.D.isIEAllVersion()){if(a.D.isIEAllVersion()){if(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.preventCopy||this.editedCell||"native"===this.options.copyType||d.B.preventDefault(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){this.options.preventCopy||this.editedCell||"native"===this.options.copyType||d.B.preventDefault(t)}))),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){this.options.preventPaste&&!this.editedCell&&"native"!==this.options.copyType&&d.B.preventDefault(t)}))),!0===this.options.noSelect)document.getElementById(this.id+"_main_div").onselectstart=function(t){if(a.D.isIEAllVersion()&&t&&t.srcElement){var e=t.srcElement;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName)return!0}return!1};else!0===this.options.preventCopy&&(this.render.onselectstart=function(){return!1})}}else s.v.browserCheck.safari?(this.event.addListener(WebSquare.getBody().render,"onbeforecopy",this.event.bindAsEventListener(this,this.handleBeforeCopyEvent)),this.event.addListener(WebSquare.getBody().render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)),this.event.addListener(WebSquare.getBody().render,"onbeforecut",this.event.bindAsEventListener(this,this.handleBeforeCutEvent)),this.event.addListener(WebSquare.getBody().render,"oncut",this.event.bindAsEventListener(this,this.handleCutEvent)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent))):s.v.browserCheck.chrome||(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,this.handleCutEvent)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent)));this.isMobile||(this.event.addListener(this.getElementById(this.id+"_head_table"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_scrollX_div"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmouseover",this.event.bindAsEventListener(this,this.gridOver)),this.options.useMoreButton&&this.event.addListener(this.getElementById(this.id+"_grid_more_button"),"onclick",this.event.bindAsEventListener(this,(function(t){WebSquare.event.fireEvent(this,"onscrollend")}))),this.hasFooter&&this.event.addListener(this.getElementById(this.id+"_foot_table"),"onmouseover",this.event.bindAsEventListener(this,this.gridOver)));var t=this.isHammerEnabled();if(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"oncontextmenu",this.event.bindAsEventListener(this,this.clickRightButtonCell)),t||this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.gridOut)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpEvent)),a.D.isOpera()&&this.event.addListener(this.render,"onkeypress",(function(t){
9!=t.keyCode&&27!=t.keyCode||d.B.preventDefault(t)})),this.options.dataDragDrop||this.options.dataDragDropSelf)if(1==this.isMobile){if(t){var e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));var i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.getElementById(o.id+"_dataLayer")),o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){o.handleDragEvent(t)}))),o._bindPressEvent=!0}))}}else this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent)),this._bindDrag=!0;else this.options.dataDragDrop||this.options.dataDragDropSelf||!this.options.dataDragSelect||this.isMobile||this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousedown",this.event.bindAsEventListener(this,this.handleDragSelectEvent));if(s.v.setTimer((function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){var e=WebSquare.getBody().getLayerListener();if(e.layers[this.id]){for(var i=e.layers[this.id].component,o={};i.parentControl;)for(var s in i=i.parentControl,e.useOtherComponentId)e.useOtherComponentId[s]==i.id&&(o[s]=!0);WebSquare.getBody().getLayerListener().hideAll(o)}this.parentControl&&this.parentControl.options&&("gridItemTable"==this.parentControl.options.pluginName||"gridViewItemTable"==this.parentControl.options.pluginName)||d.B.stopPropagation(t)})))}),{key:this.id+"initializeEvent",caller:this,delay:100}),this.isMobile?(this.iScroll={},this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))):window.navigator.msPointerEnabled&&-1!=window.navigator.userAgent.toLowerCase().indexOf("touch")?(this.iScroll={},this.render.style.touchAction="none",this.event.addListener(this.render,"onMSPointerDown",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"onMSPointerMove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"onMSPointerUp",this.event.bindAsEventListener(this,this.handleTouchEnd))):this.options.senseReader?(this.options.useStartEndDiv&&(this.event.addListener(this.getElementById(this.id+"_gridstart_div"),"onfocus",this.event.bindAsEventListener(this,this.handleStartDivFocus)),this.event.addListener(this.getElementById(this.id+"_gridstart_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleStartDivKeyDown)),this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onfocus",this.event.bindAsEventListener(this,this.handleEndDivFocus)),this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onkeyup",this.event.bindAsEventListener(this,this.handleEndDivKeyUp))),this.options.scrollFocus?this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleScrollDivKeyDown)):this.options.useStartEndDiv&&this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleEndDivKeyDown))):this.options.scrollFocus&&this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleScrollDivKeyDown)),t&&!this._bindPressEvent)try{e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.render),o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){if(!o._bindPressEvent){
for(var e,i=d.B.getTarget(t),s=-1;i&&"BODY"!=i.tagName;){if("TD"==i.tagName&&o.hasClass(i,o.options.bodyTdClass)){s=o.getElemRowIndex(i),e=i;break}i=i.parentNode}o.removeFocusedCell(),o._dataList.setRowPosition(s),e&&o.__setFocusedCell({},e,{editMode:"none"}),o.handleDblClickEvent(t),d.B.fireEvent(o,"ondblclick",t)}})))}))}catch(t){r.w.printStackTrace(t,null,this)}if("native"===this.options.drawType||!0===this.options.scrollXNative){var o=document.getElementById(this.id+"_dataLayer");i=this.uuid;o&&(o.onscroll=function(t){var e=WebSquare.idCache[i];e._endEdit();var o=document.getElementById(e.id+"_dataLayer"),s=o.scrollTop,r=o.offsetHeight,a=o.scrollLeft;e._nativeScrollInfo||(e._nativeScrollInfo={x:0,y:0});var n=a-e._nativeScrollInfo.x,l=s-e._nativeScrollInfo.y;if(Math.abs(l)>0&&"native"===e.options.drawType){if(WebSquare.util.isIEAllVersion())for(var h=document.getElementById(e.id+"_head_table").getElementsByTagName("th"),c=s+"px",u=0;u<h.length;u++){var p=h[u];"relative"!=p.style.position&&(p.style.position="relative"),p.style.top=c}r+s>=o.scrollHeight&&d.B.fireEvent(e,"onscrollend"),d.B.fireEvent(e,"onscrolly",t)}Math.abs(n)>0&&!0===e.options.scrollXNative&&d.B.fireEvent(e,"onscrollx",t),e._nativeScrollInfo={x:a,y:s}})}this.initializeLayoutEvents(),n.s.addCheckResize(this.uuid,"checkResize")}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.handleStartDivFocus=function(t){(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0,this.applyFocusedCellOut(),this.focusedCell=[],"true"!==this.options.keepScrollForSenseReader)&&(this.addGridScroll(0-this.rowIndex),0!=this.getElementById(this.id+"_scrollY_div").scrollTop&&this.addGridScroll(0-this.rowIndex))},g.prototype.handleEndDivFocus=function(t){this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0,this.applyFocusedCellOut(),this.focusedCell=[]},g.prototype.handleScrollDivKeyDown=function(t){if(t.shiftKey&&9==t.keyCode){for(var e=this.getRowCount()-1,i=this.getRightMostFocusableColIndex(e);e>=0&&null==i;)e-=1,i=this.getRightMostFocusableColIndex(e);if(null!==i){var o=this.getCellInfo(i);if("radio"===o.options.inputType){var s=0,r=this.getCheckedIndex(o.colID)[0];r>0&&(s=r),this._setFocusedCell(s,i,!1,{tabDirection:"left"}),d.B.stopEvent(t)}}}else switch(t.keyCode){case 38:case 40:case 9:d.B.stopPropagation(t)}},g.prototype.handleStartDivKeyDown=function(t){t.shiftKey||9!=t.keyCode||this._lastHeaderElementId||this._setFirsCellFocus(t)},g.prototype.handleEndDivKeyDown=function(t){if(t.shiftKey&&9==t.keyCode){if("none"===this.options.focusMode)return;var e=this.getElementById(this.id+"_main_div").offsetHeight,i=parseInt(this.getElementById(this.id+"_size_y").style.height,10)-e,o=this.getElementById(this.id+"_scrollY_div").scrollTop,s=this._getEpsilon();if(o<i&&(o=Math.min(Math.round(o)+s,i)),i!=o){for(var r=0,a=0;a<this.getRowCount();a++)r+=this.getHasSubtotalCount(a);this.addGridScroll(this.getRowCount()-this.rowIndex-this.lastIndex-1+r)}for(var n=this.getRowCount()-1,l=this.getRightMostFocusableColIndex(n,{shiftTab:!0});n>=0&&null==l;)n-=1,l=this.getRightMostFocusableColIndex(n);null!=l&&(this._setFocusedCell(n,l,!1,{tabDirection:"left"}),d.B.stopEvent(t))}},g.prototype.handleEndDivKeyUp=function(t){38==t.keyCode&&"all"!=this.options.visibleRowNum&&(this.getElementById(this.id+"_scrollY_div").scrollTop=0)},g.prototype.handleTdFocus=function(t){var e,i=d.B.getTarget(t),o=this.getLastFocusedCell(),s=a.D.getDataPrefix("tdIndex"),r=a.D.getDataPrefix("col_id");if("TD"==i.tagName&&o.focusedTd!=i&&!this.focusedByApi){var n,l,h,c,u,p,g=parseInt(i.getAttribute(s)),m=parseInt(g/this.realRowDataLength)+this.rowIndex,f=i.getAttribute(r);if(this.options.preventDuplicateFocusedCell&&"linear"===this.options.focusFlow&&(e=null!=this.editedCell)){var b=this.getCellInfo(this.editedCell.colID);n=b.editRowIndex,l=this._dataList.getColumnIndex(b.id),h=this.getColumnIndex(b.id),c=this.getRealRowIndex(n),u=this._dataList.dataArr[c*this._dataList.getColumnCount()+l],
p=b.comp&&b.comp.selectedIndex}if(this._setFocusedCell(m,f),e){var y=this._dataList.dataArr[c*this._dataList.getColumnCount()+l];if(0===u&&(u="0"),0===y&&(y="0"),u!=y){var v={oldValue:u,newValue:y,rowIndex:n,colIndex:h,colId:this.getColumnID(h)};isNaN(p)||(v.oldSelectedIndex=p,v.newSelectedIndex=b&&b.comp&&b.comp.selectedIndex),d.B.fireEvent(this,"onviewchange",v)}}}this.focusedByApi=!1},g.prototype.handleDragSelectEvent=function(t){if(!this._bindDrag)for(var e=this.body_table.offsetHeight,i=this.event.getTargetIterator(t);i.next();)if(i.match(this.options.bodyTdClass,null,"td")){var o=this,s=i.getElement();return void WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_dragSelect",delay:15,handleStart:function(t){a.D.isIEAllVersion()&&(a.D.emptySelection(),d.B.preventDefault(t));var e,i,r,n,l,h,c=null!=o.editedCell;if(c&&(e=o.editedCell.editRowIndex,i=o._dataList.getColumnIndex(o.editedCell.id),r=o.getColumnIndex(o.editedCell.id),n=o._grid.getRealRowIndex(e),l=o._dataList.dataArr[n*o._dataList.getColumnCount()+i]),o.__setFocusedCell(t,s,{editMode:!1}),c&&l!=(h=o._dataList.dataArr[n*o._dataList.getColumnCount()+i])){var u={oldValue:l,newValue:h,rowIndex:e,colIndex:r,colId:this.getColumnID(r)};d.B.fireEvent(o,"onviewchange",u)}},handleUpdate:function(t,i,s,r,a){for(var n=null,l=null,h=o.event.getTargetIterator(a);h.next();){if(h.match("w2grid")){n=h.getElement().id;break}h.match(o.options.bodyTdClass,null,"td")&&(l=h.getElement())}var c=o.focusedCell[0];o.options.dataDragSelectAutoScroll&&c.focusedColIndex>-1&&o.dragSelectAutoScroll(d.B.getMouseY(a),e,d.B.getMouseX(a)),null!=n&&null!=l&&o.id==n&&c.focusedColIndex>-1&&(l.className.indexOf("_rowNum")>=0||l.className.indexOf("_rowStatus")>=0||o.__setFocusedCell({shiftKey:!0},l,{editMode:!1}))},handleFinish:function(){o.dragSelectAutoScrollFinish()}})}},g.prototype.handleDragEvent=function(t){if((!this.options.rowResize||!this.rowResizeStarted)&&(!this.isDrillDown||this.drillDownDragDrop)&&!this.editedCell&&(0!=this.options.dataDragDrop||0!=this.options.dataDragDropSelf))for(var e=a.D.getDataPrefix("tdIndex"),i=a.D.getDataPrefix("col_id"),o=a.D.getDataPrefix("colindex"),r=a.D.getDataPrefix("index"),n=this.event.getTargetIterator(t);n.next();)if(n.match(null,null,"td")){var l=n.getElement(),h=[],c=l.getAttribute(e);if(null==c)return;var u=this.rowIndex+parseInt(parseInt(c)/(this.oneRowDataLength+this.defaultColCnt));""==this.options.dragDisplayColumn?h.push(l.getAttribute(i)):h=this.options.dragDisplayColumn.split(",");for(var p=[],g=0;g<h.length;g++){var m;m=null==h[g]||null==h[g]?(u+1).toString():this._getCellDisplayData(u,h[g].wq_trim()),p.push(m)}if(p=p.join(","),this.isMobile){for(var f=d.B.getTarget(t);f&&"TD"!=f.tagName&&"TH"!=f.tagName&&"DIV"!=f.tagName;)f=f.parentNode;this.__setFocusedCell(t,f)}var b=this,y={id:this.id+"_drag",component:b,className:"w2grid_drag",contents:p,delay:15,applyMousePosition:!0,showNoData:!0,handleStart:function(t){d.B.fireEvent(b,"ondatadragstart",u)},onDragover:function(t,e,i,o,s,r,n){if(t&&e){var l=null;for(l=b.isMobile?new WebSquare.targetIterator(document.elementFromPoint(n.changedTouches[0].clientX,n.changedTouches[0].clientY)):b.event.getTargetIterator(n);l.next();)if(l.match("w2grid")||l.match("w2grid_tooltip")){if(l.match("w2grid_tooltip"))l.getElement().style.display="none",l=new WebSquare.targetIterator(document.elementFromPoint(d.B.getClientX(n),d.B.getClientY(n)));var h=a.D.getComponentById(l.getElement().id);b.id!=h.id&&d.B.fireEvent(h,"ondatadragover",b.id,u),l.stop()}}},onDrop:function(t,n,l,h,c,p,g){var m,f=null,y=null,v=null,w=null,S={},C=null,_=null;for(w=b.isMobile?new WebSquare.targetIterator(document.elementFromPoint(g.changedTouches[0].clientX,g.changedTouches[0].clientY)):b.event.getTargetIterator(g);w.next();){if(w.match(null,null,"body"))return;if(w.match("w2grid")){f=w.getElement().id;break}if(w.match("w2grid_tooltip"))w.getElement().style.display="none",
w=new WebSquare.targetIterator(document.elementFromPoint(d.B.getClientX(g),d.B.getClientY(g)));if(null==v&&w.match(null,null,"td")){var x=w.getElement();v=parseInt(x.getAttribute(e),10),"number"!=typeof(m=parseInt(x.getAttribute(o),10))&&(m=void 0)}if(w.match("w2treeview")||w.match("w2treeview_virtual")||w.match("w2input")||w.match("w2textarea")||b.options.dataDragDropClass&&w.match(b.options.dataDragDropClass)){C=w.getElement().id;break}(w.match("w2treeview_node")||w.match("treeview_virtual_node"))&&(_=w.getElement().getAttribute(r))}if((!b.options.dataDragDropSelf||b.id===f)&&(!b.options.dataDragDropOther||b.id!=f)&&(null!=f&&(y=(f=a.D.getComponentById(f)).getDataLength(),null!=v&&(y=f.rowIndex+parseInt(v/(f.oneRowDataLength+f.defaultColCnt)))),null!=C&&(C=a.D.getComponentById(C)),f||C)){var I,T,k=f&&""==f.options.dragEndFunction&&""==b.options.dragStartFunction;if(b.focusedCell.length>1&&(b.options.dataDragDropClass||k)){P=[],V=[];for(var D=0;D<b.focusedCell.length;D++){var L=b.focusedCell[D].focusedRowIndex;V.push(L)}V.sort((function(t,e){return t-e}));for(D=0;D<V.length;D++)for(var W=b.dataList.getRowArray(V[D]).data,A=0;A<W.length;A++)P.push(W[A])}else I=b.dataList.getRowArray(u).data;var M=t.getAttribute(i),E=b.getColumnIndex(M);if(""!=b.options.dragStartFunction){var q=a.D.getGlobalFunction(b.options.dragStartFunction,b.scope_id);if("function"==typeof q)if(b.drillDownDragDrop){var R,N;b.getRowCount()<=y?(R=void 0,N=void 0):(R=b.getRealRowIndex(y),N=b.dataList.getRowData(y));var F=[j=b.getRealRowIndex(u)].concat(b.drilldown.getRecursiveRowIndex(j)),O=[];for(D=0;D<F.length;D++)O=O.concat(b.dataList.getRowData(b.getDisplayRowIndex(F[D])));if(!q.call(b,{parentRowIndex:R,parentRowData:N,beforeRemoveData:O,beforeRemoveRowIndex:F}))return}else{var B={fromColumnId:M,fromColumnIndex:E,rowJSON:b.dataList.getRowJSON(u)};null==T&&(T=b.dataList.getRowXML(u)),T=q.call(b,u,T,B)}}else if(f&&b.id!==f.id&&b.drillDownDragDrop){var V=[j=b.getRealRowIndex(u)].concat(b.drilldown.getRecursiveRowIndex(j)),P=[];for(D=0;D<V.length;D++)P=P.concat(b.dataList.getRowData(b.getDisplayRowIndex(V[D])))}if(f&&""!=f.options.dragEndFunction){var H=a.D.getGlobalFunction(f.options.dragEndFunction,f.scope_id);if("function"==typeof H)if(b.drillDownDragDrop){if(b.id==f.id){if(b.isDrillDown&&y!=u){var j=b.getRealRowIndex(u);if(b.getRowCount()<=y)b.drilldown.bodyDrop=!0,X=(K=b.getRealRowIndex(y-1))+b.drilldown.getRecursiveRowCount(K);else X=b.getRealRowIndex(y)+1;var z=[j].concat(b.drilldown.getRecursiveRowIndex(j)),G=b.drilldown.moveNode(j,X),U=[G.insertedRowIndex].concat(b.drilldown.getRecursiveRowIndex(G.insertedRowIndex));S={removedData:G.detachedData,removedRowIndex:z,insertedData:G.insertedData,insertedRowIndex:U,fromRowIndex:j,toRowIndex:U[0],rowJSON:b.dataList.getRowJSON(u)},H.call(b,X,b.dataList.getRowXML(u),S)}}else if(f.drillDownDragDrop&&f.isDrillDown){j=b.getRealRowIndex(u);if(f.getRowCount()<=y)f.drilldown.bodyDrop=!0,X=(K=f.getRealRowIndex(y-1))+f.drilldown.getRecursiveRowCount(K);else X=f.getRealRowIndex(y);for(F=[j].concat(b.drilldown.getRecursiveRowIndex(j)),O=[],D=0;D<F.length;D++)O=O.concat(b.dataList.getRowData(b.getDisplayRowIndex(F[D])));T=b.dataList.getRowXML(u),S={removedData:F,removedRowIndex:z,fromRowIndex:j,toRowIndex:X,rowJSON:b.dataList.getRowJSON(u)},H.call(b,X,T,S)&&b._dataList.removeRow(j)}}else{B={fromColumnId:M,fromColumnIndex:E,toColumnId:"number"==typeof m?f.getColumnID(m):void 0,toColumnIndex:m,rowJSON:b.dataList.getRowJSON(u)};!0!==s.v.isXML(T)&&(T=b.dataList.getRowXML(u)),H.call(b,y,T,B)&&b.dataList.removeRow(u)}}else if(f){if(b.isDrillDown)if(b.id==f.id&&y!=u){if(b.drillDownDragDrop){j=b.getRealRowIndex(u);if(b.getRowCount()<=y)b.drilldown.bodyDrop=!0,X=(K=b.getRealRowIndex(y-1))+b.drilldown.getRecursiveRowCount(K);else X=b.getRealRowIndex(y)+1;return void b.drilldown.moveNode(j,X)}}else if(f.drillDownDragDrop&&f.isDrillDown){var X,K;j=b.getRealRowIndex(u);if(f.getRowCount()<=y)f.drilldown.bodyDrop=!0,
X=(K=f.getRealRowIndex(y-1))+f.drilldown.getRecursiveRowCount(K);else X=f.getRealRowIndex(y)+1;for(O=[],D=(F=[j].concat(b.drilldown.getRecursiveRowIndex(j))).length-1;D>=0;D--)O=O.concat(b.dataList.getRowData(b.getDisplayRowIndex(F[D])));return f.drilldown.appendNode(X,O),void b.dataList.removeRow(j)}var Y=f._dataList.getBroadcast();if(f._dataList.setBroadcast(!1),P&&V){var $=-1;if(b.id==f.id)for(D=0;D<V.length;D++)V[D]<y&&$++;$=Math.max(0,$);var J=f.dataList.getRealRowIndex(y),Z={};if(b.options.dataDragDropStatus)for(var Q=0;Q<V.length;Q++)Z[Q]=b.dataList.getRowStatus(V[Q]);b.dataList.removeRows(V),void 0===J&&(J=y,$=0);var tt=J-$;b.id==f.id&&(tt=Math.min(tt,b.getRowCount())),f._dataList.insertData(tt,P);var et=0;if(b.options.dataDragDropStatus){for(var it in Z){var ot=tt+et,st=b._dataList.options.depthColumn?ot:b._dataList.getRealRowIndex(ot);b._dataList._setRowStatus(st,Z[it]),et++}b.setFocusedMultiCell(tt,0,tt+et-1,0)}b.id===f.id?b._moveCellVisible(V,tt,{remove:!0,insert:!0}):(b._moveCellVisible(V,tt,{remove:!0}),f._moveCellVisible(V,tt,{insert:!0}))}else{var rt=b.dataList.getRowStatus(u);if(b.dataList.removeRow(u),!0===s.v.isXML(T)?f.dataList.setRowXML(y,T):f.dataList.setRowData(y,I),b.options.dataDragDropStatus){st=b._dataList.options.depthColumn?y:b._dataList.getRealRowIndex(y);b._dataList._setRowStatus(st,rt),b.setFocusedCell(st,0)}b.id===f.id?b._moveCellVisible([u],y,{remove:!0,insert:!0}):(b._moveCellVisible(V,tt,{remove:!0}),f._moveCellVisible(V,tt,{insert:!0}))}!1!==Y&&f._dataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0}]}),b.id!=f.id?(b.removeFocusedCell(),d.B.fireEvent(f,"ondatadrop",{fromId:b.id,fromRowIndex:u,toRowIndex:y})):d.B.fireEvent(f,"ondatadropself",{id:b.id,fromRowIndex:u,toRowIndex:y}),t.blur()}else if(C){var at;null!=_&&(at=C.tree.findNodeByIndex(_),_=parseInt(_,10)),d.B.fireEvent(C,"ondropfromgrid",{dataListId:b._dataList.id,fromId:b.id,fromRowIndex:u,value:this.contents,dropNode:at,toRowIndex:_,rowIndexArr:V||[u]}),b.removeFocusedCell(),t.blur()}}}};return this.isMobile&&(y.passive=!1,y.showGhostOnActivate=!0,y.ghostRightTop=!0,y.delay=0),void WebSquare.dragdrop.gDragManager.activate(t,l,y)}},g.prototype.dragSelectAutoScroll=function(t,e,i){try{this._dragSelectAutoScrollStartTime=new Date,a.D.setInterval((function(t,e,i){this._dragSelectAutoScroll(t,e,i)}),{key:this.id+"_dragSelectAutoScroll",caller:this,delay:this.options.dataDragSelectAutoScrollPeriod,args:[t,e,i]})}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype._dragSelectAutoScroll=function(t,e,i){try{var o=0,s=this.getRowCount(),n=null==this.lastTopRowIndex?s-this.lastIndex:this.lastTopRowIndex,l=WebSquare.style.getAbsoluteTop(this.render),h=l+e,d=1;if(t>h?o=t-h:l>t&&(o=l-t,d=-1),0!==o){var c=new Date-this._dragSelectAutoScrollStartTime,u=Math.floor(c/this.options.dataDragSelectAutoScrollLevel),p=Math.pow(2,u),g=Math.ceil(o*this.options.dataDragSelectAutoScrollDPI/100)*p*d,m=Math.max(Math.min(this.rowIndex+g,n-1),0);this.rowIndex!==m&&(this.scrollEvent=!1,this.checkScrollEnd=!0,this.rowIndex=m,this.fastDrawData(0,{scroll:!0}),this._dragSelectAutoScrollFlag=!0,document.getElementById(this.id+"_scrollY_div").scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(m))}for(var f=0,b=WebSquare.style.getAbsoluteLeft(this.render),y=b+this.render.offsetWidth,v=0;v<this.defaultColCnt;v++)b+=this.colWidthList[v];d=1;if(i>y?f=i-y:b>i&&(f=b-i,d=-1),0!==f){var w=a.D.getDataPrefix("tdIndex"),S=this.focusedCell[0],C=this.getLastFocusedCell().focusedTd,_=parseInt(C.getAttribute(w)),x=parseInt(_/this.realRowDataLength),I=S.focusedRowIndex,T=S.focusedColIndex,k=x+this.rowIndex,D=_%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);D=d<0?Math.max(0,D-1):Math.min(this.oneRowDataLength-1,D+1),this._applyFocusedMultiCell(I,T,k,D),d<0?this.fixScrollLeftDirection():this.fixScrollRightDirection()}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.dragSelectAutoScrollFinish=function(){try{
if(a.D.clearInterval(this.id+"_dragSelectAutoScroll"),!0!==this._dragSelectAutoScrollFlag)return;this._dragSelectAutoScrollFlag=!1,this._dragSelectAutoScrollStartTime=0;var t=a.D.getDataPrefix("tdIndex");s.v.setTimer((function(){var e=this.focusedCell[0],i=this.getLastFocusedCell().focusedTd,o=parseInt(i.getAttribute(t)),s=parseInt(o/this.realRowDataLength),r=e.focusedRowIndex,a=e.focusedColIndex,n=s+this.rowIndex,l=o%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),h=null==this.lastTopRowIndex?this.getRowCount()-this.lastIndex:this.lastTopRowIndex,d=r<=n?1:-1,c=Math.max(Math.min(this.rowIndex+d,h),0);this.drawData(c,0),this._applyFocusedMultiCell(r,a,n,l)}),{key:this.id+"__dragSelectAutoScroll_drawData",caller:this,delay:this.options.dataDragSelectAutoScrollDelay})}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.otherClickEvent=function(){try{this.isMobile?(this.event.addListener(document.documentElement,"ontouchstart",this.event.bindAsEventListener(this,this.handleClickEventDocument)),this.options.tooltipDisplay&&this.hideTooltip()):WebSquare.getBody().getLayerListener().addListener({component:this,event:{},otherClick:this.handleClickEventDocument,frameClick:this.handleClickEventFrame})}catch(t){}},g.prototype.handleClickEventFrame=function(t){try{this.editedCell&&this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,!1,!0]),this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip(),this.hideContextMenu(),this.groupbyFilterList&&this.hideGroupbyFilterList(),this.options.focusAutoRemove&&this.removeFocusedCell()}catch(t){r.w.printStackTrace(t)}},g.prototype.handleClickEventDocument=function(t){this.lastEvent=t,this.isHammerEnabled()&&this.hideTooltip(),this.event.isMe(t,this.render)||this.isMine(t)?this.handleClickEventDocumentAfter(t):(this.editedCell?this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,!1,{otherClick:!0}],{beforeFunc:function(t,e){t.handleClickEventDocumentAfter(e);var i=WebSquare.getBody();i.layerListener.handleMouseDownEventDocument.call(i,e),i=null},beforeFuncArgs:[this,t]}):this.handleClickEventDocumentAfter(t),this.options.tooltipDisplay&&this.isMobile&&(this.hideTooltip(),t.srcElement.id==this.id+"_tooltip"&&d.B.stopEvent(t)))},g.prototype.handleClickEventDocumentAfter=function(t){if(this.contextMenu){var e=d.B.getTarget(t);e&&e.className.match("contextMenu")||this.hideContextMenu()}if(this.groupbyFilterList||this.customFilterScrollView){var i=this.event.getTargetIterator(t,this.render),o=!0;if(this.customFilterScrollView&&this.customFilterScrollView.render&&"none"==this.customFilterScrollView.render.style.display)o=!1;else for(;i.next();)if(i.match("gridHeaderTDDefault")||i.match("w2grid_groupbyZone_scrollView")||i.match("w2grid_groupbyZone_column")||i.match("w2grid_customFilter_scrollView")||i.match("w2grid_customFilter_column")){o=!1;break}o&&this.hideCustomFilterList()}if(this.options.groupbyZone&&this.options.groupbyFilterBox)for(i=this.event.getTargetIterator(t,this.render),o=!0;i.next();)if(i.match("w2grid_filterBox_select_tbody")||i.match("w2grid_filterBox_itemTable")){o=!1;break}if(this.groupbyFilterList){for(i=this.event.getTargetIterator(t,this.render),o=!0;i.next();)if(i.match("w2grid_groupbyZone_list")||i.match("w2grid_groupbyZone_column")||i.match("gridHeaderTDDefault")){o=!1;break}o&&this.hideGroupbyFilterList()}this.options.focusAutoRemove&&this.removeFocusedCell()},g.prototype.isMine=function(t){try{for(var e=d.B.getTarget(t);null!=e;){if(e.id&&e.id.indexOf&&e.id.indexOf("G_"+this.id+"__")>=0)return!0;e=e.parentNode}return!1}catch(t){r.w.printStackTrace(t)}},g.prototype.handleResize=function(){try{var t=this.render.offsetWidth,e=this.render.offsetHeight;if(t>0&&e>0)if(this.delayedDrawObj)this.resizeObj={width:t,height:e,scrollLeft:this.resizeObj.scrollLeft,scrollTop:this.resizeObj.scrollTop,clientWidth:this.resizeObj.clientWidth},this.setRedrawStatus("draw");else{
var i=t-this.resizeObj.width,o=e-this.resizeObj.height,n=!1,l=this.hiddenCellObj.length>0;if(o>0){if(this.options.adaptive){var h=parseInt(this.options.adaptiveThreshold)||480;if(!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=h)return}this._setGridHeightBefore(),n=!0;var d=this.getDataLength(),c=this.drawedRowLength;this.lastTopRowIndex=null,this.setDataTable(),this.setScrollYHeight();var u=this._getVisibleLastIndex(this.lastIndex+1);if(d<=0);else if(this.rowIndex+u-1+this.drawedRowLength-c<d){var p=d-this.drawedRowLength+1,g=this.rowIndex;this.rowIndex+1>p&&p>=-1&&(g=p>=0?p:0),l?(this.rowIndex=g,this._setCellVisibleRefresh()):this.drawData(g)}else{var m;if((g=d-this.drawedRowLength>0?d-this.drawedRowLength:0)==this.rowIndex)m=u-1;else this.scrollEvent=!1,this.checkScrollEnd=!0,this.getElementById(this.id+"_scrollY_div").scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(g);l?(this.rowIndex=g,this._setCellVisibleRefresh()):this.drawData(g,m)}this._setGridHeightAfter()}else if(o<0&&"all"!=this.options.visibleRowNum){this._setGridHeightBefore(),this._setGridHeightAfter(),n=!0;var f=this.getElementById(this.id+"_body_table");this.dataLayerHeight=f.parentNode.offsetHeight;var b=Number(this.options.visibleRowNum),y=this.getVisibleRowNum();l?this._setCellVisibleRefresh():(!isNaN(b)&&b>0&&b>=y||(this.lastTopRowIndex=null,this.cutGridBottom(this.lastIndex)),this.setScrollYHeight())}0!=i&&(n=!0,this.resizeObj.clientWidth=this.render.clientWidth,this.setScrollYHeight(),this.options.autoFit||this.setOverflowX(),this._handleScrollX(),this.options.autoFit&&this.autoFitFunc(),l&&this._setCellVisibleRefresh()),n&&this.groupbyZoneStatus.groupbyZoneRender&&this.resizeGroupbyZone()}else this.setRedrawStatus("stop");this.groupbyZoneStatus.groupbyZoneRender&&!this.adjustGroupbyZone&&(this.adjustGroupbyZone=!0,this.resizeGroupbyZone()),this.resizeObj={width:t,height:e,scrollLeft:this.resizeObj.scrollLeft,scrollTop:this.resizeObj.scrollTop,clientWidth:this.resizeObj.clientWidth},this.resizeObj.width>0&&this.resizeObj.height>0&&(this.resizeObj.scrollLeft=this.getElementById(this.id+"_scrollX_right").scrollLeft,this.resizeObj.scrollTop=this.getElementById(this.id+"_scrollY_div").scrollTop)}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.resizeGroupbyZone=function(){if(this.groupbyZoneStatus.groupbyZoneRender){var t=this.resizeObj.clientWidth-this.groupbyZoneStatus.groupbyZoneBorder,e=this.dom[this.id+"_scrollY_div"].offsetWidth;0!=e&&(t-=e),t+="px",this.groupbyZoneStatus.groupbyZoneRender.style.width!=t&&(this.groupbyZoneStatus.groupbyZoneRender.style.width=t)}},g.prototype.checkPercent=function(){var t=WebSquare.WebSquareparser.getAttribute(this.element,"style");if(t.indexOf("%")>0)for(var e=t.split(";"),i=0;i<t.length;i++)if(e[i].indexOf("%")&&e[i].indexOf("height")||e[i].indexOf("%")&&e[i].indexOf("width")){this.checkResize();break}},g.prototype.checkResize=function(){try{if(this.render){var t=!0;if(WebSquare.getBody().modalStack&&WebSquare.getBody().modalStack.length>0&&this.getDisabled()){for(var e=this.parentControl;e&&(!e.options||!("floatingLayer"==e.options.pluginName||"wframe"===e.options.pluginName&&e._isWframePopup));)e=e.parentControl;null==e&&(t=!1)}t&&!this.startedDisplayNone&&this.handleResize()}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.handleDblClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match(this.options.bodyTdClass)||WebSquare.idToUUID[e.getElement().getAttribute("id")]){this.bodyDblClick(t,e.getElement());break}if(e.match(this.options.headerTdClass)){this.headerDdlClick(t,e.getElement());break}if(this.hasFooter&&e.match(this.options.footerTdClass)){this.footerDblClick(t,e.getElement());break}if(this.hasSubtotal){if(this.subtotalClassList){for(var i=!1,o=0;o<this.subtotalClassList.length;o++)if(this.subtotalClassList[o].length>0&&e.match(this.subtotalClassList[o])){
this.subtotalDblClick(t,e.getElement()),i=!0;break}if(i)break}else if(e.match(this.options.subtotalTdClass)){this.subtotalDblClick(t,e.getElement());break}}else e.match("w2grid_customFilter_sortable_open")&&(d.B.stopEvent(t),e.stop())}},g.prototype.handleClickEvent=function(t){if(this.lastEvent=t,d.B.fireEvent(this,"onclick",t),!(this.isMobile&&this.iScroll&&this.iScroll.moveDirection&&this.iScroll.moveDistance>10)){var e,i,o,s,r,a,n,l=this.event.getTargetIterator(t,this.render),h=null!=this.editedCell;h&&(e=this.editedCell.editRowIndex,i=this._dataList.getColumnIndex(this.editedCell.id),n=this.getCellInfo(this.editedCell.id),o=this.getColumnIndex(this.editedCell.id),s=this._grid.getRealRowIndex(e),r=this._dataList.dataArr[s*this._dataList.getColumnCount()+i],a=n.comp&&n.comp.selectedIndex);for(var c=function(t,e){var i=!1;if(e.subtotalClassList)for(var o=0;o<e.subtotalClassList.length;o++)if(e.subtotalClassList[o].length>0&&t.match(e.subtotalClassList[o])){i=!0;break}return i};l.next();){if(l.match(this.options.bodyTdClass)){this.bodyClick(t,l.getElement());break}if(l.match(this.options.headerTdClass)){this.headerClick(t,l.getElement()),h&&null==this.editedCell&&(e=this.getDisplayRowIndex(s));break}if(this.hasFooter&&l.match(this.options.footerTdClass)){this.footerClick(t,l.getElement());break}if(this.hasSubtotal&&(l.match(this.options.subtotalTdClass)||c(l,this))){this.subtotalClick(t,l.getElement());break}if(this.isMine(t));else{if(l.match(this.options.headerTableClass))break;if(l.getElement().getAttribute("id")==this.id+"_dataLayer"){null!=this.editedCell&&this.editedCell.handleEndEdit(),d.B.fireEvent(this,"onblankclick",t);break}}}if(h){var u=this._dataList.dataArr[s*this._dataList.getColumnCount()+i];if(0===r&&(r="0"),0===u&&(u="0"),r!=u){var p={oldValue:r,newValue:u,rowIndex:e,colIndex:o,colId:this.getColumnID(o)};isNaN(a)||(p.oldSelectedIndex=a,p.newSelectedIndex=n&&n.comp&&n.comp.selectedIndex),d.B.fireEvent(this,"onviewchange",p)}}}},g.prototype.gridDataLayerOut=function(t){this.overElem&&(this.options.rowMouseOver&&this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null)},g.prototype.gridHeaderOver=function(t){this.overElem&&(this.options.rowMouseOver&&this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null)},g.prototype.gridOver=function(t){for(var e=a.D.getDataPrefix("colIndex"),i=a.D.getDataPrefix("col_id"),o=d.B.getTarget(t);o&&("TD"!=o.tagName||null==o.getAttribute(e)||!(this.hasClass(o,this.options.bodyTdClass)||this.hasClass(o,this.options.subtotalTdClass)||this.hasClass(o,this.options.footerTdClass)));){if("TD"==o.tagName&&null!=o.getAttribute(e)&&this.subtotalClassList){for(var s=!1,r=0;r<this.subtotalClassList.length;r++)if(this.subtotalClassList[r].length>0&&this.hasClass(o,this.subtotalClassList[r])){s=!0;break}if(s)break}if(this.options.tooltipHeader&&"TH"==o.tagName&&null!=o.getAttribute(e))break;if("DIV"==o.tagName&&o.getAttribute("id")==this.id+"_dataLayer")break;if("TABLE"==o.tagName&&o.getAttribute("id")==this.id+"_foot_table")break;if("TH"==o.tagName&&this.hasClass(o,this.options.headerTdClass))break;o=o.parentNode}if(o.id==this.id+"_dataLayer")this.overElem&&(this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null);else if(o.id==this.id+"_foot_table")this.overElem&&(this.bodyOut(t,this.overElem),this.overElem=null);else if(o&&"TD"==o.tagName){if(this.overElem!=o&&-1==o.className.indexOf(this.options.headerTdClass)){this.bodyOut(t,this.overElem),(this.options.tooltipDisplay||this.options.rowStatusTooltipDisplay)&&this.bodyOver(t,o),this.options.rowMouseOver&&(this.overElem&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),this.hasClass(o,"w2grid_groupby")||this.addRowOverStyle(o.parentNode)),this.overElem=o;var n={};o.getAttribute(i)&&(n.rowIndex=this._getGroupbyDisplayRowIndex(this.getElemRowIndex(o)),
n.colIndex=this.getColumnIndex(o.getAttribute(i))),d.B.fireEvent(this,"onbodymouseover",n)}}else o&&"TH"==o.tagName&&this.overElem!=o&&(this.bodyOut(t,this.overElem),(this.options.tooltipHeader||this.options.headerTooltipDisplay)&&this.headerOver(t,o),this.options.rowMouseOver&&this.overElem&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),this.overElem=o)},g.prototype.gridOver1=function(t){var e=d.B.getTarget(t);("NOBR"==e.tagName||"SPAN"==e.tagName&&e.className.indexOf("w2grid_span")>-1)&&(e=e.parentNode),void 0!==e.tagName&&"TD"==e.tagName&&(this.options.rowMouseOver&&(this.overElem&&this.removeRowOverStyle(this.overElem.parentNode),this.addRowOverStyle(e.parentNode)),this.overElem=e)},g.prototype.gridOver2=function(t){var e=d.B.getTarget(t);("NOBR"==e.tagName||"SPAN"==e.tagName&&e.className.indexOf("w2grid_span")>-1)&&(e=e.parentNode),void 0!==e.tagName&&"TD"==e.tagName&&(this.options.rowMouseOver&&(this.overElem,this.addRowOverStyle(e.parentNode)),this.overElem=e)},g.prototype.handlePasteEvent=function(t){try{var e=this.options.preventPasteColumn,i=e?e.split(","):[];if(this.options.preventPaste&&!this.editedCell||d.B.getTarget(t)&&d.B.getTarget(t).getAttribute("class")&&d.B.getTarget(t).getAttribute("class").indexOf("w2grid_head_input")>-1)return;if(!1===d.B.fireEvent(this,"oncustompaste",t))return;var o,n,l,h=a.D.isIEAllVersion()?window.clipboardData:t.clipboardData,c=h.getData("Text");if(1==this.options.ctrlShiftKey&&(o=h.getData("Nofocus")),"\r\n"==c.slice(-2)?c=c.slice(0,c.length-2):"\n"==c.slice(-1)&&(c=c.slice(0,c.length-1)),this.options.customPasteFormatter)if("string"==typeof this.options.customPasteFormatter){var u=a.D.getGlobalFunction(this.options.customPasteFormatter.wq_trim(),this.scope_id);if("function"==typeof u){var p=u.call(this,c);c=p||c}}else $l("customPasteFormatter의 type은 string이어야 합니다.");if("native"===this.options.copyType?n=[[c]]:(1==this.options.ctrlShiftKey&&(l=Papa.parse(o,{delimiter:"\t"}).data),n=Papa.parse(c,{delimiter:"\t"}).data),a.D.isIEAllVersion("6 7")&&'"'===c.slice(0,1)&&'"'===c.slice(-1)&&-1==c.slice(1,-1).indexOf("\t")&&(n=[[c.slice(1,c.length-1)]]),!n||null==n||"undefined"==n||0==n.length)return;if(this.focusedCell.length>0){for(var g,m=this.getColumnOrder(),f=this.htmlInfo.body.rowAttrArr.length,b=this.getDataLength()*f,y=0,v=m.length,w=0,S=null,C=0,_=0;_<this.focusedCell.length;_++){var x=this.focusedCell[_],I=x.focusedRowIndex,T=x.focusedColIndex,k=this.getLocationRowCol(I,T);I=k.rowIndex,T=k.colIndex,C+=k.rowSize*k.colSize-1,b>I&&(b=I),y<I+k.rowSize-1&&(y=I+k.rowSize-1),v>T&&(v=T),w<T+k.colSize-1&&(w=T+k.colSize-1),b==I&&v==T&&(S=x)}var D=0;for(_=this.defaultColCnt+v;_<this.defaultColCnt+w;_++)1==this.hiddenList[_]&&(D+=1);if(this.focusedCell.length>1&&this.focusedCell.length+C!=(y-b+1)*(w-v-D+1))return;var L=!1;if(C>0&&(L=!0),g={focusedRange:{minRow:b,maxRow:y,minCol:v,maxCol:w},startCell:S},S.focusedRowIndex>=0&&S.focusedColIndex>=0){var W=S.focusedTd;if(W){var A=a.D.getDataPrefix("col_id"),M=a.D.getDataPrefix("colMerged"),E=W.getAttribute(A);if(null==E||""==E.wq_trim())return;if("1"==W.getAttribute(M))return}else{var q=this.getCellInfo(S.focusedColIndex);if(q&&(q.options.colMerge||q.options.colMergeAnd))return}var R=b,N=v,F=this.getOriginalRowCol(b,v),O=(T=F.colIndex,I=F.rowIndex,this.getTotalRow()),B=(this.getTotalCol(),O*f),V=m.length;if(this.options.checkBlankRowOnPaste)for(_=n.length-1;_>-1;_--){for(var P=!0,H=0;H<n[0].length;H++)if(""!=n[_][H].wq_trim()){P=!1;break}P&&n.splice(_,1)}if(!1===d.B.fireEvent(this,"onbeforepaste",{rowIndex:this._getGroupbyDisplayRowIndex(I),colIndex:T,data:n.slice(0)}))return;this.isPaste=!0;var j,z=this,G=function(t){for(var e=z.defaultColCnt+t;e<z.hiddenList.length;e++)if(0==z.hiddenList[e])return e-z.defaultColCnt},U=this.uuid,X=!1,K=function(t){var e=WebSquare.idCache[U],o=e.options.checkReadOnlyOnPasteEnable,s=o?o.split(","):[]
;if(R+n.length>B&&!a.D.getBoolean(z.options.preventAddRowOnPaste)&&"focus"!==z.options.pasteOption){var r=Math.ceil((R+n.length-B)/f),h=Array(z._dataList.getTotalCol()*r);if(""!=z.depthColumn)for(var c=z._dataList.getCellInfo(z.depthColumn).options.defaultValue,u=0;u<r;u++)h[u*z._dataList.getTotalCol()+z._dataList.getColumnIndex(z.depthColumn)]=c;if(z.options.setDefaultValueOnPaste){var p=z._dataList.getTotalCol();for(u=0;u<p;u++)for(var g=z._dataList.getCellInfo(u).options.defaultValue,m=0;m<r;m++)h[m*p+z._dataList.getColumnIndex(u)]=g}if(z.options.checkReadOnlyOnPaste){var S=!0,C=!1;for(u=0;u<n.length;u++){var _=N,x=R+u;for(m=0;m<n[0].length&&!(null==_||_>=V);m++){var I=(W=z.getOriginalRowCol(x,_)).colIndex,T=W.rowIndex;C=!1;for(var k=0;k<s.length;k++)if(s[k]==e.getColumnID(I)){C=!0;break}if(!z.___getEditReadOnly(T,I)||z.___getEditReadOnly(T,I)&&C){S=!1;break}_=G(_+1)}}if(S)return}if(z.options.checkDisabledOnPaste){var D=!0;for(u=0;u<n.length;u++)for(_=N,x=R+u,m=0;m<n[0].length&&!(null==_||_>=V);m++){var W;I=(W=z.getOriginalRowCol(x,_)).colIndex,T=W.rowIndex;if(!z._getEditDisabled(T,I)){D=!1;break}_=G(_+1)}if(D)return}if(h.length>0){X=!0,z._dataList.setData(h,!0);u=0;for(var A=r,M=new Array(r);u<A;u++)M[u]="C";j=M.length,z._dataList.rowStatusArr=z._dataList.rowStatusArr.slice(0,O).concat(M)}}var E=function(o,r,h){for(var c=function(t,e,i,o){var s=z.data_td_list[e+(t-z.rowIndex)*z.oneRowDataLength];if(t<z.rowIndex&&(s=null),!(z.groupbyStatus.grouped&&s&&z.hasClass(s,"w2grid_groupby"))){var r=z.getCellInfo(e),a=z._getRealColIndex("body",r.options.col_id)+z.defaultColCnt;if(!r.options.blockSelect&&!z.hiddenList[a]){if(1==z.options.ctrlShiftKey)if("true"!=(l[o].length>1?l[o][e]:l[o]))return;var n={focusedTd:s,focusedRowIndex:t,focusedColIndex:e};z.options.groupbyDisplayRowIndex&&(n.groupbyDisplayRowIndex=z._getGroupbyDisplayRowIndex(t)),i?z.focusedCell.push(n):z.focusedCell.unshift(n),null!=s&&z.applyFocusedCellIn(s,i)}}},u=o,p=0;p<n.length;p++){for(var g=r,m=0;m<n[p].length&&!(null==g||g>=V);m++){var b=z.getOriginalRowCol(u,g),y=b.colIndex,v=b.rowIndex;if(b.noLeftTop)b.leftCell&&(g=G(g+b.colSize));else{1==z.options.ctrlShiftKey?c(v,y,!0,p):c(v,y,!0);for(var w=!1,S=0;S<s.length;S++)if(s[S]==e.getColumnID(y)){w=!0;break}if(z.options.checkReadOnlyOnPaste&&z.___getEditReadOnly(v,y)&&!w)g=G(g+b.colSize);else if(z.options.checkDisabledOnPaste&&z._getEditDisabled(v,y))g=G(g+b.colSize);else{var C=!1;for(S=0;S<i.length;S++)if(i[S]==e.getColumnID(y)){g=G(g+b.colSize),C=!0;break}if(!C&&!(a.D.getBoolean(z.options.preventAddRowOnPaste)&&z.dataList.getRowCount()*f-1<v||"focus"===z.options.pasteOption&&(g>t.focusedRange.maxCol||g<t.focusedRange.minCol||u>t.focusedRange.maxRow||u<t.focusedRange.minRow))){var _,x=y,I=z.tdIdList[x],T=z._dataList.getColumnIndex(I),k=z._dataList.dataArr[z.getRealRowIndex(v)*z._dataList.getColumnCount()+T],D=n[p][m];1==z.options.ctrlShiftKey&&(_=l[p][m]);var L=z.getCellInfo(x),W=!(!z.isDrillDown||!z._dataList.options.depthColumn)?z.getRealRowIndex(v):v;if("number"!=L.options.dataType&&"float"!=L.options.dataType||"."!==(D=D.wq_trim())&&"-"!==D&&"+"!==D){if((L.options.selectedDataOnPaste||z.options.selectByLabel)&&("autoComplete"===L.options.inputType||"select"===L.options.inputType)){var A,M=L.getItemArray(),E=L.dataComp;if(L.existGridViewItemsetNode||"gridViewItemset"===L.options.itemTableType){var q=L.itemsetObj.nodeset;q.indexOf("data:")>=0&&(E=q.slice("data:".length))}if(E&&(A=L.mainGrid.modelControl.getDataComp(E)),A&&(!M||0==M.length||1==M.length&&(!0===L.options.chooseOption||!0===L.option.allOption)||2==M.length&&!0===L.options.chooseOption&&!0===L.option.allOption)){var R=A.bodyIdColIndexMap[L.itemsetObj.label],N=A.bodyIdColIndexMap[L.itemsetObj.value],F=A.cellIdList.length,O=A.filteredRowIndexArr.length;if(M=[],A&&"linkedDataList"===A.initializeType&&null!=A.conditionInfo&&A.conditionInfo.filterInfo.useRef)for(var B=0;B<A._dataList.getDataLength();B++){(P={}).label=A._dataList.dataArr[B*F+R],
P.value=A._dataList.dataArr[B*F+N],M[B]=P}else for(S=0;S<O;S++){var P={};"linkedDataList"!=A.initializeType&&A.dataArr?(P.label=A.dataArr[A.filteredRowIndexArr[S]*F+R],P.value=A.dataArr[A.filteredRowIndexArr[S]*F+N]):(P.label=A._dataList.dataArr[A.filteredRowIndexArr[S]*F+R],P.value=A._dataList.dataArr[A.filteredRowIndexArr[S]*F+N]),M[S]=P}}var H=!1;if(L.options.selectedDataOnPaste)if(0===M.length)H=!0;else for(var U=0;U<M.length;U++){var K=M[U];switch(L.options.selectedDataOnPaste){case"true":case"both":K.value!==D&&K.label!==D||(H=!0);break;case"value":K.value===D&&(H=!0);break;case"label":K.label===D&&(H=!0);break;default:H=!0}if(H)break}if(!H&&L.options.selectedDataOnPaste){n.length<=j+p&&0===m&&X&&z._drawRowStatus(W-z.rowIndex,W),g=G(g+b.colSize);continue}if(z.options.selectByLabel)for(U=0;U<M.length;U++){if((K=M[U]).label===D){D=K.value;break}}}var Y=L.comp&&L.comp.selectedIndex;if("true"===z.options.unformatOnPaste||"true"===L.options.unformatOnPaste){if("calendar"==L.options.inputType&&"date"==L.options.dataType){var $=0;"yearMonthDate"==L.options.calendarValueType?$=8:"yearMonth"==L.options.calendarValueType?$=6:"yearMonthDateHour"==L.options.calendarValueType?$=10:"yearMonthDateTime"==L.options.calendarValueType?$=12:"yearMonthDateTimeSec"==L.options.calendarValueType?$=14:"year"==L.options.calendarValueType&&($=4);var J=new WebSquare.validator.validateInvoker;J.addCommand(new WebSquare.validator.allowCharCommand("0-9")),J.addCommand(new WebSquare.validator.maxLengthCommand($)),D=J.validateString(D)}var Z=D,Q=L.formatter.masking,tt=L.formatter.type;D=Z=void 0===tt||null==tt||"number"!=tt&&"float"!=tt?void 0!==tt&&null!=tt&&"date"==tt?WebSquare.text.unformatDate2(Q,Z):void 0!==tt&&null!=tt&&"time"==tt?WebSquare.text.unformatTime(Q,Z):WebSquare.text.unformatText(Q,Z):WebSquare.text.unformatCurrency(Q,Z)}if(L.options.maxLength)if("float"==L.options.dataType)D=new WebSquare.validator.maxFloatLengthCommand(L.options.maxLength,L.options.decimalDelimiter,L.options.delimiter).executeValidateString(D);else if("number"==L.options.dataType||"bigDecimal"==L.options.dataType){D=new WebSquare.validator.maxLengthCommand(L.options.maxLength).executeValidateString(D)}else{O=parseInt(L.options.maxLength);isNaN(O)||(D=D.slice(0,O))}else if(L.options.maxByteLength){if("number"==L.options.dataType||"bigDecimal"==L.options.dataType)D=new WebSquare.validator.maxByteLengthCommand(L.options.maxByteLength,L.options.byteCheckIgnoreChar).executeValidateString(D)}var et=L.options.allowChar;if(L.options.allowChar||"float"!=L.options.dataType&&"number"!=L.options.dataType&&"bigDecimal"!=L.options.dataType||(et="0-9+-"+L.options.decimalDelimiter),et&&void 0!==et&&null!=et&&""!=et){var it=new RegExp("["+et+"]"),ot=!0;for(S=0;S<D.length;S++){if(null==D.charAt(S).match(it)){ot=!1;break}}!1===ot&&(D="")}if(L.options.ignoreChar)D=new WebSquare.validator.ignoreCharCommand(L.options.ignoreChar).executeValidateString(D);if((""!==L.options.escape?L.options.escape:z.options.escape)+""=="true"&&(D=WebSquare.xml.decode(D)),"radio"===L.options.inputType&&L.options.trueValue===D)for(var st=z.getCheckedIndex(x),rt=0;rt<st.length;rt++)z._dataList.setCellData(st[rt],T,L.options.falseValue);if("text"===L.options.inputType||"textImage"===L.options.inputType){var at=a.D.getGlobalFunction(L.options.customModelFormatter,z.scope_id);"function"==typeof at?(z.useCustomModelFormatter=!0,D=at.call(z,D,D,L.editRowIndex,L.getColumnIndex(I))):z.useCustomModelFormatter=!1}if("text"===L.options.inputType&&"float"===L.options.dataType&&D.charAt(D.length-1)===L.options.decimalDelimiter&&(D=D.substr(0,D.length-1)),1==z.options.ctrlShiftKey?"true"==_&&z._dataList.setCellData(W,T,D):z._dataList.setCellData(W,T,D),!D&&X&&n.length<=j+p&&z._drawRowStatus(W-z.rowIndex,W),k!=D){if(1==z.options.ctrlShiftKey)var nt={oldValue:k,newValue:"true"==_?D:k,rowIndex:v,colIndex:x,colId:z.getColumnID(x)};else nt={oldValue:k,newValue:D,rowIndex:v,colIndex:x,colId:z.getColumnID(x)}
;isNaN(Y)||(nt.oldSelectedIndex=Y,nt.newSelectedIndex=L.comp&&L.comp.selectedIndex),d.B.fireEvent(z,"onviewchange",nt)}g=G(g+b.colSize)}}}}}u+=1}},q=b,F=v;if(n.length>0&&!L)for(u=1;u<n.length;u++)if(n[u].length!==n[0].length){L=!0;break}if(z.applyFocusedCellOut(),z.focusedCell=[],L)E(b,v);else if(y-b+1>=n.length&&w-v+1>=n[0].length)for(;q<=y-n.length+1;){for(F=v;F<=w-n[0].length+1;){q+n.length>y-n.length+1&&F+n[0].length>w-n[0].length+1&&!1,E(q,F),F+=n[0].length}q+=n.length}else if(y-b+1>=n.length)for(;q<=y-n.length+1;){q+n.length>y-n.length+1&&!1,E(q,F),q+=n.length}else if(w-v+1>=n[0].length)for(;F<=w-n[0].length+1;){F+n[0].length>w-n[0].length+1&&!1,E(q,F),F+=n[0].length}else E(b,v)};if("true"===this.options.showMessageOnPaste){var Y=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/pasteMessage/@value");WebSquare.layer.pasteMessageLoaded=!1,WebSquare.layer.showProcessMessage(Y,{type:"pasteMsg",scope:this.scope_id||""});var $=function(){WebSquare.layer.pasteMessageLoaded?(a.D.clearTimeout(z.id+"_pasteMessageLoaded"),K(),WebSquare.layer.hideProcessMessage({type:"pasteMsg",scope:this.scope_id||""}),d.B.fireEvent(z,"onafterpaste")):a.D.setTimeout($,{delay:500,key:z.id+"_pasteMessageLoaded"})};$()}else K(g),d.B.fireEvent(this,"onafterpaste")}}this.isPaste=!1,d.B.preventDefault(t)}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype._doPaste=function(){try{if(a.D.isIEAllVersion())this.handlePasteEvent({});else if(!a.D.isIEAllVersion()&&(s.v.browserCheck.moz||s.v.browserCheck.chrome||s.v.browserCheck.safari)){var t=document.createElement("textarea"),e=this;t.style.opacity="0",t.onpaste=function(t){e.handlePasteEvent(t),i.removeChild(this)},t.textContent="temp";var i=document.getElementsByTagName("body")[0];i.appendChild(t),t.select();try{document.execCommand("paste")}catch(t){c.k.printLog(this.id+"_doPaste skip.")}}}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},g.prototype.handleBeforeCopyEvent=function(t){d.B.preventDefault(t)},g.prototype.handleBeforeCutEvent=function(t){d.B.preventDefault(t)},g.prototype.handleCopyEvent=function(t){try{if(!1===d.B.fireEvent(this,"oncustomcopy",t))return;var e=this.options.preventCopyColumn,i=e?e.split(","):[];if(this.options.preventCopy||"native"===this.options.copyType)return;if(s.v.browserCheck.safari){for(var o=document.activeElement,n=!1;null!=o;)o.id&&o.id==this.id&&(n=!0),o=o.parentNode;if(!n)return}var l=a.D.isIEAllVersion()?window.clipboardData:t.clipboardData,h=this.options.copyAmount;if(h||(h="cell"),"cell"==h&&this.focusedCell.length>0){for(var c=[],u=this.getColumnOrder(),p=this.htmlInfo.body.rowAttrArr.length,g=this.getDataLength()*p,m=0,f=u.length,b=0,y=0,v=0;v<this.focusedCell.length;v++){var w=this.focusedCell[v],S=w.focusedRowIndex,C=w.focusedColIndex,_=this.getLocationRowCol(S,C);S=_.rowIndex,C=_.colIndex,y+=_.colSize*_.rowSize-1,g>S&&(g=S),m<S+_.rowSize-1&&(m=S+_.rowSize-1),f>C&&(f=C),b<C+_.colSize-1&&(b=C+_.colSize-1)}"row"==this.options.focusMode&&1==this.options.rowCopy&&(f=0,b=u.length-1);var x=0;for(v=this.defaultColCnt+f;v<b+this.defaultColCnt;v++)1==this.hiddenList[v]&&(x+=1);if(this.focusedCell.length+y==(m-g+1)*(b-f-x+1)||1==this.options.ctrlShiftKey||"row"==this.options.focusMode&&1==this.options.rowCopy&&this.focusedCell.length==m-g+1)if(this.isDrillDown){var I=function(t){var e=t[t.length-1];L=L<e?e:L;for(var i=0;i<t.length;i++){var o=this.drilldown.getChildrenRowArr(t[i]);o.length>0&&I.call(this,o)}},T=this._dataList.getRealRowIndex(m),k=this.drilldown.getChildrenRowArr(T),D=this._dataList.getRealRowIndex(g),L=T;this.drilldown.isOpen(m)||I.call(this,k);for(v=D;v<=L;v++){for(var W=[],A=f;A<=b;A++){var M=(H=this.getOriginalRowCol(v,A)).colIndex,E=H.rowIndex;if((!H.noLeftTop||H.leftCell)&&1!=this.hiddenList[A+this.defaultColCnt]){for(var q=this.getCellInfo(M),R=!1,N=0;N<i.length;N++)if(i[N]==q.colID){R=!0;break}if(!R){var F=""!==q.options.escape?q.options.escape:this.options.escape,O=this.drilldown.statusArr
;if("display"==q.options.copyOption)U=!1===O[v]?this._getDisplayData(E,this.getColumnID(M)):this._getDisplayData(this.getRealRowIndex(E),this.getColumnID(M));else{var B=this.getColumnID(M);U=this.dataList.getColData(B)[E]}H.noLeftTop&&(U=""),F+""=="true"&&(U=WebSquare.xml._encode(U+"")),(U||this.focusedCell.length>1)&&W.push(U)}}}c.push(W)}}else{var V=[];for(v=g;v<=m;v++){W=[];var P=[];for(A=f;A<=b;A++){var H;M=(H=this.getOriginalRowCol(v,A)).colIndex,E=H.rowIndex;if((!H.noLeftTop||H.leftCell)&&1!=this.hiddenList[A+this.defaultColCnt]){for(q=this.getCellInfo(M),R=!1,N=0;N<i.length;N++)if(i[N]==q.colID){R=!0;break}if(!R){F=""!==q.options.escape?q.options.escape:this.options.escape;var j=this.data_td_list[M+(E-this.rowIndex)*this.oneRowDataLength].classList.contains("focusedTd"),z=this.data_td_list[M+(E-this.rowIndex)*this.oneRowDataLength].classList.contains("focusedTr");1==this.options.ctrlShiftKey&&("cell"==this.options.focusMode?P.push(j):"row"==this.options.focusMode&&P.push(z)),U="display"==q.options.copyOption?this._getDisplayData(this.getRealRowIndex(E),this.getColumnID(M)):this.dataList.getCellData(E,this.getColumnID(M)),H.noLeftTop&&(U=""),F+""=="true"&&(U=WebSquare.xml._encode(U+"")),(U||this.focusedCell.length>1)&&(1==this.options.ctrlShiftKey?("row"==this.options.focusMode&&z||"cell"==this.options.focusMode&&j)&&W.push(U):W.push(U))}}}c.push(W),1==this.options.ctrlShiftKey&&V.push(P)}}else{var G=this.focusedCell[this.focusedCell.length-1];if(null!=G){var U;for(F=""!==(q=this.getCellInfo(G.focusedColIndex)).options.escape?q.options.escape:this.options.escape,v=0;v<i.length;v++)if(i[v]==q.colID)return;U="display"==q.options.copyOption?this._getDisplayData(this.getRealRowIndex(G.focusedRowIndex),this.getColumnID(G.focusedColIndex)):this.dataList._getCellData(G.focusedRowIndex,this.getColumnID(G.focusedColIndex)),F+""=="true"&&(U=WebSquare.xml._encode(U+"")),c.push([U])}}var X=Papa.unparse(c,{delimiter:"\t"});if(1==this.options.ctrlShiftKey){var K=Papa.unparse(V,{delimiter:"\t"});l.setData("noFocus",K)}l.setData("Text",X)}d.B.preventDefault(t)}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.handleCutEvent=function(t,e){try{if(!e)if(!1===d.B.fireEvent(this,"oncustomcut",t))return;var i=this.options.preventCopyColumn,o=i?i.split(","):[];if(this.options.preventCopy)return;if(s.v.browserCheck.safari){for(var n=document.activeElement,l=!1;null!=n;)n.id&&n.id==this.id&&(l=!0),n=n.parentNode;if(!l)return}var h=a.D.isIEAllVersion()?window.clipboardData:t.clipboardData,c=this.options.copyAmount;if(c||(c="cell"),"cell"==c&&this.focusedCell.length>0){for(var u=[],p=this.getColumnOrder(),g=this.htmlInfo.body.rowAttrArr.length,m=this.getDataLength()*g,f=0,b=p.length,y=0,v=0,w=0;w<this.focusedCell.length;w++){var S=this.focusedCell[w],C=S.focusedRowIndex,_=S.focusedColIndex,x=this.getLocationRowCol(C,_);C=x.rowIndex,_=x.colIndex,v+=x.rowSize*x.colSize-1,m>C&&(m=C),f<C+x.rowSize-1&&(f=C+x.rowSize-1),b>_&&(b=_),y<_+x.colSize-1&&(y=_+x.colSize-1)}var I=0;for(w=this.defaultColCnt+b;w<y+this.defaultColCnt;w++)1==this.hiddenList[w]&&(I+=1);if(this.focusedCell.length+v==(f-m+1)*(y-b-I+1))for(w=m;w<=f;w++){for(var T=[],k=b;k<=y;k++){var D=this.getOriginalRowCol(w,k),L=D.colIndex,W=D.rowIndex,A=k+this.defaultColCnt;if(1!=this.hiddenList[A]&&!(this.options.checkReadOnlyOnCut&&this.___getEditReadOnly(W,L)||e&&this.___getEditReadOnly(W,L)||this.options.checkDisabledOnCut&&this._getEditDisabled(W,L)||e&&this._getEditDisabled(W,L))){for(var M=this.getCellInfo(L),E=!1,q=0;q<o.length;q++)if(o[q]==M.colID){E=!0;break}if(!E&&!D.noLeftTop){var R=""!==M.options.escape?M.options.escape:this.options.escape;if(P="display"==M.options.copyOption?this._getDisplayData(this.getRealRowIndex(W),this.getColumnID(L)):this.dataList.getCellData(W,this.getColumnID(L)),R+""=="true"&&(P=WebSquare.xml._encode(P+"")),""!==P){var N={oldValue:P,newValue:"",rowIndex:W,colIndex:L,colId:this.getColumnID(L)};d.B.fireEvent(this,"onviewchange",N)}T.push(P),
this.dataList.setCellData(W,this.getColumnID(L),"")}}}u.push(T)}else{var F=this.focusedCell[this.focusedCell.length-1],O=F.focusedRowIndex,B=this.getColumnID(F.focusedColIndex),V=!1;if(this.options.checkReadOnlyOnCut&&this.___getEditReadOnly(O,B)&&(V=!0),this.options.checkDisabledOnCut&&this._getEditDisabled(O,B)&&(V=!0),null!=F&&!0!==V){var P;for(M=this.getCellInfo(B),w=0;w<o.length;w++)if(o[w]==M.colID)return;R=""!==M.options.escape?M.options.escape:this.options.escape;if(P="display"==M.options.copyOption?this._getDisplayData(this.getRealRowIndex(O),B):this.dataList.getCellData(O,B),R+""=="true"&&(P=WebSquare.xml._encode(P+"")),""!==P){N={oldValue:P,newValue:"",rowIndex:O,colIndex:F.focusedColIndex,colId:this.getColumnID(F.focusedColIndex)};d.B.fireEvent(this,"onviewchange",N)}this.dataList.setCellData(O,B,""),u.push([P])}}if(!e){var H=Papa.unparse(u,{delimiter:"\t"});h.setData("Text",H)}}d.B.preventDefault(t)}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.clickRightButtonCell=function(t){for(var e=a.D.getDataPrefix("header_id"),i=a.D.getDataPrefix("colIndex"),o=a.D.getDataPrefix("tdIndex"),s=a.D.getDataPrefix("rowIndex"),r=d.B.getTarget(t);r&&"TD"!=r.tagName&&"TH"!=r.tagName&&"DIV"!=r.tagName;)r=r.parentNode;var n=r&&this.hasClass(r,this.options.headerTdClass);if(r&&this.hasClass(r,this.options.bodyTdClass)&&(n=!1),n)d.B.preventDefault(t),d.B.fireEvent(this,"onheaderrightbuttonclick",r.getAttribute(e));else{for(var l=r;l;){if("TH"===l.tagName&&this.hasClass(l,this.options.headerTdClass)){n=!0;break}if("TD"===l.tagName&&this.hasClass(l,this.options.bodyTdClass)){n=!1;break}if("DIV"===l.tagName&&this.hasClass(l,"w2grid_dataLayer")&&0===this.getRowCount()){n=!1;break}l=l.parentNode}r=l}var h,c,u,p,g,m,f=null!=this.editedCell;if(!n&&f&&(h=this.editedCell.editRowIndex,c=this._dataList.getColumnIndex(this.editedCell.id),_=this.getCellInfo(this.editedCell.id),u=this.getColumnIndex(this.editedCell.id),p=this._grid.getRealRowIndex(h),g=this._dataList.dataArr[p*this._dataList.getColumnCount()+c],m=_.comp&&_.comp.selectedIndex),n&&this.options.useHeaderContextMenu){var b=void 0,y=-1,v=parseInt(r.getAttribute(i),10)-this.defaultColCnt;(L={}).result=b,L.rowIndex=y,L.colIndex=v,L.event=t;var w=[];if(this.focusedCell)for(var S=0;S<this.focusedCell.length;S++)w.push({rowIndex:this._getGroupbyDisplayRowIndex(this.focusedCell[S].focusedRowIndex),colIndex:this.focusedCell[S].focusedColIndex});L.focusedCell=w;var C={isHeader:!0};C.headerId=r.getAttribute(e),(W=d.B.fireEvent(this,"oncontextopen",y,v,w,C))?this.createContextMenu(L,W):this.contextMenu?this.showContextMenu(L):this.createContextMenu(L)}else if(r&&"TD"==r.tagName&&this.hasClass(r,this.options.bodyTdClass)){var _;if(!1===(b=this.__setFocusedCell(t,r,{allowContextMenuMultiCell:this.options.allowContextMenuMultiCell}))){if(this.focusedCell.length>0)for(S=0;S<this.focusedCell.length;S++)this._applyFocusedCellOut(this.focusedCell[S]);var x=r.className,I=parseInt(r.getAttribute(o)),T=parseInt(I/this.realRowDataLength);null!=x.match("rowNum")?(y=T,v="rowNum"):null!=x.match("rowStatus")?(y=T,v="rowStatus"):null!=x.match("groupby")?(y="groupby",v=-1):null!=x.match("Subtotal")&&(y="subtotal",v="number"==typeof(v=parseInt(r.getAttribute(i),10))?v:-1)}else r&&(this.hasClass(r,"w2grid_textImage")||this.hasClass(r,"w2grid_textImage_image"))?(y=parseInt(r.getAttribute(s),10),v=parseInt(r.getAttribute(i),10),this._setFocusedCell(y,v)):n?(y=parseInt(r.getAttribute(s),10),v=parseInt(r.getAttribute(i),10)):(y=this.getFocusedRowIndex(),v=this.getFocusedColumnIndex());if(!n&&r&&f){var k=this._dataList.dataArr[p*this._dataList.getColumnCount()+c];if(g!=k){var D={oldValue:g,newValue:k,rowIndex:h,colIndex:u,colId:this.getColumnID(u)};isNaN(m)||(D.oldSelectedIndex=m,D.newSelectedIndex=_&&_.comp&&_.comp.selectedIndex),d.B.fireEvent(this,"onviewchange",D)}}
if(this.options.senseReader)("text"!=(_=this.getCellInfo(v)).options.inputType&&"secret"!=_.options.inputType||this.___getEditReadOnly(y,v)||this.options.contextMenu)&&d.B.preventDefault(t);else d.B.preventDefault(t);if(d.B.fireEvent(this,"onrightbuttonclick",this._getGroupbyDisplayRowIndex(y),v,t),this.options.contextMenu){(L={}).result=b,L.rowIndex=y,L.colIndex=v;w=[];if(this.focusedCell)for(S=0;S<this.focusedCell.length;S++)w.push({rowIndex:this._getGroupbyDisplayRowIndex(this.focusedCell[S].focusedRowIndex),colIndex:this.focusedCell[S].focusedColIndex});L.focusedCell=w,L.event=t,(W=d.B.fireEvent(this,"oncontextopen",this._getGroupbyDisplayRowIndex(y),v,w))?this.createContextMenu(L,W):this.contextMenu?this.showContextMenu(L):this.createContextMenu(L)}}else if(r&&"DIV"==r.tagName&&this.hasClass(r,"w2grid_dataLayer")&&0===this.getRowCount()){var L,W;if(d.B.preventDefault(t),d.B.fireEvent(this,"onrightbuttonclick",-1,-1,t),this.options.contextMenu)(L={result:!1,rowIndex:-1,colIndex:-1,focusedCell:null}).event=t,(W=d.B.fireEvent(this,"oncontextopen",-1,-1,null))?this.createContextMenu(L,W):this.contextMenu?this.showContextMenu(L):this.createContextMenu(L)}},g.prototype.fireImageClick=function(t,e){var i=this.getCellInfo(e),o=this._getEditDisabled(t,e);if(this.options.useImageClick||0==o){var s=a.D.getGlobalFunction(i.options.imageClickFunction,this.scope_id);"function"==typeof s&&s.call(this,t,e,this.dataList._getCellData(t,e))}},g.prototype.gridOut=function(t){var e=d.B.getTarget(t);if(this.overElem&&(e.id==this.id+"_dataLayer"||e.id==this.overElem.id||""==e.id)){if(this.options.rowMouseOver&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),"TD"===this.overElem.tagName){var i=a.D.getDataPrefix("col_id"),o={};this.overElem.getAttribute(i)&&(o.rowIndex=this.getElemRowIndex(this.overElem),o.colIndex=this.getColumnIndex(this.overElem.getAttribute(i))),d.B.fireEvent(this,"onbodymouseout",o)}this.bodyOut(t,this.overElem),this.overElem=null}},g.prototype.addRowOverStyle=function(t){for(var e=a.D.getDataPrefix("trIndex"),i=a.D.getDataPrefix("tdIndex"),o=a.D.getDataPrefix("style_bak");null!=t&&(1!=t.nodeType||null==t.getAttribute(e));)if(null==(t=t.parentNode)||t.id==this.id+"_foot_table")return;if(null!=t){for(var s=parseInt(t.getAttribute(e));s>0;)s--,t=a.D.prev(t);var r=a.D.first(t),n=parseInt(r.getAttribute(i));if(!isNaN(n)){n=parseInt(n/(this.oneRowDataLength+this.defaultColCnt),10)*(this.oneRowDataLength+this.defaultColCnt);for(var l=this.options.rowMouseOverColor.wq_trim(),h=""==this.options.selectedCellOverColor?"":this.options.selectedCellOverColor.wq_trim(),d=""==this.options.selectedRowOverColor?"":this.options.selectedRowOverColor.wq_trim(),c=0;c<this.realRowDataLength;c++){var u=this.all_data_td_list[n+c],p=l;if(!(""==d||"row"!=this.options.focusMode&&"both"!=this.options.focusMode||"row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&c<this.options.fixedColumn))for(var g=parseInt(u.getAttribute(i)),m=parseInt(g/this.realRowDataLength)+this.rowIndex,f=0;f<this.focusedCell.length;f++)if(m==this.focusedCell[f].focusedRowIndex){p=d;break}if(""!=h&&("cell"==this.options.focusMode||"both"==this.options.focusMode)){g=parseInt(u.getAttribute(i)),m=parseInt(g/this.realRowDataLength)+this.rowIndex;var b=g%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);for(f=0;f<this.focusedCell.length;f++)if(m==this.focusedCell[f].focusedRowIndex&&b==this.focusedCell[f].focusedColIndex){p=h;break}}if(!("row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&c<this.options.fixedColumn))if(c<this.defaultColCnt){var y=u.className;(""==this.options.rowNumBackgroundColor&&y.indexOf(this.options.bodyTdClass+"_rowNumber")>=0||y.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)&&(u.style.backgroundColor=p)}else u.style.backgroundColor=p;u.removeAttribute(o)}}}},g.prototype.removeRowOverStyle=function(t){
if(!(this.options.tooltipHeader&&t&&t.getElementsByTagName("TH").length>0)){for(var e=a.D.getDataPrefix("trIndex"),i=a.D.getDataPrefix("tdIndex"),o=a.D.getDataPrefix("or_bgColor"),s=a.D.getDataPrefix("style_bak");null!=t&&(1!=t.nodeType||null==t.getAttribute(e));)if(null==(t=t.parentNode)||t.id==this.id+"_foot_table")return;if(null!=t){for(var r=parseInt(t.getAttribute(e));r>0;)r--,t=a.D.prev(t);var n=a.D.first(t),l=parseInt(n.getAttribute(i));if(!isNaN(l)){l=parseInt(l/(this.oneRowDataLength+this.defaultColCnt),10)*(this.oneRowDataLength+this.defaultColCnt);for(var h=0;h<this.realRowDataLength;h++){var d=this.all_data_td_list[l+h];if(h<this.defaultColCnt){var c=d.className;if(""==this.options.rowNumBackgroundColor&&c.indexOf(this.options.bodyTdClass+"_rowNumber")>=0)if("row"==this.options.focusMode||"both"==this.options.focusMode){for(var u=parseInt(d.getAttribute(i)),p=parseInt(u/this.realRowDataLength)+this.rowIndex,g=!1,m=0;m<this.focusedCell.length;m++)if(p==this.focusedCell[m].focusedRowIndex){g=!0;break}d.style.backgroundColor=g?this.options.selectedRowColor.wq_trim():""}else d.style.backgroundColor="";else if(c.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)if("row"==this.options.focusMode||"both"==this.options.focusMode){for(u=parseInt(d.getAttribute(i)),p=parseInt(u/this.realRowDataLength)+this.rowIndex,g=!1,m=0;m<this.focusedCell.length;m++)if(p==this.focusedCell[m].focusedRowIndex){g=!0;break}d.style.backgroundColor=g?this.options.selectedRowColor.wq_trim():""}else d.style.backgroundColor=""}else d.style.backgroundColor=d.getAttribute(o)||"";d.removeAttribute(s)}}}}},g.prototype.handleKeyDownEvent=function(t){if(!(this.parentControl&&this.parentControl.options&&"gridViewItemTable"===this.parentControl.options.pluginName||"gridItemTable"===this.parentControl.options.pluginName)&&0!=d.B.fireEvent(this,"onkeydown",t)){this.lastEvent=t;var e=WebSquare.event.getTarget(t);if(this.headerFocus);else{var i,o;if(e&&(e.className.match("w2grid_head_sort_div_main_btn")||e.className.match("w2grid_customFilter_open")))for(var s=e;s;){if("TH"===s.tagName&&this.hasClass(s,this.options.headerTdClass)){var r=WebSquare.util.getDataPrefix("header_id");i=s.getAttribute(r),e.className.match("w2grid_head_sort_div_main_btn")?o="sort":e.className.match("w2grid_customFilter_open")&&(o="filter");break}s=s.parentNode}if(!t.shiftKey&&9==t.keyCode&&i&&this.options.senseReader&&i===this._lastHeaderElementId&&o===this._lastHeaderElementType)this._setFirsCellFocus(t);else{if(e&&e.className.match("w2grid_start_div")&&this.options.senseReader&&"none"===this.options.focusMode)return;this.handleBodyKeyDown(t)}}}},g.prototype.handleKeyUpEvent=function(t){if(0!=d.B.fireEvent(this,"onkeyup",t)){if(this.lastEvent=t,this.editedCell&&this.editedCell._getEditedValue){var e=this.editedCell.options.inputType;if("custom"===e&&!this.editedCell.internal&&this.editedCell.editRowIndex){var i=this.getRealRowIndex(this.editedCell.editRowIndex);e=this.editedCell.cellManagerHashByRowIndex[i].options.inputType}if("text"===e||"textarea"===e||"calendar"===e||"textImage"===e||"secret"===e){var o=t.charCode?t.charCode:t.keyCode,s={rowIndex:this.editedCell.editRowIndex,colIndex:this.getColumnIndex(this.editedCell.id),colID:this.getColumnID(this.editedCell.id),oldValue:this.editedCell.beforeEditValue||"",newValue:this.editedCell._getEditedValue(),inputType:e,keyCode:o};d.B.fireEvent(this,"oneditkeyup",s)}}else null!=this.beforeEditedCellInfo&&d.B.fireEvent(this,"oneditkeyup",this.beforeEditedCellInfo);this.beforeEditedCellInfo=null}},g.prototype.headerOver=function(t,e){if(!(e.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0)){var i=e.offsetWidth;if(!(i<2)&&e.firstChild){var o=a.D.getDataPrefix("col_id"),s=e.getAttribute(o),n=null;if(s){var l=this.getHeaderInfo(s),h=(m=this.getHeaderInputType(s),l.options.embeddedInput);if(h&&"text"==m){
var d=this.getElemRowIndex(e),u=this.getColumnIndex(e.getAttribute(o));h=!this._getEditDisabled(d,u)&&!this.___getEditReadOnly(d,u)}if("textImage"==m||("autoComplete"==m||"calendar"==m)&&"true"==l.options.viewTypeIconImage)if("100%"==e.firstChild.style.width)n=e.getElementsByTagName("th")[0];else{var p=this.event.getTargetIterator(t),g="w2grid_textImage_image";for("true"===l.options.viewTypeIconImage&&("autoComplete"==m?g=this.options.bodyTdClass+"_autoComplete_img":"calendar"==m&&(g=this.options.bodyTdClass+"_calendar_div_img"));p.next();)if(p.match(null,null,"th")&&p.getElement().id){n=this.hasClass(e,g)?e.previousSibling:e,e=p.getElement();break}}}else var m="text";if("text"==m||"textarea"==m||"textImage"==m||"link"==m||"calendar"==m||"expression"==m||"select"==m&&!h||"drilldown"==m||"autoComplete"==m||"checkcombobox"==m||"button"==m||this.options.showImageTooltip&&"image"==m){var f;"textarea"==m?(f=e.cloneNode(!0)).firstChild.style.width="":f=n||e;var b=i,y=e.offsetHeight,v=WebSquare.style.getStyle(e,"text-overflow"),w=20,S=y+3;try{this.options.tooltipPositionX&&(w=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(b,y)),this.options.tooltipPositionY&&(S=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(b,y))}catch(t){c.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}this.options.tooltipShowAlwaysColumns;if(this.options.tooltipHeaderShowAlways){var C=WebSquare.style.getAbsoluteLeft(e)+w,_=WebSquare.style.getAbsoluteTop(e)+S,x="";if("text"==m&&h?x=f.firstChild.value:"link"==m?("NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span"),x=f.firstChild.innerHTML):x="textImage"==m||("autoComplete"==m||"calendar"==m)&&"true"==l.options.viewTypeIconImage?"NOBR"==n.firstChild.tagName||"SPAN"==n.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?f.firstChild.innerHTML:f.innerHTML:"image"==m?f.firstChild.innerHTML:"drilldown"==m?"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1||"BUTTON"==e.firstChild.tagName?f.firstChild.innerHTML:f.innerText.wq_trim(),this.options.tooltipFormatterHeader)try{if("function"==typeof(A=a.D.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))x=A(e.getAttribute(o),x)}catch(t){r.w.printStackTrace(t,null,this)}""!=x&&this.showTooltip(C,_,x,S)}else if("ellipsis"==v){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),this.render.appendChild(this.toolTipRuler),this.toolTipRuler.className=f.className,"text"==m&&h?(this.toolTipRuler.innerHTML="<div>"+f.firstChild.value+"</div>",this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(f.firstChild,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(f.firstChild,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(f.firstChild,"font-weight")):(this.toolTipRuler.innerHTML=f.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(f,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(f,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(f,"font-weight"));var I=this.toolTipRuler.firstChild.offsetWidth;if("textImage"==m||("autoComplete"==m||"calendar"==m)&&"true"==l.options.viewTypeIconImage)var T=n.clientWidth;else T=e.clientWidth;if(3!=f.firstChild.nodeType){var k=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),D=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");I-=parseInt(k||"0",10),I-=parseInt(D||"0",10),
"textImage"==m||("autoComplete"==m||"calendar"==m)&&"true"==l.options.viewTypeIconImage?(T-=parseInt(WebSquare.style.getStyle(n.firstChild,"padding-left"),10),T-=parseInt(WebSquare.style.getStyle(n.firstChild,"padding-right"),10),T-=parseInt(WebSquare.style.getStyle(n,"padding-left"),10),T-=parseInt(WebSquare.style.getStyle(n,"padding-right"),10)):(T-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-left"),10),T-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-right"),10),T-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),T-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10))}if(T<I||"image"==m||T==I&&e.clientWidth<e.scrollWidth){C=WebSquare.style.getAbsoluteLeft(e)+w,_=WebSquare.style.getAbsoluteTop(e)+S,x="";if("text"==m&&h?x=f.firstChild.value:"link"==m?("NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span"),x=f.firstChild.innerHTML):x="textImage"==m||("autoComplete"==m||"calendar"==m)&&"true"==l.options.viewTypeIconImage?"NOBR"==n.firstChild.tagName||"SPAN"==n.firstChild.tagName&&n.firstChild.className.indexOf("w2grid_span")>-1?f.firstChild.innerHTML:f.innerHTML:"image"==m?f.firstChild.innerHTML:"drilldown"==m?"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1||"BUTTON"==e.firstChild.tagName?f.firstChild.innerHTML:f.innerText.wq_trim(),this.render.removeChild(this.toolTipRuler),this.options.tooltipFormatterHeader)try{if("function"==typeof(A=a.D.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))x=A(e.getAttribute(o),x)}catch(t){r.w.printStackTrace(t,null,this)}x.match('href=""')&&(x=x.wq_replaceAll('href=""',"")),this.showTooltip(C,_,x,S)}else this.render.removeChild(this.toolTipRuler)}else{var L=e.firstChild.offsetWidth;if(!0===this.options.showSortableImage){var W=e.firstChild.getElementsByTagName(this.options.dataTag)[0];W&&("NOBR"==W.tagName||"SPAN"==W.tagName&&W.className.indexOf("w2grid_span")>-1)&&(L=W.offsetWidth+parseInt(WebSquare.style.getStyle(e.firstChild,"margin-left"),10))}if(i+3<L){C=WebSquare.style.getAbsoluteLeft(e)+w,_=WebSquare.style.getAbsoluteTop(e)+S,x="";if("text"==m&&h?x=f.firstChild.value:"link"==m?("NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span"),x=f.firstChild.innerHTML):x="image"==m?f.firstChild.innerHTML:"drilldown"==m?"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1||"BUTTON"==e.firstChild.tagName?f.firstChild.innerHTML:f.innerText.wq_trim(),this.options.tooltipFormatterHeader)try{var A;if("function"==typeof(A=a.D.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))x=A(e.getAttribute(o),x)}catch(t){r.w.printStackTrace(t,null,this)}this.showTooltip(C,_,x,S)}}}}}},g.prototype.bodyOver=function(t,e){var i=a.D.getDataPrefix("col_id");if(this.options.rowStatusTooltipDisplay&&e.className.indexOf(this.options.bodyTdClass+"_rowStatus")>=0){var o=p=e.offsetWidth,s="",n=20,l=(x=e.offsetHeight)+3;try{this.options.tooltipPositionX&&(n=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(o,x)),this.options.tooltipPositionY&&(l=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(o,x))}catch(t){c.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}var h=WebSquare.style.getAbsoluteLeft(e)+n,d=WebSquare.style.getAbsoluteTop(e)+l,u=this.getElemRowIndex(e);switch(this.getRowStatus(u)){case"C":s=WebSquare.language.getMessage("Grid_rowStatus_insert");break;case"R":
s=WebSquare.language.getMessage("Grid_rowStatus_initialValue");break;case"U":s=WebSquare.language.getMessage("Grid_rowStatus_update");break;case"D":s=WebSquare.language.getMessage("Grid_rowStatus_delete");break;case"V":s=WebSquare.language.getMessage("Grid_rowStatus_D_After_C");break;default:return}this.options.tooltipFormatter&&(s=this._showTooltopFormatter(e.id,s,!0)),""!=s&&this.showTooltip(h,d,s,l)}else{if(!this.options.tooltipDisplay)return;if(e.className.indexOf(this.options.bodyTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)return;var p;if((p=e.offsetWidth)<2||!e.firstChild)return;var g=e.getAttribute(i);if(this.options.tooltipDisplayColumn&&g&&-1===this.options.tooltipDisplayColumn.indexOf(g))return;var m=null;if(g){var f=this.getCellInfo(g),b=f.options.escape;if(0==f.internal&&"custom"==f.options.inputType){u=this.getRealRowIndex(this.getElemRowIndex(e));f=f.cellManagerHashByRowIndex[u]?f.cellManagerHashByRowIndex[u]:f}C=f.options.inputType;var y=f.options.embeddedInput;if(y&&"text"==C){u=this.getElemRowIndex(e);var v=this.getColumnIndex(e.getAttribute(i));y=!this._getEditDisabled(u,v)&&!this.___getEditReadOnly(u,v)}if("textImage"==C||("autoComplete"==C||"calendar"==C)&&"true"==f.options.viewTypeIconImage)if("100%"==e.firstChild.style.width)m=e.getElementsByTagName("td")[0];else{var w=this.event.getTargetIterator(t),S="w2grid_textImage_image";for("true"===f.options.viewTypeIconImage&&("autoComplete"==C?S=this.mainGrid.options.bodyTdClass+"_autoComplete_img":"calendar"==C&&(S=this.mainGrid.options.bodyTdClass+"_calendar_div_img"));w.next();)if(w.match(null,null,"td")&&w.getElement().id){m=this.hasClass(e,S)?e.previousSibling:e,e=w.getElement();break}}}else var C="text";if("checkbox"==C||"radio"==C||"text"==C||"textarea"==C||"textImage"==C||"link"==C||"calendar"==C||"expression"==C||"select"==C||"drilldown"==C||"autoComplete"==C||"checkcombobox"==C||"button"==C||this.options.showImageTooltip&&"image"==C){var _;"textarea"==C?(_=e.cloneNode(!0)).firstChild.style.width="":_=m||e;o=p;var x=e.offsetHeight,I=WebSquare.style.getStyle(e,"text-overflow");n=20,l=x+3;try{this.options.tooltipPositionX&&(n=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(o,x)),this.options.tooltipPositionY&&(l=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(o,x))}catch(t){c.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}var T=this.options.tooltipShowAlwaysColumns;if(this.options.tooltipShowAlways||g&&T&&T.indexOf(g)>-1){h=WebSquare.style.getAbsoluteLeft(e)+n,d=WebSquare.style.getAbsoluteTop(e)+l,s="";if("text"==C&&y)s=_.firstChild.value;else if("link"==C)s="NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?_.firstChild.firstChild.innerHTML:_.firstChild.innerHTML;else if("textImage"==C||("autoComplete"==C||"calendar"==C)&&"true"==f.options.viewTypeIconImage)s="NOBR"==m.firstChild.tagName||"SPAN"==m.firstChild.tagName&&m.firstChild.className.indexOf("w2grid_span")>-1?_.firstChild.innerHTML:_.innerHTML;else if("image"==C)s=_.firstChild.src;else if("drilldown"==C)s="NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?e.firstChild.innerText.replace(/^\s*/,""):e.innerText;else if("select"==C&&"ul"===f.options.tableRender)s=_.innerText.wq_trim();else if("select"==C&&y)s=e.querySelector("select").value;else if("checkbox"==C||"radio"==C){(D=_.getElementsByTagName("label")[0])&&(s=D.innerText)}else s="NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1||"BUTTON"==e.firstChild.tagName?_.firstChild.innerHTML:_.innerText.wq_trim();if(this.options.tooltipFormatter){var k=p<e.scrollWidth;s=this._showTooltopFormatter(e.id,s,k)}""!=s&&this.showTooltip(h,d,s,l,b)}else if("ellipsis"==I){var D
;if(("checkbox"==C||"radio"==C)&&!(D=_.getElementsByTagName("label")[0]))return;if(this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),this.render.appendChild(this.toolTipRuler),this.toolTipRuler.className=_.className,"text"==C&&y)this.toolTipRuler.innerHTML="<div>"+_.firstChild.value+"</div>",this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(_.firstChild,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(_.firstChild,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(_.firstChild,"font-weight");else{if("drilldown"==C&&"line"==f.options.depthType){var L=_.getElementsByTagName(this.options.dataTag)[0];("NOBR"==L.tagName||"SPAN"==L.tagName&&L.className.indexOf("w2grid_span")>-1)&&(this.toolTipRuler.innerHTML=L.outerHTML)}else this.toolTipRuler.innerHTML="checkbox"==C||"radio"==C?D.outerHTML:_.innerHTML;this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(_,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(_,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(_,"font-weight")}var W=this.toolTipRuler.firstChild.offsetWidth;if(null!=e.getBoundingClientRect&&(W=this.toolTipRuler.firstChild.getBoundingClientRect().width),"textImage"==C||("autoComplete"==C||"calendar"==C)&&"true"==f.options.viewTypeIconImage){var A=m.clientWidth;null!=e.getBoundingClientRect&&(A=m.getBoundingClientRect().width)}else{A=e.clientWidth;if(null!=e.getBoundingClientRect){var M=(WebSquare.style.getSize(e,"outerwidth")-WebSquare.style.getSize(e,"width"))/2;A=e.getBoundingClientRect().width-M}"drilldown"==C&&"line"==f.options.depthType?A=e.clientWidth-e.firstChild.clientWidth:"checkbox"!=C&&"radio"!=C||(A=e.clientWidth-WebSquare.style.getSize(e.firstChild,"outerMarginWidth"))}if(3!=_.firstChild.nodeType){var E=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),q=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");W-=parseInt(E||"0",10),W-=parseInt(q||"0",10),"textImage"==C||("autoComplete"==C||"calendar"==C)&&"true"==f.options.viewTypeIconImage?(A-=parseInt(WebSquare.style.getStyle(m.firstChild,"padding-left"),10),A-=parseInt(WebSquare.style.getStyle(m.firstChild,"padding-right"),10),A-=parseInt(WebSquare.style.getStyle(m,"padding-left"),10),A-=parseInt(WebSquare.style.getStyle(m,"padding-right"),10)):(A-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-left"),10),A-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-right"),10),A-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),A-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10))}if(A<W||"image"==C||A==W&&e.clientWidth<e.scrollWidth){h=WebSquare.style.getAbsoluteLeft(e)+n,d=WebSquare.style.getAbsoluteTop(e)+l,s="";s="text"==C&&y?_.firstChild.value:"link"==C?"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.indexOf("w2grid_span")>-1?_.firstChild.firstChild.innerHTML:_.firstChild.innerHTML:"textImage"==C||("autoComplete"==C||"calendar"==C)&&"true"==f.options.viewTypeIconImage?"NOBR"==m.firstChild.tagName||"SPAN"==m.firstChild.tagName&&m.firstChild.className.indexOf("w2grid_span")>-1?_.firstChild.innerHTML:_.innerHTML:"image"==C?_.firstChild.src:"drilldown"==C?"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1||"BUTTON"==e.firstChild.tagName?_.firstChild.innerHTML:_.innerText.wq_trim(),this.render.removeChild(this.toolTipRuler),this.options.tooltipFormatter&&(s=this._showTooltopFormatter(e.id,s,!0)),s.match('href=""')&&(s=s.wq_replaceAll('href=""',"")),this.showTooltip(h,d,s,l,b)}else this.render.removeChild(this.toolTipRuler)}else{
if(p+3<e.firstChild.offsetWidth){h=WebSquare.style.getAbsoluteLeft(e)+n,d=WebSquare.style.getAbsoluteTop(e)+l,s="";s="text"==C&&y?_.firstChild.value:"link"==C?"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?_.firstChild.firstChild.innerHTML:_.firstChild.innerHTML:"image"==C?_.firstChild.src:"drilldown"==C?"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1||"BUTTON"==e.firstChild.tagName?_.firstChild.innerHTML:_.innerText.wq_trim(),this.options.tooltipFormatter&&(s=this._showTooltopFormatter(e.id,s,!0)),this.showTooltip(h,d,s,l,b)}}}}},g.prototype._showTooltopFormatter=function(t,e,i){try{var o=document.getElementById(t),s=a.D.getDataPrefix("col_id"),n=a.D.getDataPrefix("colindex"),l=a.D.getDataPrefix("trindex"),h=a.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);if("function"==typeof h){var d,c,u="body";this.hasClass(o,this.options.subtotalTdClass)?(u="subtotal",d=parseInt(o.parentNode.getAttribute(l),10),c=parseInt(o.getAttribute(n),10)):this.hasClass(o,this.options.footerTdClass)?(u="footer",d=parseInt(o.parentNode.getAttribute("data-trindex"),10),c=parseInt(o.getAttribute(n),10)):(d=this.getElemRowIndex(o),c=this.getColumnIndex(o.getAttribute(s))),e=h(d,c,e,i,u)}return e}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.bodyOut=function(t,e){var i=this;(i.options.tooltipDisplay||i.options.headerTooltipDisplay||this.options.tooltipHeader||i.options.rowStatusTooltipDisplay)&&e&&i.hideTooltip()},g.prototype.showTooltip=function(t,e,i,o,n){if(null==this.editedCell){try{var l=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(l){var h=a.D.getGlobalFunction(l,this.scope_id),c=!0;if("function"==typeof h&&(c=h(this)),!c)return}}catch(t){r.w.printStackTrace(t)}var u=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.output(this.id+"_tooltip",{className:"w2grid_tooltip "+this.options.tooltipClass,style:"position:absolute;"+this.options.tooltipStyle}),this.tooltip.parentFrame=this.parentFrame,this.tooltip.writeTo(WebSquare.getBody()),this.tooltip.activate(),"click"===this.options.tooltipHide?this.tooltip.render.onclick=function(){this.style.display="none"}:this.tooltip.render.onmouseover=function(){this.style.display="none"}),"click"===this.options.tooltipHide&&(1==WebSquare.getBody().hasClass("w2drag_activate")?(this.tooltip.render.onclick=null,this.tooltip.render.onmouseover=function(){this.style.display="none"}):(this.tooltip.render.onclick=function(){this.style.display="none"},this.tooltip.render.onmouseover=null)),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.tooltip.render.innerHTML=n?WebSquare.xml._encode(i):i,d.B.fireEvent(this,"ontooltipshow");var p=this.tooltip.render.offsetTop+this.tooltip.render.offsetHeight+20,g=document.body.scrollHeight;if(null!=WebSquare.BootLoader.fullViewRatio&&(g=document.body.clientHeight+Math.abs(document.body.getBoundingClientRect().top)),p>g){var m=e-(o+this.tooltip.render.offsetHeight);m<0&&(m=0),this.tooltip.setStyle("top",m+"px")}if(document.body.scrollWidth>u){var f=t-(document.body.scrollWidth-u);f<0&&(f=0),this.tooltip.setStyle("left",f+"px")}this.options.tooltipDisplayTime>0&&s.v.setTimer(this.hideTooltip,{key:this.id+"_tooltip_hide_timer",caller:this,delay:this.options.tooltipDisplayTime})}},g.prototype.hideTooltip=function(){this.tooltip&&(this.options.tooltipDisplayTime>0&&s.v.clearTimer(this.id+"_tooltip_hide_timer"),d.B.fireEvent(this,"ontooltiphide"),this.tooltip.setStyle("display","none"))},g.prototype.bodyClick=function(t,e){try{var i=this.getLastFocusedCell().focusedTd
;this.options.rowMouseOver&&this.removeRowOverStyle(this.lastOverSrc,"grid_body_row_over","grid_body_row");var o=a.D.getDataPrefix("tdIndex"),s=a.D.getDataPrefix("col_id"),n=a.D.getDataPrefix("colIndex"),l=this.rowIndex,h=parseInt(e.getAttribute(o)),c=(L=parseInt(h/this.realRowDataLength))+this.rowIndex,u=e.getAttribute(s),p=this._dataList.getRowPosition(),g=this.getColumnIndex(this._dataList.getColumnPosition()),m=L+l,f=h%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(u&&(k=this.getCellInfo(u)),"number"!=typeof(M=this.dataList.getRealRowIndex(c)))return void(M&&"header"==M.type&&this.toggleGroup(M.groupId));if(this.options.focusDefaultColumn){var b=e.getAttribute("id")||"",y="_headerRowNumber"===b.slice(0,"_headerRowNumber".length),v="_headerRowStatus"===b.slice(0,"_headerRowStatus".length);if(y||v)return this.__setFocusedCell(t,e,{editMode:!1}),void(v?d.B.fireEvent(this,"onrowstatusclick",m):d.B.fireEvent(this,"onrownumclick",m))}if(null==u)return;this.moveDirection=null;var w=g-f,S=p-m;0==w&&0==S?this.moveDirection="none":(w>0||w<0)&&(S>0||S<0)?this.moveDirection="both":w>0||w<0?this.moveDirection="column":(S>0||S<0)&&(this.moveDirection="row");var C=a.D.getDataPrefix("editModeEvent"),_=e.getAttribute(C)||"",x=!1;if(""!=_&&"onsecondclick"==_.toLowerCase()||""==_&&"onsecondclick"==this.options.editModeEvent.toLowerCase())for(var I=0;I<this.focusedCell.length;I++)this.focusedCell[I].focusedRowIndex==m&&this.focusedCell[I].focusedColIndex==f&&(x=!0);var T,k=this.getCellInfo(e);d.B.getTarget(t);if(!k.options.blockSelect&&("button"!=k.options.inputType||this._getEditDisabled(m,f)||this.___getEditReadOnly(m,f))){var D=!0;if(this.options.preventDuplicateFocusedCell&&"linear"===this.options.focusFlow&&"link"!==k.options.inputType&&(D=!1),D){if("enter"===this.options.drilldownToggle&&this.isMobile&&this.isHammerEnabled())if(1==this.focusedCell.length)if((k=this.getCellInfo(this.focusedCell[0].focusedColIndex))&&"drilldown"==k.options.inputType){h=parseInt(e.getAttribute(o));var L=parseInt(h/this.realRowDataLength),W=(u=parseInt(e.getAttribute(n)),m=this._getGroupbyDisplayRowIndex(L+l),f=h%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),this.focusedCell[0].focusedColIndex),A=this.focusedCell[0].focusedRowIndex;if(m===A&&f===W){var M=this.dataList.getRealRowIndex(A);this.toggle(M)}}this.__setFocusedCell(t,e,{editMode:"none"==k.options.focusMode,dont_fixScroll:this.options.CellClickFixScrollX})}k.options.embeddedInput&&(this.focusedByApi=!1)}if(t.altKey&&!0===this.options.contextMenuAltClick)return void this.clickRightButtonCell(t);var E=!0;switch(T=a.D.isIE()?t.srcElement:t.target,k.options.inputType){case"radio":case"checkbox":if("INPUT"!=T.tagName)if(!this.options.checkOnCellClick||"LABEL"==T.tagName||this._getEditDisabled(m,f)||this.___getEditReadOnly(m,f))E=!1;else{var q=e.getElementsByTagName("input")[0];q&&(q.checked=!q.checked)}case"drilldown":this.options.ignoreToggleOnDisabled&&this._getEditDisabled(c,u)&&(E=!1)}var R,N=!1,F=this.isHammerEnabled();if(E&&!(R=this.setCellClickEdit(e))){_=e.getAttribute(C)||k.options.editModeEvent||"";var O=null!=i&&i===e,B=""!=_&&"onclick"==_.toLowerCase()||""==_&&"onclick"==this.options.editModeEvent.toLowerCase()||x;if((!F||O)&&B){if(!this._getEditDisabled(c,u)){h=parseInt(e.getAttribute(o)),L=parseInt(h/this.realRowDataLength),u=parseInt(e.getAttribute(n));var V=e.getAttribute(s);m=this._getGroupbyDisplayRowIndex(L+l),f=h%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(this.hideTooltip(),!("button"===(k=this.getCellInfo(f)).options.inputType||!k.options.embeddedInput&&("checkbox"===k.options.inputType||"radio"===k.options.inputType)&&this.options.preventMultipleClick)){var P=!1
;if(0==k.internal&&"custom"==k.options.inputType)("button"===(H=k.cellManagerHashByRowIndex[this.getRealRowIndex(m)]?k.cellManagerHashByRowIndex[this.getRealRowIndex(m)]:k).options.inputType||!H.options.embeddedInput&&("checkbox"===H.options.inputType||"radio"===H.options.inputType)&&this.options.preventMultipleClick)&&(P=!0);P||"drilldown"==k.options.inputType&&this.options.ignoreCellClick&&R||d.B.fireEvent(this,"oncellclick",m,f,V)}N=!0}this.setEditMode(e)}}if(!N&&!this._getEditDisabled(c,u)){h=parseInt(e.getAttribute(o)),L=parseInt(h/this.realRowDataLength),u=parseInt(e.getAttribute(n)),V=e.getAttribute(s),m=L+l,f=h%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(F||this.options.tooltipDisplay&&this.isMobile?this.bodyOver(t,e):this.hideTooltip(),!("button"===(k=this.getCellInfo(f)).options.inputType||!k.options.embeddedInput&&("checkbox"===k.options.inputType||"radio"===k.options.inputType&&this.options.preventDuplicateFocusedCell)&&this.options.preventMultipleClick&&!(this.options.checkOnCellClick&&"LABEL"!=T.tagName))){var H;if(0==k.internal&&"custom"==k.options.inputType)if("button"===(H=k.cellManagerHashByRowIndex[this.getRealRowIndex(m)]?k.cellManagerHashByRowIndex[this.getRealRowIndex(m)]:k).options.inputType||!H.options.embeddedInput&&"checkbox"===H.options.inputType&&this.options.preventMultipleClick)return;m=this._getGroupbyDisplayRowIndex(m),"drilldown"==k.options.inputType&&this.options.ignoreCellClick?R||d.B.fireEvent(this,"oncellclick",m,f,V):("radio"!==k.options.inputType&&"checkbox"!==k.options.inputType||"LABEL"!==T.tagName&&"TD"!==T.tagName)&&d.B.fireEvent(this,"oncellclick",m,f,V)}}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.bodyDblClick=function(t,e){var i=a.D.getDataPrefix("tdIndex"),o=a.D.getDataPrefix("col_id"),s=a.D.getDataPrefix("editModeEvent");if("INPUT"==e.tagName)var r=this.getLastFocusedCell(),n=r.focusedRowIndex,l=r.focusedColIndex;else{var h=parseInt(e.getAttribute(i));n=parseInt(h/this.realRowDataLength)+this.rowIndex,l=e.getAttribute(o)}if(null!=l){var c=e.getAttribute(s)||"";if((""!=c&&"ondblclick"==c.toLowerCase()||""==c&&"ondblclick"==this.options.editModeEvent.toLowerCase())&&this.setEditMode(e),!this._getEditDisabled(n,l)){this.rollbackCommitFlag=!1;var u=this.isHammerEnabled(),p=this.getCellInfo(l);if(u||p.options.blockSelect)d.B.fireEvent(this,"oncelldblclick",this._getGroupbyDisplayRowIndex(n),this.getColumnIndex(l),this.getColumnID(l));else{var g=this.getFocusedColumnIndex();d.B.fireEvent(this,"oncelldblclick",this._getGroupbyDisplayRowIndex(this._getFocusedRowIndex()),g,this.getColumnID(g))}this.rollbackCommitFlag=!0}}},g.prototype.headerClick=function(t,e){this.focusedByApi=!1,this.options.tooltipHeader&&this.hideTooltip();var i=a.D.getDataPrefix("header_id"),o=a.D.getDataPrefix("sortable"),s=e.getAttribute(i);if(this.options.preventMultipleClick&&this.headerInfoHash[s]&&this.headerInfoHash[s].options&&"checkbox"===this.headerInfoHash[s].options.inputType||1!=this._getHeaderDisabled(s)&&d.B.fireEvent(this,"onheaderclick",s),null!=this.editedCell&&this.editedCell.handleEndEdit(),1==this.noevent);else if(this.getDataLength()>0&&"onclick"==this.options.sortEvent&&(this.options.sortable||"true"==e.getAttribute(o))&&!this.groupbyStatus.grouped&&(this.fireSortEvent(t,e),this.options.sortHeaderDiv)){var r=e.getElementsByTagName("button");if(r.length>0)r[r.length-1].focus(),1==this.options.senseReader&&this.addGridScroll(0-this.rowIndex)}this.noevent=!1},g.prototype.headerDdlClick=function(t,e){var i=a.D.getDataPrefix("header_id"),o=a.D.getDataPrefix("sortable");d.B.fireEvent(this,"onheaderdblclick",e.getAttribute(i)),this.getDataLength()>0&&("ondblclick"!=this.options.sortEvent||!this.options.sortable&&"true"!=e.getAttribute(o)||this.groupbyStatus.grouped||this.fireSortEvent(t,e)),this.groupbyStatus.grouped&&this.options.sortable||(this.noevent=!1)},g.prototype.fireGroupByRangeSortEvent=function(t,e){try{return}catch(t){
r.w.printStackTrace(t,null,this)}},g.prototype.recursiveRangeSort=function(t,e,i){try{return}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.fireSortEvent=function(t,e){if(!e.disabled&&!(e.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0)){var i=a.D.getDataPrefix("header_id"),o=e.getAttribute(i);if("false"!==this.getHeaderConfigValue(e,o,"sortable")){var s=this.headerToBodyRelation[o],r=a.D.getDataPrefix("orderByColumn"),n=e.getAttribute(r);n&&this.bodyIdColIndexMap[n]&&(s=n);var l=!this.options.useCtrlOnMultisort||(t.ctrlKey||t.metaKey);this.options.preventMultisort&&(l=!1);var h=this.cellInfoHash[s];if("gridView"!=this.initializeType||"expression"!=h.options.inputType||"true"==h.options.expressionSort){if(null==this.headerSortStatusArr&&(this.headerSortStatusArr=[]),this.headerSortStatusArr[s]){if(this.options.noSortInit?-1==this.headerSortStatusArr[s].sortOrder?this.headerSortStatusArr[s].sortOrder=1:this.headerSortStatusArr[s].sortOrder=-1:this.options.sortOrderReverse?this.headerSortStatusArr[s].sortOrder=(this.headerSortStatusArr[s].sortOrder+3)%3-1:this.headerSortStatusArr[s].sortOrder=(this.headerSortStatusArr[s].sortOrder-3)%3+1,!l){var u=this.headerSortStatusArr[s];this.clearHeaderSort(),this.headerSortStatusArr.push(u),this.headerSortStatusArr[s]=this.headerSortStatusArr[0]}}else{if(this.headerSortStatusArr.length>0&&l){if(isNaN(this._grid._dataList.getColumnIndex(s)))return void c.k.printLog("fake columns do not supported multiple sort.["+this.id+"]");for(var p=0;p<this.headerSortStatusArr.length;p++)if(isNaN(this._grid._dataList.getColumnIndex(this.headerSortStatusArr[p].colID)))return void c.k.printLog("fake columns do not supported multiple sort.["+this.id+"]")}(u={}).headerId=o,u.colID=s,this.options.sortOrderReverse?u.sortOrder=-1:u.sortOrder=1;h=this.getCellInfo(s);var g=this.getColumnOption(h.options.col_id,"dataType"),m=this._dataList.getCellInfo(s).options.dataType;u.dataType="number"==g||"bigDecimal"===g||"float"==g?g:m,l?(this.headerSortStatusArr.push(u),this.headerSortStatusArr[s]=this.headerSortStatusArr[this.headerSortStatusArr.length-1]):(this.clearHeaderSort(),this.headerSortStatusArr.push(u),this.headerSortStatusArr[s]=this.headerSortStatusArr[0])}var f=[],b=[],y=(g=[],{});if(y.headerId=o,y.bodyColId=s,y.sortOrder=this.headerSortStatusArr[s].sortOrder,0==this.headerSortStatusArr.length)this.dataList.clearSortFilter();else{for(p=this.headerSortStatusArr.length-1;p>=0;p--)if(0==this.headerSortStatusArr[p].sortOrder){var v=this.headerSortStatusArr[p].colID;if(this.setHeaderSortImage(o,0,0),this.headerSortStatusArr.splice(p,1),delete this.headerSortStatusArr[v],0==this.headerSortStatusArr.length)return d.B.fireEvent(this,"onbeforesort",y),this.dataList.clearSort(),void d.B.fireEvent(this,"onsort",y)}else f.push(this.headerSortStatusArr[p].colID),b.push(this.headerSortStatusArr[p].sortOrder),g.push(this.headerSortStatusArr[p].dataType);if(f.reverse(),b.reverse(),g.reverse(),0==d.B.fireEvent(this,"onbeforesort",y))return;this.dataList.setFilter({type:"sort",sortIndex:f.join(" "),sortOrder:b.join(" "),dataType:g.join(" "),focuseMode:this.options.filterFocusMode,ignoreEmptyStringOnSort:this.options.ignoreEmptyStringOnSort,setEmptyStringFirstOnSort:this.options.setEmptyStringFirstOnSort,setEmptyStringSortableOnSort:this.options.setEmptyStringSortableOnSort})}this.drawHeaderSortImages(),d.B.fireEvent(this,"onsort",y)}}}},g.prototype.footerClick=function(t,e){var i=a.D.getDataPrefix("footer_id");d.B.fireEvent(this,"onfooterclick",e.getAttribute(i)),null!=this.editedCell&&this.editedCell.handleEndEdit()},g.prototype.footerDblClick=function(t,e){var i=a.D.getDataPrefix("footer_id");d.B.fireEvent(this,"onfooterdblclick",e.getAttribute(i)),null!=this.editedCell&&this.editedCell.handleEndEdit()},g.prototype.subtotalClick=function(t,e){try{
for(var i=e.getAttribute("id"),o=a.D.getDataPrefix("targetcolumnid"),s=e.parentNode.getAttribute(o),n=0,l=-1,h=0;h<this.subtotalRowHash[s].length;h++)if(this.subtotalRowHash[s][h]===e.parentNode){l=parseInt(e.parentNode.getAttribute("data-subtotalrowindex"),10);break}if(l>-1){var c=this._dataList.getCellData(l,s);for(n=l-1;this._dataList.getCellData(n,s)==c&&n>=0;n--);n++}var u={colID:i,startRowIndex:n,endRowIndex:l,element:e};d.B.fireEvent(this,"onsubtotalclick",u),null!=this.editedCell&&this.editedCell.handleEndEdit()}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.subtotalDblClick=function(t,e){try{for(var i=e.getAttribute("id"),o=a.D.getDataPrefix("targetcolumnid"),s=e.parentNode.getAttribute(o),n=0,l=-1,h=0;h<this.subtotalRowHash[s].length;h++)if(this.subtotalRowHash[s][h]===e.parentNode){l=parseInt(e.parentNode.getAttribute("data-subtotalrowindex"),10);break}if(l>-1){var c=this._dataList.getCellData(l,s);for(n=l-1;this._dataList.getCellData(n,s)==c&&n>=0;n--);n++}var u={colID:i,startRowIndex:n,endRowIndex:l,element:e};d.B.fireEvent(this,"onsubtotaldblclick",u)}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.handleTouchStart=function(t){!this.isHammerEnabled()&&this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip(),s.v.clearTimer(this.id+"_iScroll_slideX");var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;(e||i)&&(this.iScrollAddMoveClass(),this.iScroll.moveDirection=null,this.iScroll.propagation=null,this.iScroll.prevTouches=[{x:e?t.touches[0].pageX:t.pageX,y:e?t.touches[0].pageY:t.pageY}],s.v.setTimer((function(){this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[],this.iScroll.propagation="pass"}),{key:this.id+"_iScroll",caller:this,delay:this.options.iScrollMoveEffectTime}))},g.prototype.handleTouchMove=function(t){if("pass"!=this.iScroll.propagation){this.iScroll.addMoveClass&&(this.iScrollAddMoveClass(),this.iScroll.addMoveClass=!1);var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;if(e||i){var o=this.scrollX_right,r=this.getElementById(this.id+"_scrollY_div");this.iScroll.prevTouches.push({x:e?t.touches[0].pageX:t.pageX,y:e?t.touches[0].pageY:t.pageY});var a=this.iScroll.prevTouches=this.iScroll.prevTouches.splice(-2),n=a[0].x-a[1].x,l=a[0].y-a[1].y,h=this.iScroll.moveDirection;if(h||(h=this.iScroll.moveDirection=Math.abs(l)>=Math.abs(n)?"Y":"X",this.iScroll.moveDistance=Math.abs(l)>=Math.abs(n)?Math.abs(l):Math.abs(n)),this.options.scrollByColumnAdaptive&&this.event.hasEvent(this.id+"_body_tbody","onscroll")&&"X"===h)return void d.B.stopEvent(t);var c=this.hasSubtotal&&this.lastSubtotalRow&&"none"==this.lastSubtotalRow.style.display;if("X"==h&&n<0&&0==o.scrollLeft||"X"==h&&n>0&&o.scrollLeft>=o.firstChild.offsetWidth-o.offsetWidth||"Y"==h&&l<0&&0==r.scrollTop||"Y"==h&&l>0&&this.rowIndex+this.lastIndex+1==this.getDataLength()&&!c||"Y"==h&&this.hasClass("w2grid_adaptive_crosstab")||"Y"==h&&0===this.getDataLength())return void("stop"==this.iScroll.propagation?d.B.stopEvent(t):(this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[],this.iScroll.propagation="pass"));"X"==h?this.moveXScroll(n):this.moveYScroll(l),this.iScroll.propagation="stop",d.B.stopEvent(t),s.v.setTimer((function(){this.iScrollRemoveMoveClass(),this.iScroll.addMoveClass=!0}),{key:this.id+"_iScroll",caller:this,delay:this.options.iScrollMoveEffectTime})}}},g.prototype.handleTouchEnd=function(t){if(this.isMobile||window.navigator.msPointerEnabled&&this.iScroll.prevTouches&&"touch"==t.pointerType){s.v.clearTimer(this.id+"_iScroll"),this.iScroll.prevTouches=this.iScroll.prevTouches.splice(-2);var e=this.iScroll.prevTouches;if(e.length>=2){var i=e[0].x-e[1].x;if(this.options.scrollByColumnAdaptive&&this.event.hasEvent(this.id+"_body_tbody","onscroll")&&"X"===this.iScroll.moveDirection){var o=this.getElementById(this.id+"_body_tbody"),r=o.firstChild.offsetWidth,a=0;return i>0?a=Math.ceil(i/r)*r:i<0&&(a=Math.floor(i/r)*r),
void(o.scrollLeft=Math.floor((o.scrollLeft+a)/r)*r)}var n=new Date;this.slideX(i,n)}else this.iScrollRemoveMoveClass()}},g.prototype.iScrollAddMoveClass=function(){var t=this.getElementById(this.id+"_iScrollX"),e=this.getElementById(this.id+"_iScrollY");this.__addClass(t,"w2grid_iScrollX_move"),this.__addClass(e,"w2grid_iScrollY_move")},g.prototype.iScrollRemoveMoveClass=function(){var t=this.getElementById(this.id+"_iScrollX"),e=this.getElementById(this.id+"_iScrollY");this.__removeClass(t,"w2grid_iScrollX_move"),this.__removeClass(e,"w2grid_iScrollY_move")},g.prototype.moveXScroll=function(t){var e=this.getElementById(this.id+"_iScrollX"),i=this.getElementById(this.id+"_dataLayer"),o=this.getElementById(this.id+"_scrollX_left"),s=this.scrollX_right;s.scrollLeft+=t;var r=parseInt(o.style.width,10),a=s.firstChild.offsetWidth-s.offsetWidth,n=parseInt(s.offsetWidth*s.offsetWidth/s.firstChild.offsetWidth,10);e.style.width=(n<30?30:n)+"px",e.style.left=r+s.scrollLeft/a*(i.offsetWidth-r-e.offsetWidth)+"px",this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip()},g.prototype.slideX=function(t,e){var i=new Date,o=parseInt(t/3,10);this.moveXScroll(o),t-=o,Math.abs(t)>=0&&i-e<this.options.iScrollSlideTime?(s.v.clearTimer(this.id+"_iScroll_slideX"),s.v.setTimer(this.slideX,{key:this.id+"_iScroll_slideX",caller:this,delay:this.options.iScrollSlidePeriod,args:[t,e]})):this.iScrollRemoveMoveClass()},g.prototype.moveYScroll=function(t){t*=parseInt(this.options.touchScrollDelta,10)||5;var e=this.getElementById(this.id+"_iScrollY"),i=this.getElementById(this.id+"_scrollY_div");i.scrollTop+=t;var o=i.firstChild.offsetHeight,s=this.getElementById(this.id+"_dataLayer"),r=o-s.offsetHeight,a=parseInt(s.offsetHeight*s.offsetHeight/o,10);e.style.height=(a<30?30:a)+"px",e.style.top=i.scrollTop/r*(s.offsetHeight-e.offsetHeight)+"px",this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip()},g.prototype.tbodyMoveXScroll=function(t){if(this.editedCell&&this.editedCell.handleEndEdit(),!this.mobile&&this.options.scrollByColumnAdaptive,this.options.adaptiveSlideHeader){var e=this.options.adaptive,i=parseInt(this.options.adaptiveThreshold)||480;if("crosstab"==e&&!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=i&&this.slideHeadObj&&"absolute"==this.slideHeadObj.render.style.position){this.slideHeadObj.hidden&&($(this.slideHeadObj.render.firstChild).animate({width:"show"}),this.slideHeadObj.hidden=!1);var o=this,r=function(){a.D.setTimeout((function(){null!=WebSquare.userTimerHash[o.id+"_adaptiveSlideHeader"]?(a.D.clearTimeout(o.id+"_adaptiveSlideHeader"),r()):o.slideHeadObj.hidden||($(o.slideHeadObj.render.firstChild).animate({width:"hide"}),o.slideHeadObj.hidden=!0)}),{delay:1e3,key:o.id+"_adaptiveSlideHeader"})};r()}}};var m=function(){};m.prototype.nonCharKeys={4:"insert",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",9:"tab",13:"enter",46:"del",16:"shift",17:"ctrl",18:"alt",21:"hanyoung",25:"hanja",91:"window",20:"capslock",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"numlock",145:"scrolllock"},m.prototype.handleBodyKeyDown=function(t){if(this.isKeyPressed=!0,this.editMode){var e=this.editedCell.options.inputType;switch("text"!==e&&"textarea"!==e&&"calendar"!==e&&"textImage"!==e&&"secret"!==e||(this.beforeEditedCellInfo={rowIndex:this.editedCell.editRowIndex,colIndex:this.getColumnIndex(this.editedCell.id),colID:this.getColumnID(this.editedCell.id),oldValue:this.editedCell.beforeEditValue||"",newValue:this.editedCell._getEditedValue(),inputType:e,keyCode:t.charCode?t.charCode:t.keyCode}),L=t.keyCode){case 9:if(d.B.stopEvent(t),"down"==this.options.tabKeyMove){if("textarea"==this.editedCell.options.inputType&&!t.ctrlKey)break
;if(0==this.editedCell.internal&&"custom"==this.editedCell.options.inputType&&"textarea"==(this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]?this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]:this.editedCell).options.inputType)break;l=!1,"calendar"===e&&(l=this.options.keyMoveEditMode&&"down"==this.options.tabKeyMove);var i=this.editedCell.id}if(!1!==this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,l],{checkFunc:function(t){return t+""!="false"}})){var o=!1;if("down"===this.options.tabKeyMove){var r=this.getLastFocusedCell().focusedColIndex;o=this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode,i);var n=this.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===o?(this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))]),this.focusNextTabOrder()):(!o||r!==n&&null!=r&&null!=n)&&this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))])}else o=this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);o||this._setFocusedCell(this.editMode)}break;case 13:if("textarea"==this.editedCell.options.inputType&&!t.ctrlKey)break;if(0==this.editedCell.internal&&"custom"==this.editedCell.options.inputType&&"textarea"==(this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]?this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]:this.editedCell).options.inputType)break;var l=!1;a.D.isIEAllVersion()&&"calendar"===e&&(l=this.options.keyMoveEditMode&&"right"!=this.options.enterKeyMove&&"none"!=this.options.enterKeyMove);i=this.editedCell.id;if(!1!==this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}}))if(l){T=this;setTimeout((function(){var e=!1;if("right"==T.options.enterKeyMove||"editRight"==T.options.enterKeyMove)e=T.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);else if("none"!=T.options.enterKeyMove&&"edit"!=T.options.enterKeyMove){var o=T.getLastFocusedCell().focusedColIndex;e=T.moveVertical(t,t.shiftKey?"up":"down",T.options.keyMoveEditMode,i);var s=T.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===e?(T._fireOnviewchange(i,"_handleEndEdit_focus",[T.getInput(T.getCellInfo(i))]),T.focusNextTabOrder()):(!e||o!==s&&null!=o&&null!=s)&&T._fireOnviewchange(i,"_handleEndEdit_focus",[T.getInput(T.getCellInfo(i))])}e||T._setFocusedCell(T.editMode)}),1)}else{o=!1;if("right"==this.options.enterKeyMove||"editRight"==this.options.enterKeyMove)o=this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);else if("none"!=this.options.enterKeyMove&&"edit"!=this.options.enterKeyMove){r=this.getLastFocusedCell().focusedColIndex;o=this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode,i);n=this.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===o?(this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))]),this.focusNextTabOrder()):(!o||r!==n&&null!=r&&null!=n)&&this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))])}o||this._setFocusedCell(this.editMode)}break;case 27:this.editedCell.handleCancelEdit(t),this._setFocusedCell(),d.B.stopEvent(t);break;case 86:if(t.ctrlKey||t.metaKey){if(this.options.preventPaste&&!this.editedCell){d.B.stopEvent(t);break}this.options.checkEditOnPaste&&this._doPaste()}default:var h={};h.rowIndex=this.editedCell.editRowIndex,h.colIndex=this._dataList.getColumnIndex(this.editedCell.id),h.colID=this.editedCell.id,h.keyCode=t.charCode?t.charCode:t.keyCode,this.editedCell._getEditedValue&&(this.editedCell.beforeEditValue=this.editedCell._getEditedValue()),d.B.fireEvent(this,"oneditkeydown",h)}}else{if(this.options.ignoreKeyCheckFunction){var c=null,u=!1;try{
if("function"==typeof this.options.ignoreKeyCheckFunction?c=this.options.ignoreKeyCheckFunction:"function"==typeof(c=a.D.getGlobalFunction(this.options.ignoreKeyCheckFunction,this.scope_id))&&(this.options.ignoreKeyCheckFunction=c),"function"==typeof c&&(u=c.call(this,t)),u)return void d.B.preventDefault(t)}catch(t){c=null}}var p=a.D.getDataPrefix("tdIndex"),g=(a.D.getDataPrefix("colIndex"),a.D.getDataPrefix("col_id")),m=a.D.getDataPrefix("directItemChoice");if("none"!=this.options.focusMode&&(-1==this._getFocusedRowIndex()||null==this.getFocusedColumnIndex())){if(13==t.keyCode&&document.activeElement==this.render&&(this._setFocusedCell(),d.B.stopEvent(t)),"A"!=d.B.getTarget(t).tagName)return;for(var f=this.event.getTargetIterator(t,this.render),b=!1;f.next();)if(f.match("gridBodyDefault")){b=!0;var y=f.getElement(),v=parseInt(y.getAttribute(p)),w=parseInt(v/this.realRowDataLength),S=y.getAttribute(g),C=this.getColumnIndex(S);this.focusedCell.push({focusedTd:y,focusedRowIndex:w,focusedColIndex:C});var _=y.getElementsByTagName("a");if(-1==this.focusedCellLinkIndex)for(var x=0;x<_.length;x++)document.activeElement==_[x]&&(this.focusedCellLinkIndex=x);this.focusedCellLinkLength=_.length;break}if(!b)return}var I=!1;if(s.v.browserCheck.safari&&(t.ctrlKey||t.metaKey)){this.tempEditableCell=document.activeElement,this.tempEditableCell.contentEditable="true",this.tempEditableCell.style.textShadow="0 0 0 "+WebSquare.style.getStyle(this.tempEditableCell,"color"),this.tempEditableCell.style.color="transparent";var T=this;s.v.setTimer((function(){T.tempEditableCell.contentEditable="inherit",this.tempEditableCell.style.color="",this.tempEditableCell.style.textShadow=""}),{key:this.id+"_tempEditableCell_contentEditable",caller:this,delay:500})}switch(t.keyCode){case 37:case 39:if(this.options.moveKeyEditMode){var k=37==t.keyCode?"left":"right";return this.moveHorizontal({byApi:!0},k,this.options.moveKeyEditModeAll),void d.B.stopEvent(t)}case 38:case 40:if(this.skipScrollEndEvent=!1,this.skipScrollStartEvent=!1,this.options.moveKeyEditMode){k=38==t.keyCode?"up":"down";return this.moveVertical({},k,!0),void d.B.stopEvent(t)}case 33:case 34:case 35:case 36:case 9:I=!0;break;case 13:if(this.options.senseReader&&this.options.focusImage&&this.getLastFocusedCell().focusedColIndex)if((W=this.getCellInfo(this.getLastFocusedCell().focusedColIndex))&&"image"==W.options.inputType)for(f=this.event.getTargetIterator(t,this.render);f.next();)if(f.match("w2grid_image")){var D=a.D.getGlobalFunction(W.options.imageClickFunction,this.scope_id);"function"==typeof D&&D.call(this,this.getLastFocusedCell().focusedRowIndex,W.id,this.dataList.getCellData(this.getLastFocusedCell().focusedRowIndex,W.id))}if(this.options.senseReader&&null!=this.getLastFocusedCell().focusedColIndex)if((W=this.getCellInfo(this.getLastFocusedCell().focusedColIndex))&&"select"==W.options.inputType&&"ul"==W.options.tableRender)return this.setEditHtml(t),void d.B.stopEvent(t);I=!0;break;default:I=!1}if(1==I&&"false"==this.options.focusMove){var L=t.charCode?t.charCode:t.keyCode;if(!this.options.senseReader)return;if(9!=L)return}if(this.F2Mode)switch(t.keyCode){case 8:case 46:case 35:case 36:case 37:case 38:case 39:case 40:return}switch(t.keyCode){case 4:break;case 46:this.removeCellData(t),d.B.stopEvent(t);break;case 32:this.doDefaultAction(t);break;case 33:this.movePageUp(t),d.B.stopEvent(t);break;case 34:this.movePageDown(t),d.B.stopEvent(t);break;case 35:this.moveHorizontal(t,"end"),d.B.stopEvent(t);break;case 36:this.moveHorizontal(t,"home"),d.B.stopEvent(t);break;case 37:this.moveHorizontal(t,"left"),d.B.stopEvent(t);break;case 38:this.moveVertical(t,"up"),d.B.stopEvent(t);break;case 39:this.moveHorizontal(t,"right"),d.B.stopEvent(t);break;case 40:this.moveVertical(t,"down"),d.B.stopEvent(t);break;case 9:var W=this.getCellInfo(this.getLastFocusedCell().focusedColIndex)
;if(this.options.senseReader&&W&&"image"==W.options.inputType&&this.options.focusImage&&this.getLastFocusedCell().focusedColIndex){d.B.stopPropagation(t);for(f=this.event.getTargetIterator(t,this.render);f.next();){if(f.match("w2grid_image"))if(d.B.getTarget(t)==this.render)this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1);else(this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode)||"linear"!=this.options.focusFlow)&&d.B.stopEvent(t)}}else if(d.B.getTarget(t)==this.render)this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1);else{(("down"==this.options.tabKeyMove?this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode):"none"==this.options.tabKeyMove||this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode))||"linear"!=this.options.focusFlow)&&d.B.stopEvent(t)}break;case 13:W=this.getCellInfo(this.focusedCell[0].focusedColIndex);var A=this.focusedCell[0].focusedRowIndex,M=this.focusedCell[0].focusedColIndex,E=!0===this.options.senseReader&&WebSquare.util.isIEAllVersion()&&(this.___getEditReadOnly(A,M)||this._getEditDisabled(A,M));if("enter"===this.options.drilldownToggle&&1==this.focusedCell.length&&W&&"drilldown"==W.options.inputType){var q=this.focusedCell[0].focusedRowIndex,R=this.dataList.getRealRowIndex(q);this.toggle(R);break}if(this.editMode||"autoComplete"!==W.options.inputType&&"select"!==W.options.inputType||!W.options.directOpen)if("edit"==this.options.enterKeyMove||"editRight"==this.options.enterKeyMove||"editDown"==this.options.enterKeyMove)this.setEditHtml(t);else if("none"==this.options.enterKeyMove);else if("right"==this.options.enterKeyMove){if(!0===this.options.senseReader)if(1==this.focusedCell.length)if("text"===W.options.inputType)if(!E)(N=this.getInput(W,this.focusedCell[0].focusedTd))&&N.blur();E||this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode)}else{var N;if(!0===this.options.senseReader)if(1==this.focusedCell.length)if("text"===W.options.inputType)if(!E)(N=this.getInput(W,this.focusedCell[0].focusedTd))&&N.blur();E||this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode)}else"autoComplete"===W.options.inputType&&(W.autoCompleteImageClicked=!0),this.setEditHtml(t);d.B.stopEvent(t);break;case 67:if("native"===this.options.copyType)break;if(t.ctrlKey||t.metaKey){if(a.D.isIEAllVersion())this.handleCopyEvent({});else if(!a.D.isIEAllVersion()&&(s.v.browserCheck.moz||s.v.browserCheck.chrome&&!this.options.preventCopy)){var F=document.activeElement,O=document.createElement("textarea"),T=this,B=document.getElementsByTagName("body")[0];O.oncopy=function(t){T.handleCopyEvent(t),B.removeChild(this),document.activeElement!=F&&F.focus()},O.textContent="temp",B.appendChild(O),O.select();try{document.execCommand("copy")}catch(t){}}}else a.D.getBoolean(t.srcElement.getAttribute(m))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 88:if(t.ctrlKey||t.metaKey){if(a.D.isIEAllVersion())this.handleCutEvent({});else if(!a.D.isIEAllVersion()&&(s.v.browserCheck.moz||s.v.browserCheck.chrome)){O=document.createElement("textarea"),T=this,B=document.getElementsByTagName("body")[0];O.oncut=function(t){T.handleCutEvent(t),B.removeChild(this)},O.textContent="temp",B.appendChild(O),O.select();try{document.execCommand("cut")}catch(t){}}}else a.D.getBoolean(t.srcElement.getAttribute(m))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 86:if(t.ctrlKey||t.metaKey){if(this.options.preventPaste&&!this.editedCell){d.B.stopEvent(t);break}this._doPaste()}else{a.D.getBoolean(t.srcElement.getAttribute(m))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t)}break;case 90:if(t.ctrlKey);else a.D.getBoolean(t.srcElement.getAttribute(m))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),
this.options.directEdit&&this._directEdit(t);break;case 27:"none"!=this.options.focusMode&&"linear"!=this.options.focusFlow&&(this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1),this.render.focus());break;case 16:case 17:case 18:case 21:case 229:case 25:case 91:case 20:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:break;case 65:if(this.options.useSelectAll&&t.ctrlKey){this.setFocusedMultiCell(0,0,this.getRowCount()-1,this.getColumnCount()-1);break}default:if(!t.ctrlKey&&!t.metaKey&&!t.altKey)a.D.getBoolean(t.srcElement.getAttribute(m))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t)}}this.isKeyPressed=!1},m.prototype.handleOnfocus=function(t){if(this.getDataLength()>0&&(-1==this._getFocusedRowIndex()||null==this.getFocusedColumnIndex())){for(var e=null,i=this.colIndexInfo.body.colInfo.colIndexMatch,o=this.colIndexes.bodyColInfo.trIndexArr,s=o[this.defaultColCnt],r=0;r<i.length;r++){var a=i[r];if(!this.hiddenList[r]){for(var n=a.length-1;n>=0;n--){var l=a[n]-this.defaultColCnt;if(o[a[n]]<=s){if(this.options.readOnlyTabIgnore&&this.___getEditReadOnly(0,l))break;if(this.options.ignoreNonEditableCell&&(this.___getEditReadOnly(0,l)||this._getEditDisabled(0,l)))break;e=l;break}}if(null!==e)break}}null!==e&&this._setFocusedCell(0,e)}},m.prototype.removeCellData=function(t){this.handleCutEvent(t,!0)},m.prototype.doDefaultAction=function(t){if("none"==this.options.focusMode){for(var e=d.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;e&&this.getCellInfo(e).doDefaultAction(t)}else this.getCellInfo(this.getLastFocusedCell().focusedColIndex).doDefaultAction(t)},m.prototype.setEditHtml=function(t){var e=d.B.getTarget(t);if(this.options.fastEditMode||"INPUT"==e.tagName||d.B.stopEvent(t),this.focusedCell.length>0){var i=this.focusedCell[this.focusedCell.length-1];null!=i.focusedTd&&this.setEditMode(i.focusedTd)}},m.prototype.getFirstTdTrIndex=function(t){for(var e=t.parentNode,i=a.D.getDataPrefix("trIndex");"0"!=e.getAttribute(i);)e=a.D.prev(e);return e},m.prototype.fixScrollRightDirection=function(){var t=this.getLastFocusedCell(),e=this.getElementById(this.id+"_dataLayer").offsetWidth,i=this.getElementById(this.id+"_scrollX_right");if(t&&t.focusedTd){if("native"===this.options.drawType){var o=document.getElementById(this.id+"_scrollX_div");"hidden"===o.style.visibility||o.offsetWidth}var s=t.focusedTd.offsetLeft,r=t.focusedTd.offsetWidth+1;a.D.isFF()&&(r-=1),a.D.isOpera()&&(r+=2);var n=s+r-e;if(this.options.lazyDrawHiddenColumn){var l=this.focusedCell[0].focusedTd;if("none"==l.style.display||n>0)if(this.options.scrollByColumn){for(var h=e-this.fixedWidth,d=0;d<this.columnOrder.length;d++)if(this.columnOrder[d]==t.focusedColIndex){b=d+this.defaultColCnt;break}var c=-1,u=0;a.D.isOpera()&&(u=2);for(var p=b;p>=0;p--)if(!this.hiddenList[p]&&(h-=this.colWidthList[p])<0){c=p;break}p=0;for(this.fixedWidth>0&&(p=this.getFixedColumnLastIndex());p<=c;p++)this.hiddenList[p]||(u+=this.colWidthList[p]);this.scrollXPreventEndEdit=!0,i.scrollLeft=u,this._handleScrollX()}else{var g=a.D.getDataPrefix("colIndex"),m=parseInt(l.getAttribute(g),10),f=0;a.D.isOpera()&&(f=2);for(d=0;d<=m;d++)this.hiddenList[d]||(f+=this.colWidthList[d]);this.scrollXPreventEndEdit=!0,i.scrollLeft=f-e,this._handleScrollX()}}else if(n>0)if(this.options.scrollByColumn){h=e-this.fixedWidth;var b,y=t.focusedColIndex%this.columnOrder.length;for(d=0;d<this.columnOrder.length;d++)if(this.columnOrder[d]==y){b=d+this.defaultColCnt;break}for(c=-1,u=0,p=b;p>=0;p--)if(!this.hiddenList[p])if(0!=this.colIndexes.bodyColInfo.colSpanArr.length){if((h-=this.colWidthList[p]*(this.colIndexes.bodyColInfo.colSpanArr[p]?this.colIndexes.bodyColInfo.colSpanArr[p]:1))<0){c=p;break}}else if((h-=this.colWidthList[p])<0){c=p;break}p=0
;for(this.fixedWidth>0&&(p=this.getFixedColumnLastIndex());p<=c;p++)this.hiddenList[p]||(0!=this.colIndexes.bodyColInfo.colSpanArr.length?u+=this.colWidthList[p]*(this.colIndexes.bodyColInfo.colSpanArr[p]?this.colIndexes.bodyColInfo.colSpanArr[p]:1):u+=this.colWidthList[p]);this.scrollXPreventEndEdit=!0,i.scrollLeft=u,this._handleScrollX()}else this.scrollXPreventEndEdit=!0,i.scrollLeft=i.scrollLeft+n,this._handleScrollX()}},m.prototype.fixScrollLeftDirection=function(){var t=this.getLastFocusedCell();if(t&&t.focusedTd){if("native"===this.options.drawType){var e=document.getElementById(this.id+"_scrollX_div");"hidden"===e.style.visibility||e.offsetWidth}var i=a.D.getDataPrefix("colIndex"),o=t.focusedTd.getAttribute(i);o=parseInt(o);for(var s=this.getElementById(this.id+"_scrollX_right"),r=0,n=this.getFixedColumnLastIndex();n<o;n++){if(!this.hiddenList[n])r+=this.colWidthList[n]}s.scrollLeft>r&&(this.scrollXPreventEndEdit=!0,s.scrollLeft=r,this._handleScrollX())}},m.prototype.getLeftMostFocusableColIndex=function(t){var e=this.colIndexInfo.body.colInfo.colIndexArr,i=null;if(t>=this.dataList.getRowCount()||t<0)return i;for(var o=0;o<e.length-this.defaultColCnt;o++){var s=!1,r=this.getCellInfo(o);if(!0!==r.options.skipKeyMove){if(this.options.readOnlyTabIgnore&&(s=this.___getEditReadOnly(t,o)),(this.options.ignoreNonEditableCell||this.options.senseReader)&&(s=this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o)),this.options.senseReader&&"radio"==r.options.inputType&&this.getCellData(t,o)!=r.options.trueValue){var a=this.getCheckedIndex(r.colID);a?s=a[0]!==t:0!=t&&(s=!0)}if((this.options.senseReader&&this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o))&&("user"==r.options.inputType||"link"==r.options.inputType)){var n=this.data_td_list[o+(t-this.rowIndex)*this.oneRowDataLength],l=n.getElementsByTagName("a");0==l.length&&(l=n.getElementsByTagName("input")),0!=l.length&&(s=!1)}if(this.isColMerge&&this.cellInfoHash[this.tdIdList[o]].options.colMerge){var h=this.dataList.getCellData(t-1,o),d=this.upperGroupingTest(t,o);h==this.dataList.getCellData(t,o)&&d&&(s=!0)}if(this.hiddenRowObj.length>0&&!this._getRowVisible(t)&&(s=!0),this.getMerged(t,o)&&!this.cellMergeInfo[t+"_"+o]&&(s=!0),!this.hiddenList[o]&&!s){i=o;break}}}return i},m.prototype.getRightMostFocusableColIndex=function(t){var e=this.colIndexInfo.body.colInfo.colIndexArr,i=null;if(t>=this.getRowCount()||t<0)return i;for(var o=e.length-1-this.defaultColCnt;o>=0;o--){var s=!1,r=this.getCellInfo(o);if(!0!==r.options.skipKeyMove){if(this.options.readOnlyTabIgnore&&(s=this.___getEditReadOnly(t,o)),(this.options.ignoreNonEditableCell||this.options.senseReader)&&(s=this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o)),this.options.senseReader&&"radio"==r.options.inputType&&this.getCellData(t,o)!=r.options.trueValue){var a=this.getCheckedIndex(r.colID);a?s=a[0]!==t:0!=t&&(s=!0)}if((this.options.senseReader&&this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o))&&("user"==r.options.inputType||"link"==r.options.inputType))if(t<this.rowIndex)s=!0;else{var n=this.data_td_list[o+(t>=this.rowIndex?t-this.rowIndex:t)*this.oneRowDataLength],l=n.getElementsByTagName("a");0==l.length&&(l=n.getElementsByTagName("input")),s=0==l.length}if(this.isColMerge&&this.cellInfoHash[this.tdIdList[o]].options.colMerge){var h=this._dataList.getCellData(t-1,o),d=this.upperGroupingTest(t,o);h==this._dataList.getCellData(t,o)&&d&&(s=!0)}if(this.hiddenRowObj.length>0&&!this._getRowVisible(t)&&(s=!0),this.getMerged(t,o)&&!this.cellMergeInfo[t+"_"+o]&&(s=!0),!this.hiddenList[o+this.defaultColCnt]&&!s){i=o;break}}}return i},m.prototype.moveHorizontal=function(t,e,i,o){if("false"==this.options.focusMove||"vertical"==this.options.focusMove){o=t.charCode?t.charCode:t.keyCode;if(!this.options.senseReader)return!1;if(9!=o)return!1}var s,r=this.getLastFocusedCell(),n=r.focusedRowIndex,l=r.focusedColIndex,h=(this.colIndexInfo.body.colInfo.colIndexArr,
this._getRealColIndex("body",this.tdIdList[l])+this.defaultColCnt),c=this.colIndexInfo.body.colInfo.colIndexMatch,u=this.columnOrder,p=this.colIndexes.bodyColInfo.trIndexArr,g=p[l+this.defaultColCnt],m=!!t&&9==t.keyCode,f=!!t&&(9==t.keyCode||13==t.keyCode),b=!!t&&t.shiftKey,y=(e=e||"right",0==t||t&&!0===t.byApi);s=1==this.options.moveKeyEditModeAll&&y?!!o&&(37==o||39==o):!!t&&(37<=t.keyCode&&t.keyCode<=40),r.bTrIndex&&(g=r.bTrIndex);var v=null,w=n;if(this.options.focusMultiRow){if("left"==e)var S=h-1,C=this.defaultColCnt-1,_=-1;else if("right"==e)S=h+1,C=c.length,_=1;else if("home"==e)S=this.defaultColCnt,C=c.length,_=1;else S=c.length-1,C=this.defaultColCnt-1,_=-1;for(var x=S;x!=C;x+=_){var I=c[x];if(!this.hiddenList[x]){for(var T=I.length-1;T>=0;T--){var k=I[T]-this.defaultColCnt;if(!(this.hiddenRowObj.length>0)||this._getRowVisible(n))if(!this.getMerged(n,k)||this.cellMergeInfo[n+"_"+k])if(!0!==(W=this.getCellInfo(k)).options.skipKeyMove)if(p[I[T]]<=g&&("left"!=e&&"right"!=e||k!=l)){if((this.options.readOnlyTabIgnore||this.options.senseReader)&&this.___getEditReadOnly(n,k))break;if(f&&(this.options.ignoreNonEditableCell||this.options.senseReader)&&(this.___getEditReadOnly(n,k)||this._getEditDisabled(n,k)))break;if(this.isColMerge&&this.cellInfoHash[this.tdIdList[k]].options.colMerge){var D=this.dataList.getCellData(n-1,k),L=this.upperGroupingTest(n,k);if(D==this.dataList.getCellData(n,k)&&L)break}v=k;break}}if(null!==v)break}}}else{var W=this.getCellInfo(l),A=!1;this.options.senseReader&&"user"==W.options.inputType&&this.___getEditReadOnly(n,l)?A=!0:(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0);var M=this.getLocationRowCol(n,l),E=M.rowIndex,q=M.colIndex,R=this.htmlInfo.body.rowAttrArr.length;r.bMovedRow&&(E=r.bMovedRow);var N=E%R;if("left"==e)if(A&&this.focusedCellLinkIndex>0)S=q,C=u.length,_=1;else S=q-1,C=-1,_=-1;else if("right"==e)if(A&&this.focusedCellLinkIndex+1<this.focusedCellLinkLength)S=q,C=u.length,_=1;else{this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0;S=q+M.colSize,C=u.length,_=1}else if("home"==e){S=0,C=u.length,_=1;E-=N}else{S=u.length-1,C=0,_=-1;E=E+R-N-1}for(x=S;;x+=_){if(x==C)if("left"==e&&N>0)x=u.length-1,E--;else{if(!("right"==e&&N<R-1))break;x=0,E++}var F=this.getOriginalRowCol(E,x);if(!F.noLeftTop){_>0&&(_=F.colSize);k=F.colIndex;if(!this.hiddenList[x+this.defaultColCnt])if(!(this.hiddenRowObj.length>0)||this._getRowVisible(n))if(!this.getMerged(n,k)||this.cellMergeInfo[n+"_"+k])if(!(W=this.getCellInfo(k)).options.blockSelect&&!0!==W.options.skipKeyMove){if(this.options.senseReader&&"radio"==W.options.inputType&&this.getCellData(n,k)!=W.options.trueValue&&0!=n){if(this.getCheckedIndex(W.colID))continue;if(0!=n)continue}if("left"!=e&&"right"!=e||(A||k!=l)){var O=!1;if(m&&this.___getEditReadOnly(n,k)&&(this.options.readOnlyTabIgnore||this.options.senseReader)){if("user"!=W.options.inputType&&"link"!=W.options.inputType||!this.options.senseReader)continue;var B=this.data_td_list[k+(w-this.rowIndex)*this.oneRowDataLength],V=B.getElementsByTagName("a");if(0==V.length&&(V=B.getElementsByTagName("input")),"right"==e)for(var P=0;P<V.length;P++){if(document.activeElement==V[P]){this.focusedCellLinkIndex=P;break}this.focusedCellLinkIndex=-1}else if("left"==e)for(P=V.length-1;P>-1;P--){if(document.activeElement==V[P]){this.focusedCellLinkIndex=P;break}this.focusedCellLinkIndex=-1}if(!V[0])continue;("right"==e&&this.focusedCellLinkIndex!=V.length-1||"left"==e&&0!=this.focusedCellLinkIndex)&&(O=!0)}if((f||s)&&(this.options.ignoreNonEditableCell||this.options.senseReader)&&(this.___getEditReadOnly(n,k)||this._getEditDisabled(n,k))&&(!m||1!=O))continue;if(this.isColMerge&&this.cellInfoHash[this.tdIdList[k]].options.colMerge){D=this.dataList.getCellData(n-1,k),L=this.upperGroupingTest(n,k);if(D==this.dataList.getCellData(n,k)&&L)continue}v=k;break}if(null!==v)break}}}}if(null===v&&(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),null!==v){
if(i&&(this.___getEditReadOnly(w,v)||this._getEditDisabled(w,v))&&(i=!1),i&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){W=this.getCellInfo(v);a.D.getBoolean(W.options.skipKeyMoveEditMode)&&(i=!1)}return this._setFocusedCell(n,v,i,{tabDirection:e}),(r=this.getLastFocusedCell()).bTrIndex=g,r.bMovedRow=E,!0}if("linear"==this.options.focusFlow){if(n>0&&b){var H=this.getRightMostFocusableColIndex(n-1);if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&null==H)for(;n>=0&&null==H;){this._setGridBorderNoRefresh=!0;var j=-1;this.hasSubtotal&&(j-=this.getHasSubtotalCount(n-1)),"true"!==this.options.keepScrollForSenseReader&&this.addGridScroll(j),this._setGridBorderNoRefresh=!1,1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(H=this.getRightMostFocusableColIndex(n-1)),null==H&&(n-=1)}else for(;n>=0&&null==H;)n-=1,H=this.getRightMostFocusableColIndex(n-1);if(null==H)return this.editedCell&&this.editedCell.handleEndEdit(t),!1;if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),n-1<this.rowIndex){this._setGridBorderNoRefresh=!0;j=-1;this.hasSubtotal&&(j-=this.getHasSubtotalCount(n-1)),this.addGridScroll(j),this._setGridBorderNoRefresh=!1,1==this.options.senseReader&&null!=H&&"all"!=this.options.visibleRowNum&&(H=this.getRightMostFocusableColIndex(n-1))}return"custom"==(W=this.getCellInfo(H)).options.inputType&&n-1>=0&&(w=n-1),i&&(this.___getEditReadOnly(w,H)||this._getEditDisabled(w,H))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)&&a.D.getBoolean(W.options.skipKeyMoveEditMode)&&(i=!1),this._setGridBorderNoRefresh=!0,this._setFocusedCell(n-1,H,i,{tabDirection:e}),this._setGridBorderNoRefresh=!1,!0}if("left"==e&&n>0&&!b){for(var z=this.getRightMostFocusableColIndex(n-1);n>0&&null==z;)n-=1,z=this.getRightMostFocusableColIndex(n-1);if(null==z)return this.editedCell&&this.editedCell.handleEndEdit(t),!1;if(n-1>0&&n==this.rowIndex){this._setGridBorderNoRefresh=!0;j=-1;this.addGridScroll(j),this._setGridBorderNoRefresh=!1}if(i&&(this.___getEditReadOnly(w,z)||this._getEditDisabled(w,z))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){W=this.getCellInfo(z);a.D.getBoolean(W.options.skipKeyMoveEditMode)&&(i=!1)}return this._setGridBorderNoRefresh=!0,this._setFocusedCell(n-1,z,i,{tabDirection:e}),this._setGridBorderNoRefresh=!1,!0}if("right"!=e||b){if("left"===e&&0===n&&m&&l-1==0){!0===(W=this.getCellInfo(l-1)).options.skipKeyMove&&d.B.preventDefault(t)}}else{if(n<this.getDataLength()-this._getVisibleLastIndex(1)){for(z=this.getLeftMostFocusableColIndex(n+1);n!=this.dataList.getRowCount()&&null==z;)n+=1,z=this.getLeftMostFocusableColIndex(n+1);if(null==z)return this.editedCell&&this.editedCell.handleEndEdit(t),1==this.options.moveKeyEditModeAll&&n==this.dataList.getRowCount()&&document.getElementById(this.id+"_gridend_div").focus(),!1;var G=this._getVisibleLastIndex(this.lastIndex+1);if(n+1>this.rowIndex+G-1){this._setGridBorderNoRefresh=!0;j=1;this.hasSubtotal&&(j+=this.getHasSubtotalCount(n+1)),1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(j+=n-(this.rowIndex+G-1),this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),this.addGridScroll(j),this._setGridBorderNoRefresh=!1}if(i)"custom"==(W=this.getCellInfo(z)).options.inputType&&(w=n+1),(this.___getEditReadOnly(w,z)||this._getEditDisabled(w,z))&&(i=!1);if(i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){var W=this.getCellInfo(z);a.D.getBoolean(W.options.skipKeyMoveEditMode)&&(i=!1)}return this._setGridBorderNoRefresh=!0,this._setFocusedCell(n+1,z,i,{tabDirection:e}),this._setGridBorderNoRefresh=!1,!0}m&&!0===(W=this.getCellInfo(l+1)).options.skipKeyMove&&d.B.preventDefault(t)}}
if(m&&null!=WebSquare.tabOrder[this.id])if(0===h&&0===n&&"left"==e){if(null!=WebSquare.tabOrder[this.id].preTabID&&(U=a.D.getPreTabbableComp(this.id)))return U.focus(),!0}else if(h===c.length-1&&n===this.getDataLength()-this._getVisibleLastIndex(1)&&"right"==e){var U;if(null!=WebSquare.tabOrder[this.id].nextTabID)if(U=a.D.getNextTabbableComp(this.id))return U.focus(),!0}return this.editedCell?(this._setGridBorderNoRefresh=!0,this.editedCell.handleEndEdit(t),this._setGridBorderNoRefresh=!1):this.options.moveKeyEditMode&&(this._setGridBorderNoRefresh=!0,this._setFocusedCell(n,l,!1),this._setGridBorderNoRefresh=!1),this.moveDirection=null,!1},m.prototype.moveVertical=function(t,e,i){if(this.moveDirection="row","false"==this.options.focusMove||"horizontal"==this.options.focusMove)return!1;var o=this.getLastFocusedCell(),s=o.focusedRowIndex,r=o.focusedColIndex,n=this.defaultColCnt,l=this.colIndexInfo.body.colInfo.colIndexArr,h=this.colIndexInfo.body.colInfo.colIndexMatch,c=this.colIndexes.bodyColInfo.trIndexArr,u=this.colIndexes.bodyColInfo.colSpanArr,p=this.colIndexes.bodyColInfo.rowSpanArr,g=l[r+n],m=c[r+n],f=u[r+n],b=p[r+n],y=r,v=s,w=!!t&&13==t.keyCode,S=!!t&&9==t.keyCode,C=this.getDataLength()-this._getVisibleLastIndex(1),_=!1,x=!!(this.oneRowLength>1&&this.options.skipMultiRowMove);if(f&&o.bColIndex&&(g=o.bColIndex),"up"==e)var I=0==m?this.oneRowDataLength-1:r-1,T=-1,k=-1;else I=m+b==this.oneRowLength?0:r+1,T=this.oneRowDataLength,k=1;if(x){for(var D=p[0],L=1;L<p.length;L++)if(D!=p[L]){x=!1;break}x&&(I=r)}var W=!1;for(L=I;L!=T;L+=k){var A=l[L+n],M=A+(u[L+n]?u[L+n]:1)-1,E=this._getArrayIndexOf(this.columnOrder,l[L+n]-n)+n;if(A<=g&&g<=M&&(!this.hiddenList[E]||W)){if(y=L,E=this._getArrayIndexOf(this.columnOrder,l[y]+1)+this.defaultColCnt,v==C&&"down"==e&&this.hiddenList[E]){W=!0,g++;continue}if(E=this._getArrayIndexOf(this.columnOrder,l[y]-1)+this.defaultColCnt,0==v&&"up"==e&&this.hiddenList[E]){W=!0,g--;continue}if("up"==e){for(var q=s;q>=0;q--)if(v=0==m?q-1:q,x&&(v=0==m?v:v-1),(!(this.hiddenRowObj.length>0)||this._getRowVisible(v))&&(!this.getMerged(v,y)||this.cellMergeInfo[v+"_"+y])){if(this.hiddenCellObj.length>0&&!1===this.getCellVisible(v,y))for(;!1===this.getCellVisible(v,y);){if(0===(O=c[y+this.defaultColCnt])&&v>0){v--;for(var R=!1,N=y+1+n;N<l.length;N++)if(l[N]===r+n&&c[N]===this.oneRowLength-1){y=N-n,R=!0;break}if(!R)break}else if(O>0){for(R=!1,N=y+n;N>=0;N--)if(l[N]===r+n&&c[N]===O-1){y=N-n,R=!0;break}if(!R)break}}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(v,y)&&!this._getEditDisabled(v,y))break;if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(v,y))break;if(this.oneRowLength>1&&!x){var F=m;for(L=0;L<h[g].length;L++){if(0>--F&&(F=h[g].length-1,0!==m&&v--),y=h[g][F],v<0){j=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(v,y)&&!this._getEditDisabled(v,y)){j=!0;break}if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(v,y)){j=!0;break}}}if(j){j=!1;break}}}else for(q=s;q<=C;q++)if(v=m+b==this.oneRowLength?q+1:q,x&&(v=m+b==this.oneRowLength?v:v+1),(!(this.hiddenRowObj.length>0)||this._getRowVisible(v))&&(!this.getMerged(v,y)||this.cellMergeInfo[v+"_"+y])){if(this.hiddenCellObj.length>0)for(;!1===this.getCellVisible(v,y);){var O;if((O=c[y+this.defaultColCnt])>=this.oneRowLength-1&&v<=C){v++;for(R=!1,N=n;N<l.length;N++)if(l[N]===r+n&&0===c[N]){y=N-n,R=!0;break}if(!R)break}else if(O<this.oneRowLength-1){for(R=!1,N=y+1+n;N<l.length;N++)if(l[N]===r+n&&c[N]===O+1){y=N-n,R=!0;break}if(!R)break}}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(v,y)&&!this._getEditDisabled(v,y))break
;if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(v,y))break;if(this.oneRowLength>1&&!x)for(F=m,L=0;L<h[g].length;L++){if(F++,h[g].length<=F&&(F=0,m+b!==this.oneRowLength&&v++),y=h[g][F],v>C){j=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(v,y)&&!this._getEditDisabled(v,y)){j=!0;break}if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(v,y)){j=!0;break}}if(j){j=!1;break}}break}}if(0<=v&&v<=C&&(s!=v||r!=y)){if(d.B.stopEvent(t),i&&(this.___getEditReadOnly(v,y)||this._getEditDisabled(v,y))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){var B=this.getCellInfo(y);a.D.getBoolean(B.options.skipKeyMoveEditMode)&&(i=!1)}return!!this.setFocusedCell2(v,y,i,{tabDirection:e})&&((o=this.getLastFocusedCell()).bColIndex=g,!0)}if("linear"==this.options.focusFlow){var V=!1;if((-1==v&&"up"==e&&0==r||v==C+1&&"down"==e&&null==l[r+n+1]||-1==v&&"up"==e&&-1!==h[0].indexOf(r)&&x||v==C+1&&"down"==e&&-1!==h[this.columnOrder.length-1].indexOf(r)&&x)&&(V=!0),!V&&(-1==v||v==C+1)){var P=this.getLastFocusedCell().focusedTd;if("text"==(B=this.getCellInfo(P)).options.inputType&&B.options.embeddedInput){var H=this.getInput(B,P);this.showFakeInput(H),this.fakeInput.setValue(H.getValue()),this.F2Mode=!1,H.select()}else{var j=!1;if("up"==e&&-1==v&&y-1>-1){for(var z=y-1;null!=l[z+n]&&(!x||-1===h[l[l.length-1]].indexOf(z));z--)if(E=this._getArrayIndexOf(this.columnOrder,z)+this.defaultColCnt,!this.hiddenList[E]){for(var G=C;G>-1;G--){if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(G,z)&&!this._getEditDisabled(G,z)){v=G,y=z,j=!0;break}if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(G,z)){v=G,y=z,j=!0;break}if(this.oneRowLength>1&&!x){v=G,y=z;var U=l[z+n];for(F=m,L=0;L<h[U].length;L++){if(0>--F&&(F=h[U].length-1),y=h[U][F],v<0){j=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(v,y)&&!this._getEditDisabled(v,y)){j=!0;break}if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(v,y)){j=!0;break}}}if(j)break}if(j)break}}else if("down"==e&&v==C+1)for(z=y+1;null!=l[z+n]&&(!x||-1===h[l[n]].indexOf(z));z++)if(E=this._getArrayIndexOf(this.columnOrder,z)+this.defaultColCnt,!this.hiddenList[E]){for(G=0;G<=C;G++){if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(G,z)&&!this._getEditDisabled(G,z)){v=G,y=z,j=!0;break}if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(G,z)){v=G,y=z,j=!0;break}if(this.oneRowLength>1&&!x){v=G,y=z;for(U=l[z+n],F=m,L=0;L<h[U].length;L++){if(F++,h[U].length<=F&&(F=0),y=h[U][F],!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(v,y)&&!this._getEditDisabled(v,y)){j=!0;break}if(!S&&!w&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(v,y)){j=!0;break}}}if(j)break}if(j)break}if(j){if(d.B.stopEvent(t),i&&(this.___getEditReadOnly(v,y)||this._getEditDisabled(v,y))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){B=this.getCellInfo(y);a.D.getBoolean(B.options.skipKeyMoveEditMode)&&(i=!1)}return!!this.setFocusedCell2(v,y,i,{tabDirection:e})&&((o=this.getLastFocusedCell()).bColIndex=g,!0)}S&&WebSquare.tabOrder[this.id]&&WebSquare.tabOrder[this.id].nextTabID&&(_=!0)}}}
return this.editedCell?this.editedCell.handleEndEdit(t):this.options.moveKeyEditMode&&(this._setGridBorderNoRefresh=!0,this._setFocusedCell(s,r,!1),this._setGridBorderNoRefresh=!1),this.moveDirection=null,!0===_&&"focusNextTabOrder"},m.prototype.moveEnd=function(t){if("false"!=this.options.focusMove&&"vertical"!=this.options.focusMove){for(var e=a.D.getDataPrefix("colIndex");this._moveRight(t););for(var i=!1;!i;){for(var o=!0,s=this.getLastFocusedCell(),r=parseInt(s.focusedTd.getAttribute(e)),n=parseInt(s.focusedTd.getAttribute("colSpan")||1),l=0;l<n;l++)if(0==this.hiddenList[r+l]){o=!1;break}1==o?this._moveLeft(t):i=!0}this.fixScrollRightDirection()}},m.prototype.moveHome=function(t){if("false"!=this.options.focusMove&&"vertical"!=this.options.focusMove){for(var e=a.D.getDataPrefix("colIndex");this._moveLeft(t););for(var i=!1;!i;){for(var o=!0,s=this.getLastFocusedCell(),r=parseInt(s.focusedTd.getAttribute(e)),n=parseInt(s.focusedTd.getAttribute("colSpan")||1),l=0;l<n;l++)if(0==this.hiddenList[r+l]){o=!1;break}1==o?this._moveRight(t):i=!0}this.fixScrollLeftDirection()}},m.prototype.movePageUp=function(t){if("false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove&&!(this.rowIndex<=0)){var e=this.getLastFocusedCell(),i=e.focusedRowIndex;if(!(i<0)){i-=this.rowIndex;var o=e.focusedColIndex;this._applyFocusedCellOut(e),this.focusedCell&&this.focusedCell.pop();var s,r=this._getScrollRowIndex(this.rowIndex);return(s=r<this.lastIndex?-1:this._getVisibleRowIndex(r-this.lastIndex))>=0?(this.setTopRowIndex(s),this._setFocusedCell(i+this.rowIndex,o)):(this.setTopRowIndex(0),this._setFocusedCell(0,o)),!0}}},m.prototype.movePageDown=function(t){if("false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove&&!(null!=this.lastTopRowIndex&&this.rowIndex>=this.lastTopRowIndex)){var e=this.getLastFocusedCell(),i=e.focusedRowIndex;if(!(i<0)){i-=this.rowIndex;var o=e.focusedColIndex;this._applyFocusedCellOut(e);var s=this.rowIndex+this.lastIndex,r=this.getDataLength(),a=r-this._getVisibleLastIndex(1),n=r-this._getVisibleLastIndex(this.lastIndex+1);return s<=n?(this.setTopRowIndex(s),this._setFocusedCell(Math.min(i+this.rowIndex,a),o)):(this.setTopRowIndex(n),this._setFocusedCell(a,o)),!0}}},m.prototype.findTd=function(t,e,i){for(var o=0,s=a.D.getDataPrefix("colIndex");null!=t;){for(var r=a.D.first(t);null!=r;){var n=parseInt(r.getAttribute(s));if(n<=e&&e<=n+r.colSpan-1&&o<=i&&i<=o+r.rowSpan-1)return r;if(n>e)break;r=a.D.next(r)}if(t=a.D.next(t),o>i)break;o++}},m.prototype.pasteFromClipboard=function(){for(var t=this.parseClipboardExcel(),e=this._getFocusedRowIndex(),i=this.getFocusedColumnIndex(),o=[],s=0;s<t.length;s++){o.push([]);for(var r=0;r<t[0].length;r++)o[s][r]=this.dataList._getCellData(s+e,this.getColumnID(r+i))}for(s=0;s<t.length;s++)for(r=0;r<t[0].length;r++){var a=t[s][r];try{a=a.wq_trim();var n=this.getCellInfo(r+i),l=this.mainGrid.getColumnOption(n.options.col_id,"dataType");"number"==l&&(a=a.replace(/[^(\-0-9)]/g,""))}catch(t){}1!=this.___getEditReadOnly(s+e,r+i)&&1!=this._getEditDisabled(s+e,r+i,!0)&&this.dataList.__setCellData(s+e,this.getColumnID(r+i),a)}var h=this;WebSquare.historyManager.set("grid","grid1",{focusRowIndex:e,focusColIndex:i,data2d:o},{onRestore:function(t){for(var o=t.data2d,s=0;s<o.length;s++)for(var r=0;r<o[0].length;r++){var a=o[s][r];h.dataList.__setCellData(s+e,this.getColumnID(r+i),a)}}})},m.prototype.parseClipboardExcel=function(){for(var t=[],e=window.clipboardData.getData("Text").split("\n"),i=0;i<e.length-1;i++){var o=e[i].split("\t");t.push(o)}return t},m.prototype.copyToClipboard=function(){var t=this.options.copyAmount;if(t||("cell"==this.options.focusMode?t="cell":"both"!=this.options.focusMode&&"row"!=this.options.focusMode||(t="row")),"cell"==t){for(var e=this.getDataLength(),i=this.getTotalCol(),o=[],s=0;s<this.focusedCell.length;s++){var r=(c=this.focusedCell[s]).focusedRowIndex,a=c.focusedColIndex;null==o[r]&&(o[r]=[]),o[r][a]=c,e>r&&(e=r),i>a&&(i=a)}var n=[]
;for(s=e;s<o.length;s++){var l=[];if(void 0!==(u=o[s]))for(var h=i;h<u.length;h++){o[s][h]?l.push(this.dataList._getCellData(s,this.getColumnID(h))):l.push("")}n.push(l.join("\t"))}window.clipboardData.setData("Text",n.join("\n"))}else if("row"==t){var d=[];for(s=0;s<this.focusedCell.length;s++){var c;d[(c=this.focusedCell[s]).focusedRowIndex]=1}var u=[];for(var r in d)u.push(r);function t(t,e){return parseInt(t)>parseInt(e)?1:-1}u.sort(t);for(o=[],s=0;s<u.length;s++){r=u[s];var p=this.getRowData(r);o.push(p.join("\t"))}window.clipboardData.setData("Text",o.join("\n"))}},m.prototype.getEditCursorEnable=function(t,e){try{if(!t)return!1;var i=d.B.getTarget(t);if(!i)return!1;var o=i.tagName.toUpperCase();if(("INPUT"==o||"TEXTAREA"==o)&&null!=i.value){if(a.D.isIEAllVersion("6 7 8")){var s=document.selection.createRange();if(s.text.length>0)return!0;s.moveStart("character",-i.value.length);var n=s.text.length;if("left"===e){if(n>0)return!0}else if("right"===e&&n<i.value.length)return!0;return!1}if(null!=i.selectionStart&&i.selectionStart!=i.selectionEnd)return!0;if("left"===e){if(i.selectionEnd>0)return!0}else if("right"===e&&i.selectionEnd<i.value.length)return!0}return!1}catch(t){return r.w.printStackTrace(t,null,this),!1}},m.prototype._moveKeyEdit=function(t,e,i){try{if(void 0!==i&&null!=i||(i={}),!(this.options.moveKeyEditModeAll||!0===i.oldMode&&this.options.moveKeyEditMode))return;var o=this.uuid,s=WebSquare.idCache[t];s["_"+e]=s[e];var a=i.itemTable,n=i.skipVertical,l=i.skipHorizontal,h=this.options.moveKeyEditModeAll||!0===i.oldMode&&this.options.arrowMove;s[e]=function(t,i){this["_"+e]&&this["_"+e](t,i);var s=WebSquare.idCache[o],r=!1;if(s&&s.editedCell){var c=s.getCellInfo(s.editedCell.colID);(s.options.keyMoveEditMode||s.options.moveKeyEditMode||s.options.moveKeyEditModeAll)&&c.options.skipKeyMoveEditMode&&(r=!0)}var u={37:"left",38:"up",39:"right",40:"down"}[t.keyCode];if(u)switch(u){case"left":case"right":if(!0!==l&&(a||0==this.getValue().length||h&&!s.getEditCursorEnable(t,u)))s._fireOnviewchange(s.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}})+""!="false"&&s.moveHorizontal({byApi:!0},u,!0,t.keyCode),d.B.stopEvent(t);break;case"up":case"down":if(!0!==n&&(!a||0==this.getItemCount()||this._keyIndex<0||this._keyIndex===this.getItemCount())){if(s._fireOnviewchange(s.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}})+""!="false"){var p=!0!==r;s.moveVertical({},u,p,t.keyCode)}d.B.stopEvent(t)}}}}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype._directEdit=function(t){var e=this.focusedCell[this.focusedCell.length-1],i=this.getCellInfo(e.focusedTd);if("textarea"!==i.options.inputType||!this._getEditDisabled(e.focusedRowIndex,e.focusedColIndex)&&!this.___getEditReadOnly(e.focusedRowIndex,e.focusedColIndex)){var o,s=i.comp,r=this.getInput(i);r&&(r.reFocus=!0,r._focusStatus="cancel");var a=s.render.tagName.toLowerCase();(o="input"===a||"textarea"===a?s.render:s.render.getElementsByTagName("input")[0])&&WebSquare.text.setCaretPos(o,o.value.length);var n=t.keyCode,l=null;t.key&&1===t.key.length?l=t.key:!t.shiftKey&&65<=n&&n<=90?(n+=32,l=String.fromCharCode(n)):l=n>=96||n<65?{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"}[n+""]||"":String.fromCharCode(n),"autoComplete"===i.options.inputType?(s.dom.input.value=l,s.inputKeyDown(t)):r&&r.setValueNM(l)}};var f=function(t){};f.prototype.initializeDrawController=function(){this.data_td_list=[],this.data_num_td_list=[],this.data_status_td_list=[],this.all_data_td_list=[]},f.prototype.showAllBodyTR=function(t){t=t||"";for(var e=0;e<this.drawedRowLength;e++)this._setRowDisplay(e,t);this.lastDisplayedRow="none"===t?-1:this.drawedRowLength-1},f.prototype._setRowDisplay=function(t,e){for(var i=null,o=0;o<this.oneRowLength;o++)(i=this.dataRowList[this.oneRowLength*t+o])&&(i.style.display=e,
"none"==e?this.__addClass(i,"w2grid_hidedRow"):this.__removeClass(i,"w2grid_hidedRow"));return i},f.prototype.drawColumnData=function(t,e){var i=this._dataList.rowPosition,o=!1;t=this.getColumnIndex(t);var s=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,r=this.getCellInfo(t);if(r.dataComp){var a=this.modelControl.getDataComp(r.dataComp);null!=a&&"linkedDataList"===a.initializeType&&null!=a.conditionInfo&&a.conditionInfo.filterInfo.useRef&&"number"==typeof i&&(o=!0)}for(var n=0;n<=s;n++){var l=n+this.rowIndex;e&&r.select&&r.hasRef&&(r.select.itemArr=r.getRefItemArr(l),r.select.setSelectOptions(),r.select.setValueNM(r.mainGrid._dataList._getData(l,t))||r.mainGrid._dataList._setData(l,t,"")),o&&n===i||this.drawCellData(n,l,t)}o&&this.drawCellData(i,i+this.rowIndex,t)},f.prototype._setMouseOverTr=function(t,e){this.setOverClass(e,"overTd",!0)},f.prototype._setMouseOutTr=function(t,e){this.setOverClass(e,"overTd",!1)},f.prototype.setOverClass=function(t,e,i){for(var o=t.parentNode,s=a.D.getDataPrefix("trIndex"),r=a.D.getDataPrefix("row_out_style"),n=parseInt(o.getAttribute(s));n>0;)n--,o=a.D.prev(o);do{for(var l=a.D.first(o);null!=l&&!(l.offsetLeft>this.render.offsetWidth);)l.offsetWidth>0&&(i?(l.setAttribute(r,l.style.cssText),l.style.cssText=l.style.cssText+";background-color:"+this.options.rowMouseOverColor):l.style.cssText=l.getAttribute(r)),l=a.D.next(l);o=a.D.next(o)}while(null!=o&&"0"!=o.getAttribute(s))},f.prototype.changeFocusedCellPosition=function(t,e,i,o){if(0!=this.focusedCell.length){o=o||{};this.applyFocusedCellOut();for(var s=0;s<this.focusedCell.length;s++){var r=this.focusedCell[s].focusedRowIndex-t,a=this.focusedCell[s].focusedColIndex,n=null;if(this.options.fixedRow>0&&this.options.fixedRow>this.focusedCell[s].focusedRowIndex||this.options.lastFixedRow>0&&this.focusedCell[s].focusedRowIndex>this.lastIndex-this.options.lastFixedRow)n=this.data_td_list[a+this.focusedCell[s].focusedRowIndex*this.oneRowDataLength],this.applyFocusedCellIn(n,e);else if(r<0||r>this.maxRowLength+this.hiddenRowObj.extraRow)n=null;else if(n=this.data_td_list[a+r*this.oneRowDataLength]){var l=this.getCellInfo(a);i&&l.options.embeddedInput&&(e=!1),this.applyFocusedCellIn(n,e,o)}this.focusedCell[s].focusedTd=n}}},f.prototype.setTRClass=function(t,e,i){for(var o=t.parentNode,s=a.D.getDataPrefix("trIndex"),r=parseInt(o.getAttribute(s));r>0;)r--,o=a.D.prev(o);do{for(var n=a.D.first(o);null!=n;)i?this.addClass(n,e):this.removeClass(n,e),n=a.D.next(n);o=a.D.next(o)}while(null!=o&&"0"!=o.getAttribute(s))},f.prototype.setEditMode=function(t){var e=a.D.getDataPrefix("tdIndex"),i=a.D.getDataPrefix("col_id"),o=a.D.getDataPrefix("colMerged"),r=t.getAttribute(i);if(null!=r&&""!=r.wq_trim()){var n,l=parseInt(t.getAttribute(e)),h=parseInt(l/this.realRowDataLength);if(this.options.fixedRow>0&&this.options.fixedRow>h)n=h;else if(this.options.lastFixedRow>0&&h>this.lastIndex-this.options.lastFixedRow){n=this.getDataLength()-1-(this.lastIndex-h)}else n=h+this.rowIndex;var c=a.D.getBoolean(s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/colIdToColIndex/@value"))?this.getColumnIndex(t.getAttribute(i)):t.getAttribute(i),u=this.getCellInfo(c);if((u.options.colMergeEdit||"1"!=t.getAttribute(o))&&!u.options.embeddedInput&&!this.groupbyStatus.grouped){if(this.__getEditReadOnly(t,n))return this.editMode=!1,void(u.options.showReadOnly&&(this.editMode=!0,u.showReadonly(t,n)));if(this._getEditDisabled(n,c))return this.editMode=!1,void(u.options.showReadOnly&&(this.editMode=!0,u.showReadonly(t,n)));0!=d.B.fireEvent(this,"onbeforeedit",n,c,this.dataList._getCellData(n,this.getColumnID(c)))&&null==this.editedCell&&(this.editMode=!0,this.setCellEditMode(t,n),u.comp&&u.comp.setReadOnly(this.__getEditReadOnly(t,n)))}}},f.prototype.getEditReadOnly=function(t,e){var i=a.D.getDataPrefix("col_id"),o=t.getAttribute(i);return this._getEditReadOnly(e,o)},f.prototype.getReadOnly=function(){var t=a.D.getBoolean,e=arguments[0]
;if("grid"==e||0==arguments.length)return t(this.options.readOnly);if("row"==e)return t(this.getRowReadOnly(arguments[1]));if("column"==e){var i=this.getColumnID(arguments[1]);return t(this.getColumnReadOnly(i))}if("cell"==e){var o=arguments[1];i=this.getColumnID(arguments[2]);return t(this.getCellReadOnly(o,i))}if("all"==e){o=arguments[1],i=this.getColumnID(arguments[2]);return this._getEditReadOnly(o,i)}},f.prototype.setReadOnly=function(){try{var t=arguments[0];if(1==arguments.length||"grid"==t){var e=arguments[arguments.length-1],i=this.options.readOnly,o=a.D.getBoolean(e);"clear"==e?(this.rowReadOnlyArr=[],this.cellReadOnlyArr=[]):this.options.readOnly=o;var s=this.getDataLength();if(0!=s&&i!==o){var n=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex;for(var l in this.cellInfoHash){var h=this.getColumnIndex(l);if(!isNaN(h)){for(var d=0;d<=n;d++)this.drawCellData(d,d+this.rowIndex,h);this.applyColumnStyleOptions(h)}}}this.options.readOnly?this.addClass(" w2grid_readonly_outer"):this.removeClass("w2grid_readonly_outer")}else"row"==t?this.setRowReadOnly(arguments[1],arguments[2]):"column"==t?this.setColumnReadOnly(arguments[1],arguments[2]):"cell"==t&&this.setCellReadOnly(arguments[1],arguments[2],arguments[3])}catch(t){r.w.printStackTrace(t)}},f.prototype._getEditReadOnly=function(t,e,i){try{e=this.getColumnID(e);var o=this.getCellReadOnly(t,e,i),s=this.cellInfoHash[e];if(null==s)return;var n=a.D.getBoolean;if(o+""!="")return n(o);var l=this.options.readOnlyPriority,h=s.options.readOnly,d=this.getRowReadOnly(t,i);return"column"==l&&""!==h?n(h):"row"==l&&""!==d?n(d):h+""=="true"||d+""=="true"||h+""!="false"&&d+""!="false"&&(this.options.readOnly+""!=""&&n(this.options.readOnly))}catch(t){r.w.printStackTrace(t)}},f.prototype.__getEditReadOnly=function(t,e){var i=a.D.getDataPrefix("col_id"),o=t.getAttribute(i);return this.___getEditReadOnly(e,o)},f.prototype.___getEditReadOnly=function(t,e,i){var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)?this.dataList.getRealRowIndex(t):this._getGroupbyDisplayRowIndex(t);return this._getEditReadOnly(o,e,i)},f.prototype.getDisabled=function(){var t=a.D.getBoolean,e=arguments[0];if("grid"==e||null==e)return t(this.options.disabled);if("row"==e)return t(this.getRowDisabled(arguments[1]));if("column"==e){var i=this.getColumnID(arguments[1]);return t(this.getColumnDisabled(i))}if("cell"==e){var o=arguments[1];i=this.getColumnID(arguments[2]);return t(this.getCellDisabled(o,i))}if("all"==e){o=arguments[1],i=this.getColumnID(arguments[2]);return this.getEditDisabled(o,i)}},f.prototype.setDisabled=function(t,e,i,o){try{for(var s=[t,e,i,o];s.length>0&&null==s[s.length-1];)s.pop();var n=s[0],l=1==s.length||"grid"==n,h=2==s.length&&"boolean"==typeof s[0]&&"boolean"==typeof s[1],d=a.D.getDataPrefix("header_id");if(l||h){var c=l?s[s.length-1]:s[0];if((c=a.D.getBoolean(c))!=this.options.disabled){this.options.disabled=c;var u=this.getElementById(this.id+"_dataLayer");!l&&c||(u.disabled=c),(h||!c&&u.disabledW2)&&(u.disabledW2=c),c?(this.addClass(u,"w2grid_disabled"),this.addClass("w2grid_disabled_outer"),this.options.disabledScrollHidden&&(this.setOverflowXHidden(),this.setOverflowYHidden())):(this.removeClass(u,"w2grid_disabled"),this.removeClass("w2grid_disabled_outer"),this.options.disabledScrollHidden&&(this.setOverflowX(),this.setOverflowY()));for(var p=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),g=0;g<p.length;g++){var m=p[g].getAttribute(d),f=this.headerObj[m];f?f.setDisabled?f.setDisabled(c):f.render?f.render.disabled=c:f.disabled=c:p[g].disabled=c}for(var b in this.cellInfoHash){var y=this.cellInfoHash[b];y&&"checkbox"===y.options.inputType&&(""===y.options.disabled?(y._oriDisabled=y.options.disabled,y.options.disabled=c):""===y._oriDisabled&&(y.options.disabled=c));var v=this.getColumnIndex(b);this.drawColumnData(v),this.applyColumnStyleOptions(v)}}return c}
"row"==n?this.setRowDisabled(s[1],s[2]):"column"==n?this.setColumnDisabled(s[1],s[2]):"cell"==n&&this.setCellDisabled(s[1],s[2],s[3])}catch(t){r.w.printStackTrace(t)}},f.prototype.getEditDisabled=function(t,e,i){return this._getEditDisabled(this._getGroupbyGroupedRowIndex(t),e,i)},f.prototype._getEditDisabled=function(t,e,i){try{var o=-1,s="";"number"==typeof e?(o=e,s=this.cellIdList[e]):(o=this.bodyIdColIndexMap[e],s=e);var a=-1;if(!0===i)a=t;else if(this._linkedDataList)a=this._linkedDataList.filteredRowIndexArr[t];else if(this.groupbyStatus.grouped){var n=!0;for(var l in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[l]){a=this._dataList.filteredRowIndexArr[t],n=!1;break}n&&(a=this.groupbyStatus.groupedRowIndexArr[t])}else a=this._dataList.filteredRowIndexArr[t];var h=this.cellInfoHash[s]||{options:{}},d=this.cellDisabledArr[a*this.oneRowDataLength+o];if(!0!==d&&!1!==d){var c=h.options.disabled,u=this.rowDisabledArr[a],p=this.options.disabledPriority;!0!==u&&!1!==u&&(u=""),d="column"===p&&""!==c?c:"row"===p&&""!==u?u:c+""=="true"||u+""=="true"||c+""!="false"&&u+""!="false"&&(""!==this.options.disabled&&this.options.disabled)}return d}catch(t){r.w.printStackTrace(t)}},f.prototype.getElemRowIndex=function(t){var e=a.D.getDataPrefix("tdIndex"),i=parseInt(t.getAttribute(e));return parseInt(i/this.realRowDataLength)+this.rowIndex},f.prototype.notifyDataChanged=function(t){if("active"==this.activeStatus){this.initHeightCompleted=!1,this.checkResize();var e=t&&t.append||!1,i=t&&t.keepTop||!1,o=t&&t.refreshScroll||!1,s=t&&t.refreshInstance||!1,r=i&&this.rowIndex>=0?this.rowIndex:0,a=t&&!0===t.gridData,n={sortIcon:this.options.hideSortIconOnNoData};if(this.delayedDraw({rowIndex:r}))return!0===s&&this._refreshInstance(void 0,e),void this.changeCount++;this._mergeRefresh();var l=this._setGridBorderNoRefresh||!1;if(this._setGridBorderNoRefresh=!0,this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),o&&"all"!==this.options.visibleRowNum&&(this.lastTopRowIndex=null,this.setScrollYHeight()),this.drawFooter(),this.drawHeader(void 0,n),this.senseReaderMode=!1,this.displayNoResultMessage(),this._setGridBorderNoRefresh=l,!0===s&&this._refreshInstance(void 0,e),void this.refreshAdaptive({simple:!0});if("native"===this.options.drawType)return this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(void 0,n),this.displayNoResultMessage(),!0===s&&this._refreshInstance(void 0,e),void this.refreshAdaptive({simple:!0});if(e&&!this.loadFlag)return this.drawFooter(),this.drawHeader(void 0,n),void(!0===s&&this._refreshInstance(void 0,e));if(this.changeCount++,!0===e&&"true"===this.options.keepScrollForSenseReader&&!0===this.options.senseReader&&this.options.visibleRowNum>0)var h=this.drawDataTable(0,{keepScrollTop:!0});else h=this.drawDataTable(0);for(var d in o&&(this.lastTopRowIndex=null,this.setScrollYHeight()),0==h&&(e&&!o&&(this.lastTopRowIndex=null,this.setScrollYHeight()),this.hiddenCellObj.length>0?(this.rowIndex=r,!0!==a&&this._setCellVisibleRefresh()):this.drawData(r)),this.displayNoResultMessage(),this.drawFooter(),this.drawHeader(void 0,n),this._setGridBorderNoRefresh=l,this.refreshAdaptive({simple:!0}),this.cellInfoHash)this.cellInfoHash[d].refreshCell();if(this.hasCustomInputType)for(var c=0;c<this.cellIdList.length;c++){var u=this.cellInfoHash[this.cellIdList[c]];u&&u.options&&"custom"===u.options.inputType&&u.options.typeGetter&&u.refreshCellManagerHash()}!0===s&&this._refreshInstance(void 0,e)}},f.prototype.notifyCellChanged=function(t,e,i,o){if(this.changeCount++,!this.delayedDraw({})){var s=this._getTrRowIndex(t);if(e=this.getColumnIndex(e),this._drawRowStatus(s,t),this._drawCellStatus(s,t,e),!0!==i&&(this.drawCellData(s,t,e),this.groupbyStatus.grouped&&this.options.groupbyDisplayRowIndex)){for(var r=t+1,n=s+1;"number"==typeof this.groupbyStatus.groupedRowIndexArr[r]&&r<this.groupbyStatus.groupedRowIndexArr.length;)r++,n++
;if("object"==typeof this.groupbyStatus.groupedRowIndexArr[r]&&"footer"===this.groupbyStatus.groupedRowIndexArr[r].type){var l=this.dataList.getRealRowIndex(r);if(null!=l){var h=this.all_data_td_list[n*this.realRowDataLength];h&&this.drawGroupData(h,l,n)}}}var d=this.getColumnID(e);this._refreshExpression(t,d);var c=this.labelColumnAssArr[d];if(null!=c)for(var u=0;u<c.length;u++){var p=this.getColumnIndex(c[u]);this.drawCellData(s,t,p)}this.displayNoResultMessage(),this.hasSubtotal&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex)),this.drawFooter(d),this.drawHeader(d),o||this._setCheckboxHead(d),"never"!==this.options.mergeCellsFixedCols&&a.D.setTimeout((function(){var t={fixedCols:!0,fixedRows:!1};this._mergeCells(this.options.mergeCellsFixedCols,t,{type:"mergeCellsFixedCols"})}),{key:this.id+"notifyCellChanged_mergeRefresh",caller:this,delay:200})}},f.prototype._getTrRowIndex=function(t){try{var e=t;if(this.rowIndex>=0){var i=this.getDataLength();this.options.fixedRow>0&&this.options.fixedRow>t||(this.options.lastFixedRow>0&&e>=i-this.options.lastFixedRow?e=this.lastIndex-(i-1-e):e-=this.rowIndex)}return e}catch(t){r.w.printStackTrace(t)}},f.prototype._refreshExpression=function(t,e){try{var i=this._getTrRowIndex(t),o=this.expressionAssArr[e];if(null!=o){var s=this.searchExpression(o);for(var a in s){var n=this.getColumnIndex(a);this.drawCellData(i,t,n),this.drawFooter(n),this.drawHeader(n)}}}catch(t){r.w.printStackTrace(t)}},f.prototype.searchExpression=function(t){for(var e={},i=[t];i.length>0;)for(var o=i.pop(),s=0;s<o.length;s++)if(e[o[s]]=!0,this.expressionAssArr[o[s]]){var r=this.expressionAssArr[o[s]];if(r.length>1)i.push(r);else null!=this.expressionAssArr[r]&&i.push(r),e[r]=!0}return e},f.prototype.notifyRowChanged=function(t,e){if(this.changeCount++,!this.delayedDraw({rowIndex:t})){var i={sortIcon:this.options.hideSortIconOnNoData};if(this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(void 0,i),this.senseReaderMode=!1,this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if("native"===this.options.drawType)return this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(void 0,i),this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if(-1==this.rowIndex)this.drawDataTable(0),(this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0);else if(e&&!0===e.keepScrollTop)this.lastTopRowIndex=null,this.drawData(this.rowIndex,0,null,null,{keepScrollTop:!0});else{this.lastTopRowIndex=null;var o=this._dataList.options.depthColumn?this.getDrawCount()+this.rowIndex:this.getDataLength(),s=(t=t||this.rowIndex)-this.rowIndex,r=this.rowIndex;if(0<=s&&s<=this.lastIndex&&(this.rowIndex<=0||this.rowIndex+this.lastIndex<o))if(this.isDrillDown&&!this.drilldown.isOpen(t)){var n=("linkedDataList"===this.drilldown.mode?this._linkedDataList.filteredRowIndexArr:this._dataList.filteredRowIndexArr).length-(t+1),l=this.lastIndex-s-n;r=h=l<=0?this.rowIndex:(h=this.rowIndex-l)>0?h:0}else r=this.rowIndex;else if(0<=s&&s<=this.lastIndex||s<0){var h;(h=this.rowIndex-1)+this.lastIndex>=o&&(h=o-this.lastIndex-1),r=h=h>0?h:0}this.hiddenCellObj.length>0?(this.rowIndex=r,a.D.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:200})):this.drawData(r,0)}this.displayNoResultMessage(),this.hasSubtotal&&this.refreshSubtotalRow(t),this.drawFooter(),this.drawHeader(void 0,i),this.refreshAdaptive({simple:!0})}},f.prototype.notifyRowInserted=function(t){if(t=parseInt(t,10),this.changeCount++,!this.delayedDraw({rowIndex:t})){var e={sortIcon:this.options.hideSortIconOnNoData};if(this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),"all"!==this.options.visibleRowNum&&(this.lastTopRowIndex=null,this.setScrollYHeight()),this.drawFooter(),this.drawHeader(void 0,e),
this.senseReaderMode=!1,this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if("native"===this.options.drawType)return this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(void 0,e),this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if(this.lastTopRowIndex=null,-1==this.rowIndex)0==this.drawDataTable(0)&&this.drawData(0,0),(this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0);else if(""!==this.options.visibleRowNum||this.options.initFixedHeightByRowNum>0)this.setDataTable(),this.drawData(0);else{var i=t-this.rowIndex,o=this.getElementById(this.id+"_scrollY_div");if(i<0){var s=this.getElementById(this.id+"_scrollY_div");this.scrollEvent=!1,s.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t),this.drawData(t,0)}else(o.offsetHeight>=o.scrollHeight||i<=this.lastIndex)&&(this.hasSubtotal&&(i=0),this.drawData(this.rowIndex,i))}0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight();var r=this._getVisibleLastIndex(this.lastIndex+1);if(this.rowIndex+r-1<t){this.scrollEvent=!1,(s=this.getElementById(this.id+"_scrollY_div")).scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t);var n=this._getEpsilon(),l=Math.round(s.scrollTop)+n,h=this._getVisibleRowIndex(parseInt(l/this.oneRowScrollHeight));this.hiddenCellObj.length>0?(this.rowIndex=h,a.D.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:200}),this.lastTopRowIndex=null):this.drawData(h)}this.displayNoResultMessage(),this.drawFooter(),this.drawHeader(void 0,e),this.refreshAdaptive({simple:!0})}},f.prototype.displayNoResultMessage=function(){var t="removed"!==this.options.noResultMessageExclude||0==this.removed,e=this.getElementById(this.id+"_noresult");if(e&&this.options.noResultMessageVisible&&t&&0==this.initFlag&&0==this.getDataLength()){e.innerHTML=this.options.noResultMessage,e.style.display="block";var i=this.getElementById(this.id+"_main_div"),o=i.offsetHeight,s=this.getElementById(this.id+"_body_table").offsetHeight+3,r=this.getElementById(this.id+"_foot_table"),a=0;r&&(a=r.offsetHeight);var n=this.getElementById(this.id+"_noresult"),l=parseInt(WebSquare.style.getStyle(n,"margin-top"),10)||0,h=parseInt(WebSquare.style.getStyle(n,"margin-bottom"),10)||0,d=n.offsetHeight+l+h,c=o-s-a,u=this.getElementById(this.id+"_scrollX_div").offsetHeight;if(c<=0);else if(c<=d)n.style.top=s+l+"px",this.setSize(i,s+a+d+u+l+h);else{var p=this.getElementById(this.id+"_head_table"),g=(n.style.top,0);if(p&&p.childNodes)for(var m=0;m<p.childNodes.length;m++)"string"==typeof p.childNodes[m].tagName&&"TR"===p.childNodes[m].tagName.toUpperCase()&&g++;if((g>1||this.options.groupbyZone)&&!this.options.noResultMessageStylePriority){var f;f=this._noResultMessageDivTop.indexOf("px")>0?o-parseInt(this._noResultMessageDivTop):o*parseInt(this._noResultMessageDivTop)/100;var b=0;this.options.groupbyZone&&this.groupbyZoneStatus.groupbyZoneRender&&(b=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight),n.style.top=parseInt(g*this.oneRowHeight/2+f)+b+"px"}}}else e.style.display="none";this.removed=!1,this.delayedDrawObj||this.removeAllFinish||(this.initFlag=!1)},f.prototype.delayedDraw=function(t){return(0==this.resizeObj.width||0==this.resizeObj.height)&&(this.delayedDrawObj||(this.delayedDrawObj={}),this.delayedDrawObj.redraw=!0,t.hasOwnProperty("rowIndex")?this.delayedDrawObj.rowIndex=t.rowIndex:t.hasOwnProperty("subTotalVisible")?this.delayedDrawObj.subTotalVisible=t.subTotalVisible:t.hasOwnProperty("newColumnOrder")&&(this.delayedDrawObj.newColumnOrder=t.newColumnOrder),!0)},f.prototype.delayedAction=function(){this.startedDisplayNone=!1,this.setPreAction(),this.getRowCount&&this.getRowCount()>0&&this.notifyDataChanged(),this.options.focusOnSetData&&this._setFocusedCell(0,0);var t=WebSquare.BootLoader.fullViewed||!1,e=a.D.fullViewed||!1
;t||e||this.checkAdaptiveGridType()&&(""==this.options.adaptive&&0==Object.keys(this.hideThresholdObj).length||(this.oldOptions.headerColBorder="",this.oldOptions.bodyColBorder="",this.setAdaptive(),a.D.isMobile()&&this.options.fixAdaptive||this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)))),this.delayedDrawObj=null,this.initFlag=!1},f.prototype.setRedrawStatus=function(t){if(!this.startedDisplayNone||"stop"!=t)if("stop"==t)this.delayedDrawObj||(this.delayedDrawObj={});else{this.setDataLayerPosition(),this.scrollX_right.scrollLeft=this.resizeObj.scrollLeft,this.getElementById(this.id+"_scrollY_div").scrollTop=this.resizeObj.scrollTop,this.handlerResize_drawInitializer(),this._handleScrollX();for(var e=!1,i=0;i<this.colWidthList.length;i++)if(this.colWidthList[i].toString().indexOf("*")>-1){e=!0;break}if((this.options.autoFit||e)&&this.autoFitFunc(),this.delayedDrawObj.redraw){this.lastTopRowIndex=null,this.setDataTable(),this.setTrRowTable(),this.setColIndexInfo();var o=this.delayedDrawObj.rowIndex||0,s=o,r=this.getDataLength();if(r-this.drawedRowLength<s&&(s=r-this.drawedRowLength)<0&&(s=0),"all"!==this.options.visibleRowNum)for(;this.hiddenRowObj.extraRow<this.hiddenRowObj.length;)this._addHiddenRow(this.drawedRowLength+this.hiddenRowObj.extraRow);this.drawData(s),null!=this.delayedDrawObj.subTotalVisible&&this.delayedDrawObj.subTotalVisible!==this.hasSubtotal?this.setSubtotalVisible(this.delayedDrawObj.subTotalVisible):this.setScrollYHeight();var a=this.rowIndex+this.lastIndex,n=this._getScrollRowIndex(o);if(a<o||n<o){this.scrollEvent=!1;var l=this.getElementById(this.id+"_scrollY_div");l.scrollTop=this.oneRowScrollHeight*n;var h=this._getVisibleRowIndex(parseInt(l.scrollTop/this.oneRowScrollHeight));this.drawData(h)}this.drawFooter(),this.drawHeader(),this.displayNoResultMessage();var d="never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols;for(var c in d||(this._mergeRefresh(),this.dynamicMergeHTML()),this.cellInfoHash)this.cellInfoHash[c].refreshCell();this._drawGroupbyZone(),void 0!==this.delayedDrawObj.newColumnOrder&&this.delayedDrawObj.newColumnOrder.length>0&&this.setColumnOrder(this.delayedDrawObj.newColumnOrder)}this._setVisibleRowNumFix(),this.delayedDrawObj=null,this.initFlag=!1}};var b=function(){};b.prototype.setScrollYHeight=function(t){void 0!==t&&null!=t||(t={});var e=this.getDataLength(),i=this.rowIndex,o=!0===t.noDraw,r=!0===t.keepScrollTop,n=this.getElementById(this.id+"_size_y"),l=this.getElementById(this.id+"_scrollY_div"),h=n.parentNode.offsetHeight;0==h&&(h=parseInt(this.getStyle("height")));var d=this._getScrollRowIndex(i);if(-1==i||0==d&&d+this._getVisibleLastIndex(this.lastIndex+1)==e){var c=!0;if(this.hasSubtotal&&this.drawedSubtotal.length>0){var u=this.drawedSubtotal[this.drawedSubtotal.length-1];u.length>0&&(u.rowIndex+1!=e||"none"===u[u.length-1].style.display||this._getLastSubtotalCount()>this.drawedSubtotal.length)&&(c=!1)}else this.hasSubtotal&&0==this.drawedSubtotal.length&&this.lastSubtotalRow&&e>0&&(c=!1);if(c)return"table"==n.tagName.toLowerCase()&&(l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")),void(0!==n.offsetHeight&&(n.style.height="0px",this.handlerResize_drawInitializer()))}var p=l.scrollTop;if(!0!==t.skipResize){var g;if("number"==typeof t.restRowCnt)g=t.restRowCnt;else if(""!==this.options.visibleRowNum)this.options.senseReader&&"all"===this.options.visibleRowNum||this.isDrillDown?g=e-(this.lastIndex+1):(g=e-this.drawedRowLength,this._dynamicVisibleRowNum>0&&(g=e-this._dynamicVisibleRowNum),this.options.initFixedHeightByRowNum>-1&&(g+=this._getLastSubtotalCount())),g<0&&(g=0),g=Math.max(0,g-this._getHiddenRowCount());else if(this.lastTopRowIndex&&this.lastTopRowIndex>0)g=this._getScrollRowIndex(Math.ceil(this.lastTopRowIndex));else{
var m=this.getElementById(this.id+"_head_table"),f=this.dataLayerHeight-m.offsetHeight,b=parseInt(f/this.oneRowHeight),y=this.drawedRowLength;this.oneRowLength>1&&(y=Math.ceil(this.drawedRowLength/this.oneRowLength)),b+(this.isMobile?0:1)<y&&(y=b+(this.isMobile?0:1)),g=this.options.fixHeight||this.hasSubtotal?e-b>1?e-b:1:this.options.senseReader?e-(this.lastIndex+1)>0?e-(this.lastIndex+1):1:e-y+1>1?e-y+(this.isMobile?0:1):1,g=Math.max(0,g-this._getHiddenRowCount())}var v=h+this.oneRowScrollHeight*g;if(h=l.offsetHeight,v<=1e6&&"table"!=n.tagName.toLowerCase())n.style.height=v+"px";else if(v<=1e6)l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,(n=this.getElementById(this.id+"_size_y")).style.height=v+"px";else if(s.v.browserCheck.ieAllVersion&&!this.isIE6or7||a.D.isSpartan()){var w=[];for(w.push("<table id='"+this.id+"_size_y' style='border-collapse:collapse; border-spacing:0px;height:0px; position:absolute; top:0px; left:0px; width:18px'><tbody>");v>1e6;)w.push("<tr style='height:1000000px'><td></td></tr>"),v-=1e6;w.push("<tr style='height:"+v+"px'><td></td></tr></tbody></table>"),l.innerHTML=w.join(""),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")}else"table"==n.tagName.toLowerCase()&&(l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")),s.v.browserCheck.moz?n.style.height=v+1+"px":n.style.height=v+"px"}else h=l.offsetHeight;if(!0!==t.skipScrollEnd){var S=n.offsetHeight;S<1e6&&(S=parseInt(n.style.height,10));var C=S-h,_=this._getEpsilon(),x=Math.min(Math.round(p)+_,C),I=this._getScrollMaxRowIndex();if(I>e-this._getHiddenRowCount())this._applyScrollEnd(I,{noDraw:!0});else{var T=this.options.syncWithScrollTrack?Math.ceil:Math.floor;if(C>=0&&T.call(this,x/this.oneRowScrollHeight)!=this._getScrollRowIndex(i)){this.lastTopRowIndex&&this.lastTopRowIndex==i&&(i=this.lastTopRowIndex+1);var k=this._getScrollRowIndex(i);o&&l.scrollTop!=this.oneRowScrollHeight*k&&(this.scrollEvent=!1),x=Math.min(this.oneRowScrollHeight*k,C),l.scrollTop=x;var D=this._getVisibleRowIndex(parseInt(x/this.oneRowScrollHeight));this.bScrollTop=D,this.rowIndex=D}!r&&C>0&&C==x&&this._applyScrollEnd(this.rowIndex),this.lastScrollYTop=l.scrollTop,!0!==t.skipResize&&this.handlerResize_drawInitializer(),this.isMobile&&this.setIScrollY()}}else this.handlerResize_drawInitializer()},b.prototype._checkScrollEnd=function(){try{var t=this.getElementById(this.id+"_size_y"),e=this.getElementById(this.id+"_scrollY_div"),i=e.offsetHeight,o=t.offsetHeight;o<1e6&&(o=parseInt(t.style.height,10));var s=o-i,a=this._getEpsilon(),n=e.scrollTop,l=Math.min(Math.round(n)+a,s);return s>0&&s===l}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype._checkScrollEnd2=function(){try{var t=this.getElementById(this.id+"_size_y"),e=this.getElementById(this.id+"_scrollY_div"),i=e.offsetHeight,o=parseInt(t.style.height,10)-i,s=this._getEpsilon(),a=e.scrollTop,n=Math.min(Math.round(a)+s,o);return o<=0?-1:n<3?1:n<o?0:2}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype._applyScrollEnd=function(t,e){try{if(""!==this.options.visibleRowNum||this.lastTopRowIndex>0||0===this.lastTopRowIndex||this.groupbyStatus.grouped)return 0;if(this.hiddenCellObj.length>0)return 0;if(isNaN(t)&&(t=this.rowIndex),void 0!==e&&null!=e||(e={}),this._applyScrollEndCnt){if(this._applyScrollEndCnt>4)return;this._applyScrollEndCnt++}else this._applyScrollEndCnt=0;var i=0,o=this.getDataLength(),s=!1;if(this.hasSubtotal){if(this.drawedSubtotal.length>0){var a=this.drawedSubtotal[this.drawedSubtotal.length-1];if(a.rowIndex==o-1)"none"!=a[a.length-1].style.display&&(s=!0)}}else s=!0;var n=this.lastIndex+1,l=this._getVisibleLastIndex(n);if(t+l==o&&s)!0!==this._onSetHeight&&(this.lastTopRowIndex=t);else{var h=o-l;i=this._getScrollRowIndex(h)-this._getScrollRowIndex(t);var d=this.getElementById(this.id+"_size_y")
;if(this.hasSubtotal&&!s&&!0!==this._onSetHeight)if(this.struct.subtotalArr.length>1&&""===this.options.visibleRowNum&&!0!==e.noDraw){var c=this._getDrawedRowCount();if(c>0)return this.options.initFixedHeightByRowNum=c,this.options.visibleRowNum=c,this.drawedRowLength=c,this.lastTopRowIndex=null,this.drawedRowLength=this.options.initFixedHeightByRowNum,void this.drawData(this.rowIndex,0);i+=this.struct.subtotalArr.length}else i+=this.struct.subtotalArr.length;if(0!==i){this.lastTopRowIndex=null;var u=d.offsetHeight;u<1e6&&(u=parseInt(d.style.height,10)),d.style.height=u+this.oneRowScrollHeight*i+"px",!0!==e.noDraw&&this.drawData(Math.max(t+i,0)),this.handlerResize_drawInitializer()}}return this._applyScrollEndCnt=0,i}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.addGridScroll=function(t){var e=this.rowIndex+t;e=(e=e<0?0:e)>=this.getDataLength()-this.lastIndex?this.getDataLength()-this.lastIndex:e,this.scrollEvent=!1,this.checkScrollEnd=!0,this.drawData(e,0)},b.prototype.handleScrollY=function(t,e){var i=this.getElementById(this.id+"_scrollY_div").scrollTop;if(i!=this.bScrollY&&(this.bScrollY=i,0!==this.getElementById(this.id+"_size_y").offsetHeight)){var o=this._getEpsilon(),s=Math.round(i)+o,r=this._getVisibleRowIndex(parseInt(s/this.oneRowScrollHeight)),n=this.getDataLength(),l=this._checkScrollEnd();if(this.scrollEvent&&(null!=this.editedCell&&this._fireOnviewchange(this.editedCell.id,"handleScrollY",[t]),this.bScrollTop!=r)){this.hasClass(document.activeElement,this.options.bodyTdClass)&&document.activeElement.blur&&document.activeElement.blur();var h="async",c=e&&!0===e.changedHeight;(c||l)&&(h="sync",c||this.handleResize()),this.drawData(r,null,h)}this.bScrollTop=r;var u=this._getVisibleLastIndex(this.lastIndex+1);if(0==i&&this.checkScrollStart&&(this.skipScrollStartEvent||(this.scrollEvent=!0,this.checkScrollStart=this.options.alwaysTriggerScrollStart,d.B.stopEvent(t),a.D.setTimeout((function(){d.B.fireEvent(this,"onscrollstart")}),{key:this.id+"_scrollstart",caller:this,delay:150}))),(this.scrollEvent||this.checkScrollEnd)&&this.options.loadCount>0&&this.loadFlag){var p=r+u-1;n-this.options.loadCount-1<=p&&null==this.loadCheck[n]&&(this.skipScrollEndEvent||(this.loadCheck[n]=!0,this.scrollEvent=!0,this.loadFlag=!1,d.B.stopEvent(t),a.D.setTimeout((function(){d.B.fireEvent(this,"onscrollend")}),{key:this.id+"_scrollend",caller:this,delay:150})))}else(this.scrollEvent||this.checkScrollEnd)&&0==this.options.loadCount&&!0===l&&(!this.scrollEvent||this._applyScrollEnd(this.rowIndex)<=0)&&(d.B.stopEvent(t),a.D.setTimeout((function(){d.B.fireEvent(this,"onscrollend")}),{key:this.id+"_scrollend",caller:this,delay:150}));if(this.skipScrollStartEvent=!1,this.skipScrollEndEvent=!1,this.scrollEvent=!0,this.checkScrollEnd=!1,1==this.options.syncScroll&&this.options.syncScrollId)for(var g=this.options.syncScrollId.split(","),m=0;m<g.length;m++){var f=a.D.getComponentById(g[m],this.scope_id);f&&this.getRowCount()==f.getRowCount()&&f.setScrollTop(i)}d.B.fireEvent(this,"onscrolly",t)}},b.prototype.drawDataTable=function(t,e){try{null==t&&(t=this.rowIndex),-1==t&&(t=0);var i=this.drawedRowLength;return this.setDataTable(),this.headerTds=null,this.footerTds=null,this.drawedRowLength!=i&&(this.setColIndexInfo(),e&&e.keepScrollTop?this.drawData(this.rowIndex,0,null,null,{keepScrollTop:!0}):this.drawData(t,0)),this.drawedRowLength-i}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.drawData=function(t,e,i,o,a){try{s.v.clearTimer(this.id+"_drawData"),s.v.clearTimer(this.id+"_completiveDrawData"),s.v.clearTimer(this.id+"_adjustDraw");i=i||"sync";var n=!0;this.options.senseReader&&(n=!1),t=Math.min(t,this.getDataLength()),this.changeFocusedCellPosition(t,n,!0,{linkNoFocus:!0});var l=this.maxRowLength;if(this.rowIndex=t,null!=this.editedCell&&this.editedCell.handleEndEdit(null,o),this.subtotalHidden(e?{startRowIndex:e+this.rowIndex}:null),
-1!=this.rowIndex&&"sync"!=i&&"all"!==this.options.visibleRowNum||this.startedDisplayNone)e=this.fastDrawData(e,{scroll:!0}),s.v.setTimer((function(e){s.v.setTimer(this.completiveDrawData,{key:this.id+"_completiveDrawData",caller:this,delay:120,args:[e],callback:function(e){s.v.setTimer((function(){this.startedDisplayNone||(this.adjustDraw(e),this._setGridBorder(),this._setCheckboxHead()),l!=this.maxRowLength&&this.changeFocusedCellPosition(t,n)}),{key:this.id+"_adjustDraw",caller:this})}})}),{key:this.id+"_drawData",caller:this,delay:1,args:[e]});else{var h=this.completiveDrawData(e,!1);this.adjustDraw(h,a),this._setGridBorder(),this._setCheckboxHead(),l!=this.maxRowLength&&this.changeFocusedCellPosition(t,n)}}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.fastDrawData=function(t,e){try{var i=this.options.initFixedHeightByRowNum>-1;i&&(void 0===e||null==e?e={skipSubtotal:!0}:e.skipSubtotal=!0),this.options.measureTime&&s.v.measureTime((function(t){var e=t.aver,i=parseInt(1e3/e*10,10)/10;c.k.printLog("Id : "+this.id+", time : "+e+"ms   ,fps : "+i)}),{key:this.id+"_measureDrawTime",caller:this});var o=this.rowIndex,a=this.getDataLength();t=t||0;!0===this.hiddenRowObj.init&&(t=0);var n=this._getVisibleTrRowIndex(t,o),l=this.hiddenCellObj.length>0;if(a>0){0==t&&o!=this.lastTopRowIndex&&""===this.options.visibleRowNum&&this.drawSubtotalRow(0,o-1);new Date;var h,d=1;l?(h=a,d=a):""===this.options.visibleRowNum?h=this._getVisibleTrRowIndex(this.drawedRowLength,o):("all"===this.options.visibleRowNum||(d=parseInt(this.options.visibleRowNum,10)-t),h=a);for(this._getVisibleTrRowIndex(this.options.drawLimitRow,o);n<h&&n+o<a&&d>0;n++){var u=!this.hiddenRowObj.length>0||this._getRowVisible(n+o);u&&!0===this.hiddenRowObj.init&&this._setRowDisplay(n,""),this.options.fixedRow>0&&this.options.fixedRow>n?this.fastDrawRowData(n,n,e):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||this.fastDrawRowData(n,n+o,e);var p=this.options.backgroundColorMode.toLowerCase();if("always"==p?"object"!=typeof this.dataList.getRealRowIndex()&&(this.options.fixedRow>0&&this.options.fixedRow>n?this.applyRowStyleOptions(n):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||this.applyRowStyleOptions(o+n)):"full"==p&&"object"!=typeof this.dataList.getRealRowIndex()&&(this.options.fixedRow>0&&this.options.fixedRow>n?(this.applyRowStyleOptions(n),this.setEvenOddBackground(n,n)):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||(this.applyRowStyleOptions(o+n),this.setEvenOddBackground(n,o+n))),u?this.lastDisplayedRow<n&&!0!==this.hiddenRowObj.init&&(this._setRowDisplay(n,""),l||(this.lastDisplayedRow=n)):this._setRowDisplay(n,"none"),u&&""!==this.options.visibleRowNum)if(d--,i&&this.hasSubtotal&&d>=1)d-=this.drawSubtotalRow(n+1,n+o,{maxCount:d});if(l)for(var g=0;g<this.oneRowDataLength;g++){var m=n+o,f=this._getTdElem(n+o,g);if(f){var b=!0===this.hiddenCellObj[m+"_"+g];f.style.display=b?"none":""}}}}if(this.hideDataLayer&&(this.hideDataLayer.style.display="none"),null!==this.lastTopRowIndex&&o>=this.lastTopRowIndex&&!0!==this.hiddenRowObj.init&&!l){for(g=n;g<=this.lastDisplayedRow;g++)this._setRowDisplay(g,"none");this.lastDisplayedRow=n-1}return this.options.mergeRefreshAlways&&this.dynamicMergeHTML(),!0===this.hiddenRowObj.init?t:n}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.completiveDrawData=function(t,e){try{!this.autofitDone&&this.options.autoFit&&this._setAutoFit();var i=this.getDataLength();t=t||0;!0===this.hiddenRowObj.init&&(t=0);var o=this.rowIndex,s=t-1,n=this.dataLayerHeight,l=this.hiddenCellObj.length>0;if(i>0){if(!0===this.hiddenRowObj.init)this._applyRowVisible({applyStyle:!0,drawRow:!0}),s=this.lastIndex;else{var h=this.options.initFixedHeightByRowNum>-1;0==t&&o!=this.lastTopRowIndex&&""===this.options.visibleRowNum&&this.drawSubtotalRow(0,o-1);var d,c=this.drawedRowLength;this._dynamicVisibleRowNum>0&&(c=this._dynamicVisibleRowNum),
h&&this.hasSubtotal&&this.drawedSubtotal&&(c-=this.drawedSubtotal.drawedRowLength),h&&(d={skipSubtotal:!0});for(var u=t;u<c&&u+o<i;u++){var p=u+this.rowIndex;if(this.options.fixedRow>0&&this.options.fixedRow>u?this.fastDrawRowData(u,u,d):this.fastDrawRowData(u,p,d),s=u,h&&this.hasSubtotal&&u<c-1)c-=this.drawSubtotalRow(u+1,p,{maxCount:c-u-1})}if(h&&this.hasSubtotal&&c>s+1&&(c-=this.drawSubtotalRow(0,o-1,{maxCount:c-s-1})),this.options.rowResize&&this.rowResized){var g=n-this.getElementById(this.id+"_head_table").offsetHeight,m=0;for(u=0;u<this.dataRowList.length;u++){if(!(m<g)){s=u;break}m+=this.dataRowList[u].offsetHeight}}if("native"==this.options.drawType&&0!=t&&(s=this.getDataLength()-1),l){for(u=s+1;u<this.drawedRowLength+this.hiddenRowObj.extraRow;u++)this._setRowDisplay(u,"none");for(u=0;u<=s;u++)this._setRowDisplay(u,"")}else{for(u=s+1;u<=this.lastDisplayedRow+this.hiddenRowObj.extraRow;u++)this._setRowDisplay(u,"none");for(u=this.lastDisplayedRow+1;u<=s;u++)this._setRowDisplay(u,"")}var f=l||""===this.options.visibleRowNum&&-1==this.options.initFixedHeightByRowNum;if(f){var b=0,y=this.options.backgroundColorMode.toLowerCase();"always"!==y&&"full"!==y||(b=t);for(u=b;u<=s;u++)this.options.fixedRow>0&&this.options.fixedRow>u?this.applyRowStyleOptions(u):this.applyRowStyleOptions(o+u);this.options.autoResizeEmbeddedInput&&this.firstEmbeddedInputResize&&(this.setAutoResizeEmbeddedInput(),this.firstEmbeddedInputResize=!1)}this.lastDisplayedRow=s,f&&"all"!==this.options.visibleRowNum&&(s=this.cutGridBottom(s,e))}for(u=0;u<=s;u++)this.options.fixedRow>0&&this.options.fixedRow>u?this.setEvenOddBackground(u,u):this.setEvenOddBackground(u,o+u);if(this.options.lastFixedRow>0)for(u=0;u<this.options.lastFixedRow;u++)this.options.lastFixedRowStartIndex>0?(this.fastDrawRowData(s-u,this.options.lastFixedRowStartIndex+1-u),f&&this.applyRowStyleOptions(s-u),this.setEvenOddBackground(s-u,this.options.lastFixedRowStartIndex+1-u)):(this.fastDrawRowData(s-u,i-1-u),f&&this.applyRowStyleOptions(s-u),this.setEvenOddBackground(s-u,i-1-u));if(!0!==this.hiddenRowObj.init&&!l){var v=this._getVisibleLastIndex(s+1);s+1<this.drawedRowLength&&(this._setRowDisplay(v,""),this.setEvenOddBackground(v,o+v),this.applyRowStyleOptions(o+v),this.options.showLastRow&&!this.hasSubtotal?this.getDataLength()<=o+v&&this._setRowDisplay(v,"none"):this._setRowDisplay(v,"none"))}}else{var w=this.options.showLastRow&&!this.hasSubtotal?1:0,S=this.lastDisplayedRow+w;!0===this.hiddenRowObj.init&&(S=this.drawedRowLength+this.hiddenRowObj.extraRow-1);for(u=0;u<=S;u++)this._setRowDisplay(u,"none");s=this.lastDisplayedRow=-1}if(this.hideDataLayer&&(this.hideDataLayer.style.display="none"),this.focusedCell.length>0&&!this.editedCell){var C=this.focusedCell[this.focusedCell.length-1].focusedRowIndex-this.rowIndex,_=this.focusedCell[this.focusedCell.length-1].focusedColIndex;if(0<=C&&C<=s){var x=this.data_td_list[_+C*this.oneRowDataLength];x&&this.applyFocusedCellIn(x)}}var I=WebSquare.BootLoader.fullViewed||!1,T=a.D.fullViewed||!1;if(!I&&!T&&"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")){this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(u=this.defaultColCnt;u<this.hiddenList.length;u++)1==this.hiddenList[u]&&this.setAdaptiveColumnVisible(u,!1)}return s}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.adjustDraw=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.rowIndex;this.dataLayerHeight;if(this.options.lazyDrawHiddenColumn)this.initVisibilityArr=this.colIndexInfo.body.visibilityArr.slice(0),this.hideInvisibleTds();else{this.rollbackCommitFlag=!1;var o=this.lastDisplayedRow;!0===this.hiddenRowObj.init&&(o=this.drawedRowLength+this.hiddenRowObj.extraRow-1)
;for(var s=0;s<=o-this.options.lastFixedRow;s++)this.groupbyStatus.grouped&&"object"==typeof this.dataList.getRealRowIndex(s+i)||(!0!==this.hiddenRowObj.init||this._getRowVisible(s+i))&&(this.options.fixedRow>0&&s<=this.options.fixedRow-1?this.lazyDrawRowData(s,s):this.lazyDrawRowData(s,s+i));this.rollbackCommitFlag=!0}t=this.options.initFixedHeightByRowNum>-1?this.adjustInitFixedByRowNum(t):""!==this.options.visibleRowNum?this.adjustVisibleRowNum(t):this.adjustDefault(t),this.maxRowLength=t,!this.isIE6or7||1==this.options.senseReader&&""==this.options.visibleRowNum||(this._setRowDisplay(t+1,""),this.dataRowList[(t+1)*this.oneRowLength]&&this.dataRowList[(t+1)*this.oneRowLength].offsetHeight,this._setRowDisplay(t+1,"none")),this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.adjustVisibleRowNum=function(t){try{if(""===this.options.visibleRowNum||"native"===this.options.drawType)return t;var e=this.rowIndex,i=this.getDataLength();this.setDataTable();var o={noDraw:!0,skipResize:null!=this.lastTopRowIndex};this.setScrollYHeight(o),!0===this.hiddenRowObj.init&&this.applyStyleOptions(t);var s,n=this.getElementById(this.id+"_scrollX_div"),l=parseInt(n.style.height,10),h=this.getElementById(this.id+"_body_table"),d=0;if(!0===this.hiddenRowObj.init)this.lastDisplayedRow=t,this.lastIndex=t,s=h.offsetHeight,a.D.isIE(9)&&(s=h.getBoundingClientRect().height),this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d);else{var c="all"==this.options.visibleRowNum?i:c=parseInt(this.options.visibleRowNum,10);this.options.initFixedHeightByRowNum>-1&&this.hasSubtotal&&this.drawedSubtotal&&(c-=this.drawedSubtotal.drawedRowLength);for(var u=t+1;u+e<i&&u<c;u++)this.drawRowData(u,u+e),t++;for(u=this.lastDisplayedRow+1;u<=t;u++)this._setRowDisplay(u,"");this.applyStyleOptions(t);for(u=t+1;u<=this.lastDisplayedRow;u++)this._setRowDisplay(u,"none");this.lastDisplayedRow=t,this.lastIndex=t,s=h.offsetHeight,a.D.isIE(9)&&(s=h.getBoundingClientRect().height),this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d)}this.options.initFixedHeightByRowNum>-1&&i>this.options.initFixedHeightByRowNum||!(s<this.defaultDataLayerHeight)||!0===this.options.isItemTable||this._dynamicVisibleRowNum>0||(s=this.defaultDataLayerHeight);var p=0;""!==this.options.visibleRowNum&&this.options.groupbyZone&&this.groupbyZoneStatus.groupbyZoneRender&&(p=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight,this.options.groupbyFilterBox&&(p+=this.groupbyZoneStatus.groupbyFilterBoxRender.offsetHeight));var g=this.getSize("height"),m=s+l+d+p,f="native"!==this.options.drawType;if(this.options.visibleRowNumFix){var b=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(!isNaN(b)){var y=this.getElementById(this.id+"_head_table").offsetHeight;m<this.oneRowHeight*b+y+l+d+1&&(f=!1)}}if((i>0||"all"==this.options.visibleRowNum)&&g!=m&&(f&&this.setSize(null,m),null!=this.lastTopRowIndex)){var v=this._getScrollRowIndex(this.lastTopRowIndex);v!==this._getScrollMaxRowIndex()&&(o.skipResize=!1,o.restRowCnt=v,this.lastTopRowIndex=null)}if(this.options.autoFit&&this._setAutoFit(),this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight,clientWidth:this.render.clientWidth},this.dataLayerHeight=h.parentNode.offsetHeight,this.setScrollYHeight(o),null==this.lastTopRowIndex){var w=this._getVisibleRowIndex(this._getScrollMaxRowIndex()),S=this._getVisibleLastIndex(this.lastIndex+1);this.rowIndex===w&&this.rowIndex+S===i&&(this.lastTopRowIndex=this.rowIndex)}return t}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.adjustInitFixedByRowNum=function(t){try{return this.adjustVisibleRowNum(t)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.adjustDefault=function(t){try{return""!==this.options.visibleRowNum||(this.adjustDraw_keepTop?this.adjustDraw_keepTop=null:this.setScrollYHeight({skipResize:!0})),t
}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.drawBottomData=function(t){if(!(this.rowIndex<0||0==this.rowIndex&&t<=this.lastIndex||this.rowIndex>=0&&this.rowIndex+this.lastIndex==t||isNaN(Number(t)))){var e=this.getDataLength();t>=e&&(t=e-1),this.subtotalHidden();for(var i=0;i<=this.lastDisplayedRow;i++)this._setRowDisplay(i,"none");var o=t+1-this.drawedRowLength;o<0&&(o=0);var s=(e<this.drawedRowLength?e:this.drawedRowLength)-1;for(i=0;i<=s;i++)this.drawRowData(i,i+o),this._setRowDisplay(i,"");var r=t-o,n=this.dataRowList[(t-o+1)*this.oneRowLength-1];if(this.hasSubtotal&&this.drawedSubtotal.length>0)for(i=0;i<this.drawedSubtotal.length;i++){var l=this.drawedSubtotal[i];if(l.rowIndex==t){n=l[l.length-1];break}}var h=n.offsetTop+n.offsetHeight,d=this.dataLayerHeight;if(h<=d){this.rowIndex=o,this.lastIndex=this.cutGridBottom(s);for(i=this.rowIndex;i<=this.rowIndex+this.lastIndex;i++)this.applyRowStyleOptions(i);this.setScrollYHeight({noDraw:!0})}else{this.subtotalHidden({startRowIndex:t+1});for(i=r+1;i<=s;i++)this._setRowDisplay(i,"none");var c=o-(this.hasSubtotal?.5:0),u=0,p=0;if(this.hasSubtotal)for(var g in this.subtotalTableList)p+=this.subtotalTableList[g].rows.length;for(;c<e;){if(this.hasSubtotal){for(i=0;i<this.drawedSubtotal.length;i++)if(this.drawedSubtotal[i].rowIndex==c-.5)for(var m=0;m<this.drawedSubtotal[i].length;m++)h-=this.drawedSubtotal[i][m].offsetHeight;if(c+=.5,h<=d){this.subtotalHidden({endRowIndex:c-1});break}u+=p}for(i=0;i<this.oneRowLength;i++)h-=this.dataRowList[this.oneRowLength*(c-o)+i].offsetHeight;if(u+=this.oneRowLength,c+=this.hasSubtotal?.5:1,h<=d){if(this.hasSubtotal){c+=.5;for(i=0;i<this.drawedSubtotal.length;i++)if(this.drawedSubtotal[i].rowIndex==c-1){c-=.5;break}}break}}var f=[],b=this.getElementById(this.id+"_body_tbody");for(i=0;i<u;i++){var y=b.removeChild(b.rows[0]);y.style.cssText="display:none",f.push(y)}for(i=p;i<f.length;i++)b.appendChild(f[i]);for(i=0;i<p;i++)b.appendChild(f[i]);for(var g in this.dataRowList=[],this.all_data_td_list=[],this.data_num_td_list=[],this.data_status_td_list=[],this.data_td_list=[],this.subtotalRowHash)this.subtotalRowHash[g]=[];var v=a.D.getDataPrefix("targetcolumnid"),w=0;for(i=0;i<p;i++){g=(C=b.rows[w++]).getAttribute(v);this.subtotalRowHash[g].push(C)}for(i=0;i<this.drawedRowLength;i++){var S=[];for(m=0;m<this.oneRowLength;m++)S.push(b.rows[w++]);this.addBodyRow2(i,S);for(m=0;m<p;m++){var C;g=(C=b.rows[w++]).getAttribute(v);this.subtotalRowHash[g].push(C)}}this.hideDataLayer&&(this.hideDataLayer.style.display="none"),this.rowIndex=parseInt(c+.5,10),this.lastIndex=s=t-this.rowIndex,t>=e-1&&(this.lastTopRowIndex=c);for(i=0;i<=s;i++)this.setEvenOddBackground(i,this.rowIndex+i);for(i=t;i>=c;i--)this.applyRowStyleOptions(i);if(s+1<this.drawedRowLength){var _=this._getVisibleLastIndex(s+1);this._setRowDisplay(_,""),this.setEvenOddBackground(_,this.rowIndex+_),this.rowIndex--,this.applyRowStyleOptions(this.rowIndex+_),this.rowIndex++,this._setRowDisplay(s+1,"none")}this.setScrollYHeight({noDraw:!0}),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}}},b.prototype.cutGridBottom=function(t,e){try{if("native"===this.options.drawType)return;var i=this.rowIndex,o=this.dataLayerHeight,s=this.getElementById(this.id+"_head_table"),n=this.getElementById(this.id+"_body_tbody"),l=WebSquare.style.getStyle(s,"border-top-width");l="thin"==l?a.D.isIE(6)||a.D.isIE(7)?2:1:"medium"==l?a.D.isIE(6)||a.D.isIE(7)?4:3:"thick"==l?a.D.isIE(6)||a.D.isIE(7)||a.D.isOpera()?6:5:parseInt(l,10);var h=parseInt(l/2,10)-s.offsetTop;if(n.getBoundingClientRect){var d=n.getBoundingClientRect(),c=d.bottom-d.top;h+=c-parseInt(c,10)>0?1:0}for(var u=o-h,p=this.getElementById(this.id+"_body_tbody").childNodes,g=(t=-1,!0),m=this.getDataLength(),f=this.oneRowLength*m-1,b=i*this.oneRowLength,y=this.hiddenCellObj.length>0,v={row:[],cnt:0},w=0;w<p.length;w++){var S=p[w],C=!1,_=!1;if(0!==S.offsetHeight){v.row[w]="visible",v.cnt++,
this.hasClass(S,"grid_body_row")?(g&&b+t<f?t++:(S.style.display="none",this.addClass(S,"w2grid_hidedRow")),C=!0):S.getAttribute("data-subtotal")&&(g||this._subtotalHidden([S]),_=!0);var x=S.offsetTop+S.offsetHeight-u;if(g&&x>0){if(g=!1,C){var I=t%this.oneRowLength;if(y){var T=this.oneRowHeight/this.oneRowLength;I=Math.floor(x/T)}for(var k=0;k<=I&&w>=k;k++){var D=p[w-k];D.style.display="none",this.addClass(D,"w2grid_hidedRow"),t--}}_&&this._subtotalHidden([S])}}else v.row[w]="hidden"}if(v.cnt-=t+1,y){var L=-1,W=-1;for(w=0;w<v.row.length&&W<t;w+=this.oneRowLength){var A=!1;for(k=0;k<this.oneRowLength;k++)"visible"===v.row[w+k]&&(!1===A&&(L++,A=!0),W++)}t=L}else if(t=Math.floor(t/this.oneRowLength),!this.senseReaderMode){if(!0!==this.hiddenRowObj.init)for(w=t+1;w<=this.drawedRowLength;w++)this._setRowDisplay(w,"none");this.lastDisplayedRow=t}var M=this.options.showLastRow&&!this.hasSubtotal,E=!(1==this.options.senseReader&&"all"!==this.options.visibleRowNum);if(M&&(!this.senseReaderMode||E)){m=this.getDataLength();var q=y?Math.floor(t/this.oneRowLength):t,R=this._getVisibleRowIndex(this._getScrollRowIndex(this.rowIndex)+q+1);if(m>0){for(;!this._getRowVisible(R)&&R<m;)R++;R<m&&this._getRowVisible(R)&&(this._setRowDisplay(R-this.rowIndex,""),this.lazyDrawRowData(R-this.rowIndex,R))}}this.lastIndex=t,!0===this.hiddenRowObj.init&&(this.lastDisplayedRow=t);var N=t;if(e&&!0===e.extraRowByCellHidden){var F=0;for(w=0;w<v.row.length&&v.cnt>0;w+=this.oneRowLength)for(A=!1,k=0;k<this.oneRowLength;k++)"visible"===v.row[w+k]&&(!1===A&&(F++,A=!0),v.cnt--);N=F}return N}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.getLastIndex=function(t){try{var e=this.dataLayerHeight;if(t<0)return this.lastDisplayedRow=-1,-1;for(;;){var i=this.dataRowList[(t+1)*this.oneRowLength-1];if(!(t>0&&i.offsetTop+i.offsetHeight>e))break;t--}return t}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.lazyDrawRowData=function(t,e){try{for(var i=0;i<this.colIndexInfo.body.invisibleTds.length;i++){var o=this.colIndexInfo.body.invisibleTds[i]-this.defaultColCnt,s=this._getColumnMoveIndex(o);s>=0&&this.drawCellData(t,e,s,!0)}}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.fastDrawRowData=function(t,e,i){try{var o=this.dataList.getRealRowIndex(this.rowIndex+t),s=this.all_data_td_list[t*this.realRowDataLength],a=0;if("number"==typeof o){if((this.groupbyStatus.grouped||this.clearGrouping)&&this.defaultColCnt>0)for(var n=s,l=!0,h=0;h<this.defaultColCnt;h++){var d=this.colIndexes.bodyColInfo.colSpanArr[h]||1;n.setAttribute("colSpan",d),n.style.display="",n.innerText="",n.textContent="",n.className.match("w2grid_groupby")&&(n.className=s.className.split(" ").splice(0,1),this.options.rowNumVisible&&l?(n.className+=" gridBodyDefault_rowNumber",l=!1):n.className+=" gridBodyDefault_rowStatus"),n=n.nextSibling}if(this.options.rowMerge){var c={rowMergeStartPoint:[],rowMergeSameDataLength:[]},u=this.getRowData(e),p=!1,g=0;for(h=0;h<u.length;h++)u[h]==u[h+1]?(p||c.rowMergeStartPoint.push(h),g++,p=!0):(p&&(g++,c.rowMergeSameDataLength.push(g)),p=!1,g=0)}this._drawRowNumData(t,e,i),this._drawRowStatus(t,e,i);var m=this.colIndexInfo.body.visibleTds,f=m.length;i&&!0===i.refreshColumn&&(f=this.oneRowDataLength);for(h=0;h<f;h++){var b;if(i&&!0===i.refreshColumn)b=h;else{var y=m[h]-this.defaultColCnt;b=this._getColumnMoveIndex(y)}if(b>=0)if(this.options.rowMerge){d=null;for(var v=0;v<c.rowMergeStartPoint.length;v++)b==c.rowMergeStartPoint[v]?d=c.rowMergeSameDataLength[v]:c.rowMergeStartPoint[v]<b&&b<c.rowMergeStartPoint[v]+c.rowMergeSameDataLength[v]&&(d=-1);this.drawCellData(t,e,b,null,d,i)}else this.drawCellData(t,e,b,null,null,i)}i&&!0===i.skipSubtotal||(a=this.drawSubtotalRow(t+1,e))}else"object"==typeof o&&this.drawGroupData(s,o,t);return a}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.clearGroupedRow=function(t,e){try{if(this.defaultColCnt>0)for(var i=this.all_data_td_list[t*this.realRowDataLength],o=i,s=!0,a=0;a<this.defaultColCnt;a++){
var n=this.colIndexes.bodyColInfo.colSpanArr[a]||1;o.setAttribute("colSpan",n),o.style.display="",o.innerText="",o.textContent="",o.className.match("w2grid_groupby")&&(o.className=i.className.split(" ").splice(0,1),this.options.rowNumVisible&&s?(o.className+=" gridBodyDefault_rowNumber",s=!1):o.className+=" gridBodyDefault_rowStatus"),o=o.nextSibling}for(a=0;a<this.oneRowDataLength;a++){var l=a,h=this._getColumnMoveIndex(l);h>=0&&this.drawCellData(t,e,h)}this.drawSubtotalRow(t+1,e)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.drawRowData=function(t,e,i){try{var o=this.dataList.getRealRowIndex(this.rowIndex+t),s=0;if(null==o)return s;var n=a.D.getDataPrefix("colMerged"),l=this.all_data_td_list[t*this.realRowDataLength];if("number"==typeof o){this._drawRowNumData(t,e),this._drawRowStatus(t,e);for(var h=0;h<this.oneRowDataLength;h++){var d=h,c=this.getCellInfo(d);if(this.drawCellData(t,e,d),c&&c.options.colMerge&&!this.groupbyStatus.grouped)for(var u=this._dataList.getColumnIndex(this.getColumnID(d)),p=this._dataList.dataArr[e*this._dataList.oneRowDataLength+u],g=0;g<=this.maxRowLength-t;g++){var m=this.data_td_list[(t+g)*this.oneRowDataLength+d];if(m){var f=p==this.dataList.getCellData(t+g+1,d)?"1":"0";m.setAttribute(n,f),this.drawCellData(t+g,e+g,d)}}}i&&!0===i.skipSubtotal||(s=this.drawSubtotalRow(t+1,e))}else this.drawGroupData(l,o,t);return s}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.hideNochangeDataLayer=function(t){if(null==this.hideDataLayer){this.hideDataLayer=document.createElement("div"),this.hideDataLayer.className="w2grid_fastScroll_layer";var e=document.createElement("div");e.innerHTML=this.options.scrollMsg,e.className="w2grid_fastScroll_msg",this.hideDataLayer.appendChild(e),this.getElementById(this.id+"_dataLayer").appendChild(this.hideDataLayer)}var i=this.all_data_td_list[(t-1)*this.realRowDataLength],o=i.offsetHeight;0!=o?(this.hideDataLayer.style.display="block",this.hideDataLayer.style.top=i.offsetTop+o+1+"px"):this.hideDataLayer.style.display="none"},b.prototype.setEvenOddBackground=function(t,e){if(this.options.oddEvenColorDisplay){var i=this.data_td_list[t*this.oneRowDataLength],o=null;if(i){var s=a.D.getDataPrefix("trIndex");o=i.parentNode;do{o.style.backgroundColor=e%2==1?this.options.evenRowBackgroundColor:this.options.oddRowBackgroundColor,o=a.D.next(o)}while(null!=o&&"0"!=o.getAttribute(s))}}},b.prototype._drawRowNumData=function(t,e,i){if(this.options.rowNumVisible){var o=this.data_num_td_list[t],s="";s=o&&null!=o.textContent?"textContent":o&&null!=o.innerText?"innerText":"innerHTML",this.rowNumArr?"number"==typeof this.rowNumArr[e]&&(o[s]=1+this.rowNumArr[e]):o&&(o[s]=1+e+this.startRowNumber)}},b.prototype._drawRowStatus=function(t,e,i){if(this.options.rowStatusVisible){var o=this.data_status_td_list[t];if(o){var s=this._linkedDataList||this._dataList,r="";switch("linkedDataList"==s.initializeType?s.getRowStatusValue(e):this._dataList.options.depthColumn||this.groupbyStatus.grouped?s._getRowStatusValue(this.getRealRowIndex(e)):s.getRowStatusValue(e)){case 0:r="R";break;case 1:r="U";break;case 2:r="C";break;case 3:r="D";break;case 4:r="V"}if(void 0===o.imageName&&(o.imageName=""),o.imageName!=r||this.clearGrouping){switch(o.imageName){case"":case"R":break;case"C":this.removeClass(o,"w2grid_rowStatus_C");break;case"U":this.removeClass(o,"w2grid_rowStatus_U");break;case"D":this.removeClass(o,"w2grid_rowStatus_D");break;case"V":this.removeClass(o,"w2grid_rowStatus_V")}"R"!=r&&""!=r&&this.addClass(o,"w2grid_rowStatus_"+r),o.imageName=r}}}},b.prototype._drawCellStatus=function(t,e,i,o){if(this.options.cellStatusVisible){var s=this.data_td_list[i+t*this.oneRowDataLength];if(s){var r=this.getColumnID(i),a=this._linkedDataList||this._dataList,n="";switch("linkedDataList"==a.initializeType?a.getCellStatusValue(e,r):this._dataList.options.depthColumn||this.groupbyStatus.grouped?a._getCellStatusValue(this.getRealRowIndex(e),r):a.getCellStatusValue(e,r)){case 0:n="R";break;case 1:n="U"
;break;case 2:n="C";break;case 3:n="D";break;case 4:n="V"}if(void 0===s.imageName&&(s.imageName=""),s.imageName!=n||this.clearGrouping){var l="";switch(s.imageName){case"":case"R":break;case"C":case"U":case"D":case"V":l="w2grid_cellStatus_"+s.imageName+"_"+this.options.cellStatusIconPosition}l&&this.removeClass(s,l),"R"!=n&&""!=n&&this.addClass(s,"w2grid_cellStatus_"+n+"_"+this.options.cellStatusIconPosition),s.imageName=n}}}},b.prototype.drawCellData=function(t,e,i,o,s,n){try{o||null==this.editedCell||this.editedCell.options.colIndex+""!=i+""||this.editedCell.handleCancelEdit();var l=this.data_td_list[i+t*this.oneRowDataLength];if(l){var h=this.cellInfoHash[this.tdIdList[i]];if(this.groupbyStatus.grouped||this.clearGrouping){var d=this.colIndexes.bodyColInfo.colSpanArr[i+this.defaultColCnt]||1;l.setAttribute("colSpan",d),l.style.display="",l.style.textAlign=h.options.textAlign}if(this.options.rowMerge)if(null==s)l.setAttribute("colSpan",""),l.style.display="",l.style.textAlign="";else if(s>0){d=s;l.setAttribute("colSpan",d),l.style.display="",l.style.textAlign=h.options.textAlign}else-1==s&&(l.style.display="none");!h.options.embeddedInput&&this.groupbyStatus.grouped&&(l.innerText="",l.textContent=""),(this.groupbyStatus.grouped||this.clearGrouping)&&this.hasClass(l,"w2grid_groupby")&&(l.className="gridBodyDefault");var c=this.aria_labelledby[i];if(c){var u=t+e+1;l.setAttribute("aria-labelledby",c+" r"+u)}if(h.options.headers&&this.options.applyScopeHeaders){var p=this.scope_id?this.scope_id+"_":"",g=a.D.getDataPrefix("headers");l.setAttribute(g,p+h.options.headers)}if(this.isColMerge&&h.options.colMerge&&!this.groupbyStatus.grouped?this.setColMergeCellData(t,e,i,n):this.setInnerHTML(l,e,i,n),this.options.cellStatusVisible){var m,f=this.getColumnID(i),b=this._linkedDataList||this._dataList;m="linkedDataList"==b.initializeType?b.getCellStatusValue(e,f):this._dataList.options.depthColumn||this.groupbyStatus.grouped?b._getCellStatusValue(this.getRealRowIndex(e),f):b.getCellStatusValue(e,f);var y="";switch(m){case 0:y="R";break;case 1:y="U";break;case 2:y="C";break;case 3:y="D";break;case 4:y="V"}if(void 0===l.imageName&&(l.imageName=""),l.imageName!=y||this.clearGrouping){var v="";switch(l.imageName){case"":case"R":break;case"C":case"U":case"D":case"V":v="w2grid_cellStatus_"+l.imageName+"_"+this.options.cellStatusIconPosition}v&&this.removeClass(l,v),"R"!=y&&""!=y&&this.addClass(l,"w2grid_cellStatus_"+y+"_"+this.options.cellStatusIconPosition),l.imageName=y}}}}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.setColMergeCellData=function(t,e,i,o){if(this.isColMergeAnd)return this.setColMergeAndCellData(t,e,i,o);var s=this.data_td_list[i+t*this.oneRowDataLength],r=this.getHasSubtotalCount(e);if(0==t)return 0!=r&&(s.style.borderBottomWidth="1px"),void this.setInnerHTML(s,e,i,o);var n=this.getColumnID(i),l=this.dataList._getCellData(e-1,n),h=this.data_td_list[i+(t-1)*this.oneRowDataLength],d=this.upperGroupingTest(e,i,t);if(l==this.dataList._getCellData(e,n)&&d){h.style.borderBottomWidth="0px",s.style.borderTopWidth="0px",s.style.borderBottomWidth="0px",s.innerHTML="";var c=a.D.getDataPrefix("viewType"),u=a.D.getDataPrefix("inputType");if("icon"==s.getAttribute(c)){var p=s.getAttribute(u);this.removeClass(s,this.options.bodyTdClass+"_"+p)}if(this.options.senseReader&&(0==r&&t!=this.lastDisplayedRow&&t!=this.lastIndex||(s.style.borderBottomWidth="1px"),t-1!=this.lastDisplayedRow&&t-1!=this.lastIndex||(h.style.borderBottomWidth="1px")),0!=r&&(s.style.borderBottomWidth="1px"),null!=h)return this.applyCellStyleOptions(e,i,!1),"mergeCellBackgroundColor"}else{var g=s.style.borderTopWidth;this.getCellInfo(i).options.colMergeEdit&&"0px"==g&&!this.groupbyStatus.grouped&&(g="1px"),s.style.borderTopWidth="0px",this.setInnerHTML(s,e,i,o),s.style.borderTopWidth=g}},b.prototype.setColMergeAndCellData=function(t,e,i,o){var s=this.data_td_list[i+t*this.oneRowDataLength],r=this.getHasSubtotalCount(e)
;if(0==t)return 0!=r&&(s.style.borderBottomWidth="1px"),void this.setInnerHTML(s,e,i,o);this.colMergeObj?this.colMergeObj.displayRowIndex!=e&&(this.colMergeObj={displayRowIndex:e,colArr:[]}):this.colMergeObj={displayRowIndex:e,colArr:[]};var a=this.getColumnID(i);if(null==this.colMergeObj.colArr[i]){var n=this.dataList._getCellData(e-1,a),l=this.dataList._getCellData(e,a);if(this.colMergeObj.colArr[i]=n==l,this.colMergeObj.colArr[i])for(var h=0;h<this.oneRowDataLength;h++){if(null==this.colMergeObj.colArr[h])if(this.getCellInfo(h).options.colMerge){var d=this.getColumnID(h),c=this.dataList._getCellData(e-1,d),u=this.dataList._getCellData(e,d);this.colMergeObj.colArr[h]=c==u}else this.colMergeObj.colArr[h]=!0}}var p=!0;for(h=0;h<this.colMergeObj.colArr.length;h++)if(!this.colMergeObj.colArr[h]){p=!1;break}var g=this.data_td_list[i+(t-1)*this.oneRowDataLength];if(p)g.style.borderBottomWidth="0px",s.style.borderTopWidth="0px",s.style.borderBottomWidth="0px",s.innerHTML="",this.options.senseReader&&(0==r&&t!=this.lastDisplayedRow&&t!=this.lastIndex||(s.style.borderBottomWidth="1px"),t-1!=this.lastDisplayedRow&&t-1!=this.lastIndex||(g.style.borderBottomWidth="1px")),0!=r&&(s.style.borderBottomWidth="1px");else{var m=s.style.borderTopWidth;this.getCellInfo(i).options.colMergeEdit&&"0px"==m&&(m="1px"),s.style.borderTopWidth="0px",this.setInnerHTML(s,e,i,o),s.style.borderTopWidth=m}},b.prototype.drawColMergeCellData=function(t,e,i,o){if(this.isColMergeAnd)return this.drawColMergeAndCellData(t,e,i,o);var s=this.getColumnID(i),r=this.data_td_list[i+t*this.oneRowDataLength];if(r.style.borderBottomWidth="0px",0!=t||o){var n=this.getHasSubtotalCount(e);0==n&&(r.style.borderBottomWidth="0px");var l=this.dataList._getCellData(e-1,s),h=this.data_td_list[i+(t-1)*this.oneRowDataLength];r.style.borderTopWidth="0px";var d=this.upperGroupingTest(e,i,t);if(l==this.dataList._getCellData(e,i)&&d){null!=h&&(h.style.borderBottomWidth="0px");var c=a.D.getDataPrefix("colMerged"),u=a.D.getDataPrefix("viewType"),p=a.D.getDataPrefix("inputType");if(r.style.borderTopWidth="0px",r.style.borderBottomWidth="0px",r.setAttribute(c,"1"),r.innerHTML="",0!=n&&(r.style.borderBottomWidth="1px"),"icon"===r.getAttribute(u)){var g=r.getAttribute(p);this.removeClass(r,this.options.bodyTdClass+"_"+g)}if(null!=h&&this.options.oddEvenColorDisplay&&!this.options.oddEvenColorMerged)return"mergeCellBackgroundColor"}else r.style.borderTopWidth="1px"}},b.prototype.drawColMergeAndCellData=function(t,e,i,o){var s=this.getColumnID(i),r=this.data_td_list[i+t*this.oneRowDataLength];if(r.style.borderBottomWidth="0px",0!=t||o){var n=this.getHasSubtotalCount(e);if(0==n&&(r.style.borderBottomWidth="0px"),this.colMergeObj?this.colMergeObj.displayRowIndex!=e&&(this.colMergeObj={displayRowIndex:e,colArr:[]}):this.colMergeObj={displayRowIndex:e,colArr:[]},null==this.colMergeObj.colArr[i]){var l=this.dataList._getCellData(e-1,s),h=this.dataList._getCellData(e,s);if(this.colMergeObj.colArr[i]=l==h,this.colMergeObj.colArr[i])for(var d=0;d<this.oneRowDataLength;d++){if(null==this.colMergeObj.colArr[d])if(this.getCellInfo(d).options.colMerge){var c=this.getColumnID(d),u=this.dataList._getCellData(e-1,c),p=this.dataList._getCellData(e,c);this.colMergeObj.colArr[d]=u==p}else this.colMergeObj.colArr[d]=!0}}var g=!0;for(d=0;d<this.colMergeObj.colArr.length;d++)if(!this.colMergeObj.colArr[d]){g=!1;break}if(g){var m=this.data_td_list[i+(t-1)*this.oneRowDataLength];null!=m&&(m.style.borderBottomWidth="0px");var f=a.D.getDataPrefix("colMerged");if(r.style.borderTopWidth="0px",r.style.borderBottomWidth="0px",r.setAttribute(f,"1"),r.innerHTML="",0!=n&&(r.style.borderBottomWidth="1px"),null!=m&&this.options.oddEvenColorDisplay&&!this.options.oddEvenColorMerged)return"mergeCellBackgroundColor"}else r.style.borderTopWidth="1px"}},b.prototype.upperGroupingTest=function(t,e,i){var o=this.getCellInfo(e),s=o.options.upperColumn;if(this.hasSubtotal&&this.hasUpperSubtotalRow(t))return!1;if(""!=s){if(i){
var r=a.D.getDataPrefix("colMerged"),n=this.getColumnIndex(s),l=this.data_td_list[n+i*this.oneRowDataLength],h=this.getCellInfo(n);if(l&&""==l.style.width&&(""==h.options.upperColumn||h.options.upperColumn&&"1"!=l.getAttribute(r))&&"1"!=l.getAttribute(r)&&1==h.options.colMerge&&!this.groupbyStatus.grouped)return!1}if(this.dataList._getCellData(t,s)!=this.dataList._getCellData(t-1,s))return!1;var d=this.getCellInfo(s);if(d.options.upperColumn&&""!=d.options.upperColumn&&d.options.upperColumn!=o.id)return this.upperGroupingTest(t,d.options.upperColumn,i)}else{if(this.dataList._getCellData(t,e)!=this.dataList._getCellData(t-1,e))return!1}return!0},b.prototype.setDataTable=function(){try{var t=this.getElementById(this.id+"_head_table"),e=this.getElementById(this.id+"_body_table"),i=this.getElementById(this.id+"_body_tbody");if(this.dataLayerHeight=e.parentNode.offsetHeight,""===this.options.visibleRowNum&&0==this.dataLayerHeight)return this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),void this.delayedDraw({rowIndex:-1==this.rowIndex?0:this.rowIndex});this.defaultDataLayerHeight||(this.isIE6or7||a.D.isOpera()?this.defaultDataLayerHeight=this.getElementById(this.id+"_main_div").offsetHeight:this.defaultDataLayerHeight=this.dataLayerHeight);var o=0;if(this.options.senseReader&&"all"===this.options.visibleRowNum)o=this.getDataLength();else if(""===this.options.visibleRowNum)if(this.options.initFixedHeightByRowNum>-1)o=parseInt(this.options.initFixedHeightByRowNum,10)+1;else{var s=this.oneRowHeight;this.hiddenCellObj.length>0&&(s=this.oneRowHeight/this.oneRowLength),o=parseInt((this.dataLayerHeight-t.offsetHeight)/s)+1}else o="all"===this.options.visibleRowNum?this.getDataLength():parseInt(this.options.visibleRowNum,10);if(0==this.drawedRowLength&&(this.tdCellClassArr=new Array(o*this.oneRowLength)),o>this.drawedRowLength){var n=this.drawedRowLength;this.drawedRowLength=o;var l=[];0==n&&this.hasSubtotal&&(l=l.concat(this.createSubtotalRows(-1)));for(var h=n;h<this.drawedRowLength;h++){for(var d=[],c=0;c<this.oneRowLength;c++){var u=this.tempTr.rows[c].cloneNode(!0);d[c]=u,l.push(u),this.tdCellClassArr.push(null)}this.addBodyRow(h,d),this.hasSubtotal&&(l=l.concat(this.createSubtotalRows(h)))}0==this.drawedRowLength?e.style.borderWidth="0px":e.style.borderWidth="";for(c=0;c<l.length;c++)i.appendChild(l[c]);for(h=n+this.hiddenRowObj.extraRow;h<this.drawedRowLength+this.hiddenRowObj.extraRow;h++)this._setRowDisplay(h,"none")}}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.applyStyleOptions=function(t){try{for(var e=this.rowIndex>=0?this.rowIndex:0,i=0;i<=t+1+this.hiddenRowObj.extraRow&&i<this.drawedRowLength+this.hiddenRowObj.extraRow;i++)"object"!=typeof this.dataList.getRealRowIndex(i+e)&&(this.options.fixedRow>0&&i<=this.options.fixedRow-1||this.options.lastFixedRow>0&&i>t-this.options.lastFixedRow?this.applyRowStyleOptions(i):(!this.hiddenRowObj.length>0||this._getRowVisible(i+e))&&this.applyRowStyleOptions(i+e))}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype._setCheckboxHead=function(t){try{if(t)if(1==this.htmlInfo.head.rowArr.length)this.checkHeader(this.bodyToHeaderRelation[t]);else for(var e in this.headerToBodyRelation)this.headerToBodyRelation[e]==t&&this.checkHeader(e);else for(var e in this.headerInfoHash)this.checkHeader(e)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.applyColumnStyleOptions=function(t){try{t=this.getColumnIndex(t);for(var e=0;e<this.drawedRowLength;e++)this.applyCellStyleOptions(e+this.rowIndex,t)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.applyRowStyleOptions=function(t,e){try{var i=this._getTrIndex(t);e&&(i=this._getTrIndex(this.getDisplayRowIndex(t)));for(var o=0,s=this.rowIndex;s<t&&this.hiddenRowObj.length>0;s++)this._getRowVisible(s)||o++;if(i<0||i-o>=this.drawedRowLength)return;var a=this.dataRowList[this.oneRowLength*i];if(!a&&!e)return;if(a&&"none"==a.style.display&&!e)return
;if(this.options.fixedRow>0&&i==this.options.fixedRow-1){var n=this.dataRowList[this.oneRowLength*(i+1)-1];this.addClass(n,"w2grid_fixedRow")}if(this.options.lastFixedRow>0&&i==this.lastIndex-this.options.lastFixedRow+1){n=this.dataRowList[this.oneRowLength*(i-1)];this.addClass(n,"w2grid_lastFixedRow")}if(this.options.lazyDrawHiddenColumn){var l=this.colIndexInfo.body.visibleTds,h=i*this.oneRowDataLength;for(s=this.defaultColCnt;s<l.length;s++){var d=l[s]-this.defaultColCnt;this.all_data_td_list[h+d]&&(e?this.applyCellStyleOptions(this.getDisplayRowIndex(t),d):this.applyCellStyleOptions(t,d))}}else for(s=0;s<this.oneRowDataLength;s++){h=i*this.oneRowDataLength;this.data_td_list[h+s]&&(e?this.applyCellStyleOptions(this.getDisplayRowIndex(t),s):this.applyCellStyleOptions(t,s))}t===this.getRowCount()-1?this.__addClass(a,"w2grid_lastRow"):this.hasClass(a,"w2grid_lastRow")&&this.__removeClass(a,"w2grid_lastRow")}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.setAutoResizeEmbeddedInput=function(){try{for(var t=this.data_td_list,e="",i=null,o=null,s=0,n=0,l=!1,h=a.D.getDataPrefix("inputType"),d=a.D.getDataPrefix("colindex"),c=a.D.getDataPrefix("col_id"),u=0;u<t.length;u++)if("text"==t[u].getAttribute(h)||"secret"==t[u].getAttribute(h)){e=t[u].getAttribute(c),o=this.cellInfoHash[e];var p=!1;if((this.dom[o.mainGridId+o.id]||this.dom[t[u].getAttribute("id")+"_"+t[u].getAttribute(h)])&&(p=!0),1==o.options.embeddedInput&&p){null==(i=this.getInput(o,t[u])).render.parentNode&&(t[u].innerHTML="",t[u].appendChild(i.render)),"none"==t[u].parentNode.style.display&&(t[u].parentNode.style.display="",l=!0);var g=parseInt(t[u].getAttribute(d),10);this.embeddedStyleObj||(this.embeddedStyleObj={top:parseInt(WebSquare.style.getStyle(t[u],"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t[u],"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t[u],"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t[u],"padding-right"),10),inputTop:parseInt(WebSquare.style.getStyle(i.render,"padding-top"),10),inputBottom:parseInt(WebSquare.style.getStyle(i.render,"padding-bottom"),10),inputLeft:parseInt(WebSquare.style.getStyle(i.render,"padding-left"),10),inputRight:parseInt(WebSquare.style.getStyle(i.render,"padding-right"),10)});var m=parseInt(WebSquare.style.getStyle(i.render,"border-top-width"),10),f=parseInt(WebSquare.style.getStyle(i.render,"border-bottom-width"),10),b=parseInt(WebSquare.style.getStyle(i.render,"border-left-width"),10),y=parseInt(WebSquare.style.getStyle(i.render,"border-right-width"),10);s=t[u].offsetHeight-parseInt(WebSquare.style.getStyle(t[u],"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t[u],"border-bottom-width"),10),s-=this.embeddedStyleObj.top+this.embeddedStyleObj.bottom,s-=m+f,this.embeddedWidthObj[g]&&!this.embeddedWidthObj[g].isChanged||(this.embeddedWidthObj[g]={isChanged:!1,width:t[u].clientWidth}),n=this.embeddedWidthObj[g].width,n-=this.embeddedStyleObj.left+this.embeddedStyleObj.right,n-=b+y,n-=this.embeddedStyleObj.inputLeft+this.embeddedStyleObj.inputRight,a.D.isOpera()&&(s+=2),l?t[u].parentNode.style.display="none":a.D.isIE("6 7")&&(s-=2),i.setSize(n-2,s-(this.embeddedStyleObj.inputTop+this.embeddedStyleObj.inputBottom)),i.setStyle("lineHeight",s+"px")}}else if("calendar"==t[u].getAttribute(h)){e=t[u].getAttribute(c),o=this.cellInfoHash[e];var v=null;1==o.options.embeddedInput&&(null==(v=this.getInput(o,t[u])).render.parentNode&&(t[u].innerHTML="",t[u].appendChild(v.render)),"none"==t[u].parentNode.style.display&&(t[u].parentNode.style.display="",l=!0)),s=t[u].offsetHeight-parseInt(WebSquare.style.getStyle(t[u],"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t[u],"border-bottom-width"),10),s-=this.embeddedCalendarStyleObj.top+this.embeddedCalendarStyleObj.bottom;g=parseInt(t[u].getAttribute(d),10);this.embeddedWidthObj[g]&&!this.embeddedWidthObj[g].isChanged||(this.embeddedWidthObj[g]={isChanged:!1,width:t[u].clientWidth}),n=this.embeddedWidthObj[g].width,
n-=this.embeddedCalendarStyleObj.left+this.embeddedCalendarStyleObj.right,l?t[u].parentNode.style.display="none":a.D.isIE("6 7")&&(s-=2),v.setSize(n-2,s)}}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.applyCellStyleOptions=function(t,e,i,o){try{var s=this._getTrIndex(t),n=this._getTdElem(t,e);if(n){var l,h,d,c=[],u=!1;if("number"==typeof e?(l=e,h=this.cellIdList[e]):(l=this.bodyIdColIndexMap[e],h=e),this._linkedDataList)d=this._linkedDataList.filteredRowIndexArr[t];else if(this.groupbyStatus.grouped){var p=!0;for(var g in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[g]){d=this._dataList.filteredRowIndexArr[t],p=!1;break}p&&(d=this.groupbyStatus.groupedRowIndexArr[t])}else d=this._dataList.filteredRowIndexArr[t];var m=this.cellInfoHash[h]||{options:{}};if("custom"==m.options.inputType&&(m=m.cellManagerHashByRowIndex[d]?m.cellManagerHashByRowIndex[d]:m),"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")&&"true"==m.options.hidden)return;null!=this.initStyleValueObj[l]&&c.push(this.initStyleValueObj[l].style),""!=m.options.textAlign&&c.push("text-align:"+m.options.textAlign),this.options.adjustAlign&&"left"==m.options.textAlign&&c.push("padding-left:"+this.options.adjustAlign+"px"),null!=this.defaultStyleValueObj[l]&&c.push(this.defaultStyleValueObj[l].style);var f=null,b=null,y=null,v=null,w=null,S=!1;(t<this.options.fixedRow||l<this.options.fixedColumn||l>=this.tdIdList.length-this.options.fixedRightColumn)&&(S=!0),null!=d?(f="number"==typeof d?this.rowStyleArr[d]:this.rowStyleArr[d.type+"_"+d.groupId],b="number"==typeof d?this.rowStyleFixedArr[d]:this.rowStyleFixedArr[d.type+"_"+d.groupId],y="number"==typeof d?this.rowStyleDataArr[d]:this.rowStyleDataArr[d.type+"_"+d.groupId],v="number"==typeof d?this.cellStyleArr[d*this.oneRowDataLength+l]:this.cellStyleArr[d.type+"_"+d.groupId+"_"+l],w=this.cellClassArr[d*this.oneRowDataLength+l]):w=this.cellClassArr[t*this.oneRowDataLength+l],null!=f&&c.push(this.rowStyleValueObj[f].style),null!=b&&S&&c.push(this.rowStyleFixedValueObj[b].style),null==y||S||c.push(this.rowStyleDataValueObj[y].style);var C=this.columnStyleValueObj[l],_=this.columnStyleFixedValueObj[l],x=this.columnStyleDataValueObj[l];if(null!=C&&c.push(this.columnStyleValueObj[l].style),null!=_&&S&&c.push(this.columnStyleFixedValueObj[l].style),null==x||S||c.push(this.columnStyleDataValueObj[l].style),null!=this.adaptiveColumnStyleValueObj[l]&&!0===this.checkRefreshAdaptive()&&c.push(this.adaptiveColumnStyleValueObj[l].style),null!=v&&c.push(this.cellStyleValueObj[v].style),f=="rowResizeStyle_"+t&&c.push(this.rowStyleValueObj[f].style),""!=this.options.readOnlyBackgroundColor&&"number"==typeof d)1==this.___getEditReadOnly(t,e)?(c.push(this.readOnlyTdStyle),n.readOnly=!0,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):(n.readOnly=!1,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",0));if(""!=this.options.readOnlyBackgroundImg||""!=this.options.readOnlyBackgroundImgCSS)1==this.___getEditReadOnly(t,e)?(c.push(this.readOnlyTdImg),this.options.readOnlyBackgroundImgCSS||(a.D.isIE(8)||a.D.isIE(6)||a.D.isIE(7))&&(c.push("filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', src='"+this.options.readOnlyBackgroundImg+"', sizingMethod='scale')\""),c.push("-ms-filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', src='"+this.options.readOnlyBackgroundImg+"', sizingMethod='scale')\"")),n.readOnly=!0,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):(n.readOnly=!1,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",0));n.disabled=!1,n.removeAttribute("disabled");var I=this.cellDisabledArr[d*this.oneRowDataLength+l],T=I;if(!0!==I&&!1!==I){
var k=m.options.disabled,D=this.rowDisabledArr[d],L=this.options.disabledPriority;!0!==D&&!1!==D&&(D=""),I="column"===L&&""!==k?k:"row"===L&&""!==D?D:k+""=="true"||D+""=="true"||k+""!="false"&&D+""!="false"&&(""!==this.options.disabled&&this.options.disabled)}!0!==I&&"true"!==I||(c.push(this.disabledTdStyle),this.disabledCellStyleObj&&this.disabledCellStyleObj[t+"_"+e]&&this.disabledCellStyleObj[t+"_"+e].style&&c.push(this.disabledCellStyleObj[t+"_"+e].style));var W=this.options.focusMode;if(o&&(W="cell"),!i&&"transparent"!=this.options.selectedRowColor&&("row"==W||"both"==W))for(var A=0;A<this.focusedCell.length;A++)if(t==this.focusedCell[A].focusedRowIndex&&!("row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&e<this.options.fixedColumn)){c.push("background-color:"+this.options.selectedRowColor),u=!0;break}if(!i&&"transparent"!=this.options.selectedCellColor&&("cell"==W||"both"==W))for(A=0;A<this.focusedCell.length;A++)if(t==this.focusedCell[A].focusedRowIndex&&e==this.focusedCell[A].focusedColIndex){c.push("background-color:"+this.options.selectedCellColor),u=!0;break}("none"!=n.style.display||this.hiddenCellObj.length>0)&&!0!==this.hiddenCellObj[t+"_"+e]||c.push("display:none");var M=!1;this.hiddenCellObj.length>0&&(!0===this.hiddenCellObj[t+"_"+e]&&"none"!==n.style.display||!0!==this.hiddenCellObj[t+"_"+e]&&"none"===n.style.display)&&(M=!0);var E=c.join(";"),q=a.D.getDataPrefix("style_bak"),R=a.D.getDataPrefix("colMerged"),N=a.D.getDataPrefix("or_bgColor"),F=n.style.borderBottomWidth;(E!=n.getAttribute(q)||this.groupbyStatus.grouped||M)&&(n.style.cssText=E);var O=this.cellStyleValueObj[v];if(O&&O["background-repeat"]?n.style.backgroundRepeat=O["background-repeat"]:O&&O["background-size"]?n.style.backgroundSize=O["background-size"]:O&&O["background-position"]&&(n.style.backgroundPosition=O["background-position"]),this.isColMerge&&m.options.colMerge&&!this.groupbyStatus.grouped){n.setAttribute(R,"0");var B=this.drawColMergeCellData(s,t,e);if(this.options.senseReader&&F&&-1!=F.indexOf("px")&&(n.style.borderBottomWidth=F),"mergeCellBackgroundColor"===B&&!u){var V,P=this.getCellStyleValue(t-1,h,"background-color",!0)||this.getColumnStyleValue(e,"background-color"),H=!0;n.readOnly||this.__getEditReadOnly(n,t)?(V=P,this.options.readOnlyBackgroundColor?V=this.options.readOnlyBackgroundColor:(m.options.readOnlyClass||this.options.readOnlyClass)&&(H=!1)):(V=""!=P?P:t%2?this.options.oddRowBackgroundColor:this.options.evenRowBackgroundColor,!this.options.disabledClass||!0!==I&&"true"!==I||(H=!1)),H&&(n.style.backgroundColor=V,this._setMergeCellBackground(t,h,V)),""!=m.options.readOnlyClass&&(this.__getEditReadOnly(n,t)?this.addClass(n,m.options.readOnlyClass):this.removeClass(n,m.options.readOnlyClass)),""!=this.options.readOnlyClass&&(this.__getEditReadOnly(n,t)?this.addClass(n,this.options.readOnlyClass):this.removeClass(n,this.options.readOnlyClass))}}if(n.setAttribute(q,E),n.setAttribute(N,n.style.backgroundColor),this.cellReadOnlyArr[d*this.oneRowDataLength+e]?(n.setAttribute("readonly","true"),"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):!1===this.cellReadOnlyArr[d*this.oneRowDataLength+e]?(n.setAttribute("readonly","false"),"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",0)):n.removeAttribute("readonly"),null!=w){var j=s*this.oneRowDataLength+e;this.tdCellClassArr[j]&&this.tdCellClassArr[j]!=w&&this.removeClass(n,this.tdCellClassArr[j]),this.tdCellClassArr[j]=w,this.addClass(n,w)}else{j=s*this.oneRowDataLength+e;this.tdCellClassArr[j]&&(this.removeClass(n,this.tdCellClassArr[j]),this.tdCellClassArr[j]=void 0)}if(""!=m.options.disabledClass&&(!0===I||"true"===I?this.addClass(n,m.options.disabledClass):this.removeClass(n,m.options.disabledClass)),
!0!==T&&"true"!==T||(""!=this.options.disabledClass?this.addClass(n,this.options.disabledClass):this.removeClass(n,this.options.disabledClass)),""!=this.options.hiddenClass||""!=m.options.hiddenClass){var z=this.options.hiddenClass;""!=m.options.hiddenClass&&(z=m.options.hiddenClass);var G=this._getRealColIndex("body",m.options.col_id)+this.defaultColCnt;this.hiddenList[G]?this.addClass(n,z):this.removeClass(n,z)}}}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.dynamicMergeHTML=function(){try{for(var t in this.tdMergeInfo){var e=this.data_td_list[t];this.tdMergeInfo[t].orgColSpan>1?e.setAttribute("colSpan",this.tdMergeInfo[t].orgColSpan):e.removeAttribute("colSpan"),this.tdMergeInfo[t].orgRowSpan>1?e.setAttribute("rowSpan",this.tdMergeInfo[t].orgRowSpan):e.removeAttribute("rowSpan"),e.style.display=this.tdMergeInfo[t].display,delete this.tdMergeInfo[t]}var i=this.getRowCount(),o="native"===this.options.drawType?i:Math.min(this.lastIndex+2,i),s=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=!1;for(var l in this.cellMergeInfo){var h=l.split("_"),d=Number(h[0]),c=d;if(!(s&&(d=this.getDisplayRowIndex(d),isNaN(d)||d<0))){var u=Number(h[1]),p=d;this.rowIndex>=0&&(this.options.fixedRow>0&&this.options.fixedRow>d||this.options.lastFixedRow>0&&d>this.lastIndex-this.options.lastFixedRow||(p-=this.rowIndex));var g=this.cellMergeInfo[l].rowSpan,m=this.cellMergeInfo[l].colSpan;if(s){for(var f=g,b=0;b<f;b++)0==this.drilldown.statusArr[c+b]&&g--;g=Math.max(g,1)}var y=0;if(this.hiddenRowObj.length>0)for(b=this.rowIndex;b<d;b++)this._getRowVisible(b)||y++;if(!(p<0&&p+g<=0||p-y>=o||(p<this.options.fixedRow&&p+g>this.options.fixedRow&&(g=p+g-this.options.fixedRow-y,p=this.options.fixedRow),p<this.options.fixedRow&&d>=this.options.fixedRow))){var v=0,w=0;if(this.hiddenRowObj.length>0)for(b=0;b<g;b++)this._getRowVisible(p+b+this.rowIndex)||(w++,b===v&&v++);p+(g-=w)>o+y&&(g=o-p+y);var S=g,C=this.oneRowLength;for(b=0;b<S;b++){for(var _=!1,x=0;x<m;x++){t=(p+b)*this.oneRowDataLength+(u+x);if(null!=(e=this.data_td_list[t]))if(this.hiddenRowObj.length>0&&!this._getRowVisible(p+b+this.rowIndex))e.removeAttribute("colSpan"),e.removeAttribute("rowSpan"),_=!0;else if(this.tdMergeInfo[t]={orgColSpan:e.getAttribute("colSpan"),orgRowSpan:e.getAttribute("rowSpan"),display:e.style.display},b===v&&0===x){m>1?(e.setAttribute("colSpan",m),n=!0):e.removeAttribute("colSpan");var I=g*C;if(I>1)if(C>1){var T=parseInt(e.getAttribute("rowSpan"),10);!isNaN(T)&&T>1&&(e.setAttribute("rowSpan",I),n=!0)}else e.setAttribute("rowSpan",g),n=!0;else e.removeAttribute("rowSpan");e.style.display=""}else e.removeAttribute("colSpan"),e.removeAttribute("rowSpan"),e.style.display="none"}!0===_&&S++}}}}!0===n&&this.isWebKit&&a.D.setTimeout(this.redrawTable,{key:this.id+"_dynamicMergeHTML",delay:50,caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.createSubtotalRows=function(t){var e=[];for(var i in this.subtotalTableList){var o=this.subtotalRowHash[i];null==o&&(o=[]);for(var s=this.subtotalTableList[i],r=0;r<s.rows.length;r++){var a=s.rows[r].cloneNode(!0);if(a.style.display="none",this.options.rowNumStatusUniqueId)for(var n=a.getElementsByTagName("td"),l=0;l<this.defaultColCnt;l++){var h=n[l].getAttribute("id");"_headerRowNumber"!==h&&"_headerRowStatus"!==h||n[l].setAttribute("id",h+"_subtotal_"+t)}a.setAttribute("data-subtotal",i+"_"+r),o.push(a),e.push(a)}this.subtotalRowHash[i]=o}return e},b.prototype.addBodyRow=function(t,e){var i=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowNumber(\\s|$)"),o=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowStatus(\\s|$)"),s=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_data(\\s|$)"),r=0,n=0,l="grid_body_row";"native"===this.options.drawType&&(l+=" "+this.options.gridNativeClass);for(var h=a.D.getDataPrefix("tdIndex"),d=a.D.getDataPrefix("or_wd"),c=a.D.getDataPrefix("col_id"),u=a.D.getDataPrefix("width"),p=0;p<e.length;p++){this.dataRowList.push(e[p]),e[p].className=l
;for(var g=e[p].getElementsByTagName("td"),m=0;m<g.length;m++){var f=g[m],b=f.className;f.setAttribute(h,t*this.realRowDataLength+r),f.removeAttribute("title");var y=f.getAttribute(u);if(y&&(f.removeAttribute(u),f.setAttribute(d,y)),this.options.rowNumStatusUniqueId){var v=f.getAttribute("id");"_headerRowNumber"!==v&&"_headerRowStatus"!==v||f.setAttribute("id",v+"_bodyRow_"+t)}if(r++,this.all_data_td_list.push(f),i.test(b))this.data_num_td_list.push(f);else if(o.test(b))this.data_status_td_list.push(f);else if(!this.hasSubtotal||s.test(b)){this.data_td_list.push(f);var w=this.id+"_columnstyle_"+n+"_";this.addClass(f,w);var S=f.getAttribute(c),C=this.getCellInfo(S);if(this.addClass(f,C.options.className),f.style.cssText=""==C.options.textAlign?"":"text-align:"+C.options.textAlign+";",f.setAttribute("id",this.id+"_cell_"+t+"_"+n),this.options.fixedColumn>0)this.getFixedColumnLastIndex()==n&&this.addClass(f,"w2grid_fixedColumn");if(this.options.fixedRightColumn>0)this.getFixedRightColumnLastIndex()==n&&this.addClass(f,"w2grid_fixedRightColumn");n++,"linear"==this.options.focusFlow&&"none"!=this.options.focusMode&&(C.options.embeddedInput||"custom"==C.options.inputType&&1==this.options.senseReader||("link"!=C.options.inputType&&"button"!=C.options.inputType&&"image"!=C.options.inputType&&"user"!=C.options.inputType&&"ul"!=C.options.tableRender&&("expression"==C.options.inputType&&1==this.options.senseReader||f.setAttribute("tabIndex","0")),this.event.addListener(f,"onfocus",this.event.bindAsEventListener(this,this.handleTdFocus))))}"native"===this.options.drawType&&(f.className=b?b+" "+this.options.gridNativeClass:this.options.gridNativeClass)}}var _=[];if(!this.options.duplicateColumnId){for(p=0;p<e.length;p++){g=e[p].getElementsByTagName("td");var x=[];for(m=0;m<g.length;m++)x[m]=g[m];for(m=0;m<x.length;m++){b=x[m].className;i.test(b)||o.test(b)||_.push(x[m].parentNode.removeChild(x[m]))}}for(p=0;p<this.htmlInfo.body.rowArr.length;p++)for(m=0;m<this.htmlInfo.body.rowArr[p].length;m++)for(var I=this.htmlInfo.body.rowArr[p][m].col_id,T=0;T<_.length;T++)if(_[T].getAttribute(c)==I){e[p].appendChild(_[T]);break}}},b.prototype.addBodyRow2=function(t,e){for(var i=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowNumber(\\s|$)"),o=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowStatus(\\s|$)"),s=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_data(\\s|$)"),r=[],n=a.D.getDataPrefix("tdIndex"),l=a.D.getDataPrefix("or_wd"),h=a.D.getDataPrefix("col_id"),d=a.D.getDataPrefix("width"),c=0;c<e.length;c++){this.dataRowList.push(e[c]),e[c].className="grid_body_row";for(var u=e[c].getElementsByTagName("td"),p=0;p<u.length;p++){var g=u[p],m=g.className,f=parseInt(g.getAttribute(n),10)%this.realRowDataLength;g.setAttribute(n,t*this.realRowDataLength+f),g.removeAttribute("title");var b=g.getAttribute(d);if(b&&(g.removeAttribute(d),g.setAttribute(l,b)),this.options.rowNumStatusUniqueId){var y=g.getAttribute("id");"_headerRowNumber"!==y&&"_headerRowStatus"!==y||g.setAttribute("id",y+"_bodyRow_"+t)}if(i.test(m))this.data_num_td_list.push(g),this.all_data_td_list.push(g);else if(o.test(m))this.data_status_td_list.push(g),this.all_data_td_list.push(g);else if(!this.hasSubtotal||s.test(m)){var v=f-this.defaultColCnt;r[v]=g;var w=this.id+"_columnstyle_"+v+"_";this.addClass(g,w);var S=g.getAttribute(h),C=this.getCellInfo(S);this.addClass(g,C.options.className),g.style.cssText=""==C.options.textAlign?"":"text-align:"+C.options.textAlign+";",g.setAttribute("id",this.id+"_cell_"+t+"_"+v),"linear"==this.options.focusFlow&&"none"!=this.options.focusMode&&(C.options.embeddedInput||("link"!=C.options.inputType&&"button"!=C.options.inputType&&"image"!=C.options.inputType&&g.setAttribute("tabIndex","0"),this.event.addListener(g,"onfocus",this.event.bindAsEventListener(this,this.handleTdFocus))))}}}[].push.apply(this.all_data_td_list,r),[].push.apply(this.data_td_list,r)},b.prototype.addRows=function(t){for(var e=this.drawedRowLength,i=[],o=0;o<t;o++){
for(var s=0;s<this.oneRowLength;s++){var r=this.tempTr.rows[s].cloneNode(!0);i.push(r)}this.addBodyRow(e+o,[]),this.hasSubtotal&&(i=i.concat(this.createSubtotalRows(e+o)))}var a=this.getElementById(this.id+"_body_tbody");for(o=0;o<i.length;o++)a.appendChild(i[o])},b.prototype.notifyStatusChanged=function(t){var e,i,o=!1;"object"==typeof t.rowIndex?(e=0,i=t.rowIndex.length,o=!0):"all"==t.rowIndex?(e=0,i=this.getRowCount()):"number"==typeof t.startIndex&&"number"==typeof t.endIndex&&(e=t.startIndex,i=t.endIndex);for(var s=e;s<i;s++){var r;if(r=o?t.rowIndex[s]:s,null!=this.rowStatusColIDArr)for(var a=0;a<this.rowStatusColIDArr.length;a++){var n=this.getColumnIndex(this.rowStatusColIDArr[a]);this.drawCellData(r-this.rowIndex,r,n)}}this.hasFooter&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&this.drawFooter(),this.hasSubtotal&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex))},b.prototype.refreshColumn=function(t){try{t=this.getColumnIndex(t),this.redrawColumn(t)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.refreshRow=function(t){try{var e=t-this.rowIndex;this.drawRowData(e,t)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype.refreshCell=function(t,e){try{e=this.getColumnIndex(e);var i=t-this.rowIndex;this.drawCellData(i,t,e)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype._setVisibleRowNumFix=function(){try{if(!this.options.visibleRowNumFix)return;var t=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(isNaN(t)||t<0||""==t)return;!0===this._visibleRowNumFixResetFlag&&this.setTrRowTable();var e=this._getVisibleRowNumHeight();this.setSize(null,e)}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype._getVisibleRowNumHeight=function(t){try{var e=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(isNaN(e))return 0;!0===t&&this.oneRowLength>1&&(e*=this.oneRowLength);var i=this.getElementById(this.id+"_scrollX_div"),o=parseInt(i.style.height,10),s=0;this.hasFooter&&(s=0==(s=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:s);var a=this.getElementById(this.id+"_head_table").offsetHeight;return this.oneRowHeight*e+a+o+s+1}catch(t){r.w.printStackTrace(t,null,this)}},b.prototype._getDrawedRowCount=function(){try{for(var t=0,e=this.getElementById(this.id+"_body_tbody").childNodes,i=0;i<e.length;i++){e[i].offsetHeight>0&&t++}}catch(e){r.w.printStackTrace(e,null,this),t=this.drawedRowLength}return t};var y=function(){};y.prototype.setCellInfo=function(){for(var t=a.D.getDataPrefix("inputType"),e=a.D.getDataPrefix("depthColumn"),i=a.D.getDataPrefix("showDepth"),o=this.tempDiv.getElementsByTagName("td"),s=0;s<o.length;s++){"drilldown"==o[s].getAttribute(t)&&(this.isDrillDown=!0,this.depthColumn=o[s].getAttribute(e),this.showDepth=o[s].getAttribute(i),this._dataList.options.depthColumn||"grid"==this.options.pluginName&&!this.options.drilldownRealRowIndex||(this._dataList.options.depthColumn=this.depthColumn))}},y.prototype.setDataListCellInfo=function(){if(this.successBinding)for(var t=this.getColCnt(),e=0;e<t;e++){var i=this.getColumnID(e),o=this.getCellInfo(i);if(o&&o.options&&o.options.importExp){var s=this._dataList.getCellInfo(i);s&&s.options&&!s.options.importExp&&(s.options.importExp=o.options.importExp)}}},y.prototype.setInnerHTML=function(t,e,i,o){var s=this.getColumnID(i),r=this.dataList._getCellData(e,s),a=this.cellInfoHash[this.tdIdList[i]];""===r&&(r=a.options.groupName?this.dataList._getCellData(e,a.options.groupName)==a.options.groupValue?a.options.trueValue:a.options.falseValue:a.options.defaultValue);if(a.setInnerHTML(t,r,e,i,o),""!=a.options.disabledClass&&(this._getEditDisabled(e,i)?this.addClass(t,a.options.disabledClass):this.removeClass(t,a.options.disabledClass)),
""!=this.options.disabledClass&&!1===this.options.disabled&&(this._getEditDisabled(e,i)?this.addClass(t,this.options.disabledClass):this.removeClass(t,this.options.disabledClass)),""!=a.options.readOnlyClass&&(this.___getEditReadOnly(e,s)?this.addClass(t,a.options.readOnlyClass):this.removeClass(t,a.options.readOnlyClass)),""!=this.options.readOnlyClass&&(this.___getEditReadOnly(e,s)?this.addClass(t,this.options.readOnlyClass):this.removeClass(t,this.options.readOnlyClass)),""!=this.options.hiddenClass||""!=a.options.hiddenClass){var n=this.options.hiddenClass;""!=a.options.hiddenClass&&(n=a.options.hiddenClass);var l=this._getRealColIndex("body",s)+this.defaultColCnt;this.hiddenList[l]?this.addClass(t,n):this.removeClass(t,n)}},y.prototype.getCellInfo=function(t){try{var e=a.D.getDataPrefix("col_id"),i="";return i="string"==typeof t?t:"number"==typeof t?this.tdIdList[t]:t?t.getAttribute(e):null,this.cellInfoHash[i]||{options:{}}}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype._endEdit=function(){null!=this.editedCell&&this.editedCell.handleEndEdit()},y.prototype.initColumns=function(){for(var t in this.cellInfoHash){var e=this.cellInfoHash[t];if("select"==e.options.inputType&&(e.initializeCellInfo(e.element),e.style="",e.comp=null),this.options.initColumns)for(var i in e.dynamicAttrInfo){var o=e.dynamicAttrInfo[i];o&&(e.options[i]=o.originalValue,"displayFormat"!=i&&"displayFormatter"!=i||e.initFormatter())}}},y.prototype.initHeaders=function(){for(var t in this.headerInfoHash){"checkbox"==this.headerInfoHash[t].options.inputType&&this.setHeaderValue(t,!1)}},y.prototype._setCellInfo=function(t,e){this.cellInfoHash2[t]=e},y.prototype.getColumnCount=function(){return this.tdIdList.length},y.prototype.getColumnID=function(t){if("string"==typeof t)return t;var e=this.tdIdList[t];return e||null},y.prototype.getMovedColumnID=function(t){if("string"==typeof t)return t;var e=this.tdIdList[this.columnOrder[t]];return e||null},y.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},y.prototype.getDisplayColumnIndex=function(t){return"number"==typeof t?t:this.colMoveIndexMap[t]},y.prototype.setExpressionAssociation=function(t,e){try{null==this.expressionAssArr[t]&&(this.expressionAssArr[t]=[]),this.expressionAssArr[t].push(e)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.setLabelColumnAssociation=function(t,e){try{null==this.labelColumnAssArr[t]&&(this.labelColumnAssArr[t]=[]),this.labelColumnAssArr[t].push(e)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.setCellEditMode=function(t,e){this.hideTooltip();var i=this.getCellInfo(t);this.editedCell=i,this.rollbackCommitFlag=!1;var o=this.render.offsetWidth,s=this.render.offsetHeight;i.setEditMode(t,e),o===this.render.offsetWidth&&s===this.render.offsetHeight||(this.handleResize(),i.setEditMode(t,e)),this.rollbackCommitFlag=!0},y.prototype.setCellClickEdit=function(t){var e=this.getElemRowIndex(t),i=this.getCellInfo(t);if("custom"==i.options.inputType&&!i.internal){var o=e;this.isDrillDown&&this._dataList.options.depthColumn&&(o=this.getRealRowIndex(e)),i=i.cellManagerHashByRowIndex[o]?i.cellManagerHashByRowIndex[o]:i}var s=!1;switch(i.options.inputType){case"checkbox":case"radio":case"drilldown":s=i.handleClick(t,e)}return s},y.prototype.getInput=function(t,e,i){var n=t.options.inputType||"text",l=t.options.embeddedInput,h=this.getColumnOption(t.id,"dataType");"text"===n&&"number"===h&&"true"===this.options.floatNumber&&(h="float",t.options.dataType="float");var u,p="bigDecimal"==h,g=this;if(this.options.titleFormatter)try{if("function"!=typeof this.options.titleFormatter){var m=a.D.getGlobalFunction(this.options.titleFormatter,this.scope_id);"function"==typeof m&&(this.options.titleFormatter=m,u=m.call(this,this.getElemRowIndex(e),this.getColumnIndex(t.id),i))}else u=this.options.titleFormatter.call(this,this.getElemRowIndex(e),this.getColumnIndex(t.id),i)}catch(t){r.w.printStackTrace(t,null,this)}if(l){
if("custom"==t.options.inputType&&!t.internal){var f=this.getElemRowIndex(e);this.isDrillDown&&this._dataList.options.depthColumn&&(f=this.getRealRowIndex(f)),t=t.cellManagerHashByRowIndex[f]?t.cellManagerHashByRowIndex[f]:t}b=t.parentColumnInfo?this.id+"_"+t.id:e.getAttribute("id")+"_"+n,this.fakeInput||"text"!=n&&"secret"!=n&&"calendar"!=n||(this.makeFakeInput=function(){this.fakeInput=new WebSquare.uiplugin.input(this.id+"_fakeInput",{style:"visibility:hidden;position:absolute;z-index:100;background-color:"+this.options.selectedCellColor,className:"w2grid_embedded_input",ioFormat:"$blank",ioFormatter:"$blank",displayFormat:"$blank",displayFormatter:"$blank",readOnly:"$blank",disabled:"$blank",useKeyupBlur:!1,xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){g.lastEvent=t,d.B.stopEvent(t);var e=this;setTimeout((function(){e.lastInput.focus()}),1)}}},{name:"oncontextmenu",action:"script",param:{handler:function(t){g.lastEvent=t}}},{name:"ondblclick",action:"script",param:{handler:function(t){g.lastEvent=t,g.hideFakeInput(this),d.B.stopPropagation(t),g.F2Mode=!0,WebSquare.text.setCaretPos(this.lastInput.render,this.lastInput.render.value.length)}}}]}),this.fakeInput.setAction=function(){},this.fakeInput.writeTo(this.render),this.fakeInput.activate(),this.fakeInput.render.parentNode.removeChild(this.fakeInput.render);var t=null;this.showFakeInput=function(e){var i=e.render.parentNode;if(this.render.appendChild(this.fakeInput.render),!t){var o=this.all_data_td_list[0];t=1-o.offsetLeft}var s=this.getElementById(this.id+"_dataLayer");this.fakeInput.setPosition(i.offsetLeft+t-s.scrollLeft,i.offsetTop+t-s.scrollTop),this.fakeInput.setSize(i.clientWidth,i.clientHeight),a.D.isIE()&&this.fakeInput.setVerticalAlign(),this.fakeInput.lastInput=e;var r=e.getStyle("text-align");r?this.fakeInput.setStyle("text-align",r):this.fakeInput.setStyle("text-align","")},this.hideFakeInput=function(t){this.fakeInput.render.parentNode&&this.fakeInput.render.parentNode.removeChild(this.fakeInput.render)}})}else var b=t.mainGridId+t.id;var y=!!(O=this.dom[b]);O&&!O.render&&O.ownerDocument&&!O.parentNode&&(y=!1),y&&""!==u&&null!=u&&("text"==n?O.render.setAttribute("title",u):O.setAttribute("title",u));var v=a.D.getDataPrefix("col_id"),w=a.D.getDataPrefix("rowIndex"),S=a.D.getDataPrefix("rowindex");a.D.getDataPrefix("dateValidCheck");if(y){if("checkbox"==n&&l){if(t.options.checkboxLabel||t.options.checkboxLabelColumn||t.options.checkboxLabelFormatter){k=this.getElemRowIndex(e),D=this._getGroupbyDisplayRowIndex(k),L=(T=t.mainGridId+"_checkbox_"+t.id)+"_"+k,W=t.options.checkboxLabel||"";if(t.options.checkboxLabelColumn){for(A=t.options.checkboxLabelColumn.split(","),M="",E=t.options.checkboxLabelDelimiter||this.options.labelDelimiter||" ",q=0;q<A.length;q++){R=this.bodyToHeaderRelation[A[q]];if(q===A.length-1)this.options.showCheckboxLabelUserFormat?M+=" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0}):M+=this._getCellDisplayData(k,A[q],{removeTag:!0});else if(this.options.showCheckboxLabelUserFormat)M+=(0===q?k+1+"행"+E:"")+" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0})+E;else M+=this._getCellDisplayData(k,A[q],{removeTag:!0})+E}W=W?M+E+W:M}if(t.options.checkboxLabelFormatter)try{"function"==typeof(N=a.D.getGlobalFunction(t.options.checkboxLabelFormatter,t.scope_id))&&(W=N.call(this,D,this.getColumnIndex(t.colID),W))}catch(e){c.k.printLog(this.id+"_"+t.id+" checkboxLabelFormatter error : "+e.message)}(C=e.getElementsByTagName("label")[0])&&(C.innerText=W)}}else if("radio"==n&&l&&(t.options.radioLabel||t.options.radioLabelColumn||t.options.radioLabelFormatter)){var C;k=this.getElemRowIndex(e),D=this._getGroupbyDisplayRowIndex(k),P=(V=t.mainGridId+"_radio_"+t.id)+"_"+k,H=t.options.radioLabel||"";if(t.options.radioLabelColumn){for(A=t.options.radioLabelColumn.split(","),M="",E=t.options.radioLabelDelimiter||this.options.labelDelimiter||" ",q=0;q<A.length;q++){
R=this.bodyToHeaderRelation[A[q]];if(q===A.length-1)this.options.showRadioLabelUserFormat?M+=" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0}):M+=this._getCellDisplayData(k,A[q],{removeTag:!0});else if(this.options.showRadioLabelUserFormat)M+=(0===q?k+1+"행"+E:"")+" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0})+E;else M+=this._getCellDisplayData(k,A[q],{removeTag:!0})+E}H=H?M+E+H:M}if(t.options.radioLabelFormatter)try{"function"==typeof(j=a.D.getGlobalFunction(t.options.radioLabelFormatter,t.scope_id))&&(H=j.call(this,D,this.getColumnIndex(t.colID),H))}catch(e){c.k.printLog(this.id+"_"+t.id+" radioLabelFormatter error : "+e.message)}(C=e.getElementsByTagName("label")[0])&&(C.innerText=H)}this.options.titleFormatter&&l&&u&&O.title!==u&&(O.title=u)}else{if("text"!=n&&"secret"!=n||!l){if("select"==n&&l){var _=u||t.options.title||"";if(this.options.titleAuto&&!_){Q=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";_=""!==i&&null!=i?Q+" "+(this.changeItemValue("label",t.id,[i])[0]||i):Q+WebSquare.language.getMessage("Grid_select")}O=new WebSquare.uiplugin.selectbox_native(b,{className:"w2grid_embedded_select",style:"$blank",pluginName:"selectbox",renderType:"native",title:_,emptyItem:t.options.emptyItem,chooseOption:t.options.chooseOption,chooseOptionLabel:t.options.chooseOptionLabel,_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){d.B.stopPropagation(t)}}},{name:"onkeydown",action:"script",param:{handler:function(t){switch(t.keyCode){case 38:case 40:case 27:return void d.B.stopPropagation(t)}}}}]},t.xml),e.innerHTML=O.toHTML();var x=WebSquare.uiplugin.selectbox_native.prototype.handleOnchange;O.handleOnchange=function(t){var e=this.render.parentNode.getAttribute(v),i=parseInt(this.render.getAttribute(S),10),o=g._getGroupbyDisplayRowIndex(i),s=g.getColumnIndex(e),r=this.selectedIndex,a=this.getValue();if(x.call(this,t),g.dataList.__setCellData(i,e,this.getValue()),g._dataList.setRowPosition(i),r!=this.selectedIndex){var n={oldValue:a,newValue:this.getValue(),oldSelectedIndex:r,newSelectedIndex:this.selectedIndex,rowIndex:i,colIndex:s,colId:g.getColumnID(s)};d.B.fireEvent(g,"onviewchange",n)}d.B.fireEvent(g,"onafteredit",o,s,this.getValue(),t)},O.activate();var I=O.uuid;O.event.addListener2(O.dom.select,"onfocus",(function(t){g.lastEvent=t;var e=WebSquare.idCache[I];g.getLastFocusedCell().focusedTd==e.render.parentNode||g.focusedByApi||g._setFocusedCell(e.render.getAttribute(S),e.render.parentNode.getAttribute(v)),g.focusedByApi=!1}))}else if("checkbox"==n&&l){if(t.options.checkboxLabel||t.options.checkboxLabelColumn||t.options.checkboxLabelFormatter){var T,k=this.getElemRowIndex(e),D=this._getGroupbyDisplayRowIndex(k),L=(T=t.mainGridId+"_checkbox_"+t.id)+"_"+k,W=t.options.checkboxLabel||"";if(t.options.checkboxLabelColumn){for(var A=t.options.checkboxLabelColumn.split(","),M="",E=t.options.checkboxLabelDelimiter||this.options.labelDelimiter||" ",q=0;q<A.length;q++){var R=this.bodyToHeaderRelation[A[q]];if(q===A.length-1)this.options.showCheckboxLabelUserFormat?M+=" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0}):M+=this._getCellDisplayData(k,A[q],{removeTag:!0});else if(this.options.showCheckboxLabelUserFormat)M+=(0===q?k+1+"행"+E:"")+" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0})+E;else M+=this._getCellDisplayData(k,A[q],{removeTag:!0})+E}W=W?M+E+W:M}if(t.options.checkboxLabelFormatter)try{var N;"function"==typeof(N=a.D.getGlobalFunction(t.options.checkboxLabelFormatter,t.scope_id))&&(W=N.call(this,D,this.getColumnIndex(t.colID),W))}catch(e){c.k.printLog(this.id+"_"+t.id+" checkboxLabelFormatter error : "+e.message)}B="<INPUT style='border-width:0px;' type='checkbox' class='w2grid_embedded_check'  id='"+L+"' name='"+T+"'/>";var F="<label class='w2checkbox_label ' for='"+L+"'>"+W+"</label>";"left"===t.options.checkboxLabelPosition?B=F+B:B+=F,
e.innerHTML=B;var O=e.getElementsByTagName("input")[0]}else{B="<INPUT style='border-width:0px;' type='checkbox' class='w2grid_embedded_check' />",e.innerHTML=B;O=e.getElementsByTagName("input")[0];if(u)O.title=u;else if(t.options.title)O.title=t.options.title;else if(this.options.titleAuto){Q=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";O.title=i?Q+WebSquare.language.getMessage("Grid_title"):Q+WebSquare.language.getMessage("Grid_title_not_choose"),W&&(O.title=O.title+W)}}if(this.event.addListener(O,"onclick",this.event.bindAsEventListener(this,(function(t){var e=d.B.getTarget(t);this.lastEvent=t;var i=this.getLastFocusedCell(),o=e.parentNode,s=this.getElemRowIndex(o),r=this.getCellInfo(o),a=r.id,n=this.getColumnIndex(a);i.focusedTd==e.parentNode||this.focusedByApi||this._setFocusedCell(s,a),this.focusedByApi=!1,r.options.noDisabledOnReadOnly&&this._getEditReadOnly(s,n)&&d.B.preventDefault(t)}))),t.options.noDisabledOnReadOnly){var k=this.getElemRowIndex(e);this._getEditReadOnly(k,t.id)?this.addClass(O,this.options.readOnlyClass+"_nodisabled"):this.removeClass(O,this.options.readOnlyClass+"_nodisabled")}}else if("radio"==n&&l){var B;if(t.options.radioLabel||t.options.radioLabelColumn||t.options.radioLabelFormatter){var V,k=this.getElemRowIndex(e),D=this._getGroupbyDisplayRowIndex(k),P=(V=t.mainGridId+"_radio_"+t.id)+"_"+k,H=t.options.radioLabel||"";if(t.options.radioLabelColumn){for(var A=t.options.radioLabelColumn.split(","),M="",E=t.options.radioLabelDelimiter||this.options.labelDelimiter||" ",q=0;q<A.length;q++){var R=this.bodyToHeaderRelation[A[q]];if(q===A.length-1)this.options.showRadioLabelUserFormat?M+=" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0}):M+=this._getCellDisplayData(k,A[q],{removeTag:!0});else if(this.options.showRadioLabelUserFormat)M+=(0===q?k+1+"행"+E:"")+" "+this.getHeaderValue(R)+" "+this._getCellDisplayData(k,A[q],{removeTag:!0})+E;else M+=this._getCellDisplayData(k,A[q],{removeTag:!0})+E}H=H?M+E+H:M}if(t.options.radioLabelFormatter)try{var j;"function"==typeof(j=a.D.getGlobalFunction(t.options.radioLabelFormatter,t.scope_id))&&(H=j.call(this,D,this.getColumnIndex(t.colID),H))}catch(e){c.k.printLog(this.id+"_"+t.id+" radioLabelFormatter error : "+e.message)}B="<INPUT style='border-width:0px;' type='radio' class='w2grid_embedded_radio'  id='"+P+"' name='"+V+"'/>";F="<label class='w2radio_label ' for='"+P+"'>"+H+"</label>";"left"===t.options.radioLabelPosition?B=F+B:B+=F,e.innerHTML=B;O=e.firstChild}else{B="<INPUT style='border-width:0px;' type='radio' name='"+(t.mainGridId+"_radio_"+t.id)+"' class='w2grid_embedded_radio' />",e.innerHTML=B;O=e.firstChild;if(u)O.title=u;else if(t.options.title)O.title=t.options.title;else if(this.options.titleAuto){Q=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";O.title=i?Q+WebSquare.language.getMessage("Grid_title"):Q+WebSquare.language.getMessage("Grid_title_not_choose"),H&&(O.title=O.title+H)}}if(this.event.addListener(O,"onclick",this.event.bindAsEventListener(this,(function(t){var e=d.B.getTarget(t);this.lastEvent=t;var i=this.getLastFocusedCell(),o=e.parentNode,s=this.getElemRowIndex(o),r=this.getCellInfo(o),a=r.id,n=this.getColumnIndex(a);i.focusedTd==e.parentNode||this.focusedByApi||this._setFocusedCell(s,a),this.focusedByApi=!1,r.options.noDisabledOnReadOnly&&this._getEditReadOnly(s,n)&&d.B.preventDefault(t)}))),t.options.noDisabledOnReadOnly){k=this.getElemRowIndex(e);this._getEditReadOnly(k,t.id)?this.addClass(O,this.options.readOnlyClass+"_nodisabled"):this.removeClass(O,this.options.readOnlyClass+"_nodisabled")}}else if("calendar"==n&&l){Z=u||t.options.title||"";if(this.options.titleAuto&&!Z){Q=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";Z=""!==i?Q+" "+i:Q+WebSquare.language.getMessage("Grid_calendar")}var z=t.options.ioFormat,G={style:"width:0px; height:0px;",delimiter:"$blank",calendarValueType:t.options.calendarValueType,calendarClass:t.options.calendarClass||"class1",ioFormat:z,
ioFormatter:"$blank",displayFormat:t.options.displayFormat||z,displayFormatter:"$blank",displayFormatFunc:t.options.displayFormatFunc,calendarDisplayFormatFunc:t.options.calendarDisplayFormatFunc,footerDiv:!0,renderDiv:!0,keepFocusSelect:!0,focusOnOuterDiv:!0,renderType:"native",readOnly:"$blank",disabled:"$blank",title:Z,validCheck:!1,_scope_obj_uuid:t.options._scope_obj_uuid,senseReader:t.options.senseReader,xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(w),10),i=this.render.parentNode.getAttribute(v),o=g.getColumnIndex(i);d.B.fireEvent(g,"oncellclick",e,o,i),d.B.stopPropagation(t)}}},{name:"onafterviewchange",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(S),10),i=g._getGroupbyDisplayRowIndex(e),o=g.getColumnIndex(this.render.parentNode.getAttribute(v));t.oldValue!=t.newValue&&d.B.fireEvent(g,"onviewchange",{oldValue:t.oldValue,newValue:t.newValue,rowIndex:i,colIndex:o,colId:g.getColumnID(o)})}}},{name:"ondateselect",action:"script",param:{handler:function(t,e){this.options.senseReader||this.dom.input.blur();var i=this.render.getAttribute(S),o=this.render.parentNode.getAttribute(v),s=this.getValue();g.dataList.__setCellData(i,o,s)}}},{name:"onconfirm",action:"script",param:{handler:function(){this.options.senseReader||this.dom.input.blur();var t=this.render.getAttribute(S),e=this.render.parentNode.getAttribute(v),i=O.validator.validateString(this.getValue());g.dataList.__setCellData(t,e,i)}}}]};O=new WebSquare.uiplugin.inputCalendar(b,G,t.element);try{t.element&&!t.element.getAttribute("dateValidCheck")&&(O.options.dateValidCheck=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="calendar"]/dateValidCheck/@value')||"false")}catch(t){r.w.printStackTrace(t,null,this)}e.innerHTML="",O.writeTo(e),O.parentControl||this.addControl(O),z!=O.options.ioFormat&&(t.options.ioFormat=O.options.ioFormat,t.initFormatter()),O.setVerticalAlign=function(){},O.handleKeyupEvent=function(){};var U=WebSquare.uiplugin.inputCalendar.prototype.handleFocusEvent;O.handleFocusEvent=function(t){if(g.editEndFlag&&g.fakeInput.lastInput!=this)return d.B.stopEvent(t),!1;var e=this.render.getAttribute(S),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute(v);if(g.lastEvent=t,g.getLastFocusedCell().focusedTd==this.render.parentNode||g.focusedByApi||g._setFocusedCell(e,o),U.call(this,t),g.focusedByApi=!1,!this.reFocus&&(g.showFakeInput(this),g.fakeInput.setValue(this.getValue()),this.select(),this.focus(),g.fakeInput.render.parentNode)){var s=g.getColumnIndex(o);d.B.fireEvent(g,"onbeforeedit",i,s,g._dataList.getCellData(e,s))}g.F2Mode=!1,this.reFocus=!1};var X=WebSquare.uiplugin.inputCalendar.prototype.handleKeyEvent;O.handleKeyEvent=function(t){switch(g.lastEvent=t,X.call(this,t),t.keyCode){case 46:return!g.F2Mode&&g.fakeInput.render.parentNode&&(this.setValue(""),g.fakeInput.setValue("")),void d.B.stopPropagation(t);case 27:return g.F2Mode=!1,g.showFakeInput(this),this.setValue(g.dataList.getCellData(g._getFocusedRowIndex(),g.getFocusedColumnIndex())),this.select(),void d.B.stopPropagation(t);case 113:return g.F2Mode=!0,WebSquare.text.setCaretPos(this.render,this.render.value.length),g.hideFakeInput(this),void d.B.stopPropagation(t);case 9:for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2inputCalendar_divInput")){d.B.stopPropagation(t);break}if(e.match("w2inputCalendar_button")&&t.shiftKey){d.B.stopPropagation(t);break}}return}var i=t.which||t.keyCode;g.nonCharKeys[i]||(32!=i?(g.fakeInput.render.parentNode&&g.hideFakeInput(this),d.B.stopPropagation(t)):d.B.stopPropagation(t))};var K=WebSquare.uiplugin.inputCalendar.prototype.handleBlurEvent;O.handleBlurEvent=function(t){var e=this.render.getAttribute(S),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute(v),s=g.getColumnIndex(o),r=O.validator.validateString(this.getValue());if(!1===this.validate(r)&&""!=r){
if(this.options.dateValidSet&&this.options.dateValidSetCustom);else if("false"!==this.options.displaymessage){var a=WebSquare.language.getMessage("IC_invalidCalendarSelect")||"날짜 형식이 잘못 되었습니다.";alert(a)}return!1}var n,l=WebSquare.historyManager.get(this.options.pluginName,this.id);if(l&&(n=l.value),d.B.fireEvent(g,"oneditend",i,s,r,t)+""=="false")return g.editEndFlag=!0,this.reFocus=!0,g.fakeInput.lastInput==this&&this.focus(),g.getLastFocusedCell().focusedTd!=this.render.parentNode&&g._setFocusedCell(e,o),d.B.stopEvent(t),!1;g.editEndFlag=!1,K.call(this,t);var h=g.getCellInfo(o);g.dataList.__setCellData(e,o,r),r=g._dataList.getCellData(e,o),"all"==h.options.applyFormat||this.options.displayFormat||(r=h.getDisplayData(r));var c=O.sub_validator.validateString(r);this._setValue(c,{skipValidate:!0}),d.B.fireEvent(this,"onafterviewchange",{oldValue:n,newValue:r});d.B.fireEvent(g,"onafteredit",e,s,r,g.lastEvent);g.F2Mode=!1},O.setStyle("z-index","10"),O.activate(),this.fakeInput||this.makeFakeInput()}else if("text"==n||"textImage"==n||"drilldown"==n||"secret"==n){tt=t.options.type?t.options.type:"text",Z=u||"";"secret"==n&&(tt="password"),p&&(h="bigDecimal");it={style:"position:absolute;display:none;border:1px solid "+this.options.selectedCellColor+";outline:none;z-index:10;",ioFormat:"$blank",ioFormatter:"$blank",displayFormat:"all"==t.options.applyFormat?"":"$blank",displayFormatter:"$blank",readOnly:"$blank",disabled:"$blank",title:Z,type:tt,dataType:h,editType:t.options.editType,byteCheckIgnoreChar:t.options.byteCheckIgnoreChar,maxlength:t.options.maxLength||t.options.maxlength||-1,maskFormat:t.options.maskFormat,maskFormatModelNumber:t.options.maskFormatModelNumber,customModelFormatter:t.options.customModelFormatter,customModelUnformatter:t.options.customModelUnformatter,customPasteFormatter:this.options.customPasteFormatter,useMaxLength:t.options.useMaxLength,adjustMaxLength:t.options.adjustMaxLength,useKeyupBlur:!1,inputMode:t.options.inputMode||"",_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"ondblclick",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);d.B.fireEvent(g,"oneditdblclick",i,o,t.id)}}}]};t.options.maskFormat&&"display"==t.options.applyFormat&&(it.displayFormat=t.options.displayFormat),t.internal&&(it=o.x.extend(o.x.extend(it,t.initializeInfo.options))),"float"===t.options.dataType&&(it.dataType=t.options.dataType),(O=new WebSquare.uiplugin.input(b,it,t.element)).writeTo(this),this.options.editInputClass&&"text"==n&&this.addClass(O.render,this.options.editInputClass),O.event.addListener(O.render,"oncopy",this.event.bindAsEventListener(this,(function(t){d.B.stopPropagation(t)}))),O.event.addListener(O.render,"onpaste",this.event.bindAsEventListener(this,(function(t){d.B.stopPropagation(t)}))),O.activate(),"number"==t.options.dataType?""==t.options.displayFormat?O.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9")):t.options.maskFormat||O.validator.addCommand(new WebSquare.validator.numberCommand):"euro"==t.options.dataType?O.validator.addCommand(new WebSquare.validator.euroCommand(O.options.delimiter,O.options.decimalDelimiter)):"text"==t.options.dataType&&(t.options.maskFormat||(t.options.applyFormat="display")),O.setVerticalAlign=function(){},this._moveKeyEdit(O.uuid,"handleKeydownEvent",{oldMode:!0})}else if("textarea"==n){if(l){var Y,$,J;e&&(k=this.getElemRowIndex(e),Y=this.getColumnIndex(e.getAttribute(v)),$=this._getEditDisabled(k,Y),J=this.___getEditReadOnly(k,Y)),O=new WebSquare.uiplugin.textarea(b,{style:"position:relative;display:none;width:150px;height:60px;z-index:1000;resize:none;",className:"$blank",readOnly:!0===J?J:"$blank",disabled:!0===$?$:"$blank",maxlength:t.options.maxLength||-1,_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"onkeydown",action:"script",param:{handler:function(t){d.B.stopPropagation(t)}}}]},t.element);K=WebSquare.uiplugin.textarea.prototype.handleBlurEvent;O.handleBlurEvent=function(t){
K.call(this,t);var e=parseInt(this.render.getAttribute(S),10),i=this.render.parentNode.getAttribute(v),o=g.getCellInfo(i),s=this.getValue();"number"==o.mainGrid.getColumnOption(o.options.col_id,"dataType")&&""!=s&&(s=Number(s)),o.mainGrid.dataList.__setCellData(e,i,s)}}else{G={style:"position:absolute;display:none;width:150px;height:60px;z-index:1000;resize:none;",className:"$blank",readOnly:"$blank",disabled:"$blank",maxlength:t.options.maxLength||-1,_scope_obj_uuid:t.options._scope_obj_uuid};!0===t.options.keepCellClass&&(G.className=""),t.internal&&(G=o.x.extend(o.x.extend(G,t.initializeInfo.options))),O=new WebSquare.uiplugin.textarea(b,G,t.element)}O.writeTo(this),O.event.addListener(O.render,"oncopy",this.event.bindAsEventListener(this,(function(t){d.B.stopPropagation(t)}))),O.event.addListener(O.render,"onpaste",this.event.bindAsEventListener(this,(function(t){d.B.stopPropagation(t)}))),this._moveKeyEdit(O.uuid,"handleKeydownEvent"),O.activate()}else if("calendar"==n){z=t.options.ioFormat,G={style:"position:absolute;display:none;border:1px solid "+this.options.selectedCellColor+";outline:none;",delimiter:"$blank",calendarValueType:t.options.calendarValueType,calendarClass:t.options.calendarClass||"class1",ioFormat:z,ioFormatter:"$blank",displayFormat:t.options.displayFormat||z,applyFormat:t.options.applyFormat||"display",displayFormatter:"$blank",holidayRef:t.options.holidayRef||"",keepFocusSelect:!0,focusOnOuterDiv:!0,footerDiv:t.options.footerDiv,_scope_obj_uuid:t.options._scope_obj_uuid,readOnly:"$blank",disabled:"$blank",validCheck:!1,renderDiv:!0,inputReadOnly:t.options.inputReadOnly,unformatOnPaste:t.options.unformatOnPaste,xmlEvents:[{name:"ondateselect",action:"script",param:{handler:function(e,i){var o=t.editRowIndex,s=g.getColumnIndex(t.id);d.B.fireEvent(g,"ondateselect",o,s,e,i)}}},{name:"onmonthselect",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);d.B.fireEvent(g,"onmonthselect",i,o,{oldValue:e.oldValue,newValue:e.newValue})}}},{name:"onyearselect",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);d.B.fireEvent(g,"onyearselect",i,o,{oldValue:e.oldValue,newValue:e.newValue})}}}]};t.internal&&(G=o.x.extend(o.x.extend(G,t.initializeInfo.options)));O=new WebSquare.uiplugin.inputCalendar(b,G,t.element);try{0==t.internal?t.element&&!t.element.getAttribute("dateValidCheck")&&(O.options.dateValidCheck=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="calendar"]/dateValidCheck/@value')||"false"):1!=t.options.dateValidCheck&&"true"!=t.options.dateValidCheck||(O.options.dateValidCheck="true")}catch(t){r.w.printStackTrace(t,null,this)}O.writeTo(this),O.event.addListener(O.render,"oncopy",this.event.bindAsEventListener(this,(function(t){d.B.stopPropagation(t)}))),O.event.addListener(O.render,"onpaste",this.event.bindAsEventListener(this,(function(t){d.B.stopPropagation(t)}))),z!=O.options.ioFormat&&(t.options.ioFormat=O.options.ioFormat,t.initFormatter()),this._moveKeyEdit(O.uuid,"handleKeyEvent"),O.activate(),O.setVerticalAlign=function(){},"display"===t.options.applyFormat&&(O.handleKeyupEvent=function(){}),O.setStyle("z-index","10"),O.options.dateValidSet&&O.options.dateValidSetCustom&&(O._skipDateValidSet=!0)}else if("autoComplete"==n&&l){(G={}).titleStr=u,G.input_id=b,G.dataRowIndex=w,G.dataCol_id=v,O=t.getInput(t,e,i,G)}}else{var Z=u||t.options.title||"",Q=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";Z||this.options.titleAuto&&("text"==n&&""!==i?Z=Q+" "+i:"text"==n&&""==i?Z=Q+WebSquare.language.getMessage("Grid_text"):"secret"==n&&(Z=Q+WebSquare.language.getMessage("Grid_secret")));var tt=t.options.type?t.options.type:"text",et="w2grid_embedded_input";"secret"==n&&(tt="password",a.D.isIEAllVersion()?et+=" w2grid_secret":et="w2grid_embedded_secret");var it={className:et,style:"$blank",ioFormat:"$blank",ioFormatter:"$blank",readOnly:"$blank",disabled:"$blank",hidden:"$blank",title:Z,type:tt,
adjustMaxLength:t.options.adjustMaxLength,useMaxLength:t.options.useMaxLength,useKeyupBlur:!1,xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(w),10),i=this.render.parentNode.getAttribute(v);if(e-g.rowIndex>=g.lastIndex+1)return d.B.stopEvent(t),g.addGridScroll(1),void g._setFocusedCell(e,i,!0)}}},{name:"onclick",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(w),10),i=this.render.parentNode.getAttribute(v),o=g.getColumnIndex(i);d.B.fireEvent(g,"oncellclick",e,o,i),d.B.stopPropagation(t)}}},{name:"oncopy",action:"script",param:{handler:function(t){d.B.stopPropagation(t)}}},{name:"onpaste",action:"script",param:{handler:function(t){d.B.stopPropagation(t)}}},{name:"oncut",action:"script",param:{handler:function(t){d.B.stopPropagation(t)}}},{name:"onkeydown",action:"script",param:{handler:function(t){this._SenSeReaderBeforeEditValue=null;var e={},i=this.render.parentNode.getAttribute(v);e.rowIndex=parseInt(this.render.getAttribute(w),10),e.colIndex=g.getColumnIndex(i),e.colID=i,e.keyCode=t.charCode?t.charCode:t.keyCode,this._SenSeReaderBeforeEditValue=this.render.value,e.oldValue=this.render.value,d.B.fireEvent(g,"oneditkeydown",e)}}},{name:"onkeyup",action:"script",param:{handler:function(t){var e=t.charCode?t.charCode:t.keyCode,i=this.render.parentNode.getAttribute(v),o={rowIndex:parseInt(this.render.getAttribute(w),10),colIndex:g.getColumnIndex(i),colID:i,oldValue:this._SenSeReaderBeforeEditValue||"",newValue:this.render.value,inputType:"text",keyCode:e};this._SenSeReaderBeforeEditValue=null,d.B.fireEvent(g,"oneditkeyup",o),d.B.stopPropagation(t)}}}]};"float"===t.options.dataType&&(it.dataType=t.options.dataType),t.options.delimiter="",O=new WebSquare.uiplugin.input(b,o.x.extend(o.x.extend({},t.options),it)),e.innerHTML="",O.writeTo(e),"number"==t.options.dataType&&(""==t.options.displayFormat?O.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9")):O.validator.addCommand(new WebSquare.validator.numberCommand)),a.D.isIE()&&O.setVerticalAlign(),O.setVerticalAlign=function(){};var ot=WebSquare.uiplugin.input.prototype.handleBlurEventBasic,st=this.uuid;O.handleBlurEventBasic=function(t){var e=parseInt(this.render.getAttribute(S),10),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute(v),s=g._dataList.getColumnIndex(o),r=g.getColumnIndex(o),n=O.validator.validateString(this.getValue());if(d.B.fireEvent(g,"oneditend",i,r,n,t)+""=="false")return g.editEndFlag=!0,this.reFocus=!0,g.fakeInput.lastInput==this&&this.focus(),g.getLastFocusedCell().focusedTd!=this.render.parentNode&&g._setFocusedCell(e,o),d.B.stopEvent(t),!1;g.editEndFlag=!1,ot.call(this,t,{skipEditEnd:!0});var l=g.getCellInfo(o),h=g.getColumnOption(l.id,"dataType");if(this._isNumberType(h)){var c=n.wq_trim();"."!==c&&"-"!==c&&"+"!==c&&","!==c&&c!=="+"+l.options.decimalDelimiter&&c!=="-"+l.options.decimalDelimiter||(n="")}var u=!(!g.isDrillDown||!g._dataList.options.depthColumn),p=e,m=g._dataList.getRealRowIndex(p);u&&(p=m);var f=g._dataList.dataArr[m*g._dataList.getColumnCount()+s];if(g.dataList.__setCellData(e,o,n),n=g._dataList.getCellData(p,o),"all"==l.options.applyFormat||this.options.displayFormat||this.options.displayFormatter||(n=l.getDisplayData(n)),this.setValue(n),WebSquare.idCache[st].options.senseReader&&this.options.customFormatter){var b=null;try{"function"==typeof this.options.customFormatter?b=this.options.customFormatter:"function"==typeof(b=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=b)}catch(t){b=null}var y=n,w=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&w&&(y=this.formatter.format(n)),"function"==typeof b){this.useCustomFormatter=!0;var C=b.call(this.mainGrid,n,y,i,s);this.render.value=C}}d.B.fireEvent(g,"onafteredit",i,r,n,g.lastEvent);f!=n&&d.B.fireEvent(g,"onviewchange",{oldValue:f,newValue:n,rowIndex:i,
colIndex:r,colId:g.getColumnID(r)}),g.hideFakeInput(O),g.F2Mode=!1};var rt=WebSquare.uiplugin.input.prototype.handleFocusValueEventAdv;O.handleFocusValueEventAdv=function(t){if(g.editEndFlag&&g.fakeInput.lastInput!=this)return d.B.stopEvent(t),!1;var e=parseInt(this.render.getAttribute(S),10),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute(v);g.lastEvent=t;var s=g.getLastFocusedCell();!(!g.isDrillDown||!g._dataList.options.depthColumn)&&(e=g._dataList.getRealRowIndex(e)),s.focusedTd!=this.render.parentNode&&(!g.focusedByApi||s.focusedRowIndex===e&&s.focusedColIndex===g.getColumnIndex(o)?g._setFocusedCell(e,o):g._setFocusedCell(e,o,!1));var r=this.reFocus;if(rt.call(this,t),this.reFocus=r,g.focusedByApi=!1,!this.reFocus&&(this.setValue(g._dataList.getCellData(e,o)),g.showFakeInput(this),g.fakeInput.setValue(this.getValue()),"select"===this.options.editType&&this.select(),this.focus(),g.fakeInput.render.parentNode)){var a=g.getColumnIndex(o);d.B.fireEvent(g,"onbeforeedit",i,a,g._dataList.getCellData(e,a))}g.F2Mode=!1,this.reFocus=!1};var at=WebSquare.uiplugin.input.prototype.handleKeydownEvent;O.handleKeydownEvent=function(t){switch(g.lastEvent=t,at.call(this,t),t.keyCode){case 46:return!g.F2Mode&&g.fakeInput.render.parentNode&&(this.setValue(""),g.fakeInput.setValue("")),void d.B.stopPropagation(t);case 27:return g.F2Mode=!1,g.showFakeInput(this),this.setValue(g.dataList.getCellData(g._getFocusedRowIndex(),g.getFocusedColumnIndex())),this.select(),void d.B.stopPropagation(t);case 113:return g.F2Mode=!0,WebSquare.text.setCaretPos(this.render,this.render.value.length),g.hideFakeInput(this),void d.B.stopPropagation(t);case 9:for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_divInput")){d.B.stopPropagation(t);break}return}var i=t.which||t.keyCode;if(!g.nonCharKeys[i])if(32!=i){if(g.fakeInput.render.parentNode){var o=this.render.getAttribute(S),s=g._getGroupbyDisplayRowIndex(o),r=this.render.parentNode.getAttribute(v),a=g.getColumnIndex(r);d.B.fireEvent(g,"onbeforeedit",s,a,g.dataList._getCellData(o,a)),g.hideFakeInput(this)}d.B.stopPropagation(t)}else d.B.stopPropagation(t)},O.activate(),this.fakeInput||this.makeFakeInput()}this.dom[b]=O,l&&this.adaptiveEmbeddedInputIdList.push(b)}return O},y.prototype.getTemporaryDataCollectionItemArr=function(t){try{var e=[],i=this.modelControl.getDataComp(t.dataCompID);if(i)switch(i.initializeType){case"linkedDataList":for(var o={},s=0;s<i.filteredRowIndexArr.length;s++){var a=i.getRealRowIndex(s),n=i._dataList.dataArr[a*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.label]],l=i._dataList.dataArr[a*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}break;case"dataList":for(o={},s=0;s<i.filteredRowIndexArr.length;s++){n=i.dataArr[i.filteredRowIndexArr[s]*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.label]],l=i.dataArr[i.filteredRowIndexArr[s]*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}break;case"dataMap":for(o={},s=0;s<i._dataList.oneRowDataLength;s++){n=i._dataList.dataArr[i.bodyIdColIndexMap[t.itemsetObj.label]],l=i._dataList.dataArr[i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}}return e}catch(t){r.w.printStackTrace(t)}};var v=function(){};v.prototype.initializeHead=function(){try{this.headerObj={},this.headerConfigOptions={};for(var t=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),e=[],i={},o=0;o<t.length;o++){if(i[t[o].id]){var n=WebSquare.language.getMessage("E_comp_duplicated_Msg",t[o].id)||"id["+t[o].id+"] 가 중복사용되었습니다. 소스코드를 확인하세요.";$l(n)}else i[t[o].id]=t[o].id;e.push(t[o])}
var l=a.D.getDataPrefix("header_id"),h=a.D.getDataPrefix("inputType"),d=a.D.getDataPrefix("dataType"),c=a.D.getDataPrefix("value"),u=a.D.getDataPrefix("useLocale"),p=a.D.getDataPrefix("localeRef"),g=a.D.getDataPrefix("sortable"),m=a.D.getDataPrefix("toolTip"),f=a.D.getDataPrefix("useFilter");for(o=0;o<e.length;o++){var b=e[o];if(!b.getAttribute(l)){var y=b.getAttribute(h),v=b.getAttribute(d),w=b.getAttribute(c),S=null;if(this.setConfigOptions(b,w),"checkbox"==y)b.innerHTML="",(S=this.setCheckboxHead(b,w)).headInputType="checkbox";else if("select"==y)(S=this.setSelectboxHead(b,w)).headInputType="select";else if("text"==y&&"own"==v)(S=this.setInputHead(b,w)).headInputType="input";else if("checkcombobox"==y)(S=this.setCheckcomboboxHead(b,w)).headInputType="checkcombobox";else{var C=b.getAttribute(c),_=b.getAttribute(u);if("true"===_||this.options.useLocale&&!_){var x=b.getAttribute(p);if(x){(T=this.getLocaleValue(x))&&(C=T)}else{var I=b.getAttribute("id");if(null!=I&&I.match("RowNumber")&&this.options.rowNumLocaleRef)(T=this.getLocaleValue(this.options.rowNumLocaleRef))&&(C=T);else if(null!=I&&I.match("RowStatus")&&this.options.rowStatusLocaleRef){var T;(T=this.getLocaleValue(this.options.rowStatusLocaleRef))&&(C=T)}}}C=null!=C?C:"",b.innerHTML=this.dataTagOpen+C+this.dataTagClose}var k=b.getAttribute("id");b.setAttribute(l,k);var D=b.className;if("native"===this.options.drawType&&(D+=" "+this.options.gridNativeClass),D+=" "+this.id+"_header__column"+o,this.headCellInfoHash[k]){var L=this.headCellInfoHash[k].getAttribute("class");L&&(D+=" "+L)}if(b.className=D,b.setAttribute("id",this.id+"_"+k),this.options.autoScope&&b.setAttribute("scope","col"),k&&!k.match("RowNumber")&&!k.match("RowStatus")){var W="/WebSquare/"+this.options.pluginName+"/header/column[@inputType='"+y+"']/useFilter/@value",A=a.D.getBoolean(s.v.getConfiguration(W)),M=this.headCellInfoHash[k].getAttribute("useFilter");if((M=""===M||"string"!=typeof M||a.D.getBoolean(M))&&(A||"true"==b.getAttribute(f))){var E="width:100%;height:100%;",q="";this.options.filterShowAlways&&(E+="table-layout:fixed;",q="overflow:hidden;");var R=document.createElement("table");R.style.cssText=E;var N=document.createElement("tr"),F=document.createElement("td");F.style.cssText="width:100%;"+q;for(var O=b.childNodes.length,B=0;b.childNodes.length>0&&B<O;B++)F.appendChild(b.childNodes[0]);N.appendChild(F);var V=document.createElement("td"),P=WebSquare.language.getMessage("Grid_filter_button");if(V.innerHTML="<input type='button' id='"+this.id+"_"+k+"_filter' class='w2trigger w2grid_customFilter_open' onclick='"+this.id+'.showCustomFilter("'+k+"\");' title='"+P+"'/>",N.appendChild(V),R.appendChild(N),b.appendChild(R),this.options.filterShowAlways){var H=document.getElementById(this.id+"_"+k+"_filter");H&&H.parentNode&&(H.parentNode.style.width=H.offsetWidth+2+"px")}}}"true"===b.getAttribute(g)&&(b.className+=" w2grid_head_sortable"),this.headerObj[k]=S,b.disabled=!1;var j=b.getAttribute(m);j&&WebSquare.getBody().setToolTip(b,j)}}this.clearHeaderSort()}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.associateHeaderBody=function(){try{for(var t=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),e=0,i=-1,o="",s=a.D.getDataPrefix("colIndex"),n=a.D.getDataPrefix("header_id"),l=a.D.getDataPrefix("col_id"),h=0;h<t.length;h++){var d=t[h];if(d.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||d.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0);else{var c=d.getAttribute(s);parseInt(c)<=i&&e++,i=parseInt(c);var u=e;u+1>this.tempTr.rows.length&&(u=this.tempTr.rows.length-1);for(var p=null;u>=0;){for(var g=this.tempTr.rows[u],m=a.D.first(g);m;){if(c==m.getAttribute(s)){p=m;break}m=a.D.next(m)}if(p)break;u--}if(p){var f=d.getAttribute(n),b=p.getAttribute(l);o=b,this.headerToBodyRelation[f]=b,this.bodyToHeaderRelation[b]=f}else{f=d.getAttribute(n);this.passiveColSpanRelation[f]=o}}}}catch(t){r.w.printStackTrace(t,null,this)}},
v.prototype.setConfigOptions=function(t,e){try{var i=a.D.getDataPrefix("col_id"),o=a.D.getDataPrefix("inputType"),n=t.getAttribute(i),l=this.options.pluginName,h=t.getAttribute(o);this.headerConfigOptions[n]=s.v.getConfig(l+"/header[@inputType='"+h+"']")}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderConfigValue=function(t,e,i){try{var o=a.D.getDataPrefix("col_id"),s=t.getAttribute(o),n=t&&(t.getAttribute(i)||t.getAttribute(i.toLowerCase())),l=this.headerConfigOptions[s]&&this.headerConfigOptions[s][i];return n||l||""}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setCheckboxHead=function(t,e){try{var i=a.D.getDataPrefix("col_id"),o=a.D.getDataPrefix("onChangeFunction"),n=a.D.getDataPrefix("onchangeFunction"),l=a.D.getDataPrefix("localeRef"),h=a.D.getDataPrefix("checkboxLabel"),c=a.D.getDataPrefix("colId"),u=t.getAttribute(i),p=t.getAttribute(o)||t.getAttribute(n),g="<INPUT type='checkbox' />",m=this.getHeaderConfigValue(t,e,h);if(this.options.useLocale){var f=t.getAttribute(l);if(f){var b=this.getLocaleValue(f);b&&(m=b)}}if(m){var y=this.uuid+"_header__"+u+"_checkboxLabel_",v=y+"_id",w=" for='"+v+"'";!1===this.options.useHeaderCheckboxLabelFor&&(w=""),g="left"===this.getHeaderConfigValue(t,e,"checkboxLabelPosition")?"<label class='w2checkbox_label'"+w+">"+m+"</label><INPUT type='checkbox' name='"+y+"' id='"+v+"'/>":"<INPUT type='checkbox' name='"+y+"' id='"+v+"'/><label class='w2checkbox_label'"+w+">"+m+"</label>",t.getAttribute(h)||t.setAttribute(h,m)}t.innerHTML=g;var S=t.getElementsByTagName("input")[0];S.setAttribute(c,e),("true"==t.getAttribute("disabled")||a.D.isIE()&&parseInt(s.v.browserVersion(),10)<9&&"true"==this.headCellInfoHash[u].getAttribute("disabled"))&&S.setAttribute("disabled","disabled");var C=t.getAttribute("title");C&&S.setAttribute("title",C);var _=this;d.B.addListener(S,"onkeydown",(function(t){d.B.fireEvent(_,"onkeydown",t),"32"==(t.charCode?t.charCode:t.keyCode)&&d.B.stopPropagation(t)})),d.B.addListener(S,"ondblclick",(function(t){d.B.stopPropagation(t)})),d.B.addListener(S,"onfocus",(function(t){var e=_.headerToBodyRelation[u];_.getCellInfo(e).options.focusOutOnCheckHeaderClick&&(_.removeFocusedCell(),1==_.options.senseReader&&_.rowIndex>0&&_.addGridScroll(0-_.rowIndex))}));var x=this.uuid;return null!=p&&""!=p?d.B.addListener(S,"onclick",(function(t){if(!WebSquare.idCache[x].options.checkHeaderOnly){_.noevent=!0;var i=a.D.getGlobalFunction(p,_.scope_id);if("function"==typeof i)try{i.call(this,this.checked,e)}catch(t){}_.options.preventMultipleClick&&d.B.fireEvent(_,"onheaderclick",u)}})):d.B.addListener(S,"onclick",(function(t){if(!WebSquare.idCache[x].options.checkHeaderOnly){_.noevent=!0;var e,i,o,s,a,n,l,h=_.headerToBodyRelation[u],c=_.getCellInfo(h),p=c,g=c.options.trueValue,m=c.options.falseValue,f=!(!_.isDrillDown||!_._dataList.options.depthColumn),b=!("checkbox"!==c.options.inputType||!_.options.ref);if(!0===b){var y=_._dataList._getXPath({colID:h,skipValueNode:!0});b=(e=WebSquare.ModelUtil.findInstanceNodes(y,null,_.scope_id)).length>=_.getTotalRow()}if("checkbox"===c.options.inputType||"custom"===c.options.inputType||"radio"===c.options.inputType){if(_.editedCell)try{a=_.editedCell.editRowIndex,n=_.getColumnIndex(_.editedCell.id);var v=_._dataList.getColumnIndex(_.editedCell.id);s=_._grid.getRealRowIndex(a)*_._dataList.getColumnCount()+v,o=_._dataList.dataArr[s]}catch(t){r.w.printStackTrace(t,null,this)}if(this.checked){for(var w=_.getUnCheckedIndex(h),S=0;S<w.length;S++)if("custom"==c.options.inputType&&0==c.internal&&(p=c.cellManagerHashByRowIndex[w[S]])&&(g=p.options.trueValue,m=p.options.falseValue),p.options.checkAlways||!_.___getEditReadOnly(w[S],h,f)&&!_._getEditDisabled(w[S],h,f)){var C=w[S];f?_._dataList._setCellData(C,h,g,!0,!0,null,null,b):_.dataList.setCellData(C,h,g,!0,!0,null,null,b),i=g;var I=C;f&&(I=_._dataList.getFilteredRowIndex(I)),null!=I&&_._dataList.broadcast({gridView:["notifyCellChanged",[I,h,null,!0]]}),
p.options.checkHeaderOnViewchange&&d.B.fireEvent(_,"onviewchange",{oldValue:m,newValue:g,rowIndex:C,colIndex:_.getColumnIndex(h),colId:_.getColumnID(_.getColumnIndex(h))})}}else{var T=_.getCheckedIndex(h);for(S=0;S<T.length;S++)if("custom"==c.options.inputType&&0==c.internal&&(p=c.cellManagerHashByRowIndex[T[S]])&&(g=p.options.trueValue,m=p.options.falseValue),p.options.checkAlways||!_.___getEditReadOnly(T[S],h,f)&&!_._getEditDisabled(T[S],h,f)){C=T[S];f?_._dataList._setCellData(C,h,m,!0,!0,null,null,b):_.dataList.setCellData(C,h,m,!0,!0,null,null,b),i=m;I=C;f&&(I=_._dataList.getFilteredRowIndex(I)),null!=I&&_._dataList.broadcast({gridView:["notifyCellChanged",[I,h,null,!0]]}),p.options.checkHeaderOnViewchange&&d.B.fireEvent(_,"onviewchange",{oldValue:m,newValue:g,rowIndex:C,colIndex:_.getColumnIndex(h),colId:_.getColumnID(_.getColumnIndex(h))})}}if(_.checkHeader(u),!0===b)for(S=0;S<e.length;S++){var k=e[S];(p.options.checkAlways||!_.___getEditReadOnly(S,h,f)&&!_._getEditDisabled(S,h,f))&&(_._dataList.valueNode?k.setAttribute(_._dataList.valueNode,i):WebSquare.xml.setTextNodeValue(k,i))}_._dataList.broadcast({linkedDataList:["notifyRowChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"})}else if(_.options.titleAuto){var D=!0===this.checked?WebSquare.language.getMessage("Grid_title"):WebSquare.language.getMessage("Grid_title_not_choose");this.setAttribute("title",D)}if(_.options.senseReader&&_.rowIndex<=0&&(_.senseReaderMode=!0,_._setGridBorderNoRefresh=!0),_.options.senseReader&&_.rowIndex<=0&&(_.senseReaderMode=!1,_._setGridBorderNoRefresh=!1),_.drawFooter(),_.drawHeader(),_.options.preventMultipleClick&&d.B.fireEvent(_,"onheaderclick",u),null!=s)try{var L=_._dataList.dataArr[s];l=_.getColumnID(n),o!=L&&d.B.fireEvent(_,"onviewchange",{oldValue:o,newValue:L,rowIndex:a,colIndex:n,colId:l})}catch(t){r.w.printStackTrace(t,null,this)}}})),S}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.checkHeader=function(t){try{if(this.headerObj){var e=this.headerObj[t],i=this.headerToBodyRelation[t],o=this.headerInfoHash[t];if(e&&o&&o.options&&"checkbox"==o.options.inputType){var s=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=this.getCellInfo(i),l=s?this.getTotalRow():this.getRowCount();if("checkbox"!==n.options.inputType&&"custom"!==n.options.inputType&&"radio"!==n.options.inputType){if(this.options.titleAuto){var h=!0===e.checked?WebSquare.language.getMessage("Grid_title"):WebSquare.language.getMessage("Grid_title_not_choose");e.setAttribute("title",h)}return}if(this.hasCustomInputType&&0==n.internal&&"custom"==n.options.inputType){for(var d=l,c=0;c<d;c++){var u=s?c:this.dataList.getRealRowIndex(c),p=n.cellManagerHashByRowIndex[u]?n.cellManagerHashByRowIndex[u]:n;"checkbox"!=p.options.inputType&&"radio"!=p.options.inputType&&l--}if(0===l)return}var g="exclude"===this.options.checkAllType?this.getCheckedIndex(i,!0):this.getCheckedIndex(i),m=g.length;if(0==l)e.checked=!1,e.indeterminate=!1;else if(l==m)e.checked=!0,e.indeterminate=!1;else if(m>0){var f=!1;if(n.options.checkAlways)n.options.usePartialCheck&&"uncheck"===n.options.partialCheckNextClick&&(f=!0);else{for(c=0;c<g.length;c++)if(!this.___getEditReadOnly(g[c],i,s)&&!this._getEditDisabled(g[c],i,s)){(n.options.usePartialCheck||a.D.isIEAllVersion())&&(f=!0);break}n.options.usePartialCheck&&"check"===n.options.partialCheckNextClick&&f&&(f=!1)}a.D.isIEAllVersion()?e.checked=!f:e.checked=f,n.options.usePartialCheck&&(e.indeterminate=!0)}else l-m==l&&(e.checked=!1,e.indeterminate=!1);if(this.options.titleAuto)h=e.checked?n.options.usePartialCheck&&e.indeterminate?WebSquare.language.getMessage("Grid_title_partial"):WebSquare.language.getMessage("Grid_title"):WebSquare.language.getMessage("Grid_title_not_choose"),e.setAttribute("title",h)}}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setSelectboxHead=function(t,e){try{
var i,o=this,n=t.getAttribute("id"),l=this.headCellInfoHash[n];if("json"===l._elementType)(i=l.cloneNode(!0)._element).N="w2:select",i.A={style:"width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"};else{this.tmpSelectbox||(this.tmpSelectbox=new WebSquare.uiplugin.selectbox("___tmp_selectbox__"+this.id,{},null));var h=WebSquare.Elem.api.getElementsByTagName(l,"choices",s.v._XML_NAMESPACE.W2)[0],d=WebSquare.xml.serialize(h);for(var c in i=WebSquare.xml.parse('<w2:select xmlns:w2="http://www.inswave.com/websquare">'+d+"</w2:select>",!0).documentElement,this.tmpSelectbox.options){var u=t.getAttribute(c);null!=u&&""!=u&&("style"==c&&(u="width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"),i.setAttribute(c,u))}a.D.isIE(8)&&"true"==this.headCellInfoHash[n].getAttribute("disabled")&&i.setAttribute("disabled","true")}t.style.position="static",t.innerHTML="";var p=WebSquare.controlFactory.createControl(this.id+"_head_selectbox_"+t.getAttribute("id"),{pluginType:"uiplugin.selectbox",pluginName:"selectbox"},i,this.scope_obj,!0,this.parentFrame);p.writeTo(t),window[p.id]=p,p.activate(),p.itemArr.length>0&&p.setValueNM(p.itemArr[0].value);var g=a.D.getDataPrefix("onChangeFunction"),m=a.D.getDataPrefix("onchangeFunction"),f=t.getAttribute(g)||t.getAttribute(m);return p.changeFuncName=f,p.colId=e,p.headerId=n,p.addEvent("onchange",(function(t){var e=a.D.getGlobalFunction(this.changeFuncName,this.scope_id);if("function"==typeof e)try{e.call(this,this.getValue(),this.colId,this.headerId)}catch(t){}})),p.addEvent("onclick",(function(t){o.noevent=!0})),this.addControl(p),p}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setInputHead=function(t,e){try{t.innerHTML="<input type='text' class='w2grid_head_input' style='width:95%; height:18px;' />";var i=a.D.first(t),o=this,s=a.D.getDataPrefix("onChangeFunction"),n=a.D.getDataPrefix("onchangeFunction"),l=a.D.getDataPrefix("changeFuncName"),h=a.D.getDataPrefix("colId"),c=a.D.getDataPrefix("col_id"),u=t.getAttribute(s)||t.getAttribute(n);i.setAttribute(l,u),i.setAttribute(h,e),i.scope_id=this.scope_id,i.headerId=t.getAttribute(c);var p=WebSquare.idCache[this.uuid];return d.B.addListener(i,"onfocus",(function(){o.noevent=!0,o.headerFocus=!0})),d.B.addListener(i,"onblur",(function(t){o.headerFocus=!1;var e=a.D.getGlobalFunction(this.getAttribute(l),this.scope_id);if("function"==typeof e)try{e.call(this,this.value,this.getAttribute(h),this.headerId)}catch(t){}})),d.B.addListener(i,"onclick",(function(t){o.noevent=!0})),d.B.addListener(i,"onkeyup",(function(t){13==t.keyCode&&this.blur()})),d.B.addListener(i,"onpaste",(function(t){p.options.preventPaste?d.B.preventDefault(t):13==t.keyCode&&this.blur()})),i}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setCheckcomboboxHead=function(t,e){try{var i,o=this,n=t.getAttribute("id"),l=this.headCellInfoHash[n];if("json"===l._elementType)(i=l.cloneNode(!0)._element).N="w2:checkcombobox",i.A={style:"width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"};else{this.tmpCheckcombobox||(this.tmpCheckcombobox=new WebSquare.uiplugin.checkcombobox("___tmp_checkcombobox__"+this.id,{},null));var h=WebSquare.Elem.api.getElementsByTagName(l,"choices",s.v._XML_NAMESPACE.W2)[0],d=WebSquare.xml.serialize(h);for(var c in i=WebSquare.xml.parse('<w2:checkcombobox xmlns:w2="http://www.inswave.com/websquare">'+d+"</w2:checkcombobox>",!0).documentElement,this.tmpCheckcombobox.options){var u=t.getAttribute(c);null!=u&&""!=u&&("style"==c&&(u="width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"),i.setAttribute(c,u))}}t.style.position="static",t.innerHTML="";var p=WebSquare.controlFactory.createControl(this.id+"_head_checkcombobox_"+t.getAttribute("id"),{pluginType:"uiplugin.checkcombobox",pluginName:"checkcombobox"},i,this.scope_obj,!0,this.parentFrame);p.writeTo(t),window[p.id]=p,p.activate(),p.itemArr.length>0&&p.setValueNM(p.itemArr[0].value)
;var g=a.D.getDataPrefix("onChangeFunction"),m=a.D.getDataPrefix("onchangeFunction"),f=t.getAttribute(g)||t.getAttribute(m);return p.changeFuncName=f,p.colId=e,p.headerId=n,p.addEvent("onchange",(function(t){var e=a.D.getGlobalFunction(this.changeFuncName,this.scope_id);if("function"==typeof e)try{e.call(this,this.getValue(),this.colId,this.headerId)}catch(t){}})),p.addEvent("onclick",(function(t){o.noevent=!0})),p}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderDIV=function(t){return this.getHeaderLayer(t)},v.prototype.getHeaderLayer=function(t){for(var e=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),i=a.D.getDataPrefix("header_id"),o=0;o<e.length;o++){var s=e[o],r=s.getAttribute(i);if(null!=r&&null!=t&&t.toLowerCase()==r.toLowerCase())return s}},v.prototype.getHeaderInfo=function(t){try{return this.headerInfoHash[t]||{options:{}}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getTotalHeaderCol=function(t){try{for(var e=0,i=this.htmlInfo.head.headerTdHtml,o=0,s=i.length;o<s;o++)e+=i[o].length;return t&&t.defaultColumn&&(e+=this.defaultColCnt),e}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderColumnVisible=function(t){var e=this.getHeaderInfo(t),i=this._getRealColIndex("head",t),o=i+this.defaultColCnt,s=!this.hiddenList[o];if(e&&(0===i||i)){for(var r=0;r<e.options.colSpan;r++)s=!this.hiddenList[o+r]||s;return s}c.k.printLog("[getHeaderColumnVisible] 존재하지 않는 header 컬럼입니다.")},v.prototype.setHeaderValue=function(t,e,i){var o=this.getHeaderLayer(t);if(o)if("function"==typeof e)e(o);else{var s=this.headerObj[t],r=e;i&&(e=this.getFormattedHeaderValue(t,e));var n=a.D.getDataPrefix("value");if(s)if("select"==s.headInputType||"checkcombobox"==s.headInputType)s.setValue(e);else if("checkbox"==s.headInputType)s.checked!=a.D.getBoolean(e)&&(s.click(),s.checked=a.D.getBoolean(e));else if("input"==s.headInputType){if(s.value!=e){s.value=e;var l=a.D.getGlobalFunction(s.getAttribute("changeFuncName"),this.scope_id);if("function"==typeof l)try{l.call(s,s.value,s.getAttribute("colId"))}catch(t){}}}else"user"==s.headerInputType&&s.setValue(e);else{this.headerDataObj&&t&&(this.headerDataObj[t].value=r);var h=o.getElementsByTagName(this.options.dataTag)[0];h?("NOBR"==h.tagName||"SPAN"==h.tagName&&h.className.indexOf("w2grid_span")>-1)&&(h.innerHTML=e):o.innerHTML=this.dataTagOpen+e+this.dataTagClose}o.setAttribute(n,e);for(var d=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],c=WebSquare.Elem.api.getElementsByTagName(d,"w2:column"),u=0;u<c.length;u++){var p=c[u];if(t==p.getAttribute("id")){p.setAttribute("value",e);break}}}},v.prototype.setHeaderNodeSet=function(t,e,i,o){if(this.getHeaderLayer(t)){var s=this.headerObj[t];s&&("select"!=s.headInputType&&"checkcombobox"!=s.headInputType||s.setNodeSet(e,i,o))}},v.prototype.setHeaderUserObject=function(t,e){this.headerObj[t]=e,e.headerInputType="user";var i=this.getHeaderLayer(t);i.innerHTML="",i.appendChild(e.getContent())},v.prototype.getHeaderValue=function(t){var e="";if(t&&(e=this.getHeaderLayer(t)),e){var i=a.D.getDataPrefix("inputtype"),o=a.D.getDataPrefix("usefilter"),s=a.D.getDataPrefix("value");if(!this.options.titleAuto||"text"!=e.getAttribute(i)){var r=this.headerObj[t];if(r){var n="";if("select"==r.headInputType||"checkcombobox"==r.headInputType)n=r.getValue();else if("checkbox"==r.headInputType){n=!r.indeterminate&&r.checked;var l=this.headerToBodyRelation[t];if(this.options.returnTrueFalseValue&&l){var h=this.getCellInfo(l),d=h.options.trueValue,c=h.options.falseValue;n&&d?n=d:c&&(n=c)}}else"input"==r.headInputType?n=r.value:"user"==r.headerInputType&&(n=r.getValue());return n}if(a.D.getBoolean(e.getAttribute(o)))return e.getAttribute(s);var u=a.D.first(e),p=u.getElementsByTagName(this.options.dataTag.toUpperCase())[0];if(p)u=p;else for(p=u;p&&"NOBR"!=p.tagName&&!("SPAN"==p.tagName&&p.className.indexOf("w2grid_span")>-1);){if("TD"==p.tagName){u=a.D.first(p);break}p=a.D.first(p)}
return u?u.innerHTML:""}var g=e.getElementsByTagName(this.options.dataTag.toUpperCase())[0];if(g&&("NOBR"==g.tagName||"SPAN"==g.tagName&&g.className.indexOf("w2grid_span")>-1))return null!=g.textContent?g.textContent:g.innerHTML||""}},v.prototype.getFormattedHeaderValue=function(t,e){var i=this.getHeaderLayer(t);if(i){var o=a.D.getDataPrefix("header_id");return this.headerDataObj[i.getAttribute(o)]&&(e=this.headerDataObj[i.getAttribute(o)].formatter.format(e)),e}},v.prototype.getHeaderValueList=function(t){for(var e=[],i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),o=a.D.getDataPrefix("header_id"),s=a.D.getDataPrefix("inputtype"),r=0;r<i.length;r++)if(null==this.hiddenList[r]||1==t||1!=this.hiddenList[r]){var n=i[r],l=n.getAttribute(o);if(null!=l&&n)if(this.options.captionAuto||this.options.summaryOnlyAuto){if("text"!=n.getAttribute(s))continue;var h=n.getElementsByTagName(this.options.dataTag.toUpperCase())[0];(h&&"NOBR"==h.tagName||"SPAN"==h.tagName&&h.className.indexOf("w2grid_span")>-1)&&(null!=h.innerText&&""!=h.innerText&&"\n"!=h.innerText?e.push(h.innerText):null!=h.textContent&&""!=h.textContent?e.push(h.textContent):null!=h.innerHTML&&""!=h.innerHTML?e.push(h.innerHTML):e.push(""))}else{var d,c=this.headerObj[l];c&&("select"==c.headInputType||"checkcombobox"==c.headInputType?d=c.getValue():"checkbox"==c.headInputType?d=c.checked:"input"==c.headInputType?d=c.value:"user"==c.headerInputType&&(d=c.getValue()),e.push(d));for(var u=a.D.first(n),p=u;p&&"NOBR"!=p.tagName&&!("SPAN"==p.tagName&&p.className.indexOf("w2grid_span")>-1);){if("TD"==p.tagName){u=a.D.first(p);break}p=a.D.first(p)}u?e.push(u.innerHTML):e.push("")}}return e},v.prototype.getHeaderSpan=function(t,e){for(var i=0;i<this.htmlInfo.head.rowArr.length;i++)for(var o=0;o<this.htmlInfo.head.rowArr[i].length;o++)if(this.htmlInfo.head.rowArr[i][o].id===t){if("row"===e)return this.htmlInfo.head.rowArr[i][o].rowSpan;if("col"===e)return this.htmlInfo.head.rowArr[i][o].colSpan}},v.prototype.getHeaderInputType=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return this.htmlInfo.head.rowArr[e][i].inputType},v.prototype.getSortableArr=function(){for(var t=[],e=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),i=a.D.getDataPrefix("sortable"),o=0;o<e.length;o++)"true"===e[o].getAttribute(i)?t.push(!0):"false"===e[o].getAttribute(i)?t.push(!1):1==this.options.sortable?t.push(!0):t.push(!1);return t},v.prototype.getSortableStatus=function(){return this.headerSortStatusArr.slice(0)},v.prototype.setSortable=function(t,e,i){try{i=i||{};var o=this.getElementById(this.id+"_"+t);if(null==o)return void c.k.printLog("headerId : "+t+"를 찾을 수 없습니다.["+this.id+"]");if(!0!==e&&!1!==e)return;var s=a.D.getDataPrefix("sortable"),n=o.getAttribute(s)||this.options.sortable;if(a.D.getBoolean(n)!==a.D.getBoolean(e)&&(o.setAttribute(s,e),!0!==i.keepSortImage)){for(var l,h=0;h<this.headerSortStatusArr.length;h++){var d=this.headerToBodyRelation[t];if(d===this.headerSortStatusArr[h].colID){l=d;break}}l?!1===e?this.setHeaderSortImage(t,0,0):this.setHeaderSortImage(t,this.headerSortStatusArr[l].sortOrder,0):this.options.showSortableImage&&!0===e&&this.setHeaderSortImage(t,0,0)}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.clearHeaderSort=function(){this.headerSortStatusArr=[];for(var t=a.D.getDataPrefix("sortable"),e=a.D.getDataPrefix("header_id"),i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),o=this.htmlInfo.head.rowArr,s=0;s<i.length;s++){if("_headerRowNumber"!==(c=i[s].getAttribute(e))&&"_headerRowStatus"!==c&&("false"!==i[s].getAttribute(t)||!0===this.options.showSortableImage)){if(o.length>1&&"top"==this.options.sortedImagePosition)for(var r=this.headerToBodyRelation[c],n=this.getColumnIndex(r),l=o[0],h=0;h<l.length;h++)if(l[h]["@col"]==n){c=l[h].id;break}var d=this.headerObj[c]
;d&&"user"==d.headerInputType||this.setHeaderSortImage(c,0,0)}}for(s=0;s<i.length;s++){var c="";i[s].getElementsByClassName("w2grid_customFilter_open").length>0?(c=i[s].getAttribute(e),this._lastHeaderElementType="filter"):i[s].getElementsByClassName("w2grid_head_sort_div_main_btn").length>0&&(c=i[s].getAttribute(e),this._lastHeaderElementType="sort"),c&&(this._lastHeaderElementId=c)}},v.prototype.drawHeaderSortImages=function(){for(var t=this.htmlInfo.head.rowArr,e=0;e<this.headerSortStatusArr.length;e++){var i="";if(t.length>1&&"top"==this.options.sortedImagePosition){for(var o=this.headerSortStatusArr[e].colID,s=this.getColumnIndex(o),r=t[0],a=0;a<r.length;a++)if(r[a]["@col"]==s){i=r[a].id;break}}else if(!(i=this.bodyToHeaderRelation[this.headerSortStatusArr[e].colID])){var n=this.headerSortStatusArr[e].colID,l=this.getColumnIndex(n);for(l--;l>=0&&(n=this.getColumnID(l),!(i=this.bodyToHeaderRelation[n]));)l--}i&&this.setHeaderSortImage(i,this.headerSortStatusArr[e].sortOrder,e+1)}},v.prototype.setHeaderSortImage=function(t,e,i){var o=this.getElementById(this.id+"_"+t);if(null!=o){e=parseInt(e,10),i=parseInt(i,10);isNaN(i)||i<=0||this.headerSortStatusArr.length<2?i="":i+="",this._clearHeaderSortImage(o,"table"),this._clearHeaderSortImage(o,"div");var r="",n=this.options.showSortableImage,l=a.D.getDataPrefix("sortable"),h=a.D.getDataPrefix("inputType");if(this.options.showSortableImage){var d=o.getAttribute(l);n=!!(r=d?a.D.getBoolean(d):this.options.sortable)}var u=o.getAttribute(h),p="/WebSquare/"+this.options.pluginName+"/header/column[@inputType='"+u+"']/useFilter/@value",g=a.D.getBoolean(s.v.getConfiguration(p)),m=a.D.getDataPrefix("useFilter"),f=o.getAttribute(m);f=""===f||"string"!=typeof f||a.D.getBoolean(f);var b=!1,y=!1,v=!1;if(0===this.getDataLength()&&this.options.hideSortIconOnNoData&&(v=!0),0===this.getDataLength()&&this.options.hideFilterIconOnNoData&&(y=!0),f&&(g||"true"==o.getAttribute(m))){b=!0;var w=y?"none":"",S=o.getElementsByTagName("input");S&&S[0]&&(S[0].style.display=w)}if(!0!==this.options.showSortableImage){var C;if(0!==e){C=a.D.first(o);var _=null,x=null,I=null;try{this._useCheckboxLabel(t)&&(x=document.createElement("div"),_=a.D.next(C),x.appendChild(_))}catch(t){}"nobr"==C.nodeName.toLowerCase()||"span"==C.nodeName.toLowerCase()&&C.className.indexOf("w2grid_span")>-1?(C=o.innerHTML,o.innerHTML=""):C=o.removeChild(C),this.headerObjArr[t]=C;var T=1==e?"w2grid_head_sort_asc":"w2grid_head_sort_desc",k=0,D="w2grid_head_sort_table_main",L="w2grid_head_sort_td",W="<table "+(V=a.D.getDataPrefix("sort"))+"='sort' class='"+D+"'><tr><td></td><td class='"+L+" "+T+"'>"+i+"</td></tr></table>";"left"===this.options.sortedIconPosition&&(k=1,W="<table "+V+"='sort' class='"+D+"'><tr><td class='"+L+" "+T+"'>"+i+"</td><td></td></tr></table>"),o.innerHTML=W;var A=o.getElementsByTagName("td");"string"==typeof C?A[k].innerHTML=C:(A[k].appendChild(C),_&&x&&(A[k].appendChild(x.removeChild(_)),x=null))}}else{var M=this.headerObj[t];if(M)M.render&&(M=M.render);else{var E=o.getElementsByTagName(this.options.dataTag)[0];(E&&"NOBR"==E.tagName||"SPAN"==E.tagName&&E.className.indexOf("w2grid_span")>-1)&&(M=E)}_=null;var q=null;try{this._useCheckboxLabel(t)&&("left"===this.headerInfoHash2[t].getAttribute("checkboxLabelPosition")?(q="left",x=document.createElement("div"),_=a.D.prev(M),x.appendChild(_)):(x=document.createElement("div"),_=a.D.next(M),x.appendChild(_)))}catch(t){}try{b&&this.options.showSortableUseFilter&&(I=o.getElementsByTagName("input")[0])}catch(t){}M.parentNode.removeChild(M);T="";var R="";switch(e){case 0:!1!==n||r?(T="w2grid_head_sort_none",R=WebSquare.language.getMessage("Grid_sort_asc")):(T="w2grid_head_sort_image_none",R="");break;case 1:T="w2grid_head_sort_asc",R=WebSquare.language.getMessage("Grid_sort_desc");break;case-1:T="w2grid_head_sort_desc",R=WebSquare.language.getMessage("Grid_sort_none");break;default:T="w2grid_head_sort_none",R=WebSquare.language.getMessage("Grid_sort_asc")}
if(this.options.sortHeaderDiv){T+="_btn";var N=v?"style = 'display:none'":"";V=a.D.getDataPrefix("sort");o.innerHTML="<div "+V+"='sort' class='w2grid_head_sort_div_main_outer'><button class='w2grid_head_sort_div_main_btn "+T+"'"+N+" >"+R+"</button></div>";A=o.getElementsByTagName("div");var F=o.getElementsByTagName("button")[0];if(A[0].insertBefore(M,F),_&&x)this._useCheckboxLabel(t)&&"left"!==this.headerInfoHash2[t].getAttribute("checkboxLabelPosition")?A[0].insertBefore(x.removeChild(_),F):A[0].insertBefore(x.removeChild(_),M),x=null;else if(b&&this.options.showSortableUseFilter){H=A[0].parentElement;(P=document.createElement("div")).appendChild(A[0]),P.appendChild(I),this.addClass(P,"w2grid_head_sort_div_main_outer_box"),H.appendChild(P),this.addClass(I,"w2grid_customFilter_sortable_open"),a.D.isIE()&&parseInt(s.v.browserVersion(),10)<8?this.addClass(A[1],"w2grid_head_sort_usefilter_div_main_ie"):this.addClass(A[1],"w2grid_head_sort_usefilter_div_main")}}else{var O="w2grid_head_sort_div_main",B="w2grid_head_sort_div_sub";"left"===this.options.sortedIconPosition&&(O="w2grid_head_sort_div_main_left"),!0===this.options.showSortableImage&&(B="left"===this.options.sortedIconPosition?"w2grid_head_sort_div_sub_sortable_image_left":"w2grid_head_sort_div_sub_sortable_image"),v&&(T="");var V=a.D.getDataPrefix("sort");if(o.innerHTML="<div "+V+"='sort' class = '"+O+" "+T+"'><div class = '"+B+"'>"+i+"</div></div>",(A=o.getElementsByTagName("div"))[0].appendChild(M),_&&x)"left"===q?A[0].insertBefore(x.removeChild(_),M):A[0].appendChild(x.removeChild(_)),x=null;else if(b&&this.options.showSortableUseFilter){var P,H=A[0].parentElement;(P=document.createElement("div")).appendChild(A[0]),P.appendChild(I),this.addClass(P,"w2grid_head_sort_div_main_outer_box"),H.appendChild(P),this.addClass(I,"w2grid_customFilter_sortable_open"),a.D.isIE()&&parseInt(s.v.browserVersion(),10)<8?this.addClass(A[1],"w2grid_head_sort_usefilter_div_main_ie"):this.addClass(A[1],"w2grid_head_sort_usefilter_div_main")}}}}else c.k.printLog("headerId : "+t+"를 찾을 수 없습니다.["+this.id+"]")},v.prototype._clearHeaderSortImage=function(t,e){var i=t.getElementsByTagName(e),o=a.D.getDataPrefix("sort"),s=a.D.getDataPrefix("header_id");if(i.length>0&&"sort"==i[0].getAttribute(o)){var r=t.getAttribute(s),n=this.headerObjArr[r];if(n)if("string"==typeof n)t.innerHTML=n;else{var l=null,h=null;try{this._useCheckboxLabel(r)&&(h=document.createElement("div"),l=a.D.next(n),h.appendChild(l))}catch(t){}n=t.appendChild(n),l&&h&&(t.appendChild(h.removeChild(l)),h=null),t.removeChild(n.previousSibling)}}},v.prototype.getColIdByHeaderId=function(t){return this.headerToBodyRelation[t]},v.prototype.setHeaderHide=function(t){if(t=a.D.getBoolean(t),this.options.hideHeader!=t){this.options.hideHeader=t;var e=this.getElementById(this.id+"_head_table"),i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));if(t){e.style.display="none";for(var o=0;o<i.length;o++){var s=i[o].getAttribute("class");null!=s&&(i[o].setAttribute("data-bkclass",s),i[o].removeAttribute("class"))}}else{e.style.display="";for(o=0;o<i.length;o++){var r=i[o].getAttribute("data-bkclass");null!=r&&(i[o].setAttribute("class",r),i[o].removeAttribute("data-bkclass"))}}this.refresh(),this.setScrollYHeight()}},v.prototype.setHeaderDisabled=function(t,e){try{e=a.D.getBoolean(e);var i=this.getHeaderLayer(t);if(i){var o=this.headerObj[t];o?(o.setDisabled?o.setDisabled(e):o.render?o.render.disabled=e:o.disabled=e,i.disabled=e):i.disabled=e}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype._getHeaderDisabled=function(t){try{var e=!1,i=this.getHeaderLayer(t);if(i){var o=this.headerObj[t];o?o.getDisabled?e=o.getDisabled():o.render?e=o.render.disabled:o.disabled&&(e=o.disabled):i.disabled&&(e=i.disabled)}return e}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderID=function(t){try{if("string"==typeof t)return t;var e=this.head_table;if(!e)return null
;for(var i=t+=this.defaultColCnt,o=0,s=0;s<e.children.length;s++){var a=e.children[s].children;if((o+=a.length)>t){var n=a[i];return n?n.id.replace(this.id+"_",""):null}i-=a.length}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderIDArr=function(t){try{if("string"==typeof t)return t;var e=this.head_table;if(!e)return null;for(var i=t+=this.defaultColCnt,o=0,s=[],a=0;a<e.children.length;a++){var n=e.children[a].children;if((o+=n.length)>t){var l=n[i];l&&s.push(l.id.replace(this.id+"_",""))}else i-=n.length}return s}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderIndex=function(t){try{if("number"==typeof t)return t;var e=this.head_table;e||(e=this.getElementById(this.id+"_head_table"));for(var i=0,o=0;o<e.children.length;o++){for(var s=e.children[o].children,a=0;a<s.length;a++){if(s[a].id.replace(this.id+"_","")==t)return i+a-this.defaultColCnt}i+=s.length}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderRowIndex=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return e},v.prototype.getHeaderColIndex=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return this.htmlInfo.head.rowArr[e][i].colIndex},v.prototype.getHeaderColID=function(t,e){try{void 0!==e&&null!=e||(e={});for(var i="",o=this.struct.head.rowArr,s=!0===e.firstRow?1:o.length,a=0;a<s;a++){for(var n=o[a],l=0;l<n.length;l++)if(n[l].colIndex===t){i=n[l].id;break}if(i)break}return i}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setHeaderStyle=function(t,e,i){try{var o,s=a.D.getDataPrefix("header_id"),n=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=(o=n[t+this.defaultColCnt]).getAttribute(s)}for(var l=0;l<n.length;l++)(o=n[l]).getAttribute(s)==t&&WebSquare.style.setStyle(o,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setHeaderClass=function(t,e){try{var i,o=a.D.getDataPrefix("header_id"),s=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=(i=s[t+this.defaultColCnt]).getAttribute(o)}for(var n=0;n<s.length;n++)(i=s[n]).getAttribute(o)==t&&(this.addClass(i,e),this.headerCellClassObj[t]=e)}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.getHeaderClass=function(t){try{var e=a.D.getDataPrefix("header_id"),i=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=i[t+this.defaultColCnt].getAttribute(e)}for(var o=0;o<i.length;o++)if(i[o].getAttribute(e)==t)return this.headerCellClassObj[t]}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.removeHeaderClass=function(t,e){try{var i,o=a.D.getDataPrefix("header_id"),s=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=(i=s[t+this.defaultColCnt]).getAttribute(o)}for(var n=0;n<s.length;n++)(i=s[n]).getAttribute(o)==t&&(this.removeClass(i,e),delete this.headerCellClassObj[t])}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.drawHeader=function(t,e){try{if(!this.head_table)return;null==this.headerDataObj&&this.initHeaderDataObj();var i=this.head_table.getElementsByTagName("th");this.headerTempSum=[];var o=a.D.getDataPrefix("header_id");if(t){t=this.getColumnID(t);for(var s=0;s<i.length;s++){
if(d=(h=i[s]).getAttribute(o))if(c=this.headerDataObj[d])if("expression"==c.inputType){var n=c.expression.match(/headercol(sum|avg|max|min)\s*\([^\)]*/g);if(n)for(var l=0;l<n.length;l++)n[l].split("(")[1].wq_replaceAll("'","").wq_replaceAll('"',"").wq_trim()==t&&(c.value=new Function("_this","return "+c.expression)(this),isNaN(c.value)&&"NaN"!=c.NaNFormat&&(c.value=c.NaNFormat),h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose)}else""===c.displayFormat||"number"!=c.dataType||"text"!=c.inputType&&"textarea"!=c.inputType&&"button"!=c.inputType&&"textImage"!=c.inputType||(h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose)}}else for(s=0;s<i.length;s++){var h,d,c;if(d=(h=i[s]).getAttribute(o))if(c=this.headerDataObj[d])if("expression"==c.inputType){try{c.value=new Function("_this","return "+c.expression)(this),isNaN(c.value)&&"NaN"!=c.NaNFormat&&(c.value=c.NaNFormat)}catch(t){}h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose}else""===c.displayFormat||"number"!=c.dataType||"text"!=c.inputType&&"textarea"!=c.inputType&&"button"!=c.inputType&&"textImage"!=c.inputType||(h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose)}!e||!e.sortIcon||this.headerSortStatusArr&&0!==this.headerSortStatusArr.length||this.clearHeaderSort()}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.initHeaderDataObj=function(){try{var t=this.head_table.getElementsByTagName("th");this.headerDataObj={};for(var e=a.D.getDataPrefix("header_id"),i=a.D.getDataPrefix("expression"),o=a.D.getDataPrefix("value"),n=a.D.getDataPrefix("localeRef"),l=a.D.getDataPrefix("inputType"),h=a.D.getDataPrefix("dataType"),d=a.D.getDataPrefix("displayFormat"),c=a.D.getDataPrefix("displayFormatter"),u=a.D.getDataPrefix("NaNFormat"),p=0;p<t.length;p++){var g=t[p],m={};m.id=g.getAttribute(e);var f=g.getAttribute(i)||"";if(""!=f&&(f=(f=(f=(f=f.replace(/[sS][uU][mM][\s]*[(]/g,"_this.headercolsum( ")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.headercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.headercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.headercolmin( ")),m.value=g.getAttribute(o)||"",this.options.useLocale){var b=g.getAttribute(n);if(b){var y=this.getLocaleValue(b);y&&(m.value=y)}}m.inputType=g.getAttribute(l),m.dataType=g.getAttribute(h)||"text",m.expression=f,m.displayFormat=g.getAttribute(d)||"",m.displayFormatter=g.getAttribute(c)||"",m.formatter=WebSquare.format.createFormatter(m.dataType,m.displayFormat,m.displayFormatter,null,null,null,this.scope_id,this.id),m.NaNFormat=g.getAttribute(u)||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/column[@inputType='expression']/NaNFormat/@value")||"NaN","$blank"==m.NaNFormat&&(m.NaNFormat=""),this.headerDataObj[m.id]=m}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.headercolsum=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].sum){var e="";if(this.groupbyStatus.grouped);else{var i=this.getColumnAllDataArray(t);e=a.D.sum(i)}this.headerTempSum[t].sum=e}return a.D.setPrecision(this.headerTempSum[t].sum)},v.prototype.headercolavg=function(t){var e=this.getColumnAllDataArray(t);this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={});var i="";if(this.groupbyStatus.grouped)return i;if(void 0===this.headerTempSum[t].sum){if(e.length>0){for(var o=0;o<e.length;o++)""==e[o].replace(/^\s+|\s+$/g,"")&&(e[o]="0");i=a.D.sum(e)}this.headerTempSum[t].sum=i}return""==this.headerTempSum[t].sum?"":this.headerTempSum[t].sum/e.length},v.prototype.headercolmax=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].max){var e=null;if(this.groupbyStatus.grouped);else{for(var i=this.getColumnAllDataArray(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}e=null==e?"":e,e=a.D.setPrecision(e)}
this.headerTempSum[t].max=e}return this.headerTempSum[t].max},v.prototype.headercolmin=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].min){var e=null;if(this.groupbyStatus.grouped);else{for(var i=this.getColumnAllDataArray(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}e=null==e?"":e,e=a.D.setPrecision(e)}this.headerTempSum[t].min=e}return this.headerTempSum[t].min},v.prototype._getMatchedHeaderId=function(t){try{return this.bodyToHeaderRelation[t]}catch(t){r.w.printStackTrace(t,null,this)}};var w=function(t,e){try{this.options={id:"",value:"",inputType:"text",useFilter:!1,textAlign:""},this.mainGrid=e,this.mainGridId="G_"+this.mainGrid.id+"__",t&&this.setOptions(t),this.id=this.options.id}catch(t){r.w.printStackTrace(t,null,this)}};v.prototype._setHeaderInfo=function(t,e){this.headerInfoHash2[t]=e},v.prototype.setCheckboxHeader=function(t){try{"function"==typeof this.cellInfoHash[t].checkHeader&&this.cellInfoHash[t].checkHeader()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setOptions=function(t){this.options.useFilter=a.D.getBoolean(s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+"/header/column/useFilter/@value")),this.options.hideCustomFilter=a.D.getBoolean(s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+"/header/column/hideCustomFilter/@value"));var e=[];for(var i in this.options)e[i.toLowerCase()]=i;var o=this.mainGrid.headerConfigOptions[t.getAttribute("id")]||{};for(var i in o)this.options[i]=o[i];var r=WebSquare.Parser.parseAttribute(t);for(var n in r){var l=r[n];"class"==n?this.options.className=l:""!=String(l).wq_trim()&&(e[n]&&(n=e[n]),"boolean"==typeof this.options[n]?l=a.D.getBoolean(l):"number"==typeof this.options[n]&&(l=a.D.getNumber(l)),this.options[n]=l)}},v.prototype._useCheckboxLabel=function(t){try{var e=a.D.getDataPrefix("inputType"),i=a.D.getDataPrefix("checkboxLabel"),o=a.D.getDataPrefix("checkboxlabel"),s=this.getHeaderLayer(t);return"checkbox"===s.getAttribute(e)&&(s.getAttribute(i)||s.getAttribute(o))}catch(t){r.w.printStackTrace(t,null,this)}};var S=function(){};S.prototype.getLastFocusedCell=function(){if(this.focusedCell.length>0)return this.focusedCell[this.focusedCell.length-1];var t={focusedRowIndex:-1,focusedColIndex:null};return this.options.groupbyDisplayRowIndex&&(t.groupbyDisplayRowIndex=-1),t},S.prototype.getFocusedRowIndex=function(){return this._getFocusedRowIndex(this.options.groupbyDisplayRowIndex)},S.prototype._getFocusedRowIndex=function(t){return this.getLastFocusedCell()[!0===t&&this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex"]},S.prototype.getFocusedRealRowIndex=function(){return this.getLastFocusedCell().focusedRealRowIndex},S.prototype.getAllFocusedIndex=function(){for(var t=this.focusedCell,e=[],i=this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex",o=0;o<t.length;o++){var s={};s.col=t[o].focusedColIndex,s.row=t[o][i],e.push(s)}return e},S.prototype.getAllFocusedRowIndex=function(){for(var t=[],e={},i=this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex",o=0;o<this.focusedCell.length;o++){e[this.focusedCell[o][i]]=!0}for(var s in e)t.push(parseInt(s,10));return t},S.prototype.getFocusedColumnIndex=function(){return this.getLastFocusedCell().focusedColIndex},S.prototype.getFocusedColumnID=function(){return this.getColumnID(this.getFocusedColumnIndex())},S.prototype.getFocusedRowStatus=function(){var t=this._getFocusedRowIndex(!0);return-1==t?null:this.dataList.getRowStatus(t)},S.prototype.setFocusedCell2=function(t,e,i,o){try{o=o||{};i=a.D.getBoolean(i),e=this.getColumnIndex(e);var s=!1;try{s=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){s=!1}var n=this.getLastFocusedCell(),l=i&&n.focusedColIndex==e
;if((this.___getEditReadOnly(t,e)||this._getEditDisabled(t,e))&&(l=!1),this.editedCell&&!this.editedCell.handleEndEdit(null,l))return!1;if(!s&&"native"!==this.options.drawType){var h=this._getVisibleLastIndex(this.lastIndex+1),d=this.getDataLength(),c=this.rowIndex+this._getVisibleTrRowIndex(this.lastIndex,this.rowIndex);!0===this.hiddenRowObj.init&&this.rowIndex===d-h&&(c=d-this._getVisibleLastIndex(1));var u=this.rowIndex,p=this.hiddenCellObj.length>0;if(p&&t===c&&(c=Math.max(c-1,0)),t<u||t>c){var g=t<u?t-u:t-c;if(t>c&&this.hasSubtotal){for(var m in this.rollbackCommitFlag=!1,this.subtotalTableList){if(c<d-1)this.dataList._getCellData(c,m)!=this.dataList._getCellData(c+1,m)&&g++}this.rollbackCommitFlag=!0}var f=this.rowIndex+g;f=(f=f<0?0:f)>d-h?d-h:f,p&&!isNaN(this.lastTopRowIndex)&&null!=this.lastTopRowIndex&&(f=Math.min(f,this.lastTopRowIndex)),f!==this.rowIndex&&(this.scrollEvent=!1,this.checkScrollEnd=!0,f=Math.max(0,f),isNaN(this.lastTopRowIndex)||null==this.lastTopRowIndex||(f=Math.min(f,this.lastTopRowIndex)),this.drawData(f,0,"keymove",l),!0===this.hiddenRowObj.init||p||(this.lastIndex=this.getLastIndex(this.lastDisplayedRow)))}}var b=t-(this.rowIndex>0?this.rowIndex:0),y=this.data_td_list[e+b*this.oneRowDataLength];return!!y&&("rollback"==this.__setFocusedCell({ctrl:!1},y,{editMode:i,dont_hide:l,dont_fixScroll:!0,tabDirection:o.tabDirection})&&this._setFocusedCell(n.focusedRowIndex,n.focusedColIndex,!0,{tabDirection:o.tabDirection}),!0)}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype.setFocusedCell=function(t,e,i,o){try{(o=o||{}).groupbyDisplayRowIndex=this.options.groupbyDisplayRowIndex;var s=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),a=t;if(s&&(a=this.getDisplayRowIndex(t)),!isNaN(a))return this._setFocusedCell(a,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype._setFocusedCell=function(t,e,i,o){try{if(o=o||{},"none"==this.options.focusMode)return;if(!0===o.groupbyDisplayRowIndex&&(t=this._getGroupbyGroupedRowIndex(t,!0)),0==arguments.length||1==arguments.length){i=0!=arguments.length&&arguments[0];var s=this.colIndexInfo.body.colInfo.colIndexMatch;if(this.focusedCell.length>0)t=this.focusedCell[this.focusedCell.length-1].focusedRowIndex,e=this.focusedCell[this.focusedCell.length-1].focusedColIndex;else if(this.lastFocusedCell&&null!=this.lastFocusedCell.focusedColIndex&&this.lastFocusedCell.focusedRowIndex>=0)t=this.lastFocusedCell.focusedRowIndex,e=this.lastFocusedCell.focusedColIndex;else{var n=this.getLastFocusedCell();t=n.focusedRowIndex;if(null==(e=n.focusedColIndex)||-1==t)return this.focusedCell=[{focusedRowIndex:0,focusedColIndex:s.length-this.defaultColCnt-1}],this.moveHorizontal(null,"home"),void(i&&this._setFocusedCell(!0))}}var l=this.getDataLength(),h=this.getDataLength()-this._getVisibleLastIndex(1);if(e=this.getColumnIndex(e),t<0||t>h||e<0||e>=this.oneRowDataLength)return;var d=!1;try{d=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){d=!1}if(i=a.D.getBoolean(i),this.delayedDraw({rowIndex:t}))return this.focusedCell=[{focusedRowIndex:t,focusedColIndex:e}],this._linkedDataList?this._linkedDataList.setRowPosition(t):this._dataList.setRowPosition(t),void this._dataList.setColumnPosition(this.getColumnID(e));var c=this.getElementById(this.id+"_scrollY_div");"native"!==this.options.drawType&&c&&0==c.scrollTop&&this.rowIndex>0&&(c.scrollTop=this.lastScrollYTop);var u=t-(this.rowIndex>0?this.rowIndex:0);if(!d&&"native"!==this.options.drawType)if(u<0)this.scrollEvent=!1,c.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t),this.drawData(t,0),u=0;else if(this.options.showLastRow&&u-this.lastIndex==1&&""===this.options.visibleRowNum);else if(u>this._getVisibleTrRowIndex(this.lastIndex,this.rowIndex)){var p=this._getVisibleLastIndex(this.lastIndex+1)
;this.hiddenCellObj.length>0&&!isNaN(this.lastTopRowIndex)&&null!=this.lastTopRowIndex&&(p=l-this.lastTopRowIndex);var g=t+p>l?l-p:t;this.hiddenCellObj.length>0&&(g=Math.max(0,g)),g!==this.rowIndex&&(this.scrollEvent=!1,this.checkScrollEnd=!o.isSort||"string"!=typeof this.options.filterFocusMode||"followfocus"!==this.options.filterFocusMode.toLowerCase(),c.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(g),g>this.rowIndex+p-1&&(this.adjustDraw_keepTop=!0),this.drawData(g,0),u=t-this.rowIndex)}var m=this.data_td_list[e+u*this.oneRowDataLength];if(m){for(var f=5;"native"!==this.options.drawType&&this.hiddenCellObj.length>0&&0===m.offsetHeight&&f>0;){this.lastTopRowIndex++;var b=this.getElementById(this.id+"_size_y"),y=(c=this.getElementById(this.id+"_scrollY_div"),b.offsetHeight);y<1e6&&(y=parseInt(b.style.height,10)),b.style.height=c.offsetHeight+this.oneRowScrollHeight*this.lastTopRowIndex+"px",this.drawData(this.lastTopRowIndex,0),u--,m=this.data_td_list[e+u*this.oneRowDataLength],f--}o.editMode=i,this.__setFocusedCell({ctrl:!1},m,o)}}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype.removeFocusedCell=function(){try{this.lastFocusedCell=this.getLastFocusedCell(),this.applyFocusedCellOut(),this.focusedCell=[],this._dataList.setRowPosition(null)}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype.applyFocusedCell=function(t,e){if(e||(this.applyFocusedCellOut(),this.focusedCell=[]),null!=t){this.applyFocusedCellIn(t);var i={};i.focusedTd=t,this.focusedCell.push(i)}},S.prototype.__setFocusedCell=function(t,e,i){i=i||{};var o=t.ctrlKey||i.ctrled,s=t.shiftKey||i.shifted,r=e.className;if(this.options.focusDefaultColumn){if(r.indexOf("_groupby")>=0||r.indexOf("Subtotal")>=0)return null!=this.editedCell&&this.editedCell.handleEndEdit(),!1}else if(r.indexOf("_rowNum")>=0||r.indexOf("_rowStatus")>=0||r.indexOf("_groupby")>=0||r.indexOf("Subtotal")>=0)return null!=this.editedCell&&this.editedCell.handleEndEdit(),!1;var n=a.D.getDataPrefix("tdIndex"),l=a.D.getDataPrefix("colIndex"),h=parseInt(e.getAttribute(n)),c=parseInt(h/this.realRowDataLength),u=parseInt(e.getAttribute(l)),p=c+this.rowIndex,g=this._getGroupbyDisplayRowIndex(p),m=p;this.isDrillDown&&this._dataList.options.depthColumn&&(m=this.getRealRowIndex(p));var f,b=h%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),y=this.getColumnID(b),v=!0,w=this.getLastFocusedCell();if(this.focusedCell.length>0&&w.focusedTd==e&&(v=!1),v&&this.editedCell&&!this.editedCell.handleEndEdit(t,!!i.dont_hide,{focuseChanged:v}))return!1;f=this._linkedDataList?this._linkedDataList.setRowPosition(g):this.groupbyStatus.grouped&&this.options.groupbyDisplayRowIndex?this._dataList.setRowPosition(g):this._dataList.setRowPosition(m);var S=this._dataList.setColumnPosition(y);if(!1===f||!1===S)return!1;var C=this._getFocusedRowIndex(),_=this.getFocusedColumnIndex(),x=!(a.D.getBoolean(this.options.useCtrlKey)&&o||a.D.getBoolean(this.options.useShiftKey)&&s),I=!1;if(x&&a.D.getBoolean(i.allowContextMenuMultiCell)&&(x=!1,I=!0,this.focusedCell)){for(var T=!1,k=0;k<this.focusedCell.length;k++)if(this.focusedCell[k].focusedTd==e){T=!0;break}T||(x=!0,I=!1)}if(x&&(this.applyFocusedCellOut(),this.focusedCell=[]),i.tabDirection||(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),this.focusedCell.length>0&&a.D.getBoolean(this.options.useShiftKey)&&s){var D,L=(D=!0===this.options.ctrlShiftKey?this.focusedCell[this.focusedCell.length-1]:this.focusedCell[0]).focusedRowIndex,W=D.focusedColIndex;this._applyFocusedMultiCell(L,W,p,b,i.ignoreFocusMode),i.dont_fixScroll||(u>=this.getFixedColumnLastIndex()&&this.fixScrollLeftDirection(),this.fixScrollRightDirection()),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}else if(!I){var A;if(this.getCellInfo(e).options.blockSelect)return;var M={focusedTd:e,focusedRealRowIndex:m,
focusedRowIndex:A=this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>p-this.rowIndex||this.options.lastFixedRow>0&&p-this.rowIndex>this.lastIndex-this.options.lastFixedRow?p-this.rowIndex:p,focusedColIndex:b};this.options.groupbyDisplayRowIndex&&(M.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(A)),this.focusedCell.push(M),i.dont_fixScroll||(u>=this.getFixedColumnLastIndex()&&this.fixScrollLeftDirection(),this.fixScrollRightDirection()),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds();var E="native"!==this.options.drawType&&!!i.editMode;if(this.applyFocusedCellIn(e,E,{tabDirection:i.tabDirection,ignoreFocusMode:i.ignoreFocusMode,customRowIndex:p}),"linear"===this.options.focusFlow&&!0===i.editMode&&(this.focusedByApi=!1),w=this.getLastFocusedCell(),i.ignoreFocusMode||"cell"==this.options.focusMode){for(k=this.focusedCell.length-2;k>=0;k--)if(this.focusedCell[k].focusedTd==w.focusedTd){this._applyFocusedCellOut(this.focusedCell[k]),this.focusedCell.pop(),this.focusedCell.splice(k,1);break}}else if("both"==this.options.focusMode){for(k=this.focusedCell.length-2;k>=0;k--)if(this.focusedCell[k].focusedTd==w.focusedTd){this._applyFocusedCellOut(this.focusedCell[k]),this.focusedCell.pop(),this.focusedCell.splice(k,1),this.changeFocusedCellPosition(this.rowIndex);break}}else if("row"==this.options.focusMode){var q=a.D.getDataPrefix("trIndex"),R=w.focusedTd?w.focusedTd.parentNode:null;for(k=this.focusedCell.length-2;k>=0;k--){var N=this.focusedCell[k];if(null!=N.focusedTd){var F=N.focusedTd.parentNode;for(c=parseInt(F.getAttribute(q));c>0;)c--,F=a.D.prev(F);do{if(F==R){this._applyFocusedCellOut(this.focusedCell[k]),this.focusedCell.pop(),this.focusedCell.splice(k,1),this.changeFocusedCellPosition(this.rowIndex,!0);break}if(!(F=a.D.next(F)))break}while("0"!=F.getAttribute(q))}}}}var O=this.getCellInfo(b);if("custom"==O.options.inputType&&(O=O.cellManagerHashByRowIndex[p]),(C=this._getGroupbyDisplayRowIndex(C))==(p=this._getGroupbyDisplayRowIndex(p))&&_==b||d.B.fireEvent(this,"oncellindexchange",p,b,C,_),C!=p&&d.B.fireEvent(this,"onrowindexchange",p,C),_!=b&&d.B.fireEvent(this,"oncolumnindexchange",b,_),i.editMode)if("native"===this.options.drawType){var B=this.uuid,V=e.id,P=e.parentNode,H=this.id+"_dataLayer",j=document.getElementById(H),z=this.head_table.offsetHeight,G=P.offsetHeight*this.oneRowLength,U=P.offsetTop-j.offsetHeight+G+2,X=window.requestAnimationFrame?window.requestAnimationFrame:window.setTimeout,K=window.requestAnimationFrame?void 0:5;X((function(){var t,e=document.getElementById(H);e.scrollTop<U?e.scrollTop=U:e.scrollTop>(t=U+e.offsetHeight-z-G)&&(e.scrollTop=Math.max(t,0)),X((function(){var t=WebSquare.idCache[B],e=document.getElementById(V);t.setEditMode(e)}),K)}),K)}else this.setEditMode(e)},S.prototype.applyFocusedCellOut=function(){if(this.focusedCell.length>0)for(var t=0;t<this.focusedCell.length;t++){var e=this.focusedCell[t];this._applyFocusedCellOut(e)}},S.prototype._applyFocusedCellOut=function(t){if("row"==this.options.focusMode||"both"==this.options.focusMode){if(null==(o=t.focusedTd)&&this.options.showLastRow){var e=t.focusedRowIndex,i=t.focusedColIndex;o=this.data_td_list[i+e*this.oneRowDataLength]}null!=o&&this.removeFocusRowStyle(o)}if("cell"==this.options.focusMode||"both"==this.options.focusMode){var o;if(null==(o=t.focusedTd)&&this.options.showLastRow){e=t.focusedRowIndex,i=t.focusedColIndex;o=this.data_td_list[i+e*this.oneRowDataLength]}null!=o&&("linear"!=this.options.focusFlow&&o.setAttribute("tabIndex",-1),this.removeClass(o,"focusedTd"),(!this.options.focusDefaultColumn||t.focusedColIndex>=0)&&(this.options.fixedRow>0&&t.focusedRowIndex-this.rowIndex>=0&&this.options.fixedRow>t.focusedRowIndex-this.rowIndex||this.options.lastFixedRow>0&&t.focusedRowIndex-this.rowIndex>this.lastIndex-this.options.lastFixedRow?this.applyCellStyleOptions(t.focusedRowIndex-this.rowIndex,t.focusedColIndex,!0):this.applyCellStyleOptions(t.focusedRowIndex,t.focusedColIndex,!0)),
this.options.rowMouseOver&&this.addRowOverStyle(this.overElem))}},S.prototype.removeFocusRowStyle=function(t){if(null!=t){for(var e=a.D.getDataPrefix("trIndex"),i=a.D.getDataPrefix("tdIndex"),o=a.D.getDataPrefix("style_bak"),s=t.parentNode,r=parseInt(s.getAttribute(e));r>0;)r--,s=a.D.prev(s);for(var n=a.D.first(s),l=parseInt(n.getAttribute(i)),h=(r=parseInt(l/this.realRowDataLength),0);h<this.realRowDataLength;h++){var d=h;h>=this.defaultColCnt&&(d=Math.floor((h-this.defaultColCnt)/this.columnOrder.length)*this.columnOrder.length+this.columnOrder[(h-this.defaultColCnt)%this.columnOrder.length]+this.defaultColCnt);var c=r*this.realRowDataLength+d,u=this.all_data_td_list[c];if(this.removeClass(u,"focusedTr"),h<this.defaultColCnt){var p=u.className;p.indexOf(this.options.bodyTdClass+"_rowNumber")>=0?""==this.options.rowNumBackgroundColor&&(u.style.backgroundColor="",u.removeAttribute(o)):p.indexOf(this.options.bodyTdClass+"_rowStatus")>=0&&(u.style.backgroundColor="",u.removeAttribute(o))}else{var g=parseInt(u.getAttribute(i)),m=r+this.rowIndex,f=g%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.applyCellStyleOptions(m,f,!0)}}}},S.prototype.applyFocusedCellIn=function(t,e,i){if("none"!=this.options.focusMode){var o=(i=i||{}).tabDirection,s=i.ignoreFocusMode,r=i.linkNoFocus,n=a.D.getDataPrefix("col_id"),l=a.D.getDataPrefix("tdIndex"),h=this.getCellInfo(t.getAttribute(n)),d=h.options.inputType||"text",c=!1;if("custom"==h.options.inputType&&"undefined"!==i.customRowIndex&&(d=(h=h.cellManagerHashByRowIndex[i.customRowIndex]?h.cellManagerHashByRowIndex[i.customRowIndex]:h).options.inputType||"text"),this.options.useTextMultiLink&&this.options.senseReader&&"user"===d&&h.options.customFormatter&&(c=!0),this.focusedByApi=!0,h.options.embeddedInput&&!1===c){if(e){var u=this.getElemRowIndex(t);if("text"!=d&&"link"!=d||!this._getEditDisabled(u,h.id)&&!this.__getEditReadOnly(t,u))this.getInput(h,t).focus();else t.focus()}else if(o){u=this.getElemRowIndex(t);if(this._getEditDisabled(u,h.id)||this.__getEditReadOnly(t,u))t.focus();else this.getInput(h,t).focus()}}else{var p=!1;try{var g=this.focusedCell[this.focusedCell.length-1].focusedRealRowIndex-this.rowIndex;(this.rowIndex>0&&this.options.fixedRow>0&&g>=0&&this.options.fixedRow>g||this.options.lastFixedRow>0&&g-this.rowIndex>this.lastIndex-this.options.lastFixedRow)&&(p=!0)}catch(t){}if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum||this.___getEditReadOnly(g,t.getAttribute(n))&&!0===this.options.readOnlyTabIgnore||t.setAttribute("tabIndex",0),"custom"==d&&this.options.senseReader){u=this.getElemRowIndex(t);var m=h.cellManagerHashByRowIndex[u];d=m?m.options.inputType:"text"}if(e&&("text"==d||"secret"==d||"textarea"==d||"textImage"==d||"calendar"==d)||p);else if("button"==d&&this.options.senseReader){var f=t.getElementsByTagName("button");(f=f[0]).focus()}else if("link"==d&&this.options.senseReader){(v=(v=t.getElementsByTagName("a"))[0]).focus()}else if("checkbox"==d&&this.options.senseReader){t.getElementsByTagName("input")[0].focus()}else if("user"==d&&this.options.senseReader){var b;if(0==(v=t.getElementsByTagName("a")).length&&(v=t.getElementsByTagName("input")),-1!=this.focusedCellLinkIndex)if("right"==o){for(var y=0;y<v.length;y++)document.activeElement==v[y]&&(this.focusedCellLinkIndex=y);b=this.focusedCellLinkIndex+1}else b=this.focusedCellLinkIndex-1;else{if("right"==o)b=0;else if(null==o){if(b=0,document.activeElement)for(y=0;y<v.length;y++)document.activeElement==v[y]&&(b=y)}else b=v.length-1;this.focusedCellLinkLength=v.length}v=v[b],this.focusedCellLinkIndex=b,v?o&&v.focus():this._getEditDisabled(u,h.id)||this.__getEditReadOnly(t,u)?t.blur():t.focus()}else if("select"!=d||1!=this.options.senseReader||"ul"!=h.options.tableRender||this.isVirtualCursor())a.D.isIE(8)?"none"!=t.parentElement.style.display&&t.focus():r||t.focus();else{var v;(v=(v=t.getElementsByTagName("a"))[0]).focus()}}var w=!1;try{
w=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){w=!1}if(!w&&!e&&"native"!==this.options.drawType){var S=this.getElementById(this.id+"_dataLayer");S.scrollLeft=0,S.scrollTop=0}var C=this.options.focusMode;if(s&&(C="cell"),"row"!=C&&"both"!=C||this.setFocusRowStyle(t),"cell"==C||"both"==C){this.addClass(t,"focusedTd");var _=parseInt(t.getAttribute(l)),x=parseInt(_/this.realRowDataLength),I=x+this.rowIndex;(this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>x||this.options.lastFixedRow>0&&x>this.lastIndex-this.options.lastFixedRow)&&(I=x);var T=_%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(this.options.focusDefaultColumn&&T<0)return;this.applyCellStyleOptions(I,T,null,s)}}},S.prototype.setFocusRowStyle=function(t){if(null!=t){for(var e=a.D.getDataPrefix("trIndex"),i=a.D.getDataPrefix("tdIndex"),o=a.D.getDataPrefix("style_bak"),s=t.parentNode,r=parseInt(s.getAttribute(e));r>0;)r--,s=a.D.prev(s);for(var n=a.D.first(s),l=parseInt(n.getAttribute(i)),h=(r=parseInt(l/this.realRowDataLength),0);h<this.realRowDataLength;h++){var d=h;h>=this.defaultColCnt&&(d=Math.floor((h-this.defaultColCnt)/this.columnOrder.length)*this.columnOrder.length+this.columnOrder[(h-this.defaultColCnt)%this.columnOrder.length]+this.defaultColCnt);var c=r*this.realRowDataLength+d,u=this.all_data_td_list[c];if(this.addClass(u,"focusedTr"),h<this.defaultColCnt){var p=u.className;p.indexOf(this.options.bodyTdClass+"_rowNumber")>=0?""==this.options.rowNumBackgroundColor&&(u.style.backgroundColor=this.options.selectedRowColor.wq_trim(),u.removeAttribute(o)):p.indexOf(this.options.bodyTdClass+"_rowStatus")>=0&&(u.style.backgroundColor=this.options.selectedRowColor.wq_trim(),u.removeAttribute(o))}else{var g=parseInt(u.getAttribute(i)),m=r+this.rowIndex,f=g%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.applyCellStyleOptions(m,f)}}}},S.prototype.outFocusedCell=function(){this.removeFocusedCell()},S.prototype.getFocusedCellData=function(){var t=this._getFocusedRowIndex(),e=this.getFocusedColumnIndex(),i=this.getColumnID(e);return t>-1?this.dataList._getCellData(t,i):null},S.prototype.getFocusedRowData=function(){var t=this._getFocusedRowIndex();return t>-1?this.dataList.getRowData(t):null},S.prototype.getFocusedRowXML=function(){var t=this._getFocusedRowIndex(!0);return t>-1?this.dataList.getRowXML(t):null},S.prototype.removeRowFocus=function(t){for(var e=[],i=0;i<this.focusedCell.length;i++)t!=this.focusedCell[i].focusedRowIndex?e.push(this.focusedCell[i]):this._applyFocusedCellOut(this.focusedCell[i]);this.focusedCell=e},S.prototype.setFocusedHeaderObj=function(t){if(this.getHeaderLayer(t)){var e=this.headerObj[t];if(e)switch(e.headInputType){case"checkcombobox":case"select":case"checkbox":case"input":e.focus()}}},S.prototype.focus=function(){try{var t=this.getLastFocusedCell(),e=-1!=t.focusedRowIndex?t.focusedRowIndex:0,i=null!=t.focusedColIndex?t.focusedColIndex:0;this._setFocusedCell(e,i,!1)}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype.setFocusedMultiCell=function(t,e,i,o,s){try{s=s||{};var a=this.options.useShiftKey;this.options.useShiftKey=!0,this._setFocusedCell(Number(t),Number(e),null,{ignoreFocusMode:s.ignoreFocusMode}),this._setFocusedCell(Number(i),Number(o),!1,{shifted:!0,ignoreFocusMode:s.ignoreFocusMode}),this.options.useShiftKey=a}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype.removeFocusedMultiCell=function(t,e,i,o){try{for(var s="focusedColIndex",a="focusedRowIndex",n=this.focusedCell.length-1;n>=0;n--){var l=this.focusedCell[n];l[a]>=t&&l[a]<=i&&l[s]>=e&&l[s]<=o&&(this._applyFocusedCellOut(l),this.focusedCell.splice(n,1))}}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype._applyFocusedMultiCell=function(t,e,i,o,s){try{!0!==this.options.ctrlShiftKey&&(this.applyFocusedCellOut(),this.focusedCell=[]);var a=this.getLocationRowCol(t,e);t=a.rowIndex,
e=a.colIndex;var n=t,l=e,h=this.getLocationRowCol(i,o);i=h.rowIndex,o=h.colIndex;for(var d=i,c=o,u=t>i,p=e>o,g=this.htmlInfo.body.rowAttrArr.length,m=u?i:t,f=u?t:i,b=p?o:e,y=p?e:o,v=!0;v;){v=!1;var w=f,S=0;for(var C in this.cellMergeInfo)this.cellMergeInfo.hasOwnProperty(C)&&S++;f-m>g&&S<1&&(w=m+g);for(var _=b,x=m;x<=w;x++){var I=this.getOriginalRowCol(x,b);I.colSize>1&&_>(I=this.getLocationRowCol(I.rowIndex,I.colIndex)).colIndex&&(_=I.colIndex,v=!0),b=_}var T=y;for(x=m;x<=w;x++){var k=this.getOriginalRowCol(x,y);k.colSize>1&&T<(k=this.getLocationRowCol(k.rowIndex,k.colIndex)).colIndex+k.colSize-1&&(T=k.colIndex+k.colSize-1,v=!0),y=T}for(var D=m,L=b;L<=y;L++){var W=this.getOriginalRowCol(m,L);W.rowSize>1&&D>(W=this.getLocationRowCol(W.rowIndex,W.colIndex)).rowIndex&&(D=W.rowIndex,v=!0),m=D}var A=f;for(L=b;L<=y;L++){var M=this.getOriginalRowCol(f,L);M.rowSize>1&&A<(M=this.getLocationRowCol(M.rowIndex,M.colIndex)).rowIndex+M.rowSize-1&&(A=M.rowIndex+M.rowSize-1,v=!0),f=A}}i=u?m:f,e=p?y:b,o=p?b:y;for(x=t=u?f:m;u?x>=i:x<=i;u?x--:x++)for(L=e;p?L>=o:L<=o;p?L--:L++){var E=this.getOriginalRowCol(x,L),q=E.colIndex,R=E.rowIndex;if(!E.noLeftTop){var N=this.data_td_list[q+(R-this.rowIndex)*this.oneRowDataLength];if(R<this.rowIndex&&(N=null),!(this.groupbyStatus.grouped&&N&&this.hasClass(N,"w2grid_groupby"))){var F=this.getCellInfo(q),O=this._getRealColIndex("body",F.options.col_id)+this.defaultColCnt;if(!F.options.blockSelect&&!this.hiddenList[O]){var B={focusedTd:N,focusedRowIndex:R,focusedColIndex:q};if(this.options.groupbyDisplayRowIndex&&(B.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(R)),x==n&&L==l?this.focusedCell.unshift(B):this.focusedCell.push(B),null!=N){var V=!0;(F.options.embeddedInput||L==c&&x==d)&&(V=!1),this.applyFocusedCellIn(N,V,{ignoreFocusMode:s})}(""==F.options.inputType||"text"==F.options.inputType&&!F.options.embeddedInput||"textImage"==F.options.inputType||"calendar"==F.options.inputType)&&(this.getInput(F).options.editType=F.options.editType?F.options.editType:this.options.editType)}}}}}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype._addFocus=function(t){try{var e=a.D.getDataPrefix("tdIndex"),i=parseInt(t.getAttribute(e)),o=parseInt(i/this.realRowDataLength)+this.rowIndex,s=o;this.isDrillDown&&this._dataList.options.depthColumn&&(s=this.getRealRowIndex(o));var n,l=i%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),h={focusedTd:t,focusedRealRowIndex:s,focusedRowIndex:n=this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>o-this.rowIndex||this.options.lastFixedRow>0&&o-this.rowIndex>this.lastIndex-this.options.lastFixedRow?o-this.rowIndex:o,focusedColIndex:l};this.options.groupbyDisplayRowIndex&&(h.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(n)),this.focusedCell.push(h)}catch(t){r.w.printStackTrace(t,null,this)}};var C=function(t){};C.prototype._subtotalHidden=function(t){try{for(var e=0;e<t.length;e++){if(this.isIE6or7)for(var i=t[e].getElementsByTagName("td"),o=0;o<i.length;o++)i[o].style.borderWidth="0px";"none"!==t[e].style.display&&(this.drawedSubtotal&&this.drawedSubtotal.drawedRowLength--,t[e].style.display="none")}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalHidden=function(t){try{if(!this.hasSubtotal)return;if(t){if("number"==typeof t.index)for(var e=this.drawedSubtotal.splice(t.index,1),i=0;i<e.length;i++)this._subtotalHidden(e[i]);if("number"==typeof t.rowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex==t.rowIndex){e=this.drawedSubtotal.splice(i,1);for(var o=0;o<e.length;o++)this._subtotalHidden(e[o])}if("number"==typeof t.startRowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex>=t.startRowIndex)for(e=this.drawedSubtotal.splice(i,1),o=0;o<e.length;o++)this._subtotalHidden(e[o]);if("number"==typeof t.endRowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex<=t.endRowIndex)for(e=this.drawedSubtotal.splice(i,1),
o=0;o<e.length;o++)this._subtotalHidden(e[o])}else{for(var s in this.subtotalTableList){var a=this.subtotalRowHash[s];a&&this._subtotalHidden(a)}this.drawedSubtotal=[],this.drawedSubtotal.drawedRowLength=0}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.refreshSubtotalRow=function(t){try{for(var e=t-this.rowIndex,i="native"===this.options.drawType?this.getRowCount()-1:this.lastIndex,o=e;o<=i;o++)this.drawSubtotalRow(o+1,o+this.rowIndex);var n=WebSquare.BootLoader.fullViewed||!1,l=a.D.fullViewed||!1;if(!n&&!l){var h=this.options.adaptive,d=parseInt(this.options.adaptiveThreshold)||480;if("crosstab"==h&&!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=d){for(o=this.defaultColCnt;o<this.hiddenList.length;o++)1==this.hiddenList[o]&&this.setAdaptiveColumnVisible(o,!0);this.removeAdaptiveGridSubtotalHeight(),this.setAdaptiveGridSubtotalHeight();for(o=this.defaultColCnt;o<this.hiddenList.length;o++)1==this.hiddenList[o]&&this.setAdaptiveColumnVisible(o,!1);this.event.hasEvent(this.id+"_body_tbody","onscroll")||this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onscroll",this.event.bindAsEventListener(this,this.tbodyMoveXScroll))}}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.drawSubtotalRow=function(t,e,i){try{var o=0;if(!this.hasSubtotal||e<0||e>=this.getDataLength())return o;var s=NaN;if(i&&!isNaN(i.maxCount)&&(s=i.maxCount),s<=0)return o;for(var a in this.subtotalTableList){var n=this.dataList._getCellData(e,a),l=n+"_12";if(e<this.getDataLength()-1)l=this.dataList._getCellData(e+1,a);if(n!=l){var h=this.subtotalRowHash[a],d=this.subtotalTableList[a],c=d.rows.length,u=[];u.rowIndex=e,u.targetID=a;for(var p=0;p<c;p++){var g=h?h[t*c+p]:void 0;if(g){if(this.isIE6or7)for(var m=g.getElementsByTagName("td"),f=0;f<m.length;f++)m[f].style.borderWidth="";o>=s?g.style.display="none":(g.style.display="",o++),g.setAttribute("data-subtotalrowindex",e),u.push(g),this.lastSubtotalRow=g}}if(this.drawedSubtotal.push(u),this.drawedSubtotal.drawedRowLength+=o,this.setSubtotalData(d,a,n,e,u,i),o>=s)break}}return o}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.hasUpperSubtotalRow=function(t){try{if(!this.hasSubtotal||t<0||t>=this.getDataLength())return!1;for(var e in this.subtotalTableList){var i=this.dataList._getCellData(t,e),o=i;if(t<this.getDataLength())o=this.dataList._getCellData(t-1,e);if(i!=o)return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.getHasSubtotalCount=function(t){try{if(!this.hasSubtotal||t<0||t>=this.getDataLength())return 0;var e=0;for(var i in this.subtotalTableList){var o=this.dataList._getCellData(t,i),s=o;t+1<this.getDataLength()?s=this.dataList._getCellData(t+1,i):t+1==this.getDataLength()&&e++,o!=s&&e++}return e}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.setSubtotalData=function(t,e,i,o,s,n){try{var l,h=this.subtotalDataArr[e+"_"+i];if(null==h&&(h=this.getSubtotalData(t,e,i,o)),this.options.subtotalStyleFormatter)try{"function"==typeof this.options.subtotalStyleFormatter?l=this.options.subtotalStyleFormatter:null!=(l=a.D.getGlobalFunction(this.options.subtotalStyleFormatter,this.scope_id))&&(this.options.subtotalStyleFormatter=l)}catch(t){l=null}for(var d=a.D.getDataPrefix("inputType"),c=a.D.getDataPrefix("NaNFormat"),u=a.D.getDataPrefix("colMerge"),p=a.D.getDataPrefix("value"),g=a.D.getDataPrefix("useLocale"),m=a.D.getDataPrefix("localeRef"),f=0;f<s.length;f++)for(var b=s[f].getElementsByTagName("td"),y=0;y<b.length;y++){var v=b[y],w=v.getAttribute("id");if(null!=h[w]){var S=h[w];if("expression"==v.getAttribute(d)&&isNaN(S)&&null!=v.getAttribute(c)&&"NaN"!=v.getAttribute(c)&&(S=v.getAttribute(c)),v.innerHTML=this.dataTagOpen+S+this.dataTagClose,"function"==typeof l){var C=h[w+"_org"];null==C&&(C=S);var _=l(C,S,v.id);if(v&&_){var x=v.getAttribute("data-bkclassname");null==x&&(x=v.className,v.setAttribute("data-bkclassname",x)),
v.className=v.getAttribute("data-bkclassname")+" "+_}}}else if("true"!=v.getAttribute(u)||this.groupbyStatus.grouped){var I=v.getAttribute(p),T=v.getAttribute(g),k=v.getAttribute(d);if("true"===T||this.options.useLocale&&!T){var D=v.getAttribute(m);if(D&&"expression"!==k){var L=this.getLocaleValue(D);L&&(I=L)}}I=null!=I?I:"",v.innerHTML=this.dataTagOpen+I+this.dataTagClose}else v.style.borderTopWidth="0px",v.style.borderBottomWidth="0px"}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.getSubtotalData=function(t,e,i,o){try{var s=e,n=this.subtotalObj[e];if(null==n){n={};for(var l=a.D.getDataPrefix("inputType"),h=a.D.getDataPrefix("expression"),d=a.D.getDataPrefix("colindex"),c=a.D.getDataPrefix("dataType"),u=a.D.getDataPrefix("displayFormat"),p=a.D.getDataPrefix("displayFormatter"),g=0;g<t.rows.length;g++)for(var m=t.rows[g].getElementsByTagName("td"),f=0;f<m.length;f++){var b=m[f];if("expression"==b.getAttribute(l)){(W={}).id=b.getAttribute("id");var y,v=b.getAttribute(h)||"";if(""!=v){var w="";this.options.groupbyStatus||(v.toLowerCase().indexOf("sumifs")>-1?w="sumifs":v.toLowerCase().indexOf("sumif")>-1&&(w="sumif")),y=w?v.substring(v.indexOf("(")+1,v.indexOf(",")):v.substring(v.indexOf("(")+1,v.indexOf(")")),v=v.replace(/[sS][uU][mM][\s]*[(]/g,"this.subtotalcolsum( obfuscator_st, obfuscator_en ,"),this.options.groupbyStatus||(v=(v=v.replace(/[sS][uU][mM][iI][fF][\s]*[(]/g,"this.subtotalcolsumif( obfuscator_st, obfuscator_en ,")).replace(/[sS][uU][mM][iI][fF][sS][\s]*[(]/g,"this.subtotalcolsumifs( obfuscator_st, obfuscator_en ,")),v=(v=(v=(v=(v=(v=(v=v.replace(/[aA][vV][gG][\s]*[(]/g,"this.subtotalcolavg( obfuscator_st, obfuscator_en ,")).replace(/[mM][aA][xX][\s]*[(]/g,"this.subtotalcolmax( obfuscator_st, obfuscator_en ,")).replace(/[mM][iI][nN][\s]*[(]/g,"this.subtotalcolmin( obfuscator_st, obfuscator_en ,")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"this.subtotalcolcnt( obfuscator_st, obfuscator_en ,")).replace(/[tT][aA][rR][gG][eE][tT][cC][oO][lL][vV][aA][lL][uU][eE][\s]*[(]/g,"this.dataList._getCellData( obfuscator_en, obfuscator_targetID")).replace(/[tT][aA][rR][gG][eE][tT][cC][oO][lL][lL][aA][bB][eE][lL][\s]*[(]/g,"this.subtotaltargetcollabel( obfuscator_st, obfuscator_en, obfuscator_targetID")).replace(/[tT][aA][rR][gG][eE][tT][fF][oO][oO][tT][eE][rR][vV][aA][lL][uU][eE][\s]*[(]/g,"this.subtotaltargetfootervalue( obfuscator_st, obfuscator_en,")}var S="text",C=parseInt(b.getAttribute(d))-this.defaultColCnt;if(C>=0&&(S=this._dataList.getCellInfo(C).options.dataType),"true"===this.options.useCurrency?W.dataType=b.getAttribute(c):W.dataType=b.getAttribute(c)||S,W.expression=v,!W.dataType){var _=this.getCellInfo(y),x=_&&_.options&&_.options.dataType;y&&"true"===this.options.useCurrency?(W.dataType=x,"function"==typeof _.options.customModelUnformatter?W.customModelUnformatter=_.options.customModelUnformatter:W.customModelUnformatter=a.D.getGlobalFunction(_.options.customModelUnformatter,this.scope_id)):W.dataType=S}W.displayFormat=b.getAttribute(u)||"",W.displayFormatter=b.getAttribute(p)||"","true"!==this.options.useCurrency||W.displayFormatter||(W.displayFormat=_.options.displayFormat||b.getAttribute(u)||"",W.displayFormatter=_.options.displayFormatter||""),W.formatter=WebSquare.format.createFormatter(W.dataType,W.displayFormat,W.displayFormatter,null,null,null,this.scope_id,this.id),n[W.id]=W}}this.subtotalObj[e]=n}for(var I=o;I>0&&i==this.dataList._getCellData(I-1,e);)I--;var T=I,k=o,D={};for(var L in n){var W=n[L],A=a.D.scopingFuncBody(W.expression,this.scope_id);this._subtotalDisplayFormat=W.displayFormat||"";var M=Function("obfuscator_st","obfuscator_en","obfuscator_targetID",A).call(this,T,k,s);W.customModelUnformatter&&(M=W.customModelUnformatter.call(this,M));var E=W.formatter.format(M);D[L]=E,this.options.subtotalStyleFormatter&&M!==E&&(D[L+"_org"]=M)}return this._subtotalDisplayFormat="",D}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.getSubtotalRowList=function(t){try{var e=[]
;t&&"object"===t.returnType&&(e={});var i=this.getDataLength();for(var o in this.subtotalStrList)for(var s=1;s<i;s++){this.dataList._getCellData(s-1,o)!=this.dataList._getCellData(s,o)&&(t&&"object"===t.returnType?e[s]=!0:e.push(s))}return e}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalcolsumif=function(t,e,i,o,s){try{var a=[],n=[],l=[];if(o){var h=this._getOperator(o);if(!h.operator||!h.value)return;return n.push(h.operator),l.push(h.value),a?a.push(s):a.push(i),this._subtotalcolsum(t,e,i,a,n,l)}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalcolsumifs=function(t,e,i){try{for(var o=[],s=[],a=[],n=(arguments.length-3)/2,l=0;l<n;l++){var h=this._getOperator(arguments[2*l+3]),d=arguments[2*l+4];h.operator&&h.value&&(s.push(h.operator),a.push(h.value)),o.push(d)}return this._subtotalcolsum(t,e,i,o,s,a)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalcolsum=function(t,e,i){try{try{return this._subtotalcolsum(t,e,i)}catch(t){r.w.printStackTrace(t,null,this)}}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},C.prototype._subtotalcolsum=function(t,e,i,o,s,n){try{var l={};!this.options.groupbyStatus&&o&&(l={conditionColumn:o,targetOperator:s,conditionValue:n});var h,d=this.getColumnSubtotalRangeDataArray(t,e,i,l),c="";if(d.length>0)if(h=this.getColumnOption(i,"dataType"),c=0,"bigDecimal"===h)for(var u=0;u<d.length;u++)c=WebSquare.bigDecimal(c+"").plus(d[u]);else if("time"===h)for(u=0;u<d.length;u++){var p=WebSquare.text.fillZero(c,4);c=WebSquare.date.dateTimeAdd(p,d[u],"hour","time")}else c=a.D.sum(d,{displayFormat:this._subtotalDisplayFormat});return a.D.setPrecision(c)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalcolavg=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),s="",a=this.getColumnOption(i,"dataType");if(o.length>0)if("bigDecimal"===a){for(var n in s="0",o)s=WebSquare.bigDecimal(s).plus(o[n]);s=s.divide(WebSquare.bigDecimal(o.length))}else s=WebSquare.util.sum(o,{displayFormat:this._subtotalDisplayFormat})/o.length;return s}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalcolmax=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),s=this.getColumnOption(i,"dataType"),n=null;if("bigDecimal"===s)for(var l in o)n=null==n?o[l]:n.compare(o[l]);else for(l=0;l<o.length;l++){var h=parseFloat(o[l]);isNaN(h)||(null==n||n<h)&&(n=h)}return n=null==n?"":n,a.D.setPrecision(n)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalcolmin=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),s=this.getColumnOption(i,"dataType"),n=null;if("bigDecimal"===s)for(var l in o)n=null==n?o[l]:n.compare(o[l],!0);else for(l=0;l<o.length;l++){var h=parseFloat(o[l]);isNaN(h)||(null==n||n>h)&&(n=h)}return n=null==n?"":n,a.D.setPrecision(n)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotalcolcnt=function(t,e,i,o){try{o=o||{};return(this.getColumnSubtotalRangeDataArray(t,e,i,o)||[]).length}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.subtotaltargetcollabel=function(t,e,i,o){var s="";try{s=this.dataList._getCellData(e,i);var a=this.getCellInfo(i),n=a.options.inputType;"select"!==n&&"autoComplete"!==n&&"checkcombobox"!==n||(s=a.getData(s,e))}catch(t){r.w.printStackTrace(t,null,this)}return s},C.prototype.subtotaltargetfootervalue=function(t,e,i,o){var s;try{this.hasFooter&&this.footerTempSum&&this.footerTempSum[i]&&(s=this.footerTempSum[i].sum)}catch(t){r.w.printStackTrace(t,null,this)}return s},C.prototype.getColumnSubtotalRangeDataArray=function(t,e,i,o){try{o=o||{};for(var s,a=[],n=this.getColumnID(i),l=this.getColumnOption(n,"dataType"),h=this.dataList.getDeletedIndex(),d=this.dataList.getModifiedIndex(),c=t;c<=e;c++){if(this.options.excludeDeletedRows){for(var u=!1,p=0;p<h.length;p++)if(h[p]===c){u=!0;break}if(u)continue}if(this.options.excludeModifiedRows){for(u=!1,p=0;p<d.length;p++)if(d[p]===c){u=!0;break}if(u)continue}if(o.conditionColumn&&o.conditionColumn.length>0){
var g=!0;for(p=0;p<o.conditionColumn.length;p++){var m=this.dataList.getCellData(c,o.conditionColumn[p]),f=o.targetOperator[p],b=o.conditionValue[p],y=this.getColumnOption(o.conditionColumn[p],"dataType");if(0==(g=this._isMatched(b,m,f,y)))break}if(0==g)continue}"bigDecimal"===l?s=WebSquare.bigDecimal(this.dataList._getCellData(c,i)):(s=this.dataList._getCellData(c,i),s+=""),void 0===s||""==s?(s="0","object"==typeof o&&!1!==o.blank&&a.push(s)):a.push(s)}return a}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype._getLastSubtotalCount=function(){try{if(!this.hasSubtotal)return 0;for(var t=0,e=this.getDataLength(),i=Math.max(e-this._getVisibleLastIndex(this.drawedRowLength),0),o=0,s=e-1;s>=i;s--){for(var a=0;a<this.struct.subtotalArr.length;a++){var n=this.struct.subtotalArr[a],l=n.attr.targetColumnID,h=this.dataList._getCellData(s,l),d=h+"_12";if(s<e-1)d=this.dataList._getCellData(s+1,l);if(h!=d&&(t+=n.rowArr.length,this.options.initFixedHeightByRowNum>-1)){if(o+t>=this.options.initFixedHeightByRowNum){i=s+1;break}i=Math.max(e-this._getVisibleLastIndex(this.drawedRowLength-t),0)}}o++}return t}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.setSubtotalVisible=function(t){try{if(0===this.render.offsetHeight&&0===this.render.offsetWidth)return this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),void this.delayedDraw({subTotalVisible:t});!0===t?(this.hasSubtotal=!0,this.lastTopRowIndex=null,this._applyRowVisible(),this.setScrollYHeight()):!1===t&&(this.subtotalHidden(),this.lastTopRowIndex=null,this.hasSubtotal=!1,this.setScrollYHeight())}catch(t){r.w.printStackTrace(t,null,this)}};var _=function(t){};_.prototype.initializeFooter=function(){try{if(!this.hasFooter)return;for(var t=a.D.getDataPrefix("footer_id"),e=a.D.getDataPrefix("inputType"),i=a.D.getDataPrefix("value"),o=a.D.getDataPrefix("useLocale"),s=a.D.getDataPrefix("localeRef"),n=this.getDomList("foot_tds","td",this.getElementById(this.id+"_foot_table")),l=0;l<n.length;l++){var h=n[l],d=h.getAttribute("id");if(d&&!h.getAttribute(t)){for(var c="",u=0;u<this.struct.foot.rowArr.length;u++)for(var p=0;p<this.struct.foot.rowArr[u].length;p++)if(this.struct.foot.rowArr[u][p].id==d&&this.struct.foot.rowArr[u][p].class){c=this.struct.foot.rowArr[u][p].class;break}if("_headerRowNumber"!==d&&"_headerRowStatus"!==d||(d+="_footer"),h.setAttribute(t,d),h.setAttribute("id",this.id+"_"+d),h.setAttribute("class",h.getAttribute("class")+" "+this.id+"_footer__column"+l+" "+c),"expression"!=h.getAttribute(e)){var g=h.getAttribute(i),m=h.getAttribute(o);if("true"===m||this.options.useLocale&&!m){var f=h.getAttribute(s);if(f){var b=this.getLocaleValue(f);b&&(g=b)}}g=null!=g?g:"",h.innerHTML=this.dataTagOpen+g+this.dataTagClose}}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.drawFooter=function(t){try{if(!this.hasFooter||!this.drawFooterStatus)return;null==this.footerDataObj&&this.initFooterDataObj();var e=a.D.getDataPrefix("footer_id"),i=a.D.getDataPrefix("colindex"),o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td");if(this.footerTempSum=[],t){t=this.getColumnID(t);for(var s=0;s<o.length;s++){var n=(p=o[s]).getAttribute(e),l=parseInt(p.getAttribute(i))-this.defaultColCnt;if(n)if("expression"==(g=this.footerDataObj[n]).inputType){var h=g.expression.match(/footercol(sum|avg|max|min|custom)\s*\([^\)]*/g);if(h){for(var d=0;d<h.length;d++)if(h[d].indexOf(t)>=0){var c=a.D.scopingFuncBody(g.expression,this.scope_id);g.value=Function("_this",c).call(this,this),isNaN(g.value)?"NaN"!=g.NaNFormat&&(g.value=g.NaNFormat):"number"===g.dataType&&0===Number(g.value)&&(g.value=0);var u=g.value;g.customModelUnformatter&&(u=g.customModelUnformatter.call(this,u)),p.innerHTML=this.dataTagOpen+g.formatter.format(u)+this.dataTagClose}}else if(t==this.getCellInfo(l).id){try{c=a.D.scopingFuncBody(g.expression,this.scope_id);g.value=Function("_this",c).call(this,this),isNaN(g.value)&&"NaN"!=g.NaNFormat&&(g.value=g.NaNFormat)
}catch(t){}u=g.value;g.customModelUnformatter&&(u=g.customModelUnformatter.call(this,u)),p.innerHTML=this.dataTagOpen+g.formatter.format(u)+this.dataTagClose}}}}else for(s=0;s<o.length;s++){var p;if(n=(p=o[s]).getAttribute(e)){var g;if("expression"==(g=this.footerDataObj[n]).inputType)try{c=a.D.scopingFuncBody(g.expression,this.scope_id);g.value=Function("_this",c).call(this,this),isNaN(g.value)?"NaN"!=g.NaNFormat&&(g.value=g.NaNFormat):"number"===g.dataType&&0===Number(g.value)&&(g.value=0)}catch(t){}u=g.value;g.customModelUnformatter&&(u=g.customModelUnformatter.call(this,u)),p.innerHTML=this.dataTagOpen+g.formatter.format(u)+this.dataTagClose}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.initFooterDataObj=function(t){try{var e=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),i=-1,o=!1;t?(i=this.getColumnIndex(t),o=!0):this.footerDataObj={};for(var n=a.D.getDataPrefix("footer_id"),l=a.D.getDataPrefix("colindex"),h=a.D.getDataPrefix("value"),d=a.D.getDataPrefix("useLocale"),c=a.D.getDataPrefix("localeRef"),u=a.D.getDataPrefix("inputType"),p=a.D.getDataPrefix("dataType"),g=a.D.getDataPrefix("displayFormat"),m=a.D.getDataPrefix("displayFormatter"),f=a.D.getDataPrefix("NaNFormat"),b=a.D.getDataPrefix("expression"),y=0;y<e.length;y++){var v=e[y],w=v.getAttribute(n);w||(w="f_"+Math.random().toString(),v.setAttribute(n,w));var S=parseInt(v.getAttribute(l))-this.defaultColCnt;if(!(i>=0&&i!==S)){var C={};C.id=w;var _=v.getAttribute(b)||"",x="";""!=_&&(this.options.groupbyStatus||(_.toLowerCase().indexOf("sumifs")>-1?x="sumifs":_.toLowerCase().indexOf("sumif")>-1&&(x="sumif")),_=_.replace(/[sS][uU][mM][\s]*[(]/g,"_this.footercolsum( "),this.options.groupbyStatus||(_=(_=_.replace(/[sS][uU][mM][iI][fF][\s]*[(]/g,"_this.footercolsumif( ")).replace(/[sS][uU][mM][iI][fF][sS][\s]*[(]/g,"_this.footercolsumifs( ")),_=(_=(_=(_=(_=_.replace(/[aA][vV][gG][\s]*[(]/g,"_this.footercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.footercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.footercolmin( ")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.footercolcnt( ")).replace(/[cC][uU][sS][tT][oO][mM][\s]*[(]/g,"_this.footercolcustom( ")),C.value=v.getAttribute(h);var I,T,k=v.getAttribute(d);if("true"===k||this.options.useLocale&&!k){var D=v.getAttribute(c);if(D){var L=this.getLocaleValue(D);L&&(C.value=L)}}if(C.inputType=v.getAttribute(u),C.dataType=v.getAttribute(p),C.col_id=this.getColumnID(S),!C.dataType)try{if(C.dataType=this.getColumnOption(C.col_id,"dataType"),"true"===this.options.useCurrency){var W=this.getCellInfo(C.col_id);W&&(I=W.options.displayFormat,T=W.options.displayFormatter,W.options.customModelUnformatter&&("function"==typeof W.options.customModelUnformatter?C.customModelUnformatter=W.options.customModelUnformatter:C.customModelUnformatter=a.D.getGlobalFunction(W.options.customModelUnformatter,this.scope_id)))}else if("expression"===C.inputType)C.col_id=x?new Function("_this","return "+_.substring(_.indexOf("(")+1,_.indexOf(",")))(this):new Function("_this","return "+_.substring(_.indexOf("(")+1,_.indexOf(")")))(this),C.dataType=this._dataList.getCellInfo(C.col_id).options.dataType||"text";else{var A="text",M=S;M>=0&&(A=this._dataList.getCellInfo(M).options.dataType),C.dataType=A}}catch(t){C.dataType="text"}C.expression=_,C.displayFormat=v.getAttribute(g)||"",C.displayFormatter=v.getAttribute(m)||"","true"!==this.options.useCurrency||C.displayFormatter||(C.displayFormat=I||v.getAttribute(g)||"",C.displayFormatter=T||""),C.formatter=this._initFooterFormatter(C.col_id,C.dataType,C.displayFormat,C.displayFormatter,this.scope_id,this.id,o),C.NaNFormat=v.getAttribute(f)||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/column[@inputType='expression']/NaNFormat/@value")||"NaN","$blank"==C.NaNFormat&&(C.NaNFormat=""),this.footerDataObj[C.id]=C}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype._initFooterFormatter=function(t,e,i,o,a,n,l){try{if(t){
var h=this.getCellInfo(t),d=e||h.options.dataType,c=i;return"euro"==d?(i||(c=this.options.euroMask||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+d+'"]/euroMask/@value')||""),".",","):"rupee"==d?(i||(c=this.options.rupeeMask||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+d+'"]/rupeeMask/@value')||""),",","."):"tenge"==d?(i||(c=this.options.tengeMask||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+d+'"]/tengeMask/@value')||"")," ",","):!l||"number"!==d&&"float"!==d&&"bigDecimal"!==d||(i||(c=this.options.numberMask||s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+d+'"]/numberMask/@value')||""),",","."),WebSquare.format.createFormatter(e,c,o,null,null,null,a,n)}return WebSquare.format.createFormatter(e,i,o,null,null,null,a,n)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolsumif=function(t,e,i){try{var o=[],s=[],a=[];if(e){var n=this._getOperator(e);if(!n.operator||!n.value)return;return s.push(n.operator),a.push(n.value),o?o.push(i):o.push(t),this._footercolsum(t,o,s,a)}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolsumifs=function(t){try{for(var e=[],i=[],o=[],s=(arguments.length-1)/2,a=0;a<s;a++){var n=this._getOperator(arguments[2*a+1]),l=arguments[2*a+2];n.operator&&n.value&&(i.push(n.operator),o.push(n.value)),e.push(l)}return this._footercolsum(t,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolsum=function(t,e,i,o){try{return this._footercolsum(t)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype._footercolsum=function(t,e,i,o){try{this.footerTempSum||(this.footerTempSum=[]);var s=t;if(!this.options.groupbyStatus&&e&&e.length>0&&o&&o.length>0&&(s=t+"_"+o.join()),this.footerTempSum[s]||(this.footerTempSum[s]={}),void 0===this.footerTempSum[s].sum||""===this.footerTempSum[s].sum){var n="",l=5e3;if(this.groupbyStatus.grouped)n=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"SUM('"+t+"')");else{var h={};this.options.groupbyStatus||(h={conditionColumn:e,operator:i,conditionValue:o});var d=this.getColumnAllDataArray(t,h),c=this.getColumnOption(t,"dataType"),u=!1;if("bigDecimal"!==c&&"euro"!==c&&"tenge"!==c&&"rupee"!=c||(u=!0),d.length>0&&u||"true"===this.options.useCurrency){for(var p=WebSquare.bigDecimal("0"),g=0;g<d.length;g++)""==d[g].replace(/^\s+|\s+$/g,"")&&(d[g]="0");for(var m=0;m<d.length;m++)d[m]=WebSquare.bigDecimal(d[m]),p=p.plus(d[m]);n=p.toString()}else if(d.length>0)if(d.length>l){var f,b=Math.ceil(d.length/l),y=0;n=0;for(g=0;g<b;g++){for(var v=d.slice(y,l*(g+1)),w=0;w<v.length;w++)""==v[w].replace(/^\s+|\s+$/g,"")&&(v[w]="0"),v[w]=v[w]-0+"";f=a.D.sum(v),y=parseInt(y,10)+parseInt(v.length,10),n=parseFloat(n,10)+parseFloat(f,10)}}else n=a.D.sum(d)}this.footerTempSum[s].sum=n}return a.D.setPrecision(this.footerTempSum[s].sum)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolavg=function(t){try{var e=this.getColumnAllDataArray(t);this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={});var i="",o=5e3;if(this.groupbyStatus.grouped)return i=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"AVG('"+t+"')");if(void 0===this.footerTempSum[t].sum||""===this.footerTempSum[t].sum){var s=this.getColumnOption(t,"dataType");if(e.length>0&&("bigDecimal"==s||"true"===this.options.useCurrency)){for(var n=WebSquare.bigDecimal("0"),l=0;l<e.length;l++)""==e[l].replace(/^\s+|\s+$/g,"")&&(e[l]="0");for(var h in e)e[h]=WebSquare.bigDecimal(e[h]),n=n.plus(e[h]);return n.divide(WebSquare.bigDecimal(e.length)).toString()}if(e.length>0)if(e.length>o){var d,c=Math.ceil(e.length/o),u=0;i=0;for(l=0;l<c;l++){for(var p=e.slice(u,o*(l+1)),g=0;g<p.length;g++)""==p[g].replace(/^\s+|\s+$/g,"")&&(p[g]="0");d=a.D.sum(p),
u=parseInt(u,10)+parseInt(p.length,10),i=parseFloat(i,10)+parseFloat(d,10)}}else i=a.D.sum(e);this.footerTempSum[t].sum=i}return""===this.footerTempSum[t].sum?"":i=this.cellInfoHash[t]&&"bigDecimal"==this.cellInfoHash[t].options.dataType?WebSquare.bigDecimal(this.footerTempSum[t].sum).divide(WebSquare.bigDecimal(e.length)).toString():this.footerTempSum[t].sum/e.length}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolmax=function(t){try{if(this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={}),void 0===this.footerTempSum[t].max||""===this.footerTempSum[t].max){var e=null;if(this.groupbyStatus.grouped)e=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"MAX('"+t+"')");else{var i=this.getColumnAllDataArray(t),o=this.getColumnOption(t,"dataType");if(i.length>0&&("bigDecimal"==o||"true"===this.options.useCurrency)){for(var s,n=0;n<i.length;n++)""==i[n].replace(/^\s+|\s+$/g,"")&&(i[n]="0");for(var l in i)i[l]=WebSquare.bigDecimal(i[l]),s=null==s?i[l]:s.compare(i[l],!1);e=s.toString()}else{for(n=0;n<i.length;n++){var h=parseFloat(i[n]);isNaN(h)||(null==e||e<h)&&(e=h)}e=null==e?"":e,e=a.D.setPrecision(e)}this.footerTempSum[t].max=e}}return this.footerTempSum[t].max}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolmin=function(t){try{if(this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={}),void 0===this.footerTempSum[t].min||""===this.footerTempSum[t].min){var e=null;if(this.groupbyStatus.grouped)e=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"MIN('"+t+"')");else{var i=this.getColumnAllDataArray(t),o=this.getColumnOption(t,"dataType");if(i.length>0&&("bigDecimal"==o||"true"===this.options.useCurrency)){for(var s,n=0;n<i.length;n++)""==i[n].replace(/^\s+|\s+$/g,"")&&(i[n]="0");for(var l in i)i[l]=WebSquare.bigDecimal(i[l]),s=null==s?i[l]:s.compare(i[l],!0);e=s.toString()}else{for(n=0;n<i.length;n++){var h=parseFloat(i[n]);isNaN(h)||(null==e||e>h)&&(e=h)}e=null==e?"":e,e=a.D.setPrecision(e)}this.footerTempSum[t].min=e}}return this.footerTempSum[t].min}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolcnt=function(t,e){try{e=e||{};return(this.getColumnAllDataArray(t,e)||[]).length}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getColumnAllDataArray=function(t,e){try{e=e||{};var i=[],o=this.getColumnID(t),s=this.dataList.getDeletedIndex(),n=this.dataList.getModifiedIndex();if(null!==o){for(var l=this.isDrillDown&&a.D.getBoolean(this.options.drilldownFooterExpressionAllData)?this.getTotalRow():this.getDataLength(),h=0;h<l;h++){if(this.options.excludeDeletedRows){for(var d=!1,u=0;u<s.length;u++)if(s[u]===h){d=!0;break}if(d)continue}if(this.options.excludeModifiedRows){for(d=!1,u=0;u<n.length;u++)if(n[u]===h){d=!0;break}if(d)continue}var p;if(this.isDrillDown&&a.D.getBoolean(this.options.drilldownFooterExpressionAllData)){if(e.conditionColumn&&e.conditionColumn.length>0){var g=!0;for(u=0;u<e.conditionColumn.length;u++){var m=this._dataList.getCellData(h,e.conditionColumn[u]),f=e.operator[u],b=e.conditionValue[u],y=this.getColumnOption(e.conditionColumn[u],"dataType");if(0==(g=this._isMatched(b,m,f,y)))break}if(0==g)continue}p=this._dataList.getCellData(h,o)}else{if(e.conditionColumn&&e.conditionColumn.length>0){for(g=!0,u=0;u<e.conditionColumn.length;u++){m=this.dataList.getCellData(h,e.conditionColumn[u]),f=e.operator[u],b=e.conditionValue[u],y=this.getColumnOption(e.conditionColumn[u],"dataType");if(0==(g=this._isMatched(b,m,f,y)))break}if(0==g)continue}p=this.dataList._getCellData(h,o)}void 0===(p+="")||""==p?(p="0","object"==typeof e&&!1!==e.blank&&i.push(p)):i.push(p)}return i}c.k.printLog("[Warning] Invalid colIndex("+t+"). ["+this.id+"] getColumnAllDataArray.")}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getFooterData=function(t,e){try{
var i=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),o=a.D.getDataPrefix("footer_id");if("number"==typeof t){t=i[t+this.defaultColCnt].getAttribute(o);var s=(h=this.footerDataObj[t]).value;if("expression"==h.inputType){var n=a.D.scopingFuncBody(h.expression,this.scope_id);s=Function("_this",n).call(this,this)}return"displayData"!=e?s:h.formatter.format(s)}for(var l=0;l<i.length;l++)if(i[l].getAttribute(o)==t){var h;s=(h=this.footerDataObj[t]).value;if("expression"==h.inputType){n=a.D.scopingFuncBody(h.expression,this.scope_id);s=Function("_this",n).call(this,this)}return"displayData"!=e?s:h.formatter.format(s)}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.setFooterValue=function(t,e){this.setFooterData(t,e)},_.prototype.setFooterData=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0].getElementsByTagName("td"),s=a.D.getDataPrefix("footer_id");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute(s);for(var n=0;n<o.length;n++)if((i=o[n]).getAttribute(s)==t){var l=this.footerDataObj[t];"text"==l.inputType&&(l.value=e,i.innerHTML=this.dataTagOpen+l.formatter.format(l.value)+this.dataTagClose)}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.setFooterDisplayFormat=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),s=a.D.getDataPrefix("footer_id");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute(s);for(var n=0;n<o.length;n++)if((i=o[n]).getAttribute(s)==t){var l=this.footerDataObj[t];l.displayFormat=e,l.formatter=WebSquare.format.createFormatter(l.dataType,l.displayFormat,l.displayFormatter,null,null,null,this.scope_id,this.id),"number"==l.dataType&&(i.innerHTML=this.dataTagOpen+l.formatter.format(l.value)+this.dataTagClose)}var h=this.footerXml;if(h)for(var d=WebSquare.xml.getElementsByTagName(h,"w2:row"),c=0;c<d.length;c++){var u=WebSquare.xml.getElementsByTagName(d[c],"w2:column");for(n=0;n<u.length;n++){var p=u[n];if(p.getAttribute("id")==t){p.setAttribute("displayFormat",e);break}}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getFooterStyle=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),s=a.D.getDataPrefix("footer_id");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute(s);for(var n=0;n<o.length;n++)if((i=o[n]).getAttribute(s)==t)return WebSquare.style.getStyle(i,e)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.setFooterStyle=function(t,e,i){try{var o,s=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),n=a.D.getDataPrefix("footer_id");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber_footer";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus_footer";else if("number"==typeof t){t=(o=s[t+this.defaultColCnt]).getAttribute(n)}for(var l=0;l<s.length;l++)(o=s[l]).getAttribute(n)==t&&WebSquare.style.setStyle(o,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExcelAllFooterXML=function(t){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";var e=[];e.push("<array><![CDATA["),e.push('["'),this.footerDataObj||this.initFooterDataObj();for(var i="",o=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0].getChildNodes(),n=0;n<o.length;n++){var l=o[n];if(1==l.nodeType)for(var h=l.getChildNodes(),d=0;d<h.length;d++){var c=h[d];if(1==c.nodeType){var u=c.getAttribute("id"),p=this.footerDataObj[u];if("expression"!=p.inputType)i=p.value,i=p.formatter.format(i);else{var g=a.D.scopingFuncBody(p.expression,this.scope_id);i=Function("_this",g).call(this,this),i=p.formatter.format(i)}e.push(i),e.push('"'+t+'"')}}}return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExcelAllFooterXMLDisplay=function(t){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";var e=a.D.getDataPrefix("footer_id"),i=[]
;i.push("<array><![CDATA["),i.push('["');var o=this.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0].getElementsByTagName("td");if(this.groupbyStatus.grouped){this.footerDataObj||this.initFooterDataObj();var n=0;if(this.options.rowNumVisible){var l=(m=this.footerDataObj[o[n].getAttribute(e)]).value||"";i.push(l),i.push('"'+t+'"'),n++}if(this.options.rowStatusVisible){l=(m=this.footerDataObj[o[n].getAttribute(e)]).value||"";i.push(l),i.push('"'+t+'"')}}this.footerDataObj||this.initFooterDataObj();l="";for(var h=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0].getChildNodes(),d=0;d<h.length;d++){var c=h[d];if(1==c.nodeType)for(var u=c.getChildNodes(),p=0;p<u.length;p++){var g=u[p];if(1==g.nodeType){var m,f=g.getAttribute("id");if("expression"!=(m=this.footerDataObj[f]).inputType)l=m.value,l=m.formatter.format(l);else{var b=a.D.scopingFuncBody(m.expression,this.scope_id);l=Function("_this",b).call(this,this),l=m.formatter.format(l)}i.push(l),i.push('"'+t+'"')}}}return i[i.length-1]='"]',i.push("]]></array>"),i.join("")}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExcelAllFooterXMLRaw=function(t){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";this.footerDataObj||this.initFooterDataObj();for(var e=[],i="",o=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0].getChildNodes(),a=0;a<o.length;a++){var n=o[a];if(1==n.nodeType)for(var l=n.getChildNodes(),h=0;h<l.length;h++){var d=l[h];if(1==d.nodeType){var c=d.getAttribute("id"),u=this.footerDataObj[c];i=u.value,i=u.formatter.format(i),e[e.length]=i}}}return e[0]='<array><![CDATA[["'+e[0],e[e.length-1]+='"]]]></array>',e.join('"'+t+'"')}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExpressionValue=function(t){try{return this.hasFooter||(this.footerTempSum=[]),t=t.replace(/[sS][uU][mM][\s]*[(]/g,"_this.footercolsum( "),this.options.groupbyStatus||(t=(t=t.replace(/[sS][uU][mM][iI][fF][sS][\s]*[(]/g,"_this.footercolsumifs( ")).replace(/[sS][uU][mM][iI][fF][\s]*[(]/g,"_this.footercolsumif( ")),t=(t=(t=(t=(t=t.replace(/[aA][vV][gG][\s]*[(]/g,"_this.footercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.footercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.footercolmin( ")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.footercolcnt( ")).replace(/[cC][uU][sS][tT][oO][mM][\s]*[(]/g,"_this.footercolcustom( "),new Function("_this","return "+t)(this)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolcustom=function(t,e){try{var i=a.D.getGlobalFunction(t,this.scope_id),o="";return"function"==typeof i&&(o=i(this.getColumnAllDataArray(e),this.getColumnOption(e,"dataType"))),o}catch(e){c.k.printLog("[Warning] "+t+" is not valid function.["+this.id+"]")}};var x=i(6451),I=function(t){};I.prototype.setStartRowNumber=function(t){this.startRowNumber=t;for(var e=0;e<=this.lastIndex;e++)this._drawRowNumData(e,e+this.rowIndex)},I.prototype.setNoResultMessage=function(t){this.options.noResultMessage=t,this.displayNoResultMessage()},I.prototype.setNoResultMessageVisible=function(t){this.options.noResultMessageVisible=t,this.displayNoResultMessage()},I.prototype.checkAll=function(t,e){var i=!1,o=this.getCellInfo(t),s=o.id;if("checkbox"!=o.options.inputType){if("custom"!=o.options.inputType){var r=WebSquare.language.getMessage("Grid_warning1")||"선택하신 컬럼은 checkbox가 아닙니다.";return void $l(r)}i=!0}var a=o.options.trueValue,n=o.options.falseValue;this.drawFooterStatus=!1;var l,h=!(!this.isDrillDown||!this._dataList.options.depthColumn),d=h?this.getTotalRow():this.getDataLength(),c=!1,u=!1;if(this._linkedDataList){(u=this._linkedDataList.getBroadcast())&&this._linkedDataList.setBroadcast(!1);for(var p=0;p<d;p++){var g=this._linkedDataList.initialRowIndexArr[p],m=h?g:this._dataList.getFilteredRowIndex(g);if(i){if("checkbox"!=(b=o.cellManagerHashByRowIndex[g]?o.cellManagerHashByRowIndex[g]:o).options.inputType)continue;a=b.options.trueValue,
n=b.options.falseValue}if(l=this._dataList.getCellData(m,s),1==e||1==e||e==a)l!=a&&this._dataList.setCellData(m,s,a);else if(0==e||0==e||e==n)l!=n&&this._dataList.setCellData(m,s,n);else{var f=l==a?n:a;this._dataList.setCellData(m,s,f)}}}else{(c=this._dataList.getBroadcast())&&this._dataList.setBroadcast(!1);for(m=0;m<d;m++){if(i){var b;g=this.dataList.getRealRowIndex(m);if("checkbox"!=(b=o.cellManagerHashByRowIndex[g]?o.cellManagerHashByRowIndex[g]:o).options.inputType)continue;a=b.options.trueValue,n=b.options.falseValue}if(l=this._dataList.getCellData(m,s),1==e||1==e||e==a)l!=a&&this._dataList.setCellData(m,s,a);else if(0==e||0==e||e==n)l!=n&&this._dataList.setCellData(m,s,n);else{f=l==a?n:a;this._dataList.setCellData(m,s,f)}}}u&&this._linkedDataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0,refreshInstance:!1}]}),c&&this._dataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0,refreshInstance:!1}]}),this.drawFooterStatus=!0,this.drawFooter(),this.drawHeader()},I.prototype.getColumnType=function(t){return this.getCellInfo(t).options.inputType},I.prototype.getColumnNodeSet=function(t){return this.getCellInfo(t).itemsetObj},I.prototype.getDefaultStyle=function(){return this.options.style},I.prototype.setCellChecked=function(t,e,i){if("boolean"==typeof i){var o=this.getCellInfo(e),s=o.id,r=!1;if(0==o.internal&&"custom"==o.options.inputType){var a=this.dataList.getRealRowIndex(t);o=o.cellManagerHashByRowIndex[a]?o.cellManagerHashByRowIndex[a]:o,r=!0}if("checkbox"==o.options.inputType||"radio"==o.options.inputType){if("radio"==o.options.inputType&&0!=i){var n=!(!this.isDrillDown||!this._dataList.options.depthColumn),l=n?this.getTotalRow():this.getDataLength();if(this._linkedDataList)if(r);else for(var h=0;h<l;h++){a=this._linkedDataList.initialRowIndexArr[h];var d=n?a:this._dataList.getFilteredRowIndex(a);this._dataList.setCellData(d,s,o.options.falseValue)}else if(r);else for(d=0;d<l;d++)this._dataList.setCellData(d,s,o.options.falseValue);this.drawColumnData(e)}i=1==i?o.options.trueValue:o.options.falseValue,this._dataList.setCellData(t,s,i)}else{var c=WebSquare.language.getMessage("Grid_warning3")||"checkbox나 radio가 아닙니다.";alert(c)}}else{var u=WebSquare.language.getMessage("Grid_warning2")||"입력데이터가 옳바르지 않습니다. true/false boolean 타입으로 입력하세요";alert(u)}},I.prototype.getGridHTML=function(){alert("현재 구현중")},I.prototype.redrawColumn=function(t,e){try{var i=void 0===e||e;this.drawColumnData(t,i)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getDrawCount=function(){return this.getVisibleRowNum()},I.prototype.getVisibleRowNum=function(){return this.rowIndex>=0?this.lastIndex+1:0},I.prototype.getTopRowIndex=function(){return this.rowIndex},I.prototype.setTopRowIndex=function(t,e,i){var o=this.getElementById(this.id+"_scrollY_div");if(t<=0&&(t=0),null!==this.lastTopRowIndex)t>this.lastTopRowIndex&&(t=parseInt(this.lastTopRowIndex+.5,10));else if(o.offsetHeight<o.scrollHeight){if(this.rowIndex<t){var s=this._getVisibleLastIndex(this.lastIndex+1);(t=t+s>this.getDataLength()?this.getDataLength()-s:t)>this.rowIndex+s-1&&(this.adjustDraw_keepTop=!0)}}else t=0;if(this.rowIndex!=t){if(this.delayedDraw({rowIndex:t}))return;this.scrollEvent=!1,this.checkScrollEnd=!e,i&&this.setFocusedCell2(0,0,!1),this.drawData(t),o.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t)}},I.prototype.getBottomRowIndex=function(){return this.rowIndex>=0?this.rowIndex+this.lastIndex:-1},I.prototype.setBottomRowIndex=function(t){this.drawBottomData(t)},I.prototype.getCellPosition=function(t,e,i){e=this.getColumnIndex(e),i=(i||"").toLowerCase();var o=this.data_td_list[e+t*this.oneRowDataLength];if(!o){var s=t-this.rowIndex;o=this.data_td_list[e+s*this.oneRowDataLength]}if(o){if("top"==i)return o.offsetTop;if("left"==i)return o.offsetLeft}return null},I.prototype.getCellSize=function(t,e,i){e=this.getColumnIndex(e),i=(i||"").toLowerCase();var o=t-this.rowIndex,s=this.data_td_list[e+o*this.oneRowDataLength]
;return"width"==i?s.clientWidth:"height"==i?s.clientHeight:null},I.prototype.getHeaderPosition=function(t,e){e=(e||"").toLowerCase();var i=this.getHeaderLayer(t);if("top"==e){var o=i.offsetTop;return this.options.groupbyZone&&(o+=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight),o}return"left"==e?i.offsetLeft:null},I.prototype.getHeaderSize=function(t,e){e=(e||"").toLowerCase();var i=this.getHeaderLayer(t);return"width"==e?i.clientWidth:"height"==e?i.clientHeight:null},I.prototype.setSummary=function(t){this.getElementById(this.id+"_body_table").setAttribute("summary",t)},I.prototype.setFooterSummary=function(t){this.hasFooter&&this.getElementById(this.id+"_foot_table").setAttribute("summary",t)},I.prototype.setCaption=function(t){var e=this.getElementById(this.id+"_body_table").getElementsByTagName("caption")[0];if(e)e.innerHTML=t;else{(e=document.createElement("caption")).innerHTML=t;var i=this.render.getElementsByTagName("colgroup")[0];i.parentNode.insertBefore(e,i)}var o=e.className;e.className=o&&""!=o?o+" setcaption":"setcaption"},I.prototype.setCaptionAuto=function(t){for(var e=this.getHeaderValueList(),i="",o="",s=0;s<e.length;s++)i.length>0&&(o=","),i=i+o+e[s];t&&(this.options.captionTitle=t),this.options.captionTitle?this.setCaption(this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+i+WebSquare.language.getMessage("Grid_caption")):this.setCaption(i+WebSquare.language.getMessage("Grid_caption"))},I.prototype.setFooterCaption=function(t){if(this.hasFooter){var e=this.getElementById(this.id+"_foot_table"),i=e.getElementsByTagName("caption")[0];if(i)i.innerHTML=t;else{(i=document.createElement("caption")).innerHTML=t;var o=e.getElementsByTagName("colgroup")[0];o.parentNode.insertBefore(i,o)}}},I.prototype.groupby=function(t){try{this.hideCustomFilterList(),this._clearMergeCellBackground(),this.clearSearchData({clearValue:!0});var e="string"==typeof(t=t||{}).sortIndex?t.sortIndex.split(" "):t.sortIndex,i="string"==typeof t.sortOrder?t.sortOrder.split(" "):t.sortOrder,s=e.length;if(-1!=this.options.groupbyMaxCount&&this.options.groupbyMaxCount<s)return void c.k.printLog("groupby max column count has been exceeded.["+this.id+"]");for(var n=0;n<s;n++){var l=parseInt(e[n],10);e[n]=isNaN(l)?this.getColumnIndex(e[n]):l}if(!t.filter&&!this.groupbyStatus.grouped&&this.options.customFilterBox&&this.groupbyFilterBox_history&&this.groupbyFilterBox_history.length>0&&!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var h=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()];if(!h.groupbyOptions&&h.customFilterListFilterInfo){t.filter=JSON.parse(h.customFilterListFilterInfo,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"==typeof i&&i.constructor===RegExp?i:"object"==typeof i&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}}));var d=e.length-1,u=!1;for(var p in t.filter){var g=!1;for(n=d;n>=0;n--)if(this.tdIdList[e[n]]===p){g=!0;break}g||(e.push(this.bodyIdColIndexMap[p]),i.push(i[i.length-1]),u=!0)}u&&(t.sortIndexArr=e,t.sortOrderArr=i),this.groupbyFilterList||this.createGroupbyFilterList({noDraw:!0}),this.groupbyStatus.filter=t.filter,this._dataList.sortStatusInfo={},this._dataList.sortStatusArr=[],s=e.length}}this.removeFocusedCell(),this._dataList.clearFilter(!0),this.clearHeaderSort(),this.headerSortStatusArr=[],this.groupbyStatus.groupbyOptions=JSON.stringify(t,(function(t,e){return"function"==typeof e||"object"==typeof e&&e.constructor===RegExp?e.toString():e}));var m={};if(t.filter){var f="",b="";for(var p in t.filter){var y,v=t.filter[p];f=',"'+p+'"'+f,b=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+b,"func"===v.type?(v.noRefresh=!0,v.noRefreshAfter=!0,m[this.bodyToHeaderRelation[v.colIndex]]=!0,
this.dataList.setColumnFilter(v)):(v.constructor===/a/.constructor?y=v:t.filterRegExp&&t.filterRegExp[p]&&t.filterRegExp[p].constructor===/a/.constructor?y=t.filterRegExp[p]:"object"==typeof v&&(v=0==v.length?"/^[a-z0-9_-]{3,16}$/":"^"+v.join("$|^")+"$",y=new RegExp(v,"gi")),y&&this.dataList.setColumnFilter({type:"regExp",colIndex:p,key:y,condition:"and",noRefresh:!0,noRefreshAfter:!0}))}if(this.groupbyFilterList){var w='{"column":['+(f=f.slice(1)+"],")+'"filteredRowIndexArr":['+(b=b.slice(1)+"]}");if(this.groupbyFilterList.filterHistory=JSON.parse(w),this.getRowCount()<=0)for(;this.groupbyFilterList.filterHistory.filteredRowIndexArr.length>0&&this.groupbyFilterList.filterHistory.filteredRowIndexArr[0].length<=0;)this.groupbyFilterList.filterHistory.column.shift(),this.groupbyFilterList.filterHistory.filteredRowIndexArr.shift()}t.noRefreshAfter||this._dataList.broadcast({gridView:["notifyAfterSettedColumnFilter"]})}if(t.sortIndex){var S=o.x.extend({},t);S.noRefresh=!0,S.sortIndex=[];for(n=0;n<e.length;n++)S.sortIndex.push(this.getColumnID(e[n]));if(t.sortFunc)if(S.sortFuncArr=[],"string"==typeof t.sortFunc)(C=a.D.getGlobalFunction(t.sortFunc,this.scope_id))&&S.sortFuncArr.push(C);else if(t.sortFunc.constructor==Array)for(n=0;n<t.sortFunc.length;n++){var C;(C=a.D.getGlobalFunction(t.sortFunc[n],this.scope_id))&&S.sortFuncArr.push(C)}this.dataList.multisort(S)}this.groupbyInfo={},this.statusArr=[];var _=this._linkedDataList?this._linkedDataList.filteredRowIndexArr:this._dataList.filteredRowIndexArr,x=[],I=[],T=0,k=[],D=[];for(var L in this.groupbyStatus.groupedRowIndexArr=[],this.groupbyStatus.groupbyRowIndexArr=_.slice(),this.groupbyStatus.groupbyDepthDelimiter="||",this.customFilterStatusObj={},m)this.customFilterStatusObj[L]=!0;this.groupbyStatus.grouped=!0,this.groupbyStatus.filter=t.filter||{},this.groupbyStatus.sortIndexArr=e,this.groupbyStatus.sortOrderArr=i,this.groupbyStatus.headerValueObj={},this.groupbyStatus.footerValueObj={},t.keepDisplayOptions||(this.groupbyDisplayOptions={},this.groupbyDisplayOptions.rowNumHeader=t.rowNumHeader||{},this.groupbyDisplayOptions.rowStatusHeader=t.rowStatusHeader||{},this.groupbyDisplayOptions.groupbyHeader=t.groupbyHeader||[],this.groupbyDisplayOptions.rowNumFooter=t.rowNumFooter||{},this.groupbyDisplayOptions.rowStatusFooter=t.rowStatusFooter||{},this.groupbyDisplayOptions.groupbyFooter=t.groupbyFooter||[],this.groupbyDisplayOptions.closeGroup=t.closeGroup||!1,this.groupbyDisplayOptions.showDisplayData=t.showDisplayData||!1,this.groupbyDisplayOptions.showOnlyLastDepth=t.showOnlyLastDepth||!1,this.groupbyDisplayOptions.hideHeader=t.hideHeader||!1,this.groupbyDisplayOptions.hideFooter=t.hideFooter||!1);for(n=0;n<_.length;n++){k=D,D=[];for(var W=_[n],A=W*this._dataList.cellIdList.length,M=0;M<s;M++){var E=this.tdIdList[e[M]],q=this.cellInfoHash[E];q&&"expression"==q.options.inputType?D[M]=q.getExpressionValue(W):D[M]=this._dataList.dataArr[A+this._dataList.bodyIdColIndexMap[E]]||""}if(n>0){var R=!1,N=[];for(M=0;M<s;M++)if(R||k[M]!==D[M]){var F=k.slice(0,M+1).join(this.groupbyStatus.groupbyDepthDelimiter);R=!0;var O={type:"footer",groupId:F,depth:M,status:"open",index:""};this.groupbyInfo[F]=this.groupbyInfo[F]?this.groupbyInfo[F]:{},this.groupbyInfo[F].footer=O,N.push(O)}for(M=N.length-1;M>=0;M--)N[M].index=x.length,this.groupbyDisplayOptions.hideFooter||(x.push(N[M]),I.push("footer"))}var B=!1;for(M=0;M<s;M++)if(B||0==n||k[M]!==D[M]){F=D.slice(0,M+1).join(this.groupbyStatus.groupbyDepthDelimiter);B=!0;O={type:"header",groupId:F,depth:M,status:"open",index:x.length};this.groupbyInfo[F]={header:O},this.groupbyDisplayOptions.hideHeader||(x.push(O),I.push("header"))}x.push(_[n]),I.push(T++)}if(I.length>0)for(n=s-1;n>=0;n--){O={type:"footer",groupId:F=D.slice(0,n+1).join(this.groupbyStatus.groupbyDepthDelimiter),depth:n,status:"open",index:x.length};this.groupbyInfo[F]=this.groupbyInfo[F]?this.groupbyInfo[F]:{},this.groupbyInfo[F].footer=O,this.groupbyDisplayOptions.hideFooter||(x.push(O),
I.push("footer"))}if(this.groupbyStatus.groupedRowIndexArr=x,this.rowNumArr=I,this.options.foldAll)for(var F in this.groupbyInfo){"open"==(P=this.groupbyInfo[F].header).status&&0==P.depth&&this._foldRow(P)}else if(this.groupbyDisplayOptions.closeGroup&&I.length>0)for(var V in this.groupbyInfo){var P;s==(P=this.groupbyInfo[V].header).groupId.split(this.groupbyStatus.groupbyDepthDelimiter).length&&"number"!=typeof P&&this.groupbyStatus.groupedRowIndexArr[P.index]==P&&this._foldRow(P)}this.lastTopRowIndex=null,this.rowIndex=0,this.setScrollYHeight(),t.sortIndex?(this._dataList.broadcast({gridView:["notifyMultisort"]}),this._dataList.broadcast({gridView:["notifySettedFilter",[{isSort:!0,keepTop:t.keepTop}]],generalComp:"both"})):this.notifyDataChanged(),this.options.groupbyZoneMessage&&this.hideGroupbyZoneMessage(),this.options.groupbyZone&&this.syncWithGroupbyZone();var H=e.length;if(this.groupbyStatus.beforeSortIndexLength=H,a.D.isIE("8")&&this.drawData(0,null,"async"),this.groupbyStatus.grouped&&!this.options.groupbyFilterIcon){var j=a.D.getDataPrefix("useFilter"),z=(a.D.getDataPrefix("header_id"),this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")));for(n=0;n<z.length;n++){var G=z[n],U=G.getAttribute("id");!U||U.match("RowNumber")||U.match("RowStatus")||"true"==G.getAttribute(j)&&(document.getElementById(U+"_filter").style.display="none")}}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.clearGroupby=function(){try{this.clearGrouping=!0,this.groupbyStatus={},this.groupbyZoneStatus.beforeOpenedColIndex=null,this.groupbyZoneStatus.beforeOpenedColTagName=null,this.groupbyZoneStatus.clickedHeaderInfo=null,this.groupbyDisplayOptions=null,this.rowIndex=0,this.dataList.clearFilter(),this.clearHeaderSort(),this.clearGroupbyZone(),a.D.isIE("8"),this.options.groupbyZoneMessage&&this.showGroupbyZoneMessage(),this.groupbyFilterList&&this.hideGroupbyFilterList();var t=this.getDataLength();if(t<this.rowIndex+this.drawedRowLength)for(var e=t-this.rowIndex;e<this.drawedRowLength;e++)this.clearGroupedRow(e,e+this.rowIndex);this.clearGrouping=!1;var i=a.D.getDataPrefix("useFilter"),o=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(e=0;e<o.length;e++){var s=o[e],n=s.getAttribute("id");!n||n.match("RowNumber")||n.match("RowStatus")||"true"==s.getAttribute(i)&&(document.getElementById(n+"_filter").style.display="")}if(this.options.customFilterBox&&this.groupbyFilterBox_history&&this.groupbyFilterBox_history.length>0&&!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var l=this.groupbyFilterBox_select.getSelectedIndex();this.groupbyFilterBox_history[l].groupbyOptions&&(this.notifyBeforeSettedColumnFilter(),this.refreshCustomFilterHistory(l),this.notifyAfterSettedColumnFilter())}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.toggleGroup=function(t){if(this.groupbyInfo[t]){var e=this.groupbyInfo[t].header;"number"!=typeof e&&this.dataList.getRealRowIndex(e.index)==e&&("open"==e.status?this._foldRow(e):this._unfoldRow(e),this.lastTopRowIndex=null,this.setScrollYHeight(),"open"==e.status?this.notifyRowInserted(e.index):this.notifyRowChanged(e.index),this.removeFocusedCell(),this.drawFooter())}},I.prototype._foldRow=function(t){if("open"==t.status){if(t.status="closed",this.groupbyDisplayOptions.hideFooter){for(var e,i=t.index+1;i<this.rowNumArr.length&&!("header"==this.rowNumArr[i]&&this.groupbyStatus.groupedRowIndexArr[i].depth<=t.depth);i++)e=i;t.closedChildArr=this.groupbyStatus.groupedRowIndexArr.splice(t.index+1,e-t.index)}else{var o=this.groupbyInfo[t.groupId].footer;t.closedChildArr=this.groupbyStatus.groupedRowIndexArr.splice(t.index+1,o.index-t.index-1)}var s=[],r=t.closedChildArr.slice(0).sort();for(i=0;i<this.groupbyStatus.groupbyRowIndexArr.length;i++){for(var a=!1,n=0,l=r.length-1,h=0,d=this.groupbyStatus.groupbyRowIndexArr[i];n<=l;){if(d==r[h=Math.floor((n+l)/2)]){a=!0;break}d<r[h]?l=h-1:n=h+1}a||s.push(this.groupbyStatus.groupbyRowIndexArr[i])}
this.groupbyStatus.groupbyRowIndexArr=s;var c=this.groupbyStatus.groupedRowIndexArr.length,u=0;this.rowNumArr=[];for(i=0;i<c;i++)"number"==typeof this.groupbyStatus.groupedRowIndexArr[i]?this.rowNumArr.push(u++):(this.groupbyInfo[this.groupbyStatus.groupedRowIndexArr[i].groupId][this.groupbyStatus.groupedRowIndexArr[i].type].index=this.rowNumArr.length,this.rowNumArr.push(this.groupbyStatus.groupedRowIndexArr[i].type))}},I.prototype._unfoldRow=function(t){if("closed"==t.status){t.status="open",t.closedChildArr.unshift(t.index+1,0),[].splice.apply(this.groupbyStatus.groupedRowIndexArr,t.closedChildArr),t.closedChildArr=[];var e=0;this.rowNumArr=[],this.groupbyStatus.groupbyRowIndexArr=[];for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++)"number"==typeof this.groupbyStatus.groupedRowIndexArr[i]?(this.rowNumArr.push(e++),this.groupbyStatus.groupbyRowIndexArr.push(this.groupbyStatus.groupedRowIndexArr[i])):(this.groupbyInfo[this.groupbyStatus.groupedRowIndexArr[i].groupId][this.groupbyStatus.groupedRowIndexArr[i].type].index=this.rowNumArr.length,this.rowNumArr.push(this.groupbyStatus.groupedRowIndexArr[i].type))}},I.prototype.foldAll=function(){for(var t in this.groupbyInfo){var e=this.groupbyInfo[t].header;"open"==e.status&&0==e.depth&&this._foldRow(e)}this.lastTopRowIndex=null,this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.drawFooter(),this.drawHeader()},I.prototype.unfoldAll=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++){var e=this.groupbyStatus.groupedRowIndexArr[t];"number"!=typeof e&&"header"==e.type&&"closed"==e.status&&this._unfoldRow(e)}this.lastTopRowIndex=null,this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.drawFooter(),this.drawHeader()},I.prototype.drawGroupData=function(t,e,i){var o,s,r,a=t,n=i*this.realRowDataLength,l=this.realRowDataLength;if("header"==e.type)o=this.groupbyDisplayOptions.rowNumHeader,s=this.groupbyDisplayOptions.rowStatusHeader,r=this.groupbyDisplayOptions.groupbyHeader;else{if("footer"!=e.type)return void(t.innerHTML="");o=this.groupbyDisplayOptions.rowNumFooter,s=this.groupbyDisplayOptions.rowStatusFooter,r=this.groupbyDisplayOptions.groupbyFooter}this.options.rowNumVisible&&(this._drawGroupData(a,e,o),o.hidden||(l-=o.colSpan||1),n++,a=this.all_data_td_list[n]),this.options.rowStatusVisible&&(this._drawGroupData(a,e,s),s.hidden||(l-=s.colSpan||1),n++,a=this.all_data_td_list[n]);for(var h={},d=0;d<l;d++)if(!h["domIndex_"+n]){n++;var c={};if(r instanceof Array?c=r[d]||{}:r instanceof Object&&"object"==typeof r&&(c=r["depth_"+e.depth][d]||{}),Number(c.targetIndex)>-1){var u=i*this.realRowDataLength+c.targetIndex;h["domIndex_"+u]=!0,this._drawGroupData(this.all_data_td_list[u],e,c)}else this._drawGroupData(a,e,c);a=this.all_data_td_list[n]}},I.prototype._drawGroupData=function(t,e,i){try{var o=i.className||"",s="gridBodyDefault w2grid_groupby w2grid_groupby_depth_"+e.depth+" "+o;t.className=s,t.innerHTML="";var n,l=i.colSpan,h=i.value||"",d=i.inputType||"",c=i.depthVisible||!1,u=i.align||"",p=i.expression||"",g=(l=i.colSpan||1,i.hidden?"none":""),m=i.displayFormatType||"text",f=i.displayFormat||"",b=i.displayFormatter||null;if(t.setAttribute("colSpan",l),t.style.align="",t.style.textAlign="",t.style.display=g,t.style.borderTopWidth="1px",t.style.borderBottomWidth="1px",d){var y=a.D.getDataPrefix("col_id");switch((f||b)&&(n=new WebSquare.format.createFormatter(m,f,b,null,null,null,this.scope_id,this.id)),d){case"toggleButton":var v="<span class='"+("open"==e.status?"w2grid_minus":"w2grid_plus")+"' style='display:inline-block;"+(u?"float:"+u+";":"")+" margin-left:"+20*e.depth+"px;'></span>";t.innerHTML+=v;break;case"expression":if(p){var w=this.groupbyInfo[e.groupId].header;w.colID=t.getAttribute(y);var S=0;if("open"==w.status){for(var C,_=!0,x=0,I=w.index;I<this.groupbyStatus.groupedRowIndexArr.length;I++){
var T=this.groupbyStatus.groupedRowIndexArr[I];if(this.groupbyDisplayOptions.hideFooter&&_){_=!1;for(var k=I+1;k<this.groupbyStatus.groupedRowIndexArr.length;k++){var D=this.groupbyStatus.groupedRowIndexArr[k];if("header"==D.type&&T.depth>=D.depth)break;x=k}}if(this.groupbyDisplayOptions.hideFooter){if(I>=x){C=I;break}}else if("footer"==T.type&&T.depth==w.depth){C=T.index;break}}S=this.groupExpression(this.groupbyStatus.groupedRowIndexArr,w.index,C,p,w)}else S=this.groupExpression(w.closedChildArr,0,w.closedChildArr.length-1,p,w);n&&(S=n.format(S));var L="<span style='display:inline-block;"+(u?"float:"+u+";":"")+"''>"+S+"</span>";t.innerHTML+=L}}}if(c){var W="";"toggleButton"!=d&&(W="margin-left: "+20*e.depth+"px"),t.innerHTML+="<span style='display:inline-block;"+(u?"float:"+u+";":"")+" "+(W||"")+"'>"+e.groupId.wq_replaceAll(this.groupbyStatus.groupbyDepthDelimiter," - ")+"</span>"}h&&(n&&(h=n.format(h)),t.innerHTML+="<span style='display:inline-block;"+(u?"float:"+u+";":"")+"'>"+h+"</span>")}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.groupExpression=function(t,e,i,o,s){try{var a=o;return a=(a=(a=(a=(a=(a=(a=(a=a.replace(/[sS][uU][mM][\s]*[(]/g,"_this.groupbySum(arr, startIndex, endIndex,")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.groupbyAvg(arr, startIndex, endIndex,")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.groupbyMax(arr, startIndex, endIndex,")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.groupbyMin(arr, startIndex, endIndex,")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.groupbyCount(arr, startIndex, endIndex,")).replace(/[dD][eE][pP][tT][hH][\s]*[(]/g,"_this.groupbyDepth(header")).replace(/[tT][oO][gG][gG][lL][eE][\s]*[(]/g,"_this.groupbyToggle(header")).replace(/[dD][eE][pP][tT][hH][sS][tT][rR][\s]*[(]/g,"_this.groupbyDepthStr(header"),a=new Function("_this","arr","startIndex","endIndex","expression","header","return "+a)(this,t,e,i,o,s)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.groupbySum=function(t,e,i,o){for(var s=this.getColumnIndex(o),r=0,a=e;a<=i;a++)"number"==typeof t[a]?r+=parseFloat(this.dataList._getCellData(t[a],this.getColumnID(s),3))||0:"header"==t[a].type&&"closed"==t[a].status&&(r+=this.groupbySum(t[a].closedChildArr,0,t[a].closedChildArr.length-1,o));return r},I.prototype.groupbyAvg=function(t,e,i,o){var s=this._groupbyAvg(t,e,i,o);return s.sum/s.number},I.prototype._groupbyAvg=function(t,e,i,o){for(var s=this.getColumnIndex(o),r={sum:0,number:0},a=e;a<=i;a++)if("number"==typeof t[a])r.sum+=parseFloat(this.dataList._getCellData(t[a],this.getColumnID(s),3))||0,r.number++;else if("header"==t[a].type&&"closed"==t[a].status){var n=this._groupbyAvg(t[a].closedChildArr,0,t[a].closedChildArr.length-1,o);r.sum+=n.sum,r.number+=n.number}return r},I.prototype.groupbyMax=function(t,e,i,o){for(var s=this.getColumnIndex(o),r=0,a=0,n=!1,l=e;l<=i;l++)"number"==typeof t[l]?r=parseFloat(this.dataList._getCellData(t[l],this.getColumnID(s),3))||0:"header"==t[l].type&&"closed"==t[l].status&&(r=this.groupbyMax(t[l].closedChildArr,0,t[l].closedChildArr.length-1,o)),n||(a=n=r),n&&a<r&&(a=r);return a},I.prototype.groupbyMin=function(t,e,i,o){for(var s,r=this.getColumnIndex(o),a=0,n=!1,l=e;l<=i;l++)"number"==typeof t[l]?a=parseFloat(this.dataList._getCellData(t[l],this.getColumnID(r),3))||0:"header"==t[l].type&&"closed"==t[l].status&&(a=this.groupbyMin(t[l].closedChildArr,0,t[l].closedChildArr.length-1,o)),n||(s=n=a),n&&s>a&&(s=a);return s},I.prototype.groupbyToggle=function(t){return"<span class='"+("open"==t.status?"w2grid_minus":"w2grid_plus")+"' style='display:inline-block; margin-left:"+20*t.depth+"px;'></span>"},I.prototype.groupbyDepth=function(t){return t.depth},I.prototype.groupbyDepthStr=function(t){try{for(var e=t.groupId.wq_replaceAll(this.groupbyStatus.groupbyDepthDelimiter," - "),i=!1,o=e.split(" - "),s=0;s<this.groupbyStatus.sortIndexArr.length;s++){if("true"==(g=this.getCellInfo(this.groupbyStatus.sortIndexArr[s])).options.groupbyDepthStrLabel)try{i=!0;var n=o[s];if(g.dataComp){
var l=a.D.getComponentById(g.dataComp,g.scope_id);if(l){var h,d;g.itemsetObj&&(h=g.itemsetObj.label||"label",d=g.itemsetObj.value||"value"),g.element&&(h=g.element.getValue("w2:label","ref"),d=g.element.getValue("w2:value","ref"));for(var c=l.getAllJSON(),u=0;u<c.length;u++){var p=c[u];if(n==p[d]){o[s]=!0!==this.groupbyDisplayOptions.showDisplayData?p[h]:g.getDisplayData(p[h]);break}}}}else for(u=0;u<g.itemArr.length;u++)if(n==g.itemArr[u].value){o[s]=!0!==this.groupbyDisplayOptions.showDisplayData?g.itemArr[u].label:g.getDisplayData(g.itemArr[u].label);break}}catch(t){break}}if(i&&(e=o.join(" - ")),1==this.groupbyDisplayOptions.showDisplayData&&!i){for(s=0;s<o.length;s++){var g=this.getCellInfo(this.groupbyStatus.sortIndexArr[s]);o[s]=g.getDisplayData(o[s])}e=o.join(" - ")}if(1==this.groupbyDisplayOptions.showOnlyLastDepth){var m=e.split(" - ");e=m[m.length-1]}return e}catch(t){r.w.printStackTrace(t)}},I.prototype.groupbyCount=function(t,e,i){for(var o=0,s=e;s<=i&&s<t.length;s++)"number"==typeof t[s]?o++:"header"==t[s].type&&"closed"==t[s].status&&(o+=this.groupbyCount(t[s].closedChildArr,0,t[s].closedChildArr.length-1));return o},I.prototype._drawGroupbyZone=function(){try{var t=this.uuid;if(this.options.groupbyZone){this.groupbyZoneStatus.groupbyZoneRender=this.dom[this.id+"_groupbyZone_div"];var e=null!=this.options.groupbyZoneHeight.match("%"),i=parseInt(this.options.groupbyZoneHeight),o=i+"px";this.groupbyZoneStatus.groupbyZoneRender.style.height=o,e&&(this.groupbyZoneStatus.groupbyZoneRender.style.height=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px");var s=this.getElementById(this.id+"_main_div"),r=WebSquare.style.getStyle(this.groupbyZoneStatus.groupbyZoneRender,"border-left-width").replace("px","");if(this.groupbyZoneStatus.groupbyZoneBorder=2*r,this.groupbyZoneStatus.groupbyZoneRender.style.width=s.clientWidth-this.groupbyZoneStatus.groupbyZoneBorder+"px",this.dom[this.id+"_main_div"]&&(this.dom[this.id+"_main_div"].style.top=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px"),this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight-this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){}if(this.dom[this.id+"_scrollY_div"].style.top="0px",this.options.groupbyZoneMessage){var n=document.createElement("div");n.innerHTML+=this.options.groupbyZoneMessage,n.className+=" w2grid_groupbyZone_message ",this.groupbyZoneStatus.groupbyZoneRender.appendChild(n),n.style.marginTop=-n.offsetHeight/2+"px",n.style.marginLeft=-n.offsetWidth/2+"px",this.groupbyZoneStatus.groupbyZoneMessageRender=n}if(this.options.groupbyZoneSearch){var l=document.getElementById(this.id+"_groupbyZone_search");this.groupbyZone_searchinput=new WebSquare.uiplugin.input(this.id+"_groupbyZone_searchinput",{className:"w2grid_groupbyZone_searchinput"}),requires("uiplugin.trigger"),this.groupbyZone_searchbtn=new WebSquare.uiplugin.trigger(this.id+"_groupbyZone_searchbtn",{className:"w2grid_groupbyZone_searchbtn"}),this.addControl(this.groupbyZone_searchinput),this.addControl(this.groupbyZone_searchbtn),l.innerHTML=this.groupbyZone_searchinput.toHTML()+this.groupbyZone_searchbtn.toHTML(),this.groupbyZone_searchbtn.activate(),this.groupbyZone_searchinput.activate();var h=this.groupbyZone_searchinput.uuid;this.groupbyZone_searchbtn.bind("onclick",(function(){WebSquare.idCache[h].show()}));var c=this.id;this.groupbyZone_searchinput.bind("onkeydown",(function(e){d.B.stopPropagation(e),a.D.setTimeout((function(){var e=WebSquare.idCache[t];e._groupbyZoneSearch(),e.groupbyZone_searchinput.focus()}),{key:c+"_groupbyZone_search",delay:50})})),this.groupbyZone_searchinput.hide()}}if(this.options.groupbyZone&&this.options.groupbyFilterBox){this.groupbyZoneStatus.groupbyFilterBoxRender=this.dom[this.id+"_groupbyFilterBox_div"];var u=this.getElementById(this.id+"_groupbyFilterBox_select");this.groupbyFilterBox_select=new WebSquare.uiplugin.selectbox(this.id+"_groupbyFilterBox_select",{
className:"w2grid_groupbyFilterBox_select",labelWidthAuto:!1,readOnly:!0,direction:"top"===this.options.groupbyFilterBoxLocation?"down":"up",visibleRowNum:this.options.filterBoxvisibleRowNum}),this.addControl(this.groupbyFilterBox_select),u.innerHTML=this.groupbyFilterBox_select.toHTML(),this.groupbyFilterBox_select.activate(),this.groupbyFilterBox_select.bind("onclick",(function(t){this.handleClickEvent()})),this.groupbyFilterBox_select.bind("onchange",(function(){WebSquare.idCache[t].applyFilterHistory()}));var p=this.getElementById(this.id+"_groupbyFilterBox_div");"bottom"===this.options.groupbyFilterBoxLocation?this.dom[this.id+"_main_div"].style.bottom=this.scrollLayerWidthSize+p.offsetHeight+"px":"top"===this.options.groupbyFilterBoxLocation&&(this.dom[this.id+"_main_div"].style.top=i+p.offsetHeight+"px",this.dom[this.id+"_main_div"].style.bottom=this.scrollLayerWidthSize+"px",this.groupbyZoneStatus.groupbyZoneRender.style.top=p.offsetHeight+"px");var g=this.getElementById(this.id+"_groupbyFilterBox_main"),m=this.getElementById(this.id+"_groupbyFilterBox_buttons");g.style.paddingLeft=m.offsetWidth+"px";var f=this.getElementById(this.id+"_groupbyFilterBox_apply"),b=this.getElementById(this.id+"_groupbyFilterBox_delete");f.onclick=function(){var e=WebSquare.idCache[t];this.checked?e.applyFilterHistory():e.groupbyStatus.grouped?e.clearGroupby():e._dataList.clearFilter()},b.onclick=function(){WebSquare.idCache[t].clearFilterHistory()},this.handlerResize_drawInitializer()}}catch(t){WebSquare.exception.printStackTrace(t)}},I.prototype.getCellInputType=function(t,e){try{var i=this.getCellInfo(e);if("custom"==i.options.inputType){var o=this.getRealRowIndex(t);return i.cellManagerHashByRowIndex[o].options.inputType}return i.options.inputType}catch(t){r.w.printStackTrace(t)}},I.prototype.setCellOption=function(t,e,i,o){var s=this.getColumnIndex(e),r=this.getExtraDataObj("cell",t,s);switch(i){case"viewType":r.key=o,this.rowIndex>=0&&this.drawCellData(t-this.rowIndex,t,s);break;default:var a=WebSquare.language.getMessage("Grid_warning4",this.id,i)||"["+this.id+"] "+i+"에 대한 변경은 처리할 수 없습니다.";$l(a)}},I.prototype.getCellOption=function(t,e,i){var o=this.getColumnIndex(e),s=this.getCellInfo(e);if("custom"!=s.options.inputType){var r=this.getExtraDataObj("cell",t,o);return null==r.key?s.options[i]:r.key}var a=s.cellManagerHashByRowIndex[t];if(a)return a.options[i]},I.prototype.getCustomCellOptions=function(t,e){try{var i=this.getCellInfo(e),o={};if("custom"==i.options.inputType){var s=this.getRealRowIndex(t),a=i.cellManagerHashByRowIndex[s];for(var n in a.initializeInfo)"id"!=n&&"displayRowIndex"!=n&&"realRowIndex"!=n&&(o[n]=a.initializeInfo[n])}return o}catch(t){r.w.printStackTrace(t)}},I.prototype.ungroupColumn=function(t){try{if(this.groupbyStatus.grouped){var e;"string"==typeof t?e=this.getColumnIndex(t):"number"==typeof t&&(e=t);for(var i=!0,o=this.groupbyStatus.sortIndexArr.length-1;o>=0;o--)if(this.groupbyStatus.sortIndexArr[o]==e){this.groupbyStatus.sortIndexArr.splice(o,1),this.groupbyStatus.sortOrderArr.splice(o,1),delete this.groupbyStatus.filter[this.getColumnID(e)],i=!1;break}if(i)return;if(this.groupbyFilterList&&this.groupbyFilterList.filterHistory.column.length>0)if(this.groupbyFilterList.filterHistory.column[0]===this.getColumnID(e))this.groupbyFilterList.filterHistory.column.shift(),this.groupbyFilterList.filterHistory.filteredRowIndexArr.shift();else{var s=this.groupbyFilterList.filterHistory.column.length,a=this.groupbyFilterList.filterHistory.filteredRowIndexArr[s-1].slice(0),n=0;for(o=0;o<s;o++)if(this.groupbyFilterList.filterHistory.column[o]===this.getColumnID(e)){this.groupbyFilterList.filterHistory.column.splice(o,1),this.groupbyFilterList.filterHistory.filteredRowIndexArr.splice(o,1),n=1;break}for(o=0;o<s-n;o++)this.groupbyFilterList.filterHistory.filteredRowIndexArr[o]=a}if(this.clearSearchData({clearValue:!0}),0==this.groupbyStatus.sortIndexArr.length)this.clearGroupby();else{var l=this.groupbyDisplayOptions
;l.filter=this.groupbyStatus.filter,l.sortIndex=this.groupbyStatus.sortIndexArr,l.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(l)}}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.changeGroupDepth=function(t,e){try{if(this.groupbyStatus.grouped){var i,o,s,a;"string"==typeof t?i=this.getColumnIndex(t):"number"==typeof t&&(i=t),"string"==typeof e?o=this.getColumnIndex(e):"number"==typeof e&&(o=e);for(var n=0;n<this.groupbyStatus.sortIndexArr.length;n++)this.groupbyStatus.sortIndexArr[n]==i&&(a=n),this.groupbyStatus.sortIndexArr[n]==o&&(s=n);if("number"!=typeof a||"number"!=typeof s||a==s)return;this.groupbyStatus.sortIndexArr.splice(a,1),this.groupbyStatus.sortIndexArr.splice(s,0,i);var l=this.groupbyStatus.sortOrderArr.splice(a,1);this.groupbyStatus.sortOrderArr.splice(s,0,l);var h=this.groupbyDisplayOptions;h.filter=this.groupbyStatus.filter,h.sortIndex=this.groupbyStatus.sortIndexArr,h.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(h)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.removeGroupbyFilterList=function(){try{this.groupbyFilterList&&this.groupbyFilterList.remove()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._getGroupbyDisplayRowIndex=function(t,e){try{return this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped?this.__getGroupbyDisplayRowIndex(t,e):t}catch(e){return r.w.printStackTrace(e,null,this),t}},I.prototype.__getGroupbyDisplayRowIndex=function(t,e){try{if(!this.groupbyStatus.grouped)return t;var i=this._dataList.getFilteredRowIndex(this.getRealRowIndex(t));return null==i&&!0!==e&&(i=t),i}catch(e){return r.w.printStackTrace(e,null,this),t}},I.prototype._getGroupbyGroupedRowIndex=function(t,e){try{return this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped?this.__getGroupbyGroupedRowIndex(t,e):t}catch(e){return r.w.printStackTrace(e,null,this),t}},I.prototype.__getGroupbyGroupedRowIndex=function(t,e){try{if(!this.groupbyStatus.grouped)return t;for(var i,o=this._dataList.getRealRowIndex(t),s=0;s<this.groupbyStatus.groupedRowIndexArr.length;s++)if(o===this.groupbyStatus.groupedRowIndexArr[s]){i=s;break}return null==i&&!0!==e&&(i=t),i}catch(e){return r.w.printStackTrace(e,null,this),t}},I.prototype.isEditing=function(){try{return!!this.editedCell}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.readExcelFile=function(t,e,i,o,s,r,a,n){this.readFile(t,e,i,o,s,"excel",null,r,a,n)},I.prototype.readFile=function(t,e,i,o,s,r,a,n,l,h){o=void 0===o||"string"!=typeof o?this.options.excelUploadPopupURL:this.getURL(o),void 0!==s&&"string"==typeof s||(s="top=280,height=80,left=160,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no"),o+=1==(t=parseInt(t,10))?"?header=true":"?header=false",o+=1==(e=parseInt(e,10))?"&append=true":"&append=false",o+=1==n?"&fillHidden=true":"&fillHidden=false",o+=1==(i=parseInt(i,10))?"&hidden=true":"&hidden=false",o+=1==(h=h||0)?"&type=true":"&type=false",a&&(o+="&"+a),o+="&action="+this.options.excelUploadURL,o+="&gridID="+this.id;for(var d=[],c=this.defaultColCnt;c<this.hiddenList.length;c++)1==this.hiddenList[c]&&d.push(c-this.defaultColCnt);o+="&columnNum="+this.getTotalCol(),o+="&expressionColumns="+this.getExpressionColumnArr().join(","),o+="&hiddenColumns="+d.join(","),o+="&headerRows="+this.getElementById(this.id+"_head_table").rows.length,o+=l?"&gridStartRow="+l:"&gridStartRow=1",WebSquare.domain&&(o+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain)),window.open(o,"fileupWindow",s)},I.prototype.getExpressionColumnArr=function(t){var e,i=[];e=t&&"1"==t.ignoreSpan?this.getColCnt():this.getTotalCol();for(var o=0;o<e;o++)"expression"==this.getCellInfo(o).options.inputType?i.push("true"):i.push("false");return i},I.prototype.saveExcelFile=function(t,e,i,o,s,r,a,n){var l={};l.fileName=t,l.hidden=e,l.checkButton=i,l.type=o,l.hiddenExpand=s,l.saveList=r,l.useEuroLocale=a,l.httpReadOnly=n,this.saveExcel(l)},I.prototype.saveExcel=function(t){var e=t.processMsg
;e&&e.length>0?WebSquare.layer.showProcessMessage(e,{scope:this.scope_id||""}):WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""});for(var i=t.fileName||"default",o=t.hidden||0,r=t.checkButton||0,a=t.type+""||"0",n=t.hiddenExpand||0,l=t.saveList||[],h=t.useEuroLocale||"false",d=t.password||"",c=new x.h.Hashtable,u=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],p=WebSquare.Elem.api.getElementsByTagName(u,"w2:column"),g=0;g<p.length;g++){var m=p[g],f=m.getAttribute("id");m.setAttribute("value",this.getHeaderValue(f))}if(c.put("style",WebSquare.xml.serialize(this.element._element)),"0"==a||""==a)c.put("data",this.getExcelAllXML()),c.put("footer_data",this.getExcelAllFooterXML());else if("2"==a){var b=this.getExcelAllXMLRaw();c.put("data",b),c.put("footer_data",this.getExcelAllFooterXMLRaw())}else{b=this.getExcelAllXMLDisplay(a);c.put("data",b),c.put("footer_data",this.getExcelAllFooterXMLDisplay())}var y=[];for(g=0;g<this.getTotalCol();g++){var v=this.getCellInfo(g).options.inputType;"checkbox"!=v&&"radio"!=v&&"button"!=v||y.push('"'+g+'"')}c.put("hiddenArr",this.getHiddenColumnArr()),c.put("fileName",i),c.put("hidden",o),c.put("checkButton",r),c.put("type",a),c.put("rowNumVisible",this.options.rowNumVisible+"");var w=this.options.rowNumHeaderValue||"";if(this.options.useLocale&&this.options.rowNumLocaleRef){var S=this.getLocaleValue(this.options.rowNumLocaleRef);S&&(w=S)}c.put("rowNumHeaderValue",w),c.put("hiddenExpand",n),c.put("checkButtonArr","<array><![CDATA[["+y.join(",")+"]]]></array>"),c.put("saveList",'<array><![CDATA[["'+l.join('","')+'"]]]></array>'),c.put("useEuroLocale",h),c.put("password",d),t.scopeId=this.scope_id||"",s.v.excelDownload(this.options.excelDownloadURL,c.toString(),"post",t)},I.prototype.saveExcelFile2=function(t,e,i,o,s,r){var a={};if(a.fileName=t,a.type=o,e+""=="0"){for(var n=[],l=this.defaultColCnt;l<this.hiddenList.length;l++)this.hiddenList[l]&&n.push(l-this.defaultColCnt);a.removeColumns=n.join(",")}var h=[];if(i+""=="0")for(l=0;l<this.getTotalCol();l++){var d=this.getCellInfo(l).options.inputType;"checkbox"!=d&&"radio"!=d&&"button"!=d||h.push(this.getCellInfo(l).options.colIndex-this.defaultColCnt)}for(l=this.defaultColCnt;l<this.hiddenList.length;l++)e+""=="1"&&s+""=="0"&&1==this.hiddenList[l]&&h.push(l-this.defaultColCnt);a.foldColumns=h.join(","),this.advancedExcelDownload(a)},I.prototype.getHiddenColumnArr=function(){for(var t=[],e=this.defaultColCnt;e<this.hiddenList.length;e++)t.push(this.hiddenList[e]);return'<array><![CDATA[["'+t.join('","')+'"]]]></array>'},I.prototype.fireFileReadEnd=function(t){var e=this;setTimeout((function(){d.B.fireEvent(e,"onfilereadend",t)}),10)},I.prototype.readCSV=function(t){var e={};t=t||{};e.wframe=t.wframe||!1;var i=t.type||"1",s=t.delim||",",r=t.escapeChar||"",n=t.header||"1",l=t.footer||"1",h=t.startRowIndex||"0",d=t.startColumnIndex||"0",c=t.append||"0",u=t.hidden||"0",p=t.advancedHidden||"0",g=t.fillHidden||"0",m=t.skipSpace||"0",f=t.removeColumns||"",b=t.optionParam||"",y=document.location.protocol+"//"+document.location.host+"/",v=t.popupUrl?y+t.popupUrl:o.x.baseURI+WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/csvfileUpload.js"),w=t.popupUrl||this.options.csvUploadPopupURL;w+="?";var S,C=t.processMsg||"",_="";if(e.name=t.name||"FILE UPLOAD",this.options.dataList){var x=this.modelControl.getDataComp(this.options.dataList);null!=x&&(_=x.id)}var I=t.status||"R",T=t.expression||"1",k=t.ignoreSpan||"0",D=t.maxFileSize||-1,L=t.csvUploadURL||"",W=1==this.options.postMsg?this.options.postMsg:t.postMsg||"false",A=t.columnOrder||"",M=t.useModalDisable||"false",E=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false",q=t.filePath||"";if(t.useDialog=t.useDialog+""!="false",e.className=t.className||"",e.resizable=0!=t.resizable||t.resizable,e.windowDragMove=t.windowDragMove||!1,
void 0===t.features||"string"!=typeof t.features)S="top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no";else if(1==t.wframe){for(var R=t.features.split(","),N={},F=0;F<R.length;F++)0!=R[F].toLowerCase().indexOf("top")?0!=R[F].toLowerCase().indexOf("left")?0!=R[F].toLowerCase().indexOf("height")?0!=R[F].toLowerCase().indexOf("width")||(N.width=parseInt(R[F].split("=")[1])):N.height=parseInt(R[F].split("=")[1]):N.left=parseInt(R[F].split("=")[1]):N.top=parseInt(R[F].split("=")[1]);S=N}else S=t.features;e.sFeatures=S,n=parseInt(n,10),c=parseInt(c,10),u=parseInt(u,10),i=i||0,e.type=1==i?"true":"false",e.uploadType=i,e.delim=s,e.escapeChar=r,e.header=1==n?"true":"false",e.footer=1==l?"true":"false",e.append=1==c?"true":"false",e.hidden=1==u?"true":"false",1==p?(w+="&advancedHidden=true",e.advancedHidden="true"):(w+="&advancedHidden=false",e.advancedHidden="false"),e.fillHidden=1==g?"true":"false",e.skipSpace=1==m?"true":"false",e.removeColumns=f,e.optionParam=b,w+="&gridID="+this.id,e.gridID=this.id;var O=[];for(F=this.defaultColCnt;F<this.hiddenList.length;F++)1==this.hiddenList[F]&&O.push(F-this.defaultColCnt);var B,V=this.getExpressionColumnArr(t);if(e.expressionColumns=V.join(","),e.columnNum=V.length,e.hiddenColumns=O.join(","),e.headerRows=this.getElementById(this.id+"_head_table").rows.length,e.gridStartRow=h||"1",e.gridStartCol=d||"1",WebSquare.domain?(w+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain),e.domain=WebSquare.text.URLEncoder(WebSquare.domain)):e.domain="",""==L&&(L=this.options.csvUploadURL),e.action=L,e.processMsg=WebSquare.text.BASE64URLEncoder(C),e.dataList=_,1==k){var P=[],H={},j=0;for(F=0;F<this.cellIdList.length;F++){for(var z=this.cellInfoHash[this.cellIdList[F]],G=parseInt(z.options.rowSpan)||1,U=parseInt(z.options.colSpan)||1,X=j,K=0;K<this.getRowCount()*this.getColCnt()&&P[X+K];K++)j++;for(var Y=0;Y<U;Y++){var $=j;P[$]=z.id,H[$]=!0;for(K=1;K<G;K++){var J=j+K*this.getColCnt();P[J]=z.id,H[J]=!0}j+=1}}B=P.join(",")}else B=this.cellIdList.join(",");e.columnIds=B,e.expression=1==T?"false":"true",e.status=I,e.maxFileSize=D,e.postMsg=W,e.columnOrder=A,e.useModalDisable=M,e.useXHR=E,e.filePath=q,e.useDialog=t.useDialog;var Z=a.D.getBoolean(e.wframe);if(this._csvUploadInfo=JSON.stringify(e),0==t.useDialog){var Q=new FormData;Q.append("type",e.type),Q.append("uploadType",e.uploadType),Q.append("delim",e.delim),Q.append("escapeChar",e.escapeChar),Q.append("header",e.header),Q.append("footer",e.footer),Q.append("append",e.append),Q.append("hidden",e.hidden),Q.append("fillHidden",e.fillHidden),Q.append("advancedHidden",e.advancedHidden),Q.append("skipSpace",e.skipSpace),Q.append("removeColumns",e.removeColumns),Q.append("action",e.action),Q.append("gridID",e.gridID),Q.append("columnNum",e.columnNum),Q.append("expressionColumns",e.expressionColumns),Q.append("hiddenColumns",e.hiddenColumns),Q.append("headerRows",e.headerRows);var tt=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:gBody"),et=WebSquare.Elem.api.getElementsByTagName(tt[0],"w2:row");Q.append("bodyRows",et.length),Q.append("headerRows",e.headerRows),Q.append("gridStartRow",e.gridStartRow);var it="";it="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),Q.append("gridStyle",it),Q.append("columnIds",e.columnIds),Q.append("dataList",e.dataList),Q.append("expression",e.expression),Q.append("status",e.status),Q.append("optionParam",e.optionParam),Q.append("columnOrder",e.columnOrder),Q.append("useXHR",e.useXHR),Q.append("filePath",e.filePath),Q.append("useDialog",e.useDialog),C&&C.length>0?WebSquare.layer.showProcessMessage(C,t):WebSquare.layer.showProcessMessage("upload...",t);var ot=this,st=new XMLHttpRequest;st.onreadystatechange=function(){if(4==st.readyState)if(200==st.status)try{
var i=st.responseText,o=WebSquare.xml.parse(i),s=o.getElementsByTagName("Exception");if(s.length>0){var r,n=o.getElementsByTagName("deniedCodeList")[0],l="";if("102"==(l=void 0===n||null==l||void 0===(l=n.firstChild)||null==l||""==l?"":l.nodeValue))h=Upload_msg2;else{var h=o.getElementsByTagName("message")[0].firstChild;h=WebSquare.language.getMessage("Upload_msg3")}(r=t.onFailureCallback||null)&&r(e.action,h)}else{var d=o.getElementsByTagName("array")[0].firstChild.nodeValue;"string"==typeof e.append&&(e.append=a.D.getBoolean(e.append));var c="",u={columnInfo:e.columnIds.split(","),data:d};if(""!=e.dataList){c=e.dataList;var p=a.D.getComponentById(c),g=p.getRowCount();if(1==e.uploadType||2==e.uploadType?p.setArrayFile(u,e.append,e.gridID,e.uploadType):p.setArray(u,e.append),"C"==e.status){var m=p.getRowCount();e.append?p.modifyRangeStatus(g,m,"C"):p.modifyRangeStatus(0,m,"C")}}else{c=e.gridID;g=this.getRowCount();if(1==e.uploadType||2==e.uploadType?this.setDataFile(d,e.append,u.columnInfo,e.gridID,e.uploadType):this.setData(d,e.append),"C"==e.status){m=this.getRowCount();e.append?this.modifyRangeStatus(g,m,"C"):this.modifyRangeStatus(0,m,"C")}}var f=t.onSuccessCallback||null;f&&f(e.action);var b=q.split("\\");ot.fireFileReadEnd(b[b.length-1])}}catch(t){s.printStackTrace(t)}finally{WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})}else(r=t.onFailureCallback||null)&&r(e.action),WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})},st.open("POST",e.action,!0),st.send(Q)}else if(!0===Z){e.sizeInfo={},e.osName="",e.sizeInfo.top=e.sFeatures.top?e.sFeatures.top:160,e.sizeInfo.left=e.sFeatures.left?e.sFeatures.left:280,-1!=navigator.userAgent.indexOf("Windows")?e.osName="window":-1!=navigator.userAgent.indexOf("Macintosh")&&(e.osName="mac"),a.D.isIE(6)?(e.sizeInfo.height=212,e.sizeInfo.width=456):a.D.isIE(7)||a.D.isIE(8)?(e.sizeInfo.height=218,e.sizeInfo.width=457):a.D.isIE(9)||a.D.isIE(10)?(e.sizeInfo.height=204,e.sizeInfo.width=446):a.D.isIEAllVersion(11)?(e.sizeInfo.height=197,e.sizeInfo.width=455):a.D.isSpartan()?(e.sizeInfo.height=178,e.sizeInfo.width=446):a.D.isChrome()?-1!=navigator.userAgent.indexOf("OPR")?"window"==e.osName?(e.sizeInfo.height=198,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=200,e.sizeInfo.width=454):"window"==e.osName?(e.sizeInfo.height=200,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=197,e.sizeInfo.width=454):a.D.isFF()?"window"==e.osName?(e.sizeInfo.height=163,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isSafari()?"window"==e.osName?(e.sizeInfo.height=160,e.sizeInfo.width=470):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isOpera()&&("window"==e.osName?(e.sizeInfo.height=189,e.sizeInfo.width=446):"mac"==e.osName&&(e.sizeInfo.height=233,e.sizeInfo.width=460)),"object"==typeof e.sFeatures&&(e.sizeInfo.height=e.sFeatures.height?e.sFeatures.height:e.sizeInfo.height,e.sizeInfo.width=e.sFeatures.width?e.sFeatures.width:e.sizeInfo.width);var rt={type:"json",name:"csvPopupParam",data:e},at={id:this.id+"_csvPop",type:"wframePopup",dataObject:rt,popupName:e.name,style:"",useIFrame:!1,className:e.className,modal:!0,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:v,left:e.sizeInfo.left,top:e.sizeInfo.top,width:e.sizeInfo.width,height:e.sizeInfo.height,resizable:e.resizable,status:!1,menubar:!1,scrollbars:!1,title:!0,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:e.windowDragMove,processMsgFrame:!0};this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&(at.scope_uuid=this.scope_obj.uuid),a.D.openPopup(at.popupUrl,at)}else w=WebSquare.BootLoader.getEngineUri(w),window.open(w,"csvupWindow",e.sFeatures)},I.prototype.saveCSV=function(t){var e=t.maxCellCount||-1;if(-1!=(e=parseInt(e,10))&&e<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()*this.getColCnt()){
var i=WebSquare.language.getMessage("Grid_warning8",e)||"Cell 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+e;return void alert(i)}var o=t.maxRowCount||-1;if(-1!=(o=parseInt(o,10))&&o<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()){i=WebSquare.language.getMessage("Grid_warning10",o)||"Row 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+o;return void alert(i)}WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""}),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.orgStatusArr=this.drilldown.statusArr,this.orgFilteredRowIndexArr=this._dataList.filteredRowIndexArr,this.orgShowDepth=this.showDepth,this.showDepth="9999",this.initDrilldown());var r=(t=t||{}).fileName||"csvfile.csv",n=t.type||"1",l=t.delim||";",h=t.displayDelim||"true",d=t.removeColumns||"",c=t.header||"1",u=t.hidden||"0",p=t.checkButton||"1",g=t.removeQuotation||"1",m=t.removeNewLine||"1",f=t.saveList||"",b=this.options.rowNumHeaderValue||"";this.options.useLocale&&this.options.rowNumLocaleRef&&((V=this.getLocaleValue(this.options.rowNumLocaleRef))&&(b=V));var y="";"1"!=t.rowNumVisible&&"true"!=t.rowNumVisible&&1!=t.rowNumVisible||(y=this.options.rowNumVisible||"false");var v=t.textTable||"false",w=t.textTableAlign||"right",S=t.useFooter||"false",C=t.columnMove+""=="true",_=t.columnOrder||"",I=t.optionParam||"",T=t.aposPrefixOnNum||"0",k=t.aposPrefixOnText||"0",D=t.ignoreSpan||"0",L=t.maxDataSize||-1;L=parseInt(L,10);var W=t.csvDownloadURL||"",A=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false";t.useXHR=A+""=="true";for(var M=t.openFile||"false",E=t.sameSite||"",q=t.useHeaderCheckBoxLabel+""=="true",R=t.opencsv+""=="true",N=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],F=WebSquare.Elem.api.getElementsByTagName(N,"w2:column"),O=0;O<F.length;O++){var B=F[O];if("checkbox"===B.getAttribute("inputType")&&!0===q){var V,P=B.getAttribute("checkboxLabel")||B.getAttribute("value"),H=B.getAttribute("localeRef");if(this.options.useLocale&&H)(V=this.getLocaleValue(H))&&(P=V);B.setAttribute("value",P+"")}else{var j=B.getAttribute("id");B.setAttribute("value",this.getHeaderValue(j)+"")}}var z=new x.h.Hashtable,G="",U=(G="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element)).indexOf("<w2:gridView");if(G.indexOf("xmlns:w2")<0&&U>=0){var X=" xmlns:w2='"+WebSquare.core._XML_NAMESPACE.W2+"' ";U+="<w2:gridView".length,G=G.slice(0,U)+X+G.slice(U)}z.put("style",G),"0"==n?(z.put("data",this.getExcelAllXML()),"true"==S?z.put("footer_data",this.getExcelAllFooterXML()):z.put("footer_data","<array><![CDATA[[]]]></array>")):(z.put("data",this.getExcelAllXMLDisplay(n)),"true"==S?z.put("footer_data",this.getExcelAllFooterXMLDisplay()):z.put("footer_data","<array><![CDATA[[]]]></array>"));var K,Y=[];for(O=0;O<this.getTotalCol();O++){var $=this.getCellInfo(O).options.inputType;"checkbox"!=$&&"radio"!=$&&"button"!=$||Y.push('"'+O+'"')}C&&(K=""==_?this.getColumnOrder()||"":_.split(","));var J=[];if(""!=d){var Z=(d+="").split(",");if(C)for(O=0;O<Z.length;O++)for(var Q=0;Q<K.length;Q++)Z[O]==K[Q]&&J.push(Q);else J=Z;J.sort((function(t,e){return 1*t-1*e})),d=J.join(",")}var tt=d;tt='"'+tt.wq_replaceAll(",",'","')+'"',z.put("hiddenArr",this.getHiddenColumnArr()),z.put("fileName",r),z.put("hidden",u),z.put("checkButton",p),z.put("type",n),z.put("rowNumVisible",y),z.put("rowNumHeaderValue",b),z.put("removeQuotation",g),z.put("delim",l),z.put("displayDelim",h),z.put("header",c),z.put("textTable",v),z.put("textTableAlign",w),z.put("useFooter",S),z.put("columnMove",C),z.put("columnOrder",K),z.put("optionParam",I),z.put("aposPrefixOnNum",T),z.put("aposPrefixOnText",k),z.put("ignoreSpan",D),z.put("removeNewLine",m),z.put("checkButtonArr","<array><![CDATA[["+Y.join(",")+"]]]></array>"),""!=f&&z.put("saveList",'<array><![CDATA[["'+f.join('","')+'"]]]></array>'),z.put("removeColumns","<array><![CDATA[["+tt+"]]]></array>"),z.put("openFile",M),
""!=E&&z.put("sameSite",E),z.put("opencsv",R),z.put("useXHR",A);var et=z.toString();if(-1!=L&&L<a.D.getByteLengthUtf8(et)){i=WebSquare.language.getMessage("Grid_warning9",L)||"전송 data가 제한 크기를 초과 하였습니다.\n 제한 크기 : "+e+" byte";return!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm?this.hideDownloadLayer():WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(i)}""==W&&(W=this.options.csvDownloadURL),t.scopeId=this.scope_id||"",s.v.excelDownload(W,et,"post",t),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.drilldown.statusArr=this.orgStatusArr,this._dataList.filteredRowIndexArr=this.orgFilteredRowIndexArr,this.showDepth=this.orgShowDepth,this.orgStatusArr=null,this.orgFilteredRowIndexArr=null,this.orgShowDepth=null,this.drawData(this.rowIndex,0))},I.prototype.saveCSVFile=function(t,e,i,o,r,a,n,l,h){WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""}),n+="";var d=new x.h.Hashtable,c="";c="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),d.put("style",c),"0"==n||""==n?(d.put("data",this.getExcelAllXML()),d.put("footer_data",this.getExcelAllFooterXML())):(d.put("data",this.getExcelAllXMLDisplay(n)),d.put("footer_data",this.getExcelAllFooterXMLDisplay()));for(var u=[],p=0;p<this.getTotalCol();p++){var g=this.getCellInfo(p).options.inputType;"checkbox"!=g&&"radio"!=g&&"button"!=g||u.push('"'+p+'"')}var m=h||"";m='"'+m.wq_replaceAll(",",'","')+'"',d.put("hiddenArr",this.getHiddenColumnArr()),d.put("fileName",t),d.put("hidden",o),d.put("checkButton","1"),d.put("type",n),d.put("rowNumVisible",this.options.rowNumVisible);var f=this.options.rowNumHeaderValue||"";if(this.options.useLocale&&this.options.rowNumLocaleRef){var b=this.getLocaleValue(this.options.rowNumLocaleRef);b&&(f=b)}d.put("rowNumHeaderValue",f),d.put("removeQuotation",a),d.put("delim",e),d.put("header",i),d.put("checkButtonArr","<array><![CDATA[["+u.join(",")+"]]]></array>"),void 0!==l&&l&&d.put("saveList",'<array><![CDATA[["'+l.join('","')+'"]]]></array>'),d.put("removeColumns","<array><![CDATA[["+m+"]]]></array>"),s.v.excelDownload(this.options.csvDownloadURL,d.toString(),"post",{scopeId:this.scope_id||""})},I.prototype.getExcelUploadInfo=function(t){var e={},i=(t=t||{}).type||"0",o=t.removeColumns||"",s=t.startRowIndex||"0",r=t.startColumnIndex||"0",a=t.endColumnIndex||"-1",n=t.ignoreStartRowIndexInSAX+""||"1",l=t.ignoreStartColumnIndexInSAX+""||"1",h=t.sheetNo||"0",d=t.sheetName||"",c=t.activeSheet||!1,u=t.headerExist||"0";0===t.footerExist&&(t.footerExist="0");var p=t.footerExist||"1",g=t.append||"0",m=t.hidden||"0",f=t.fillHidden||"0",b=t.optionParam||"",y=t.skipSpace||"0",v=t.insertColumns||[],w=t.processMsg||"",S="";if(this.options.dataList){var C=this.modelControl.getDataComp(this.options.dataList);null!=C&&(S=C.id)}var _=t.status||"R",x=t.delim||",",I="",T="",k="",D=t.pwd||"",L=t.loadingMode||"",W=t.maxFileSize||"-1",A=t.cellDataConvertor||"",M=t.decimal||"4",E=t.applyDecimal||"0",q=t.useModalDisable||"false",R=t.useMaxByteLength||"false",N=1==this.options.postMsg?this.options.postMsg:t.postMsg||"false",F=t.dateFormat||"yyyy-MM-dd",O=t.byteCheckEncoding||"EUC-KR",B=t.columnOrder||"",V=t.columnMove+""=="true",P=t.chunkNum||0,H=t.trim||0,j=t.useXHR+""=="true",z=t.filePath||"";t.useDialog=t.useDialog+""!="false";for(var G=0;G<v.length;G++){var U=v[G],X=U.columnIndex+""||"",K=U.columnValue+""||"";""!=X&&(I=I+T+X+","+K,T="|")}if(void 0===t.features||"string"!=typeof t.features)k="top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no";else{var Y=t.features.split(","),$={}
;for(G=0;G<Y.length;G++)0!=Y[G].toLowerCase().indexOf("top")?0!=Y[G].toLowerCase().indexOf("left")?0!=Y[G].toLowerCase().indexOf("height")?0!=Y[G].toLowerCase().indexOf("width")||($.width=parseInt(Y[G].split("=")[1])):$.height=parseInt(Y[G].split("=")[1]):$.left=parseInt(Y[G].split("=")[1]):$.top=parseInt(Y[G].split("=")[1]);1==t.wframe?k=$:(k=t.features,e.userFeatures=$)}e.sFeatures=k,u=parseInt(u,10),g=parseInt(g,10),m=parseInt(m,10),p=parseInt(p,10),e.header=1==u?"true":"false",e.footer=1==p?"true":"false",e.append=1==g?"true":"false",e.removeColumns=o,e.fillHidden=1==f?"true":"false",e.hidden=1==m?"true":"false",e.type=1==i?"true":"false",e.uploadType=i,e.skipSpace=1==y?"true":"false",e.insertColumns=I,e.optionParam=b,t.advancedExcelUploadURL?e.action=t.advancedExcelUploadURL:e.action=this.options.advancedExcelUploadURL,e.gridID=this.id;var J=[];for(G=this.defaultColCnt;G<this.hiddenList.length;G++)1==this.hiddenList[G]&&J.push(G-this.defaultColCnt);if(e.columnNum=this.getTotalCol(),e.expressionColumns=this.getExpressionColumnArr().join(","),e.hiddenColumns=J.join(","),e.headerRows=this.getElementById(this.id+"_head_table").rows.length,e.gridStartRow=s||"1",e.gridStartCol=r||"1",e.gridEndCol=a,e.ignoreStartRowIndexInSAX="0"==n?"true":"false",e.ignoreStartColumnIndexInSAX="0"==l?"true":"false",e.gridSheetNo=h||"0",e.gridSheetName=d,e.activeSheet=c,e.applyDecimal="0"==E?"false":"true",WebSquare.domain&&(e.domain=WebSquare.text.URLEncoder(WebSquare.domain)),e.processMsg=WebSquare.text.BASE64URLEncoder(w),e.delim=x,e.dataList=S,!0===V){var Z=this.htmlInfo.body.rowAttrArr.length,Q=this.getColumnOrder(),tt=Q.length,et=new Array(tt);for(G=0;G<Z;G++)for(var it=0;it<tt;it++)et[tt*G+it]=this.getColumnID(tt*G+Q[it]);e.columnIds=et.join(",")}else e.columnIds=this.cellIdList.join(",");return e.trim=1==H,e.status=_,e.pwd=D,e.loadingMode=L,e.maxFileSize=W,e.cellDataConvertor=A,e.decimal=M,e.useModalDisable=q+"",e.useMaxByteLength=R+"",e.postMsg=N+"",e.dateFormat=F,e.byteCheckEncoding=O,e.columnOrder=B,e.wframe=t.wframe||!1,e.name=t.name||"FILE UPLOAD",e.className=t.className||"",e.resizable=0!=t.resizable||t.resizable,e.windowDragMove=t.windowDragMove||!1,e.chunkNum=parseInt(P,10),e.useXHR=j,e.filePath=z,e.useDialog=t.useDialog,t.convertIndex&&(t.convertIndex=t.convertIndex.wq_replaceAll(" ",""),e.convertIndexArr=t.convertIndex.split(",")),"grid"==this.initializeType&&this.options.ref&&t.instanceBind&&(e.instanceBind=t.instanceBind),e},I.prototype.advancedExcelUpload=function(t){var e=this.getExcelUploadInfo(t),i=t.popupUrl||this.options.advancedExcelUploadPopupURL,s=document.location.protocol+"//"+document.location.host+"/",r=t.popupUrl?s+t.popupUrl:o.x.baseURI+WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedfileUpload.js"),n=t.advancedHidden||"0",l="";i+="?gridID="+e.gridID,WebSquare.domain&&(i+="&domain="+e.domain),i+=1==n?"&advancedHidden=true":"&advancedHidden=false",""!=e.pwd&&(l=WebSquare.text.BASE64Encoder(e.pwd)),e.pwd=l;var h=a.D.getBoolean(e.wframe);if(this._excelUploadInfo=JSON.stringify(e),0==t.useDialog){var d=new FormData;d.append("header",e.header),d.append("footer",e.footer),d.append("append",e.append),d.append("hidden",e.hidden),d.append("columnNum",e.columnNum),d.append("hiddenColumns",e.hiddenColumns),d.append("removeColumns",e.removeColumns),d.append("headerRows",e.headerRows);var c=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:gBody"),u=WebSquare.Elem.api.getElementsByTagName(c[0],"w2:row");d.append("bodyRows",u.length),d.append("delim",e.delim),d.append("fillHidden",e.fillHidden),d.append("gridStartRow",e.gridStartRow),d.append("gridStartCol",e.gridStartCol),d.append("gridEndCol",e.gridEndCol),d.append("gridEndCol",e.gridEndCol),d.append("gridSheetNo",e.gridSheetNo),d.append("gridSheetName",e.gridSheetName),d.append("activeSheet",e.activeSheet),d.append("expressionColumns",e.expressionColumns);var p="";p="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{
changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),d.append("gridStyle",p),d.append("type",e.type),d.append("uploadType",e.uploadType),d.append("skipSpace",e.skipSpace),d.append("insertColumns",e.insertColumns),d.append("dataList",e.dataList),d.append("instanceBind",e.instanceBind),d.append("columnIds",e.columnIds),d.append("status",e.status),d.append("pwd",e.pwd),d.append("loadingMode",e.loadingMode),d.append("optionParam",e.optionParam),d.append("cellDataConvertor",e.cellDataConvertor),d.append("decimal",e.decimal),d.append("applyDecimal",e.applyDecimal),d.append("useMaxByteLength",e.useMaxByteLength),d.append("dateFormat",e.dateFormat),d.append("byteCheckEncoding",e.byteCheckEncoding),d.append("columnOrder",e.columnOrder),d.append("chunkNum",e.chunkNum||0),d.append("trim",e.trim),d.append("useXHR",e.useXHR),d.append("filePath",e.filePath),d.append("useDialog",e.useDialog);var g=WebSquare.text.BASE64URLDecoder(e.processMsg);g&&g.length>0?WebSquare.layer.showProcessMessage(g,t):WebSquare.layer.showProcessMessage("upload...",t);var m=this,f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){var i=f.responseText;try{var o=WebSquare.xml.parse(i),s=o.getElementsByTagName("Exception");if(s.length>0){var r=o.getElementsByTagName("deniedCodeList")[0],n="";if(void 0===r?n="":void 0!==(n=WebSquare.xml.getTextNodeValue(r))&&null!=n&&""!=n||(n=""),"102"==n)l=WebSquare.language.getMessage("Upload_msg2");else if("101"==n)l=WebSquare.language.getMessage("Upload_msg9");else if("200"==n)l=WebSquare.language.getMessage("Upload_msg10");else if("201"==n)l=WebSquare.language.getMessage("Upload_msg11");else if("202"==n)l=WebSquare.language.getMessage("Upload_msg8");else if("203"==n)l=WebSquare.language.getMessage("Upload_msg12");else if("204"==n)l=WebSquare.language.getMessage("Upload_msg13");else if("205"==n)l=WebSquare.language.getMessage("Upload_msg14");else if("206"==n)l=WebSquare.language.getMessage("Upload_msg15");else if("207"==n)l=WebSquare.language.getMessage("Upload_msg16");else if("208"==n)l=WebSquare.language.getMessage("Upload_msg17");else{var l=WebSquare.xml.getTextNodeValue(o.getElementsByTagName("message")[0]);void 0!==l&&null!=l&&""!=l||(l=WebSquare.language.getMessage("Upload_msg3"))}(y=t.onFailureCallback||null)&&y(e.action,l)}else{var h=o.getElementsByTagName("array")[0].firstChild.nodeValue;"string"==typeof e.append&&(e.append=a.D.getBoolean(e.append));var d={columnInfo:e.columnIds.split(","),data:h};if(""!=e.dataList){var c=a.D.getComponentById(e.dataList);d.data=d.data.replaceAll("\\n","\n");var u=c.getRowCount();if(1==e.uploadType||2==e.uploadType?","!=e.delim?c.setArrayFile(d,e.append,e.gridID,e.uploadType,e.delim):c.setArrayFile(d,e.append,e.gridID,e.uploadType):0==e.uploadType&&(","!=e.delim?c.setArray(d,e.append,null,null,e.delim):c.setArray(d,e.append)),"C"==status){var p=c.getRowCount();e.append?c.modifyRangeStatus(u,p,"C"):c.modifyRangeStatus(0,p,"C")}}else{u=this.getRowCount();if(!this.options.ref||1!=e.instanceBind&&"true"!=e.instanceBind?1==e.uploadType||2==e.uploadType?this.setDataFile(h,e.append):0==uploadType&&this.setData(h,e.append):(this.options.instanceBindBySetData=!0,1==e.uploadType||2==e.uploadType?this.setDataFile(h,e.append):0==e.uploadType&&this.setData(h,e.append),this.options.instanceBindBySetData=!1),"C"==e.status){p=this.getRowCount();e.append?this.modifyRangeStatus(u,p,"C"):this.modifyRangeStatus(0,p,"C")}}var g=t.onSuccessCallback||null;g&&g(e.action);var b=t.filePath.split("\\");m.fireFileReadEnd(b[b.length-1])}}catch(t){s.printStackTrace(t)}finally{WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})}}else{var y;(y=t.onFailureCallback||null)&&y(e.action),WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})}},f.open("POST",e.action,!0),f.send(d)}else if(!0===h){e.sizeInfo={},e.osName="",e.sizeInfo.top=e.sFeatures.top?e.sFeatures.top:160,e.sizeInfo.left=e.sFeatures.left?e.sFeatures.left:280,
-1!=navigator.userAgent.indexOf("Windows")?e.osName="window":-1!=navigator.userAgent.indexOf("Macintosh")&&(e.osName="mac"),a.D.isIE(6)?(e.sizeInfo.height=212,e.sizeInfo.width=456):a.D.isIE(7)||a.D.isIE(8)?(e.sizeInfo.height=218,e.sizeInfo.width=457):a.D.isIE(9)?(e.sizeInfo.height=204,e.sizeInfo.width=446):a.D.isIE(10)?(e.sizeInfo.height=162,e.sizeInfo.width=455):a.D.isIEAllVersion(11)?(e.sizeInfo.height=198,e.sizeInfo.width=455):a.D.isSpartan()?(e.sizeInfo.height=178,e.sizeInfo.width=446):a.D.isChrome()?-1!=navigator.userAgent.indexOf("OPR")?"window"==e.osName?(e.sizeInfo.height=164,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):"window"==e.osName?(e.sizeInfo.height=200,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=197,e.sizeInfo.width=454):a.D.isFF()?"window"==e.osName?(e.sizeInfo.height=163,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isSafari()?"window"==e.osName?(e.sizeInfo.height=160,e.sizeInfo.width=470):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isOpera()&&("window"==e.osName?(e.sizeInfo.height=189,e.sizeInfo.width=446):"mac"==e.osName&&(e.sizeInfo.height=233,e.sizeInfo.width=460)),"object"==typeof e.sFeatures&&(e.sizeInfo.height=e.sFeatures.height?e.sFeatures.height:e.sizeInfo.height,e.sizeInfo.width=e.sFeatures.width?e.sFeatures.width:e.sizeInfo.width);var b={type:"json",name:"popupParam",data:e},y={id:this.id+"_excelPop",type:"wframePopup",dataObject:b,popupName:e.name,style:"",useIFrame:!1,className:e.className,modal:!0,useModalStack:!0,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:r,left:e.sizeInfo.left,top:e.sizeInfo.top,width:e.sizeInfo.width,height:e.sizeInfo.height,resizable:e.resizable,status:!1,menubar:!1,scrollbars:!1,title:!0,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:e.windowDragMove,processMsgFrame:!0};a.D.openPopup(y.popupUrl,y)}else i=WebSquare.BootLoader.getEngineUri(i),window.open(i,"fileupWindow",e.sFeatures)},I.prototype.advancedExcelDownload=function(t,e){try{var i=t.maxCellCount||-1;if(-1!=(i=parseInt(i,10)))if(i<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()*this.getColCnt()){var o=WebSquare.language.getMessage("Grid_warning8",i)||"Cell 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+i;return WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(o)}var s=t.maxRowCount||-1;if(-1!=(s=parseInt(s,10)))if(s<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()){o=WebSquare.language.getMessage("Grid_warning10",s)||"Row 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+s;return WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(o)}this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.orgStatusArr=this.drilldown.statusArr,this.orgFilteredRowIndexArr=this._dataList.filteredRowIndexArr,this.orgShowDepth=this.showDepth,this.showDepth="9999",this.initDrilldown());var a=parseInt(t.rowsByN);switch(t.rowsByN=a>100?a:100,t.dataLength=this.getDataLength(),t.multiexcel=!1,t.dataProvider=t.dataProvider||"",t.splitProvider=t.splitProvider||"",t.scope=this.scope_id||"",t.type+""){case"":case"0":t.type=0;break;case"2":t.type=2;break;default:t.type=1}if(!1===t.showProcess)WebSquare.getBody().showModal("w2modal_gridDownload");else if(!0===t.showConfirm)t.massStorage=!0,window.downloadGridId=this.id,WebSquare.getBody().showModal(),this.showSendExcelLayer();else{var n=t.processMsg;n&&n.length>0?WebSquare.layer.showProcessMessage(n,t):WebSquare.layer.showProcessMessage("download...",t)}if(0===t.type||1===t.type||2==t.type){t.cellInfo=[],t.isPlainDataCol=[],t.isSelectCol=[],t.isBasicCol=[],t.isExpCol=[],t.isCustomCol=[],t.isCustomModelCol=[],t.isCustomType=[],t.isEscapeFormatter=[];for(var l=this.oneRowDataLength,h=0;h<l;h++){var d=this.getCellInfo(h),c=d.options.inputType;t.cellInfo[h]=d,t.isCustomType[h]="custom"===c,
t.isPlainDataCol[h]="checkbox"===c||"image"===c||"radio"===c,t.isSelectCol[h]="select"===c||"checkcombobox"===c||"autoComplete"===c,t.isExpCol[h]="expression"===c,t.isCustomCol[h]=d.useCustomFormatter,t.isCustomModelCol[h]=d.useCustomModelFormatter,t.isBasicCol[h]=!(t.isPlainDataCol[h]||t.isSelectCol[h]||t.isExpCol[h]||t.isCustomCol[h]||t.isCustomModelCol[h]||t.isCustomType[h]),t.isEscapeFormatter[h]=d.useEscapeFormatter}}if(t.dataHandler=t.dataHandler||"",""!=t.dataHandler){this.sendExcelData(t,e,"")}else this.makeExcelData(0,[],t,e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.showSendExcelLayer=function(){if(void 0!==window.gridExceldownloadIframe){window.gridExceldownloadIframe.style.visibility="hidden",window.gridExceldownloadIframe.style.display="block";var t=document.documentElement.scrollTop+document.documentElement.clientHeight/2-parseInt(window.gridExceldownloadIframe.offsetHeight)/2,e=document.documentElement.scrollLeft+document.documentElement.clientWidth/2-parseInt(window.gridExceldownloadIframe.offsetWidth)/2;window.gridExceldownloadIframe.style.left=e+"px",window.gridExceldownloadIframe.style.top=t+"px",window.gridExceldownloadIframe.style.visibility="visible",window.gridExceldownloadIframe.contentWindow.initialize()}else{window.gridExceldownloadIframe=document.createElement("iframe"),window.gridExceldownloadIframe.style.visibility="hidden",window.gridExceldownloadIframe.setAttribute("id","gridDownLoadLayer"),window.gridExceldownloadIframe.setAttribute("src",this.options.advancedExcelDownloadPopupURL),window.gridExceldownloadIframe.setAttribute("frameBorder","0"),window.gridExceldownloadIframe.className="w2grid_downloadIframe",window.gridExceldownloadIframe.style.width="300px",window.gridExceldownloadIframe.style.overflow="hidden",document.body.appendChild(window.gridExceldownloadIframe);t=document.documentElement.scrollTop+document.documentElement.clientHeight/2-parseInt(window.gridExceldownloadIframe.offsetHeight)/2,e=document.documentElement.scrollLeft+document.documentElement.clientWidth/2-parseInt(window.gridExceldownloadIframe.offsetWidth)/2;window.gridExceldownloadIframe.style.left=e+"px",window.gridExceldownloadIframe.style.top=t+"px",window.gridExceldownloadIframe.style.position="absolute",window.gridExceldownloadIframe.style.visibility="visible"}},I.prototype.checkUpload=function(){var t=this;setTimeout((function(){1==t.downloadInit?window.gridExceldownloadIframe.contentWindow.checkUpload("end"):t.checkUpload()}),10)},I.prototype.sendExcelData=function(t,e,i){"boolean"==typeof t.useFooter&&(t.useFooter=t.useFooter+"");var o=WebSquare.xml.encode(t.fileName)||"excel",r=t.sheetName||"sheet",n=t.type||"0",l="false";if(1==t.multiexcel){var h=t.multipleSheet;void 0===t.multipleSheet&&(h=""),l=h+""=="true"||h+""==""?"true":"false"}else l="false";var d=t.removeColumns||"",c=t.removeHeaderRows||"",u=t.foldColumns||"",p=t.startRowIndex||"0",g=t.startColumnIndex||"0",m=t.headerColor||"",f=t.headerFontName||"",b=t.headerFontSize||"",y=t.headerFontColor||"",v=t.headerFontBold||"",w=t.bodyColor||"",S=t.bodyFontName||"",C=t.bodyFontSize||"",_=t.bodyFontColor||"",x=t.bodyFontBold||"",I=t.footerColor||"",T=t.footerFontName||"",k=t.footerFontSize||"",D=t.footerFontColor||"",L=t.footerFontBold||"",W=t.subTotalColor||"",A=t.subTotalFontName||"",M=t.subTotalFontSize||"",E=t.subTotalFontColor||"",q=t.subTotalFontBold||"",R=t.rowNumHeaderColor||"",N=t.rowNumHeaderFontName||"",F=t.rowNumHeaderFontSize||"",O=t.rowNumHeaderFontColor||"",B=t.rowNumBodyColor||"",V=t.rowNumBodyFontName||"",P=t.rowNumBodyFontSize||"",H=t.rowNumBodyFontColor||"",j=t.rowNumFooterColor||"",z=t.rowNumFooterFontName||"",G=t.rowNumFooterFontSize||"",U=t.rowNumFooterFontColor||"",X=t.rowNumSubTotalColor||"",K=t.rowNumSubTotalFontName||"",Y=t.rowNumSubTotalFontSize||"",$=t.rowNumSubTotalFontColor||"",J=t.groupbyColor||"";t.groupbyColor=J;var Z=t.groupbyFontName||"";t.groupbyFontName=Z;var Q=t.groupbyFontSize||"";t.groupbyFontSize=Q
;var tt=t.groupbyFontColor||"";t.groupbyFontColor=tt;var et=t.dataProvider||"",it=t.footerDataProvider||"",ot=t.splitProvider||"",st=t.providerRequestXml||"",rt=t.userDataXml||"",at=t.optionParam||"",nt=t.bodyWordwrap||"",lt=t.subtotalWordwrap||"",ht=t.footerWordwrap||"",dt=t.useEuroLocale||"false",ct=t.numberLocale||"",ut=t.useHeader||"true",pt=t.useSubTotal||"false",gt=t.useFooter||"true";t.printSet=t.printSet||{};var mt=t.printSet.fitToPage||"false",ft=t.printSet.landScape||"false",bt=t.printSet.fitWidth||"1",yt=t.printSet.fitHeight||"1",vt=t.printSet.scale||"100",wt=t.printSet.pageSize||"A4",St=t.separator||",",Ct=t.subTotalScale||-1,_t=t.subTotalRoundingMode||"",xt=t.footerScale||-1,It=t.footerRoundingMode||"",Tt=t.useStyle+""=="true",kt=t.useClass+""=="true";t.useClass=kt;var Dt=t.setFontSize+""=="true",Lt=t.freezePane||"",Wt=t.autoSizeColumn||"false",At=t.autoSizeAdjustWith||512,Mt=t.displayGridlines||"",Et=t.colMerge||"false",qt=t.colMergeValue||"false",Rt=t.colMergeTextAlign||"center",Nt=t.useDataFormat||"false",Ft=t.useHeaderDataFormat||"",Ot=t.applyDataFormat||"false",Bt=t.customToDataType||"false",Vt=t.useSubTotalData+""=="true",Pt=t.useFooterData+""=="true",Ht=t.calcFooter+""=="true",jt=t.columnMove+""=="true",zt=t.columnOrder||"";Ht&&(jt=!1);var Gt=t.columnMoveWithSubTotal||"",Ut=t.columnMoveWithFooter||"",Xt=t.oddRowBackgroundColor||"",Kt=t.evenRowBackgroundColor||"",Yt=t.indent||"0",$t=WebSquare.xml.encode(this.options.rowNumHeaderValue)||t.rowNumHeaderValue||"";this.options.useLocale&&this.options.rowNumLocaleRef&&((ci=this.getLocaleValue(this.options.rowNumLocaleRef))&&($t=ci));var Jt=t.rowNumVisible+""=="true",Zt=this.options.startRowNumber||"1",Qt=t.bodyNumberDefaultValue||"",te=t.numberToText||"false",ee=t.rowHeight||"-1",ie=t.headerRowHeight||"-1",oe=t.maxDataSize||-1;oe=parseInt(oe,10);var se=t.pwd||"",re=t.useImage||"false",ae=t.headerAutoFilter||"false",ne=t.filterRowIndex||"-1",le=t.mergeCell+""=="true",he=t.noMerge+""=="true";t.httpReadOnly=t.httpReadOnly+""=="true";var de=t.advancedExcelDownloadURL||"",ce=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false";t.useXHR=ce+""=="true";var ue,pe=t.openFile||"false",ge=t.macroFileName||"",me=t.useMacro||"false",fe=t.showDialog||"false",be=t.dialogFilter||"",ye=t.keepType||"false",ve=t.useHeaderCheckBoxLabel+""=="true",we=t.lazyInfoArr||"false",Se=t.decimal||"",Ce=t.sameSite||"",_e=t.customProvider||"",xe=t.customProviderIndex||"",Ie=t.rowAccessWindowSize||"",Te=t.trim||"",ke=t.desc||"",De=t.chart||{};if(De.chartName)var Le=De.chartName||"line",We=De.chartType||"",Ae=De.title||"",Me=De.xTitle||"",Ee=De.yTitle||"",qe=De.startRowIndex||0,Re=De.startColIndex||0,Ne=De.endRowIndex||0,Fe=De.endColIndex||0,Oe=De.serAxis||"true",Be=De.catAxis||"true",Ve=De.catAxisRange||{},Pe=Ve.startColIndex||0,He=Ve.startRowIndex||0,je=Ve.endColIndex||0,ze=Ve.endRowIndex||0,Ge=De.serAxisRange||{},Ue=Ge.startColIndex||0,Xe=Ge.startRowIndex||0,Ke=Ge.endColIndex||0,Ye=Ge.endRowIndex||0,$e=De.dataAxisRange||{},Je=$e.startColIndex||0,Ze=$e.startRowIndex||0,Qe=$e.endColIndex||0,ti=$e.endRowIndex||0,ei=De.catGridLines||"true",ii=De.serGridLines||"true",oi=De.legend||"true",si=De.legendPosition||"bottom";jt&&(ue=""==zt?this.getColumnOrder()||"":zt.split(","));var ri=[];if(""!=d){var ai=(d+="").split(",");if(jt)for(var ni=0;ni<ai.length;ni++)for(var li=0;li<ue.length;li++)ai[ni]==ue[li]&&ri.push(li);else ri=ai;ri.sort((function(t,e){return 1*t-1*e})),d=ri.join(",")}var hi=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],di=WebSquare.Elem.api.getElementsByTagName(hi,"w2:column");for(ni=0;ni<di.length;ni++){if("checkbox"===(ki=di[ni]).getAttribute("inputType")&&!0===ve){var ci,ui=ki.getAttribute("checkboxLabel")||ki.getAttribute("value"),pi=ki.getAttribute("localeRef");if(this.options.useLocale&&pi)(ci=this.getLocaleValue(pi))&&(ui=ci);ki.setAttribute("value",ui+"")}else{var gi=ki.getAttribute("id");ki.setAttribute("value",this.getHeaderValue(gi)+"")}}
var mi=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:gBody");if(mi.length>0){var fi=mi[0],bi=WebSquare.Elem.api.getElementsByTagName(fi,"w2:row");for(ni=0;ni<bi.length;ni++)for(di=WebSquare.Elem.api.getElementsByTagName(bi[ni],"w2:column"),li=0;li<di.length;li++){gi=(ki=di[li]).getAttribute("id");var yi=this.getCellInfo(gi);yi.options.displayFormat&&ki.setAttribute("displayFormat",yi.options.displayFormat);var vi=ki.getAttribute("excelCellType"),wi="";(wi=null==vi?this._dataList.getColumnOption(gi,"dataType"):vi)?ki.setAttribute("dataType",wi):ki.setAttribute("dataType","text");var Si=ki.getAttribute("excelFormatter");if(Di=a.D.getGlobalFunction(Si,this.scope_id)){var Ci=Di.call(this,gi);ki.setAttribute("excelFormat",Ci)}}}var _i=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:subTotal");for(ni=0;ni<_i.length;ni++){bi=WebSquare.Elem.api.getElementsByTagName(_i[ni],"w2:row");for(li=0;li<bi.length;li++){di=WebSquare.Elem.api.getElementsByTagName(bi[li],"w2:column");for(var xi=0;xi<di.length;xi++){gi=(ki=di[xi]).getAttribute("id"),Si=ki.getAttribute("excelFormatter");if(Di=a.D.getGlobalFunction(Si,this.scope_id)){Ci=Di.call(this,gi);ki.setAttribute("excelFormat",Ci)}}}}var Ii=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:footer");if(Ii.length>0){var Ti=Ii[0];bi=WebSquare.Elem.api.getElementsByTagName(Ti,"w2:row");for(ni=0;ni<bi.length;ni++)for(di=WebSquare.Elem.api.getElementsByTagName(bi[ni],"w2:column"),li=0;li<di.length;li++){var ki,Di;gi=(ki=di[li]).getAttribute("id"),Si=ki.getAttribute("excelFormatter");if(Di=a.D.getGlobalFunction(Si,this.scope_id)){Ci=Di.call(this,gi);ki.setAttribute("excelFormat",Ci)}}}var Li=[];Li.push("<vector result='1'>"),Li.push("<data vectorkey='0'><hashtable>");var Wi="";if(Wi="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),Li.push("<data hashkey='style'>"+Wi+"</data>"),t.dataHandler=t.dataHandler||"",""!=t.dataHandler){var Ai=WebSquare.util.getGlobalFunction(t.dataHandler,this.scope_id);if("function"==typeof Ai){var Mi=Ai.call(this,this.id);St=t.separator||",";i='<array><![CDATA[["'+Mi.join('"'+St+'"')+'"]]]></array>'}}Li.push("<data hashkey='data'>"+i+"</data>"),(this.startedDisplayNone||0==this.resizeObj.width||0==this.resizeObj.height)&&this.drawFooter(),Li.push("<data hashkey='groupby' value='"+this.groupbyStatus.grouped+"'/>"),t.groupby&&this.groupbyStatus.grouped?(Li.push("<data hashkey='groupbyStyle'>"+this.getExcelGroupbyStyle()+"</data>"),Li.push("<data hashkey='groupbyHeaderValue'>"+this.getExcelGroupbyHeaderValue(St)+"</data>"),Li.push("<data hashkey='groupbyFooterValue'>"+this.getExcelGroupbyFooterValue(St)+"</data>"),Li.push("<data hashkey='groupbyStatusValue'>"+this.getExcelGroupbyStatusValue(St)+"</data>"),Li.push("<data hashkey='groupbyStyleData'>"+this.getExcelGroupbyStyleData(t)+"</data>"),Li.push("<data hashkey='rowNumVisible' value='"+this.options.rowNumVisible+"'/>"),Li.push("<data hashkey='rowStatusVisible' value='"+this.options.rowStatusVisible+"'/>"),""!=J&&Li.push("<data hashkey='groupbyColor' value='"+J+"'/>"),""!=Z&&Li.push("<data hashkey='groupbyFontName' value='"+Z+"'/>"),""!=Q&&Li.push("<data hashkey='groupbyFontSize' value='"+Q+"'/>"),""!=tt&&Li.push("<data hashkey='groupbyFontColor' value='"+tt+"'/>"),a.D.isEmptyObject(this.groupbyDisplayOptions.rowNumHeader)&&a.D.isEmptyObject(this.groupbyDisplayOptions.rowStatusHeader)||Li.push("<data hashkey='rowNone' value='true'/>")):Li.push("<data hashkey='rowNumVisible' value='"+Jt+"'/>"),0==n?Li.push("<data hashkey='footer_data'>"+this.getExcelAllFooterXML(St)+"</data>"):1==n?Li.push("<data hashkey='footer_data'>"+this.getExcelAllFooterXMLDisplay(St)+"</data>"):Li.push("<data hashkey='footer_data'>"+this.getExcelAllFooterXMLRaw(St)+"</data>"),Li.push("<data hashkey='fileName' value='"+o+"'/>"),Li.push("<data hashkey='sheetName' value='"+r+"'/>"),
Li.push("<data hashkey='multipleSheet' value='"+l+"'/>"),Li.push("<data hashkey='stRowIndex' value='"+p+"'/>"),Li.push("<data hashkey='stColIndex' value='"+g+"'/>"),Li.push("<data hashkey='removeColumns' value='"+d+"'/>"),Li.push("<data hashkey='removeHeaderRows' value='"+c+"'/>"),Li.push("<data hashkey='foldColumns' value='"+u+"'/>"),Li.push("<data hashkey='headerColor' value='"+m+"'/>"),Li.push("<data hashkey='headerFontName' value='"+f+"'/>"),Li.push("<data hashkey='headerFontSize' value='"+b+"'/>"),Li.push("<data hashkey='headerFontColor' value='"+y+"'/>"),Li.push("<data hashkey='headerFontBold' value='"+v+"'/>"),Li.push("<data hashkey='bodyColor' value='"+w+"'/>"),Li.push("<data hashkey='bodyFontName' value='"+S+"'/>"),Li.push("<data hashkey='bodyFontSize' value='"+C+"'/>"),Li.push("<data hashkey='bodyFontColor' value='"+_+"'/>"),""!=x&&Li.push("<data hashkey='bodyFontBold' value='"+x+"'/>"),Li.push("<data hashkey='footerColor' value='"+I+"'/>"),Li.push("<data hashkey='footerFontName' value='"+T+"'/>"),Li.push("<data hashkey='footerFontSize' value='"+k+"'/>"),Li.push("<data hashkey='footerFontColor' value='"+D+"'/>"),""!=L&&Li.push("<data hashkey='footerFontBold' value='"+L+"'/>"),Li.push("<data hashkey='subTotalColor' value='"+W+"'/>"),Li.push("<data hashkey='subTotalFontName' value='"+A+"'/>"),Li.push("<data hashkey='subTotalFontSize' value='"+M+"'/>"),Li.push("<data hashkey='subTotalFontColor' value='"+E+"'/>"),""!=q&&Li.push("<data hashkey='subTotalFontBold' value='"+q+"'/>"),Jt&&(Li.push("<data hashkey='rowNumHeaderColor' value='"+R+"'/>"),Li.push("<data hashkey='rowNumHeaderFontName' value='"+N+"'/>"),Li.push("<data hashkey='rowNumHeaderFontSize' value='"+F+"'/>"),Li.push("<data hashkey='rowNumHeaderFontColor' value='"+O+"'/>"),Li.push("<data hashkey='rowNumBodyColor' value='"+B+"'/>"),Li.push("<data hashkey='rowNumBodyFontName' value='"+V+"'/>"),Li.push("<data hashkey='rowNumBodyFontSize' value='"+P+"'/>"),Li.push("<data hashkey='rowNumBodyFontColor' value='"+H+"'/>"),Li.push("<data hashkey='rowNumFooterColor' value='"+j+"'/>"),Li.push("<data hashkey='rowNumFooterFontName' value='"+z+"'/>"),Li.push("<data hashkey='rowNumFooterFontSize' value='"+G+"'/>"),Li.push("<data hashkey='rowNumFooterFontColor' value='"+U+"'/>"),Li.push("<data hashkey='rowNumSubTotalColor' value='"+X+"'/>"),Li.push("<data hashkey='rowNumSubTotalFontName' value='"+K+"'/>"),Li.push("<data hashkey='rowNumSubTotalFontSize' value='"+Y+"'/>"),Li.push("<data hashkey='rowNumSubTotalFontColor' value='"+$+"'/>")),Li.push("<data hashkey='footerDataProvider' value='"+it+"'/>"),Li.push("<data hashkey='dataProvider' value='"+et+"'/>"),Li.push("<data hashkey='splitProvider' value='"+ot+"'/>"),Li.push("<data hashkey='providerRequestXml' value=''>"+st+"</data>"),Li.push("<data hashkey='userDataXml' value=''>"+rt+"</data>"),Li.push("<data hashkey='optionParam' value='"+at+"'/>"),""!=nt&&Li.push("<data hashkey='bodyWordwrap' value='"+nt+"'/>"),""!=lt&&Li.push("<data hashkey='subtotalWordwrap' value='"+lt+"'/>"),""!=ht&&Li.push("<data hashkey='footerWordwrap' value='"+ht+"'/>"),Li.push("<data hashkey='useEuroLocale' value='"+dt+"'/>"),Li.push("<data hashkey='numberLocale' value='"+ct+"'/>"),Li.push("<data hashkey='useHeader' value='"+ut+"'/>"),Li.push("<data hashkey='useSubTotal' value='"+pt+"'/>"),Li.push("<data hashkey='useFooter' value='"+gt+"'/>"),Li.push("<data hashkey='fitToPage' value='"+mt+"'/>"),Li.push("<data hashkey='landScape' value='"+ft+"'/>"),Li.push("<data hashkey='fitWidth' value='"+bt+"'/>"),Li.push("<data hashkey='fitHeight' value='"+yt+"'/>"),Li.push("<data hashkey='scale' value='"+vt+"'/>"),Li.push("<data hashkey='pageSize' value='"+wt+"'/>"),Li.push("<data hashkey='separator' value='"+St+"'/>"),Li.push("<data hashkey='subTotalScale' value='"+Ct+"'/>"),Li.push("<data hashkey='subTotalRoundingMode' value='"+_t+"'/>"),Li.push("<data hashkey='footerScale' value='"+xt+"'/>"),Li.push("<data hashkey='footerRoundingMode' value='"+It+"'/>"),
Li.push("<data hashkey='useStyle' value='"+Tt+"'/>"),1==Dt&&Li.push("<data hashkey='setFontSize' value='"+Tt+"'/>"),Li.push("<data hashkey='freezePane' value='"+Lt+"'/>"),Li.push("<data hashkey='autoSizeColumn' value='"+Wt+"'/>"),Li.push("<data hashkey='autoSizeAdjustWith' value='"+At+"'/>"),Li.push("<data hashkey='displayGridlines' value='"+Mt+"'/>"),Li.push("<data hashkey='colMerge' value='"+Et+"'/>"),Li.push("<data hashkey='colMergeValue' value='"+qt+"'/>"),Li.push("<data hashkey='colMergeTextAlign' value='"+Rt+"'/>"),Li.push("<data hashkey='useDataFormat' value='"+Nt+"'/>"),""!=Ft&&Li.push("<data hashkey='useHeaderDataFormat' value='"+Ft+"'/>"),Li.push("<data hashkey='customToDataType' value='"+Bt+"'/>"),Li.push("<data hashkey='applyDataFormat' value='"+Ot+"'/>"),Li.push("<data hashkey='useSubTotalData' value='"+Vt+"'/>"),Li.push("<data hashkey='useFooterData' value='"+Pt+"'/>"),Li.push("<data hashkey='calcFooter' value='"+Ht+"'/>"),Li.push("<data hashkey='columnMove' value='"+jt+"'/>"),Li.push("<data hashkey='columnOrder' value='"+ue+"'/>"),""!=Gt&&Li.push("<data hashkey='columnMoveWithSubTotal' value='"+Gt+"'/>"),""!=Ut&&Li.push("<data hashkey='columnMoveWithFooter' value='"+Ut+"'/>"),Li.push("<data hashkey='oddRowBgColor' value='"+Xt+"'/>"),Li.push("<data hashkey='evenRowBgColor' value='"+Kt+"'/>"),Li.push("<data hashkey='indent' value='"+Yt+"'/>"),Li.push("<data hashkey='rowNumHeaderValue' value='"+$t+"'/>"),Li.push("<data hashkey='startRowNumber' value='"+Zt+"'/>"),Li.push("<data hashkey='bodyNumberDefaultValue' value='"+Qt+"'/>"),Li.push("<data hashkey='numberToText' value='"+te+"'/>"),Li.push("<data hashkey='rowHeight' value='"+ee+"'/>"),Li.push("<data hashkey='headerRowHeight' value='"+ie+"'/>"),Li.push("<data hashkey='pwd' value='"+se+"'/>"),Li.push("<data hashkey='useImage' value='"+re+"'/>"),Li.push("<data hashkey='headerAutoFilter' value='"+ae+"'/>"),Li.push("<data hashkey='filterRowIndex' value='"+ne+"'/>"),Li.push("<data hashkey='mergeCell' value='"+le+"'/>"),Li.push("<data hashkey='noMerge' value='"+he+"'/>"),Tt&&Li.push("<data hashkey='styleData'><array><![CDATA[["+this._getExcelStyle(t)+"]]]></array></data>"),Vt&&Li.push("<data hashkey='subtotalData'><array><![CDATA[["+this._getExcelSubtotalData(St)+"]]]></array></data>");var Ei="",qi=t.mergeCellHeaderInfo||"";le&&(pt=a.D.getBoolean(pt),Ei=this.getMergeAll(d,pt)),Li.push("<data hashkey='mergeCellInfo'><array><![CDATA[["+Ei+"]]]></array></data>"),Li.push("<data hashkey='mergeCellHeaderInfo'><array><![CDATA[["+qi+"]]]></array></data>"),Li.push("<data hashkey='openFile' value='"+pe+"'/>"),Li.push("<data hashkey='macroFileName' value='"+ge+"'/>"),Li.push("<data hashkey='useMacro' value='"+me+"'/>"),Li.push("<data hashkey='showDialog' value='"+fe+"'/>"),Li.push("<data hashkey='dialogFilter' value='"+be+"'/>"),Li.push("<data hashkey='keepType' value='"+ye+"'/>"),Li.push("<data hashkey='lazyInfoArr' value='"+we+"'/>"),Li.push("<data hashkey='decimal' value='"+Se+"'/>"),""!=Ce&&Li.push("<data hashkey='sameSite' value='"+Ce+"'/>"),Li.push("<data hashkey='customProvider' value='"+_e+"'/>"),Li.push("<data hashkey='customProviderIndex' value='"+xe+"'/>"),Li.push("<data hashkey='rowAccessWindowSize' value='"+Ie+"'/>"),Li.push("<data hashkey='trim' value='"+Te+"'/>"),Li.push("<data hashkey='useXHR' value='"+ce+"'/>"),Li.push("<data hashkey='desc' value='"+ke+"'/>"),De.chartName&&(Li.push("<data hashkey='c_chartName' value='"+Le+"'/>"),Li.push("<data hashkey='c_chartType' value='"+We+"'/>"),Li.push("<data hashkey='c_title' value='"+Ae+"'/>"),Li.push("<data hashkey='c_xTitle' value='"+Me+"'/>"),Li.push("<data hashkey='c_yTitle' value='"+Ee+"'/>"),Li.push("<data hashkey='c_startRowIndex' value='"+qe+"'/>"),Li.push("<data hashkey='c_startColIndex' value='"+Re+"'/>"),Li.push("<data hashkey='c_endRowIndex' value='"+Ne+"'/>"),Li.push("<data hashkey='c_endColIndex' value='"+Fe+"'/>"),Li.push("<data hashkey='c_serAxis' value='"+Oe+"'/>"),
Li.push("<data hashkey='c_catAxis' value='"+Be+"'/>"),Li.push("<data hashkey='c_catAxisStartX' value='"+Pe+"'/>"),Li.push("<data hashkey='c_catAxisStartY' value='"+He+"'/>"),Li.push("<data hashkey='c_catAxisEndX' value='"+je+"'/>"),Li.push("<data hashkey='c_catAxisEndY' value='"+ze+"'/>"),Li.push("<data hashkey='c_serAxisStartX' value='"+Ue+"'/>"),Li.push("<data hashkey='c_serAxisStartY' value='"+Xe+"'/>"),Li.push("<data hashkey='c_serAxisEndX' value='"+Ke+"'/>"),Li.push("<data hashkey='c_serAxisEndY' value='"+Ye+"'/>"),Li.push("<data hashkey='c_dataAxisStartX' value='"+Je+"'/>"),Li.push("<data hashkey='c_dataAxisStartY' value='"+Ze+"'/>"),Li.push("<data hashkey='c_dataAxisEndX' value='"+Qe+"'/>"),Li.push("<data hashkey='c_dataAxisEndY' value='"+ti+"'/>"),Li.push("<data hashkey='c_catGridLines' value='"+ei+"'/>"),Li.push("<data hashkey='c_serGridLines' value='"+ii+"'/>"),Li.push("<data hashkey='c_legend' value='"+oi+"'/>"),Li.push("<data hashkey='c_legendPosition' value='"+si+"'/>")),null!=e&&void 0!==e||(e=[]),Li.push("<data hashkey='information'><vector result='"+e.length+"'>");for(ni=0;ni<e.length;ni++){var Ri=e[ni];for(var Ni in Li.push("<data vectorkey='"+ni+"'><hashtable>"),Ri)"text"==Ni?Li.push("<data hashkey='"+Ni+"' value='"+WebSquare.xml.encode(Ri[Ni])+"'/>"):Li.push("<data hashkey='"+Ni+"' value='"+Ri[Ni]+"'/>");Li.push("</hashtable></data>")}if(Li.push("</vector></data>"),0!=t.multiexcel)return Li.push("</hashtable></data>"),Li.push("</vector>"),Li;Li.push("</hashtable></data>"),Li.push("</vector>");var Fi=Li.join("");if(-1!=oe&&oe<a.D.getByteLengthUtf8(Fi)){var Oi=WebSquare.language.getMessage("Grid_warning9",oe)||"전송 data가 제한 크기를 초과 하였습니다.\n 제한 크기 : "+oe+" byte";return!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm?this.hideDownloadLayer():WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(Oi)}""==de&&(de=this.options.advancedExcelDownloadURL),t.scopeId=this.scope_id||"",s.v.excelDownload(de,Fi,"post",t),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.drilldown.statusArr=this.orgStatusArr,this._dataList.filteredRowIndexArr=this.orgFilteredRowIndexArr,this.showDepth=this.orgShowDepth,this.orgStatusArr=null,this.orgFilteredRowIndexArr=null,this.orgShowDepth=null,this.drawData(this.rowIndex,0)),this.xmlData=null,!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm&&this.hideDownloadLayer()},I.prototype.saveFile=function(t){var e=t.type||"xml",i=t.fileName||"gridView",o=t.extension||"xml",r=t.sameSite||"",a=[];a.push("<vector result='1'>"),a.push("<data vectorkey='0'><hashtable>"),a.push("<data hashkey='type' value='"+e+"'/>"),a.push("<data hashkey='fileName' value='"+i+"'/>"),a.push("<data hashkey='extension' value='"+o+"'/>"),a.push("<data hashkey='sameSite' value='"+r+"'/>"),a.push("</hashtable></data>"),a.push("</vector>");var n=a.join("");n+="\x3c!----VALUESTR----!>",n+=WebSquare.xml.serialize(this.getAllXML());var l=t.action||WebSquare.baseServletURI+"gridToFile.wq";s.v.excelDownload(l,n,"post",t)},I.prototype.getExcelExpression=function(t){var e,i="";return void 0!==t.type&&void 0!==t.id&&void 0!==t.attr&&("header"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"header",s.v._XML_NAMESPACE.W2)[0]:"body"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",s.v._XML_NAMESPACE.W2)[0]:"footer"==t.type&&(e=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0]),void 0!==e&&(i=this._getAttribute(e,t))),i},I.prototype.setExcelExpression=function(t){var e;void 0!==t.type&&void 0!==t.id&&void 0!==t.excelExpression&&("header"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"header",s.v._XML_NAMESPACE.W2)[0]:"body"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",s.v._XML_NAMESPACE.W2)[0]:"footer"==t.type&&(e=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0]),void 0!==e&&this._setAttribute(e,t))},
I.prototype._getAttribute=function(t,e){for(var i="",o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];if(1==s.nodeType)for(var r=0;r<s.childNodes.length;r++){var a=s.childNodes[r];if(1==a.nodeType){if(("body"==e.type?a.getAttribute("col_id"):a.getAttribute("id"))==e.id){i=a.getAttribute(e.attr);break}}}}return i},I.prototype._setAttribute=function(t,e){for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(1==o.nodeType)for(var s=0;s<o.childNodes.length;s++){var r=o.childNodes[s];if(1==r.nodeType){if(("body"==e.type?r.getAttribute("col_id"):r.getAttribute("id"))==e.id){r.setAttribute("excelExpression",e.excelExpression);break}}}}},I.prototype.cancleDownload=function(){clearTimeout(this.excelTime),this.hideDownloadLayer()},I.prototype.hideDownloadLayer=function(){window.gridExceldownloadIframe.style.display="none",this.excelOptions=null,this.excelInfoArr=null,this.excelFinalStr=null,window.downloadGridId=null,WebSquare.getBody().hideModal(!0)},I.prototype.saveBigExcelFile=function(t,e,i){i&&(t.rowsByN=i),t.massStorage=!0,this.advancedExcelDownload(t,e)},I.prototype._getExcelStyle=function(t){for(var e={},i={},o={},s={},r={},n=this.getColumnCount(),l=0;l<n;l++){var h=(c=this.getCellInfo(l)).options.className;if(h){var d=document.querySelector("."+h);d&&(e[l]={"text-align":WebSquare.style.getComputedStyle(d,"text-align")})}}for(var l in this.columnStyleValueObj){var c,u={};for(var p in this.columnStyleValueObj[l])"style"!=p&&(u[p]=this.columnStyleValueObj[l][p]);if((c=this.getCellInfo(parseInt(l,10)))&&c.options.textAlign){var g="";""==(g=this.getColumnStyleValue(parseInt(l,10),"text-align"))&&""==(g=c.options.textAlign)&&(g="center"),u["text-align"]=g}e[l]=u}for(l=0;l<this.rowStyleArr.length;l++)if(this.rowStyleArr[l]){u={};for(var p in this.rowStyleValueObj[this.rowStyleArr[l]])"style"!=p&&(u[p]=this.rowStyleValueObj[this.rowStyleArr[l]][p]);var m=this.getDisplayRowIndex(l);isNaN(m)||(i[m]=u)}for(l=0;l<this.cellStyleArr.length;l++)if(this.cellStyleArr[l]){u={};var f=parseInt(l/this.oneRowDataLength,10),b=(m=this.getDisplayRowIndex(f),l%this.oneRowDataLength);for(var p in this.cellStyleValueObj[this.cellStyleArr[l]])"style"!=p&&this.cellStyleValueObj[this.cellStyleArr[l]][p]&&(u[p]=this.cellStyleValueObj[this.cellStyleArr[l]][p]);o[m+","+b]=u}if(1==t.useClass)for(l=0;l<this.cellClassArr.length;l++)if(this.cellClassArr[l]){u={},f=parseInt(l/this.oneRowDataLength,10),m=this.getDisplayRowIndex(f),b=l%this.oneRowDataLength;var y=a.D.getStyleFromCssStr(this.cellClassArr[l],["backgroundColor","color","textAlign","fontSize","fontWeight","fontFamily"]);o[m+","+b]&&(u=o[m+","+b]),y&&(y.backgroundColor&&(u["background-color"]=y.backgroundColor),y.color&&(u.color=y.color),y.textAlign&&(u["text-align"]=y.textAlign),y.fontSize&&(u["font-size"]=y.fontSize),y.fontWeight&&(u["font-weight"]=y.fontWeight),y.fontFamily&&(u["font-family"]=y.fontFamily)),0!==Object.keys(u).length&&(o[m+","+b]=u)}var v=a.D.getDataPrefix("header_id"),w="",S=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(l=this.defaultColCnt;l<S.length;l++){var C="",_=S[l].id.replace(this.id+"_",""),x=this.headerCellStyleValueObj[_];w=x&&x["background-color"]?x["background-color"]:t.headerColor?t.headerColor:WebSquare.style.getStyle(S[l],"background-color"),C+="color:"+WebSquare.style.getStyle(S[l],"color")+";",C+="background-color:"+w+";",C+="font-weight:"+WebSquare.style.getStyle(S[l],"font-weight")+";",C+="font-family:"+WebSquare.style.getStyle(S[l],"font-family")+";",C+="text-align:"+WebSquare.style.getStyle(S[l],"text-align")+";",s[S[l].getAttribute(v)]=C}if(this.hasFooter){var I=a.D.getDataPrefix("footer_id"),T=this.getDomList("foot_tds","th",this.getElementById(this.id+"_foot_table"));for(l=this.defaultColCnt;l<T.length;l++){C="";C+="color:"+WebSquare.style.getStyle(T[l],"color")+";",C+="background-color:"+WebSquare.style.getStyle(T[l],"background-color")+";",C+="font-weight:"+WebSquare.style.getStyle(T[l],"font-weight")+";",
C+="font-family:"+WebSquare.style.getStyle(T[l],"font-family")+";",C+="text-align:"+WebSquare.style.getStyle(T[l],"text-align")+";",r[T[l].getAttribute(I)]=C}}return JSON.stringify({row:i,col:e,cell:o,header:s,footer:r})},I.prototype._getExcelSubtotalData=function(t){t||(t=",");var e=[];e.push('"');for(var i=a.D.getDataPrefix("colMerge"),o=a.D.getDataPrefix("value"),s=this.getDataLength(),r=0;r<s;r++){var n=r;for(var l in this.subtotalTableList){var h=this.dataList._getCellData(n,l),d=h+"_12";if(n<s-1)d=this.dataList._getCellData(n+1,l);if(h!=d){var c=this.subtotalTableList[l],u=this.subtotalDataArr[l+"_"+h];null==u&&(u=this.getSubtotalData(c,l,h,n));for(var p="",g=c.getElementsByTagName("td"),m=0;m<g.length;m++){var f=g[m],b=f.getAttribute("id");if(!b.startsWith("_headerRowNumber")&&!b.startsWith("_headerRowStatus")){if(null!=u[b])p=u[b];else if("true"==f.getAttribute(i))p="";else{p=null!=(p=f.getAttribute(o))?p:""}e.push(p),e.push('"'+t+'"')}}}}}return e[e.length-1]='"',e.join("")},I.prototype.getExcelGroupbyStyle=function(){try{if(this.groupbyStatus.grouped){var t={rowNumHeader:{type:"H",index:2},rowNumFooter:{type:"F",index:2},rowStatusHeader:{type:"H",index:3},rowStatusFooter:{type:"F",index:3},groupbyHeader:{type:"H",index:-1},groupbyFooter:{type:"F",index:-1}},e=4,i=4,o=!1,s=!1,a=[],n=[],l=[],h={};a.push("<w2:groupby>"),n.push("<w2:groupbyHeader>"),l.push("<w2:groupbyFooter>"),n.push("<w2:row>"),l.push("<w2:row>");var d=this.defaultColCnt+this.getColCnt(),c=0,u=0;this.options.rowNumVisible&&(this.groupbyDisplayOptions.rowNumHeader&&(this.groupbyDisplayOptions.rowNumHeader.hidden||(u+=parseInt(this.groupbyDisplayOptions.rowNumHeader.colSpan,10)||1)<=d&&(h.rowNumHeader=this.groupbyDisplayOptions.rowNumHeader)),this.groupbyDisplayOptions.rowNumFooter&&(this.groupbyDisplayOptions.rowNumFooter.hidden||(c+=parseInt(this.groupbyDisplayOptions.rowNumFooter.colSpan,10)||1)<=d&&(h.rowNumFooter=this.groupbyDisplayOptions.rowNumFooter))),this.options.rowStatusVisible&&(this.groupbyDisplayOptions.rowStatusHeader&&(this.groupbyDisplayOptions.rowStatusHeader.hidden||(u+=parseInt(this.groupbyDisplayOptions.rowStatusHeader.colSpan,10)||1)<=d&&(h.rowStatusHeader=this.groupbyDisplayOptions.rowStatusHeader)),this.groupbyDisplayOptions.rowStatusFooter&&(this.groupbyDisplayOptions.rowStatusFooter.hidden||(c+=parseInt(this.groupbyDisplayOptions.rowStatusFooter.colSpan,10)||1)<=d&&(h.rowStatusFooter=this.groupbyDisplayOptions.rowStatusFooter))),h.groupbyHeader=[],h.groupbyFooter=[];for(var p=this.groupbyDisplayOptions.groupbyHeader,g=0;g<p.length;g++)p[g].hidden||(u+=parseInt(p[g].colSpan,10)||1,h.groupbyHeader[g]=p[g]);var m=this.groupbyDisplayOptions.groupbyFooter;for(g=0;g<m.length;g++)m[g].hidden||(c+=parseInt(m[g].colSpan,10)||1,h.groupbyFooter[g]=m[g]);if(e<d){var f=d-u;for(g=0;g<f;g++)h.groupbyHeader.push({temp:!0})}if(i<d)for(f=d-c,g=0;g<f;g++)h.groupbyFooter.push({temp:!0});for(var b in this.groupbyStatus.excelDisplayOptions=h,h){var y,v=[];switch(b){case"rowNumHeader":case"rowNumFooter":case"rowStatusHeader":case"rowStatusFooter":v.push("<w2:column");var w=h[b],S=!1;for(var C in w)if("align"==C||"hidden"==C||"colSpan"==C){if("hidden"==C){S=!0;break}v.push(" "+C+'="'+w[C]+'"'),"rowNumHeader"!=b&&"rowNumFooter"!=b||"colspan"==C.toLowerCase()&&w[C]>=this.defaultColCnt+this.getColCnt()&&("rowNumHeader"==b?o=!0:s=!0)}if(S)break;if("rowStatusHeader"==b&&o)break;if("rowStatusFooter"==b&&s)break;b.match("rowNum")?v.push(' type="rowNum"'):b.match("rowStatus")&&v.push(' type="rowStatus"'),v.push("/>"),y=t[b];break;case"groupbyHeader":case"groupbyFooter":S=!1;var _=h[b];if(_.length>0){var x,I=0,T=0,k=0,D=0,L=this.htmlInfo?this.htmlInfo.body.rowArr:this.struct.body.rowArr;for(g=0;g<L.length;g++){for(var W=L[g],A=0;A<W.length;A++){var M=W[A];I+=parseInt(M.colSpan,10)||1}T<I&&(T=I),I=0}x=new Array(T);for(g=0;g<_.length;g++){var E=[];for(var C in E.push("<w2:column"),_[g])if("align"==C||"hidden"==C||"colSpan"==C||"rowSpan"==C||"displayFormat"==C){
if("hidden"==C){E.pop();break}E.push(" "+C+'="'+_[g][C]+'"')}E.push("/>"),v.push(E.join(""));var q=parseInt(_[g].colSpan,10)||1,R=parseInt(_[g].rowSpan,10)||1;if(0===D){if(void 0===x[k])if(q>1)for(var N=0;N<q;N++)x[k+N]=R;else x[k]=R}else{x[k]>1?x[k]-=1:x[k]=R;for(var F=k+1;1!==x[F]&&F<T;)x[F]-=1,k+=1,F+=1}T<=(k+=q)&&g!=_.length-1&&(v.push("</w2:row><w2:row>"),k=0,D+=1)}}y=t[b]}y&&("H"==y.type?-1==y.index?(n[e]=v.join(""),e++):n[y.index]=v.join(""):"F"==y.type&&(-1==y.index?(l[i]=v.join(""),i++):l[y.index]=v.join(""))),y=null}return n.push("</w2:row>"),l.push("</w2:row>"),n.push("</w2:groupbyHeader>"),l.push("</w2:groupbyFooter>"),a.push(n.join("")),a.push(l.join("")),a.push("</w2:groupby>"),a.join("")}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getExcelGroupbyHeaderValue=function(t){this.groupbyStatus.headerValueObj={},this.getAllGroupbyHeaderValueObj();var e=[];e.push("<array><![CDATA["),e.push("[");for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++){var o=this.groupbyStatus.groupedRowIndexArr[i];if("header"==o.type){for(var s=this.groupbyStatus.headerValueObj[o.groupId],r=0;r<s.length;r++)null!=s[r]&&(e.push('"'+s[r]+'"'),r<s.length-1&&e.push(t));s.length>0&&e.push(t)}}return e.pop(),e.push("]"),e.push("]]></array>"),e.join("")},I.prototype.getExcelGroupbyFooterValue=function(t){this.groupbyStatus.footerValueObj={},this.getAllGroupbyFooterValueObj();var e=[];e.push("<array><![CDATA["),e.push("[");for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++){var o=this.groupbyStatus.groupedRowIndexArr[i];if("footer"==o.type){for(var s=this.groupbyStatus.footerValueObj[o.groupId],r=0;r<s.length;r++)null!=s[r]&&(e.push('"'+s[r]+'"'),r<s.length-1&&e.push(t));s.length>0&&e.push(t)}}return e.pop(),e.push("]"),e.push("]]></array>"),e.join("")},I.prototype.getExcelGroupbyStatusValue=function(t){var e=[];e.push("<array><![CDATA["),e.push("[");for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++){var o=this.groupbyStatus.groupedRowIndexArr[i];if("number"==typeof o)e.push('"0B"');else{switch(o.type){case"header":var s='"'+o.depth+'H"';break;case"footer":s='"'+o.depth+'F"'}e.push(s)}i<this.groupbyStatus.groupedRowIndexArr.length-1&&e.push(t)}return e.push("]"),e.push("]]></array>"),e.join("")},I.prototype.getExcelGroupbyStyleData=function(t){var e=this.getElementById(this.id+"_body_tbody").childNodes,i=[];i.push("<array><![CDATA["),i.push("[");for(var o=0;o<this.groupbyStatus.groupedRowIndexArr.length;o++){var s=this.groupbyStatus.groupedRowIndexArr[o];if("number"!=typeof s){var r=e[s.index];if(!i[s.depth+2]){var a,n='"';for(var l in 0!=o&&(n=',"'),this.groupbyStatus.excelDisplayOptions){var h=!1;switch(l){case"rowNumHeader":h=!0,a=0;break;case"rowStatusHeader":h=!0,a=this.defaultColCnt-1;break;case"groupbyHeader":h=!0,a=this.defaultColCnt}if(h)break}var d=r.getElementsByTagName("TD")[a];""==t.groupbyColor&&(n+="background-color:"+WebSquare.style.getStyle(d,"background-color")+";"),""==t.groupbyFontSize&&(n+="font-size:"+WebSquare.style.getStyle(d,"font-size")+";"),""==t.groupbyFontColor&&(n+="color:"+WebSquare.style.getStyle(d,"color")+";"),n+="font-weight:"+WebSquare.style.getStyle(d,"font-weight")+";",""==t.groupbyFontName&&(n+="font-family:"+WebSquare.style.getStyle(d,"font-family")+";"),n+='"',i[s.depth+2]=n}}}return i.push("]"),i.push("]]></array>"),i.join("")},I.prototype.getAllGroupbyHeaderValueObj=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++)if("number"!=typeof this.groupbyStatus.groupedRowIndexArr[t]){var e=this.groupbyStatus.groupedRowIndexArr[t],i=0;this.options.rowNumVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowNumHeader),i++),this.options.rowStatusVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowStatusHeader),i++);for(var o=0;o<this.groupbyStatus.excelDisplayOptions.groupbyHeader.length;o++)this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.groupbyHeader[o]),i++}},
I.prototype.getAllGroupbyFooterValueObj=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++)if("number"!=typeof this.groupbyStatus.groupedRowIndexArr[t]){var e=this.groupbyStatus.groupedRowIndexArr[t],i=0;this.options.rowNumVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowNumFooter),i++),this.options.rowStatusVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowStatusFooter),i++);for(var o=0;o<this.groupbyStatus.excelDisplayOptions.groupbyFooter.length;o++)this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.groupbyFooter[o]),i++}},I.prototype.getGroupbyData=function(t){try{if(this.options.groupbyZone)return!1===t?this.groupbyStatus.groupbyOptions:JSON.parse(this.groupbyStatus.groupbyOptions)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setGroupbyData=function(t,e,i){var o,s,r=(i=i||{}).value||"",a=i.inputType||"",n=i.depthVisible||!1,l=i.expression||"",h=i.hidden?"none":"",d=i.displayFormatType||"text",c=i.displayFormat||"",u=i.displayFormatter||null;if(a)switch((c||u)&&(o=new WebSquare.format.createFormatter(d,c,u,null,null,null,this.scope_id,this.id)),a){case"toggleButton":s="open"==t.status?"-":"+";break;case"expression":if(l){var p=this.groupbyInfo[t.groupId].header;p.colIndex=e;var g=0;if("open"==p.status){for(var m,f=p.index;f<this.groupbyStatus.groupedRowIndexArr.length;f++){if("footer"==(b=this.groupbyStatus.groupedRowIndexArr[f]).type&&b.depth==p.depth){m=b.index;break}}if(!m){for(f=p.index+1;f<this.groupbyStatus.groupedRowIndexArr.length;f++){var b;if("header"==(b=this.groupbyStatus.groupedRowIndexArr[f]).type&&b.depth==p.depth){m=b.index;break}}m||(m=this.groupbyStatus.groupedRowIndexArr.length-1)}g=this.groupExpression(this.groupbyStatus.groupedRowIndexArr,p.index,m,l,p)}else g=this.groupExpression(p.closedChildArr,0,p.closedChildArr.length-1,l,p);if(o&&(g=o.format(g)),"string"==typeof(s=g)&&(s.match("w2grid_minus")||s.match("w2grid_plus"))){var y=s.lastIndexOf("</span>");y>-1&&(y+=7,s=s.slice(y),"open"==t.status?s="-||"+s:"closed"==t.status&&(s="+||"+s))}}}if(n&&(s=t.groupId),r&&(o&&(r=o.format(r)),s=r),!s){s="";f=0;for(var v in i)f++;0==f&&(h="none")}"none"!=h&&("header"==t.type?(this.groupbyStatus.headerValueObj[t.groupId]||(this.groupbyStatus.headerValueObj[t.groupId]=[]),this.groupbyStatus.headerValueObj[t.groupId][e]=s):"footer"==t.type&&(this.groupbyStatus.footerValueObj[t.groupId]||(this.groupbyStatus.footerValueObj[t.groupId]=[]),this.groupbyStatus.footerValueObj[t.groupId][e]=s))},I.prototype.getTotalRow=function(){return this.dataList.getTotalRow()},I.prototype.getTotalCol=function(){return this.oneRowDataLength},I.prototype.editEndBeforeGetData=function(){this.editedCell&&this.rollbackCommitFlag&&1==this.options.rollbackCommit&&(1==this.options.moveKeyEditModeAll&&1==this.checkScrollEnd||(this.rollbackCommitFlag=!1,this.editedCell.handleEndEdit(),this.rollbackCommitFlag=!0))},I.prototype.getExtraDataObj=function(t,e,i){var o=this.extraData;return"grid"==t?o.grid:"row"==t?(o.row[e]||(o.row[e]={}),o.row[e]):"col"==t?(o.col[e]||(o.col[e]={}),o.col[e]):"cell"==t?(o.cell[e]||(o.cell[e]=[]),o.cell[e][i]||(o.cell[e][i]={}),o.cell[e][i]):null},I.prototype.finalize=function(){try{for(var t in null!=this.tempDiv&&null!=this.tempDiv.parentNode&&(this.tempDiv.innerHTML=""),null!=this.tempTr&&null!=this.tempTr.parentNode&&(this.tempTr.innerHTML=""),n.s.removeCheckResize(this.uuid),a.D.clearInterval(this.id+"_dragSelectAutoScroll"),s.v.clearTimer(this.id+"initializeEvent"),this.dom){var e=this.dom[t],i=null;null!=e&&(i=WebSquare.idCache[e.uuid]),i&&"function"==typeof i.remove&&i.remove(),delete this.dom[t]}for(var o in this._dataList&&this._dataList.childCompHash&&delete this._dataList.childCompHash[this.id],null!=this._manager&&this._manager.destroy(),null!=this.customFilter&&this.customFilter.remove(),this.cellInfoHash){var l=this.cellInfoHash[o];l&&l.comp&&"function"==typeof l.comp.remove&&l.comp.remove()}}catch(t){
r.w.printStackTrace(t,null,this)}},I.prototype.setFixedColumn=function(t){try{t=parseInt(t,10),t=isNaN(t)?0:t;var e=0;if(!(t<this.getColumnCount()))return;if(t>0){this.getFixedColumnLastIndex();for(var i=0;i<=t+this.defaultColCnt;i++)this.hiddenList[i]||(e+=this.colWidthList[i])}if(e>this.getElementById(this.id+"_dataLayer").offsetWidth)return;if(this.options.fixedColumn>0){var o=this.getColumnCount();for(i=0;i<this.lastIndex+1;i++){var s=this.data_td_list[i*o+this.options.fixedColumn];s&&this.removeClass(s,"w2grid_fixedColumn")}}this.options.fixedColumn=t,this.options.fixedColumnScrollReset&&this.setScrollLeft(0),this.arrangeOverflowXScroll()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setFixedRightColumn=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.fixedRightColumn>0)for(var e=this.getColumnCount(),i=this.getFixedRightColumnLastIndex(),o=0;o<this.lastIndex+1;o++){var s=this.data_td_list[o*e+(i-this.defaultColCnt)];s&&this.removeClass(s,"w2grid_fixedRightColumn")}this.options.fixedRightColumn=t,this.arrangeOverflowXScroll(),this._handleScrollX()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setFixedRow=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.fixedRow>0){var e=this.dataRowList[this.oneRowLength*(this.options.fixedRow-1)];e&&this.removeClass(e,"w2grid_fixedRow")}this.options.fixedRow=t,this.applyRowStyleOptions(t-1)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setLastFixedRow=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.lastFixedRow>0){var e=this.dataRowList[this.oneRowLength*(this.lastIndex-this.options.lastFixedRow)];e&&this.removeClass(e,"w2grid_lastFixedRow")}this.options.lastFixedRow=t,this.drawData(this.rowIndex,this.lastIndex-t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getOverflowX=function(){return this.options.overflowX},I.prototype.getOverflowY=function(){return this.options.overflowY},I.prototype.getColumnVisible=function(t){var e=t,i=(t=this.getColumnIndex(t),s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/getColumnVisible/@useRealColIndex"));if(a.D.getBoolean(i)){if("number"!=typeof e){for(var o=this.getCellInfo(e),r=this._getRealColIndex("body",e),n=r+this.defaultColCnt,l=!this.hiddenList[n],h=0;h<o.options.colSpan;h++)l=!this.hiddenList[n+h]||l;return 0===r||r?l:void c.k.printLog("[getColumnVisible] 존재하지 않는 body 컬럼입니다.")}t=e%this.columnOrder.length;for(var d=0;d<this.columnOrder.length;d++)if(this.columnOrder[d]==t){t=d;break}if(e>this.columnOrder.length||d===this.columnOrder.length)return void c.k.printLog("[getColumnVisible] 존재하지 않는 body 컬럼입니다.")}return!this.hiddenList[this.defaultColCnt+t]},I.prototype.getColumnWidth=function(t,e){var i=e?this.defaultColCnt:0;if(t=this.getColumnIndex(t)+i,this.colWidthList[t])return this.colWidthList[t]},I.prototype.setColumnWidth=function(t,e,i){if(this.render){if(0===this.render.offsetHeight&&0===this.render.offsetWidth){var o=!1;if("string"==typeof t&&(o=!0,t=this.getDisplayColumnIndex(t)),this.delayedDrawObj.newColumnOrder)for(var s=0;s<this.delayedDrawObj.newColumnOrder.length;s++)if(this.delayedDrawObj.newColumnOrder[s]==t){t=o?this.delayedDrawObj.newColumnOrder[s]:s;break}}else t=this.getDisplayColumnIndex(t);var r=this.colWidthList[t],a=!0===i?0:this.defaultColCnt;this.colWidthList[t]&&(this.options.autoFit&&!this.hiddenList[t+a]?(this.autoFitColWidthList=null,this._setAutoFit({exceptCol:a+t,exceptWidth:e})):this._setColumnWidth(a+t,e)),i&&(t-=this.defaultColCnt),d.B.fireEvent(this,"oncolumnwidthchange",{columnIndex:t,columnID:this.getColumnID(t),oldWidth:r,newWidth:e})}else c.k.printLog("[setColumnWidth] "+this.options.pluginName+" is not initialized yet")},I.prototype.isColumnResizable=function(t){try{if(t<this.defaultColCnt)return!0===this.options.rowNumStatusResize;if(void 0===t||""===t)return!1;if(isNaN(t)&&(t=this.getColumnIndex(t)+this.defaultColCnt),isNaN(t)||t>=this.getColumnCount()+this.defaultColCnt)return!0
;for(var e,i=this.htmlInfo.head.rowArr[0],o=!0,s=0;s<i.length;s++)if(i[s].colIndex==this.columnOrder[t]&&"string"==typeof i[s].fixColumnWidth&&"true"===i[s].fixColumnWidth.toLowerCase()){o=!1;break}if(!this.cellInfoHash||a.D.isEmptyObject(this.cellInfoHash))(e=this.cellInfoHash2[this.getColumnID(this.columnOrder[t-this.defaultColCnt])])&&!0===a.D.getBoolean(e.getAttribute("fixColumnWidth"))&&(o=!1);else(e=this.cellInfoHash[this.getColumnID(this.columnOrder[t-this.defaultColCnt])])&&e.options.fixColumnWidth&&(o=!1);return o}catch(t){return r.w.printStackTrace(t,null,this),!0}},I.prototype.setColumnDisableEdit=function(t,e){try{var i=this.getCellInfo(t);"autoComplete"==i.options.inputType&&i.setColumnDisableEdit(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnNodeSet=function(t,e,i,o){try{var s=this.getCellInfo(t);("select"==s.options.inputType||"autoComplete"==s.options.inputType||"checkcombobox"==s.options.inputType)&&s.setColumnNodeSet(e,i,o),s.hasRef&&(s.refHash=[]),s.itemsetObj&&s.mainGrid.refresh()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnGridItemset=function(t,e){try{var i=this.getCellInfo(t);("select"==i.options.inputType||"autoComplete"==i.options.inputType||"checkcombobox"==i.options.inputType)&&i.setColumnGridItemset(e),i.hasRef&&(i.refHash=[]),i.itemsetObj&&i.mainGrid.refresh()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnDisplayFormat=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormat=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnDisplayFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnIoFormat=function(t,e,i){try{"object"==typeof arguments[0]?this._setColumnIoFormat(arguments[0]):this._setColumnIoFormat({colIndex:t,ioFormat:e,dateMask:i})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._setColumnIoFormat=function(t){try{var e=t.colIndex,i=t.ioFormat,o=t.dateMask,s=t.useMonthYearFormat,a=t.calendarDisplayFormat,n=this.getCellInfo(e);if(!n||"date"!==n.options.dataType)return;var l=!1,h=n.options.ioFormat;if("string"==typeof i&&(l=i!==h,n.options.ioFormat=i),"string"==typeof o&&(n.options.displayFormat=o),"calendar"===n.options.inputType&&(n.options.useMonthYearFormat=s,"string"==typeof a&&(n.options.calendarDisplayFormat=a)),n.initFormatter(),!0===l){var d=this.getInput(n);if(d&&"function"==typeof d.setIoFormat){t={ioFormat:i,displayFormat:o,useMonthYearFormat:s,calendarDisplayFormat:a};d.setIoFormat(t)}if(n.options.useMonthYearFormat)this.drawColumnData(e);else for(var c=this.getRowCount(),u=WebSquare.format.createFormatter(n.options.dataType,i,"",h,null,null,this.scope_id,this.id),p=0;p<c;p++){var g=this.dataList._getCellData(p,n.colID),m=u.format(g);this.dataList.__setCellData(p,n.colID,m)}}else this.drawColumnData(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnChooseOption=function(t,e,i){try{var o=this.getCellInfo(t);"select"==o.options.inputType&&o.setColumnChooseOption(e,i)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnVisibleColumn=function(t,e,i){try{var o=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[o.options.inputType]&&(null==o[o.options.inputType]&&o._createComponent(0),o[o.options.inputType]&&"function"==typeof o[o.options.inputType].setVisibleColumn&&o[o.options.inputType].setVisibleColumn(e,i))}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnEnableColumn=function(t,e,i){try{var o=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[o.options.inputType]&&(null==o[o.options.inputType]&&o._createComponent(0),o[o.options.inputType]&&"function"==typeof o[o.options.inputType].setEnableColumn&&o[o.options.inputType].setEnableColumn(e,i))}catch(t){r.w.printStackTrace(t,null,this)}},
I.prototype.setDisplayMode=function(t,e){try{if("label"==e||"value"==e||"value delim label"==e||"label delim value"==e){var i=this.getCellInfo(t);if(!0==={select:!0,checkcombobox:!0,autoComplete:!0}[i.options.inputType]){var o=i.options.displayMode;i.options.displayMode=e,i._initDisplayMode(),o!=i.options.displayMode&&(i[i.options.inputType]&&i[i.options.inputType].setDisplayMode(e),i.resetMatchInfo=!0,this.drawColumnData(t))}}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setDelimiter=function(t,e){try{var i=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[i.options.inputType]&&i.options.delimiter!=e&&(i.options.delimiter=e||"\t","0"!=i.options.displayMode&&"3"!=i.options.displayMode&&(i[i.options.inputType]&&i[i.options.inputType].setDelimiter(e),i.resetMatchInfo=!0,this.drawColumnData(t)))}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.showChooseOption=function(t,e){try{var i=this.getCellInfo(t);"select"==i.options.inputType&&i.showChooseOption(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setRowNumColumnWidth=function(t){this.options.rowNumVisible&&!isNaN(Number(t))&&this._setColumnWidth(0,t)},I.prototype.setRowStatusColumnWidth=function(t){var e=0;this.options.rowNumVisible&&(e=1),this.options.rowStatusVisible&&(this.options.autoFit&&!this.hiddenList[e]?(this.autoFitColWidthList=null,this._setColumnWidth(e,t),this._setAutoFit()):this._setColumnWidth(e,t))},I.prototype.setGridHeight=function(t){try{parseInt(t)+""==t&&(t+="px"),this._setGridHeightBefore(),this.setStyle("height",t),this.handleScrollY({},{changedHeight:!0}),this.handleResize(),this._setGridHeightAfter()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._setGridHeightBefore=function(t){try{this._onSetHeight=!0,this.lastTopRowIndex=null,-1!==this.options.initFixedHeightByRowNum&&(this.options.initFixedHeightByRowNum=-1,this.options.visibleRowNum="")}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._setGridHeightAfter=function(t){try{this._onSetHeight=!1}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setGridWidth=function(t){parseInt(t)+""==t&&(t+="px"),this.setStyle("width",t),this.handlerResize_drawInitializer()},I.prototype.setGridSize=function(t,e){var i=parseInt(t),o=parseInt(e);i>=0&&o>=0?(this.setGridWidth(t),this.setGridHeight(e)):c.k.printLog("[Warning] Number of Entered in the width and height must be a valid integer greater than 0.["+this.id+"]")},I.prototype.setGridReadOnly=function(t){try{t=a.D.getBoolean(t),this.options.readOnly=t,this.notifyDataChanged()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getGridReadOnly=function(){try{return this.options.readOnly}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.initGrid=function(){try{this.loadCheck=[],this.initFlag=!0,this.skipScrollEndEvent=!0,this.skipScrollStartEvent=!0,this.removeAllFinish=!0,this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1;var t=this.hiddenRowObj.extraRow;this.hiddenRowObj={length:0,extraRow:t,row:{},init:!1},this.initHeightCompleted=!1,this.hasFooter&&this.initFooterDataObj(),this.initHeaderDataObj();var e=this.dataList.removeAll();return this.removeAllFinish=!1,this.dataList.clearFilter(),this.initColumns(),e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setInitValue=function(){try{this.initGrid()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setDisplayFormat=function(t,e){try{var i=this.getCellInfo(t);return i.element&&i.element.setAttribute("displayFormat",e),i.options.displayFormat=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setDisplayFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setFormat=function(t,e){try{var i=this.getCellInfo(t);if(e.ioFormat){var o=i.mainGridId+i.id,s=this.dom[o];s&&s.setFormat({ioFormat:e.ioFormat,displayFormat:e.ioFormat})
;for(var a=WebSquare.format.createFormatter("date",e.ioFormat,"",i.options.ioFormat,null,null,this.scope_id,this.id),n=0;n<this.getDataLength();n++){var l=this.getColumnID(t),h=this.dataList._getCellData(n,l),d=a.format(h);this.dataList.__setCellData(n,l,d)}}return i.options.ioFormat=e.ioFormat||i.options.ioFormat,i.options.displayFormat=e.displayFormat||i.options.displayFormat,i.options.displayFormatter=e.displayFormatter||i.options.displayFormatter,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCustomFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.customFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setAllowChar=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if("text"!=o&&"input"!=o&&"textImage"!=o&&"secret"!=o)return $l("cell의 inputType이 올바르지 않습니다."),!1;var s=this.getInput(i);return i.options.allowChar=e,void(s&&s.options&&("input"===s.options.pluginName||"textarea"===s.options.pluginName)&&s.setAllowChar(e))}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.changeCurrency=function(t,e,i,o,s,a,n){try{return 1===arguments.length&&"object"==typeof arguments[0]?this._changeCurrency(arguments[0]):this._changeCurrency({colID:t,type:e,format:i,delimiter:o,decimalDelimiter:s,customModelFormatter:a,customModelUnformatter:n})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._changeCurrency=function(t){try{var e=t.colID||"",i=t.type||"",o=t.format,a=t.delimiter||"",n=t.decimalDelimiter||"",l=t.customModelFormatter,h=t.customModelUnformatter,d=this.getColumnIndex(e),c=this.getCellInfo(d);if(!i||"float"!==i&&"number"!==i&&"euro"!==i&&"rupee"!==i&&"tenge"!==i)return;"number"===i&&"true"===this.options.floatNumber&&(i="float");var u=i;switch(i){case"number":case"float":case"bigDecimal":u="number",o||(this.options.numberMask||(this.options.numberMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+u+'"]/numberMask/@value')||""),o=this.options.numberMask),c.options.delimiter=a||",",c.options.decimalDelimiter=n||".";break;case"euro":o||(this.options.euroMask||(this.options.euroMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+u+'"]/euroMask/@value')||""),o=this.options.euroMask),c.options.delimiter=a||".",c.options.decimalDelimiter=n||",";break;case"rupee":o||(this.options.rupeeMask||(this.options.rupeeMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+u+'"]/rupeeMask/@value')||""),o=this.options.rupeeMask),c.options.delimiter=a||",",c.options.decimalDelimiter=n||".";break;case"tenge":o||(this.options.tengeMask||(this.options.tengeMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+u+'"]/tengeMask/@value')||""),o=this.options.tengeMask),c.options.delimiter=a||" ",c.options.decimalDelimiter=n||","}if(!o)return;c.options.dataType=i,c.options.displayFormat=o,void 0!==l?c.options.customModelFormatter=l:c.options.customModelFormatter||(c.options.customModelFormatter=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+u+'"]/customModelFormatter/@value')||""),void 0!==h?c.options.customModelUnformatter=h:c.options.customModelUnformatter||(c.options.customModelUnformatter=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+u+'"]/customModelUnformatter/@value')||""),c.initFormatter(),this.drawColumnData(d),this.subtotalObj={},this.refreshSubtotalRow(0,{changeCurrency:!0}),this.hasFooter&&(this.initFooterDataObj(!0),this.drawFooter(d));var p=c.mainGridId+c.id;delete this.dom[p]}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setDataType=function(t,e){try{if(!e||"number"!=e&&"text"!=e&&"float"!=e)return
;var i=this.getCellInfo(t);if(i.options.dataType==e)return;i.options.dataType;i.options.dataType=e;var o=this.getColumnID(t);this.setColumnOption(o,"dataType",e);var s=i.mainGrid.getElementById(i.mainGridId+o);if(i.options.displayFormat="",s){switch(s.validator.clearCommand(),e){case"number":s.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9"));break;case"float":s.validator.addCommand(new WebSquare.validator.floatCommand(s.options.delimiter,s.options.decimalDelimiter,s.options.applyFormat))}var a=s.options.maxlength&&parseInt(s.options.maxlength)>-1?s.options.maxlength:null;a||(a=s.options.maxLength&&parseInt(s.options.maxLength)>-1?s.options.maxLength:null),a&&("float"==e?(i.setFloatMaxLength(a),s.render&&"input"==s.render.tagName.toLowerCase()&&s.render.removeAttribute("maxLength")):i.setMaxLength(a))}i.initFormatter()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setDefaultDate=function(t,e){try{var i=this.getCellInfo(t);if("calendar"!=i.options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;var o=this.getInput(i);i.options.defaultDate=e,o&&o.setDefaultDate(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.disableBeforeDate=function(t,e){try{var i=this.getCellInfo(t);if("calendar"!=i.options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;var o=this.getInput(i);i.options.disableBeforeDate=e,o&&o.disableBeforeDate(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.disableAfterDate=function(t,e){try{var i=this.getCellInfo(t);if("calendar"!=i.options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;var o=this.getInput(i);i.options.disableAfterDate=e,o&&o.disableAfterDate(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setMaxLength=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if("text"!=o&&"textarea"!=o&&"input"!=o&&"textImage"!=o&&"secret"!=o&&"autoComplete"!=o)return;"text"==o&&"float"==i.options.dataType?i.setFloatMaxLength(e):i.setMaxLength(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getMaxLength=function(t){try{var e=this.getCellInfo(t),i=e.options.inputType;if("text"!=i&&"textarea"!=i&&"input"!=i&&"textImage"!=i&&"secret"!=i)return;return e.options.maxLength}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.spanAll=function(t){try{"number"==typeof t?this.showDepth=t+"":(t=a.D.getBoolean(t),this.showDepth=1==t?"9999":"1"),this.initDrilldown(),this.rowIndex=-1,this.lastIndex=-1,this.lastTopRowIndex=null,this.drawData(0,0),this.setScrollYHeight({noDraw:!0}),this.drawFooter(),this.displayNoResultMessage()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getCellDisplayData=function(t,e){try{var i=(this._linkedDataList||this._dataList).getRealRowIndex(t);return this._getDisplayData(i,e)}catch(t){r.w.printStackTrace(t)}},I.prototype._getCellDisplayData=function(t,e,i){try{i=i||{},"string"==typeof e&&(e=e.trim());var o=this.getRealRowIndex(t);return this._getDisplayData(o,e,i)}catch(t){r.w.printStackTrace(t)}},I.prototype._getDisplayData=function(t,e,i){try{i=i||{},this.editEndBeforeGetData();e=this.getColumnID(e);var o=this.getColumnIndex(e),s=this.cellInfoHash[e];0==s.internal&&"custom"==s.options.inputType&&s.cellManagerHashByRowIndex[t]&&(s=s.cellManagerHashByRowIndex[t]);var n=this.dataList._getData(t,e),l=this.getDisplayRowIndex(t),h=this._getGroupbyDisplayRowIndex(l);if(s.options.customModelUnformatter){var d=a.D.getGlobalFunction(s.options.customModelUnformatter,this.scope_id);"function"==typeof d&&(n=d.call(this,n,h,o))}if(s.options.maskFormat&&(n=this.getInput(s[o]).maskFormatModelUnFormat(n)),s.useEscapeFormatter){var c=a.D.getGlobalFunction(s.options.escapeFormatter,this.scope_id);"function"==typeof c&&(n=c.call(this,n,h,o))}if(s.useCustomFormatter&&1!=this.options.keepBeforeDisplayData){var u="true"===s.getEscape()?s.getDisplayData(WebSquare.xml._encode(n+""),t):s.getDisplayData(n,t),p=a.D.getGlobalFunction(s.options.customFormatter,this.scope_id)
;"function"==typeof p&&(n=this.options.customFormatterRealRowIndex?p.call(this,n,u,t,o):p.call(this,n,u,h,o))}else 0==s.internal&&"custom"==s.options.inputType&&(s=s.cellManagerHashByRowIndex[t]?s.cellManagerHashByRowIndex[t]:s),n=s.getDisplayData(n,t,i);if(!0===i.removeTag){var g=document.createElement("div");g.innerHTML=n,n=g.innerText}return null==n&&(n=""),n}catch(t){r.w.printStackTrace(t)}},I.prototype.initPasteDrilldown=function(){try{var t={showDepth:this.showDepth,depthColumn:this.depthColumn,dataColumn:""};"string"==typeof t.depthColumn&&(null==this.bodyIdColIndexMap[t.depthColumn]?(t.dataColumn="dataList",t.depthColumn=this._dataList.bodyIdColIndexMap[t.depthColumn]):(t.dataColumn="gridview",t.depthColumn=this.bodyIdColIndexMap[t.depthColumn])),this.drilldown.pasteDrilldownInitialize(this,t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.initDrilldown=function(t){try{"string"==typeof(t={showDepth:this.showDepth,depthColumn:this.depthColumn,dataColumn:""}).depthColumn&&(null==this.bodyIdColIndexMap[t.depthColumn]?(t.dataColumn="dataList",t.depthColumn=this._dataList.bodyIdColIndexMap[t.depthColumn]):(t.dataColumn="gridview",t.depthColumn=this.bodyIdColIndexMap[t.depthColumn])),this.drilldown.initialize(this,t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getRealRowIndex=function(t){return this.dataList.getRealRowIndex(t)},I.prototype.toggle=function(t){if("number"!=typeof t)return!1;var e=t;if(this.options.drilldownRealRowIndexAll&&"number"!=typeof(e=this.getDisplayRowIndex(t)))return!1;this._toggle(e)},I.prototype._toggle=function(t){t=parseInt(t),this.drilldown.toggle(t);var e=this.options.drilldownToggleScrollFix?{keepScrollTop:!0}:null;this.lastTopRowIndex=null,this.setScrollYHeight(e),this.notifyRowChanged(t,e),this.options.autoFit&&this.autoFitFunc()},I.prototype.drillTo=function(t){try{var e=this.drilldown.drillTo(t),i=this.options.drilldownToggleScrollFix?{keepScrollTop:!0}:null;this.setScrollYHeight(i),this.notifyRowChanged(e,i),this.options.autoFit&&this.autoFitFunc()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getParentRowIndex=function(t){return t=parseInt(t),this.drilldown.getParentRowIndex(t)},I.prototype.getChildrenRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getChildrenRowArr(t)},I.prototype.getAncestorRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getAncestorRowArr(t)},I.prototype.getDescendantRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getChildRowArr(t,!0)},I.prototype.getOpenStatus=function(t){var e=t=parseInt(t);return(!this.options.drilldownRealRowIndexAll||"number"==typeof(e=this.getDisplayRowIndex(t)))&&this.drilldown.isOpen(e)},I.prototype.getDataLength=function(){var t;if(this.successBinding)if(this.groupbyStatus.grouped){for(var e in this.customFilterStatusObj)if(this.customFilterStatusObj[e])return this._dataList.getDataLength();t=this.groupbyStatus.groupedRowIndexArr.length}else t=this._dataList.getDataLength();else t=0;return t},I.prototype.focusedRowMoveUp=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveUp(t)},I.prototype.focusedRowMoveDown=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveDown(t)},I.prototype.focusedRowMoveUpFiltered=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveUpFiltered(t)},I.prototype.focusedRowMoveDownFiltered=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveDownFiltered(t)},I.prototype.initStyleArr=function(t){t<=0&&(this.rowStyleArr=[],this.rowReadOnlyArr=[],this.rowDisabledArr=[]);var e=this.getTotalRow(),i=e*this.oneRowDataLength;t<=0?(this.rowStyleArr=new Array(e),this.rowReadOnlyArr=new Array(e),this.rowDisabledArr=new Array(e),this.rowStyleFixedArr=new Array(e),this.rowStyleDataArr=new Array(e),this.cellStyleArr=new Array(i),this.cellClassArr=new Array(i),this.cellReadOnlyArr=new Array(i),this.cellDisabledArr=new Array(i)):(this.rowStyleArr[e-1]=void 0,this.rowStyleFixedArr[e-1]=void 0,
this.rowStyleDataArr[e-1]=void 0,this.rowReadOnlyArr[e-1]=void 0,this.rowDisabledArr[e-1]=void 0,this.cellStyleArr[i-1]=void 0,this.cellClassArr[i-1]=void 0,this.cellReadOnlyArr[i-1]=void 0,this.cellDisabledArr[i-1]=void 0)},I.prototype.modifyCheckedStatus=function(t,e){try{var i=this.getCheckedIndex(t);if("R"==(e=e.toUpperCase())||"U"==e||"V"==e||"D"==e||"C"==e){for(var o=0;o<i.length;o++)this.dataList.modifyRowStatus(i[o],e),this._drawRowStatus(o-this.rowIndex,o),this.displayNoResultMessage();this.notifyStatusChanged({rowIndex:i})}else c.k.printLog("[Warning] Is not exist status Value!["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.modifyUncheckStatus=function(t,e){try{if("R"==(e=e.toUpperCase())||"U"==e||"V"==e||"D"==e||"C"==e){for(var i=this.getUnCheckedIndex(t),o=0;o<i.length;o++)this.dataList.modifyRowStatus(i[o],e),this._drawRowStatus(o-this.rowIndex,o),this.displayNoResultMessage();this.notifyStatusChanged({rowIndex:i})}else c.k.printLog("[Warning] Is not exist status Value!["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getVisibleColData=function(t){var e=[];t=this.getColumnIndex(t);for(var i=this.getColumnID(t),o=this.getDataLength(),s=0;s<o;s++)e.push(this.dataList._getCellData(s,i));return e},I.prototype.getCheckedIndex=function(t,e){try{var i,o=[],s=[],a=0,n=this.cellInfoHash[this.getColumnID(t)];if("checkbox"==n.options.inputType||"radio"==n.options.inputType||"custom"==n.options.inputType){i=this.isDrillDown&&this._dataList.options.depthColumn?this.dataList.getColData(t):this.getVisibleColData(t);for(var l=n,h=0;h<i.length;h++){if(0==n.internal&&"custom"==n.options.inputType){var d=this.dataList.getRealRowIndex(h);if("checkbox"!=(l=n.cellManagerHashByRowIndex[d]?n.cellManagerHashByRowIndex[d]:n).options.inputType&&"radio"!=l.options.inputType)continue}else if(this.groupbyStatus.grouped&&"object"==typeof this.dataList.getRealRowIndex(h))continue;if(e){s.push(h);var c=!(!this.isDrillDown||!this._dataList.options.depthColumn);this.___getEditReadOnly(h,t,c)||this._getEditDisabled(h,t,c)?a++:i[h]==l.options.trueValue&&o.push(h)}else i[h]==l.options.trueValue&&o.push(h)}}return e&&a!==s.length&&a+o.length==s.length?s:o}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getUnCheckedIndex=function(t){return this.getUncheckedIndex(t)},I.prototype.getUncheckedIndex=function(t){try{var e=[],i=this.cellInfoHash[this.getColumnID(t)];if("checkbox"==i.options.inputType||"radio"==i.options.inputType||"custom"==i.options.inputType){var o=[];o=this.isDrillDown&&this._dataList.options.depthColumn?this.dataList.getColData(t):this.getVisibleColData(t);for(var s=i,a=0;a<o.length;a++){if(0==i.internal&&"custom"==i.options.inputType){var n=this.dataList.getRealRowIndex(a);if("checkbox"!=(s=i.cellManagerHashByRowIndex[n]?i.cellManagerHashByRowIndex[n]:i).options.inputType&&"radio"!=s.options.inputType)continue}else if(this.groupbyStatus.grouped&&"object"==typeof this.dataList.getRealRowIndex(a))continue;o[a]!=s.options.trueValue&&e.push(a)}}return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getAllDisplayData=function(){try{var t=this._linkedDataList||this._dataList;if(t.getTotalRow()==t.getDataLength())return this.getAllVisibleData();this._endEdit();for(var e=this.getTotalRow(),i=this.getColumnCount(),o=[],s=0;s<e;s++)for(var a=0;a<i;a++)o.push(this._getDisplayData(s,a));return o}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getAllDisplayJSON=function(t){try{t||(t={emptyValue:"$$_blank_"});var e=this._linkedDataList||this._dataList;if(e.getTotalRow()==e.getDataLength())return this.getAllVisibleJSON(t);this._endEdit();for(var i=this.getTotalRow(),o=this.getColumnCount(),s=[],a=0;a<i;a++){for(var n={},l=0;l<o;l++)n[this.tdIdList[l]]=this._getDisplayData(a,l,t);s.push(n)}return s}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getAllVisibleJSON=function(t){try{this._endEdit()
;for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=this.getColumnCount(),s=[],a=0;a<i;a++)if(!e||"number"==typeof this.groupbyStatus.groupedRowIndexArr[a]){for(var n={},l=0;l<o;l++)n[this.tdIdList[l]]=this._grid._getCellDisplayData(a,l,t);s.push(n)}return s}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getAllDisplayXML=function(){try{var t=this._linkedDataList||this._dataList;return t.getTotalRow()==t.getDataLength()?this.getAllVisibleXML("displayData"):(this._endEdit(),this.getAllArrXML("displayData",this.id))}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getAllVisibleXML=function(t){try{this._endEdit();for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=[],s=0;s<i;s++)e&&"number"!=typeof this.groupbyStatus.groupedRowIndexArr[s]||o.push(s);return this.getArrXML(o,t,e)}catch(t){r.w.printStackTrace(t)}},I.prototype.getAllVisibleData=function(t){try{this._endEdit();for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=this.getColumnCount(),s=[],a=0;a<i;a++)if(!e||"number"==typeof this.groupbyStatus.groupedRowIndexArr[a])for(var n=0;n<o;n++)"displayData"===t?s.push(this._getCellDisplayData(a,n)):s.push(this.dataList.getCellData(a,n));return s}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.changeToRealRowIndexArr=function(t){try{for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getCheckedData=function(t){try{this._endEdit();for(var e=[],i=this.getCheckedIndex(t),o=0;o<i.length;o++)e.push(this.dataList.getRowData(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getCheckedJSON=function(t){try{this._endEdit();for(var e=[],i=this.getCheckedIndex(t),o=0;o<i.length;o++)e.push(this._dataList.getRowJSON(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getCheckedXML=function(t){try{this._endEdit();var e=this.getCheckedIndex(t);return this.getArrXML(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getUncheckedData=function(t){try{this._endEdit();for(var e=[],i=this.getUncheckedIndex(t),o=0;o<i.length;o++)e.push(this.dataList.getRowData(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getUncheckedJSON=function(t){try{this._endEdit();for(var e=[],i=this.getUncheckedIndex(t),o=0;o<i.length;o++)e.push(this._dataList.getRowJSON(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getUncheckedXML=function(t){try{this._endEdit();var e=this.getUncheckedIndex(t);return this.getArrXML(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getCellChecked=function(t,e){try{var i=this.cellInfoHash[this.getColumnID(e)],o=i.id;if(0==i.internal&&"custom"==i.options.inputType){var s=this.dataList.getRealRowIndex(t);i=i.cellManagerHashByRowIndex[s]?i.cellManagerHashByRowIndex[s]:i}if("checkbox"!=i.options.inputType&&"radio"!=i.options.inputType)return!1;var a=this.dataList._getCellData(t,o);return a=a==i.options.trueValue}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.hasChild=function(t){return this.drilldown.hasChild(t)},I.prototype.comparator=function(t,e){return parseInt(e)==parseInt(t)?0:parseInt(e)>parseInt(t)?1:-1},I.prototype.getExcelAllXML=function(t){try{var e=new Array;e.push("<array><![CDATA["),e.push('["');for(var i=0;i<this.getDataLength();i++)for(var o=0;o<this.getTotalCol();o++)e.push(this.dataList._getCellData(i,this.getColumnID(o))),e.push('","');return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getExcelAllXMLDisplay=function(t){try{null==t&&(t=1);var e=new Array;e.push("<array><![CDATA["),e.push('["');for(var i=this.getDataLength(),o=this.getColumnCount(),s=0;s<i;s++)for(var a=0;a<o;a++){
var n,l=this.getCellInfo(a);if("custom"==l.options.inputType){var h=this.dataList.getRealRowIndex(s);l.cellManagerHashByRowIndex[h]||(this.drawData(s),l=l.cellManagerHashByRowIndex[h]||l)}(n=l.useCustomFormatter||"custom"==l.options.inputType?this._getDisplayData(this.dataList.getRealRowIndex(s),a):1==t?l.getDisplayData(this.dataList._getCellData(s,this.getColumnID(a)),s):this.dataList._getCellData(s,this.getColumnID(a))+"").indexOf("javascript:")>-1&&(n=n.wq_replaceAll("javascript:","")),e.push(n),e.push('","')}return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getExcelAllXMLRaw=function(t){try{var e=this.dataArr.length,i=this.dataArr[0],o=this.dataArr[e-1];this.dataArr[0]='<array><![CDATA[["'+i,this.dataArr[e-1]=o+'"]]]></array>';var s=this.dataArr.join('","');return this.dataArr[0]=i,this.dataArr[e-1]=o,s}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.makeExcelData=function(t,e,i,o){try{var n=e.length,l=t+i.rowsByN;l=l<i.dataLength?l:i.dataLength;var h,d=this.oneRowDataLength,c=i.separator||",";if(i.convertIndex&&(h=i.convertIndex.split(",")),""==i.dataProvider&&""==i.splitProvider)if(0===i.type)for(var u=t;u<l;u++){if("number"==typeof(y=this.dataList.getRealRowIndex(u)))for(var p=0;p<d;p++){var g=!1;if(h)for(var m=0;m<h.length;m++)if(h[m]==p.toString()){g=!0;break}n=g?(e=this._getExcelDisplayData(y,p,e,i,u)).length:(e=this._getExcelRealData(y,p,e,i)).length}}else if(1===i.type||2==i.type)for(u=t;u<l;u++){if("number"==typeof(y=this.dataList.getRealRowIndex(u)))for(p=0;p<d;p++){g=!1;if(h)for(m=0;m<h.length;m++)if(h[m]==p.toString()){g=!0;break}n=g?(e=this._getExcelRealData(y,p,e,i)).length:(e=this._getExcelDisplayData(y,p,e,i,u)).length}}else l=i.dataLength,n=(e=this.dataList.getAllData()).length;var f=this;if(l<i.dataLength&&""==i.dataProvider&&""==i.splitProvider)if(!1!==i.massStorage)this.excelTime=setTimeout((function(){try{!0===i.showConfirm&&window.gridExceldownloadIframe.contentWindow.checkUpload(e.length/f.dataArr.length)}catch(t){}if(0!=i.multiexcel)return f.makeExcelData(l,e,i,o);f.makeExcelData(l,e,i,o)}),10);else{if(0!=i.multiexcel)return this.makeExcelData(l,e,i,o);this.makeExcelData(l,e,i,o)}else{var b;if(""==i.dataProvider&&""==i.splitProvider)if(e.length>=2){if(i.groupby&&this.groupbyStatus.grouped&&this.defaultColCnt>0){var y=1,v=this.oneRowDataLength,w=[];for(u=0;u<e.length;u++){if((u%v==0||0==u)&&(y=parseInt(u/v,10),this.options.rowNumVisible&&w.push(y+1),this.options.rowStatusVisible)){var S=this.getRowStatus(y);w.push(S)}w.push(e[u])}n=(e=w).length}if(n>0){var C=e[0],_=e[n-1];e[0]='<array><![CDATA[["'+C,e[n-1]=_+'"]]]></array>',b=e.join('"'+c+'"'),e[0]=C,e[n-1]=_}else b="<array><![CDATA[["+e+"]]]></array>"}else{b="<array><![CDATA[["+(1===e.length?'"'+e[0]+'"':"")+"]]]></array>"}else b="<array><![CDATA[[ ]]]></array>";if(!0===i.showConfirm)this.excelOptions=i,this.excelInfoArr=o,this.excelFinalStr=b,this.checkUpload();else{if(0!=i.multiexcel)return this.sendExcelData(i,o,b);this.sendExcelData(i,o,b)}}}catch(t){var x=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/excel/download/errorHandler/@value"),I=a.D.getGlobalFunction(x,this.scope_id);"function"==typeof I&&I.call(this,this.id),r.w.printStackTrace(t,null,this)}},I.prototype._getExcelRealData=function(t,e,i,o){try{var s=o.cellInfo,a=o.isExpCol,n=i;if(a[e])n.push(s[e].getExpressionValue(t));else{var l=this.dataList._getData(t,e);n.push(null!=l?l:"")}return n}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._getExcelDisplayData=function(t,e,i,o,s){try{var a,n=o.cellInfo,l=o.isSelectCol,h=o.isBasicCol,d=o.isExpCol,c=o.isCustomCol,u=o.isCustomModelCol,p=o.isCustomType,g=o.isEscapeFormatter,m=i;if(d[e]&&(a=n[e].getExpressionValue(t)),c[e]||u[e]||g[e]?a=this._getDisplayData(t,e):(a=this.dataList._getData(t,e),
n[e].options.useMonthYearFormat&&"calendar"===n[e].options.inputType&&(a=WebSquare.date.getIOFormatDate(a,n[e].options.ioFormat,n[e].options.calendarValueType)),a=null!=a?a:""),h[e]||d[e])n[e].options.maskFormat&&(a=this.getInput(n[e]).maskFormatModelUnFormat(a)),a=n[e].formatter?n[e].formatter.format(a):a;else if(!l[e]||c[e]||u[e]){if(p[e]){x=null;var f,b=n[e].cellManagerHashByRowIndex[s];b?f=(n=b).options.inputType:(n=n[e],f="text");var y=n.useCustomFormatter,v=n.useCustomModelFormatter,w=n.useEscapeFormatter,S="select"===f||"checkcombobox"===f||"autoComplete"===f,C="expression"===f,_=!("checkbox"===f||"image"===f||"radio"===f||S||C||y||v||w);if(y||v||w?a=this._getDisplayData(t,e):(a=this.dataList._getData(t,e),n.options.useMonthYearFormat&&"calendar"===n.options.inputType&&(a=WebSquare.date.getIOFormatDate(a,n.options.ioFormat,n.options.calendarValueType)),a=null!=a?a:""),_||C)n.options.maskFormat&&(a=this.getInput(n).maskFormatModelUnFormat(a)),a=n.formatter?n.formatter.format(a):a;else if(S&&!y&&!v){x=null;null==(x=2==o.type?this.dataList._getData(t,e):n.getData(a,t))&&(x=""),a=x}}}else{var x=null;if(2==o.type)x=this.dataList._getData(t,e);else{var I=n[e].dataComp,T=t;if(I){var k=this.modelControl.getDataComp(I);k&&"linkedDataList"===k.initializeType&&(T=s)}x=n[e].getData(a,T)}null==x&&(x=""),a=x}return"string"==typeof a&&a.indexOf("javascript:")>-1&&(a=a.wq_replaceAll("javascript:","")),m.push(a),m}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._getStyleRowIndex=function(t){try{var e=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t);return null==e?e=null:"number"!=typeof e&&(e=e.type+"_"+e.groupId),e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getRowStyleClassName=function(t,e){try{var i=e?t:this._getStyleRowIndex(t);return null==i?null:this.rowStyleArr[i]}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setRowStyleClassName=function(t,e,i){try{var o=i?t:this._getStyleRowIndex(t);if(null==o)return;this.rowStyleArr[o]=e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getCellStyleClassName=function(t,e,i){try{"number"!=typeof e&&(e=this.bodyIdColIndexMap[e]);var o=i?t:this._getStyleRowIndex(t);return null==o?void 0:"number"==typeof o?this.cellStyleArr[o*this.oneRowDataLength+e]:this.cellStyleArr[o+"_"+e]}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellStyleClassName=function(t,e,i,o){try{e=this.getColumnIndex(e);var s=o?t:this._getStyleRowIndex(t);if(null==s)return;"number"==typeof s?this.cellStyleArr[s*this.oneRowDataLength+e]=i:this.cellStyleArr[s+"_"+e]=i}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getCellClass=function(t,e){try{"number"!=typeof e&&(e=this.bodyIdColIndexMap[e]);var i=this._getStyleRowIndex(t);return null==i?void 0:"number"==typeof i?this.cellClassArr[i*this.oneRowDataLength+e]:this.cellClassArr[i+"_"+e]}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellDefaultStyleClassName=function(t,e,i){try{e=this.getColumnIndex(e);var o=this.getCellStyleClassName(t,e,i);return null==o&&(this.cellStyleIndex++,o=this.id+"_cellstyle_"+this.cellStyleIndex+"_",this.setCellStyleClassName(t,e,o,i)),null==this.cellStyleValueObj[o]&&(this.cellStyleValueObj[o]={}),o}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellClass=function(t,e,i,o){try{var s,a;e=this.getColumnIndex(e);var n,l=!(!this.isDrillDown||!this._dataList.options.depthColumn);if(o?(s=t,a=this.getDisplayRowIndex(t)-this.rowIndex):(s=this._getStyleRowIndex(t),a=l?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex),a>=0&&(n=this.data_td_list[a*this.oneRowDataLength+e]),null==s)return;if("number"==typeof s){var h=this.tdCellClassArr[a*this.oneRowDataLength+e];h&&this.removeClass(n,h),this.cellClassArr[s*this.oneRowDataLength+e]=i}else this.cellClassArr[s+"_"+e]=i;n&&(this.tdCellClassArr[a*this.oneRowDataLength+e]=i,this.addClass(n,i))}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.removeCellClass=function(t,e,i){try{
e=this.getColumnIndex(e);var o,s=this._getStyleRowIndex(t);if(o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex,null==s)return;"number"==typeof s?this.cellClassArr[s*this.oneRowDataLength+e]=void 0:this.cellClassArr[s+"_"+e]=void 0;var a=this.data_td_list[o*this.oneRowDataLength+e];a&&(i||(i=this.tdCellClassArr[o*this.oneRowDataLength+e]),this.tdCellClassArr[o*this.oneRowDataLength+e]=void 0,this.removeClass(a,i))}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._removeAllTDCellClass=function(){try{for(var t=this.tdCellClassArr.length,e=0;e<t;e++){var i=this.tdCellClassArr[e],o=this.data_td_list[e];o&&i&&this.removeClass(o,i)}this.tdCellClassArr=[]}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._setColumnClass=function(t,e){try{var i=this.getColumnIndex(t);if(this.columnClassObj[i]){var o=this.columnClassObj[i].replace(new RegExp(e,"g"),"").wq_trim();this.columnClassObj[i]=o+" "+e}else this.columnClassObj[i]=e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnClass=function(t,e){try{if("string"!=typeof e)return;for(var i=e.split(" "),o=0;o<i.length;o++)this._setColumnClass(t,i[o]);for(o=this.getColumnIndex(t);o<this.data_td_list.length;o+=this.oneRowDataLength){var s=this.data_td_list[o];s&&this.addClass(s,e)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._removeColumnClass=function(t,e){try{var i=this.getColumnIndex(t);this.columnClassObj[i]=this.columnClassObj[i].replace(new RegExp(e,"g"),"").wq_trim(),this.columnClassObj[i]||delete this.columnClassObj[i];for(var o=i;o<this.data_td_list.length;o+=this.oneRowDataLength){var s=this.data_td_list[o];s&&this.removeClass(s,e)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.removeColumnClass=function(t,e){try{if("string"!=typeof e)return;for(var i=e.split(" "),o=0;o<i.length;o++)this._removeColumnClass(t,i[o])}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getColumnClass=function(t){try{var e=this.getColumnIndex(t);return this.columnClassObj[e]}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._refreshColumnClass=function(){try{for(var t in this.columnClassObj)this.setColumnClass(this.columnClassObj[t])}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getRowStyleFixedClassName=function(t){try{var e=this._getStyleRowIndex(t);return null==e?null:this.rowStyleFixedArr[e]}catch(t){$l("getRowStyleFixedClassName :"+t.message),r.w.printStackTrace(t,null,this)}},I.prototype.setRowStyleFixedClassName=function(t,e){try{var i=this._getStyleRowIndex(t);if(null==i)return;this.rowStyleFixedArr[i]=e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getRowStyleDataClassName=function(t){try{var e=this._getStyleRowIndex(t);return null==e?null:this.rowStyleDataArr[e]}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setRowStyleDataClassName=function(t,e){try{var i=this._getStyleRowIndex(t);if(null==i)return;this.rowStyleDataArr[i]=e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.refreshColumnItemset=function(t){try{var e=this.getCellInfo(t);if(e.resetMatchInfo=!0,e.options.embeddedInput){t=this.getColumnIndex(e.options.col_id);for(var i=0;i<this.drawedRowLength;i++){var o=this.data_td_list[t+i*this.oneRowDataLength];if(o){var s=this.dom[o.getAttribute("id")+"_select"];s&&s.refreshItemset()}}}else"select"==e.options.inputType?(e.hasRef&&(e.refHash=[]),e.select&&e.select.refreshItemset(),e.itemsetObj&&e.mainGrid.refresh()):"checkcombobox"==e.options.inputType&&(e.refreshItemArr(),e.checkcombobox)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.refreshRadioGroup=function(t){try{for(var e={},i=[],o=0;o<this.oneRowDataLength;o++){"radio"==(l=this.getCellInfo(o)).options.inputType&&l.options.groupName==t&&(l.options.groupRef&&(l.options.groupValue=WebSquare.ModelUtil.getInstanceValue(l.options.groupRef,null,this.scope_id)),e[l.options.groupValue]=l,i.push(l))}if(0==i.length)return;var s=this.getDataLength();for(o=0;o<s;o++){
var a=e[this.dataList._getCellData(o,t)];if(a)this.dataList.__setCellData(o,a.id,a.options.trueValue);else{for(var n=0;n<i.length;n++){var l=i[n];this.dataList.__setCellData(o,l.id,l.options.defaultValue)}var h=this.getCellInfo(t);h&&this.dataList.__setCellData(o,t,h.options.defaultValue)}}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.resetRadioGroup=function(t,e){return this._resetRadioGroup.call(this,t,e,!0)},I.prototype._resetRadioGroup=function(t,e,i){try{for(var o=[],s=0;s<this.oneRowDataLength;s++){"radio"==(h=this.getCellInfo(s)).options.inputType&&h.options.groupName==e&&o.push(h)}if(0==o.length)return;if("number"==typeof t)var a=t,n=t+1;else a=0,n=this.getDataLength();for(s=a;s<n;s++){for(var l=0;l<o.length;l++){var h=o[l];this.dataList.__setCellData(s,h.id,h.options.defaultValue)}if(i){var d=this.getCellInfo(e);d&&this.dataList.__setCellData(s,e,d.options.defaultValue)}}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.xmlData2ArrData=function(t,e,i){try{if(null==t)return;if(9==t.nodeType)s=1==e?t.selectNodes("/"+this.options.repeatNode):t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);else if(o=i&&i.baseNode?i.baseNode:this.options.baseNode,i&&i.isRepeatNode)s=(t=WebSquare.xml.parse(WebSquare.xml.serialize(t))).selectNodes("/"+i.repeatNode);else if(o.startsWith(t.tagName))var o=o.replace(t.tagName,"."),s=t.selectNodes(o+"/"+this.options.repeatNode);else t=WebSquare.xml.parse(WebSquare.xml.serialize(t)),s=1==e?t.selectNodes("/"+this.options.repeatNode):t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);for(var n=[],l=this.options.valueNode,h=null==l||""==l,d=a.D.getTextNodeValue,c=s.length,u=this.tdIdList.length,p=[],g=[],m=[],f=0;f<u;f++){p[f]=this.getCellInfo(this.tdIdList[f]);var b=p[f].options;null!=b.importFormatter&&""!=b.importFormatter&&(g[f]=!0),null!=b.importExp&&""!=b.importExp&&(m[f]=!0)}for(f=0;f<c;f++){for(var y=f,v=s[f],w=n.length,S=0;S<u;S++){var C=s[f].selectSingleNode(this.tdIdList[S]);n[w+S]=null!=C?h?d(C):C.getAttribute(l):p[S].options.defaultValue}for(S=0;S<u;S++)if(g[S])try{var _=a.D.getGlobalFunction(p[S].options.importFormatter,this.scope_id);"function"==typeof _&&(n[w+S]=_.call(this,v,y))}catch(t){n[w+S]=p[S].options.defaultValue,r.w.printStackTrace(t,null,this)}for(S=0;S<u;S++)if(m[S])try{var x=new Function("_this","obfuscator_rowXml","return "+p[S].options.importExp)(this,v);n[w+S]=x}catch(t){n[w+S]=p[S].options.defaultValue,r.w.printStackTrace(t,null,this)}for(S=0;S<u;S++){if("radio"==p[S].options.inputType&&p[S].options.groupName&&this.cellInfoHash[p[S].options.groupName]){var I=p[S].options.trueValue,T=p[S].options.falseValue;switch(p[S].options.valueType){case"binary":I="1",T="0";break;case"boolean":I="true",T="false"}this.columnValue(v,p[S].options.groupName)==p[S].options.groupValue?n[w+S]=I:n[w+S]=T}this.options.xmlEncode&&null!=n[w+S]&&(n[w+S]=WebSquare.xml.decode(n[w+S]))}}return n}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.jsonData2ArrData=function(t){try{if(null==t)return;for(var e=[],i=t.length,o=this.cellIdList.length,s=[],n=0;n<o;n++)s[n]=this.getCellInfo(this.cellIdList[n]);for(n=0;n<i;n++)for(var l=n,h=t[n],d=e.length,c=0;c<o;c++)if(s[c].options.importFormatter)try{var u=a.D.getGlobalFunction(s[c].options.importFormatter,this.scope_id);"function"==typeof u&&(e[d+c]=u.call(this,h,l))}catch(t){e[d+c]=s[c].options.defaultValue,r.w.printStackTrace(t,null,this)}else if(s[c].options.importExp)try{var p=new Function("_this","obfuscator_rowXml","return "+s[c].options.importExp)(this,h);e[d+c]=p}catch(t){e[d+c]=s[c].options.defaultValue,r.w.printStackTrace(t,null,this)}else{var g=t[n][this.cellIdList[c]];e[d+c]=null!=g?g:s[c].options.defaultValue}return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.xpathValue=function(t,e){try{var i=WebSquare.xml.findNode(t,e);if(null==i)return"";if(1!=i.nodeType)return i.nodeValue;for(var o=i.firstChild;null!=o;o=o.nextSibling)if(3==o.nodeType)return o.nodeValue
}catch(t){$l("xpath exeption"),r.w.printStackTrace(t,null,this)}return""},I.prototype.getAllArrXML=function(t){try{var e=!1;this.tagNmArr=this._dataList.options.baseNode.replace(/\[[^\]]+\]/g,"").split("/");for(var i=0;i<this.tagNmArr.length;i++)if(null!=this.tagNmArr[i]&&""!=this.tagNmArr[i].wq_trim())if(e)s.push(o.createElement(this.tagNmArr[i])),s[i-1].appendChild(s[i]);else{var o=WebSquare.xml.parse("<"+this.tagNmArr[i]+"/>"),s=[];s.push(o.documentElement),e=!0}var n=this._dataList.options.repeatNode.replace(/\[[^\]]+\]/g,"").split("/"),l=null;for(i=0;i<this.getTotalRow();i++){var h=i;l=[];for(var d=null,c=0;c<n.length;c++)if(""!=n[c]){var u=o.createElement(n[c]);l.push(u),0==c?s[s.length-1].appendChild(u):l[c-1].appendChild(l[c])}(d=l[n.length-1]).setAttribute("status",this.dataList._getRowStatusValue(h)),d.setAttribute("statusValue",this.dataList._getRowStatus(h)),d.setAttribute("id",h);for(var p=this.getColumnCount(),g=new Array(p),m=0;m<p;m++){var f="";f="displayData"!=t?this._dataList._getData(h,m):this._getDisplayData(h,m),this.options.xmlEncode&&(f=WebSquare.xml.encode(f));var b=this.getColumnID(m),y=this.getCellInfo(m);if(""!=y.options.exportFormatter)try{var v=a.D.getGlobalFunction(y.options.exportFormatter,this.scope_id);"function"==typeof v&&v(d,f,h,b)}catch(t){r.w.printStackTrace(t,null,this),$l("xmlDtaGetter - tdObj.exportFormatter error")}else{if(g[m]=o.createElement(this.getColumnID(m)),""==this._dataList.options.valueAttribute){var w=o.createTextNode(f);g[m].appendChild(w)}else g[m].setAttribute(this._dataList.options.valueAttribute,f);d.appendChild(g[m])}}}return o}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getArrXML=function(t,e,i){try{if(t instanceof Array){var o=!1;this.tagNmArr=this._dataList.options.baseNode.replace(/\[[^\]]+\]/g,"").split("/");for(var s=0;s<this.tagNmArr.length;s++)if(null!=this.tagNmArr[s]&&""!=this.tagNmArr[s].wq_trim())if(o)l.push(n.createElement(this.tagNmArr[s])),l[s-1].appendChild(l[s]);else{var n=WebSquare.xml.parse("<"+this.tagNmArr[s]+"/>"),l=[];l.push(n.documentElement),o=!0}var h=this._dataList.options.repeatNode.replace(/\[[^\]]+\]/g,"").split("/"),d=null;for(s=0;s<t.length;s++){var c=t[s];d=[];for(var u=null,p=0;p<h.length;p++)if(""!=h[p]){var g=n.createElement(h[p]);d.push(g),0==p?l[l.length-1].appendChild(g):d[p-1].appendChild(d[p])}(u=d[h.length-1]).setAttribute("status",this.dataList.getRowStatusValue(c)),u.setAttribute("statusValue",this.dataList.getRowStatus(c)),!0===i?u.setAttribute("id",this._getGroupbyDisplayRowIndex(c)):u.setAttribute("id",c);for(var m=this.getColumnCount(),f=new Array(m),b=0;b<m;b++){var y="";"displayData"!=e?null==(y=this.dataList._getCellData(c,b))&&(y=""):null==(y=this._getCellDisplayData(c,b))&&(y=""),this.options.xmlEncode&&(y=WebSquare.xml.encode(y));var v=this.getColumnID(b),w=this.getCellInfo(b);if(""!=w.options.exportFormatter)try{var S=a.D.getGlobalFunction(w.options.exportFormatter,this.scope_id);"function"==typeof S&&S(u,y,c,v)}catch(t){r.w.printStackTrace(t,null,this),$l("xmlDtaGetter - tdObj.exportFormatter error")}else{if(f[b]=n.createElement(this.getColumnID(b)),""==this._dataList.options.valueAttribute){var C=n.createTextNode(y);f[b].appendChild(C)}else f[b].setAttribute(this._dataList.options.valueAttribute,y);u.appendChild(f[b])}}}return n}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getDisplayRowIndex=function(t){try{return(this._linkedDataList||this._dataList).getFilteredRowIndex(t)}catch(t){r.w.printStackTrace(t)}},I.prototype.getOption=function(t){try{return this.options[t]}catch(t){r.w.printStackTrace(t)}},I.prototype.getDataList=function(){try{var t=this._linkedDataList||this._dataList;return t?t.id:null}catch(t){r.w.printStackTrace(t)}},I.prototype.getRowNumVisible=function(){try{return this.options.rowNumVisible}catch(t){r.w.printStackTrace(t)}},I.prototype.makeCustomFilter=function(t){try{null!=this.customFilter&&this.customFilter.remove(),
this.customFilter=new WebSquare.uiplugin.floatingLayer(this.id+"_customFilter",{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter",useModal:!0,useModalStack:!0,frameModal:this.options.customFilterFrameModal+"",headerLeftClass:"w2grid_customFilter_HL",headerRightClass:"w2grid_customFilter_HR",headerCenterClass:"w2grid_customFilter_HC",bodyLeftClass:"w2grid_customFilter_BL",bodyRightClass:"w2grid_customFilter_BR",bodyCenterClass:"w2grid_customFilter_BC",bodyLeftBottomClass:"w2grid_customFilter_FL",bodyRightBottomClass:"w2grid_customFilter_FR",bodyBottomClass:"w2grid_customFilter_FC",closeButtonClass:"w2grid_customFilter_btnClose",_scope_obj_uuid:this.options._scope_obj_uuid,title:WebSquare.language.getMessage("Grid_filter_title")||"사용자 지정 필터",titleClass:"w2grid_customFilter_title"});var e=new WebSquare.uiplugin.textbox(this.id+"_text1_"+this.headerID,{style:"position:absolute; margin:10px;",className:"w2grid_customFilter_text",label:WebSquare.language.getMessage("Grid_filter_search_label")||"찾을 조건"});this.customFilter.addControl(e),this.selectboxItemSet=["=","<>",">",">=","<","<=",WebSquare.language.getMessage("Grid_filter_condition7")||"= (메타문자 사용)",WebSquare.language.getMessage("Grid_filter_condition1")||"시작문자",WebSquare.language.getMessage("Grid_filter_condition2")||"제외할 시작 문자",WebSquare.language.getMessage("Grid_filter_condition3")||"끝 문자",WebSquare.language.getMessage("Grid_filter_condition4")||"제외할 끝 문자",WebSquare.language.getMessage("Grid_filter_condition5")||"포함",WebSquare.language.getMessage("Grid_filter_condition6")||"포함하지 않음"],this._selectboxIgnoreOperatorItemSet=[">",">=","<","<="],this.customFilterItemCnt=0,this.groupList=[];var i=new WebSquare.uiplugin.group(this.id+"_item_"+this.customFilterItemCnt,{style:"position:absolute; width:100%; height:22px; margin-bottom:5px; background-color:transparent;"});this.customFilter.addControl(i),this.groupList.push(i);var o=this,s=new WebSquare.uiplugin.selectbox(i.id+"_selectbox_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_selectbox",textAlign:"left",chooseOption:!0,visibleColumn:"true",wheelRows:1,xmlEvents:[{name:"onchange",action:"script",param:{handler:function(){var t=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-2],e=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-3];7==this.getSelectedIndex()?(t.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label1")||"? 기호를 사용하여 한문자를 나타낼 수 있습니다."),e.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label2")||"* 기호를 사용하여 여러 문자를 나타낼 수 있습니다."),o.setChildrenPosition(),o.customFilterMetacharPos|=1):(o.customFilterMetacharPos&=-2,o.customFilterMetacharPos<=0&&(t.setLabel(""),e.setLabel(""),o.setChildrenPosition()))}}}]});i.addControl(s);var n=this.headerInfoHash[this.headerID].options.filterSubmenuSize||"",l=this.getCellInfo(this.targetColID).options.filterDisplayMode||"label",h=this.getCellInfo(this.targetColID).options.delimiter||" ",c=this.getCellInfo(this.targetColID).options.filterSearchTarget||"label",u=new WebSquare.uiplugin.autoComplete(i.id+"_autocomplete_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_autocomplete",noResult:"useData",ignoreBlankOnNoResult:!0,chooseOption:!0,caseSensitive:this.options.caseSensitive,wheelRows:1,submenuSize:n,displayMode:l,searchTarget:c,delimiter:h});if(u.__setSelectedIndex1=u.setSelectedIndex1,u.setSelectedIndex1=function(t,e){u.__setSelectedIndex1(t,e);var i=u.getValue(),s=this.parentControl.id;if(s)var r=a.D.getComponentById(s+"_selectbox_"+o.headerID);if(r){if(isNaN(i)){for(var n=0;n<r.itemArr.length;n++)void 0!==r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!0);for(var l=r.getValue(),h=0;h<o._selectboxIgnoreOperatorItemSet.length;h++)l===o._selectboxIgnoreOperatorItemSet[h]&&r.setSelectedIndex(0)}else for(n=0;n<r.itemArr.length;n++)!0===r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!1);r.setSelectOptions(r.itemArr)}},i.addControl(u),
"label"==l||"value delim label"==l||"label delim value"==l)for(var p=this.changeItemValue("label",this.targetColID,this.colDataList,!1),g=0;g<this.colDataList.length;g++)u.addItem(p[g],this.colDataList[g]);else if(this.colDataList)for(g=0;g<this.colDataList.length;g++)u.addItem(this.colDataList[g],this.colDataList[g]);for(var m=this.headCellInfoHash[this.headerID].getAttribute("customFilterItemCnt")||2,f=0;f<m-1;f++)this.addCustomFilterItem(f);var b=new WebSquare.uiplugin.textbox(this.id+"_text2_"+this.headerID,{style:"position:absolute; margin-left:10px; margin-top:5px;",className:"w2grid_customFilter_text"});this.customFilter.addControl(b);var y=new WebSquare.uiplugin.textbox(this.id+"_text3_"+this.headerID,{style:"position:absolute; margin:5px; margin-bottom:10px; margin-left:10px;",className:"w2grid_customFilter_text"});this.customFilter.addControl(y);var v=new WebSquare.uiplugin.group(this.id+"_buttonGroup_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_buttonGroup"});if(this.customFilter.addControl(v),this.options.showCustomFilterReset){var w=new WebSquare.uiplugin.textbox(this.id+"_btnReset_"+this.headerID,{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",label:WebSquare.language.getMessage("Grid_filter_reset")||"초기화",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.groupbyStatus&&o.groupbyStatus.grouped&&o.options.groupbyFilterBox;for(var e=0;e<o.groupList.length;e++)for(var i=o.groupList[e].getChildren(),s=0;s<i.length;s++){var r=i[s];if(-1!=r.id.indexOf("_selectbox")){var a=o.itemValueObj[o.targetColID]["select"+e];r.setSelectedIndex(a||0)}else if(-1!=r.id.indexOf("_autocomplete")){var n=o.itemValueObj[o.targetColID]["auto"+e];r.setValue(n||"")}else if(-1!=r.id.indexOf("_radio")){var l=o.itemValueObj[o.targetColID]["radio"+e];r.setSelectedIndex(l||0)}}}}}]});v.addControl(w),w.addEvent("onmousedown",(function(){w.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!0})),w.addEvent("onmouseup",(function(){w.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!1})),w.addEvent("onmouseout",(function(){w.toggleClass("w2grid_customFilter_button_selected")}))}var S=new WebSquare.uiplugin.textbox(this.id+"_btnConform_"+this.headerID,{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",tabIndex:"0",label:WebSquare.language.getMessage("Grid_filter_confirm")||"확인",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.setCustomFilterExpression()}}},{name:"onkeydown",action:"script",param:{handler:function(t){13==(t.charCode?t.charCode:t.keyCode)&&(o.setCustomFilterExpression(),o.hideCustomFilterList())}}}]});v.addControl(S),S.addEvent("onmousedown",(function(){S.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!0})),S.addEvent("onmouseup",(function(){S.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!1})),S.addEvent("onmouseout",(function(){S.toggleClass("w2grid_customFilter_button_selected")}));var C=new WebSquare.uiplugin.textbox(this.id+"_btnCancel",{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",tabIndex:"0",label:WebSquare.language.getMessage("Grid_filter_cancel")||"취소",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.options.groupbyZone&&o.firstOpenCustomFilter[o.headerID]&&(o.firstOpenCustomFilter[o.headerID]=!1),o.customFilter.hide()}}},{name:"onkeydown",action:"script",param:{handler:function(t){var e=t.charCode?t.charCode:t.keyCode;9==e?(C.tabOrderMoveStart=!1,t.shiftKey||(C.tabOrderMoveStart=!0,d.B.preventDefault(t))):13==e&&(o.options.groupbyZone&&o.firstOpenCustomFilter[o.headerID]&&(o.firstOpenCustomFilter[o.headerID]=!1),o.customFilter.hide(),o.hideCustomFilterList())}}},{name:"onkeyup",action:"script",param:{handler:function(t){
9==(t.charCode?t.charCode:t.keyCode)&&(t.shiftKey||C.tabOrderMoveStart&&(C.tabOrderMoveStart=!1,o.customFilter.render.getElementsByClassName("w2floatingLayer_close_button")[0].focus()))}}}]});v.addControl(C),C.addEvent("onmousedown",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),C.addEvent("onmouseup",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),C.addEvent("onmouseout",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),this.customFilter.writeTo(WebSquare.getBody()),this.customFilter.activate(),this.customFilter.dom.closeButton.addEventListener("keydown",(function(t){9==(t.charCode?t.charCode:t.keyCode)&&t.shiftKey&&C.focus()})),this.setChildrenPosition(),this.setDefaultValue(t),C.render.style.left=v.render.offsetWidth-C.render.offsetWidth-10+"px",S.render.style.left=parseInt(C.render.style.left,10)-S.render.offsetWidth-5+"px",this.options.showCustomFilterReset&&(w.render.style.left=parseInt(S.render.style.left,10)-C.render.offsetWidth-17+"px"),this.customFilter.hide()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setDefaultValue=function(t){for(var e=0;e<this.groupList.length;e++)for(var i=this.groupList[e].getChildren(),o=0;o<i.length;o++){var s,r=i[o];if(-1!=r.id.indexOf("_selectbox")){s=r;for(var a=0;a<this.selectboxItemSet.length;a++)">"===this.selectboxItemSet[a]||">="===this.selectboxItemSet[a]||"<"===this.selectboxItemSet[a]||"<="===this.selectboxItemSet[a]?r.addItemArr(this.selectboxItemSet[a],this.selectboxItemSet[a],!1):r.addItemArr(this.selectboxItemSet[a],this.selectboxItemSet[a]);var n=this.itemValueObj[this.targetColID]["select"+e];r.setSelectedIndex(n||0)}else if(-1!=r.id.indexOf("_autocomplete")){var l=this.itemValueObj[this.targetColID]["auto"+e];r.setValue(l||"");var h=r.getValue();if(s){if(isNaN(h))for(a=0;a<s.itemArr.length;a++)void 0!==s.itemArr[a]._hidden&&(s.itemArr[a]._hidden=!0);else for(a=0;a<s.itemArr.length;a++)!0===s.itemArr[a]._hidden&&(s.itemArr[a]._hidden=!1);s.setSelectOptions(s.itemArr)}s=null}else if(-1!=r.id.indexOf("_radio")){r.addItem("OR","OR","0"),r.addItem("AND","AND","0");var d=this.itemValueObj[this.targetColID]["radio"+e];r.setSelectedIndex(d||0)}}},I.prototype.getUniqueValueOfArray=function(t){t.sort();for(var e=[],i=0;i<t.length;i++)(0===e.length||e[e.length-1]!==t[i]&&e[e.length-1]+""!=t[i]+"")&&e.push(t[i]);return e},I.prototype.setAutoCompleteItem=function(t,e){var i=[];if(this.options.useFilterSearch&&this.customFilterList&&this.customFilterList.filterHistory.column.length>0){var o=this.getCustomFilterListJSON({colID:t,headerID:e}),s=this.headerInfoHash[e],r=0;s&&s.options.hideCustomFilter&&(r=1);for(var n=2-r;n<o.length;n++)i.push(o[n].id2)}else i=this.dataList.getColData(t);for(var l in this.itemValueObj[this.targetColID])-1!=l.indexOf("auto")&&""!=this.itemValueObj[this.targetColID][l]&&i.push(this.itemValueObj[this.targetColID][l]);this.colDataList=this.getUniqueValueOfArray(i),this.colDataList.sort((function(t,e){var i=t-e;a.D.isIE("6 7")&&(i=(t+"").localeCompare(e+""));return i}))},I.prototype.showFilterOptions=function(t){this.options.useFilterList?(this.options.searchFilter,this.customFilterList&&this.customFilterScrollView?this.toggleCustomFilterList(t):this.createCustomFilterList(t)):this.showCustomFilter(t)},I.prototype.showCustomFilter=function(t){if(this.noevent=!0,this.options.useFilterList)if(this.groupbyStatus.grouped)if(this.options.groupbyFilterIcon){var e=this.headerToBodyRelation[t];if(e){for(var i=!1,o=this.getColumnIndex(e),s=0;s<this.groupbyStatus.sortIndexArr.length;s++)if(this.groupbyStatus.sortIndexArr[s]==o){i=!0;break}var r={};r.render=this.getElementById(this.id+"_"+t),r.parentRender=this.render.getElementsByTagName("div")[0],r.headerID=t,r.headerIndex=this.getHeaderIndex(r.headerID),r.isGroupbyColumn=i,this.groupbyFilterList?this.toggleGroupbyFilterList(r):this.createGroupbyFilterList(r)}
}else this._showCustomFilter(t);else this.showFilterOptions(t);else this._showCustomFilter(t)},I.prototype.showCustomFilter2=function(t){this.noevent=!0,this._showCustomFilter(t)},I.prototype._showCustomFilter=function(t){var e,i;(this.headerID=t,this.targetColID=this.getColIdByHeaderId(t),null==this.customFilter&&(this.itemValueObj={},this.customFilterStatusObj={}),this.itemValueObj[this.targetColID]||(this.itemValueObj[this.targetColID]={}),this.setAutoCompleteItem(this.targetColID,t),this.makeCustomFilter(this.targetColID,t),"BODY"==this.render.parentNode.tagName)?(e=this.render.offsetTop,i=this.render.offsetLeft):(e=WebSquare.style.getAbsoluteTop(this.render),i=WebSquare.style.getAbsoluteLeft(this.render),a.D.isIEAllVersion("5 6 7")||(e-=WebSquare.style.getAbsoluteTop(document.body)));var o=this.getHeaderPosition(t,"top"),s=this.getHeaderPosition(t,"left"),r=this.getHeaderSize(t,"width"),n=this.getHeaderSize(t,"height"),l=0,h=0;"number"==typeof window.innerWidth?(l=window.innerWidth,h=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(l=document.body.clientWidth,h=document.body.clientHeight);var d,c,u=parseInt(a.D.getStyleProperty(this.customFilter.render,"width"),10),p=parseInt(a.D.getStyleProperty(this.customFilter.render,"height"),10),g=0,m=0;a.D.isIE("6 7 8")?(d=document.documentElement.scrollTop,c=document.documentElement.scrollLeft):(d=window.pageYOffset,c=window.pageXOffset),g=i+s+r+u<=l+c?i+s+r:i+s-u,m=e+o+n+p<=h+d?e+o+n:e+this.render.offsetHeight-p,g<c&&(g=(l-u)/2+c,(m=e+this.render.offsetHeight)+p>h+d&&(m=e-p)),m<d&&(m=(h-p)/2+d),this.customFilter.render.style.left=g+"px",this.customFilter.render.style.top=m+"px",this.customFilter.show();var f=a.D.getComponentById(this.id+"_item_0_selectbox_"+this.headerID);f&&f.focus()},I.prototype.addCustomFilterItem=function(t){this.customFilterItemCnt++;var e=new WebSquare.uiplugin.group(this.id+"_item_"+this.customFilterItemCnt,{style:"position:absolute;",className:"w2grid_customFilter_item"});this.customFilter.addControl(e),this.groupList.push(e);var i=new WebSquare.uiplugin.radio(e.id+"_radio",{style:"position:absolute; left:50px; height:20px;",className:"w2grid_customFilter_radio",selectedIndex:0,cols:2,rows:1});e.addControl(i);var o=this,s=new WebSquare.uiplugin.selectbox(e.id+"_selectbox",{style:"position:absolute; top:25px;",className:"w2grid_customFilter_selectbox",textAlign:"left",chooseOption:!0,visibleColumn:"true",xmlEvents:[{name:"onchange",action:"script",param:{handler:function(){var e=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-2],i=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-3];7==this.getSelectedIndex()?(e.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label1")||"? 기호를 사용하여 한문자를 나타낼 수 있습니다."),i.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label2")||"* 기호를 사용하여 여러 문자를 나타낼 수 있습니다."),o.setChildrenPosition(),o.customFilterMetacharPos|=1<<t+1):(o.customFilterMetacharPos&=~(1<<t+1),o.customFilterMetacharPos<=0&&(e.setLabel(""),i.setLabel(""),o.setChildrenPosition()))}}}]});e.addControl(s);var r=this.headerInfoHash[this.headerID].options.filterSubmenuSize||"",n=this.getCellInfo(this.targetColID).options.filterDisplayMode||"label",l=this.getCellInfo(this.targetColID).options.filterSearchTarget||"label",h=this.getCellInfo(this.targetColID).options.delimiter||" ",d=new WebSquare.uiplugin.autoComplete(e.id+"_autocomplete",{style:"position:absolute; top:25px;",className:"w2grid_customFilter_autocomplete",noResult:"useData",ignoreBlankOnNoResult:!0,chooseOption:!0,caseSensitive:this.options.caseSensitive,submenuSize:r,displayMode:n,searchTarget:l,delimiter:h});if(d.__setSelectedIndex1=d.setSelectedIndex1,d.setSelectedIndex1=function(t,e){d.__setSelectedIndex1(t,e)
;var i=d.getValue(),s=this.parentControl.id;if(s)var r=a.D.getComponentById(s+"_selectbox");if(r){if(isNaN(i)){for(var n=0;n<r.itemArr.length;n++)void 0!==r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!0);for(var l=r.getValue(),h=0;h<o._selectboxIgnoreOperatorItemSet.length;h++)l===o._selectboxIgnoreOperatorItemSet[h]&&r.setSelectedIndex(0)}else for(n=0;n<r.itemArr.length;n++)!0===r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!1);r.setSelectOptions(r.itemArr)}},e.addControl(d),"label"==n||"value delim label"==n||"label delim value"==n)for(var c=this.changeItemValue("label",this.targetColID,this.colDataList,!1),u=0;u<this.colDataList.length;u++)d.addItem(c[u],this.colDataList[u]);else if(this.colDataList)for(u=0;u<this.colDataList.length;u++)d.addItem(this.colDataList[u],this.colDataList[u])},I.prototype.setChildrenPosition=function(){for(var t=this.customFilter.getChildren(),e=1;e<=t.length;e++){var i=WebSquare.style.getStyle(t[e-1].render,"top");if(i="auto"===i?"0":i,e===t.length)break;var o=WebSquare.style.getStyle(t[e-1].render,"margin-bottom");o="auto"===o?"0":o,t[e].render.style.top=t[e-1].render.offsetHeight+5+parseInt(i||"0",10)+parseInt(o||"0",10)+"px"}var s=this.customFilter.dom.closeButton.parentNode.offsetHeight,r=t[e-1].render.offsetHeight+10+parseInt(i||"0",10);this.customFilter.setSize(this.customFilter.render.offsetWidth,s+r+6)},I.prototype.replacechar=function(t){return"^"==t||"$"==t||"."==t||"["==t||"]"==t||"{"==t||"}"==t||"+"==t||"("==t||")"==t||"|"==t||"*"==t||"?"==t||"\\"==t?"\\"+t:void 0},I.prototype.setCustomFilterExpression=function(){this.dataList.removeColumnFilter(this.targetColID,{noRefreshAfter:!0});for(var t=!0,e=[],i=0;i<this.groupList.length;i++){for(var o={},s=this.groupList[i].getChildren(),r=0;r<s.length;r++){var a=s[r];if(-1!=a.id.indexOf("_selectbox"))o.select=a.getSelectedIndex(),this.itemValueObj[this.targetColID]["select"+i]=a.getSelectedIndex(),t=t&&0==a.getSelectedIndex(),o.dataType=this.getDataType(this.targetColID);else if(-1!=a.id.indexOf("_autocomplete")){var n=this;o.auto=a.getValue()!=a.options.chooseOptionLabel?(a.getValue()+"").replace(/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,(function(t){return n.replacechar(t)})):"",this.itemValueObj[this.targetColID]["auto"+i]=a.getValue(),t=t&&a.getValue()==a.options.chooseOptionLabel}else-1!=a.id.indexOf("_radio")&&(o.radio=a.getSelectedIndex(),this.itemValueObj[this.targetColID]["radio"+i]=a.getSelectedIndex())}o.select&&e.push(o)}this.customFilterStatusObj[this.headerID]=!0;var l={type:"func",colIndex:this.targetColID,key:this.customFilterOperator,condition:"and",columnfilterchangeFire:!1,param:e},h=!1;if(this.customFilterList&&this.customFilterList.customFilterListFilterInfo){var c=this.customFilterList.customFilterListFilterInfo[this.targetColID];this.customFilterList.customFilterListFilterInfo[this.targetColID]=JSON.stringify(l,(function(t,e){return"function"==typeof e||"object"==typeof e&&e.constructor===RegExp?e.toString():e})),c!==this.customFilterList.customFilterListFilterInfo[this.targetColID]&&(h=!0,d.B.fireEvent(n._dataList,"onbeforecolumnfilterchange"))}this.dataList.setColumnFilter(l),h&&d.B.fireEvent(n._dataList,"onaftercolumnfilterchange");var u=this.getElementById(this.id+"_"+this.headerID+"_filter");t||0==e.length?WebSquare.style.removeClass(u,"w2grid_customFilter_filter"):WebSquare.style.addClass(u,"w2grid_customFilter_filter"),this.customFilter.hide()},I.prototype.customFilterOperator=function(t,e,i){for(var o=!0,s=0;s<e.length;s++){var r,a=!0,n=e[s].dataType,l=e[s].select,h=e[s].auto,d=e[s].auto.replace(".*","~~").replace(".","~"),c=d,u=t;if(l>=3&&l<=6)if("bigDecimal"===n){d=h.replace("\\.",".");var p=WebSquare.bigDecimal(d);"NaN"===p.big?!1:(c=p,u=WebSquare.bigDecimal(t))}else"number"!==n&&"float"!==n||(c=(d=h.replace("\\.",".")).toString().indexOf(".")>-1?parseFloat(d):parseInt(d,10));switch(e[s].select){case 1:(r=new RegExp(h,"g")).lastIndex=0,a=t==r.exec(t);break;case 2:(r=new RegExp(h,"g")).lastIndex=0,a=t!=r.exec(t);break
;case 3:a="bigDecimal"===n?u.minus(c)>0:u>c;break;case 4:a="bigDecimal"===n?u.minus(c)>=0:u>=c;break;case 5:a="bigDecimal"===n?u.minus(c)<0:u<c;break;case 6:a="bigDecimal"===n?u.minus(c)<=0:u<=c;break;case 7:h=(h=h.replace(/\\\*/g,".*")).replace(/\\\?/g,".");var g=(r=new RegExp(h,"g")).exec(t);a=t==g||h==g;break;case 8:a=""==h?t==h:!!(r=new RegExp("^("+h+")","g")).test(t);break;case 9:a=!!(r=new RegExp("^[^("+h+")]","g")).test(t);break;case 10:a=""==h?t==h:!!(r=new RegExp("("+h+")$","g")).test(t);break;case 11:a=!!(r=new RegExp("[^("+h+")]$","g")).test(t);break;case 12:a=""==h?t==h:!!(r=new RegExp(h,"g")).test(t);break;case 13:a=""==h?t!=h:!!(r=new RegExp("^(?!.*"+h+").*","g")).test(t);break;default:a=t==h}if(1===e.length){o=a;break}0!==s?o=0==e[s].radio?o&&a:o||a:o=a}return o},I.prototype.syncWithSortStatus=function(){try{this.headerSortStatusArr=[];for(var t=this._linkedDataList||this._dataList,e=0;e<t.sortStatusArr.length;e++){var i=t.sortStatusArr[e];"number"==typeof this.getColumnIndex(i.colID)&&(this.headerSortStatusArr.push(i),this.headerSortStatusArr[i.colID]=i)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getFixedColumnLastIndex=function(t){try{if(!this.options.rowNumStatusFixed&&0===this.options.fixedColumn||!1===t)var e=this.options.fixedColumn;else e=this.options.fixedColumn+this.defaultColCnt;if(e<1)return 0;if(!this.options.fixedColumnWithHidden)for(var i=0,o=0;o<this.hiddenList.length;o++)if(this.hiddenList[o]||i++,i==e)return o+1;return e}catch(t){return r.w.printStackTrace(t,null,this),this.options.fixedColumn+this.defaultColCnt}},I.prototype.getFixedRightColumnLastIndex=function(){try{var t=this.colWidthList.length-this.options.fixedRightColumn,e=0;if(this.colWidthList.length!=t)for(var i=this.hiddenList.length-1;i>=0;i--)if(this.hiddenList[i])t--;else if(e++,this.options.fixedRightColumn==e)break;return t}catch(t){return r.w.printStackTrace(t,null,this),this.colWidthList.length-this.options.fixedRightColumn}},I.prototype.columnValue=function(t,e){try{return e=this.getColumnID(e),null!=t.nodeType&&void 0!==t.selectSingleNode?null==this.options.valueNode||""==this.options.valueNode?a.D.getTextNodeValue(t.selectSingleNode(e)):t.selectSingleNode(e).getAttribute(this.options.valueNode):t[e]}catch(t){r.w.printStackTrace(t,null,this)}return""},I.prototype.rowIndexValue=function(t){return t},I.prototype.getColumnOption=function(t,e){try{var i="";if(this.successBinding){var o=this.cellInfoHash[t];if("dataType"==e)if(o){var s=o.options.dataType;i=s||this._dataList.getColumnOption(t,e)}else(i=this._dataList.getColumnOption(t,e))||(i="text");else i=o.options[e]||"";return i}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setColumnOption=function(t,e,i){try{this.successBinding&&this._dataList.setColumnOption(t,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getColumnDataListInfo=function(t){try{var e=this.getCellInfo(t);return"select"==e.options.inputType||"autoComplete"==e.options.inputType||"checkcombobox"==e.options.inputType?e.getColumnDataListInfo():null}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e,i=/([\w-]*)\s*:\s*([^;]*)/g,o={};e=i.exec(WebSquare.initStyle[this.id].style);)o[e[1]]=e[2].wq_trim();var s=o[t]?t:"";if(s){var r=s.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})),a=o[s]?o[s]:o[s.toUpperCase()];document.getElementById(this.id).style[r]=a}else document.getElementById(this.id).style.cssText=WebSquare.initStyle[this.id].style,this.rowStyleArr=[],this.colStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this._removeAllTDCellClass(),this.applyStyleOptions(this.getTotalRow());document.getElementById(this.id).className=WebSquare.initStyle[this.id].className}},I.prototype.refresh=function(t){try{this._dataList.broadcast({gridView:["notifyRefresh",[t]]})
}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.checkAdaptiveGridType=function(){try{if(this.options.groupbyZone){var t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] adaptive를 지원하지 않는 Grid 입니다.";return!1}if(!this.render)return!1;var e=this.htmlInfo.head.rowAttrArr.length,i=this.htmlInfo.body.rowAttrArr.length,o=0;if(this.hasSubtotal)for(var s=this.htmlInfo.subtotalArr,n=0;n<s.length;n++)o+=s[n].rowAttrArr.length;if(1==e&&1==i&&(this.adaptiveGridType=1),1==e&&2==i?this.adaptiveGridType=2:2==e&&1==i?this.adaptiveGridType=3:2==e&&2==i?this.adaptiveGridType=4:3==e&&1==i&&(this.adaptiveGridType=5),e>3||i>2||o>3){t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] adaptive를 지원하지 않는 Grid 입니다.";return $l(t),!1}if(e+(i>o?i:o)>4){t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] adaptive를 지원하지 않는 Grid 입니다.";return $l(t),!1}return!(a.D.isIE(6)||a.D.isIE(7)||a.D.isIE(8)||a.D.isIE(9))}catch(t){r.w.printStackTrace(t)}},I.prototype.setAdaptiveGridBodyHeight=function(){try{for(var t=function(t){var e=this.getColumnIndex(t),i=parseInt(this.getAdaptiveColumnStyleValue(e,"height"),10);isNaN(i)||(this.orgBodyHeightObj[t]=this.getColumnStyleValue(e,"height"),this.setColumnStyle(t,"height",i+"px"))},e=this.htmlInfo.head.rowArr,i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var a=o[s],n=parseInt(a.colSpan,10),l=a.id,h=this.headerToBodyRelation[l],d=this.getColumnIndex(h);if(!isNaN(n)&&n>1)for(var c=0;c<n;c++)t.call(this,this.getColumnID(d+c));else t.call(this,h)}}catch(t){r.w.printStackTrace(t)}},I.prototype.removeAdaptiveGridBodyHeight=function(){try{for(var t in this.orgBodyHeightObj)this.setColumnStyle(t,"height",this.orgBodyHeightObj[t])}catch(t){r.w.printStackTrace(t)}},I.prototype.setAdaptiveGridHeaderHeight=function(){try{var t=this.getHeaderID(0),e=parseInt(this.getHeaderCellStyleValue(t,"padding-top"),10),i=parseInt(this.getHeaderCellStyleValue(t,"padding-bottom"),10);0===e&&null!=this.oldOptions.headerPaddingTop&&(e=parseInt(this.oldOptions.headerPaddingTop,10)),0===i&&null!=this.oldOptions.headerPaddingBottom&&(i=parseInt(this.oldOptions.headerPaddingBottom,10));for(var o=e+i,s=this.htmlInfo.head.rowArr,a=0;a<s.length;a++)for(var n=s[a],l=0;l<n.length;l++){var h=n[l],d=parseInt(h.colSpan,10),c=h.id,u=this.headerToBodyRelation[c],p=this.getColumnIndex(u),g=parseInt(this.getCellInfo(p).options.colSpan,10),m=0,f=0,b=this.headerInfoHash[c];if(b&&b.options&&"string"==typeof b.options.style)for(var y=b.options.style.split(";"),v=0;v<y.length;v++){if("height"==(C=y[v].split(":"))[0]){f=parseInt(C[1],10);break}}else f=parseInt(this.getHeaderCellStyleValue(c,"height"),10);if(null!=p)if(d>0){var w=d;for(v=p;v<p+d;v++)this.hiddenList[v]?w--:(m+=parseInt(this.getColumnStyleValue(v,"height"),10),m+=o);f!=(m-=o-(w-1))&&(null==this.orgHeaderHeightObj[c]&&(this.orgHeaderHeightObj[c]=f+"px"),w>0&&this.setHeaderStyle(c,"height",m+"px"))}else if(m=parseInt(this.getColumnStyleValue(p,"height"),10),g>1){m-=(o+1)*(g-1);var S=Math.round(m/g);for(v=l;v<l+g;v++){if(c=(h=n[v]).id,this.headerInfoHash[c])for(y=this.headerInfoHash[c].options.style.split(";"),v=0;v<y.length;v++){var C;if("height"==(C=y[v].split(":"))[0]){f=parseInt(C[1],10);break}}else f=parseInt(this.getHeaderCellStyleValue(c,"height"),10);v==l+g-1?(this.orgHeaderHeightObj[c]=f+"px",this.setHeaderStyle(c,"height",m+"px")):(this.orgHeaderHeightObj[c]=f+"px",this.setHeaderStyle(c,"height",S+"px"),m-=S)}}else f!=m&&(null==this.orgHeaderHeightObj[c]&&(this.orgHeaderHeightObj[c]=f+"px"),this.hiddenList[p]||this.setHeaderStyle(c,"height",m+"px"))}if(this.hasFooter){var _=this.htmlInfo.foot.rowArr;for(a=0;a<_.length;a++){var x=_[a];for(l=0;l<x.length;l++){var I=x[l],T=parseInt(I.colSpan),k=I.id,D=(p=l,m=0,parseInt(this.getFooterStyle(k,"height")));if(T>0){for(v=p;v<p+T;v++)m+=parseInt(this.getColumnStyleValue(v,"height")),m+=o;m-=o-(T-1)}else m=parseInt(this.getColumnStyleValue(p,"height"))
;D!=m&&(this.orgFooterHeightObj[k]=D+"px",this.setFooterStyle(k,"height",m+"px"))}}}}catch(t){r.w.printStackTrace(t)}},I.prototype.removeAdaptiveGridHeaderHeight=function(){try{for(var t in this.orgHeaderHeightObj)this.setHeaderStyle(t,"height",this.orgHeaderHeightObj[t]);for(var t in this.orgFooterHeightObj)this.setFooterStyle(t,"height",this.orgFooterHeightObj[t])}catch(t){r.w.printStackTrace(t)}},I.prototype.setAdaptiveGridSubtotalHeight=function(){try{var t=this.getHeaderID(0),e=parseInt(this.getHeaderCellStyleValue(t,"padding-top"))+parseInt(this.getHeaderCellStyleValue(t,"padding-bottom"));if(0==Object.keys(this.orgSubtotalHeightObj).length)for(var i=0;i<this.drawedSubtotal.length;i++)for(var o=0;o<this.drawedSubtotal[i].length;o++)for(var s=this.drawedSubtotal[i][o].childNodes,a=this.defaultColCnt;a<s.length;a++){var n=parseInt(s[a].getAttribute("colSpan")),l=s[a].getAttribute("id"),h=0,d=s[a].style.height;if(null!=n&&n>0){for(var c=a;c<a+n;c++)h+=parseInt(this.getColumnStyleValue(c-this.defaultColCnt,"height")),h+=e;h-=e-(n-1)}else h=d;d!=h&&(this.orgSubtotalHeightObj[l]=d,s[a].style.height=h+"px")}}catch(t){r.w.printStackTrace(t)}},I.prototype.removeAdaptiveGridSubtotalHeight=function(){try{for(var t in this.orgSubtotalHeightObj)for(var e=0;e<this.drawedSubtotal.length;e++)for(var i=0;i<this.drawedSubtotal[e].length;i++)for(var o=this.drawedSubtotal[e][i].childNodes,s=this.defaultColCnt;s<o.length;s++){o[s].getAttribute("id")==t&&(o[s].style.height=this.orgSubtotalHeightObj[t])}this.orgSubtotalHeightObj={}}catch(t){r.w.printStackTrace(t)}},I.prototype.setDrillDownDragDrop=function(t){try{this.drillDownDragDrop=a.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getDataListInfo=function(){try{if(this.successBinding){var t={};return t.id=this.options.dataList,t}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getInputType=function(t){try{return this.getCellInfo(t).options.inputType}catch(t){r.w.printStackTrace(t)}},I.prototype.getDataType=function(t){try{return this.getCellInfo(t).options.dataType||this._dataList.getCellInfo(t).options.dataType}catch(t){r.w.printStackTrace(t)}},I.prototype.getFakeExpressionArr=function(){try{for(var t=[],e=[],i=0;i<this.dataList.getRowCount();i++)(t=this._dataList.getRowData(i)).push(""),e=e.concat(t);return e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setUseFilterList=function(t){try{this.options.useFilterList=a.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setUseFilter=function(t,e){try{var i=t,o=this.headerInfoHash[i];if(null==o&&(i=this.bodyToHeaderRelation[i],null==(o=this.headerInfoHash[i])))return!1;var s=o.options.useFilter,n=a.D.getBoolean(e);if(s===n)return!1;o.options.useFilter=n;var l,h=this.getHeaderLayer(i);if(!0===s)null!=(l=document.getElementById(this.id+"_"+i+"_filter"))&&(l.style.display="none");else if(null!=(l=document.getElementById(this.id+"_"+i+"_filter")))l.style.display="";else{var d=this.headerObj[i],c=h.innerHTML;if(d&&(c=""),h.innerHTML="<table style='width:100%;height:100%;'><tr><td style='width:100%;'>"+c+"</td><td><input type='button' id='"+this.id+"_"+i+"_filter' class='w2trigger w2grid_customFilter_open' onclick='"+this.id+'.showCustomFilter("'+i+"\");'/></td></tr></table>",d)h.getElementsByTagName("td")[0].appendChild(d)}return!0}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getFixedRow=function(){var t=parseInt(this.options.fixedRow,10);return t=isNaN(t)?0:t},I.prototype.getLastFixedRow=function(){var t=parseInt(this.options.lastFixedRow,10);return t=isNaN(t)?0:t},I.prototype.isVirtualCursor=function(){try{if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum)if(this.getLastFocusedCell().focusedRowIndex>this.lastIndex&&0==this.getElementById(this.id+"_scrollY_div").scrollTop)return!0;return!1}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeCell=function(t){try{
if(null==t||null==t.rowIndex||null==t.colIndex)return void c.k.printLog("gridView mergeCell error : invalid argument ["+this.id+"]");null==t.rowSpan&&(t.rowSpan=1),null==t.colSpan&&(t.colSpan=1);var e=parseInt(t.rowIndex,10),i=parseInt(t.colIndex,10),o=parseInt(t.rowSpan,10),s=parseInt(t.colSpan,10),n=this.getRealRowIndex(e);o>1||s>1?(this.cellMergeInfo[e+"_"+i]={rowSpan:o,colSpan:s},this.cellMergeRealInfo[e+"_"+i]=n):null!=this.cellMergeInfo[e+"_"+i]&&(delete this.cellMergeInfo[e+"_"+i],delete this.cellMergeRealInfo[e+"_"+i]);for(var l=!(!this.isDrillDown||!this._dataList.options.depthColumn),h=l?e:n,d=this.dataList._getCellData(h,i,"3"),u=0;u<o;u++)for(var p=0;p<s;p++)if(0!==u||0!==p){var g={filteredRowIndex:e+u,colID:i+p,data:d,useRealRowIndex:l};this.dataList._setCellData(g),this.cellMergeInfo[e+u+"_"+(i+p)]&&delete this.cellMergeInfo[e+u+"_"+(i+p)]}this.dynamicMergeHTML(),this.options.oddEvenColorDisplay&&"native"===this.options.drawType&&a.D.setTimeout(this.redrawTable,{key:this.id+"_mergeCell",delay:100,caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeFocusedCell=function(){try{if(this.focusedCell.length>1){var t=this.focusedCell.length-1;this.mergeCell({rowIndex:this.focusedCell[0].focusedRowIndex,colIndex:this.focusedCell[0].focusedColIndex,rowSpan:this.focusedCell[t].focusedRowIndex-this.focusedCell[0].focusedRowIndex+1,colSpan:this.focusedCell[t].focusedColIndex-this.focusedCell[0].focusedColIndex+1})}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeSplitFocusedCell=function(){try{for(var t=0;t<this.focusedCell.length;t++)this.mergeCell({rowIndex:this.focusedCell[t].focusedRowIndex,colIndex:this.focusedCell[t].focusedColIndex,rowSpan:1,colSpan:1})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeClear=function(t){try{void 0!==t&&null!=t||(t={}),this.cellMergeInfo={},this.cellMergeRealInfo={},this.options.mergeCells="never",this.options.mergeCellsFixedCols="never",this.options.mergeCellsFixedRows="never",!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeNotifyRowChanged=function(t,e){try{var i="removeRow"===t?-1:1,o={};for(var s in this.cellMergeInfo){var a=s.split("_"),n=parseInt(a[0],10),l=parseInt(a[1],10),h=this.cellMergeInfo[s];if(n<=e&&e<n+h.rowSpan)if(-1===i){if(h.rowSpan--,h.rowSpan<=0||1==h.rowSpan&&h.colSpan<=1)continue}else if(n<e){var d=h.rowSpan-(e-n);if((d>1||1==d&&h.colSpan>1)&&(o[e+1+"_"+l]={rowSpan:d,colSpan:h.colSpan}),h.rowSpan-=d,h.rowSpan<=0||1==h.rowSpan&&h.colSpan<=1)continue}(n>e||n==e&&-1!==i)&&(n+=i),o[n+"_"+l]=h}this.cellMergeInfo=o}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeNotifyFilter=function(){try{if("never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols){var t={};for(var e in this.cellMergeRealInfo._hidden){var i=e.split("_"),o=parseInt(i[0],10),s=parseInt(i[1],10),a=this.getDisplayRowIndex(o);isNaN(a)||(t[a+"_"+s]=this.cellMergeRealInfo._hidden[e],delete this.cellMergeRealInfo._hidden[e],this.cellMergeRealInfo[a+"_"+s]=o)}for(var n in this.cellMergeInfo){var l=n.split("_"),h=(s=parseInt(l[1],10),this.cellMergeInfo[n]);o=this.cellMergeRealInfo[n],a=this.getDisplayRowIndex(o);isNaN(a)?(this.cellMergeRealInfo._hidden||(this.cellMergeRealInfo._hidden={}),this.cellMergeRealInfo._hidden[o+"_"+s]=h,delete this.cellMergeRealInfo[n]):(t[a+"_"+s]=h,delete this.cellMergeRealInfo[n],this.cellMergeRealInfo[a+"_"+s]=o)}this.cellMergeInfo=t}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeByFree=function(t,e,i,o){try{return this.mergeCell({rowIndex:t,colIndex:e,rowSpan:i-t+1,colSpan:o-e+1})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.unmergeByFree=function(t,e){try{return this.mergeCell({rowIndex:t,colIndex:e,rowSpan:1,colSpan:1})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeCells=function(t,e){try{this._mergeCells(t,e,{type:"mergeCells"})}catch(t){
r.w.printStackTrace(t,null,this)}},I.prototype.mergeByCol=function(t){try{this._mergeCells("bycol",t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeByRow=function(t){try{this._mergeCells("byrow",t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeByColRec=function(t){try{this._mergeCells("bycolrec",t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeByRowRec=function(t){try{this._mergeCells("byrowrec",t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeByRestricCol=function(t){try{this._mergeCells("byrestriccol",t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeByRestricRow=function(t){try{this._mergeCells("byrestricrow",t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeCells=function(t,e,i){try{var o=t.toLowerCase();switch(void 0!==i&&null!=i||(i={type:"mergeCells"}),this.options[i.type]=o,o){case"never":this.cellMergeInfo={},this.cellMergeRealInfo={},e&&!0===e.noDraw||this.dynamicMergeHTML();break;case"bycol":this._mergeByCol(e);break;case"byrow":this._mergeByRow(e);break;case"bycolrec":this._mergeByColRec(e);break;case"byrowrec":this._mergeByRowRec(e);break;case"byrestriccol":this._mergeByRestricCol(e);break;case"byrestricrow":this._mergeByRestricRow(e)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeRefresh=function(){try{if("never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols)return;var t={noDraw:!0};this.cellMergeInfo={},this.cellMergeRealInfo={},"never"!==this.options.mergeCells&&this.mergeCells(this.options.mergeCells,t),"never"!==this.options.mergeCellsFixedRows&&this.mergeCellsFixedRows(this.options.mergeCellsFixedRows,t),"never"!==this.options.mergeCellsFixedCols&&this.mergeCellsFixedCols(this.options.mergeCellsFixedCols,t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeByCol=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getRowCount(),i=this.getColumnCount(),o=this.options.fixedRow,s=this.options.fixedColumn,a=i-this.options.fixedRightColumn,n=e,l={},h=this.getSubtotalRowList({returnType:"object"});!0!==t.keepMerge&&!0!==t.fixedRows&&!0!==t.fixedCols&&(this.cellMergeInfo={},this.cellMergeRealInfo={});var d={};!0===t.keepMerge&&(d=this.getMergedCells()),!0===t.fixedRows&&(o=0,n=this.options.fixedRow,s=0,a=i);var c=!1;!0===t.fixedCols&&(0==this.options.fixedColumn?(s=i-this.options.fixedRightColumn,a=i):0==this.options.fixedRightColumn?(s=0,a=this.options.fixedColumn):(s=0,a=i,c=!0),!1===t.fixedRows?(o=this.options.fixedRow,n=e):(o=0,n=e));for(var u=s;u<a;u++){if(t.mergeCol){if(!1===t.mergeCol[u])continue}else if(!1===this.mergeColObj[u])continue;if(!(c&&u>=this.options.fixedColumn&&u<a-this.options.fixedRightColumn)&&!(this.htmlInfo.body.rowAttrArr.length>1&&1==this.colIndexInfo.body.colInfo.rowSpanArr[u]))for(var p=this.tdIdList[u],g=o;g<n;g++){var m=this.dataList._getCellData(g,p),f=1;if(!0===t.keepMerge&&(f=0),!0===t.upperColumn&&(l[g]=!0),t.mergeRow){if(!1===t.mergeRow[g])continue}else if(!1===this.mergeRowObj[g])continue;for(;f<n-g&&!this._isExcludeValue(m);){if(t.mergeRow){if(!1===t.mergeRow[g+f])break}else if(!1===this.mergeRowObj[g+f])break;if(g+f>n)break;if(m!=(0===f?m:this.dataList._getCellData(g+f,p)))break;if(!0===t.keepMerge&&!0===d[g+f+"_"+u])break;if(!0===t.upperColumn&&!0===l[g+f])break;if(!0===h[g+f])break;f++}f>1&&(this.cellMergeInfo[g+"_"+u]={rowSpan:f,colSpan:1},g=g+f-1)}}l=void 0,!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeByRow=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getRowCount(),i=this.getColumnCount(),o=this.options.fixedRow,s=this.options.fixedColumn,a=i-this.options.fixedRightColumn,n=e,l={};!0!==t.keepMerge&&!0!==t.fixedRows&&!0!==t.fixedCols&&(this.cellMergeInfo={},this.cellMergeRealInfo={});var h={};!0===t.keepMerge&&(h=this.getMergedCells()),!0===t.fixedRows&&(o=0,n=this.options.fixedRow,s=0,a=i);var d=!1
;!0===t.fixedCols&&(0==this.options.fixedColumn?(s=i-this.options.fixedRightColumn,a=i):0==this.options.fixedRightColumn?(s=0,a=this.options.fixedColumn):(s=0,a=i,d=!0),!1===t.fixedRows?(o=this.options.fixedRow,n=e):(o=0,n=e));for(var c=o;c<n;c++){if(t.mergeRow){if(!1===t.mergeRow[c])continue}else if(!1===this.mergeRowObj[c])continue;for(var u=s;u<a;u++)if(!(d&&u>=this.options.fixedColumn&&u<a-this.options.fixedRightColumn)){var p=this.dataList._getCellData(c,this.tdIdList[u]),g=1;if(!0===t.keepMerge&&(g=0),!0===t.upperRow&&(l[u]=!0),t.mergeCol){if(!1===t.mergeCol[u])continue}else if(!1===this.mergeColObj[u])continue;for(;g<a-u&&!this._isExcludeValue(p);){if(t.mergeCol){if(!1===t.mergeCol[u+g])break}else if(!1===this.mergeColObj[u+g])break;if(d){if(u+g>=this.options.fixedColumn&&u+g<a-this.options.fixedRightColumn)break}else if(u+g>a)break;if(p!=(0===g?p:this.dataList._getCellData(c,this.tdIdList[u+g])))break;if(!0===t.keepMerge&&!0===h[c+"_"+(u+g)])break;if(!0===t.upperRow&&!0===l[u+g])break;g++}g>1&&(this.cellMergeInfo[c+"_"+u]={rowSpan:1,colSpan:g},u=u+g-1)}}l=void 0,!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeByColRec=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t),i=o.x.extend({},t);e.noDraw=!0,i.keepMerge=!0,i.noDraw=!0,this._mergeByCol(e),this._mergeByRow(i),this._mergeAdjacentCell("col"),!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeByRowRec=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t),i=o.x.extend({},t);e.noDraw=!0,i.keepMerge=!0,i.noDraw=!0,this._mergeByRow(e),this._mergeByCol(i),this._mergeAdjacentCell("row"),!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeAdjacentCell=function(t){try{var e="row"===t?[0,1]:"col"===t?[1,0]:null;if(null==e)return;var i={},o={},s=this.getSubtotalRowList({returnType:"object"});for(var a in this.cellMergeInfo){var n=a.split("_"),l=parseInt(n[e[0]],10),h=parseInt(n[e[1]],10),d=0===e[0]?this.cellMergeInfo[a].colSpan:this.cellMergeInfo[a].rowSpan,c=0===e[0]?this.cellMergeInfo[a].rowSpan:this.cellMergeInfo[a].colSpan;null!=i[h+"_"+d]?(null==o[h+"_"+d]&&(o[h+"_"+d]=[i[h+"_"+d]]),o[h+"_"+d].push({row:l,rowSpan:c})):i[h+"_"+d]={row:l,rowSpan:c}}for(var a in o){var u=parseInt(a.split("_")[0]),p=0===e[0]?"rowSpan":"colSpan";o[a].sort((function(t,e){return t.row>e.row}));for(var g=o[a].length-1;g>=1;g--){var m=!0===s[o[a][g].row];if(o[a][g-1].row+o[a][g-1].rowSpan>=o[a][g].row&&!m)if((0===e[0]?this.dataList._getCellData(o[a][g-1].row,u):this.dataList.getCellData(u,o[a][g-1].row))===(0===e[0]?this.dataList._getCellData(o[a][g].row,u):this.dataList.getCellData(u,o[a][g].row))){o[a][g-1].rowSpan=o[a][g].row+o[a][g].rowSpan-o[a][g-1].row;var f=0===e[0]?o[a][g].row+"_"+u:u+"_"+o[a][g].row;delete this.cellMergeInfo[f];var b=0===e[0]?o[a][g-1].row+"_"+u:u+"_"+o[a][g-1].row;this.cellMergeInfo[b][p]=o[a][g-1].rowSpan}}}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeByRestricCol=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t);e.upperColumn=!0,this._mergeByCol(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._mergeByRestricRow=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t);e.upperRow=!0,this._mergeByRow(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeCellsFixedRows=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"never"!==this.options.mergeCellsFixedRows){var i=this.options.mergeCells;this.mergeClear(e),"never"!==i&&this.mergeCells(i,{noDraw:!0})}e.fixedRows=!0,e.fixedCols=!1,this._mergeCells(t,e,{type:"mergeCellsFixedRows"})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeCellsFixedCols=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"never"!==this.options.mergeCellsFixedCols){var i=this.options.mergeCells;this.mergeClear(e),"never"!==i&&this.mergeCells(i,{noDraw:!0})}e.fixedCols=!0,e.fixedRows=!1,
this._mergeCells(t,e,{type:"mergeCellsFixedCols"})}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeCol=function(t,e){try{t=this.getColumnIndex(t);isNaN(t)||(this.mergeColObj[t]=e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.mergeRow=function(t,e){try{this.mergeRowObj[t]=e}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getMerged=function(t,e){try{if(this.cellMergeInfo[t+"_"+e])return!0;for(var i in this.cellMergeInfo){var o=i.split("_"),s=this.cellMergeInfo[i],a=parseInt(o[0],10),n=parseInt(o[1],10);if(a<=t&&n<=e&&a+s.rowSpan-1>=t&&n+s.colSpan-1>=e)return!0}}catch(t){r.w.printStackTrace(t,null,this)}return!1},I.prototype.getMergedInfo=function(t,e){try{var i={merged:!1};if(this.cellMergeInfo[t+"_"+e])i.merged=!0,i.startRowIndex=t,i.startColIndex=e;else for(var o in this.cellMergeInfo){var s=o.split("_"),a=this.cellMergeInfo[o],n=parseInt(s[0],10),l=parseInt(s[1],10);n<=t&&l<=e&&n+a.rowSpan-1>=t&&l+a.colSpan-1>=e&&(i.merged=!0,i.startRowIndex=n,i.startColIndex=l,i.endRowIndex=n+a.rowSpan-1,i.endColIndex=l+a.colSpan-1)}}catch(t){r.w.printStackTrace(t,null,this)}return i},I.prototype.getMergeAll=function(t,e){try{for(var i,o=[],s=[],a=t.split(","),n=0;n<a.length;n++)o[n]=parseInt(a[n],10);for(var l in!0===e&&this.hasSubtotal&&(i=this.getSubtotalRowList().sort((function(t,e){return t-e}))),this.cellMergeInfo){var h=l.split("_"),d=this.cellMergeInfo[l],c=parseInt(h[0],10),u=parseInt(h[1],10),p=d.rowSpan,g=d.colSpan,m=u+g-1,f=0,b=0,y=0,v=0;if(!0===e&&this.hasSubtotal){for(var w=0;w<i.length&&c>=i[w];w++)v++;c+=v}if(""!=t){o=o.sort();for(n=0;n<o.length;n++)u>(f=o[n])?y++:u<=f&&f<=m&&(u==f&&1==g?g=-1:b++);g-=b,u-=y}-1!=g&&(g>1||p>1)&&s.push({x:u,y:c,r:p,c:g})}return JSON.stringify(s)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getMergedCells=function(){try{var t={};for(var e in this.cellMergeInfo){var i=e.split("_"),o=this.cellMergeInfo[e],s=parseInt(i[0],10),a=parseInt(i[1],10),n=o.rowSpan||1,l=o.colSpan||1;if(l>1||n>1)for(var h=0;h<n;h++)for(var d=0;d<l;d++)t[s+h+"_"+(a+d)]=!0}return t}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._isExcludeValue=function(t){try{if(this.options.mergeExcludeValue)for(var e=this.options.mergeExcludeValue.split(","),i=0;i<e.length;i++){if(t.constructor==Number&&(t+=""),e[i]==t)return!0;if("$blank"==e[i]&&""===t)return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.refreshGrid=function(t){try{var e=null,i=t.op;this.hiddenRowObj.length>0&&"setInstanceValue"!=i&&(e=JSON.stringify(this.hiddenRowObj),this.clearRowVisible());var o,s,a=t.xpath;if("setInstanceValue"==i){o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.options.repeatNode,null,this.scope_id);var n,l=(p=a.split("/"))[p.length-1],h=this.getColumnIndex(l);if(h>=0){n=this.getCellInfo(l),p.pop();var d=WebSquare.ModelUtil.findInstanceNode(p.join("/"),null,this.scope_id);s=this.getInstanceIndex(o,d);var c=this._dataList.getFilteredRowIndex(s);"radio"==n.options.inputType&&t.value+""==n.options.trueValue&&n.resetOthers(c,!0),c>=0?this._dataList.setCellData(c,h,t.value):this._dataList._setData(s,h,t.value)}}else if("setInstanceNode"==i){if(!(f=this.options.ref==t.replacexpath&&"replace"==t.type?this.xmlData2ArrData(t.replaceNode,!0):this.xmlData2ArrData(t.node,!0)).length)return;this.insertRowByInstance=!0,o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.repeatNodeTagName[0],null,this.scope_id),"append"==t.type?this.insertRow(null,{insertData:f}):"insertBeforeSibling"==t.type?(s=this.getInstanceIndex(o,t.node),this.insertRow(s,{insertData:f})):"replace"==t.type&&this._dataList.setData(f),this.insertRowByInstance=!1}else if("setInstanceChildNodes"==i){if(this.options.ref==t.replacexpath&&"replace"==t.type)f=this.xmlData2ArrData(t.replaceNode,!0);else t.baseNode&&t.baseNode!=this.options.baseNode&&(m=t.baseNode),f=this.xmlData2ArrData(t.node,!0,{baseNode:m});if(!f.length&&"append"==t.type)return;var u=this.getTotalCol()
;if(this.insertRowByInstance=!0,o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.repeatNodeTagName[0],null,this.scope_id),"append"==t.type)for(;f.length>0;)b=f.splice(0,u),this.insertRow(null,{insertData:b});else"replace"==t.type&&this._dataList.setData(f);this.insertRowByInstance=!1}else if("setInstanceLastNodeChildNodes"==i||"copyLastNodeChildrenNodes"==i){if(!(f=this.xmlData2ArrData(t.node,!0,{repeatNode:t.repeatNode,isRepeatNode:!0})).length)return;this.insertRowByInstance=!0,"replace"!=t.type&&"replaceAll"!=t.type&&"append"!=t.type||this.setRowData(parseInt(t.changeIndex)-1,f,!0),this.insertRowByInstance=!1}else if("removeInstanceNode"==i)this.removeRowByInstance=!0,s=t.deleteIndex,this.removeRow(s),this.removeRowByInstance=!1;else if("removeInstanceNodeAll"==i)this.removeRowByInstance=!0,this.dataList.removeAll(),this.removeRowByInstance=!1;else if("copyChildrenNodes"==i){var p,g,m;t.copiedXPath&&(g=(p=t.copiedXPath.split("/"))[p.length-1]),t.baseNode&&g!=this.options.baseNode&&(m=g);var f=this.xmlData2ArrData(t.node,!0,{baseNode:m});if("replaceAll"==t.type)this.setData(f);else if("append"==t.type){var b;u=this.getTotalCol();for(this.insertRowByInstance=!0;f.length>0;)b=f.splice(0,u),this.insertRow(null,{insertData:b});this.insertRowByInstance=!1}}e&&"setInstanceValue"!=i&&(this.hiddenRowObj=JSON.parse(e),this._refreshRowVisible({lastIndex:this.lastIndex,noDraw:!0}),this.setScrollYHeight(),this._mergeRefresh(),this.applyStyleOptions(this.lastIndex))}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getInstanceIndex=function(t,e){try{if(!Array.prototype.indexOf||a.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8){for(var i=t.length;i--;)if(t[i]===e)return i;return}return t.indexOf(e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._getArrayIndexOf=function(t,e){try{if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]==e)return i;return}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setRef=function(t){try{if(t&&t.ref){this.options.ref=t.ref,t.baseNode&&(this.options.baseNode=t.baseNode),t.repeatNode&&(this.options.repeatNode=t.repeatNode);var e=null==t.aliasDataCollection?this.scope_id:t.aliasDataCollection,i=WebSquare.ModelUtil.findInstanceNode(this.options.ref,null,e);this.setXML(i,null,{ref:this.options.ref,aliasDataCollection:e})}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._setRef=function(t,e){try{this.filteredRepeatNode=!1,this.repeatNodeChildTagName=[],this.repeatNodeTagName=this.options.repeatNode.split("/"),this.filteredRepeatNodeTagName=[];this.options.ref;for(var i=0;i<this.repeatNodeTagName.length;i++){var o=this.repeatNodeTagName[i];i==this.repeatNodeTagName.length-1&&o.indexOf("[")>=0&&(o.indexOf("[@")>=0||(this.repeatNodeTagNameFilter=!0,o=o.split("[")[0])),1==this.repeatNodeTagNameFilter?this.filteredRepeatNodeTagName.push(o):this.filteredRepeatNodeTagName.push(this.repeatNodeTagName[i]),i!=this.repeatNodeTagName.length-1&&"/"+this.repeatNodeTagName[i]}for(var s=0;s<WebSquare.WebSquaredoc.instanceRefElement.length;s++){var a=WebSquare.WebSquaredoc.instanceRefElement[s].id;try{a==this.id&&WebSquare.WebSquaredoc.instanceRefElement.splice(s,1)}catch(t){}}var n=this.options.aliasDataCollection?this.options.aliasDataCollection:this.scope_id;for(var l in WebSquare.WebSquaredoc.instanceRefElement.push(new WebSquare.ModelUtil.createInstanceRefElement(this.options.ref,this.id,this.options.baseNode,this.repeatNodeTagName,this.cellIdList,n)),this.cellInfoHash)this.repeatNodeChildTagName.push(l)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setImageSrc=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if(!e||"textImage"!=o)return;i.options.imageSrc=e,this.refreshColumn(t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setSyncScroll=function(t,e){try{this.options.syncScroll=t,null!=e&&(this.options.syncScrollId=e)}catch(t){r.w.printStackTrace(t,null,this)}},
I.prototype.resetExpressionFunc=function(){try{if(this.useExpression)for(var t=this.getTotalCol(),e=0;e<t;e++){var i=this.getCellInfo(e);if(i&&i.options&&"expression"==i.options.inputType)for(var o=this.drawedRowLength,s=0;s<o;s++)i.options.expressionFunc&&i.options.expressionFunc[s]&&i.options.expressionFunc[s].changeCount&&(i.options.expressionFunc[s]={})}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellDataType=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e),a=s.id;if(0!=s.internal||"custom"!=s.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[n]?s.cellManagerHashByRowIndex[n]:s,!0;var l=s.options.inputType;if("text"!=l&&"textarea"!=l&&"input"!=l&&"secret"!=l)return $l("cell의 inputType이 올바르지 않습니다."),!1;var h=this.getInput(s);h.setValue(this._dataList.getCellData(o,a));var d=h.getValue();h.setDataType(i),s.options.dataType="float";var c=h.formatter.unformat(d),u=h.validator.validateString(c);h.setValueNM(u),d!==u&&this._dataList.setCellData(o,a,u)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellAllowChar=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e),a=s.id;if(0!=s.internal||"custom"!=s.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[n]?s.cellManagerHashByRowIndex[n]:s,!0;var l=s.options.inputType;if("text"!=l&&"input"!=l&&"textImage"!=l&&"secret"!=l)return $l("cell의 inputType이 올바르지 않습니다."),!1;var h=this.getInput(s);if(h&&h.options&&("input"===h.options.pluginName||"textarea"===h.options.pluginName)){h.setValue(this._dataList.getCellData(o,a)),h.setAllowChar(i);var d=h.getValue();this._dataList.setCellData(o,a,d)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellDisplayFormat=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if(0!=s.internal||"custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s,!0;var n=s.options.inputType;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("cell의 inputType이 올바르지 않습니다."),!1;if(s.options.displayFormat=i,s.initFormatter(),s.options.embeddedInput){var l=this.data_td_list[e+(o-this.rowIndex)*this.oneRowDataLength];if(l){var h=this.getInput(s,l);h&&"function"==typeof h.setDisplayFormat&&h.setDisplayFormat(i)}}this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellDisplayFormatter=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if(0!=s.internal||"custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s,!0;var n=s.options.inputType;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("cell의 inputType이 올바르지 않습니다."),!1;s.options.displayFormatter=i,s.initFormatter(),this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellMaxLength=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e),a=s.id;if(0!=s.internal||"custom"!=s.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[n]?s.cellManagerHashByRowIndex[n]:s,!0;var l=s.options.inputType;if("text"!=l&&"textarea"!=l&&"input"!=l&&"textImage"!=l&&"secret"!=l)return $l("cell의 inputType이 올바르지 않습니다."),!1;var h=this.getInput(s);h.setValue(this._dataList.getCellData(o,a)),"float"===s.options.dataType?s.setFloatMaxLength(i.toString()):s.setMaxLength(i);var d=h.getValue();this._dataList.setCellData(o,a,d)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellCustomFormatter=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if(0!=s.internal||"custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s,!0;var n=s.options.inputType
;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("cell의 inputType이 올바르지 않습니다."),!1;s.options.customFormatter=i,s.initFormatter(),this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellDisableEdit=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if("custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);if("autoComplete"!=(s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s).options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;s.options.disableEdit=i,s.autoComplete&&(s.autoComplete.options.disableEdit=i),this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setCellInputType=function(t,e,i){try{if(i&&i.inputType){e=this.getColumnID(e);if(this._linkedDataList){var o=this._linkedDataList.filteredRowIndexArr[t];"number"!=typeof(t=this._dataList.getFilteredRowIndex(o))&&(t=o)}var s={};for(var a in i)s[a]=i[a];this._setCellInputType(t,e,null,s)}}catch(t){r.w.printStackTrace(t)}},I.prototype._setCellInputType=function(t,e,i,o){try{null==i&&(i=""),null==this.editedCell||this.getCellOption(t,e,"embeddedInput")||this.editedCell.handleCancelEdit();var s=this._dataList.getTotalRow();this.groupbyStatus&&this.groupbyStatus.grouped&&(s=this._dataList.filteredRowIndexArr.length);var a,n=this._dataList.getTotalCol(),l=!0;a=this.options&&"grid"===this.options.pluginName&&this.isDrillDown&&this.options.drilldownRealRowIndex||!0===o.useRealRowIndex?t:this.dataList.getRealRowIndex(t);var h=this.getDisplayRowIndex(a);(isNaN(h)||h<0)&&(l=!1);var d=t,c=(e=this.getColumnID(e),this.getColumnIndex(e)),u=this._dataList.getColumnIndex(e);if(t>=0&&t<s&&u>=0&&u<n){var p=this.cellInfoHash[this.tdIdList[c]];if("custom"==p.options.inputType&&!p.options.embeddedInput){var g;g=!0===o.useRealRowIndex?h-(this.rowIndex>0?this.rowIndex:0):t-(this.rowIndex>0?this.rowIndex:0);var m,f=this.data_td_list[c+g*this.oneRowDataLength];if(f&&l)!1===(m=p.getCellManager({element:p.element,rowIndex:d,realRowIndex:a,options:o,dynamicInputType:!0}))?f.innerHTML=this.dataTagOpen+o.value+this.dataTagClose:(p.clearStyle(m,f),null==o.value||!0===m.existGridViewItemsetNode?i=this.dataList._getCellData(d,e):(i=o.value,this.dataList.setCellData(d,e,i,null,!0,!0)),m.setInnerHTML(f,i,d,c));else(m=p.getCellManager({element:p.element,rowIndex:d,realRowIndex:a,options:o,dynamicInputType:!0}))&&(null!=m.customValue?(i=m.customValue,this.dataList.setCellData(d,e,i,null,!0,!0)):null==o.value||!0===m.existGridViewItemsetNode?i=this.dataList._getCellData(d,e):(i=o.value,this.dataList.setCellData(d,e,i,null,!0,!0)))}}}catch(t){r.w.printStackTrace(t)}},I.prototype.setDataDragDrop=function(t){try{if("boolean"==typeof t&&(this.options.dataDragDrop=t,t))if(1==this.isMobile){if(this.isHammerEnabled()){var e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));var i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.getElementById(o.id+"_dataLayer")),o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){o.handleDragEvent(t)}))),o._bindPressEvent=!0}))}}else!1===this._bindDrag&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent)),this._bindDrag=!0)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getDataDragDrop=function(){try{return this.options.dataDragDrop}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._fireOnviewchange=function(t,e,i,o){try{var s,a=this.getCellInfo(t),n=a.editRowIndex,l=this._dataList.getColumnIndex(a.id),h=this.getColumnIndex(a.id),c=this.getRealRowIndex(n),u=this._dataList.dataArr[c*this._dataList.getColumnCount()+l],p=a.comp&&a.comp.selectedIndex;if(o&&o.beforeFunc&&o.beforeFunc.apply(o.beforeFunc,o.beforeFuncArgs),e&&(s=a[e].apply(a,i)),o&&o.checkFunc&&!1===o.checkFunc(s))return!1
;var g=this._dataList.dataArr[c*this._dataList.getColumnCount()+l];if(0===u&&(u="0"),0===g&&(g="0"),u!=g){var m={oldValue:u,newValue:g,rowIndex:n,colIndex:h,colId:this.getColumnID(h)};isNaN(p)||(m.oldSelectedIndex=p,m.newSelectedIndex=a.comp&&a.comp.selectedIndex),d.B.fireEvent(this,"onviewchange",m)}return!0}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._refreshInstance=function(t,e){try{if(!this.options.ref)return;e||WebSquare.ModelUtil.removeInstanceNodes({xpath:this.options.ref+"/"+this.repeatNodeTagName[0],scopeId:this.scope_id,gridNoRefresh:!0}),t||(t=this._dataList.dataArr);var i,o=t.length/this.oneRowDataLength,s=[],a=this.repeatNodeTagName[0],n=WebSquare.xml.parse("<"+a+"></"+a+">").documentElement,l=this._dataList.getBroadcast();this._dataList.setBroadcast(!1);for(var h=0;h<o;h++)if(this.repeatNodeChildTagName&&this.repeatNodeChildTagName.length>0){if(0==h){var d,c=n,u=a;this.repeatNodeTagName.length>1&&(u=this.repeatNodeTagName.slice(1,this.repeatNodeTagName.length).join("/"));for(var p=1;p<this.repeatNodeTagName.length;p++)c=WebSquare.xml.createNode(c,this.repeatNodeTagName[p],!1);i=this.repeatNodeTagName.length>1?WebSquare.xml.findNode(n,u):n;for(p=0;p<this.repeatNodeChildTagName.length;p++){if(d=WebSquare.xml.createNode(i,this.repeatNodeChildTagName[p],!1),s.push(d),m=void 0===(m=t[h*this.oneRowDataLength+p])||null==m?"":m+"",this.options.valueNode.length)d.setAttribute(this.options.valueNode,m);else if(null==d.firstChild){var g=d.ownerDocument.createTextNode(m);WebSquare.xml.appendChild(d,g)}else d.firstChild.nodeValue=m}}else for(p=0;p<this.repeatNodeChildTagName.length;p++){var m;if(d=s[p],m=void 0===(m=t[h*this.oneRowDataLength+p])||null==m?"":m+"",this.options.valueNode.length)d.setAttribute(this.options.valueNode,m);else if(null==d.firstChild){g=d.ownerDocument.createTextNode(m);WebSquare.xml.appendChild(d,g)}else d.firstChild.nodeValue=m}WebSquare.ModelUtil.setInstanceNode(n,this.options.ref,null,"append",!1,this.scope_id)}this._dataList.setBroadcast(l)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.isHammerEnabled=function(){try{return(this.isMobile||a.D.isTouchDevice())&&this.options.hammerEnabled}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.endEdit=function(){try{this._endEdit()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getColumnIdListMultiRow=function(){try{for(var t=[],e=this.colIndexes.bodyColInfo.colIndexMatch,i={},o=this.defaultColCnt;o<e.length;o++)for(var s=e[o],a=0;a<s.length;a++){null==t[a]&&(t[a]=[]);var n=this.getColumnID(s[a]-this.defaultColCnt);null==i[n]&&(t[a].push(n),i[n]=!0)}return t}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getLocationRowCol=function(t,e){try{var i,o,s=this.struct.body.rowAttrArr.length,a=this.getColumnOrder(),n=[];for(var l in a)n[a[l]]=parseInt(l,10);var h,d=this.cellMergeInfo;for(var c in d){var u=c.split("_"),p=parseInt(u[0]),g=parseInt(u[1]),m=d[c].rowSpan,f=d[c].colSpan;if(t>=p&&t<p+m&&e>=g&&e<g+f){i=m,o=f;break}}for(var b=0,y=e;y>=0;)h=y,y-=this.struct.body.rowArr[b].length,b++;return b--,o=o||parseInt(this.struct.body.rowArr[b][h].colSpan||1),i=i||parseInt(this.struct.body.rowArr[b][h].rowSpan||1),{rowIndex:t*s+b,colIndex:h=n[h=this.struct.body.rowArr[b][h]["@col"]],rowSize:i,colSize:o}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.getOriginalRowCol=function(t,e){try{for(var i=this.htmlInfo.body.rowAttrArr.length,o=(this.getColumnOrder(),!1),s=!0,a=t%i,n=1,l=1,h=[],d=[],c=0;c<i;c++){for(var u=[],p=0;p<this.htmlInfo.body.rowArr[c].length;p++)u.push({colSpan:parseInt(this.htmlInfo.body.rowArr[c][p].colSpan||1),rowSpan:parseInt(this.htmlInfo.body.rowArr[c][p].rowSpan||1),oriColIndex:parseInt(this.bodyIdColIndexMap[this.htmlInfo.body.rowArr[c][p].col_id])});h.push(u),d.push([])}for(c=0;c<i;c++){var g=0;for(p=0;p<h[c].length;p++){if(h[c][p].rowSpan>1)for(var m=1;m<h[c][p].rowSpan;m++)c+m<d.length&&d[c+m].push({oriRowAttrNum:c,rowIndex:c+m,oriColIndex:h[c][p].oriColIndex,colIndex:g,rowSpan:1,
colSpan:h[c][p].colSpan,oriRowSpan:h[c][p].rowSpan});for(var f=0;f<d[c].length;f++)g==d[c][f].colIndex&&(h[c].splice(p,0,d[c][f]),d[c].splice(f,1));g+=h[c][p].colSpan}for(f=0;f<d[c].length;f++)g==d[c][f].colIndex&&(h[c].splice(p,0,d[c][f]),d[c].splice(f,1))}var b,y=h[a],v=0;for(p=0;p<y.length;p++){var w=parseInt(y[p].colSpan);if((v+=w)>e){e!==v-w&&(e=v-w,o=!0,s=!1),l=w,b=p;break}}n=y[b].rowSpan,void 0!==y[b].oriRowAttrNum&&(a+=y[b].oriRowAttrNum-y[b].rowIndex,n=y[b].oriRowSpan,o=!0),b=y[b].oriColIndex;var S=Math.floor(t/i),C=this.cellMergeInfo;for(var _ in C){var x=_.split("_"),I=(u=parseInt(x[0]),parseInt(x[1])),T=C[_].rowSpan,k=C[_].colSpan;if(S>=u&&S<u+T&&b>=I&&b<I+k){if(S==u&&b==I){n=T,l=k;break}b!=I&&(s=!1),S=u,b=I,n=T,l=k,o=!0;break}}return{rowIndex:S,colIndex:b,rowSize:n,colSize:l,noLeftTop:o,leftCell:s}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setImeMode=function(t,e){try{var i=this.getCellInfo(t);"text"!=i.options.inputType&&"textImage"!=i.options.inputType&&"textArea"!=i.options.inputType&&"drilldown"!=i.options.inputType||(i.options.imeMode=e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._isGridViewItemTable=function(){try{return!(!this.parentControl||!this.parentControl.options||"gridItemTable"!==this.parentControl.options.pluginName&&"gridViewItemTable"!==this.parentControl.options.pluginName)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.searchData=function(t){try{void 0!==t&&null!=t||(t={}),this.clearSearchData({noRefresh:!0});var e=t.column;e=e?e.split(","):this.tdIdList.slice(0);for(var i=this.getRowCount(),o=[],s=[],a=0;a<i;a++){for(var n=!1,l=this.__getGroupbyGroupedRowIndex(a),h=this.getRealRowIndex(l),d=0;d<e.length;d++){var c=this.getColumnIndex(e[d]);this.getCellDisplayData(a,c).indexOf(t.data)>=0&&(n=!0,s.unshift([h,c]))}n&&o.push(h)}if(this.groupbyStatus.grouped){var u={};for(a=0;a<o.length;a++)u[o[a]+""]=!0;this.groupbyStatus.groupbyRowIndexArr=o.slice(0);var p=this.groupbyStatus.groupedRowIndexArr;this._beforeSearch={groupbyRowIndexArr:o.slice(0),groupedRowIndexArr:p.slice(0)};var g=[];for(a=0;a<p.length;a++)if("object"==typeof p[a]){if(0===p[a].depth&&g.length>0&&"object"==typeof g[g.length-1])for(;g.length>0&&"object"==typeof g[g.length-1];)g.pop();g.push(p[a])}else!0===u[p[a]+""]&&g.push(p[a]);for(;g.length>0&&"object"==typeof g[g.length-1];)g.pop();this.groupbyStatus.groupedRowIndexArr=g}var m={type:"direct",key:o,filterId:this.id+"_searchData"};this.dataList.setFilter(m);for(a=0;a<s.length;a++){var f=this.getDisplayRowIndex(s[a][0]),b=this.__getGroupbyGroupedRowIndex(f);this.setFocusedCell(b,s[a][1],!1,{ctrled:!0})}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.clearSearchData=function(t){try{if(!this.options.groupbyZoneSearch||!this.groupbyZone_searchinput)return;void 0!==t&&null!=t||(t={});var e={filterId:this.id+"_searchData",noRefresh:t.noRefresh};this.groupbyStatus.grouped&&this._beforeSearch&&(this.groupbyStatus.groupbyRowIndexArr=this._beforeSearch.groupbyRowIndexArr.slice(0),this.groupbyStatus.groupedRowIndexArr=this._beforeSearch.groupedRowIndexArr.slice(0)),this._beforeSearch=null,this.dataList.removeFilter(e),this.removeFocusedCell(),!0===t.clearValue&&this.groupbyZone_searchinput.setValue("")}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._groupbyZoneSearch=function(){try{if(!this.options.groupbyZoneSearch||!this.groupbyZone_searchinput)return;var t=this.groupbyZone_searchinput.getValue();if(""===t)this.clearSearchData();else{var e={};e.data=t,this.searchData(e)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setBlockSelect=function(t,e){try{if(!0!==e&&!1!==e)return;var i=this.getCellInfo(t);if(i&&i.options.blockSelect!==e){var o=this.getColumnIndex(t);i.options.blockSelect=e;for(var s=0;s<this.focusedCell.length;s++)if(this.focusedCell[s].focusedColIndex===o){var a=this.focusedCell[s];this._applyFocusedCellOut(a)}}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.setVisibleRowNum=function(t){try{
if(t=parseInt(t,10),isNaN(t)||t<=0)return!1;this.options.initFixedHeightByRowNum>-1&&(this.options.initFixedHeightByRowNum=t),this.options.visibleRowNum=t,this._dynamicVisibleRowNum=t;var e=this._getVisibleRowNumHeight(!0);this.setTrRowTable(),this.setSize(null,e)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype.enableAllDate=function(t){try{var e=this.getCellInfo(t);if("calendar"!=e.options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;var i=this.getInput(e);e.options.disableBeforeDate="",e.options.disableAfterDate="",i&&i.enableAllDate()}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._setRedrawTextAreaColumn=function(t){try{for(var e=!1,i=0;i<this.getColumnCount();i++){var o=this.getCellInfo(i);"textarea"==o.options.inputType&&"all"==o.options.displayType&&(e=!0,t||this.redrawColumn(i))}if(t&&e&&"all"===this.options.visibleRowNum&&"native"!==this.options.drawType&&this.getRowCount()>0){var s=document.getElementById(this.id+"_body_table").offsetHeight;this.render.offsetHeight!=s&&this.setSize(null,s)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._setFirsCellFocus=function(t){try{for(var e=0,i=this.getRowCount()-1,o=this.getLeftMostFocusableColIndex(e);e<i&&null==o;)e+=1,o=this.getRightMostFocusableColIndex(e);var s=this.getCellInfo(o);if("button"===s.options.inputType||"radio"===s.options.inputType||"checkbox"===s.options.inputType||"user"===s.options.inputType){var a=0,n=this.getCheckedIndex(s.colID)[0];n>0&&(a=n),this._setFocusedCell(a,o,!1,{tabDirection:"right"}),WebSquare.event.stopEvent(t)}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._isNumberType=function(t){try{return!(!t||"float"!=t&&"number"!=t&&"bigDecimal"!=t&&"euro"!=t&&"tenge"!=t&&"rupee"!=t)}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._getOperator=function(t){try{var e,i;return 0==t.indexOf(">=")?(i=t.replace(">=",""),e=">="):0==t.indexOf(">")?(i=t.replace(">",""),e=">"):0==t.indexOf("<=")?(i=t.replace("<=",""),e="<="):0==t.indexOf("<")?(i=t.replace("<",""),e="<"):0==t.indexOf("==")?(i=t.replace("==",""),e="=="):0==t.indexOf("!=")?(i=t.replace("!=",""),e="!="):t&&(e="==",i=t),{operator:e,value:i}}catch(t){r.w.printStackTrace(t,null,this)}},I.prototype._isMatched=function(t,e,i,o){try{var s=!0,a=t,n=e;return this._isNumberType(o)&&(a=parseFloat(a),n=parseFloat(n),isNaN(Number(n))&&(n=0)),">"==i?n>a||(s=!1):">="==i?n>=a||(s=!1):"<"==i?n<a||(s=!1):"<="==i?n<=a||(s=!1):"!="==i?n==a&&(s=!1):"=="==i&&n!=a&&(s=!1),s}catch(t){r.w.printStackTrace(t,null,this)}};var T=function(){};T.prototype.getColumnReadOnly=function(t){var e=this.getCellInfo(t);return""!=e.options.readOnly?a.D.getBoolean(e.options.readOnly):""},T.prototype.setColumnReadOnly=function(t,e){try{var i=this.getCellInfo(t);""!=e&&(e=a.D.getBoolean(e));var o=i.options.readOnly;if(i.options.readOnly=e,o!==e){if(null!=this.editedCell){var s=a.D.getDataPrefix("tdindex"),n=parseInt(this.editedCell.editTd.getAttribute(s))%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.rollbackCommitFlag=n==t}else this.rollbackCommitFlag=!1;this.drawColumnData(t),this.applyStyleOptions(this.lastIndex)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getRowReadOnly=function(t,e){try{var i=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)||!0===e?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),o=this.rowReadOnlyArr[i];return 1!=o&&0!=o?"":o}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setRowReadOnly=function(t,e,i){try{var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),s=o||!0===i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));""!=e&&(e=a.D.getBoolean(e));var n=o||!0===i?this.getDisplayRowIndex(s):this._getGroupbyGroupedRowIndex(t),l=this.rowReadOnlyArr[s];this.rowReadOnlyArr[s]=e,l!==e&&(null!=this.editedCell&&this.editedCell.editRowIndex==s?this.rollbackCommitFlag=!0:this.rollbackCommitFlag=!1,n>=0&&(this.drawRowData(n-this.rowIndex,n,!0),
this.applyRowStyleOptions(n)))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCellReadOnly=function(t,e,i){try{e=this.getColumnIndex(e);var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)||!0===i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),s=this.cellReadOnlyArr[o*this.oneRowDataLength+e];return 1!=s&&0!=s?"":s}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellReadOnly=function(t,e,i){try{""!=i&&(i=a.D.getBoolean(i));e=this.getColumnIndex(e);var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),s=o?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),n=o?this.getDisplayRowIndex(s):this._getGroupbyGroupedRowIndex(t),l=this.cellReadOnlyArr[s*this.oneRowDataLength+e];if(this.cellReadOnlyArr[s*this.oneRowDataLength+e]=i,l!==i){var h=this.rollbackCommitFlag;if(null!=this.editedCell&&this.editedCell.editRowIndex==s){var d=a.D.getDataPrefix("tdindex"),c=parseInt(this.editedCell.editTd.getAttribute(d))%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.rollbackCommitFlag=c==e}else this.rollbackCommitFlag=!1;n>=0&&(this.notifyCellChanged(n,e),this.rollbackCommitFlag=h,this.applyCellStyleOptions(n,e))}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getColumnDisabled=function(t){var e=this.getCellInfo(t);return a.D.getBoolean(e.options.disabled)},T.prototype.setColumnDisabled=function(t,e){try{e=a.D.getBoolean(e);var i=this.getCellInfo(t),o=i.options.disabled;i.options.disabled=e,o!==e&&(this.drawColumnData(t),this.applyColumnStyleOptions(t))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getRowDisabled=function(t){try{var e=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));return a.D.getBoolean(this.rowDisabledArr[e])}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setRowDisabled=function(t,e){try{e=a.D.getBoolean(e);var i=!(!this.isDrillDown||!this._dataList.options.depthColumn),o=i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),s=i?this.getDisplayRowIndex(o):this._getGroupbyGroupedRowIndex(t),n=this.rowDisabledArr[o];this.rowDisabledArr[o]=e,n!==e&&s>=0&&(this.drawRowData(s-this.rowIndex,s,!0),this.applyRowStyleOptions(s))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCellDisabled=function(t,e,i){try{e=this.getColumnIndex(e);var o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));i&&(o=t);var s=this.cellDisabledArr[o*this.oneRowDataLength+e];return 1!=s&&0!=s?"":s}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellDisabled=function(t,e,i,o){try{i=a.D.getBoolean(i);e=this.getColumnIndex(e);var s=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=s?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),l=s?this.getDisplayRowIndex(n):this._getGroupbyGroupedRowIndex(t);o&&(n=t,l=this.getDisplayRowIndex(t));var h=this.cellDisabledArr[n*this.oneRowDataLength+e];this.cellDisabledArr[n*this.oneRowDataLength+e]=i,h!==i&&l>=0&&(this.notifyCellChanged(l,e),this.applyCellStyleOptions(l,e))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setTDStyle=function(t,e,i,o,s){""!=this.options.readOnlyBackgroundColor&&this.___getEditReadOnly(e,i)&&(s="background-color:"+this.options.readOnlyBackgroundColor+";"+s),this._getEditDisabled(e,i)?(t.disabled=!0,""!=this.options.disabledBackgroundColor&&(s+=";background-color:"+this.options.disabledBackgroundColor),""!=this.options.disabledFontColor&&(s+=";color:"+this.options.disabledFontColor)):t.disabled=!1,t.style.cssText=o+";"+s},T.prototype.setStyleAll=function(t){try{var e=t.type,i=e.charAt(0).toUpperCase()+e.slice(1),o=t.target||"";"all"!==o&&"default"!==e&&"init"!==e||(o=""),"cell"!==e&&"disabledCell"!==e||(o="");var s=o?o.charAt(0).toUpperCase()+o.slice(1):"",a=t.styleName,n=t.styleValue,l=t.noRefresh,h=t.rowIndex,d=t.useRealRowIndex
;d||(h=this._getGroupbyGroupedRowIndex(h));var u,p=t.colIndex;if("column"===e||"cell"===e||"default"===e||"init"===e){if(p=this.getColumnIndex(p),!this.getColumnID(p)&&!this.successBinding)return;if(!this.getColumnID(p)&&!this._dataList.getColumnID(p))return void c.k.printLog("[Warning] Invalid colIndex("+p+").["+this.id+"] set"+i+"Style"+s)}var g="ValueObj";"column"===e||"adaptiveColumn"===e||"default"===e||"init"===e?(u=p,i="Column"):"disabledCell"===e?(u=h+"_"+p,i="Cell",g="Obj"):null==(u=null==p?this["get"+i+"Style"+s+"ClassName"](h,d):this["get"+i+"Style"+s+"ClassName"](h,p,d))&&(this[e+"Style"+s+"Index"]++,u=this.id+"_"+e+"style"+o+"_"+this[e+"Style"+s+"Index"]+"_",null==p?this["set"+i+"Style"+s+"ClassName"](h,u,d):this["set"+i+"Style"+s+"ClassName"](h,p,u)),null==(t=this[e+"Style"+s+g][u])&&(t={}),t[a]=n;var m=[];for(var a in t){var f=t[a];"style"!=a&&""!=f&&m.push(a+":"+f)}if(t.style=m.join(";"),this[e+"Style"+s+g][u]=t,!0!==l)if(null==h)this["apply"+i+"StyleOptions"](p);else!(!this.isDrillDown||!this._dataList.options.depthColumn)&&!d&&(h=this.getDisplayRowIndex(h)),!d||"cell"!=e&&"row"!=e?this["apply"+i+"StyleOptions"](h,p):"cell"==e?this["apply"+i+"StyleOptions"](h,p,void 0,void 0,d):this["apply"+i+"StyleOptions"](h,d)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setRowBackgroundColor=function(t,e,i){this.setRowStyle(t,"background-color",e,i)},T.prototype.setRowColor=function(t,e,i){this.setRowStyle(t,"color",e,i)},T.prototype.setRowStyle=function(t,e,i,o){this.setStyleAll({type:"row",rowIndex:t,styleName:e,styleValue:i,useRealRowIndex:o})},T.prototype.getRowBackgroundColor=function(t){return this.getRowStyleValue(t,"background-color")},T.prototype.getRowColor=function(t){return this.getRowStyleValue(t,"color")},T.prototype.getRowStyleValue=function(t,e){t=this._getGroupbyGroupedRowIndex(t);var i=this.getRowStyleClassName(t);return null==i?"":this.rowStyleValueObj[i][e]||""},T.prototype._getRowStyleStr=function(t){return this.rowStyleValueObj[t].style},T.prototype.setColumnBackgroundColor=function(t,e){this.setColumnStyle(t,"background-color",e)},T.prototype.setColumnColor=function(t,e){this.setColumnStyle(t,"color",e)},T.prototype.setColumnStyle=function(t,e,i){this.setStyleAll({type:"column",colIndex:t,styleName:e,styleValue:i})},T.prototype.setDefaultStyle=function(t,e,i){this.setStyleAll({type:"default",colIndex:t,styleName:e,styleValue:i})},T.prototype._setInitStyle=function(t,e,i){this.setStyleAll({type:"init",colIndex:t,styleName:e,styleValue:i})},T.prototype.setAdaptiveColumnStyle=function(t,e,i){this.setStyleAll({type:"adaptiveColumn",colIndex:t,styleName:e,styleValue:i,noRefresh:!0})},T.prototype.getColumnBackgroundColor=function(t){return this.getColumnStyleValue(t,"background-color")},T.prototype.getColumnColor=function(t){return this.getColumnStyleValue(t,"color")},T.prototype.getColumnStyleValue=function(t,e){var i=this.columnStyleValueObj[t];return null==i?this.getDefaultStyleValue(t,e):i[e]||this.getDefaultStyleValue(t,e)},T.prototype._getColumnStyleStr=function(t){return this.columnStyleValueObj[t].style},T.prototype.getDefaultStyleValue=function(t,e){var i=this.defaultStyleValueObj[t];return null==i?"":i[e]||""},T.prototype._getInitStyleValue=function(t,e){var i=this.initStyleValueObj[t];return null==i?"":i[e]||""},T.prototype._getDefaultStyleStr=function(t){return this.defaultStyleValueObj[t].style},T.prototype.getAdaptiveColumnStyleValue=function(t,e){var i=this.adaptiveColumnStyleValueObj[t];return null==i?"":i[e]||""},T.prototype.setCellBackgroundColor=function(t,e,i,o){this.setCellStyle(t,e,"background-color",i,void 0,o)},T.prototype.setCellColor=function(t,e,i,o){this.setCellStyle(t,e,"color",i,void 0,o)},T.prototype.setCellStyle=function(t,e,i,o,s,r){var a=this.getColumnID(e);if(this.mergeCellBkStatus&&this.mergeCellBkStatus[a]){var n=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t);this.mergeCellBkStatus[a][n]=null,
delete this.mergeCellBkStatus[a][n]}this.setStyleAll({type:"cell",rowIndex:t,colIndex:e,styleName:i,styleValue:o,noRefresh:s,useRealRowIndex:r})},T.prototype._refreshCellStyle=function(t){var e=[],i=this.cellStyleValueObj[t];for(var o in i){var s=i[o];"style"!=o&&""!=s&&e.push(o+":"+s)}i.style=e.join(";"),this.cellStyleValueObj[t]=i},T.prototype.setDisabledCellStyle=function(t,e,i,o){e=this.getColumnIndex(e);this._getEditDisabled(t,e)&&this.setStyleAll({type:"disabledCell",rowIndex:t,colIndex:e,styleName:i,styleValue:o})},T.prototype.getCellBackgroundColor=function(t,e){return this.getCellStyleValue(t,e,"background-color")},T.prototype.getCellColor=function(t,e){return this.getCellStyleValue(t,e,"color")},T.prototype.getCellStyleValue=function(t,e,i,o){try{t=this._getGroupbyGroupedRowIndex(t);var s=this.getCellStyleClassName(t,e);return null==s?(!0!==o&&c.k.printLog("[Warning] Is not exist cell!["+this.id+"]"),""):this.cellStyleValueObj[s][i]||""}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._getCellStyleStr=function(t){return this.cellStyleValueObj[t].style},T.prototype.setHeaderCellStyle=function(t,e,i){try{var o=this.getHeaderLayer(t);WebSquare.style.setStyle(o,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setHeaderBackgroundColor=function(t,e){try{var i=this.getHeaderLayer(t);WebSquare.style.setStyle(i,"background-color",e),this.headerCellStyleValueObj[t]={"background-color":e}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setHeaderColor=function(t,e){try{var i=this.getHeaderLayer(t);WebSquare.style.setStyle(i,"color",e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getHeaderCellStyleValue=function(t,e){try{var i=this.getHeaderLayer(t);return WebSquare.style.getStyle(i,e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getHeaderBackgroundColor=function(t){return this.getHeaderCellStyleValue(t,"background-color")},T.prototype.getHeaderColor=function(t){return this.getHeaderCellStyleValue(t,"color")},T.prototype._setMergeCellBackground=function(t,e,i){var o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t),s=this.getColumnID(e),r=this.getColumnIndex(e);if(this.options.groupbyZone&&(this.mergeCellBkStatus||(this.mergeCellBkStatus={}),this.mergeCellBkStatus[s]||(this.mergeCellBkStatus[s]={}),null==this.mergeCellBkStatus[s][o])){var a=this.getCellStyleValue(t,s,"background-color",!0)||this.getColumnStyleValue(r,"background-color");this.mergeCellBkStatus[s][o]=a}var n=this.setCellDefaultStyleClassName(o,r,!0);this.cellStyleValueObj[n]["background-color"]=i,this._refreshCellStyle(n)},T.prototype._clearMergeCellBackground=function(){if(this.mergeCellBkStatus){for(var t in this.mergeCellBkStatus)for(var e in this.mergeCellBkStatus[t]){var i=parseInt(e,10),o=this.mergeCellBkStatus[t][e],s=this.setCellDefaultStyleClassName(i,t,!0);this.cellStyleValueObj[s]["background-color"]=o,this._refreshCellStyle(s),o||delete this.cellStyleValueObj[s]["background-color"]}delete this.mergeCellBkStatus}};var k=function(t){this.statusArr=[],this.mainGrid=null,this.options=null,this.mode=null};k.prototype.initialize=function(t,e){if(this.mainGrid=t,t._linkedDataList?this.mode="linkedDataList":this.mode="dataList","linkedDataList"===this.mode){this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{}),t._linkedDataList.initialRowIndexArr.length!==t._linkedDataList.filteredRowIndexArr.length&&(c.k.printLog("경고 : drilldown에서는 filter기능을 사용할 수 없습니다. 개별 filter를 자동으로 전부 해제합니다.["+this.id+"]"),t._linkedDataList.clearFilter()),t._linkedDataList.filteredRowIndexArr=[];for(var i=this.options.depthColumn,s=t._linkedDataList.initialRowIndexArr.length,r=0;r<s;r++){var a=t._linkedDataList.initialRowIndexArr[r];this.statusArr[a]=!1
;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(a,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(a,this.mainGrid.getColumnID(i))))<=parseInt(this.options.showDepth,10)&&(this.mainGrid._linkedDataList.filteredRowIndexArr.push(a),this.statusArr[a]=!0)}}else{t._dataList.filteredRowIndexArr=[],this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{});for(i=this.options.depthColumn,s=this.mainGrid.getTotalRow(),a=0;a<s;a++){this.statusArr[a]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(a,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(a,this.mainGrid.getColumnID(i))))<=parseInt(this.options.showDepth,10)&&(this.mainGrid._dataList.filteredRowIndexArr.push(a),this.statusArr[a]=!0)}}},k.prototype.getDepth=function(t){return"dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(t,this.mainGrid._dataList.getColumnID(this.options.depthColumn))):parseInt(this.mainGrid.dataList._getData(t,this.mainGrid.getColumnID(this.options.depthColumn)))},k.prototype.isOpen=function(t){var e=this.getDepth(this.mainGrid.getRealRowIndex(t)),i=0;i="linkedDataList"===this.mode?this.mainGrid._linkedDataList.filteredRowIndexArr[t+1]:this.mainGrid._dataList.filteredRowIndexArr[t+1];var o=this.getDepth(i);return!isNaN(e)&&!isNaN(o)&&e<o},k.prototype.hasChild=function(t){if("linkedDataList"===this.mode){var e=this.mainGrid._linkedDataList.filteredRowIndexArr[t],i=this.mainGrid._linkedDataList.getLinkedRowIndex(t),o=this.mainGrid._linkedDataList.initialRowIndexArr[i+1],s=this.mainGrid.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(this.options.depthColumn));var r=parseInt(this.mainGrid.dataList._getData(e,s)),a=parseInt(this.mainGrid.dataList._getData(o,s));return r<(a=isNaN(a)?0:a)}o=(e=this.mainGrid.getRealRowIndex(t))+1,s=this.mainGrid.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(this.options.depthColumn));r=parseInt(this.mainGrid.dataList._getData(e,s)),a=parseInt(this.mainGrid.dataList._getData(o,s));return r<(a=isNaN(a)?0:a)},k.prototype.getOriginalRowIndex=function(t){return this.openRowIndexArr[t]},k.prototype.getDisplayRowIndex=function(t){if("linkedDataList"===this.mode){if(this.mainGrid._linkedDataList.filteredRowIndexArr)for(var e=0;e<this.mainGrid._linkedDataList.filteredRowIndexArr.length;e++)if(parseInt(t,10)===this.mainGrid._linkedDataList.filteredRowIndexArr[e])return e}else if(this.mainGrid._dataList.filteredRowIndexArr)for(e=0;e<this.mainGrid._dataList.filteredRowIndexArr.length;e++)if(parseInt(t,10)===this.mainGrid.getRealRowIndex(e))return e;return t},k.prototype.getChildRowArr=function(t,e){var i=t,o=this.getDepth(t),s=this.mainGrid.getTotalRow(),r=[],a=this.options.depthColumn,n=this.mainGrid.getColumnID(a);if("dataList"==this.options.dataColumn&&(n=this.mainGrid._dataList.getColumnID(a)),"linkedDataList"===this.mode)for(var l=i+1;l<s;l++){var h=this.mainGrid._linkedDataList.initialRowIndexArr[l];if(this.mainGrid.dataList._getData(h,n)==o+1&&r.push(h),e&&this.mainGrid.dataList._getData(h,n)>o+1&&r.push(h),this.mainGrid.dataList._getData(h,n)<=o)break}else for(h=i+1;h<s&&(this.mainGrid.dataList._getData(h,n)==o+1&&r.push(h),e&&this.mainGrid.dataList._getData(h,n)>o+1&&r.push(h),!(this.mainGrid.dataList._getData(h,n)<=o));h++);return r},k.prototype.pasteDrilldownInitialize=function(t,e){if(this.mainGrid=t,t._linkedDataList?this.mode="linkedDataList":this.mode="dataList","linkedDataList"===this.mode){this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{}),t._linkedDataList.initialRowIndexArr.length!==t._linkedDataList.filteredRowIndexArr.length&&(c.k.printLog("경고 : drilldown에서는 filter기능을 사용할 수 없습니다. 개별 filter를 자동으로 전부 해제합니다.["+this.id+"]"),t._linkedDataList.clearFilter()),
t._linkedDataList.filteredRowIndexArr=[];for(var i=this.options.depthColumn,s=t._linkedDataList.initialRowIndexArr.length,r=0;r<s;r++){var a=t._linkedDataList.initialRowIndexArr[r];this.statusArr[a]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(a,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(a,this.mainGrid.getColumnID(i))))<=parseInt(this.options.showDepth,10)&&(this.mainGrid._linkedDataList.filteredRowIndexArr.push(a),this.statusArr[a]=!0)}}else{this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{});for(i=this.options.depthColumn,s=this.mainGrid.getTotalRow(),a=0;a<s;a++)this.statusArr[a]=!0}},k.prototype.getChildrenRowArr=function(t){var e=[];if(this.mainGrid){var i=this.mainGrid.getTotalRow(),o=this.options.depthColumn,s=this.mainGrid.getColumnID(o);if("dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(o)),"linkedDataList"===this.mode){var r=this.mainGrid._linkedDataList.initialRowIndexArr[t+1],a=parseInt(this.mainGrid.dataList._getData(this.mainGrid._linkedDataList.initialRowIndexArr[t],s),10);if(r<i&&this.mainGrid.dataList._getData(r,s)>a){e.push(r);var n=parseInt(this.mainGrid.dataList._getData(r,s),10),l=!0}if(l)for(var h=t+2;h<i;h++){r=this.mainGrid._linkedDataList.initialRowIndexArr[h];if(this.mainGrid.dataList._getData(r,s)<a+1)break;this.mainGrid.dataList._getData(r,s)<n+1&&(e.push(r),n=parseInt(this.mainGrid.dataList._getData(r,s),10))}}else{r=t+1,a=parseInt(this.mainGrid.dataList._getData(t,s),10);if(r<i&&this.mainGrid.dataList._getData(r,s)>a){e.push(r);n=parseInt(this.mainGrid.dataList._getData(r,s),10),l=!0}if(l)for(r=t+2;r<i&&!(this.mainGrid.dataList._getData(r,s)<a+1);r++)this.mainGrid.dataList._getData(r,s)<n+1&&(e.push(r),n=parseInt(this.mainGrid.dataList._getData(r,s),10))}}return e},k.prototype.getParentRowIndex=function(t){if(this.mainGrid){var e=this.options.depthColumn,i=this.mainGrid.getColumnID(e);"dataList"==this.options.dataColumn&&(i=this.mainGrid._dataList.getColumnID(e));var o=parseInt(this.mainGrid.dataList._getData(t,i));if("linkedDataList"===this.mode)for(var s=this.mainGrid._linkedDataList.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.mainGrid._linkedDataList.initialRowIndexArr[s];if(this.mainGrid.dataList._getData(r,i)<o)return r}else for(r=t-1;r>=0;r--)if(this.mainGrid.dataList._getData(r,i)<o)return r}return-1},k.prototype.makeOpenRowIndexArr=function(){if("linkedDataList"===this.mode){this.mainGrid._linkedDataList.filteredRowIndexArr=[];for(var t=0;t<this.statusArr.length;t++)1==this.statusArr[t]&&this.mainGrid._linkedDataList.filteredRowIndexArr.push(t)}else{this.mainGrid._dataList.filteredRowIndexArr=[];for(t=0;t<this.statusArr.length;t++)1==this.statusArr[t]&&this.mainGrid._dataList.filteredRowIndexArr.push(t)}},k.prototype.toggle=function(t){var e=this.isOpen(t),i=[];t="linkedDataList"===this.mode?this.mainGrid._linkedDataList.getLinkedRealRowIndex(t):this.mainGrid.getRealRowIndex(t),i=e?this.getChildRowArr(t,!0):this.getChildrenRowArr(t);for(var o=0;o<i.length;o++)this.statusArr[i[o]]=!e;this.makeOpenRowIndexArr(),d.B.fireEvent(this.mainGrid,"ontoggleclick",e,t)},k.prototype.getAncestorRowArr=function(t){if("number"!=typeof t)return!1;for(var e=[],i=t;i>=0;)e.push(i),i=this.getParentRowIndex(i);return e.shift(),e},k.prototype.drillTo=function(t){if("number"!=typeof t)return!1;var e=this.getAncestorRowArr(t);e.unshift(t);for(var i=0;i<e.length;i++){var o=e[i];if(this.statusArr[o]=!0,0!=i)for(var s=this.getChildrenRowArr(o),r=0;r<s.length;r++)this.statusArr[s[r]]=!0}return this.makeOpenRowIndexArr(),this.getDisplayRowIndex(e[e.length-1])},k.prototype.isLastChild=function(t){var e=this.options.depthColumn,i=this.mainGrid.getColumnID(e);"dataList"==this.options.dataColumn&&(i=this.mainGrid._dataList.getColumnID(e));var o=this.mainGrid.dataList._getData(t,i);if("linkedDataList"===this.mode)for(var s=this.mainGrid._linkedDataList.getLinkedRealRowIndex(t)-1;s>=0;s--){
var r=this.mainGrid._linkedDataList.initialRowIndexArr[s];if(this.mainGrid.dataList._getData(r,i)<o)return r}else for(r=t+1;r<this.mainGrid.getTotalRow();r++){if(this.mainGrid.dataList._getData(r,i)==o)return!1;if(this.mainGrid.dataList._getData(r,i)<o)return!0}return!0},k.prototype.getRecursiveRowIndex=function(t){try{for(var e=[],i=this.getChildrenRowArr(t),o=0;o<i.length;o++){var s=i[o];e.push(s),e=e.concat(this.getRecursiveRowIndex(s))}return e}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getRecursiveRowCount=function(t){try{for(var e=0,i=this.getChildrenRowArr(t),o=0;o<i.length;o++)e+=this.getRecursiveRowCount(i[o]),e++;return e}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.appendChild=function(t,e){try{if(e){var i=t+this.getRecursiveRowCount(t);return this.mainGrid._toggle(this.getDisplayRowIndex(t)),this.mainGrid.dataList.setRowData(i+1,e)}$l("data is null. check data.["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.moveNode=function(t,e){try{var i;if(t<e){if(!this.bodyDrop)i=e-(this.getRecursiveRowCount(t)+1)}else(t>e||t==e)&&(i=e);var o=this.detachNode(t),s=this.appendNode(i,o);return"number"!=typeof i&&(i=this.mainGrid.getRealRowIndex(this.mainGrid.getRowCount()-1)),this.bodyDrop=!1,{detachedData:o,insertedData:s,insertedRowIndex:i}}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.appendNode=function(t,e){try{var i,o,s,a=this.mainGrid._dataList.getColumnCount(),n=e.length/a,l=this.mainGrid._dataList.getColumnID(this.options.depthColumn);if(this.options.depthColumn=parseInt(this.options.depthColumn,10),this.bodyDrop){this.bodyDrop=!1;var h=this,d=function(t){var e=h.getParentRowIndex(t);return e=e>-1?d(e):t},c=this.mainGrid.getRealRowIndex(this.mainGrid.getRowCount()-1),u=this.getDisplayRowIndex(d(c));i=parseInt(this.mainGrid.dataList.getCellData(u,l),10),o=parseInt(e[a*(n-1)+parseInt(this.options.depthColumn)],10),t=c+this.getRecursiveRowCount(c)+1,s=i-o}else{u=this.getDisplayRowIndex(t-1);s=(i=parseInt(this.mainGrid.dataList.getCellData(u,l),10))-(o=parseInt(e[a*(n-1)+parseInt(this.options.depthColumn)],10))+1}for(var p=[],g=0;g<n;g++)for(var m=0;m<a;m++){var f=e[a*g+m];m==this.options.depthColumn&&(f-=0,f+=s),p.push(f)}this.mainGrid.dataList._insertData(t,p,-1);var b=this.getDisplayRowIndex(t);return this.isOpen(b)&&this.mainGrid._toggle(b),p}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.detachNode=function(t){try{for(var e=[],i=this.mainGrid.dataList.removeRow(t,{skipNotify:!0}),o=0;o<i.length;o++)e=e.concat(i[o]);return e}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.insertNextSibling=function(t,e){try{this.options.depthColumn=parseInt(this.options.depthColumn,10);var i=this.mainGrid.dataList.getColumnCount(),o=e.length/this.mainGrid.dataList.getColumnCount(),s=this.mainGrid.getDisplayRowIndex(t),a=parseInt(this.mainGrid.dataList.getCellData(s,this.options.depthColumn),10)-parseInt(e[i*(o-1)+parseInt(this.options.depthColumn)],10),n=[];t+=this.getRecursiveRowCount(t)+1;for(var l=0;l<o;l++)for(var h=0;h<i;h++){var d=e[i*l+h];h==this.options.depthColumn&&(d-=0,d+=a),n.push(d)}if(this.mainGrid.dataList._insertData(t,n,-1),this.mainGrid.options.closeDrillDownSibling)for(l=0;l<o;l++){var c=this.getDisplayRowIndex(t+l);this.isOpen(c)&&this.mainGrid._toggle(c)}return n}catch(t){r.w.printStackTrace(t,null,this)}};var D=i(2712),L=function(t){this._linkedDataList._grid=t};L.prototype.getLinkedRowIndex=function(t){return this._linkedDataList.getLinkedRowIndex(t)},L.prototype.getRealRowIndex=function(t){return this._linkedDataList.filteredRowIndexArr[t]},L.prototype.getFilteredRowIndex=function(t){return this._linkedDataList.getFilteredRowIndex(t)},L.prototype.getTotalRow=function(){try{return this._linkedDataList.initialRowIndexArr.length}catch(t){r.w.printStackTrace(t)}},L.prototype.getTotalCol=function(){try{return this._linkedDataList._dataList.getTotalCol()}catch(t){r.w.printStackTrace(t)}},L.prototype.getRowCount=function(){try{
return this._linkedDataList.getDataLength()}catch(t){r.w.printStackTrace(t)}},L.prototype.getCellData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getCellData(i,e)}catch(t){r.w.printStackTrace(t)}},L.prototype.getOriginalCellData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getOriginalCellData(i,e)}catch(t){r.w.printStackTrace(t)}},L.prototype.getDataLength=function(){return this._linkedDataList.filteredRowIndexArr.length},L.prototype.getColCnt=function(){try{for(var t=0,e=this._grid.htmlInfo?this._grid.htmlInfo.head.rowArr[0]:this._grid.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){r.w.printStackTrace(t,null,this)}},L.prototype.getRowPosition=function(){try{return this._linkedDataList._dataList.getRowPosition()}catch(t){r.w.printStackTrace(t,null,this)}},L.prototype.getColData=function(t){try{for(var e=[],i=0;i<this._linkedDataList.initialRowIndexArr.length;i++)e.push(this._linkedDataList.getCellData(i,t));return e}catch(t){r.w.printStackTrace(t)}},L.prototype.getRowData=function(t){try{var e=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getRowData(e)}catch(t){r.w.printStackTrace(t)}},L.prototype.getDataRow=function(t){try{var e=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getDataRow(e)}catch(t){r.w.printStackTrace(t)}},L.prototype.getMatchedData=function(t,e,i,o,s){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var a=[],n=this._linkedDataList.getMatchedIndex(t,e,i,o,s),l=0;l<n.length;l++)a.push(this._linkedDataList.getRowData(n[l]));return a}catch(t){r.w.printStackTrace(t)}},L.prototype.getUnmatchedData=function(t,e,i,o,s){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var a=[],n=this._linkedDataList.getUnmatchedIndex(t,e,i,o,s),l=0;l<n.length;l++)a.push(this._linkedDataList.getRowData(n[l]));return a}catch(t){r.w.printStackTrace(t)}},L.prototype.getMatchedColumnData=function(t,e,i,o,s,a){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var n=[],l=this._linkedDataList.getMatchedIndex(t,e,o,s,a),h=0;h<l.length;h++)n.push(this._linkedDataList.getCellData(l[h],i));return n}catch(t){r.w.printStackTrace(t)}},L.prototype.getUnmatchedColumnData=function(t,e,i,o,s,a){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var n=[],l=this._linkedDataList.getUnmatchedIndex(t,e,o,s,a),h=0;h<l.length;h++)n.push(this._linkedDataList.getCellData(l[h],i));return n}catch(t){r.w.printStackTrace(t)}},L.prototype.getFilteredColData=function(t){for(var e=[],i=0;i<this._linkedDataList.getDataLength();i++)e.push(this._linkedDataList.getCellData(this._linkedDataList.filteredRowIndexArr[i],t));return e},L.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,0!=(i=a.D.getBoolean(i))&&(i=!0);var n=this._linkedDataList._dataList.getColumnIndex(t),l=this._linkedDataList.getFilteredColData(n),h=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=l.length),s>l.length&&(s=l.length);for(var d=o;d<s;d++){var c=l[d],u=this._linkedDataList.getRealRowIndex(d);1==i?c===e&&h.push(u):c.indexOf(e)>-1&&h.push(u)}return h}catch(t){r.w.printStackTrace(t)}},L.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0);var a=this._linkedDataList._dataList.getColumnIndex(t),n=this._linkedDataList.getFilteredColData(a),l=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=n.length),s>n.length&&(s=n.length);for(var h=o;h<s;h++){var d=n[h],c=this._linkedDataList.getRealRowIndex(h);1==i?d!==e&&l.push(c):d.indexOf(e)<=-1&&l.push(c)}return l}catch(t){r.w.printStackTrace(t)}},L.prototype.getRangeData=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this._linkedDataList.getDataLength()&&(e=this._linkedDataList.getDataLength());for(var s=t;s<e;s++){var a=this._linkedDataList.getRealRowIndex(s);i=i.concat(this._linkedDataList.getRowData(a))}return i
}catch(t){r.w.printStackTrace(t)}},L.prototype.getAllData=function(){try{return this._linkedDataList._dataList.getAllFilteredData()}catch(t){r.w.printStackTrace(t)}},L.prototype.getAllFilteredData=function(){this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=0;e<this._linkedDataList.getDataLength();e++)t=t.concat(this._linkedDataList.getRowData(e));return t},L.prototype.getColumnDistinctDataArray=function(t){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var e=[],i=[];"string"==typeof t&&(t=this._linkedDataList._dataList.bodyIdColIndexMap[t]);for(var o=this._linkedDataList._dataList.getCellInfo(t),s=this._linkedDataList.getColData(t),a=0;a<s.length;a++){i[s[a]]=1}for(var n in i)e.push(n);return"text"==o.options.dataType?e.sort():e.sort(this._linkedDataList.comparator),e}catch(t){r.w.printStackTrace(t)}},L.prototype.getRangeXML=function(t,e){try{return this._linkedDataList.getRangeXML(t,e)}catch(t){r.w.printStackTrace(t)}},L.prototype.getMatchedXML=function(t,e,i,o,s){try{return this._linkedDataList.getMatchedXML(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},L.prototype.getUnmatchedXML=function(t,e,i,o,s){try{return this._linkedDataList.getUnmatchedXML(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},L.prototype.getRowXML=function(t){try{return this._linkedDataList.getRowXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getAllXML=function(t){try{return this._linkedDataList.getAllXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getAllFilteredXML=function(t){return this._linkedDataList.getAllFilteredXML(t)},L.prototype.getRowJSON=function(t,e){try{return this._linkedDataList.getRowJSON(t,e)}catch(t){r.w.printStackTrace(t)}},L.prototype.getAllJSON=function(t){try{return this._linkedDataList.getAllJSON(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getRangeJSON=function(t,e,i){try{return this._linkedDataList.getRangeJSON(t,e,i)}catch(t){r.w.printStackTrace(t)}},L.prototype.getMatchedJSON=function(t,e,i,o,s){try{return this._linkedDataList.getMatchedJSON(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},L.prototype.getUnmatchedJSON=function(t,e,i,o,s){try{return this._linkedDataList.getUnmatchedJSON(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},L.prototype.getFusionChartData=function(t,e,i){return this._linkedDataList.getFusionChartData(t,e,i)},L.prototype.getRowStatusValue=function(t){try{return this._linkedDataList.getRowStatusValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},L.prototype.getRowStatus=function(t){try{return this._linkedDataList.getRowStatus(t)}catch(t){r.w.printStackTrace(t,null,this)}},L.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this._linkedDataList.getDataLength();i++){var o=this._linkedDataList.getRealRowIndex(i);t.indexOf(this._linkedDataList._dataList.getRowStatus(o))>-1&&e.push(o)}return e}catch(t){r.w.printStackTrace(t)}},L.prototype.getInsertedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("C")}catch(t){r.w.printStackTrace(t)}},L.prototype.getUpdatedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("U")}catch(t){r.w.printStackTrace(t)}},L.prototype.getDeletedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("DV")}catch(t){r.w.printStackTrace(t)}},L.prototype.getOnlyDeletedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("D")}catch(t){r.w.printStackTrace(t)}},L.prototype.getVoidIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("V")}catch(t){r.w.printStackTrace(t)}},L.prototype.getModifiedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("CUD")}catch(t){r.w.printStackTrace(t)}},L.prototype.getInsertedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getInsertedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getInsertedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]})
;var t=this._linkedDataList.getInsertedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getInsertedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getInsertedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getDeletedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getDeletedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getDeletedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getDeletedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getVoidData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getVoidIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getVoidXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getVoidIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getVoidJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getVoidIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getOnlyDeletedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getOnlyDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getOnlyDeletedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getOnlyDeletedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getOnlyDeletedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getOnlyDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getUpdatedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getUpdatedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getUpdatedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getUpdatedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getModifiedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getModifiedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.getModifiedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getModifiedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.getModifiedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]})
;for(var t=[],e=this._linkedDataList.getModifiedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},L.prototype.setColumnFilter=function(t,e,i,o){return"object"!=typeof t||a.D.isString(t)||(t.internal=!0),this._linkedDataList.setColumnFilter(t,e,i,o)},L.prototype.removeColumnFilter=function(t){return this._linkedDataList.removeColumnFilter(t,{internal:!0})},L.prototype.clearSortFilter=function(){return this._linkedDataList.clearSortFilter()},L.prototype.removeColumnFilterAll=function(){return this._linkedDataList.removeColumnFilterAll()},L.prototype.setFilter=function(t){return t&&(t.internal=!0),this._linkedDataList.setFilter(t)},L.prototype.removeFilter=function(t,e){return t&&(t.internal=!0),this._linkedDataList.removeFilter(t,e)},L.prototype.clearFilter=function(){return this._linkedDataList.clearFilter()},L.prototype.sort=function(t,e){return this._linkedDataList.sort(t,e)},L.prototype.clearSort=function(){return this._linkedDataList.clearSort()},L.prototype.multisort=function(t){return this._linkedDataList.multisort(t)},L.prototype.getRowArray=function(t){try{return this._linkedDataList.getRowArray(t)}catch(t){r.w.printStackTrace(t)}},L.prototype.removeRow=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._grid._dataList.removeRow(i,e)}catch(t){r.w.printStackTrace(t)}},L.prototype.removeRows=function(t){try{for(var e=[],i=0;i<t.length;i++)e.push(this._linkedDataList.getRealRowIndex(t[i]));return this._grid._dataList.removeRows(e)}catch(t){r.w.printStackTrace(t)}},L.prototype.setRowData=function(t,e,i){try{var o=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.setRowData(o,e,i)}catch(t){r.w.printStackTrace(t)}},L.prototype.setRowXML=function(t,e,i){try{var o=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.setRowXML(o,e,i)}catch(t){r.w.printStackTrace(t)}},L.prototype.insertData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.insertData(i,e)}catch(t){r.w.printStackTrace(t)}};var W=i(3729),A=function(t,e,i){var r;this.options={},o.x.extend(this.options,WebSquare.uiplugin.cellInfo.prototype.defaultOptions),t&&(r=t.getAttribute("escape")),!r&&e.element&&(r=e.element.getAttribute("escape"));var n=a.D.getEscape(r,e.options.pluginName);this.options.escape=n?a.D.getBoolean(n):this.options.escape,this.internal=!1,(i||"TD"==t.getTagName().toUpperCase())&&(this.internal=!0),this.mainGrid=e,this.mainGridId="G_"+this.mainGrid.id+"__",t&&this.setOptions(t),null!=this.mainGrid.scope_obj&&(this.options._scope_obj_uuid=this.mainGrid.scope_obj.uuid,this.scope_id=this.mainGrid.scope_obj.id),""!=this.options.value&&""==this.options.defaultValue&&(this.options.defaultValue=this.options.value),""==this.options.value&&""!=this.options.defaultValue&&(this.options.value=this.options.defaultValue),this.colID=this.options.col_id,this.id=this.options.col_id,this.options.id=this.options.col_id,this.setController(),this.initFormatter(t),this.initializeCellInfo(t,i),this.expressionStr=null,this.style="",this.heightGap=0;var l=s.v.browserVersion();if(s.v.browserCheck.ie&&"8"!=l&&(this.heightGap=2),""!=this.options.importExp&&(this.options.importExp=this.options.importExp.replace(/[cC][oO][lL][\s]*[(]/g,"_this.columnValue(obfuscator_rowXml, "),this.options.importExp=this.options.importExp.replace(/[xX][pP][aA][tT][hH][\s]*[(]/g,"_this.xpathValue(obfuscator_rowXml, "),this.options.importExp=this.options.importExp.replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.rowIndexValue(obfuscator_i")),0==this.options.colSpan&&(this.options.colSpan=1),0==this.options.rowSpan&&(this.options.rowSpan=1),t){var h=!this.options.groupName||!this.options.groupValue,d=this.options.inputType;if(h&&("button"!=d&&"image"!=d)&&this.mainGrid.successBinding){var c=e._dataList.getCellInfo(this.id);!(!c||!c.element&&c.id!==this.id)||(this.options.readOnly=!0)}}
"radio"==this.options.inputType&&this.options.groupName&&(this.mainGrid.radioGroupRepChk[this.options.groupName]=!0),"$blank"==this.options.NaNFormat&&(this.options.NaNFormat=""),this.changedCellHeight=0,this.dynamicAttrInfo={},"custom"==this.options.inputType&&(this.mainGrid.hasCustomInputType=!0),"expression"===this.options.inputType&&"true"!==this.options.expressionSort&&(this.mainGrid.expressionHeaderInfo[this.mainGrid.bodyToHeaderRelation[this.id]]=!0)};A.prototype.defaultOptions={id:"",col_id:"",colIndex:"",colSpan:0,rowSpan:0,defaultValue:"",value:"",inputType:"text",useFilter:!1,blockSelect:!1,dataType:"",valueType:"binary",viewType:"",trueValue:null,falseValue:null,editType:"",applyFormat:"display",displayFormat:"",displayFormatter:"",chooseOptionLabel:"-선택-",chooseOptionValue:"",chooseOption:!1,allOption:!1,title:"",voidNull:!1,adjustMaxLength:!1,useMaxLength:!1,depthColumn:"",showDepth:0,importExp:"",importFormatter:"",expression:"",colMerge:!1,colMergeEdit:!1,upperColumn:"",readOnly:"",imageWidth:"",imageHeight:"",imageClickFunction:"",imageSrc:"",imageSrcDisabled:"",imageSrcReadOnly:"",useImageClick:!1,alt:"",calendarValueType:"yearMonthDate",disabled:"",textAlign:"",exportFormatter:"",imeMode:"",selectSetter:"",ignoreStatus:!1,dateValidCheck:"",embeddedInput:"",groupName:"",escape:"false"!==s.v.getConfiguration("/WebSquare/escape/@value"),setRecursive:!1,showReadOnly:!1,customFormatter:"",escapeFormatter:"",depthType:"nbsp",moveFocusByChoice:"",directItemChoice:"",directOpen:!1,focusOutOnCheckHeaderClick:!0,usePartialCheck:!0,partialCheckNextClick:"",footerDiv:!1,displayRowIndex:!1,NaNFormat:"NaN",disabledClass:"",hiddenClass:"",displayMode:"0",delimiter:"\t",skipKeyMoveEditMode:!1,skipKeyMove:!1,checkboxLabel:"",checkboxLabelPosition:"right",checkboxLabelColumn:"",checkboxLabelFormatter:"",radioLabel:"",radioLabelPosition:"right",radioLabelColumn:"",radioLabelFormatter:"",checkAlways:!1,fixColumnWidth:!1,sortLabel:!1,useIOFormatLength:!1,tooltipDisplayItem:!1,itemTooltipDisplay:!1,itemTooltipFormatter:"",tooltipTime:1,minWidth:20,eventPriority:"onviewchange",customModelFormatter:"",customModelUnformatter:"",useMonthYearFormat:!1,editModeEventIcon:"",keepCellClass:!1,inputReadOnly:!1,keyMoveListSync:!1,tableRender:"",copyOption:"",invalidMessageFunc:"",dateValidSetCustom:!1,checkcomboboxUseDrag:!1,checkcomboboxUseEdit:!1,checkcomboboxRangeSeparator:"",checkcomboboxValidateOnInput:!1,checkcomboboxVisibleRowNum:0,checkcomboboxVisibleColNum:1,checkcomboboxVisibleColMax:1,placeholder:"",refInitSync:!1,eventPropagation:!1,autoDecimalPoint:!1,noDisabledOnReadOnly:!1},A.prototype.setOptions=function(t){var e=this.mainGrid.options.pluginName,i=t.getAttribute("calendarValueType")||this.options.calendarValueType,r=t.getAttribute("inputType")||"text";this.configOptions=o.x.extend({},s.v.getConfig(e+"/column[@inputType='"+r+"']"));var n=t.getAttribute("dataType")||"text";this.configOptions2=o.x.extend({},s.v.getConfig(e+"/column[@dataType='"+n+"']")),"calendar"==r&&"grid"==e?this.configOptions.displayFormat=s.v.getConfiguration('/WebSquare/grid/column[@inputType="calendar"]/displayFormat[@valueType="'+i+'"]/@value')||s.v.getConfiguration('/WebSquare/grid/column[@inputType="calendar"]/displayFormat/@value'):"calendar"==r&&"gridView"==e&&(this.configOptions.displayFormat=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat[@valueType="'+i+'"]/@value')||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat/@value')||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat[@valueType="'+i+'"]/@defaultValue')),"textarea"===r&&(this.configOptions.keepCellClass=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="textarea"]/keepCellClass/@value')),
this.options=o.x.extendKeepingType(o.x.extendKeepingType(this.options,this.configOptions2),this.configOptions);var l=[];for(var h in this.options)l[h.toLowerCase()]=h;var d=WebSquare.Parser.parseAttribute(t);for(var c in d){var u=d[c];"class"==c?this.options.className=u:""!=String(u).wq_trim()&&(l[c]&&(c=l[c]),"boolean"==typeof this.options[c]?u=a.D.getBoolean(u):"number"==typeof this.options[c]&&(u=a.D.getNumber(u)),this.options[c]=u)}if(!(n=this.options.dataType)&&this.mainGrid.successBinding&&(n=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),"date"==n&&!this.options.displayFormat){if(this.options.displayFormatFunc){var p=a.D.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof p&&(this.options.displayFormat=p.call(this,this.options.calendarValueType))}this.options.displayFormat||(this.options.displayFormat=s.v.getConfiguration("/WebSquare/"+e+"/dataType/date/@displayFormat"))}if("date"==n&&this.options.calendarDisplayFormatFunc&&!this.options.calendarDisplayFormat){var g=a.D.getGlobalFunction(this.options.calendarDisplayFormatFunc,this.scope_id);"function"==typeof g&&(this.options.calendarDisplayFormat=g.call(this,this.options.calendarValueType))}if("time"!=n||this.options.displayFormat||(this.options.displayFormat="HH:mm"),this.mainGrid.options.senseReader&&"false"!==this.options.embeddedInput)switch(this.options.inputType||"text"){case"secret":case"text":"none"==this.mainGrid.options.focusMode&&"false"!=this.options.readOnly&&(this.options.readOnly=!0);case"select":case"checkbox":case"radio":case"calendar":this.options.embeddedInput=!0}else this.options.embeddedInput=a.D.getBoolean(this.options.embeddedInput);if("textarea"==this.options.inputType&&(this.options.showReadOnly=!0),this.element=t,"expression"==this.options.inputType){var m=this.options.expression;""!=m&&(m=m.replace(/rowStatus[\s]*[(]/gi,"this.rowStatus(")).match("rowStatus")&&this.mainGrid.rowStatusColIDArr.push(this.options.col_id)}this.options.editModeEventIcon||(this.options.editModeEventIcon=this.mainGrid.options.editModeEventIcon);!0!=={onclick:!0,ondblclick:!0}[this.options.editModeEventIcon]&&(this.options.editModeEventIcon="onclick"),this.options.copyOption||(this.options.copyOption=this.mainGrid.options.copyOption)},A.prototype.setController=function(){switch(this.mainGrid.options.useTextMultiLink&&"text"===this.options.inputType&&this.options.customFormatter&&(this.options.inputType="user"),this.options.inputType){case"text":o.x.extend(this,WebSquare.uiplugin.cellInfo.text.prototype);break;case"link":o.x.extend(this,WebSquare.uiplugin.cellInfo.link.prototype);break;case"checkbox":o.x.extend(this,WebSquare.uiplugin.cellInfo.checkbox.prototype);break;case"button":o.x.extend(this,WebSquare.uiplugin.cellInfo.button.prototype);break;case"image":o.x.extend(this,WebSquare.uiplugin.cellInfo.image.prototype);break;case"radio":o.x.extend(this,WebSquare.uiplugin.cellInfo.radio.prototype);break;case"select":o.x.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.select.prototype);break;case"calendar":o.x.extend(this,WebSquare.uiplugin.cellInfo.calendar.prototype);break;case"textarea":o.x.extend(this,WebSquare.uiplugin.cellInfo.textarea.prototype);break;case"expression":o.x.extend(this,WebSquare.uiplugin.cellInfo.expression.prototype);break;case"drilldown":o.x.extend(this,WebSquare.uiplugin.cellInfo.text.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.drilldown.prototype);break;case"textImage":o.x.extend(this,WebSquare.uiplugin.cellInfo.textImage.prototype);break;case"checkcombobox":o.x.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.checkcombobox.prototype);break;case"autoComplete":o.x.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.autoComplete.prototype);break;case"spinner":
o.x.extend(this,WebSquare.uiplugin.cellInfo.spinner.prototype);break;case"custom":o.x.extend(this,WebSquare.uiplugin.cellInfo.custom.prototype);break;case"user":o.x.extend(this,WebSquare.uiplugin.cellInfo.user.prototype);break;default:o.x.extend(this,WebSquare.uiplugin.cellInfo.text.prototype)}},A.prototype.setInnerHTML=function(t,e,i,o,s){t.innerHTML=this.mainGrid.dataTagOpen+this.getDisplayData(e)+this.mainGrid.dataTagClose},A.prototype.setEditMode=function(t,e){this.mainGrid.editedCell=null,this.mainGrid.editMode=!1},A.prototype.initFormatter=function(t){try{var e=this.options.dataType;if(!e&&this.mainGrid.successBinding&&(e=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),!e&&this.options.expression){var i=this.options.expression;(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/[sS][uU][mM][\s]*[(]/g,"NUMBER(")).replace(/[aA][vV][gG][\s]*[(]/g,"NUMBER(")).replace(/[mM][aA][xX][\s]*[(]/g,"NUMBER(")).replace(/[mM][iI][nN][\s]*[(]/g,"NUMBER(")).replace(/rowStatus[\s]*[(]/gi,"NUMBER(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"STRING(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"STRING(")).replace(/[dD][aA][tT][aA][lL][iI][sS][tT][\s]*[(]/g,"STRING(")).indexOf("NUMBER(")>-1?e="number":i.indexOf("STRING(")>-1&&(e="text")}var o=e,a=this.mainGrid._isNumberType(e);a&&"\t"===this.options.delimiter&&(this.options.delimiter="");var n,l,h=this.options.displayFormat;if("text"==this.options.inputType&&!h)if(a)"euro"==e?(h||(h=this.mainGrid.options.euroMask||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/euroMask/@value')||""),n=".",l=","):"rupee"==e?(h||(h=this.mainGrid.options.rupeeMask||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/rupeeMask/@value')||""),n=",",l="."):"tenge"==e?(h||(h=this.mainGrid.options.tengeMask||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/tengeMask/@value')||""),n=" ",l=","):"number"!=e&&"float"!=e&&"bigDecimal"!=e||(h||(h=this.mainGrid.options.numberMask||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/numberMask/@value')||""),n=",",l="."),this.options.displayFormat=h,this.options.delimiter||(this.options.delimiter=n),this.options.decimalDelimiter||(this.options.decimalDelimiter=l),this.options.customModelFormatter||(this.options.customModelFormatter=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||"");"date"!=o||"calendar"!=this.options.inputType||this.options.ioFormat||(this.options.ioFormat=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/ioFormat[@valueType="'+this.options.calendarValueType+'"]/@defaultValue'),this.options.ioFormat||("yearMonthDate"==this.options.calendarValueType?this.options.ioFormat="yyyyMMdd":"yearMonth"==this.options.calendarValueType?this.options.ioFormat="yyyyMM":"yearMonthDateTime"==this.options.calendarValueType?this.options.ioFormat="yyyyMMddHHmm":"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.options.ioFormat="yyyyMMddHHmmSS"))),
"default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):this.formatter="float"===o||"bigDecimal"===o?WebSquare.format.createFormatter(o,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.mainGrid.scope_id,this.mainGrid.id):WebSquare.format.createFormatter(o,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.mainGrid.scope_id,this.mainGrid.id),this.emptyFormatter=WebSquare.format.createFormatter(o,"",null,null,null,null,this.mainGrid.scope_id,this.mainGrid.id)}catch(t){r.w.printStackTrace(t)}},A.prototype.getDisplayData=function(t){return this.formatter&&(t=this.formatter.format(t)),"secret"==this.options.inputType&&(t=t.replace(/./gi,"●")),t},A.prototype.initializeCellInfo=function(){},A.prototype.handleEndEdit=function(t,e,i){try{if(t=t||{},i=i||{},this.options.embeddedInput)return!0;if(this.mainGrid.rollbackCommitFlag=!1,this.mainGrid.editedCell&&0==this.mainGrid.editMode&&(this.mainGrid.editMode=!0),this.mainGrid.editMode){var o=this.mainGrid.editedCell;if(o._getEditedValue){var a=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),n=this.editRowIndex,l=this.mainGrid._getGroupbyDisplayRowIndex(n),h=o._getEditedValue();if((c=d.B.fireEvent(this.mainGrid,"oneditend",l,a,h,t))+""=="false")return this.mainGrid.getInput(this).focus(),d.B.stopEvent(t),!1}if(!o.validate())return d.B.stopEvent(t),!1;if(this.mainGrid.editedCell=null,this.mainGrid.editMode=!1,!i.otherClick){p=null;null!=this.editTd&&(p=this.mainGrid.dataList.getCellData(this.editRowIndex,o.options.id),this._handleEndEdit(t,e,i));var c=this._afterEndEdit(o,p);return o=null,c}var u=null,p=null;null!=this.editTd&&(p=this.mainGrid.dataList.getCellData(this.editRowIndex,o.options.id),u=this._handleEndEdit(t,e,i)),s.v.setTimer((function(t,e){null!=this.editTd&&this._handleEndEdit_focus(e),this._afterEndEdit(t,p),t=null,e=null}),{key:this.id+"_handleClickEventDocument",caller:this,args:[o,u]}),u=null,o=null}}catch(t){r.w.printStackTrace(t,null,this)}},A.prototype._afterEndEdit=function(t,e){var i,o=this.mainGrid.dataList._getCellData(this.editRowIndex,t.options.id),s=this.editRowIndex,r=t.options.id,n=s,l=this.mainGrid.getColumnIndex(r);if(this.editTd){var h=a.D.getDataPrefix("colMerged");i=this.editTd.getAttribute(h)}if("0"==i&&!t.options.colMergeEdit&&!this.mainGrid.groupbyStatus.grouped){var c=function(t,i,o,s){for(var r=t;t+1<this.mainGrid.getDataLength();){t+=1;var a=this.mainGrid.upperGroupingTest(t,i),n=this.mainGrid.dataList._getCellData(t,i);if(!a){l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}if(n!=e){var l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id)
;break}this.mainGrid.dataList.__setCellData(t,i,s)}for(t=r;t-1>=0;){a=this.mainGrid.upperGroupingTest(t,i);t-=1;n=this.mainGrid.dataList._getCellData(t,i);if(!a){l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}if(n!=e){var h,l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}this.mainGrid.dataList.__setCellData(t,i,s)}i=this.mainGrid.getColumnIndex(i);this.mainGrid.applyColumnStyleOptions(i)};c.call(this,s,r,l,o);var u=this.mainGrid.upperToLowerColumnRelation[r];if(u)for(var p=0;p<u.length;p++){var g=u[p],m=this.mainGrid.dataList._getCellData(s,g),f=this.mainGrid.getColumnIndex(g),b=this.mainGrid.getCellInfo(g);c.call(b,s,g,f,m)}}t.options.colMergeEdit&&!this.mainGrid.groupbyStatus.grouped&&this.mainGrid.setColMergeCellData(n-this.mainGrid.rowIndex,n,l);var y=this.mainGrid.dataList._getCellData(n,l),v=n+"_"+l;if(null!=this.mainGrid.cellMergeInfo[v]){var w=this.mainGrid.cellMergeInfo[v].rowSpan,S=this.mainGrid.cellMergeInfo[v].colSpan;for(p=0;p<w;p++)for(var C=0;C<S;C++)0===p&&0===C||this.mainGrid.dataList.__setCellData(n+p,l+C,y)}Math.abs(this.changedCellHeight)>3&&this.mainGrid.notifyRowChanged(n);var _=this.mainGrid._getGroupbyDisplayRowIndex(n),x=d.B.fireEvent(this.mainGrid,"onafteredit",_,l,y,this.mainGrid.lastEvent);return this.mainGrid.lastEvent=null,x=0!=x,this.mainGrid.rollbackCommitFlag=!0,x},A.prototype.handleScrollY=function(t){return this.validate()?this.handleEndEdit(t):this.handleCancelEdit(t)},A.prototype.validate=function(){return!0},A.prototype._handleEndEdit=function(t,e,i){var o=this._handleEndEdit_common(t);if((i=i||{}).otherClick)return o;this._handleEndEdit_focus(o,e,i.focuseChanged)},A.prototype._handleEndEdit_common=function(t,e){return null},A.prototype._handleEndEdit_focus=function(t){return null},A.prototype.handleCancelEdit=function(t){this.options.embeddedInput||(this.mainGrid.editedCell=null,this.mainGrid.editMode=!1,this._handleCancelEdit(t))},A.prototype._handleCancelEdit=function(t){},A.prototype.removeCellData=function(t,e){},A.prototype.doDefaultAction=function(t){},A.prototype.setMergedCol=function(t,e,i,o){var s=t,r=new Array;for(r[t]=!0;t<this.mainGrid.getDataLength();){if(t+=1,!(a=this.mainGrid.upperGroupingTest(t,e)))break;if(this.mainGrid.dataList._getCellData(t,e)!=i)break;this.mainGrid.dataList.__setCellData(t,e,o),r[t]=!0}for(t=s;t>0;){var a=this.mainGrid.upperGroupingTest(t,e);if(t-=1,!a)break;if(this.mainGrid.dataList._getCellData(t,e)!=i)break;this.mainGrid.dataList.__setCellData(t,e,o),r[t]=!0}e=this.mainGrid.getColumnIndex(e);return this.mainGrid.applyColumnStyleOptions(e),r},A.prototype.getEscape=function(){return""!=this.options.escape?this.options.escape:this.mainGrid.options.escape},A.prototype.getColumnIndex=function(t){return t||(t=this.colID),this.mainGrid.getColumnIndex(t)},A.prototype.setMaxLength=function(t){try{if(this.options.maxlength=this.options.maxLength=t,"autoComplete"==this.options.inputType)this.autoComplete&&this.autoComplete.setMaxLength(t);else if("text"!==this.options.inputType&&"secret"!==this.options.inputType||1!=this.options.embeddedInput){this.mainGrid.getInput(this).setMaxLength(t)}else for(var e=this.mainGrid.tdIdList.length,i=this.mainGrid.getColumnIndex(this.options.id),o=this.mainGrid.getRowCount(),s=0;s<o;s++)this.mainGrid.getInput(this,this.mainGrid.data_td_list[s*e+i]).setMaxLength(t)}catch(t){r.w.printStackTrace(t,null,this)}},A.prototype.setFloatMaxLength=function(t){try{this.options.maxlength=this.options.maxLength="-1",this.mainGrid.getInput(this).setFloatMaxLength(t)}catch(t){r.w.printStackTrace(t,null,this)}},A.prototype.refreshCell=function(){},A.prototype._checkFastScroll=function(t,e,i,o){try{var s="string"!=typeof t||!1===this.mainGrid._regDetectDOM.test(t);return e&&null!=e.textContent&&this.mainGrid.hasClass(e,i)&&s&&!0===o}catch(t){
r.w.printStackTrace(t,null,this)}},A.itemsetControl=function(){},A.itemsetControl.prototype.initializeCellInfo=function(t){try{if(this.internal&&this.initializeInfo?this.compID=this.mainGridId+"_"+this.options.inputType+"_"+this.initializeInfo.rowIndex+"_"+this.colID+"_"+this.id:this.compID=this.mainGridId+"_"+this.options.inputType+"_"+this.colID,"select"===this.options.inputType&&""!=this.options.selectSetter)this.selectSetted=!1,this.resetMatchInfo=!0;else{var e,i="";if("json"===t._elementType)t._element.N="w2:"+this.options.inputType,this.xml=t;else{var s=(i=a.D.isIE("6 7")&&this.internal&&t._element.outerHTML?WebSquare.xml.nodeWellFormed(t._element.outerHTML):WebSquare.xml.serialize(t._element)).indexOf("xmlns:w2")<0?' xmlns:w2="http://www.inswave.com/websquare"':"",n=this.options.inputType;i=(i=i.wq_replaceAll("<w2:column","<w2:"+n+s)).wq_replaceAll("</w2:column","</w2:"+n);var l=WebSquare.xml.parse(i,!0);this.xml=new WebSquare.Elem(l.documentElement)}o.x.extend(this,W.E.prototype),this.hasRef=!1,"checkcombobox"!==this.options.inputType&&(this.selectedIndex=void 0===this.options.selectedIndex?-1:parseInt(this.options.selectedIndex,10)),this.options.selectedData="false"!=this.options.selectedData&&!1!==this.options.selectedData,"select"===this.options.inputType?e="SelectBox":"autoComplete"===this.options.inputType?e="AutoComplete":"checkcombobox"===this.options.inputType&&(e="CheckCombobox"),e&&(this.options.chooseOptionLabel="-선택-"===this.options.chooseOptionLabel?WebSquare.language.getMessage(e+"_choose"):this.options.chooseOptionLabel),this.internal?this.itemsetObj=this.initializeInfo.itemSet?this.initializeInfo.itemSet:{nodeset:"",label:"",value:""}:this.itemsetObj=WebSquare.WebSquareparser.parseItemset(this.xml),this.resetMatchInfo=!0;var h=this.itemsetObj.nodeset.wq_replaceAll(" ","");if(this.internal&&"gridViewItemset"==this.options.itemTableType?this.existGridViewItemsetNode=!0:(this.existGridViewItemsetNode=WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:gridViewItemset")[0],this.existGridViewItemsetNode&&this.options.embeddedInput&&(c.k.printLog("not support embeddedInput in gridViewItemset ["+this.mainGrid.id+"."+this.id+"]"),this.options.embeddedInput=!1)),""!=this.itemsetObj.nodeset&&h.indexOf("ref(")>=0){this.hasRef=!0;var d=this.itemsetObj.nodeset;this.refStr='"'+this.refReplace(d)+'"';for(var u=d.match(/ref\('([^']*)'\)/g),p=0;p<u.length;p++){var g=u[p].slice(5,-2),m=this.mainGrid.getCellInfo(g);m.refArr||(m.refArr=[]),m.refArr.push(this.colID)}if(this.refHash=[],this.refItemArr=[],"select"===this.options.inputType&&this.options.embeddedInput)WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset","")}else if(""!=this.itemsetObj.nodeset&&h.indexOf("data:")>=0){var f=this.itemsetObj.nodeset.replace("data:","").split(".");this.dataComp=f[0]}else this.matchInfo=this.setMatchInfo()}this.refArr||(this.refArr=[]),this._initializeCellInfo()}catch(t){r.w.printStackTrace(t,null,this)}},A.itemsetControl.prototype.getItemText=function(t){try{var e="";if(t>-1&&t<this.itemArr.length){switch(e=this.itemArr[t].orgLabel||this.itemArr[t].label,this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}switch(this.options.displayMode){case"0":break;case"1":e=this.itemArr[t].value+this.options.delimiter+e;break;case"2":e=e+this.options.delimiter+this.itemArr[t].value;break;case"3":e=this.itemArr[t].value}}return e}catch(t){r.w.printStackTrace(t,null,this)}},A.itemsetControl.prototype._initDisplayMode=function(t){try{switch(this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}
}catch(t){r.w.printStackTrace(t,null,this)}},A.itemsetControl.prototype.setColumnNodeSet=function(t,e,i,o){try{if(this.internal)this.itemsetObj.nodeset=t,this.itemsetObj.label=e,this.itemsetObj.value=i;else{if("json"===this.xml._elementType){var a=[];a.push({N:"w2:label",T:1,A:{ref:e}}),a.push({N:"w2:value",T:1,A:{ref:i}});var n=WebSquare.Elem.api.getElementsByTagName(this.xml,"itemset",s.v._XML_NAMESPACE.W2)[0];n?(n._element.A.nodeset=t,n._element.E=a):this.xml._element.E=[{T:1,N:"w2:choices",E:[{T:1,N:"w2:itemset",A:{nodeset:t},E:a}]}]}else{var l=WebSquare.xml.findNode(this.xml,"*['choices'=local-name()]['"+s.v._XML_NAMESPACE.W2+"'=namespace-uri()]");for(null==l&&(l=WebSquare.xml.createNode(this.xml,"w2:choices"),WebSquare.xml.appendChild(this.xml,l));l&&l.firstChild;)l.removeChild(l.firstChild);var h="<w2:itemset xmlns:w2='http://www.inswave.com/websquare' nodeset='"+t+"'><w2:label ref='"+e+"'></w2:label><w2:value ref='"+i+"'></w2:value></w2:itemset>",d=WebSquare.xml.parse(h,!0).documentElement;WebSquare.xml.appendChild(l,d)}this.itemArr=[],this.initializeCellInfo(this.xml)}var c=this.options.inputType;if(1==this.options.embeddedInput){var u=this.mainGrid.tdIdList.length,p=this.mainGrid.getColumnIndex(this.options.id);if(isNaN(o))for(var g=this.mainGrid.getRowCount(),m=this.mainGrid.rowIndex;m<g;m++){(f=this.mainGrid.data_td_list[(m-this.mainGrid.rowIndex)*u+p])&&this.mainGrid.getInput(this,f).setNodeSet(t,e,i)}else{var f,b=o-this.mainGrid.rowIndex;if(b>=0)(f=this.mainGrid.data_td_list[b*u+p])&&this.mainGrid.getInput(this,f).setNodeSet(t,e,i)}}else this[c]&&this[c].setNodeSet(t,e,i);t.indexOf("data:")>=0&&(this.dataComp=t.slice("data:".length))}catch(t){r.w.printStackTrace(t,null,this)}},A.itemsetControl.prototype.setColumnGridItemset=function(t){try{if("select"!==this.options.inputType&&"autoComplete"!==this.options.inputType)return;var e=t.nodeset,i=t.label,o=t.value;if(this.internal)this.itemsetObj.nodeset=e,this.itemsetObj.label=i,this.itemsetObj.value=o;else{if("json"===this.xml._elementType){var a=[],n={};for(var l in t)"object"!=typeof t[l]&&"function"!=typeof t[l]&&null!=t[l]&&(n[l]=t[l]);for(var h=0;h<t.item.length;h++)a.push({N:"w2:item",T:1,A:t.item[h]});var d=WebSquare.Elem.api.getElementsByTagName(this.xml,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0];if(d){for(var l in n)d._element.A[l]=n[l];d._element.E=a}else this.xml._element.E=[{T:1,N:"w2:choices",E:[{T:1,N:"w2:gridViewItemset",A:n,E:a}]}]}else{var c=WebSquare.Elem.api.getElementsByTagName(this.xml,"choices",s.v._XML_NAMESPACE.W2);for(null==c&&(c=WebSquare.xml.createNode(this.xml,"w2:choices"),WebSquare.xml.appendChild(this.xml,c));c&&c.firstChild;)c.removeChild(c.firstChild);if(s.v.isXML(t))WebSquare.xml.appendChild(c,t);else{var u="<w2:gridViewItemset xmlns:w2='http://www.inswave.com/websquare' nodeset='"+e+"'></w2:gridViewItemset>",p=WebSquare.xml.parse(u,!0),g=p.documentElement;for(var m in t)if("item"===m)for(h=0;h<t.item.length;h++){var f=WebSquare.xml.createElement(p,"w2:item"),b=t.item[h];for(var y in b)f.setAttribute(y,b[y]);WebSquare.xml.appendChild(g,f)}else"nodeset"!==m&&g.setAttribute(m,t[m]);WebSquare.xml.appendChild(c,g)}}this.initializeCellInfo(this.xml)}if("select"===this.options.inputType&&1==this.options.embeddedInput){var v=this.mainGrid.tdIdList.length,w=this.mainGrid.getColumnIndex(this.options.id),S=this.mainGrid.getRowCount();for(h=0;h<S;h++)this.mainGrid.getInput(this,this.mainGrid.data_td_list[h*v+w]).setGridItemset(t)}this[this.options.inputType]&&this[this.options.inputType].setGridItemset(t),e.indexOf("data:")>=0&&(this.dataComp=e.slice("data:".length))}catch(t){r.w.printStackTrace(t,null,this)}},A.itemsetControl.prototype.getColumnDataListInfo=function(){try{if(this[this.options.inputType])return this[this.options.inputType].getDataListInfo();var t=WebSquare.Elem.api.getElementsByTagName(this.xml,"choices",s.v._XML_NAMESPACE.W2)[0];if(t){var e=WebSquare.WebSquareparser.parseItemset(t),i={}
;return e&&""!==e.nodeset?(e.nodeset.match("data:")?(i.nodeset=e.nodeset.slice(0),i.id=i.nodeset.wq_replaceAll("data:",""),i.value=e.value,i.label=e.label):(i.nodeset=e.nodeset.slice(0),i.value=e.value,i.label=e.label),i):null}return null}catch(t){r.w.printStackTrace(t,null,this)}},A.itemsetControl.prototype.getDisplayData=function(t,e,i){var o=this.getData(t,e,i);return null==o&&(o=""),i&&i.emptyValue&&o===i.emptyValue?o="":o!=t&&""==o&&(o=t),o},A.itemsetControl.prototype.setMatchInfo=function(t){this.modelControl=new WebSquare.modelControl(this.colID,this.options.model,this.options.ref,this.options.bind,this.options._scope_obj_uuid),this.existGridViewItemsetNode?this.initializeGridViewItemArr(this.xml):this.initializeItemArr(this.xml),0==this.itemArr.length?this.resetMatchInfo=!0:this.resetMatchInfo=!1;for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].label=this.getItemText(e);var i={};if(1==this.options.allOption){var o=WebSquare.language.getMessage("Grid_all")||"-전체-";this.itemArr=[{label:o,value:WebSquare.allValue}].concat(this.itemArr)}if(1==this.options.chooseOption&&"checkcombobox"!==this.options.inputType){var s=this.options.chooseOptionLabel;"$blank"==s&&(s=""),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}this.hasRef&&(this.refItemArr[this.itemsetObj.nodeset]=this.itemArr);var r=this.options.inputType.toUpperCase();for(e=0;e<this.itemArr.length;e++){var a=this.itemArr[e];i[r+"_"+a.value]=a.label}return i},A.itemsetControl.prototype.getMatchInfo=function(t){var e=[];return"select"===this.options.inputType&&""!=this.options.selectSetter?e=this.matchInfo:this.hasRef?e=this.getRefMatchInfo(t):this.hasRef||(this.resetMatchInfo&&(this.matchInfo=this.setMatchInfo(t)),e=this.matchInfo),e},A.itemsetControl.prototype.getRefMatchInfo=function(t){this.targetRowIndex=t;var e=new Function("_this","return "+this.refStr)(this);if(null==this.refHash[e]||this.resetMatchInfo){this.itemsetObj.nodeset=e,WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",e);var i=this.setMatchInfo(t);return this.refHash[e]=i,i}return this.refHash[e]},A.itemsetControl.prototype.getRefItemArr=function(t){this.getRefMatchInfo(t);var e=new Function("_this","return "+this.refStr)(this);return this.refItemArr[e]},A.itemsetControl.prototype.getRefValue=function(t){return'"'+this.mainGrid.dataList._getCellData(this.targetRowIndex,t)+'"'},A.itemsetControl.prototype.refReplace=function(t){try{var e=t.replace(/ref\('([^']*)'\)/,"\"+_this.getRefValue('$1')+\"");return e!=t?this.refReplace(e):e}catch(t){r.w.printStackTrace(t,null,this)}},A.itemsetControl.prototype.refXmlReplace=function(t){try{var e=t.replace(/ref\('([^']*)'\)/,"'+_this.getRefValue('$1')+'");return e!=t?this.refXmlReplace(e):e}catch(t){r.w.printStackTrace(t,null,this)}},A.text=function(){},A.text.prototype.setInnerHTML=function(t,e,i,o,n){var l=this.mainGrid._getGroupbyDisplayRowIndex(i);if(!this.options.embeddedInput||this.mainGrid._getEditDisabled(i,o)||this.mainGrid.___getEditReadOnly(i,o)||this.mainGrid.groupbyStatus.grouped){if(this.mainGrid.options.titleFormatter)try{var h;if("function"!=typeof this.mainGrid.options.titleFormatter){var d=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof d&&(this.mainGrid.options.titleFormatter=d,h=d.call(this,i,o,e))}else h=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",h)}catch(t){r.w.printStackTrace(t,null,this)}else if(this.options.title)t.setAttribute("title",this.options.title);else if(this.mainGrid.options.titleAuto){var c=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";""!==e?t.setAttribute("title",c+" "+e):t.setAttribute("title",c+WebSquare.language.getMessage("Grid_text"))}var u=null;if(this.options.escapeFormatter)try{
"function"==typeof this.options.escapeFormatter?u=this.options.escapeFormatter:"function"==typeof(u=a.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id))&&(this.options.escapeFormatter=u)}catch(t){u=null}F=null;if(this.options.customFormatter)try{"function"==typeof this.options.customFormatter?F=this.options.customFormatter:"function"==typeof(F=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=F)}catch(t){F=null}var p=null;if(this.options.customModelUnformatter)try{"function"==typeof this.options.customModelUnformatter?p=this.options.customModelUnformatter:"function"==typeof(p=a.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id))&&(this.options.customModelUnformatter=p)}catch(t){p=null}var g=e;p&&this.options.customModelUnformatter?(this.useCustomModelFormatter=!0,g=p.call(this.mainGrid,e,l,o)):this.useCustomModelFormatter=!1,this.options.maskFormat&&(g=this.mainGrid.getInput(this,t,e).maskFormatModelUnFormat(g)),"function"==typeof u?(this.useEscapeFormatter=!0,g=u.call(this.mainGrid,e,l,o)):this.useEscapeFormatter=!1;var m=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;(m=a.D.getBoolean(m))&&(g=this.useCustomModelFormatter?WebSquare.xml._encode(g+""):WebSquare.xml._encode(e+""));O=g;if(this.options.editFormat&&this.options.editFormat.length>0){var f=this.options.editFormat.split("||").sort((function(t,e){return t.replace(/[^a-z^A-Z^0-9]/g,"").length-e.replace(/[^a-z^A-Z^0-9]/g,"").length}));O=WebSquare.text.dynamicMask(O,f,{"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},"!":{escape:!0}}).value}B=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&B&&(O=this.formatter.format(g)),"secret"==this.options.inputType&&(O=O.replace(/./gi,"●")),"function"==typeof F?(this.useCustomFormatter=!0,V=F.call(this.mainGrid,e,O,l,o)):(this.useCustomFormatter=!1,V=O),this.mainGrid.options.plainText&&!1===this.useCustomFormatter&&!this.options.displayFormatter&&t.firstChild&&t.firstChild.firstChild)t.firstChild.firstChild.data=V;else{var b=this.mainGrid.___getEditReadOnly(i,o),y=this.mainGrid._getEditDisabled(i,o),v="",w=[];w.push("w2grid_input"),this.mainGrid.options.checkEditableInputClass&&(b||y)&&(w=[]),"secret"==this.options.inputType&&s.v.browserCheck.ieAllVersion&&w.push("w2grid_secret"),b&&w.push("w2grid_input_readonly"),y&&w.push("w2grid_input_disabled");var S=t.firstChild,C=this._checkFastScroll(V,S,"w2grid_input",n&&!0===n.scroll);if(S&&(!y&&S.className.indexOf("w2grid_input_disabled")>-1||y&&-1===S.className.indexOf("w2grid_input_disabled")||!b&&S.className.indexOf("w2grid_input_readonly")>-1||b&&-1===S.className.indexOf("w2grid_input_readonly"))&&(C=!1),C&&m){var _="string"==typeof V?WebSquare.xml.__decode(V):V;S.textContent=_}else{"span"==this.mainGrid.options.dataTag&&w.push("w2grid_span"),v=" class='",v+=w.join(" "),v+="'";var x=!1,I=t.firstChild;m&&I&&("NOBR"===I.tagName||"SPAN"===I.tagName&&I.className.indexOf("w2grid_span")>-1)&&" class='"+I.getAttribute("class")+"'"===v&&1===I.attributes.length&&(x=!0),x?t.firstChild.innerHTML=V:t.innerHTML="<"+this.mainGrid.options.dataTag+" "+v+">"+V+this.mainGrid.dataTagClose}this.mainGrid.hasClass(t,"w2grid_input_table")||(t.className="w2grid_input_table "+t.className)}}else{var T=this.mainGrid.getInput(this,t,e);null==T.render.parentNode&&(t.innerHTML="",t.appendChild(T.render)),T.blur();var k=a.D.getDataPrefix("rowindex");T.render.setAttribute(k,i);var D=!1;if(this.mainGrid.options.autoResizeEmbeddedInput){var L=!1;this.mainGrid.__bResizeObj&&(L=this.mainGrid.__bResizeObj.width!==this.mainGrid.resizeObj.width||this.mainGrid.__bResizeObj.height!==this.mainGrid.resizeObj.height),this.mainGrid.__bResizeObj={width:this.mainGrid.resizeObj.width,height:this.mainGrid.resizeObj.height},D=!0!==T._autoResizeEmbeddedInput&&!1===L}if(!0===D){var W=0,A=0,M=!1;"none"==t.parentNode.style.display&&(t.parentNode.style.display="",
M=!0),null==T.render.parentNode&&(t.innerHTML="",t.appendChild(T.render)),this.mainGrid.embeddedStyleObj||(this.mainGrid.embeddedStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10),inputTop:parseInt(WebSquare.style.getStyle(T.render,"padding-top"),10),inputBottom:parseInt(WebSquare.style.getStyle(T.render,"padding-bottom"),10),inputLeft:parseInt(WebSquare.style.getStyle(T.render,"padding-left"),10),inputRight:parseInt(WebSquare.style.getStyle(T.render,"padding-right"),10)});var E=parseInt(WebSquare.style.getStyle(T.render,"border-top-width"),10),q=parseInt(WebSquare.style.getStyle(T.render,"border-bottom-width"),10),R=parseInt(WebSquare.style.getStyle(T.render,"border-left-width"),10),N=parseInt(WebSquare.style.getStyle(T.render,"border-right-width"),10);W=t.offsetHeight-parseInt(WebSquare.style.getStyle(t,"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t,"border-bottom-width"),10),W-=this.mainGrid.embeddedStyleObj.top+this.mainGrid.embeddedStyleObj.bottom,W-=E+q,this.mainGrid.embeddedWidthObj[o]&&!this.mainGrid.embeddedWidthObj[o].isChanged||(this.mainGrid.embeddedWidthObj[o]={isChanged:!1,width:t.clientWidth}),A=this.mainGrid.embeddedWidthObj[o].width,A-=this.mainGrid.embeddedStyleObj.left+this.mainGrid.embeddedStyleObj.right,A-=R+N,A-=this.mainGrid.embeddedStyleObj.inputLeft+this.mainGrid.embeddedStyleObj.inputRight,M?t.parentNode.style.display="none":(a.D.isIE("6 7")||a.D.isSpartan())&&(W-=2),a.D.isOpera()&&(W+=2),T.setSize(A-2,W-(this.mainGrid.embeddedStyleObj.inputTop+this.mainGrid.embeddedStyleObj.inputBottom)),T.setStyle("lineHeight",W+"px"),T._autoResizeEmbeddedInput=!0}else null==T.render.parentNode&&(t.innerHTML="",t.appendChild(T.render));"all"==this.options.applyFormat||this.options.displayFormat||this.options.displayFormatter||(e=this.getDisplayData(e));var F=null;if(this.options.customFormatter)try{"function"==typeof this.options.customFormatter?F=this.options.customFormatter:"function"==typeof(F=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=F)}catch(t){F=null}var O=e,B=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&B&&(O=this.formatter.format(O)),T.setValue(e),"function"==typeof F){this.useCustomFormatter=!0;var V=F.call(this.mainGrid,e,O,l,o);T.render.value=V}this.options.textAlign?T.setStyle("text-align",this.options.textAlign):T.setStyle("text-align",""),t.removeAttribute("tabIndex"),t.removeAttribute("title")}},A.text.prototype.setEditMode=function(t,e){try{if(this.options.embeddedInput)return;this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var i=this.mainGrid.getInput(this);this.comp=i,this.options.maskFormat||(i.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,i.options.applyFormat=this.options.applyFormat);var o=this.mainGrid.dataList._getCellData(e,this.colID);if("all"===this.options.applyFormat&&this.options.displayFormat&&"text"!=this.options.dataType&&"date"!=this.options.dataType&&"time"!=this.options.dataType){var s=this.options.decimalDelimeter||".",n=(o+"").split(s);n[1]&&0==parseInt(n[1])&&(o=n[0])}i.setValue(o),document.activeElement!=i.render&&i.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==i.options.editType?i.select():"focus"==i.options.editType&&(a.D.isIEAllVersion()||a.D.isFF()||a.D.isSpartan())&&WebSquare.text.setCaretPos(i.render,i.render.value.length)}catch(t){r.w.printStackTrace(t,null,this)}},A.text.prototype.setPosition=function(){var t={top:0,left:0,width:0,height:0};if(a.D.isFF()?t={top:-1,left:0,width:0,height:0}:a.D.isOpera()?t={top:0,left:0,width:0,height:1
}:a.D.isIEAllVersion("9 10 11")?t={top:-1,left:-1,width:0,height:0}:a.D.isSpartan()&&(t={top:0,left:-1,width:0,height:0}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.offsetTop+1+t.top,s=i.offsetLeft+1+t.left,r=i.clientWidth-6+t.width,n=i.clientHeight-2+t.height,l=this.mainGrid.getInput(this);if(""!=this.options.imeMode)l.render.style.imeMode=this.options.imeMode;else{var h=this.mainGrid.getColumnOption(this.options.col_id,"dataType");l.render.style.imeMode="number"==h?"disabled":""}if(l.show(),this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}this.mainGrid.hasClass("w2grid_adaptive_crosstab")&&(s-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft,l.render.style.lineHeight=n+"px");l.render.style.top=o+"px",l.render.style.left=s+"px",l.render.style.width=r+"px",l.render.style.height=n+"px",a.D.isIE()&&(l.render.style.lineHeight=n+"px"),l.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign},A.text.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},A.text.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);return this.setEditData(e),e}catch(t){r.w.printStackTrace(t,null,this)}},A.text.prototype._handleEndEdit_focus=function(t,e){!this.mainGrid.isMobile&&e||t&&t.hide()},A.text.prototype._getEditedValue=function(t){return"bigDecimal"==this.mainGrid.getColumnOption(this.options.col_id,"dataType")?WebSquare.bigDecimal(this.mainGrid.getInput(this).getValue()).toString():this.mainGrid.getInput(this).getValue()},A.text.prototype._handleCancelEdit=function(t){try{var e,i=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide(),e=window.getSelection?window.getSelection():document.selection;var o=document.createRange();o.selectNodeContents(this.editTd),e.removeAllRanges(),e.addRange(o),e.collapseToStart()}catch(t){r.w.printStackTrace(t,null,this)}},A.text.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.text.prototype.setEditData=function(t){try{var e=t.getValue();if("number"==(o=this.mainGrid.getColumnOption(this.id,"dataType"))||"float"==o){var i=e.wq_trim();"."!==i&&"-"!==i&&"+"!==i||(e="")}e=t.validator.validateString(e),t.setValueNM(e,!0),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var o=this.mainGrid.getColumnOption(this.options.col_id,"dataType");this.mainGrid.options.numberCasting&&"number"==o&&""!=e&&(e=Number(e));var s={};s[this.mainGrid.id]=!0;var n=a.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);if("function"==typeof n){this.useCustomModelFormatter=!0;var l=this.getDisplayData(e);e=n.call(this.mainGrid,e,l,this.editRowIndex,this.getColumnIndex(this.colID))}else this.useCustomModelFormatter=!1;if(e=this.maskFormatModelFormat(e),"float"===o&&e[e.length-1]===t.options.decimalDelimiter){var h=e.split(t.options.decimalDelimiter);e=h[0]}this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,s)}catch(t){r.w.printStackTrace(t,null,this)}},A.text.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="";if(this.options.maskFormat)if(this.options.maskFormatModelExcludeChar)for(var i=this.options.maskFormatModelExcludeChar.split(""),o=0;o<t.length;o++){for(var s=!1,a=0;a<i.length;a++)if(t[o]==i[a]){s=!0;break}s||(e+=t[o])}else e=t;else e=t;return e}catch(t){r.w.printStackTrace(t,null,this)}},A.link=function(){},A.link.prototype.setInnerHTML=function(t,e,i,o,s){
var n=" tabIndex='-1' ";"none"==this.mainGrid.options.focusMode?n=" tabIndex='0' ":1==this.mainGrid.options.keyMoveEditMode&&(n="");var l=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;(l=a.D.getBoolean(l))&&(e=WebSquare.xml._encode(e+""));var h,d,c=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),u=this.getDisplayData(e);if("function"==typeof c?(this.useCustomFormatter=!0,h=c.call(this.mainGrid,e,u,i,o)):(this.useCustomFormatter=!1,h=u),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var p=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof p&&(this.mainGrid.options.titleFormatter=p,d=p.call(this,i,o,e))}else d=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){r.w.printStackTrace(t,null,this)}var g="";(d?g=" title='"+d+"'":this.options.title&&(g=" title='"+this.options.title+"'"),g)||this.mainGrid.options.titleAuto&&(g=" title='"+(this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"")+WebSquare.language.getMessage("Grid_link")+"'");var m=this.options.voidNull?"javascript:void(null);":"";t.innerHTML=h||g?this.mainGrid.dataTagOpen+"<a href='"+m+"' onclick='event.returnValue=false; return false;'"+n+" "+g+">"+h+"</a>"+this.mainGrid.dataTagClose:this.mainGrid.dataTagOpen+this.mainGrid.dataTagClose},A.link.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=d.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=a.D.getDataPrefix("col_id"),r=this.mainGrid.getColumnIndex(e.getAttribute(s))}else{var n=this.mainGrid.getLastFocusedCell();i=n.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),r=n.focusedColIndex}this.mainGrid._getEditDisabled(i,r)||this.mainGrid.___getEditReadOnly(i,r)||d.B.fireEvent(this.mainGrid,"oncellclick",o,r,this.options.id)},A.checkbox=function(){},A.checkbox.prototype.initializeCellInfo=function(t){switch(this.options.valueType){case"binary":this.setBooleanValue("1","0");break;case"boolean":this.setBooleanValue("true","false");break;case"other":"$blank"==this.options.trueValue&&(this.options.trueValue=""),"$blank"==this.options.falseValue&&(this.options.falseValue=""),this.setBooleanValue(this.options.trueValue,this.options.falseValue)}if(this.options.embeddedInput&&(this.mainGrid.options.preventMultipleClick=!1),this.options.checkboxLabelColumn)for(var e=this.options.checkboxLabelColumn.split(","),i=0;i<e.length;i++){var o=e[i];this.mainGrid.getColumnIndex(o)&&this.mainGrid.setLabelColumnAssociation(e[i],this.id)}},A.checkbox.prototype.setBooleanValue=function(t,e){this.options.trueValue=t+"",this.options.falseValue=e+""},A.checkbox.prototype.setInnerHTML=function(t,e,i){var o,s=e+""==this.options.trueValue,n=a.D.getDataPrefix("col_id"),l=a.D.getDataPrefix("rowindex");if(o=this.options.noDisabledOnReadOnly?this.mainGrid._getEditDisabled(i,t.getAttribute(n)):this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,t.getAttribute(n)),this.options.embeddedInput){var h=this.mainGrid.getInput(this,t,s);h.setAttribute(l,i),h.checked=s,h.disabled=o}else{var u,p;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var g=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof g&&(this.mainGrid.options.titleFormatter=g,p=this.mainGrid.getColumnIndex(this.options.id),u=g.call(this,i,p,e))}else u=this.mainGrid.options.titleFormatter.call(this,i,p,e)}catch(t){r.w.printStackTrace(t,null,this)}var m=u||this.options.title||"";if(m)m=" title='"+m+"'";else if(this.mainGrid.options.titleAuto){var f=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";m=s?" title='"+f+WebSquare.language.getMessage("Grid_title")+"'":" title='"+f+WebSquare.language.getMessage("Grid_title_not_choose")+"'"}
var b="none"==this.mainGrid.options.focusMode?"":" tabIndex='-1'",y=s?" checked":"",v=o?" disabled='true'":"",w=this.options.visibleFunc,S="";if(this.options.checkboxLabel||this.options.checkboxLabelColumn||this.options.checkboxLabelFormatter){var C=this.mainGridId+"_checkbox_"+this.id,_=C+"_"+i,x=this.options.checkboxLabel||"";if(this.options.checkboxLabelColumn){for(var I=this.options.checkboxLabelColumn.split(","),T="",k=this.options.checkboxLabelDelimiter||this.mainGrid.options.labelDelimiter||" ",D=0;D<I.length;D++){var L=this.mainGrid.bodyToHeaderRelation[I[D]];if(D===I.length-1)this.mainGrid.options.showCheckboxLabelUserFormat?T+=" "+this.mainGrid.getHeaderValue(L)+" "+this.mainGrid._getCellDisplayData(i,I[D],{removeTag:!0}):T+=this.mainGrid._getCellDisplayData(i,I[D],{removeTag:!0});else if(this.mainGrid.options.showCheckboxLabelUserFormat)T+=(0===D?i+1+"행"+k:"")+" "+this.mainGrid.getHeaderValue(L)+" "+this.mainGrid._getCellDisplayData(i,I[D],{removeTag:!0})+k;else T+=this.mainGrid._getCellDisplayData(i,I[D],{removeTag:!0})+k}x=x?T+k+x:T}if(this.options.checkboxLabelFormatter)try{var W=a.D.getGlobalFunction(this.options.checkboxLabelFormatter,this.scope_id);"function"==typeof W&&(x=W.call(this.mainGrid,i,this.mainGrid.getColumnIndex(this.colID),x))}catch(t){c.k.printLog(this.mainGrid.id+"_"+this.id+" checkboxLabelFormatter error : "+t.message)}x&&this.mainGrid.options.titleAuto&&!this.options.title&&(m=m.substring(0,m.length-1)+" "+x+"'"),S="<INPUT type='checkbox' "+m+b+y+v+" id='"+_+"' name='"+C+"'/>";var A="<label class='w2checkbox_label ' for='"+_+"'>"+x+"</label>";"left"===this.options.checkboxLabelPosition?S=A+S:S+=A}else S="<INPUT type='checkbox' "+m+b+y+v+" />";if(w){var M,E=a.D.getGlobalFunction(w,this.scope_id);"function"==typeof E&&(M=E(i)),t.innerHTML=M?S:""}else t.innerHTML=S;if(this.options.noDisabledOnReadOnly)(q=t.getElementsByTagName("input")[0])&&(d.B.addListener(q,"onclick",function(t,e,i){return function(o){t.options.noDisabledOnReadOnly&&t.mainGrid._getEditReadOnly(e,i)&&d.B.preventDefault(o)}}(this,i,this.getColumnIndex(this.options.id))),this.mainGrid._getEditReadOnly(i,this.options.id)?this.mainGrid.addClass(q,this.mainGrid.options.readOnlyClass+"_nodisabled"):this.mainGrid.removeClass(q,this.mainGrid.options.readOnlyClass+"_nodisabled"));if(this.mainGrid.options.preventMultipleClick){var q=t.getElementsByTagName("input")[0],R=t.getElementsByTagName("label")[0];this.labelClicked=!1,q&&d.B.addListener(q,"onclick",function(t,e,i){return function(o){t.options.eventPropagation||d.B.stopPropagation(o),e[2]=o.detail,i.apply(t,e,o)}}(this,[i,t],(function(t,e,i){i=this.labelClicked?0:1,this.labelClicked=!1;var o,s,r,a,n,l,h,c=null!=this.mainGrid.editedCell;c&&(o=this.mainGrid.editedCell.editRowIndex,s=this.mainGrid._dataList.getColumnIndex(this.mainGrid.editedCell.id),h=this.mainGrid.getCellInfo(this.mainGrid.editedCell.id),r=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),a=this.mainGrid._grid.getRealRowIndex(o),n=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s],l=h.comp&&h.comp.selectedIndex);var u,g,m,f=e.getElementsByTagName("input")[0];if(f&&(u=f.checked,g=this.options.falseValue,u&&(g=this.options.trueValue),""!=(m=this.mainGrid.dataList._getCellData(t,this.colID))||u||(g=m)),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&this.mainGrid._addFocus(e):this.mainGrid._addFocus(e)),this.handleClick(e,t,!0),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode})):(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode}))),t=this.mainGrid._getGroupbyDisplayRowIndex(t),f&&m!=g){var b=this.mainGrid.getColumnIndex(this.options.id),y={oldValue:m,newValue:g,
rowIndex:t,colIndex:b,colId:this.mainGrid.getColumnID(b)};d.B.fireEvent(this.mainGrid,"onviewchange",y)}if(this.mainGrid.options.preventMultipleClick&&!this.mainGrid._getEditDisabled(t,p)&&d.B.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(t),this.mainGrid.getColumnIndex(this.options.id),this.options.id,{checked:u}),c){var v=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s];if(n!=v){var w={oldValue:n,newValue:v,rowIndex:o,colIndex:r,colId:this.mainGrid.getColumnID(r)};isNaN(l)||(w.oldSelectedIndex=l,w.newSelectedIndex=h&&h.comp&&h.comp.selectedIndex),d.B.fireEvent(this.mainGrid,"onviewchange",w)}}}))),R&&d.B.addListener(R,"onclick",function(t,e,i){return function(o){i.apply(t,e,o)}}(this,[i,t],(function(t,e){this.labelClicked=!0})))}}},A.checkbox.prototype.getDisplayData=function(t){return t},A.checkbox.prototype.handleClick=function(t,e,i){var o=a.D.getDataPrefix("col_id");if(this.mainGrid.__getEditReadOnly(t,e)||this.mainGrid._getEditDisabled(e,t.getAttribute(o))||!this.options.embeddedInput&&this.mainGrid.options.preventMultipleClick&&!i&&!this.mainGrid.options.checkOnCellClick)return!0;null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit();var s=t.getElementsByTagName("input")[0];if(s){var r=this.options.id,n=s.checked,l=this.options.falseValue;n&&(l=this.options.trueValue);var h=this.mainGrid.dataList._getCellData(e,this.colID);""!=h||n||(l=h);var c=null;(c={})[this.mainGrid.id]=!0,this.mainGrid._isGridViewItemTable()||this.mainGrid.dataList.__setCellData(e,this.colID,l,null,null,null,c);var u=a.D.getDataPrefix("colMerged");if("0"==t.getAttribute(u)&&this.setMergedCol(e,r,h,l),h!=l&&!i){var p=this.mainGrid.getColumnIndex(this.options.id),g={oldValue:h,newValue:l,rowIndex:e,colIndex:p,colId:this.mainGrid.getColumnID(p)};d.B.fireEvent(this.mainGrid,"onviewchange",g)}this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID])}return!0},A.checkbox.prototype.checkHeader=function(){try{return this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID])}catch(t){r.w.printStackTrace(t,null,this)}},A.checkbox.prototype.doDefaultAction=function(t){if(!this.options.embeddedInput){var e=d.B.getTarget(t);if("none"==this.mainGrid.options.focusMode){for(e.focus();e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.colID}else i=this.mainGrid.getLastFocusedCell().focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.colID;var r=!1;if(!this.mainGrid._getEditDisabled(i,s)&&!this.mainGrid.___getEditReadOnly(i,s)){var a,n,l=e.getElementsByTagName("input")[0];if(l&&(l.checked?(a=this.options.falseValue,l.checked=!1):(a=this.options.trueValue,l.checked=!0),n=this.mainGrid.dataList._getCellData(i,s)),this.handleClick(e,i,!0),a!=n){var h=this.mainGrid.getColumnIndex(s);d.B.fireEvent(this.mainGrid,"onviewchange",{oldValue:n,newValue:a,rowIndex:o,colIndex:h,colId:this.mainGrid.getColumnID(h)})}r=!0}this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID]),this.mainGrid.options.preventMultipleClick&&r&&d.B.fireEvent(this.mainGrid,"oncellclick",i,this.mainGrid.getColumnIndex(s),this.options.id,{checked:l.checked})}},A.checkbox.prototype.refreshCell=function(){try{if(!this.options.refInitSync||"other"!==this.options.valueType)return;for(var t=this.mainGrid._dataList.getRowCount(),e=0;e<t;e++){this.mainGrid._dataList.getCellData(e,this.colID)!=this.options.trueValue&&this.mainGrid._dataList.setCellData(e,this.colID,this.options.falseValue)}}catch(t){r.w.printStackTrace(t,null,this)}},A.button=function(){},A.button.prototype.setInnerHTML=function(t,e,i){var o=a.D.getDataPrefix("col_id"),s=(this.mainGrid._getEditDisabled(i,t.getAttribute(o))," tabIndex='-1'");"none"==this.mainGrid.options.focusMode?s=" tabIndex='0'":1==this.mainGrid.options.keyMoveEditMode&&(s="");var n,l=this.mainGrid.getColumnIndex(t.getAttribute(o))
;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var h=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof h&&(this.mainGrid.options.titleFormatter=h,n=h.call(this,i,l,e))}else n=this.mainGrid.options.titleFormatter.call(this,i,l,e)}catch(t){r.w.printStackTrace(t,null,this)}var c=n||this.options.title||"";c?c=" title='"+c+"'":this.mainGrid.options.titleAuto&&(c=" title='"+(this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"")+WebSquare.language.getMessage("Grid_button")+"'");var u=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;if((u=a.D.getBoolean(u))&&(e=WebSquare.xml._encode(e+"")),t.innerHTML="<button type='button' style='width:100%;height:100%' "+s+c+">"+this.getDisplayData(e)+"</button>",1==this.internal){var p=t.childNodes[0];if(0==p.clientHeight){var g=t.clientHeight-2;WebSquare.style.setSize(p,"height",g)}}var m,f,b;l=this.mainGrid.getColumnIndex(t.getAttribute(o));this._listener=(m=this,f=[i,l,t],b=function(t,e,i,o){this.mainGrid._getEditDisabled(e,i)||this.mainGrid.___getEditReadOnly(e,i)||(null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit(),this.options.blockSelect||this.mainGrid.__setFocusedCell(t,o,{editMode:"none"==this.options.focusMode})),this.mainGrid._getEditDisabled(e,i)||d.B.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(e),i,this.options.id)},function(t){b.apply(m,[t||window.event].concat(f))}),d.B.addListener(t.getElementsByTagName("button")[0],"onclick",this._listener)},A.button.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=d.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=a.D.getDataPrefix("col_id"),r=this.mainGrid.getColumnIndex(e.getAttribute(s))}else{var n=this.mainGrid.getLastFocusedCell();i=n.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),r=n.focusedColIndex}this.mainGrid._getEditDisabled(i,r)||this.mainGrid.___getEditReadOnly(i,r)||d.B.fireEvent(this.mainGrid,"oncellclick",o,r,this.options.id)},A.image=function(){},A.image.prototype.setInnerHTML=function(t,e,i,o,s){var n="";""!=this.options.imageWidth&&(n+=";width:"+parseInt(this.options.imageWidth)+"px"),""!=this.options.imageHeight&&(n+=";height:"+parseInt(this.options.imageHeight)+"px"),t.removeAttribute("alt");var l="";""!=this.options.alt&&(l="alt='"+this.options.alt+"' ");var h=a.D.getDataPrefix("col_id"),c=this.mainGrid._getEditDisabled(i,t.getAttribute(h)),u="";c&&(u=" disabled='true' "),null==e||""==e?e=this.options.imageSrc?this.options.imageSrc.startsWith("javascript:void")?this.options.imageSrc:this.mainGrid.getImageURL(this.options.imageSrc):"":"string"!=typeof e||e.startsWith("javascript:void")||(e=this.mainGrid.getImageURL(e));var p="";try{this.options.onerror&&(p=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){r.w.printStackTrace(t,null,this)}var g,m=this.options.imageTabIndex?" tabIndex='"+this.options.imageTabIndex+"'":"";if(this.mainGrid.options.senseReader&&this.mainGrid.options.focusImage?t.innerHTML="<IMG src='"+e+"' class='w2grid_image"+(c?" w2grid_image_disabled":"")+"' style='"+n+"' "+l+u+p+m+"tabIndex='0' />":t.innerHTML="<IMG src='"+e+"' class='w2grid_image"+(c?" w2grid_image_disabled":"")+"' style='"+n+"' "+l+u+p+m+" />",this.options.imageClickFunction&&(g=this.mainGrid._getEditDisabled(i,o)),this.options.imageClickFunction&&(this.options.useImageClick||0==g)){var f=t.firstChild,b=function(t,e,i){return function(o){d.B.stopPropagation(o),t._setFocusedCell(e,i),t.fireImageClick(e,i)}}(this.mainGrid,i,this.colID);d.B.addListener(f,"onclick",b)}if(this.mainGrid.options.titleFormatter)try{var y;o=this.mainGrid.getColumnIndex(t.getAttribute(h));if("function"!=typeof this.mainGrid.options.titleFormatter){
var v=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof v&&(this.mainGrid.options.titleFormatter=v,y=v.call(this,i,o,e))}else y=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",y)}catch(t){r.w.printStackTrace(t,null,this)}},A.image.prototype.getDisplayData=function(t){return t},A.radio=function(){},A.radio.prototype.initializeCellInfo=function(t){switch(this.options.valueType){case"binary":this.setBooleanValue("1","0");break;case"boolean":this.setBooleanValue("true","false");break;case"other":this.setBooleanValue(this.options.trueValue,this.options.falseValue)}if(this.options.groupRef&&(this.options.groupValue=WebSquare.ModelUtil.getInstanceValue(this.options.groupRef,null,this.scope_id)),this.options.radioLabelColumn)for(var e=this.options.radioLabelColumn.split(","),i=0;i<e.length;i++){var o=e[i];this.mainGrid.getColumnIndex(o)&&this.mainGrid.setLabelColumnAssociation(e[i],this.id)}},A.radio.prototype.setBooleanValue=function(t,e){this.options.trueValue=t+"",this.options.falseValue=e+""},A.radio.prototype.setInnerHTML=function(t,e,i){var o,s,n,l,h=a.D.getDataPrefix("col_id"),u=a.D.getDataPrefix("rowindex"),p=this.mainGridId+"_radio_"+(this.options.groupName?this.options.groupName+"_"+i:this.colID),g=e+""==this.options.trueValue;if(o=this.options.noDisabledOnReadOnly?this.mainGrid._getEditDisabled(i,t.getAttribute(h)):this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,t.getAttribute(h)),this.options.embeddedInput){var m=this.mainGrid.getInput(this,t,g);m.setAttribute(u,i),m.checked=!1,m.name=p,m.checked=g,m.disabled=o}else{var f,b;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var y=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof y&&(this.mainGrid.options.titleFormatter=y,b=this.mainGrid.getColumnIndex(this.options.id),f=y.call(this,i,b,e))}else f=this.mainGrid.options.titleFormatter.call(this,i,b,e)}catch(t){r.w.printStackTrace(t,null,this)}var v=f||this.options.title||"";if(v)v=" title='"+v+"'";else if(this.mainGrid.options.titleAuto){var w=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";v=g?" title='"+w+WebSquare.language.getMessage("Grid_title")+"'":" title='"+w+WebSquare.language.getMessage("Grid_title_not_choose")+"'"}var S="none"==this.mainGrid.options.focusMode?"":" tabIndex='-1'",C=g?" checked":"",_=o?" disabled='true'":"",x="";if(this.options.radioLabel||this.options.radioLabelColumn||this.options.radioLabelFormatter){var I=this.mainGridId+"_radio_"+this.id+"_"+i,T=this.options.radioLabel||"";if(this.options.radioLabelColumn){for(var k=this.options.radioLabelColumn.split(","),D="",L=this.options.radioLabelDelimiter||this.mainGrid.options.labelDelimiter||" ",W=0;W<k.length;W++){var A=this.mainGrid.bodyToHeaderRelation[k[W]];if(W===k.length-1)this.mainGrid.options.showRadioLabelUserFormat?D+=" "+this.mainGrid.getHeaderValue(A)+" "+this.mainGrid._getCellDisplayData(i,k[W],{removeTag:!0}):D+=this.mainGrid._getCellDisplayData(i,k[W],{removeTag:!0});else if(this.mainGrid.options.showRadioLabelUserFormat)D+=(0===W?i+1+"행"+L:"")+" "+this.mainGrid.getHeaderValue(A)+" "+this.mainGrid._getCellDisplayData(i,k[W],{removeTag:!0})+L;else D+=this.mainGrid._getCellDisplayData(i,k[W],{removeTag:!0})+L}T=T?D+L+T:D}if(this.options.radioLabelFormatter)try{var M=a.D.getGlobalFunction(this.options.radioLabelFormatter,this.scope_id);"function"==typeof M&&(T=M.call(this.mainGrid,i,this.mainGrid.getColumnIndex(this.colID),T))}catch(t){c.k.printLog(this.mainGrid.id+"_"+this.id+" radioLabelFormatter error : "+t.message)}T&&this.mainGrid.options.titleAuto&&!this.options.title&&(v=v.substring(0,v.length-1)+" "+T+"'"),x="<INPUT type='radio' "+v+S+C+_+" id='"+I+"' name='"+p+"'/>";var E="<label class='w2radio_label ' for='"+I+"'>"+T+"</label>";"left"===this.options.radioLabelPosition?x=E+x:x+=E
}else x="<INPUT type='radio' name='"+p+"'"+v+S+C+_+" />";if(t.innerHTML=x,this.options.noDisabledOnReadOnly)(q=t.getElementsByTagName("input")[0])&&(d.B.addListener(q,"onclick",function(t,e,i){return function(o){t.options.noDisabledOnReadOnly&&t.mainGrid._getEditReadOnly(e,i)&&d.B.preventDefault(o)}}(this,i,this.getColumnIndex(this.options.id))),this.mainGrid._getEditReadOnly(i,this.options.id)?this.mainGrid.addClass(q,this.mainGrid.options.readOnlyClass+"_nodisabled"):this.mainGrid.removeClass(q,this.mainGrid.options.readOnlyClass+"_nodisabled"));if(this.mainGrid.options.preventDuplicateFocusedCell&&this.mainGrid.options.preventMultipleClick){var q=t.getElementsByTagName("input")[0],R=t.getElementsByTagName("label")[0];this.labelClicked=!1,q&&d.B.addListener(q,"onclick",(s=this,n=[i,t],l=function(t,e,i){i=this.labelClicked?0:1,this.labelClicked=!1;var o,s,r,a,n,l,h,c=null!=this.mainGrid.editedCell;if(c&&(o=this.mainGrid.editedCell.editRowIndex,s=this.mainGrid._dataList.getColumnIndex(this.mainGrid.editedCell.id),h=this.mainGrid.getCellInfo(this.mainGrid.editedCell.id),r=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),a=this.mainGrid._grid.getRealRowIndex(o),n=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s],l=h.comp&&h.comp.selectedIndex),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&this.mainGrid._addFocus(e):this.mainGrid._addFocus(e)),this.handleClick(e,t),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode})):(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode}))),this.mainGrid.options.preventMultipleClick&&!this.mainGrid._getEditDisabled(t,b)&&d.B.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(t),this.mainGrid.getColumnIndex(this.options.id),this.options.id,{checked:g}),c){var u=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s];if(n!=u){var p={oldValue:n,newValue:u,rowIndex:o,colIndex:r,colId:this.mainGrid.getColumnID(r)};isNaN(l)||(p.oldSelectedIndex=l,p.newSelectedIndex=h&&h.comp&&h.comp.selectedIndex),d.B.fireEvent(this.mainGrid,"onviewchange",p)}}},function(t){s.options.eventPropagation||d.B.stopPropagation(t),n[2]=t.detail,l.apply(s,n,t)})),R&&d.B.addListener(R,"onclick",function(t,e,i){return function(o){i.apply(t,e,o)}}(this,[i,t],(function(t,e){this.labelClicked=!0})))}}},A.radio.prototype.getDisplayData=function(t){return t},A.radio.prototype.handleClick=function(t,e){var i=t.getElementsByTagName("input")[0];if(!i)return!0;if(this.options.noDisabledOnReadOnly&&this.mainGrid._getEditReadOnly(e,this.colID))return!0;this.mainGrid.options.preventDuplicateFocusedCell&&null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit();var o=this.mainGrid.dataList._getCellData(e,this.colID),s=o;if(o==this.options.trueValue)return!0;i.checked&&(s=this.options.trueValue,this.resetOthers(e),this.options.groupName&&this.mainGrid.radioGroupRepChk[this.options.groupName]&&this.mainGrid.dataList.__setCellData(e,this.options.groupName,this.options.groupValue)),this.mainGrid.dataList.__setCellData(e,this.colID,s);var r=a.D.getDataPrefix("colMerged");if("0"!=t.getAttribute(r)||this.mainGrid.groupbyStatus.grouped||this.setMergedCol(e,this.colID,o,s),o!=s){var n=this.mainGrid.getColumnIndex(this.options.id),l={oldValue:o,newValue:s,colIndex:n,rowIndex:e,colId:this.mainGrid.getColumnID(n)};d.B.fireEvent(this.mainGrid,"onviewchange",l)}return!0},A.radio.prototype.resetOthers=function(t){if(this.options.groupName)for(var e=this.mainGrid.getColumnCount(),i=0;i<e;i++){var o=this.mainGrid.getCellInfo(i);"custom"==o.options.inputType&&(o=o.cellManagerHashByRowIndex[this.mainGrid.dataList.getRealRowIndex(t)]),
o!=this&&"radio"==o.options.inputType&&o.options.groupName==this.options.groupName&&this.mainGrid.dataList.__setCellData(t,i,o.options.falseValue)}else if(this.mainGrid.isDrillDown&&this.mainGrid._dataList.options.depthColumn)for(var s=0;s<this.mainGrid.getTotalRow();s++)this.mainGrid._dataList.getCellData(s,this.colID)+""==this.options.trueValue&&this.mainGrid._dataList.setCellData(s,this.colID,this.options.falseValue);else for(s=0;s<this.mainGrid.getDataLength();s++)this.mainGrid.dataList._getCellData(s,this.colID)+""==this.options.trueValue&&this.mainGrid.dataList.__setCellData(s,this.colID,this.options.falseValue)},A.radio.prototype.doDefaultAction=function(t){var e=d.B.getTarget(t);if("none"==this.mainGrid.options.focusMode){for(;e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=a.D.getDataPrefix("col_id"),s=this.mainGrid.getColumnIndex(e.getAttribute(o))}else{var r=this.mainGrid.getLastFocusedCell();i=r.focusedRowIndex,s=r.focusedColIndex;this.options.embeddedInput&&"INPUT"==e.tagName.toUpperCase()&&(e=r.focusedTd)}if(!this.mainGrid._getEditDisabled(i,s)&&!this.mainGrid.___getEditReadOnly(i,s)){var n=this.mainGrid.dataList._getCellData(i,this.colID);("INPUT"==e.tagName.toUpperCase()?e:e.getElementsByTagName("input")[0]).checked=n==this.options.trueValue?this.options.falseValue:this.options.trueValue,this.handleClick(e,i)}},A.radio.prototype.refreshCell=function(){try{if(!this.options.refInitSync||"other"!==this.options.valueType)return;for(var t=this.mainGrid._dataList.getRowCount(),e=0;e<t;e++){this.mainGrid._dataList.getCellData(e,this.colID)!=this.options.trueValue&&this.mainGrid._dataList.setCellData(e,this.colID,this.options.falseValue)}}catch(t){r.w.printStackTrace(t,null,this)}},A.select=function(){},A.select.prototype._initializeCellInfo=function(){try{this.col_index=this.mainGrid.getColumnIndex(this.colID),"auto"===this.options.renderType&&a.D.isMobile()&&!0!==this.options.embeddedInput&&(this.options.embeddedInput=!0)}catch(t){r.w.printStackTrace(t,null,this)}},A.select.prototype._createComponent=function(t){try{if(this.comp)return;var e=this;if(this.xml.setAttribute("class",this.mainGridId+"_select_"+this.colID),this.xml.setAttribute("chooseOption",this.options.chooseOption+""),this.xml.setAttribute("chooseOptionLabel",this.options.chooseOptionLabel),this.xml.setAttribute("chooseOptionValue",this.options.chooseOptionValue),this.xml.setAttribute("allOption",this.options.allOption+""),this.xml.setAttribute("tableRender",this.options.tableRender),this.xml.setAttribute("submenuSize",this.options.submenuSize?this.options.submenuSize:"auto"),this.xml.setAttribute("direction","auto"),this.xml.setAttribute("style",this.style),this.setFirst=!0,this.hasRef&&!this.useLinkedDataList)WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",new Function("_this","return "+this.refStr)(this));this.setFirst=!1,this.configOptions.chooseOption=this.options.chooseOption,this.configOptions.chooseOptionLabel=this.options.chooseOptionLabel,this.configOptions.labelWidthAuto=!1,this.configOptions.displayMode=this.options.displayMode,this.configOptions.itemTooltipDisplay=this.options.tooltipDisplayItem?this.options.tooltipDisplayItem:this.options.itemTooltipDisplay,this.configOptions.itemTooltipFormatter=this.options.itemTooltipFormatter,this.options.itemTooltipFormatter&&(this.configOptions._rowIndex=t,this.configOptions._colIndex=this.mainGrid.getColumnIndex(this.colID)),this.configOptions.tooltipTime=this.options.tooltipTime,this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.configOptions.tableRender=this.options.tableRender,this.internal&&(this.options.visibleRowNum&&(this.configOptions.visibleRowNum=this.options.visibleRowNum),this.options.textAlign&&(this.configOptions.textAlign=this.options.textAlign),this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),
this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions));var i=this.internal?this.mainGridId+"_selectbox_"+t+"_"+this.colID+"_"+this.id:this.mainGridId+"_selectbox_"+this.colID;this.internal&&this.options.emptyItem&&(this.configOptions.emptyItem=this.options.emptyItem),this.select=new WebSquare.uiplugin.selectbox(i,this.configOptions,this.xml),this.mainGrid.dom[this.select.id]=this.select,this.comp=this.select,this.select.setSelectedIndex1=function(t,i){void 0!==i&&null!=i||(i={});var o=this.selectedIndex,s=this.getValue(),r=e.mainGrid.getColumnIndex(e.mainGrid.editedCell.id);if(this.setSelectedIndex(t),"oneditend"===e.options.eventPriority){if(!0!==i.skipClose&&(this.closeSubLayer(),e.handleEndEdit()),o!=this.selectedIndex){var a=e.editRowIndex,n={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex,rowIndex:a,colIndex:r,colId:e.mainGrid.getColumnID(r)};d.B.fireEvent(e.mainGrid,"onviewchange",n)}}else{if(o!=this.selectedIndex){a=e.editRowIndex,n={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex,rowIndex:a,colIndex:r,colId:e.mainGrid.getColumnID(r)};d.B.fireEvent(e.mainGrid,"onviewchange",n)}!0!==i.skipClose&&(this.closeSubLayer(),e.handleEndEdit())}},this.existGridViewItemsetNode&&(this.select._setSubLayer=this.select.setSubLayer,this.select.setSubLayer=function(t){this._setSubLayer(t),this.itemTable.addKeyDownEventListener((function(t){switch(t.keyCode){case 27:e.handleCancelEdit(t)}}))}),this.select.__openSubLayer=this.select.openSubLayer,this.select.openSubLayer=function(){this.__openSubLayer()},this.select.__closeSubLayer=this.select.closeSubLayer,this.select.closeSubLayer=function(t){this.__closeSubLayer(t),e.mainGrid._setFocusedCell()},this.select._handleClickEvent=this.select.handleClickEvent,this.select.handleClickEvent=function(t){this._handleClickEvent(t),d.B.stopEvent(t),e.handleEndEdit()},this.select._refreshItemset=this.select.refreshItemset,this.select.refreshItemset=function(t){e.resetMatchInfo=!0,!0!==this.refreshStopItemTable&&this._refreshItemset(t)}}catch(t){r.w.printStackTrace(t,null,this)}},A.select.prototype.createSelectbox=function(t,e){this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this._createComponent(e),t.innerHTML=this.select.toHTML();try{!this.select.modelControl.isBinded()&&-1===this.select.selectedIndex&&this.select.getItemCount()>0&&!this.select.options.chooseOption&&this.select.options.allOption}catch(t){}if(this.select.activate(),this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setNodeSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value),""!=this.options.selectSetter)for(var i=0;i<this.itemArr.length;i++)this.select.addItem(this.itemArr[i].value,this.itemArr[i].label);this._setSize(t),this.select.render.style.border="1px solid "+this.mainGrid.options.selectedCellColor},A.select.prototype._setSize=function(t){try{var e={top:0,left:0,bottom:0,right:0};if(a.D.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(e.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),e.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),e.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),e.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else{var i=WebSquare.style.getComputedStyle(t);i&&(i.padding||i.paddingTop||i.paddingBottom||i.paddingLeft||i.paddingRight)&&(e.left=parseInt(i.paddingLeft,10),e.right=parseInt(i.paddingRight,10),e.top=parseInt(i.paddingTop,10),e.bottom=parseInt(i.paddingBottom,10))}this.select.setSize(t.clientWidth-(2+e.left+e.right),t.clientHeight-(2+e.top+e.bottom))}catch(t){r.w.printStackTrace(t,null,this)}},
A.select.prototype.createItemTable=function(t,e){var i=this;this.existGridViewItemsetNode&&this.select._openOtherLayer(),this.select.setSubLayer();var o=this.select.itemTable;o.addClickEventListener((function(t,e){i.select.setSelectedIndex1(e);var o=i.mainGrid.getLastFocusedCell();if(i.editRowIndex!=o.focusedRowIndex||i.col_index!=o.focusedColIndex||i.options.moveEditModeByChoice||i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell(),i.options.moveEditModeByChoice){var s=i.options.moveEditModeByChoice;switch(s){case"down":i.mainGrid.moveVertical({},s,true);break;case"right":i.mainGrid.moveHorizontal({byApi:!0},s,true)}}})),this.existGridViewItemsetNode?o.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t);var e=i.mainGrid.getLastFocusedCell();i.editRowIndex==e.focusedRowIndex&&i.col_index==e.focusedColIndex&&("down"==i.mainGrid.options.tabKeyMove?i.mainGrid.moveVertical(t,t.shiftKey?"up":"down",i.mainGrid.options.keyMoveEditMode):"none"==i.mainGrid.options.tabKeyMove||i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode));break;case 27:i.handleCancelEdit(t)}})):o.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:if("ul"==this.options.tableRender){var e=this.getSelectedIndex();e=parseInt(e),this.endReached&&(this.endReached=!1,i.mainGrid.editedCell.handleCancelEdit(t),i.mainGrid._setFocusedCell())}else{this.fireClick(t);var o=i.mainGrid.getLastFocusedCell();i.editRowIndex==o.focusedRowIndex&&i.col_index==o.focusedColIndex&&("down"==i.mainGrid.options.tabKeyMove?i.mainGrid.moveVertical(t,t.shiftKey?"up":"down",i.mainGrid.options.keyMoveEditMode):"none"==i.mainGrid.options.tabKeyMove||i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode))}break;case 13:o=i.mainGrid.getLastFocusedCell();i.editRowIndex!=o.focusedRowIndex||i.col_index!=o.focusedColIndex||i.options.moveEditModeByChoice||(i.mainGrid.options.fastEditMode?"none"==i.mainGrid.options.enterKeyMove||("right"==i.mainGrid.options.enterKeyMove?i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode):i.mainGrid.moveVertical(t,t.shiftKey?"up":"down",i.mainGrid.options.keyMoveEditMode)):i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell());break;case 27:i.mainGrid.editedCell.handleCancelEdit(t),i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell()}})),a.D.isOpera()&&o.event.addListener(o.render,"onkeypress",(function(t){9!=t.keyCode&&27!=t.keyCode||d.B.preventDefault(t)})),this.mainGrid._moveKeyEdit(o.uuid,"keyDownFunc",{itemTable:!0}),WebSquare.WebSquaredoc.itemsetElement.length>0&&WebSquare.WebSquaredoc.itemsetElement[WebSquare.WebSquaredoc.itemsetElement.length-1].id==this.mainGridId+"_selectbox_"+this.colID&&WebSquare.WebSquaredoc.itemsetElement.pop()},A.select.prototype.setInnerHTML=function(t,e,i,o,s){var n=a.D.getDataPrefix("col_id"),l=a.D.getDataPrefix("rowindex"),h=this.mainGrid._getGroupbyDisplayRowIndex(i);if(this.options.embeddedInput){var c=this.mainGrid.getInput(this,t,e);if(c.render.setAttribute(l,i),""==this.options.selectSetter||this.dataComp||(this.initSelectSetter(),c.itemArr=this.itemArr,c.setSelectOptions()),this.hasRef&&!this.dataComp){var u=this.mainGrid.getElemRowIndex(t);c.itemArr=this.getRefItemArr(u),c.setSelectOptions()}if(this.dataComp){var p=this.mainGrid.modelControl.getDataComp(this.dataComp);if("linkedDataList"===p.initializeType&&null!=p.conditionInfo&&p.conditionInfo.filterInfo.useRef){var g=p.conditionInfo.targetInfo,m={};for(var f in g){var b=this.mainGrid.modelControl.getDataComp(f);if(b&&null!=b.initializeType&&"dataMap"!==b.initializeType){var y=b.getRowPosition();y!=i&&(m[f]=y,"linkedDataList"===b.initializeType?b._dataList.rowPosition=b.filteredRowIndexArr[i]:b.rowPosition=i)}}for(var v in c.stopRefreshItemTable(!0),p.syncWithParent(),c.stopRefreshItemTable(!1),m){var w=this.mainGrid.modelControl.getDataComp(v)
;"linkedDataList"===w.initializeType?w._dataList.rowPosition=w.filteredRowIndexArr[m[v]]:w.rowPosition=m[v]}for(var S=p.getAllJSON(),C=[],_=0;_<S.length;_++)C.push({label:S[_][this.itemsetObj.label],value:S[_][this.itemsetObj.value]});c.setNodeSet("",this.itemsetObj.label,this.itemsetObj.value),c.itemArr=C,c.setSelectOptions()}}if(c.setValue(e),!c.setValueNM(e)&&!this.dataComp){var x={};x[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(c.render.getAttribute(l),o,c.getValue(),null,null,null,x)}var I=!1;this.mainGrid._getEditDisabled(i,o)?(c.setDisabled(!0),I=!0):c.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?(c.setReadOnly(!0),I=!0):c.setReadOnly(!1),c.dom.select.disabled=!!I,t.removeAttribute("tabIndex")}else{this.initSelectSetter();u=i;null==e&&(e="");var T=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;T=a.D.getBoolean(T);var k,D=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id);if("function"==typeof D){this.useCustomFormatter=!0;var L=this.getDisplayData(e,u);T&&(L=WebSquare.xml._encode(L+"")),k=D.call(this.mainGrid,e,L,h,o)}else this.useCustomFormatter=!1,k=this.getData(e,u),T&&(k=WebSquare.xml._encode(k+""));var W,A=this.internal?this.mainGridId+"_selectbox_"+i+"_"+this.colID+"_"+this.id:this.mainGridId+"_selectbox_"+this.colID;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var M=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof M&&(this.mainGrid.options.titleFormatter=M,W=M.call(this,i,o,e))}else W=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){r.w.printStackTrace(t,null,this)}var E=W||this.options.title||"";if(E)t.setAttribute("title",E);else if(this.mainGrid.options.titleAuto){var q=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";E=""!==e?" title='"+q+" "+e+"'":" title='"+q+WebSquare.language.getMessage("Grid_select")+"'"}if(a.D.isSafari()&&-1!=navigator.userAgent.indexOf("Windows"))if(this.mainGrid.options.plainText&&t.firstChild&&t.firstChild.firstChild)t.firstChild.firstChild.data=k;else{t.innerHTML="";var R=document.createElement(this.mainGrid.options.dataTag);"span"==this.mainGrid.options.dataTag&&(R.className="w2grid_span"),R.style.cssText="overflow : hidden; text-overflow:ellipsis; display:block; width:100%;","ul"==this.options.tableRender?R.innerHTML="<a href='#"+A+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main'"+E+">"+k+"</a>":R.textContent=k,t.appendChild(R)}else if(this.mainGrid.options.plainText&&t.firstChild&&t.firstChild.firstChild)t.firstChild.firstChild.data=k;else if("icon"==this.options.viewType){t.innerHTML="";R=document.createElement(this.mainGrid.options.dataTag);"span"==this.mainGrid.options.dataTag&&(R.className="w2grid_span"),R.style.cssText="overflow : hidden; text-overflow:ellipsis; display:block; width:auto;","ul"==this.options.tableRender?R.innerHTML="<a href='#"+A+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main'"+E+">"+k+"</a>":R.innerHTML=k,t.appendChild(R)}else{var N="";if("span"==this.mainGrid.options.dataTag&&(N=" w2grid_span"),"ul"==this.options.tableRender)t.innerHTML="<"+this.mainGrid.options.dataTag+"style='overflow : hidden; text-overflow:ellipsis; display:block; width:auto;'><a href='#"+A+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main"+N+"'"+E+">"+k+"</a>"+this.mainGrid.dataTagClose;else{var F=t.firstChild,O="w2grid_select"+N;if(this._checkFastScroll(k,F,O,s&&!0===s.scroll)){var B="string"==typeof k?WebSquare.xml.__decode(k):k;F.textContent=B}else t.innerHTML="<"+this.mainGrid.options.dataTag+" class='"+O+"'>"+k+this.mainGrid.dataTagClose}}var V=this.mainGrid.dataList.getRealRowIndex(i),P=this.mainGrid.getCellOption(V,o,"viewType"),H=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),j=a.D.getDataPrefix("editModeEvent")
;if("icon"==P||""==P&&"own"==H?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_select"),t.setAttribute(j,this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute(j,"onclick"):"ondblclick"==this.options.editModeEvent?t.setAttribute(j,"ondblclick"):"onsecondclick"==this.options.editModeEvent?t.setAttribute(j,"onsecondclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_select"),t.setAttribute(j,"")),"ul"==this.options.tableRender){var z=this;this.mainGrid.event.addListener(t,"onfocus",this.mainGrid.event.bindAsEventListener(this.mainGrid,(function(t){var e=d.B.getTarget(t);z.mainGrid.lastEvent=t;var o=z.mainGrid.getLastFocusedCell();if((0!=o.focusedColIndex||0!=o.focusedRowIndex)&&(!a.D.isIEAllVersion()||!o.focusedRowIndex||o.focusedRowIndex==i)&&(o.focusedTd==e||z.mainGrid.focusedByApi||z.mainGrid._setFocusedCell(i,e.getAttribute(n)),z.mainGrid.focusedByApi=!1,e.childNodes[0]&&e.childNodes[0].childNodes[0])){var s=e.childNodes[0].childNodes[0];"A"==s.tagName&&s.focus()}})))}}},A.select.prototype.setColumnChooseOption=function(t,e){this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.select&&this.select.changeChooseOption(t,e)},A.select.prototype.showChooseOption=function(t){this.options.chooseOption=t,this.matchInfo=this.setMatchInfo(),this.select&&t?this.select.showChooseOption(t):this.select&&!t&&(this.select.showChooseOption(t),this.select.itemArr.length>1&&0!=this.select.selectedIndex?this.select.selectedIndex-=1:this.select.selectedIndex=0,this.editTd.innerHTML=this.mainGrid.dataTagOpen+this.getData(this.select.getValue(),this.select.selectedIndex)+this.mainGrid.dataTagClose)},A.select.prototype.getData=function(t,e,i){try{var o,a="",n=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var l=this.itemsetObj.nodeset;l.indexOf("data:")>=0&&(n=l.slice("data:".length))}if(n&&(o=this.mainGrid.modelControl.getDataComp(n)),n&&o){if("linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef){var h=o.conditionInfo.targetInfo,d={};for(var c in h){var u=this.mainGrid.modelControl.getDataComp(c);if(u&&null!=u.initializeType&&"dataMap"!==u.initializeType){var p=u.getRowPosition();p!=e&&(d[c]=p,"linkedDataList"===u.initializeType?u._dataList.rowPosition=u.filteredRowIndexArr[e]:u.rowPosition=e)}}for(var g in this.select&&this.select.stopRefreshItemTable(!0),o.syncWithParent(),this.select&&this.select.stopRefreshItemTable(!1),d){var m=this.mainGrid.modelControl.getDataComp(g);"linkedDataList"===m.initializeType?m._dataList.rowPosition=m.filteredRowIndexArr[d[g]]:m.rowPosition=d[g]}}var f=null,b=null,y=null;if("linkedDataList"===o.initializeType)f=o._dataList,b=o.initialRowIndexArr,y=o.initialRowIndexArr;else if("dataList"===o.initializeType){if(f=o,o.options&&o.options.validateAllItemsetData){var v=f.getTotalRow();b=[];for(var w=0;w<v;w++)b.push(w)}else b=f.filteredRowIndexArr;y=f.filteredRowIndexArr}var S=!1;if("linkedDataList"===o.initializeType&&this.select){var C=this.select.getItemCount(),_=this.select.itemArr;0===C?S=!0:1!=C||_[0].label!==this.select._getChooseOptionLabel()&&_[0].label!==this.select.defaultAllOptionLabel?2==C&&_[0].label===this.select._getChooseOptionLabel()&&_[1].label===this.select.defaultAllOptionLabel&&(S=!0):S=!0}if((!this.select||S)&&null!=f)try{var x,I;a="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)x=this.itemsetObj.label,I=this.itemsetObj.value;else{var T=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),k=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);T.length>0&&k.length>0&&(x=WebSquare.Elem.api.getAttribute(T[0],"ref"),I=WebSquare.Elem.api.getAttribute(k[0],"ref"))}
var D=null!=x?f.bodyIdColIndexMap[x]:f.bodyIdColIndexMap[this.itemsetObj.label],L=null!=I?f.bodyIdColIndexMap[I]:f.bodyIdColIndexMap[this.itemsetObj.value];for(w=0;w<b.length;w++){var W=b[w]*f.cellIdList.length;if(t==f.dataArr[W+L])return a=f.dataArr[W+D],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t),i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}if(this.selectedIndex>=0&&this.selectedIndex<y.length&&!this.options.chooseOption){a=f.dataArr[y[this.selectedIndex]*f.cellIdList.length+D],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t);W=0;W=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var A=this.mainGrid._dataList.cellIdList.length,M=this.mainGrid._dataList.bodyIdColIndexMap[this.colID],E=f.dataArr[b[this.selectedIndex]*f.cellIdList.length+L];this.mainGrid._dataList.dataArr[W*A+M]=E}else if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else if(this.options.chooseOption&&t==this.options.chooseOptionValue)a=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)a="";else{W=0;W=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];A=this.mainGrid._dataList.cellIdList.length,M=this.mainGrid._dataList.bodyIdColIndexMap[this.colID];this.mainGrid._dataList.dataArr[W*A+M]="",a=""}else a=t;return i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}catch(e){return r.w.printStackTrace(e,null,this),t}var q=!1;for(w=0;w<this.select.itemArr.length;w++)if(this.select.itemArr[w].value==t){q=!0,a=this.select.itemArr[w].label;break}if(!q&&o.options&&o.options.validateAllItemsetData)for(w=0;w<this.select.allItemArr.length;w++)if(this.select.allItemArr[w].value==t){q=!0,a=this.select.allItemArr[w].label;break}if(!q)if(""!=t||-1==this.selectedIndex||this.options.chooseOption)if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else this.options.chooseOption&&t==this.options.chooseOptionValue?a=this.options.chooseOptionLabel:this.options.selectedData||(a=t);else this.select.itemArr.length>0?(a=this.select.itemArr[this.selectedIndex].label,this.mainGrid.dataList.__setCellData(e,this.colID,a)):a=t}else{var R=this.getMatchInfo(e);""!=t||-1==this.selectedIndex||this.options.chooseOption?a=R["SELECT_"+t]:(this.mainGrid.dataList.__setCellData(e,t),a=R["SELECT_"+this.itemArr[this.selectedIndex].label])}if(i&&i.emptyValue&&(""===a||"$blank"==a))a=i.emptyValue;else if(void 0===a||"$blank"==a)return"";return a}catch(t){r.w.printStackTrace(t,null,this)}},A.select.prototype.initSelectSetter=function(){if(0==this.selectSetted&&""!=this.options.selectSetter&&!this.dataComp){this.selectSetted=!0;var t=[];try{this.options.selectSetter=this.options.selectSetter.wq_trim(),this.options.selectSetter.indexOf("(")<0&&(this.options.selectSetter+="()"),t=new Function("return "+this.options.selectSetter)()}catch(t){r.w.printStackTrace(t)}this.itemArr=t,this.matchInfo=[];for(var e=0;e<t.length;e++){var i=t[e];null==i.value&&(i.value=""),this.matchInfo["SELECT_"+i.value]=i.label}}},A.select.prototype.setEditMode=function(t,e){if(!this.options.embeddedInput){if(this.dataComp){var i=this.mainGrid.modelControl.getDataComp(this.dataComp);i&&"linkedDataList"===i.initializeType&&null!=i.conditionInfo&&i.conditionInfo.filterInfo.useRef&&i.syncWithParent()}
if(!0!==this._init?(this.createSelectbox(t,e),this._init=!0):(t.innerHTML="",this.mainGrid.cellMergeInfo&&this._setSize(t),t.appendChild(this.select.render),this.options.itemTooltipFormatter&&(this.select.options._rowIndex=e)),this.mainGrid.directItemChoiceKeyObj.select){this.editTd=t,this.editRowIndex=e,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.select.setValue(this.mainGrid.dataList._getCellData(e,this.colID));var o=this.select.findItemStartedWithKeyChar(this.mainGrid.directItemChoiceKeyObj.select);if(this.mainGrid.dataList.__setCellData(e,this.colID,this.select.getValue()),this.mainGrid.directItemChoiceKeyObj.select=null,this.options.moveFocusByChoice&&o&&this.moveFocus(this.editRowIndex,this.colID),o)return;this.mainGrid.editedCell=this.mainGrid.getCellInfo(t),t.innerHTML="",t.appendChild(this.select.render)}if(this.select.itemTable||this.mainGrid.directItemChoiceKeyObj.select||(this.existGridViewItemsetNode&&(this.editTd=t),this.createItemTable(t,e)),this.hasRef&&!this.dataComp){var s=this.mainGrid.getElemRowIndex(t);this.select.itemArr=this.getRefItemArr(s),this.select.itemTable.show(),this.select.setSelectOptions()}if(this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.select.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),0==this.select.getItemCount()&&(this.select.selectedIndex=-1,this.select.dom.label.innerHTML=""),this.existGridViewItemsetNode&&this.select.gridViewOptions.width)this.select.openSubLayer();else{var r=t.clientWidth-2,n={top:0,left:0,bottom:0,right:0};if(a.D.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(n.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),n.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),n.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),n.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else(c=WebSquare.style.getComputedStyle(t))&&(c.padding||c.paddingTop||c.paddingBottom||c.paddingLeft||c.paddingRight)&&(n.left=parseInt(c.paddingLeft,10),n.right=parseInt(c.paddingRight,10),n.top=parseInt(c.paddingTop,10),n.bottom=parseInt(c.paddingBottom,10));this.select.setSize(t.clientWidth-(2+n.left+n.right),t.clientHeight-(2+n.top+n.bottom)),this.select.itemTable.setStyle("width",t.clientWidth-4+"px"),this.select.openSubLayer();var l=this.mainGrid.render.offsetWidth,h=this.select.itemTable.render.offsetWidth,d=this.select.itemTable.render.firstChild.offsetWidth;if(h-2>r&&(r=h-2),this.select.itemTable.render.clientHeight>=this.select.itemTable.render.scrollHeight||this.select.getItemCount()<=this.select.options.visibleRowNum)this.select.itemTable.render.firstChild.style.width=r+"px",l>h&&d<h&&this.select.itemTable.render.firstChild.firstChild&&this.select.itemTable.render.firstChild.firstChild.offsetWidth<=r&&this.select.itemTable.setStyle("width",r+"px");else{this.select.itemTable.render.firstChild.style.width=r-17+"px";var c;n={top:0,left:0,bottom:0,right:0};if(a.D.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(n.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),n.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),n.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),n.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else(c=WebSquare.style.getComputedStyle(t))&&(c.padding||c.paddingTop||c.paddingBottom||c.paddingLeft||c.paddingRight)&&(n.left=parseInt(c.paddingLeft,10),n.right=parseInt(c.paddingRight,10),n.top=parseInt(c.paddingTop,10),n.bottom=parseInt(c.paddingBottom,10));this.select.setSize(t.clientWidth-(2+n.left+n.right),t.clientHeight-(2+n.top+n.bottom)),l>h&&d+17<=h-2&&this.select.itemTable.render.firstChild.firstChild.offsetWidth<=r&&this.select.itemTable.setStyle("width",r+"px")}}t.style.textOverflow="ellipsis"}},
A.select.prototype._handleEndEdit_common=function(t){try{this.select.closeSubLayer();var e=this.select.getValue();try{this.select.render.parentNode&&this.editTd.removeChild(this.select.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.select.prototype._handleEndEdit_focus=function(){this.options.moveFocusByChoice&&this.moveFocus(this.editRowIndex,this.colID)},A.select.prototype._getEditedValue=function(t){return this.select.getValue()},A.select.prototype._handleCancelEdit=function(t){this.select.closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.editTd.removeChild(this.select.render),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID))},A.select.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.select.prototype.moveFocus=function(t,e){if(this.options.moveFocusByChoice)switch(this.options.moveFocusByChoice){case"down":this.mainGrid._setFocusedCell(t+1,e,!1);break;case"right":var i=this.mainGrid.getColumnIndex(e)+1;this.mainGrid._setFocusedCell(t,i,!1)}},A.select.prototype.refreshCell=function(){try{if(!this.options.selectedData)return;if(!this.dataComp)return;var t=this.mainGrid.modelControl.getDataComp(this.dataComp);if(!t)return;var e,i=null,o=null;if("linkedDataList"===t.initializeType?(i=t._dataList,o=t.initialRowIndexArr):"dataList"===t.initializeType&&(o=(i=t).filteredRowIndexArr),null==i)return;if(this.internal)this.itemsetObj.label,e=this.itemsetObj.value;else{var a=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),n=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);a.length>0&&n.length>0&&(WebSquare.Elem.api.getAttribute(a[0],"ref"),e=WebSquare.Elem.api.getAttribute(n[0],"ref"))}var l,h=null!=e?i.bodyIdColIndexMap[e]:i.bodyIdColIndexMap[this.itemsetObj.value];l=this.mainGrid.groupbyStatus.grouped?this.mainGrid.groupbyStatus.groupbyRowIndexArr:this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr:this.mainGrid._dataList.filteredRowIndexArr;for(var d=this.mainGrid._dataList.cellIdList.length,c=this.mainGrid._dataList.bodyIdColIndexMap[this.id],u=0;u<l.length;u++){var p=l[u];if("object"!=typeof p){var g=this.mainGrid._dataList.dataArr[p*d+c];if(!(this.options.allOption&&g==WebSquare.allValue||this.options.chooseOption&&g==this.options.chooseOptionValue||!(""!==g||this.selectedIndex>=0))){var m=!1;if("linkedDataList"===t.initializeType&&null!=t.conditionInfo&&t.conditionInfo.filterInfo.useRef){var f=t.conditionInfo.targetInfo,b={};for(var y in f){var v=this.mainGrid.modelControl.getDataComp(y);if(null!=v.initializeType&&"dataMap"!=v.initializeType){var w=v.getRowPosition();w!=u&&(b[y]=w,"linkedDataList"===v.initializeType?v._dataList.rowPosition=v.filteredRowIndexArr[u]:v.rowPosition=u)}}var S=t.getBroadcast();for(var C in t.setBroadcast(!1),t.syncWithParent(),t.setBroadcast(S),b){var _=this.mainGrid.modelControl.getDataComp(C);"linkedDataList"===_.initializeType?_._dataList.rowPosition=_.filteredRowIndexArr[b[C]]:_.rowPosition=b[C]}o=t.initialRowIndexArr}for(var x=0;x<o.length;x++)if(g==i.dataArr[o[x]*i.cellIdList.length+h]){m=!0;break}if(!m){var I="";this.selectedIndex>=0&&this.selectedIndex<o.length&&!this.options.chooseOption&&(I=i.dataArr[o[this.selectedIndex]*i.cellIdList.length+h]),this.mainGrid._dataList.dataArr[p*d+c]=I}}}}}catch(t){r.w.printStackTrace(t,null,this)}},A.checkcombobox=function(){},A.checkcombobox.prototype._initializeCellInfo=function(){try{this.separator=this.options.separator||" "}catch(t){r.w.printStackTrace(t,null,this)}},A.checkcombobox.prototype.setInnerHTML=function(t,e,i,o,s){try{null==e&&(e="");var n=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape
;n=WebSquare.util.getBoolean(n);var l=this.getData(e,i);n&&(l=WebSquare.xml._encode(l+"")),t.innerHTML=this.mainGrid.dataTagOpen+l+this.mainGrid.dataTagClose;var h,d=this.mainGrid.dataList.getRealRowIndex(i),c=this.mainGrid.getCellOption(d,o,"viewType"),u=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),p=a.D.getDataPrefix("editModeEvent");if("icon"==c||""==c&&"own"==u?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_checkcombobox"),t.setAttribute(p,this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute(p,"onclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_checkcombobox"),t.setAttribute(p,"")),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var g=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof g&&(this.mainGrid.options.titleFormatter=g,h=g.call(this,i,o,e))}else h=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",h)}catch(t){r.w.printStackTrace(t,null,this)}}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},A.checkcombobox.prototype.getData=function(t,e,i){try{var o="";t=t.split(this.separator);var a,n,l=[],h=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var d=this.itemsetObj.nodeset;d.indexOf("data:")>=0&&(h=d.slice("data:".length))}if(h&&(n=this.mainGrid.modelControl.getDataComp(h)),h&&n){if("linkedDataList"===n.initializeType&&null!=n.conditionInfo&&n.conditionInfo.filterInfo.useRef){var c=n.conditionInfo.targetInfo,u={};for(var p in c){var g=this.mainGrid.modelControl.getDataComp(p);if(null!=g.initializeType&&"dataMap"!=g.initializeType){var m=g.getRowPosition();m!=e&&(u[p]=m,"linkedDataList"===g.initializeType?g._dataList.rowPosition=g.filteredRowIndexArr[e]:g.rowPosition=e)}}var f=n.getBroadcast();for(var b in n.setBroadcast(!1),n.syncWithParent(),n.setBroadcast(f),u){var y=this.mainGrid.modelControl.getDataComp(b);"linkedDataList"===y.initializeType?y._dataList.rowPosition=y.filteredRowIndexArr[u[b]]:y.rowPosition=u[b]}}var v=null,w=null;if("linkedDataList"===n.initializeType?(v=n._dataList,w=n.initialRowIndexArr):"dataList"===n.initializeType&&(w=(v=n).filteredRowIndexArr),!this.checkcombobox&&null!=v)try{var S,C;o="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)S=this.itemsetObj.label,C=this.itemsetObj.value;else{var _=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),x=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);0!=_.length&&0!=x.length&&(S=WebSquare.Elem.api.getAttribute(_[0],"ref"),C=WebSquare.Elem.api.getAttribute(x[0],"ref"))}for(var I=v.bodyIdColIndexMap[S],T=v.bodyIdColIndexMap[C],k=0;k<w.length;k++)for(var D=w[k]*v.cellIdList.length,L=0;L<t.length;L++)t[L]==v.dataArr[D+T]&&(o=v.dataArr[D+I],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?o=t[L]+this.options.delimiter+o:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?o=o+this.options.delimiter+t[L]:"value"!==this.options.displayMode&&3!=this.options.displayMode||(o=t[L]),i&&i.emptyValue&&(""===o||"$blank"==o)?o=i.emptyValue:void 0!==o&&"$blank"!=o||(o=""),l.push(o));if(l.length>0)return l.join(this.separator);if(this.options.allOption&&t==WebSquare.allValue)o=WebSquare.language.getMessage("Grid_all")||"-전체-";else if(this.options.chooseOption&&t==this.options.chooseOptionValue)o=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)o="";else{D=0;D=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var W=this.mainGrid._dataList.cellIdList.length,A=this.mainGrid._dataList.bodyIdColIndexMap[this.id];this.mainGrid._dataList.dataArr[D*W+A]="",o=""}else o=t
;return i&&i.emptyValue&&(""===o||"$blank"==o)?o=i.emptyValue:void 0!==o&&"$blank"!=o||(o=""),o}catch(e){return r.w.printStackTrace(e,null,this),t}var M=!1;a={};for(k=0;k<this.checkcombobox.itemArr.length;k++)for(L=0;L<t.length;L++)this.checkcombobox.itemArr[k].value==t[L]&&(l.push(this.checkcombobox.itemArr[k].label),a[k+"_"]=!0,M=!0);if(!M){if(""==l&&1==this.options.chooseOption){if(o=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef)(q=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef))&&(o=q);o=WebSquare.xml.decode(o).replace("&nbsp;"," ")}else this.options.selectedData||(o=t);l.push(o),a=null}o=l.join(this.separator)}else{var E=this.getMatchInfo(e);for(M=!1,k=0;k<t.length;k++)void 0!==(o=E["CHECKCOMBOBOX_"+t[k]])&&(l.push(o),M=!0);if(M){if(this.options.checkcomboboxRangeSeparator&&this.checkcombobox){a={};for(k=0;k<this.checkcombobox.itemArr.length;k++)for(L=0;L<t.length;L++)this.checkcombobox.itemArr[k].value==t[L]&&(a[k+"_"]=!0)}}else{if(""==l&&1==this.options.chooseOption){var q;if(o=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef)(q=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef))&&(o=q);o=WebSquare.xml.decode(o).replace("&nbsp;"," ")}else this.options.selectedData||(o=t);l.push(o)}o=l.join(this.separator)}if(i&&i.emptyValue&&(""===o||"$blank"==o))o=i.emptyValue;else if(void 0===o||"$blank"==o)return"";return this.options.checkcomboboxRangeSeparator&&this.checkcombobox&&a?this.checkcombobox._getRangeText(this.checkcombobox.itemArr,this.checkcombobox.itemArr.length,this.separator,a):o}catch(t){r.w.printStackTrace(t,null,this)}},A.checkcombobox.prototype._createComponent=function(t){try{if(this.comp)return;this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_checkcombobox_"+this.colID),this.xml.setAttribute("chooseOption",this.options.chooseOption+""),this.xml.setAttribute("chooseOptionLabel",this.options.chooseOptionLabel),this.xml.setAttribute("allOption",this.options.allOption+""),"column"===this.options.submenuSize?this.xml.setAttribute("submenuSize","column"):this.xml.setAttribute("submenuSize","auto"),this.xml.setAttribute("style",this.style),this.xml.setAttribute("disabled",this.mainGrid.getDisabled("cell",this.mainGrid._getGroupbyDisplayRowIndex(t),this.colID)),this.xml.setAttribute("useDrag",this.options.checkcomboboxUseDrag),this.xml.setAttribute("useEdit",this.options.checkcomboboxUseEdit),this.xml.setAttribute("rangeSeparator",this.options.checkcomboboxRangeSeparator),this.xml.setAttribute("validateOnInput",this.options.checkcomboboxValidateOnInput),this.options.checkcomboboxVisibleRowNum>1&&this.xml.setAttribute("visibleRowNum",this.options.checkcomboboxVisibleRowNum),this.options.checkcomboboxVisibleColNum>1&&this.xml.setAttribute("visibleColNum",this.options.checkcomboboxVisibleColNum),this.options.checkcomboboxVisibleColMax>1&&this.xml.setAttribute("visibleColMax",this.options.checkcomboboxVisibleColMax),this.configOptions.separator=this.separator,this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.existGridViewItemsetNode&&!this.configOptions.submenuSize&&(this.configOptions.submenuSize="auto"),this.internal&&(this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions)),this.checkcombobox=new WebSquare.uiplugin.checkcombobox(this.mainGridId+"_checkcombobox_"+this.id,this.configOptions,this.xml),this.comp=this.checkcombobox;var e=this;this.checkcombobox.__closeSubLayer=this.checkcombobox.closeSubLayer,this.checkcombobox.closeSubLayer=function(){this.__closeSubLayer(),e.handleEndEdit()},
this.checkcombobox.toggle=function(){if(this.isOpen){var i=this.getValue(),o=this.getInfoArray();this.__closeSubLayer();var s=this.getValue(),r=e.mainGrid.getColumnIndex(e.options.id);if(i!=s){var a={oldInfo:o,newInfo:this.getInfoArray(),oldValue:i,newValue:s,rowIndex:t,colIndex:r,colId:e.mainGrid.getColumnID(r)};d.B.fireEvent(e.mainGrid,"onviewchange",a)}e.handleEndEdit()}else this.openSubLayer()},this.checkcombobox._parent_uuid=this.mainGrid.uuid}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.checkcombobox.prototype.setEditMode=function(t,e){try{if(!0!==this._init){if(this._createComponent(e),t.innerHTML=this.checkcombobox.toHTML(),this.checkcombobox.activate(),this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setNodeSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value),this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),this.checkcombobox.setSubLayer(),!this.existGridViewItemsetNode){var i=this.checkcombobox.itemTable,o=this;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:o.checkcombobox.closeSubLayer(),o.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",o.mainGrid.options.keyMoveEditMode);break;case 13:o.mainGrid.options.fastEditMode?"none"==o.mainGrid.options.enterKeyMove||("right"==o.mainGrid.options.enterKeyMove?o.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",o.mainGrid.options.keyMoveEditMode):o.mainGrid.moveVertical(t,t.shiftKey?"up":"down",o.mainGrid.options.keyMoveEditMode)):o.checkcombobox.closeSubLayer();break;case 27:o.mainGrid.editedCell.handleCancelEdit(t)}})),this.mainGrid._moveKeyEdit(i.uuid,"keyDownFunc",{itemTable:!0})}this._init=!0}else t.innerHTML="",this.mainGrid.cellMergeInfo&&this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),t.appendChild(this.checkcombobox.render);if(this.hasRef&&!this.dataComp){var s=this.mainGrid.getElemRowIndex(t);this.checkcombobox.itemArr=this.getRefItemArr(s),this.checkcombobox.setSelectOptions()}this.existGridViewItemsetNode?(this.checkcombobox.openSubLayer(),this.checkcombobox.setValue(this.mainGrid.dataList._getCellData(e,this.colID))):(this.checkcombobox.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),this.checkcombobox.openSubLayer()),this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t);var a=this.checkcombobox.itemTable.render.firstChild.clientWidth;a<t.clientWidth-2&&(a=t.clientWidth-2),a<this.checkcombobox.itemTable.render.offsetWidth-2&&(a=this.checkcombobox.itemTable.render.offsetWidth-2),this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),this.checkcombobox.setItemTable(),t.style.textOverflow="ellipsis"}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.checkcombobox.prototype._handleEndEdit_common=function(t){try{this.checkcombobox.__closeSubLayer&&this.checkcombobox.__closeSubLayer();var e=this.checkcombobox.getValue();try{this.editTd.removeChild(this.checkcombobox.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.checkcombobox.prototype._handleEndEdit_focus=function(){this.mainGrid._setFocusedCell()},A.checkcombobox.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.checkcombobox.prototype._handleCancelEdit=function(t){this.checkcombobox.__closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid._setFocusedCell()},A.checkcombobox.prototype._getEditedValue=function(t){return this.checkcombobox.getValue()},A.checkcombobox.prototype.refreshItemArr=function(t){var e=WebSquare.WebSquareparser.parseChoices(this.xml,"")
;if(e.length>0?this.itemArr=e:this.itemArr=this.modelControl.getItemsetData(),1==this.options.allOption){var i=WebSquare.language.getMessage("Grid_all")||"-전체-";this.itemArr=[{label:i,value:WebSquare.allValue}].concat(this.itemArr)}},A.autoComplete=function(){},A.autoComplete.prototype.setInnerHTML=function(t,e,i,o,s){try{var n;null==e&&(e="");var l=this.mainGrid._getGroupbyDisplayRowIndex(i),h=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;h=a.D.getBoolean(h);var c=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id);if("function"==typeof c){this.useCustomFormatter=!0;var u=this.getDisplayData(e,i);h&&(u=WebSquare.xml._encode(u+"")),n=c.call(this.mainGrid,e,u,l,o)}else{this.useCustomFormatter=!1,n=this.getData(e,i),h&&(n=WebSquare.xml._encode(n+""));var p=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;n&&this.formatter&&p&&(n=this.formatter.format(n))}var g=this.mainGrid.dataList.getRealRowIndex(i),m=this.mainGrid.getCellOption(g,o,"viewType"),f=a.D.getDataPrefix("col_id"),b=a.D.getDataPrefix("rowIndex"),y=a.D.getDataPrefix("colIndex");if(this.options.embeddedInput){var v=this.mainGrid.getInput(this,t,e),w=0,S=0,C=!1;"none"==t.parentNode.style.display&&(t.parentNode.style.display="",C=!0),this.mainGrid.embeddedAutoCompleteStyleObj||(this.mainGrid.embeddedAutoCompleteStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10)}),w=t.offsetHeight-parseInt(WebSquare.style.getStyle(t,"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t,"border-bottom-width"),10),w-=this.mainGrid.embeddedAutoCompleteStyleObj.top+this.mainGrid.embeddedAutoCompleteStyleObj.bottom,this.mainGrid.embeddedWidthObj[o]&&!this.mainGrid.embeddedWidthObj[o].isChanged||(this.mainGrid.embeddedWidthObj[o]={isChanged:!1,width:t.clientWidth}),S=this.mainGrid.embeddedWidthObj[o].width,S-=this.mainGrid.embeddedAutoCompleteStyleObj.left+this.mainGrid.embeddedAutoCompleteStyleObj.right,C?t.parentNode.style.display="none":WebSquare.util.isIE("6 7")&&(w-=2),v._setSize(S-2,w),v.render.setAttribute(b,i),v.setValue(e),""!==n&&(v.dom.label.innerHTML=n),this.mainGrid._getEditDisabled(i,o)?v.setDisabled(!0):v.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?v.setReadOnly(!0):v.setReadOnly(!1),t.removeAttribute("tabIndex")}else if("icon"==m&&"true"==this.options.viewTypeIconImage){t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td "+f+"='"+this.colID+"' "+b+"='"+i+"' "+y+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_table' style='width:90%; overflow:hidden; text-overflow:ellipsis;'>",this.mainGrid.dataTagOpen+n+this.mainGrid.dataTagClose,"</td>","<td "+f+"='"+this.colID+"' "+b+"='"+i+"'  "+y+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_img'>","<div class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_div_img' />","</td>","</table>"].join("");var _=this,x=t,I=t.getElementsByTagName("div")[0];d.B.addListener(I,"onclick",(function(t){_.mainGrid._getEditDisabled(i,o)||_.mainGrid.___getEditReadOnly(i,o)||(_.autoCompleteImageClicked=!0,_.options.directOpen&&(_.mainGrid.__setFocusedCell(t,x),_.mainGrid.setEditMode(x)))}))}else{t.innerHTML=this.mainGrid.dataTagOpen+n+this.mainGrid.dataTagClose;var T,k=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),D=a.D.getDataPrefix("editModeEvent");if("icon"==m||""==m&&"own"==k?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_autoComplete"),t.setAttribute(D,this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute(D,"onclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_autoComplete"),t.setAttribute(D,"")),this.mainGrid.options.titleFormatter)try{
if("function"!=typeof this.mainGrid.options.titleFormatter){var L=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof L&&(this.mainGrid.options.titleFormatter=L,T=L.call(this,i,o,e))}else T=this.mainGrid.options.titleFormatter.call(this,i,o,n);t.setAttribute("title",T)}catch(t){r.w.printStackTrace(t,null,this)}}}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.autoComplete.prototype.getInput=function(t,e,i,o){var s=o.titleStr,r=o.input_id,a=o.dataRowIndex,n=o.dataCol_id,l=t.mainGrid,h=s||t.options.title||"";if(l.options.titleAuto&&!h){var c=l.getHeaderValue(l.bodyToHeaderRelation[t.id])||"";h=""!==i&&null!=i?c+" "+(l.changeItemValue("label",t.id,[i])[0]||i):c+WebSquare.language.getMessage("Grid_autoComplete")}var u=new WebSquare.uiplugin.autoComplete(r,{className:"w2grid_embedded_select",style:"$blank",pluginName:"autoComplete",renderType:"native",title:h,chooseOption:t.options.chooseOption,chooseOptionLabel:t.options.chooseOptionLabel,_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(a),10),i=this.render.parentNode.getAttribute(n),o=l.getColumnIndex(i);WebSquare.event.fireEvent(l,"oncellclick",e,o,i)}}},{name:"onkeydown",action:"script",param:{handler:function(t){switch(t.keyCode){case 38:case 40:case 27:case 9:case 13:return void d.B.stopPropagation(t)}}}}]},t.xml);e.innerHTML=u.toHTML();var p=WebSquare.uiplugin.autoComplete.prototype.setSelectedIndex1;u.setSelectedIndex1=function(t,e,i){var o=this.render.parentNode.getAttribute(n),s=parseInt(this.render.getAttribute(a),10),r=l._getGroupbyDisplayRowIndex(s),h=l.getColumnIndex(o),c=this.selectedIndex,u=this.getValue();if(p.call(this,t,e,i),l.dataList.__setCellData(s,o,this.getValue()),l._dataList.setRowPosition(s),c!=this.selectedIndex){var g={oldValue:u,newValue:this.getValue(),oldSelectedIndex:c,newSelectedIndex:this.selectedIndex,rowIndex:s,colIndex:h,colId:l.getColumnID(h)};d.B.fireEvent(l,"onviewchange",g)}d.B.fireEvent(l,"onafteredit",r,h,this.getValue())},u.activate();var g=u.uuid;return u.event.addListener2(u.dom.input,"onfocus",(function(t){l.lastEvent=t;var e=WebSquare.idCache[g];l.getLastFocusedCell().focusedTd==e.render.parentNode||l.focusedByApi||l._setFocusedCell(e.render.getAttribute(a),e.render.parentNode.getAttribute(n)),l.focusedByApi=!1})),u},A.autoComplete.prototype._initializeCellInfo=function(t){try{"useData"==this.options.noResult&&(this.useDataInfo={})}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.autoComplete.prototype.getData=function(t,e,i){try{var o,a="",n=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var l=this.itemsetObj.nodeset;l.indexOf("data:")>=0&&(n=l.slice("data:".length))}if(n&&(o=this.mainGrid.modelControl.getDataComp(n)),n&&o){if("linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef){var h=o.conditionInfo.targetInfo,d={};for(var c in h){var u=this.mainGrid.modelControl.getDataComp(c);if(null!=u.initializeType&&"dataMap"!=u.initializeType){var p=u.getRowPosition();p!=e&&(d[c]=p,"linkedDataList"===u.initializeType?u._dataList.rowPosition=u.filteredRowIndexArr[e]:u.rowPosition=e)}}for(var g in o.syncWithParent(),d){var m=this.mainGrid.modelControl.getDataComp(g);"linkedDataList"===m.initializeType?m._dataList.rowPosition=m.filteredRowIndexArr[d[g]]:m.rowPosition=d[g]}}var f=null,b=null,y=null;if("linkedDataList"===o.initializeType)f=o._dataList,b=o.initialRowIndexArr,y=o.initialRowIndexArr;else if("dataList"===o.initializeType){if(f=o,o.options&&o.options.validateAllItemsetData){var v=f.getTotalRow();b=[];for(var w=0;w<v;w++)b.push(w)}else b=f.filteredRowIndexArr;y=f.filteredRowIndexArr}if(!this.autoComplete&&null!=f)try{var S,C;a="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)S=this.itemsetObj.label,C=this.itemsetObj.value;else{
var _=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),x=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);_.length>0&&x.length>0&&(S=WebSquare.Elem.api.getAttribute(_[0],"ref"),C=WebSquare.Elem.api.getAttribute(x[0],"ref"))}var I=null!=S?f.bodyIdColIndexMap[S]:f.bodyIdColIndexMap[this.itemsetObj.label],T=null!=C?f.bodyIdColIndexMap[C]:f.bodyIdColIndexMap[this.itemsetObj.value];for(w=0;w<b.length;w++){var k=b[w]*f.cellIdList.length;if(t==f.dataArr[k+T])return a=f.dataArr[k+I],"value delim label"===this.options.displayMode||1==this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||2==this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&3!=this.options.displayMode||(a=t),i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}if(this.selectedIndex>=0&&this.selectedIndex<y.length&&!this.options.chooseOption)a=f.dataArr[y[this.selectedIndex]*f.cellIdList.length+I],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t);else if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else if(this.options.chooseOption&&t==this.options.chooseOptionValue)a=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)a="";else{k=0;k=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var D=this.mainGrid._dataList.cellIdList.length,L=this.mainGrid._dataList.bodyIdColIndexMap[this.colID];this.mainGrid._dataList.dataArr[k*D+L]="",a=""}else a=t;return i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}catch(e){return r.w.printStackTrace(e,null,this),t}var W=!1;for(w=0;w<this.autoComplete.itemArr.length;w++)if(this.autoComplete.itemArr[w].value==t){W=!0,a=this.autoComplete.itemArr[w].label;break}if(!W&&o.options&&o.options.validateAllItemsetData)for(w=0;w<this.autoComplete.allItemArr.length;w++)if(this.autoComplete.allItemArr[w].value==t){W=!0,a=this.autoComplete.allItemArr[w].label;break}if(!W)if(""!=t||-1==this.selectedIndex||this.options.chooseOption)if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else this.options.chooseOption&&t==this.options.chooseOptionValue?a=this.options.chooseOptionLabel:this.options.selectedData||(a=t);else a=this.autoComplete.itemArr[this.selectedIndex].label,this.mainGrid.dataList.__setCellData(e,this.colID,a)}else{var A=this.getMatchInfo(e);"useData"==this.options.noResult&&(this.useDataInfo["AUTOCOMPLETE_"+t]||(this.useDataInfo["AUTOCOMPLETE_"+t]=t),A["AUTOCOMPLETE_"+t]||(this.matchInfo["AUTOCOMPLETE_"+t]=t,this.itemArr=[{label:t,value:""}].concat(this.itemArr))),a=A["AUTOCOMPLETE_"+t]}if(i&&i.emptyValue&&(""===a||"$blank"==a))a=i.emptyValue;else if(void 0===a||"$blank"==a)return"";return a}catch(t){r.w.printStackTrace(t,null,this)}return t},A.autoComplete.prototype._createComponent=function(t){try{if(this.comp)return;if(this.options.disableEdit?this.style="position:relative;left:0px;top:0px;":this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_autoComplete_"+this.colID),this.xml.setAttribute("style",this.style),this.configOptions={},this.options.interactionMode&&(this.configOptions.interactionMode=this.options.interactionMode),this.options.submission&&(this.configOptions.submission=this.options.submission),this.options.sortOption&&(this.configOptions.sortOption=this.options.sortOption),this.options.displayMode&&(this.configOptions.displayMode=this.options.displayMode),
this.options.search&&(this.configOptions.search=this.options.search),this.options.searchTarget&&(this.configOptions.searchTarget=this.options.searchTarget),this.options.useKeywordHighlight&&(this.configOptions.useKeywordHighlight=this.options.useKeywordHighlight),this.options.submenuSize&&(this.configOptions.submenuSize=this.options.submenuSize),this.options.searchTarget&&(this.configOptions.searchTarget=this.options.searchTarget),this.options.useKeywordHighlight&&(this.configOptions.useKeywordHighlight=this.options.useKeywordHighlight),this.options.allOption&&(this.configOptions.allOption=this.options.allOption),this.options.chooseOptionLabel&&(this.configOptions.chooseOptionLabel=this.options.chooseOptionLabel),this.options.noResult&&(this.configOptions.noResult=this.options.noResult),this.options.disableEdit&&(this.configOptions.disableEdit=this.options.disableEdit),this.options.findItemFirstKey&&(this.configOptions.findItemFirstKey=this.options.findItemFirstKey),this.options.findItemKor&&(this.configOptions.findItemKor=this.options.findItemKor),this.options.maxlength&&(this.configOptions.maxlength=this.options.maxlength),a.D.isIEAllVersion()&&this.xml.removeAttribute("readOnly"),this.internal&&(this.options.displayFormatter&&(this.configOptions.displayFormatter=this.options.displayFormatter),this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions),this.options.caseSensitive&&(this.configOptions.caseSensitive=this.options.caseSensitive)),this.existGridViewItemsetNode&&!this.configOptions.submenuSize&&(this.configOptions.submenuSize="auto"),this.hasRef)this.targetRowIndex=t,WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",new Function("_this","return "+this.refStr)(this));this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.autoComplete=new WebSquare.uiplugin.autoComplete(this.mainGridId+"_autoComplete_"+t+"_"+this.colID+"_"+this.id,this.configOptions,this.xml),this.autoComplete.options.disabled=!1,this.comp=this.autoComplete,this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setItemSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value);var e=this;this.autoComplete._handleClickEvent=this.autoComplete.handleClickEvent,this.autoComplete.handleClickEvent=function(t){this._handleClickEvent(t),d.B.stopEvent(t)},this.existGridViewItemsetNode?(this.autoComplete._setSubLayer=this.autoComplete.setSubLayer,this.autoComplete.setSubLayer=function(t){this._setSubLayer(t);var i=this.itemTable;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t),"down"==e.mainGrid.options.tabKeyMove?e.mainGrid.moveVertical(t,t.shiftKey?"up":"down",e.mainGrid.options.keyMoveEditMode):"none"==e.mainGrid.options.tabKeyMove||e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode);break;case 27:e.handleCancelEdit(t)}})),i.addClickEventListener((function(t,i){e.autoComplete.dom.input.value=e.autoComplete.viewArr[i].label,e.autoComplete.selectedText=e.autoComplete.viewArr[i].orgLabel,e.autoComplete.selectedValue=e.autoComplete.viewArr[i].value;var o=e.autoComplete.selectedText+"|"+e.autoComplete.selectedValue;i=e.autoComplete.findinItemArr(o,"all");e.autoComplete.setSelectedIndex1(i),e.autoComplete.editmode=!1,e.handleEndEdit()}))}):(this.autoComplete._setSubLayer=this.autoComplete.setSubLayer,this.autoComplete.setSubLayer=function(t){this._setSubLayer(t);var i=this.itemTable;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t),
"down"==e.mainGrid.options.tabKeyMove?e.mainGrid.moveVertical(t,t.shiftKey?"up":"down",e.mainGrid.options.keyMoveEditMode):"none"==e.mainGrid.options.tabKeyMove||e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode);break;case 13:e.mainGrid.options.fastEditMode&&("none"==e.mainGrid.options.enterKeyMove||("right"==e.mainGrid.options.enterKeyMove?e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode):e.mainGrid.moveVertical(t,t.shiftKey?"up":"down",e.mainGrid.options.keyMoveEditMode)));break;case 27:e.handleCancelEdit(t)}})),i.addClickEventListener((function(t,i){e.autoComplete.dom.input.value=e.autoComplete.viewArr[i].label,e.autoComplete.selectedText=e.autoComplete.viewArr[i].orgLabel,e.autoComplete.selectedValue=e.autoComplete.viewArr[i].value;var o=e.autoComplete.selectedText+"|"+e.autoComplete.selectedValue;i=e.autoComplete.findinItemArr(o,"all");e.autoComplete.setSelectedIndex1(i),e.autoComplete.editmode=!1,e.handleEndEdit(),e.options.directOpen&&e.mainGrid._setFocusedCell()})),e.mainGrid._moveKeyEdit(i.uuid,"keyDownFunc",{itemTable:!0})}),this.autoComplete.showEditMode=function(t){try{t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible")}catch(t){}},this.autoComplete._inputKeyDown=this.autoComplete.inputKeyDown,this.autoComplete.inputKeyDown=function(t,i){27==t.keyCode||(e.autoComplete._inputKeyDown(t,i),13===t.keyCode&&e.options.directOpen&&(e.mainGrid._setFocusedCell(),d.B.stopPropagation(t)))},this.mainGrid._moveKeyEdit(this.autoComplete.uuid,"_inputKeyDown",{skipVertical:!0}),this.autoComplete.setSelectedIndex1=function(t){var i=this.selectedIndex,o=this.getValue();if(this.setSelectedIndex(t),i!=this.selectedIndex){var s=e.mainGrid.getColumnIndex(e.options.id),r=e.editRowIndex,a={oldValue:o,newValue:this.getValue(),oldSelectedIndex:i,newSelectedIndex:this.selectedIndex,rowIndex:r,colIndex:s,colId:e.mainGrid.getColumnID(s)};d.B.fireEvent(e.mainGrid,"onviewchange",a)}this.closeSubLayer(),e.editTd&&e.handleEndEdit(),e.existGridViewItemsetNode&&e.options.directOpen&&e.mainGrid._setFocusedCell()},this.autoComplete._refreshItemset=this.autoComplete.refreshItemset,this.autoComplete.refreshItemset=function(t){"gridViewItemset"!==this.options.itemTableType&&(e.matchInfo=e.setMatchInfo()),this._refreshItemset(t)},this.autoComplete.options.handleOtherClick=!1}catch(t){r.w.printStackTrace(t,null,this)}},A.autoComplete.prototype.setEditMode=function(t,e){try{if(!0!==this._init?(this._createComponent(e),t.innerHTML=this.autoComplete.toHTML(),this.autoComplete.activate(),this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),this._init=!0,this.options.placeholder&&this.autoComplete.dom.input.setAttribute("placeholder",this.options.placeholder)):(t.innerHTML="",this.mainGrid.cellMergeInfo&&this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),t.appendChild(this.autoComplete.render)),this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),this.hasRef){var i=this.mainGrid.getElemRowIndex(t);this.autoComplete.itemArr=this.getRefItemArr(i)}if(this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.autoComplete.itemArr.length>0||this.autoComplete.allItemArr.length>0){var o=this.mainGrid.dataList._getCellData(e,this.colID);if(this.autoComplete.setValue(o),!0===this.autoComplete.options.disableEdit||!0===this.autoCompleteImageClicked){if(this.autoCompleteImageClicked&&this.options.directOpen)if(this.autoComplete.viewArr=[],this.existGridViewItemsetNode);else for(var s=0;s<this.autoComplete.itemArr.length;s++)this.autoComplete.viewArr.push({label:this.autoComplete.itemArr[s].label,
value:this.autoComplete.itemArr[s].value,orgLabel:this.autoComplete.itemArr[s].orgLabel,index:s,_hidden:this.autoComplete.itemArr[s]._hidden});this.autoComplete.openSubLayer(),this.autoCompleteImageClicked=!1}else this.autoComplete.setInputFocus()}else this.autoComplete.options.disableEdit||this.autoComplete.setInputFocus(),this.autoComplete.dom.input.value="";0==this.autoComplete.getItemCount()&&(this.autoComplete.selectedIndex=-1,this.autoComplete.dom.label.innerHTML="")}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.autoComplete.prototype.setColumnDisableEdit=function(t){try{this.options.disableEdit=!0,this.autoComplete&&this.autoComplete.disableEdit(t)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.autoComplete.prototype._handleEndEdit_common=function(t){try{this.autoComplete.endEdit({noEvent:!0}),this.autoComplete.closeSubLayer();var e=this.autoComplete.getValue();try{this.editTd.removeChild(this.autoComplete.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i),this.options.directOpen&&(this.autoComplete.editmode=!1)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.autoComplete.prototype._handleEndEdit_focus=function(t,e,i){!1===i&&this.mainGrid._setFocusedCell()},A.autoComplete.prototype._handleCancelEdit=function(t){this.autoComplete.closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.mainGrid.getRealRowIndex(this.editRowIndex),this.colID);this.editTd.removeChild(this.autoComplete.render),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid._setFocusedCell()},A.autoComplete.prototype._getEditedValue=function(t){return this.autoComplete.getValue()},A.autoComplete.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.calendar=function(){},A.calendar.prototype.initializeCellInfo=function(t){try{this.options.useIOFormatLength&&this.refreshDataArr()}catch(t){r.w.printStackTrace(t,null,this)}},A.calendar.prototype.setInnerHTML=function(t,e,i,o,s){if(this.options.embeddedInput){var n=this.mainGrid.getInput(this,t,e);null==n.render.parentNode&&(t.innerHTML="",t.appendChild(n.render));var l=0,h=0,c=!1;"none"==t.parentNode.style.display&&(t.parentNode.style.display="",c=!0),this.mainGrid.embeddedCalendarStyleObj||(this.mainGrid.embeddedCalendarStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10)}),l=t.offsetHeight-parseInt(WebSquare.style.getStyle(t,"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t,"border-bottom-width"),10),l-=this.mainGrid.embeddedCalendarStyleObj.top+this.mainGrid.embeddedCalendarStyleObj.bottom,this.mainGrid.embeddedWidthObj[o]&&!this.mainGrid.embeddedWidthObj[o].isChanged||(this.mainGrid.embeddedWidthObj[o]={isChanged:!1,width:t.clientWidth}),h=this.mainGrid.embeddedWidthObj[o].width,h-=this.mainGrid.embeddedCalendarStyleObj.left+this.mainGrid.embeddedCalendarStyleObj.right,c?t.parentNode.style.display="none":a.D.isIE("6 7")&&(l-=2);var u=a.D.getDataPrefix("rowindex");n.setSize(h-2,l),n.render.setAttribute(u,i),"all"==this.options.applyFormat||this.options.displayFormat||(e=this.getDisplayData(e)),n._setValue(e,{skipValidate:!0}),this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,o)?n.setDisabled(!0):n.setDisabled(!1),t.removeAttribute("tabIndex")}else{var p=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;(p=a.D.getBoolean(p))&&(e=WebSquare.xml._encode(e+"")),this.options.useMonthYearFormat&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat,this.options.calendarValueType))
;var g=this.getDisplayData(e),m=this.mainGrid._dataList.filteredRowIndexArr[i],f=this.mainGrid.getCellOption(m,o,"viewType"),b=a.D.getDataPrefix("rowIndex"),y=a.D.getDataPrefix("colIndex"),v=a.D.getDataPrefix("col_id");if("icon"==f&&"true"==this.options.viewTypeIconImage){t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td "+v+"='"+this.colID+"' "+b+"='"+i+"' "+y+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_calendar_table' style='width:90%; overflow:hidden; text-overflow:ellipsis;'>",this.mainGrid.dataTagOpen+g+this.mainGrid.dataTagClose,"</td>","<td "+v+"='"+this.colID+"' "+b+"='"+i+"'  "+y+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_calendar_img'>","<div class='"+this.mainGrid.options.bodyTdClass+"_calendar_div_img' />","</td>","</table>"].join("");var w=this,S=t.getElementsByTagName("div")[0];d.B.addListener(S,"onclick",(function(t){w.mainGrid._getEditDisabled(i,o)||w.mainGrid.___getEditReadOnly(i,o)||(w.calendarImageClicked=!0)}))}else{var C=a.D.getDataPrefix("editModeEvent");t.innerHTML=this.mainGrid.dataTagOpen+g+this.mainGrid.dataTagClose,"icon"==f||""==f&&"own"==this.options.dataType?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_calendar"),t.setAttribute(C,this.options.editModeEventIcon)):this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_calendar")}}var _;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var x=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof x&&(this.mainGrid.options.titleFormatter=x,_=x.call(this,i,o,e))}else _=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){r.w.printStackTrace(t,null,this)}var I=_||this.options.title||"";I&&t.setAttribute("title",I)},A.calendar.prototype.setEditMode=function(t,e){try{if(this.options.embeddedInput)return;if("true"==this.options.viewTypeIconImage){var i=t.getElementsByTagName("div")[0];this.mainGrid.removeClass(i,this.mainGrid.options.bodyTdClass+"_calendar_div_img")}else this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_calendar");this.editTd=t,this.editRowIndex=e,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var o=this.mainGrid.getInput(this);this.comp=o;for(var s=t.firstChild;null!=s;s=s.nextSibling)if("NOBR"==s.nodeName.toUpperCase()||"SPAN"==s.nodeName.toUpperCase()&&s.className.indexOf("w2grid_span")>-1){WebSquare.style.setStyle(s,"visibility","hidden");break}if(1==o.options.renderDiv||"true"==o.options.renderDiv){var a=document.getElementById(this.mainGridId+this.id),n=t.offsetWidth-6,l=t.offsetHeight,h=document.getElementById(this.mainGridId+this.id+"_div_input"),d=n-18-5,c=l-3,u=document.getElementById(this.mainGridId+this.id+"_input"),p=d-(parseInt(WebSquare.style.getStyle(u,"border-right-width"),10)+parseInt(WebSquare.style.getStyle(u,"border-left-width"),10)+parseInt(WebSquare.style.getStyle(u,"padding-right"),10)+parseInt(WebSquare.style.getStyle(u,"padding-left"),10)),g=c-2,m=document.getElementById(this.mainGridId+this.id+"_img"),f=c/2-m.offsetHeight/2;if(1==this.options.useAnchor||"true"==this.options.useAnchor){var b=document.getElementById(this.mainGridId+this.id+"_a");WebSquare.style.setStyle(b,"top",f+"px")}else WebSquare.style.setStyle(m,"top",f+"px");WebSquare.style.setStyle(a,"width",Math.max(n,0)+"px"),WebSquare.style.setStyle(h,"width",Math.max(d,0)+"px"),WebSquare.style.setStyle(u,"width",Math.max(p,0)+"px"),WebSquare.style.setStyle(a,"height",Math.max(l-3,0)+"px"),WebSquare.style.setStyle(h,"height",Math.max(c,0)+"px"),WebSquare.style.setStyle(u,"height",Math.max(g,0)+"px")}var y=this.mainGrid.dataList._getCellData(e,this.colID);this.options.useMonthYearFormat&&(y=WebSquare.date.getIOFormatDate(y,this.options.ioFormat,this.options.calendarValueType)),o._setValue(y,{noFormat:!0,skipValidate:!0}),
"icon"==this.options.viewType&&"true"==this.options.viewTypeIconImage&&1==this.calendarImageClicked?(this.calendarImageClicked=!1,o.toggle()):o.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==o.options.editType&&o.select()}catch(t){r.w.printStackTrace(t,null,this)}},A.calendar.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0};if(a.D.isIE(8)?t={top:1,left:0,width:0,height:0}:a.D.isFF()?t={top:0,left:-1,width:0,height:0}:a.D.isChrome()||a.D.isSafari()?t={top:1,left:0,width:0,height:0}:a.D.isOpera()&&(t={top:1,left:0,width:0,height:1}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.offsetTop+t.top,s=i.offsetLeft+1+t.left,n=i.clientWidth-5+t.width,l=i.clientHeight-3+t.height,h=l-1;if(this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))s-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft;var c=this.mainGrid.getInput(this);c.show(),c.render.style.top=o+"px",c.render.style.left=s+"px",c.render.style.width=n+"px",c.render.style.height=l+"px",c.render.firstChild.style.height=l+"px",c.dom.input.style.height=h+"px",c.dom.input.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign,a.D.isIE()&&(c.dom.input.style.lineHeight=l+"px")}catch(t){r.w.printStackTrace(t,null,this)}},A.calendar.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},A.calendar.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);e.hideCalendar();var i=e.getValue();i=e.validator.validateString(i),this.options.useIOFormatLength||(i=e.sub_validator.validateString(i)),this.options.useMonthYearFormat&&(i=WebSquare.date.getIOUnFormatDate(i,e.options.ioFormat,e.options.calendarValueType)),this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var o={};return o[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,o),e}catch(t){r.w.printStackTrace(t,null,this)}},A.calendar.prototype._handleEndEdit_focus=function(t,e){!0!==e&&t.hide()},A.calendar.prototype.validate=function(t){var e=this.mainGrid.getInput(this);if(e.validate())return!0;if(""==e.getValue())return!0;if(this.mainGrid.getInput(this).blur(),this.options.dateValidSet&&this.options.dateValidSetCustom);else if("false"!==this.options.displaymessage){var i=WebSquare.language.getMessage("IC_invalidCalendarSelect")||"날짜 형식이 잘못 되었습니다.";alert(i)}return this.mainGrid.getInput(this).focus(),!1},A.calendar.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},A.calendar.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide()}catch(t){r.w.printStackTrace(t,null,this)}},A.calendar.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.calendar.prototype.refreshDataArr=function(){try{var t;t=this.mainGrid.groupbyStatus.grouped?this.mainGrid.groupbyStatus.groupbyRowIndexArr:this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr:this.mainGrid._dataList.filteredRowIndexArr;for(var e=this.mainGrid._dataList.cellIdList.length,i=this.mainGrid._dataList.bodyIdColIndexMap[this.id],o=this.mainGrid.getInput(this),s=0;s<t.length;s++){var a=t[s],n=this.mainGrid._dataList.dataArr[a*e+i],l=o.sub_validator.validateString(n);this.mainGrid._dataList.dataArr[a*e+i]=l}
}catch(t){r.w.printStackTrace(t,null,this)}},A.expression=function(){},A.expression.prototype.initializeCellInfo=function(){var t=this.options.expression;if(this.mainGrid.useExpression=!0,this.expIdArr=[],""!=t){var e=t.match(/(sum|avg|max|min|display|rowindex|rowstatus|datalist)[\s]*[(][\S\s]*?[)]/gi);if(null!=e){t="";for(var i=0;i<e.length;i++)t+=e[i],i<e.length-1&&(t+="+")}t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/[sS][uU][mM][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"_this.getCalcExpressionTarget(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[dD][aA][tT][aA][lL][iI][sS][tT][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/rowStatus[\s]*[(]/gi,"_this.getExpressionTarget(")}try{new Function("_this",t)(this)}catch(t){}},A.expression.prototype.getExpressionTarget=function(){for(var t=0;t<arguments.length;t++)null==this.expIdArr[arguments[t]]&&(this.expIdArr[arguments[t]]=arguments[t],this.mainGrid.setExpressionAssociation(arguments[t],this.colID));return 1},A.expression.prototype.getCalcExpressionTarget=function(t){var e=t.wq_replaceAll("(",",").wq_replaceAll(")",",").wq_replaceAll("+",",").wq_replaceAll("-",",").wq_replaceAll("*",",").wq_replaceAll("/",",").wq_replaceAll("%",",").wq_replaceAll(" ","");e=e.split(",");for(var i=0;i<e.length;i++)""!==e[i]&&null==this.expIdArr[e[i]]&&(this.expIdArr[e[i]]=e[i],this.mainGrid.setExpressionAssociation(e[i],this.colID));return 1},A.expression.prototype.setInnerHTML=function(t,e,i,o,s){try{var n,l=this.mainGrid.dataList.getRealRowIndex(i),h=this.mainGrid._getGroupbyDisplayRowIndex(i),d=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),c=this.getDisplayData(null,l);"function"==typeof d?(this.useCustomFormatter=!0,n=d.call(this.mainGrid,e,c,h,o)):(this.useCustomFormatter=!1,n=c);var u=t.innerHTML.replace(/\r(\n)?/,"\n"),p=this.mainGrid.dataTagOpen+n+this.mainGrid.dataTagClose;u!==p&&(t.innerHTML=p.replace("NaN",this.options.NaNFormat),this.mainGrid.drawFooter(this.colID))}catch(t){r.w.printStackTrace(t,null,this)}},A.expression.prototype.getDisplayData=function(t,e,i){return t=this.getExpressionValue(e),this.formatter&&!0!==i?this.formatter.format(t):t},A.expression.prototype.getExpressionValue=function(t){if(this.rowIndex=t,!this.options.expressionFunc){var e=this.options.expression;""!=e&&(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[sS][uU][mM][\s]*[(]/g,"this.colsum(rowIndex,")).replace(/[aA][vV][gG][\s]*[(]/g,"this.colavg(rowIndex,")).replace(/[mM][aA][xX][\s]*[(]/g,"this.colmax(rowIndex,")).replace(/[mM][iI][nN][\s]*[(]/g,"this.colmin(rowIndex,")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"this.colcalc(rowIndex,")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"this.display(rowIndex,")).replace(/[dD][aA][tT][aA][lL][iI][sS][tT][\s]*[(]/g,"this.datalist(rowIndex,")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"this.getRowIndex(rowIndex")).replace(/rowStatus[\s]*[(]/gi,"this.rowStatus(rowIndex"),e=a.D.scopingFuncBody(e,this.scope_id)),this.options.expressionFunc=Function("rowIndex",e),this.options.expressionFunc.changeCount=0}var i=this.mainGrid.changeCount,o="";return this.options.expressionFunc[t]&&i==this.options.expressionFunc[t].changeCount?o=this.options.expressionFunc[t].oldValue:(this.options.expressionFunc[t]||(this.options.expressionFunc[t]={}),this.options.expressionFunc[t].changeCount=i,o=this.options.expressionFunc.call(this,t),this.options.expressionFunc[t].oldValue=o),o},A.expression.prototype.colsum=function(){for(var t=arguments[0],e=0,i=1;i<arguments.length;i++){var o=this.mainGrid.getColumnIndex(arguments[i]),s=this.options.dataType
;"gridView"==this.mainGrid.options.pluginName&&(s=this.mainGrid._dataList.getCellInfo(this.options.col_id).options.dataType),"bigDecimal"===s?e=WebSquare.bigDecimal(e).plus(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,o)))||0:e+=parseFloat(this.mainGrid.dataList._getData(t,o))||0}return e},A.expression.prototype.colavg=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);"bigDecimal"===i?e=WebSquare.bigDecimal(e).plus(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)))||0:e+=parseFloat(this.mainGrid.dataList._getData(t,s))||0}return"bigDecimal"===i?e=WebSquare.bigDecimal(e).divide(WebSquare.bigDecimal(arguments.length-1)).toString():e/=arguments.length-1,e},A.expression.prototype.colmax=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);if("bigDecimal"===i)e=WebSquare.bigDecimal(e).compare(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)))||0;else{var r=parseFloat(this.mainGrid.dataList._getData(t,s))||0;r>e&&(e=r)}}return e},A.expression.prototype.colmin=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);if("bigDecimal"===i)e="0"===WebSquare.bigDecimal(e).toString()?WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)):WebSquare.bigDecimal(e),e=WebSquare.bigDecimal(e).compare(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)),!0)||0;else{var r=parseFloat(this.mainGrid.dataList._getData(t,s))||0;(1==o||r<e)&&(e=r)}}return e},A.expression.prototype.colcalc=function(t,e){function i(t,e){t[t.length]=e}function o(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function s(t){return!a(t)&&"("!=t&&")"!=t}function a(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function n(t){return t[t.length-1]}function l(t){return 0==t.length}function h(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function d(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){r.w.printStackTrace(t)}}var c=function(t,e,r){e=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i="",o=new Array,r=0,n=0;n<e.length;n++)s(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(a(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(o[r]=i,r++),i="",o[r]=e[n],r++),n==e.length-1&&""!=i&&(o[r]=i);return o}(t);for(var u=0;u<t.length;u++){if(s(t[u])&&(e[c]=t[u],c++),a(t[u])){if("^"!=t[u])for(;!l(d)&&h(t[u])<=h(n(d));)e[c]=n(d),o(d),c++;else for(;!l(d)&&h(t[u])<h(n(d));)e[c]=n(d),o(d),c++;i(d,t[u])}if("("==t[u]&&i(d,t[u]),")"==t[u]){for(;"("!=n(d);)e[c]=o(d),c++;o(d)}}for(;!l(d);)"("==n(d)?o(d):e[e.length]=o(d);var p="";for(u=0;u<e.length;u++)p+=e[u];return 0==r?p:e}(e);for(var u in c){var p=this.mainGrid.getColumnIndex(c[u]);c[u]=null!=p?WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,p)):c[u]}return function(t){for(var e,r,a=new Array,l=0;l<t.length;l++)if(s(t[l]))i(a,t[l]);else{(e=new Function("return "+n(a))()).constructor!=WebSquare.bigDecimalObj&&(e=WebSquare.bigDecimal(e)),o(a),(r=new Function("return "+n(a))()).constructor!=WebSquare.bigDecimalObj&&(r=WebSquare.bigDecimal(r));var h=d(r,e,t[l]);o(a),i(a,h)}return n(a)}(c)},A.expression.prototype.display=function(){var t=arguments[0],e=this.mainGrid.getColumnIndex(arguments[1]),i=this.mainGrid.dataList._getData(t,e);return i},A.expression.prototype.datalist=function(t,e){return e=this.mainGrid._dataList.getColumnIndex(e),this.mainGrid._dataList._getCellData(t,e,!0)},A.expression.prototype.getRowIndex=function(){var t=arguments[0];return this.mainGrid.getDisplayRowIndex(t)},A.expression.prototype.rowStatus=function(){
var t=arguments[0],e=this.mainGrid.dataList.getRowStatusValue(t);switch(e){case 0:return"R";case 1:return"U";case 2:return"C";case 3:return"D";case 4:return"V"}},A.textarea=function(){},A.textarea.prototype.initializeCellInfo=function(t){if(t){var e=t.getAttribute("showReadOnly");if(e)this.options.showReadOnly=a.D.getBoolean(e);else{var i=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="textarea"]/showReadOnly/@value')||"true";this.options.showReadOnly=a.D.getBoolean(i)}}},A.textarea.prototype.setInnerHTML=function(t,e,i,o,s){var n,l=a.D.getDataPrefix("displayType");if(this.options.embeddedInput){var h=this.mainGrid.getInput(this,t);h.show(),t.innerHTML="",t.appendChild(h.render);var d=a.D.getDataPrefix("rowindex");h.render.setAttribute(d,i),h.render.style.top="0",h.render.style.left="0",h.render.style.width="100%",h.render.style.height="100%",h.render.style.imeMode=this.options.imeMode,this.options.placeholder&&(h.render.placeholder=this.options.placeholder),h.setValue(this.mainGrid.dataList._getCellData(i,this.id)),this.mainGrid._getEditDisabled(i,o)?h.setDisabled(!0):h.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?h.setReadOnly(!0):h.setReadOnly(!1)}else{var c=t.clientWidth-8;c<0&&(c=this.mainGrid.getColumnWidth(o,!0));var u=c>=0?" width:"+c+"px; ":" ",p=this.getDisplayData(e),g=this.mainGrid._getGroupbyDisplayRowIndex(i),m=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),f=p,b=this.options.textAlign?"text-align:"+this.options.textAlign+";":"",y="pre-wrap";a.D.isIEAllVersion("6 7")&&(y="normal");var v="all"===t.getAttribute(l)?"word-break:break-all;white-space:"+y+";":"";"function"==typeof m?(this.useCustomFormatter=!0,f=m.call(this.mainGrid,e,p,g,o)):this.useCustomFormatter=!1,t.innerHTML="<div class='w2grid_textarea' style='"+b+u+v+"' >"+(this.options.escape+""=="true"?this.getDisplayData(WebSquare.xml._encode(f+"")):this.getDisplayData(f))+"</div>"}if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var w=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof w&&(this.mainGrid.options.titleFormatter=w,n=w.call(this,i,o,e))}else n=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",n)}catch(t){r.w.printStackTrace(t,null,this)}if("all"===t.getAttribute(l)&&"all"===this.mainGrid.options.visibleRowNum&&"native"!==this.mainGrid.options.drawType&&this.mainGrid.getRowCount()>0){var S=document.getElementById(this.mainGrid.id+"_body_table").offsetHeight;this.mainGrid.render.offsetHeight!=S&&this.mainGrid.setSize(null,S)}},A.textarea.prototype.setEditMode=function(t,e){this.options.embeddedInput||this._setEditMode(t,e)},A.textarea.prototype._setEditMode=function(t,e){try{this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var i=this.mainGrid.getInput(this);i.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),this.options.disabled||i.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),this.options.disabled||"select"!=this.options.editType&&"select"!=this.mainGrid.options.editType||i.select()}catch(t){r.w.printStackTrace(t,null,this)}},A.textarea.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0};a.D.isIE(8)?t={top:-1,left:-1,width:0,height:0}:a.D.isFF()?t={top:-2,left:0,width:0,height:0}:a.D.isOpera()?t={top:0,left:0,width:0,height:1}:a.D.isChrome()&&(t={top:0,left:0,width:0,height:0});var e=this.editTd;if("native"===this.mainGrid.options.drawType){var i=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=i.scrollTop,t.left-=i.scrollLeft}var o=e.offsetTop+1+t.top,s=e.offsetLeft+1+t.left,n=e.clientWidth>150?e.clientWidth-5+t.width:150,l=e.clientHeight>60?e.clientHeight-2+t.height:60;if(this.mainGrid.options.groupbyZone){
var h=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(h=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=h}if(this.mainGrid.gridWidth<s+n){var d=(e.clientWidth>150?0:5+t.width)-2;s-=s+n-(e.offsetLeft+e.clientWidth)+d}var c=this.mainGrid.scrollX_right;if("native"!==this.mainGrid.options.drawType&&this.mainGrid.render.offsetHeight-c.offsetHeight<o+l){var u=e.clientHeight>60?0:2-t.top;(o-=o+l-(e.offsetTop+e.clientHeight)+u)<0&&(o=1+t.top),l>this.mainGrid.render.offsetHeight&&(l=this.mainGrid.render.offsetHeight-6+t.height)}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))s-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft;var p=this.mainGrid.getInput(this);this.comp=p,p.show(),p.render.style.top=o+"px",p.render.style.left=s+"px",p.render.style.width=n+"px",p.render.style.height=l+"px",p.render.style.imeMode=this.options.imeMode}catch(t){r.w.printStackTrace(t,null,this)}},A.textarea.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},A.textarea.prototype.showReadonly=function(t,e){this.mainGrid._endEdit();var i=this.mainGrid.getInput(this),o=a.D.getDataPrefix("col_id"),s=t.getAttribute(o);(this.options.disabled||this.mainGrid._getEditDisabled(e,s))&&i.setDisabled(!0),(this.options.readOnly||this.mainGrid.___getEditReadOnly(e,s))&&i.setReadOnly(!0),this._setEditMode(t,e),this.mainGrid.editedCell=this},A.textarea.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this),i=e.getValue();"number"==this.mainGrid.getColumnOption(this.options.col_id,"dataType")&&""!=i&&(i=Number(i));var o=this.editTd.offsetHeight;this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var s=this.editTd.offsetHeight;this.changedCellHeight=s-o;var a={};return a[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,a),e}catch(t){r.w.printStackTrace(t,null,this)}},A.textarea.prototype._handleEndEdit_focus=function(t){t.hide(),t.setDisabled(!1),t.setReadOnly(!1)},A.textarea.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},A.textarea.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i=this.mainGrid.getInput(this);i.hide(),i.setDisabled(!1),i.setReadOnly(!1)}catch(t){r.w.printStackTrace(t,null,this)}},A.textarea.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.drilldown=function(){},A.drilldown.prototype.setInnerHTML=function(t,e,i){var o=i,s=100,r=this.options.depthColumn;if("linkedDataList"===this.mode){if(null!=this.mainGrid._linkedDataList.filteredRowIndexArr&&this.mainGrid._linkedDataList.filteredRowIndexArr.length>0){o=this.mainGrid._linkedDataList.filteredRowIndexArr[i];var n=this.mainGrid._linkedDataList.filteredRowIndexArr.length-1;s=o<this.mainGrid._linkedDataList.filteredRowIndexArr[n]?parseInt(this.mainGrid.dataList._getCellData(i+1,r),10):null}}else null!=this.mainGrid._dataList.filteredRowIndexArr&&this.mainGrid._dataList.filteredRowIndexArr.length>0&&(s=(o=this.mainGrid.dataList.getRealRowIndex(i))<this.mainGrid.dataList.getRealRowIndex(this.mainGrid.getDataLength()-1)?parseInt(this.mainGrid.dataList._getCellData(i+1,r),10):null);for(var l=parseInt(this.mainGrid.dataList._getCellData(i,r),10),h="",d=o,c=1;c<l;c++)"div"==this.options.depthType?h+="<div class='w2grid_depthBlank'></div>":"line"==this.options.depthType?(h="<div class='w2grid_depth"+(1===c?this.mainGrid.drilldown.isLastChild(d)?"_line_L":"_line_T":this.mainGrid.drilldown.isLastChild(d)?"Blank":"_line_I")+"'></div>"+h,d=this.mainGrid.drilldown.getParentRowIndex(d)):"none"==this.options.depthType?h+="":h+="&nbsp;&nbsp;"
;var u=0,p="w2grid_plus";null!=s&&l<s?(u=1,p="w2grid_minus"):this.mainGrid.hasChild(i)||(u=2,p="w2grid_leaf"),1==l&&(p+=" w2grid_root");var g="",m=a.D.getDataPrefix("openStatus");g=a.D.isMobile()?"<span class='"+p+"' style='display:inline-block;' "+m+"='"+u+"' ontouchstart='this.clicked=true'></span>":"<span class='"+p+"' style='display:inline-block;' "+m+"='"+u+"' onclick='this.clicked=true'></span>";var f="<div class='w2grid_depthBlank";"1"==l&&(f+=" w2grid_depthBlank_root"),2===u&&(f+=" w2grid_depthBlank_leaf"),f+="'>";var b=this.options.escape+""=="true"?this.getDisplayData(WebSquare.xml._encode(e+"")):this.getDisplayData(e),y="";"span"==this.mainGrid.options.dataTag&&(y=" w2grid_span"),"div"==this.options.depthType?(g=f+g+"</div>",t.innerHTML="<"+this.mainGrid.options.dataTag+" class='w2grid_drilldown_nobr"+y+"'>"+h+g+b+this.mainGrid.dataTagClose):"line"==this.options.depthType?(g=f+g+"</div>",t.innerHTML=h+g+"<"+this.mainGrid.options.dataTag+" class='w2grid_drilldown_nobr"+y+"'>"+b+this.mainGrid.dataTagClose):(this.options.depthType,t.innerHTML=this.mainGrid.dataTagOpen+h+g+b+this.mainGrid.dataTagClose)},A.drilldown.prototype.handleClick=function(t,e){for(var i,o=t.getElementsByTagName("span"),s=0;s<o.length;s++)if(-1==o[s].className.indexOf("w2grid_span")){i=o[s];break}if(1==i.clicked){i.clicked=!1;var r=a.D.getDataPrefix("openStatus");return"2"!=i.getAttribute(r)&&this.mainGrid._toggle(e),!0}return!1},A.drilldown.prototype.setEditMode=function(t,e){try{this.editRowIndex=e,this.editTd=t,this.setPosition();var i=this.mainGrid.getInput(this);i.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,i.options.applyFormat=this.options.applyFormat,i.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),document.activeElement!=i.render&&i.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==i.options.editType&&i.select()}catch(t){r.w.printStackTrace(t,null,this)}},A.drilldown.prototype.setPosition=function(){var t={top:0,left:0,width:0,height:0};if(a.D.isFF()?t={top:-1,left:-1,width:0,height:0}:a.D.isOpera()?t={top:0,left:0,width:0,height:1}:a.D.isIE(9)&&(t={top:-1,left:-1,width:0,height:0}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.offsetTop+1+t.top,s=i.offsetLeft+1+t.left,r=i.clientWidth-6+t.width,n=i.clientHeight-2+t.height,l=this.mainGrid.getInput(this);if(""!=this.options.imeMode)l.render.style.imeMode=this.options.imeMode;else{var h=this.mainGrid.getColumnOption(this.options.col_id,"dataType");l.render.style.imeMode="number"==h?"disabled":""}if(l.show(),this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}l.render.style.top=o+"px",l.render.style.left=s+"px",l.render.style.width=r+"px",l.render.style.height=n+"px",a.D.isIE()&&(l.render.style.lineHeight=n+"px"),l.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign},A.drilldown.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},A.drilldown.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);return this.setEditData(e),e}catch(t){r.w.printStackTrace(t,null,this)}},A.drilldown.prototype._handleEndEdit_focus=function(t,e){!this.mainGrid.isMobile&&e||t.hide()},A.drilldown.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},A.drilldown.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),
this.mainGrid.getInput(this).hide()}catch(t){r.w.printStackTrace(t,null,this)}},A.drilldown.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.drilldown.prototype.setEditData=function(t){try{var e=t.getValue();e=t.validator.validateString(e),t.setValueNM(e,!0),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i=this.mainGrid.getColumnOption(this.options.col_id,"dataType");this.mainGrid.options.numberCasting&&"number"==i&&""!=e&&(e=Number(e));var o={};o[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,o)}catch(t){r.w.printStackTrace(t,null,this)}},A.textImage=function(){},A.textImage.prototype.setInnerHTML=function(t,e,i,o,s){var n=this.mainGrid.getElemRowIndex(t),l=this.mainGrid.dataList.getRealRowIndex(n),h=this.mainGrid._getGroupbyDisplayRowIndex(i),c=this.mainGrid.getColumnIndex(this.colID),u=this.mainGrid.getCellOption(l,c,"viewType"),p=this.options.imageSrc?this.mainGrid.getImageURL(this.options.imageSrc):"",g=this.mainGrid.getColumnID(o),m=!1,f=!1;this.mainGrid._getEditDisabled(i,g)?(m=!0,this.options.imageSrcDisabled&&(p=this.mainGrid.getImageURL(this.options.imageSrcDisabled))):this.mainGrid.___getEditReadOnly(i,g)&&(f=!0,this.options.imageSrcReadOnly&&(p=this.mainGrid.getImageURL(this.options.imageSrcReadOnly)));var b=e,y=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),v=a.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof v&&(b=v.call(this.mainGrid,e,h,o));var w=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;(w=a.D.getBoolean(w))&&(b=WebSquare.xml._encode(b+""));var S,C,_=this.getDisplayData(b);if("function"==typeof y?(this.useCustomFormatter=!0,S=y.call(this.mainGrid,e,_,h,o)):(this.useCustomFormatter=!1,S=_),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var x=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof x&&(this.mainGrid.options.titleFormatter=x,C=x.call(this,i,o,e))}else C=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",C)}catch(t){r.w.printStackTrace(t,null,this)}if("icon"==u||""==u&&"own"==this.options.dataType){var I="";try{this.options.onerror&&(I=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){r.w.printStackTrace(t,null,this)}var T="w2grid_textImage_image";m?T+=" w2grid_textImage_disabled":f&&(T+=" w2grid_textImage_readonly");var k=a.D.getDataPrefix("tdIndex"),D=a.D.getDataPrefix("col_id"),L=a.D.getDataPrefix("rowIndex"),W=a.D.getDataPrefix("colIndex"),A=t.getAttribute(k);t.removeAttribute("alt");var M="";""!=this.options.alt&&(M=" alt='"+this.options.alt+"' "),t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td "+D+"='"+this.colID+"' "+L+"='"+i+"' "+W+"='"+o+"' tdIndex='"+A+"' class='w2grid_textImage' style='overflow:hidden; text-overflow:ellipsis;'>",this.mainGrid.dataTagOpen+S+this.mainGrid.dataTagClose,"</td>","<td "+D+"='"+this.colID+"' "+L+"='"+i+"'  "+W+"='"+o+"' class='"+T+"' style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'>","<img src='"+p+"' "+I+"style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'"+M+" />","</td>","</table>"].join("");var E=this,q=t.getElementsByTagName("img")[0];d.B.addListener(q,"onclick",(function(t){d.B.stopPropagation(t);var s=E.mainGrid._getEditDisabled(i,o);if(E.options.useImageClick||0==s){if(E.mainGrid.editedCell){var r=E.mainGrid._getGroupbyDisplayRowIndex(E.mainGrid.editedCell.editRowIndex),n=E.mainGrid.editedCell.colID,c=E.mainGrid._dataList.getCellData(r,n);E.mainGrid.editedCell.handleEndEdit()
;var u=E.mainGrid._dataList.getCellData(r,n),p=E.mainGrid.getColumnIndex(n);u!=c&&d.B.fireEvent(E.mainGrid,"onviewchange",{oldValue:c,newValue:u,rowIndex:r,colIndex:p,colId:E.mainGrid.getColumnID(p)})}var g=E.getDisplayData(e),m=a.D.getGlobalFunction(E.options.imageClickFunction,E.scope_id);d.B.fireEvent(E.mainGrid,"ontextimageclick",i,o),E.mainGrid._setFocusedCell(i,o),"function"==typeof m&&(E.options.displayRowIndex?m.call(E.mainGrid,h,E.colID,g):m.call(E.mainGrid,l,E.colID,g))}}))}else t.innerHTML=this.mainGrid.dataTagOpen+S+this.mainGrid.dataTagClose},A.textImage.prototype.setEditMode=function(t,e){try{var i="";try{this.options.onerror&&(i=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){r.w.printStackTrace(t,null,this)}var o=this.options.imageSrc?this.mainGrid.getImageURL(this.options.imageSrc):"";t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px;'><td></td><td>","<img src='"+o+"' "+i+"style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","' />","</td></table>"].join("");var s=t.getElementsByTagName("td")[1].firstChild,n=this.mainGrid.getElemRowIndex(t),l=this.mainGrid.getColumnIndex(this.colID),h=this.mainGrid._dataList.filteredRowIndexArr[n],c=this;d.B.addListener(s,"onclick",(function(t){if(d.B.stopPropagation(t),c.mainGrid.editedCell){var i=c.mainGrid._getGroupbyDisplayRowIndex(c.mainGrid.editedCell.editRowIndex),o=c.mainGrid.editedCell.colID,s=c.mainGrid._dataList.getCellData(i,o);c.mainGrid.editedCell.handleEndEdit();var r=c.mainGrid._dataList.getCellData(i,o),n=c.mainGrid.getColumnIndex(o);r!=s&&d.B.fireEvent(c.mainGrid,"onviewchange",{oldValue:s,newValue:r,rowIndex:i,colIndex:n,colId:c.mainGrid.getColumnID(n)})}var u=c.mainGrid.getInput(c).getValue(),p=a.D.getGlobalFunction(c.options.imageClickFunction,c.scope_id);d.B.fireEvent(c.mainGrid,"ontextimageclick",e,l),"function"==typeof p&&(c.options.displayRowIndex?p.call(c.mainGrid,e,c.colID,u):p.call(c.mainGrid,h,c.colID,u))})),this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var u=this.mainGrid.getInput(this);this.comp=u,u.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,u.options.applyFormat=this.options.applyFormat,u.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),u.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==u.options.editType?u.select():"focus"==u.options.editType&&(a.D.isIE()||a.D.isFF())&&WebSquare.text.setCaretPos(u.render,u.render.value.length)}catch(t){r.w.printStackTrace(t,null,this)}},A.textImage.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0,tdWidth:0};if(a.D.isFF()?t={top:-1,left:-1,width:0,height:0,tdWidth:0}:a.D.isOpera()&&(t={top:0,left:0,width:0,height:1,tdWidth:0}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.getElementsByTagName("td"),s=o[1].firstChild,n=i.clientWidth-s.offsetWidth-1+t.tdWidth,l=i.offsetTop+1+t.top,h=i.offsetLeft+1+t.left,d=i.clientWidth-s.offsetWidth-6+t.width,c=i.clientHeight-2+t.height;if(this.mainGrid.options.groupbyZone){var u=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(u=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),l+=u}o[0].style.width=n+"px";var p=this.mainGrid.getInput(this);if(""!=this.options.imeMode)p.render.style.imeMode=this.options.imeMode;else{var g=this.mainGrid.getColumnOption(this.options.col_id,"dataType");p.render.style.imeMode="number"==g?"disabled":""}
if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))l-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft,p.render.style.lineHeight=c+"px";p.show(),p.render.style.top=l+"px",p.render.style.left=h+"px",p.render.style.width=d+"px",p.render.style.height=c+"px",p.render.style.lineHeight=c+"px",p.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign}catch(t){r.w.printStackTrace(t,null,this)}},A.textImage.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},A.textImage.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this),i=e.getValue();i=e.validator.validateString(i),this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var o={};o[this.mainGrid.id]=!0;var s=a.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);if("function"==typeof s){this.useCustomModelFormatter=!0;var n=this.getDisplayData(i);i=s.call(this.mainGrid,i,n,this.editRowIndex,this.getColumnIndex(this.colID))}else this.useCustomModelFormatter=!1;return this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,o),e}catch(t){r.w.printStackTrace(t,null,this)}},A.textImage.prototype._handleEndEdit_focus=function(t){t.setDisabled(!1),t.setReadOnly(!1),t.hide()},A.textImage.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},A.textImage.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.getInput(this),i=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID)),e.hide()}catch(t){r.w.printStackTrace(t,null,this)}},A.textImage.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.textImage.prototype.showReadonly=function(t,e){this.setEditMode(t,e);var i=this.mainGrid.getInput(this);i.setDisabled(!0),i.setReadOnly(!0),this.mainGrid.editedCell=this},A.prototype.setDataListCellRefresh=function(t){try{if(t){this.initFormatter(t);var e=this.options.dataType;e||(e=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),"date"!=e||this.options.displayFormat||(this.options.displayFormat=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+"/dataType/date/@displayFormat")),"time"!=e||this.options.displayFormat||(this.options.displayFormat="HH:mm");var i=!this.options.groupName||!this.options.groupValue,o=this.options.inputType;if(i&&("button"!=o&&"image"!=o)){var a=this.mainGrid._dataList.getCellInfo(this.colID),n=!(!a||!a.element&&a.id!==this.id);this.options.readOnly=!n||t.getAttribute("readOnly")}}}catch(t){r.w.printStackTrace(t,null,this)}},A.spinner=function(){},A.spinner.prototype.initializeCellInfo=function(t){try{if(!this.xml)if("json"===t._elementType)t._element.N="w2:"+this.options.inputType,this.xml=t;else{var e="",i=(e=a.D.isIE("6 7")&&this.internal?WebSquare.xml.nodeWellFormed(t.outerHTML):WebSquare.xml.serialize(t)).indexOf("xmlns:w2")<0?' xmlns:w2="http://www.inswave.com/websquare"':"";e=(e=e.wq_replaceAll("<w2:column","<w2:spinner"+i)).wq_replaceAll("</w2:column","</w2:spinner");var o=WebSquare.xml.parse(e,!0);this.xml=o.documentElement}}catch(t){r.w.printStackTrace(t,null,this)}},A.spinner.prototype.setInnerHTML=function(t,e,i,o,s){null==e&&(e=""),this.spinner&&this.spinner.render&&t.firstChild==this.spinner.render&&t.removeChild(this.spinner.render),t.innerHTML=this.mainGrid.dataTagOpen+this.getDisplayData(e,i)+this.mainGrid.dataTagClose;var r=this.mainGrid.dataList.getRealRowIndex(i),n=this.mainGrid.getCellOption(r,o,"viewType"),l=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),h=a.D.getDataPrefix("editModeEvent");("icon"==n||""==n&&"own"==l)&&(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_spinner"),t.setAttribute(h,this.options.editModeEventIcon))},A.spinner.prototype.setEditMode=function(t,e){try{if(""==this.style){var i=a.D.getDataPrefix("tdindex")
;this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_spinner_"+this.id),this.xml.setAttribute("style",this.style),this.configOptions={},this.options.dataType&&(this.configOptions.dataType=this.options.dataType),this.options.buttonSize&&(this.configOptions.buttonSize=this.options.buttonSize),this.options.dateIncrementType&&(this.configOptions.dateIncrementType=this.options.dateIncrementType),this.options.displayFormat&&(this.configOptions.displayFormat=this.options.displayFormat),this.options.displayFormatter&&(this.configOptions.displayFormatter=this.options.displayFormatter),this.options.increment&&(this.configOptions.increment=this.options.increment),this.options.min&&(this.configOptions.min=this.options.min),this.options.max&&(this.configOptions.max=this.options.max),this.options.editType&&(this.configOptions.editType=this.options.editType);var o=t.getAttribute(i);this.mainGrid._getEditDisabled(e,o)?this.configOptions.disabled=!0:this.configOptions.disabled=!1,this.configOptions.xmlEvents=[{name:"ondblclick",action:"script",param:{handler:function(t){d.B.stopPropagation(t)}}}],this.spinner=new WebSquare.uiplugin.spinner(this.mainGridId+"_spinner_"+this.id,this.configOptions,this.xml),this.spinner.isGridCellComponent=!0;var s=this;this.spinner._handleClickEvent=this.spinner.handleClickEvent,this.spinner.handleClickEvent=function(t){var e=s.mainGrid.getElemRowIndex(this.render.parentElement),o=s.mainGrid._getGroupbyDisplayRowIndex(e),r=this.render.parentElement.getAttribute(i);if(this.options.customFormatter){try{var n=null,l={};if("function"==typeof(n=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id)))for(var h in l=n(o,r))this.options.hasOwnProperty(h)&&(this.options[h]=l[h])}catch(t){n=null}this._handleClickEvent(t)}else this._handleClickEvent(t);d.B.stopEvent(t)},this.spinner._inputKeyDown=this.spinner.inputKeyDown,this.spinner.inputKeyDown=function(t,e){27==t.keyCode||s.spinner._inputKeyDown(t,e)},t.innerHTML=this.spinner.toHTML(),this.spinner.activate(),this.spinner.setSize(t.clientWidth-2,t.clientHeight-2)}else t.innerHTML="",t.appendChild(this.spinner.render),this.spinner.show();this.spinner.options.maxValue&&(this.maxValue=Number(this.spinner.options.maxValue)),this.spinner.options.minValue&&(this.minValue=Number(this.spinner.options.minValue)),this.editColIndex=this.mainGrid.getColumnIndex(this.id),this.editRowIndex=e,this.editTd=t,this.spinner.setValue(this.mainGrid.dataList._getCellData(e,this.id)),"select"!=this.options.editType&&"focus"!=this.options.editType||this.spinner.focus()}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},A.spinner.prototype._handleEndEdit_common=function(t){try{var e=this.spinner.getValue();if("number"==this.spinner.options.dataType){Number(e);this.options.customFormatter?(this.spinner.options.maxValue&&(this.maxValue=Number(this.spinner.options.maxValue)),this.spinner.options.minValue&&(this.minValue=Number(this.spinner.options.minValue)),!isNaN(this.maxValue)&&e>this.maxValue?e=this.maxValue+"":!isNaN(this.minValue)&&this.minValue>e&&(e=this.minValue)):!isNaN(this.maxValue)&&e>this.maxValue?e=this.maxValue+"":!isNaN(this.minValue)&&this.minValue>e&&(e=this.minValue)}else this.spinner.options.dataType;this.mainGrid.dataList.__setCellData(this.editRowIndex,this.id,e),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.id),this.spinner.hide()}catch(t){r.w.printStackTrace(t,null,this)}},A.spinner.prototype._handleCancelEdit=function(t){},A.spinner.prototype._handleEndEdit_focus=function(){try{return null}catch(t){r.w.printStackTrace(t,null,this)}},A.spinner.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},A.custom=function(){},A.custom.prototype.initializeCellInfo=function(t,e){try{!e&&t&&"function"==typeof t.getTagName&&"w2:column"==t.getTagName()&&(1==this.mainGrid.options.setCellInputTypeCustom?(this.parseTypeGetter(),this.cellManagerHashByRowIndex=[],
this.cellManagerIDByRowIndex=[]):(this.parseTypeGetter(),this.cellManagerHashByID={},this.cellManagerHashByRowIndex={},this.cellManagerIDByRowIndex={}))}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.initializeCellManager=function(t,e){try{var i=e.inputType?e.inputType:e.tagName;if(t.id=e.id,t.colID=this.id,t._position={colIndex:this.mainGrid.getColumnIndex(this.colID),colID:this.id,realRowIndex:e.realRowIndex,displayRowIndex:e.displayRowIndex},t.parentColumnInfo=this,t.options.inputType=i,t.initializeInputType=this.getTagName(i),t.initializeInfo=e,"gridViewItemset"===e.itemTableType&&!e.itemSet)for(var o in t.initializeInfo.itemSet={nodeset:e.nodeset,label:e.label,value:e.value},t.options.itemSet=t.initializeInfo.itemSet,t.options.item=e.item,t.options.gridViewOptions={},t.options.itemTableType="gridViewItemset",e)t.options.gridViewOptions[o]=e[o];for(var o in e.options)t.options[o]=e.options[o];t.initFormatter()}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.getMapping=function(t,e){try{switch(t){case"text":return o.x.extend(e,WebSquare.uiplugin.cellInfo.text.prototype),!0;case"link":return o.x.extend(e,WebSquare.uiplugin.cellInfo.link.prototype),!0;case"checkbox":return o.x.extend(e,WebSquare.uiplugin.cellInfo.checkbox.prototype),!0;case"button":return o.x.extend(e,WebSquare.uiplugin.cellInfo.button.prototype),!0;case"image":return o.x.extend(e,WebSquare.uiplugin.cellInfo.image.prototype),!0;case"radio":return o.x.extend(e,WebSquare.uiplugin.cellInfo.radio.prototype),!0;case"select":return o.x.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(e,WebSquare.uiplugin.cellInfo.select.prototype),!0;case"calendar":return o.x.extend(e,WebSquare.uiplugin.cellInfo.calendar.prototype),!0;case"textarea":return o.x.extend(e,WebSquare.uiplugin.cellInfo.textarea.prototype),!0;case"expression":return o.x.extend(e,WebSquare.uiplugin.cellInfo.expression.prototype),!0;case"textImage":return o.x.extend(e,WebSquare.uiplugin.cellInfo.textImage.prototype),!0;case"checkcombobox":return o.x.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(e,WebSquare.uiplugin.cellInfo.checkcombobox.prototype),!0;case"autoComplete":return o.x.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(e,WebSquare.uiplugin.cellInfo.autoComplete.prototype),!0;default:return o.x.extend(e,WebSquare.uiplugin.cellInfo.text.prototype),!0}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.getTagName=function(t){try{switch(t){case"text":return"input";case"link":return"anchor";case"button":return"trigger";case"select":return"selectbox";default:return t}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.parseTypeGetter=function(){try{this.options.typeGetter?(this.typeGetter=a.D.getGlobalFunction(this.options.typeGetter,this.scope_id),this.isValidTypeGetter=!0):(this.isValidTypeGetter=!1,0==this.options.setCellInputTypeCustom&&$l("Custom type 그리드 생성 중 오류가 발생하였습니다. typeGetter 속성이 정의되어 있지 않습니다.  gridView ["+this.mainGrid.id+"] column:["+this.id+"]"))}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.updateCellManagerHash=function(t,e,i,o){try{this.isValidTypeGetter?(this.cellManagerHashByID[t]=i,this.cellManagerHashByRowIndex[e]=i,this.cellManagerIDByRowIndex[e]=t):(this.cellManagerHashByRowIndex[e]=i,this.cellManagerIDByRowIndex[e]=t),o&&i.itemsetObj&&o.nodeset!==i.itemsetObj.nodeset&&i.setColumnNodeSet(o.nodeset,o.label,o.value)}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.createCellManager=function(t,e){try{var i=e.id,o=e.realRowIndex,s=new WebSquare.uiplugin.cellInfo(t,this.mainGrid,!0);if(this.mainGrid.options.senseReader&&"false"!==s.options.embeddedInput&&("secret"!=e.inputType&&"text"!=e.inputType&&"select"!=e.inputType&&"checkbox"!=e.inputType&&"radio"!=e.inputType&&"calendar"!=e.inputType||(s.options.embeddedInput=!0)),this.getMapping(e.inputType,s)){if(this.initializeCellManager(s,e),s.initializeCellInfo(t,e.options),
s.isLocked=!0,this.updateCellManagerHash(i,o,s),!0===s.options.embeddedInput){var a=e.itemSet;a&&"function"==typeof s.setColumnNodeSet&&s.setColumnNodeSet(a.nodeset,a.label,a.value,o)}return this.cellManagerHashByRowIndex[o]}var n=this.options.id,l=this.mainGrid.getColumnIndex(n);return $l("Custom type 그리드 생성 중 오류가 발생하였습니다. gridView ["+this.mainGrid.id+"] column:["+this.id+"] inputType:["+e.inputType+"] realRowIndex:["+o+"] colIndex["+l+"]"),!1}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.getCellManager=function(t){try{var e=t.managerID,i=t.element,o=t.rowIndex,s=t.realRowIndex,a=this.options.id,n=this.mainGrid.getColumnIndex(a),l=this.mainGrid.dataList.getCellData(o,n),h={colID:a,colIndex:n,rowIndex:o,displayRowIndex:t.rowIndex,realRowIndex:t.realRowIndex,value:l};try{var d,c;if(1!=this.mainGrid.options.setCellInputTypeCustom||this.isValidTypeGetter){if(this.cellManagerHashByID[e])return this.cellManagerHashByID[e];if(this.isValidTypeGetter){var u=!1;c=this.typeGetter(h);g=this.cellManagerIDByRowIndex[s];var p=this.cellManagerHashByRowIndex[s];if(p&&p.options.embeddedInput&&t.td&&(t.td.firstChild?t.td.firstChild&&t.td.firstChild.id!==this.mainGrid.id+"_"+g&&(u=!0):u=!0),!c||g!==c.id||u){m=this.mainGrid.id+"_"+g;f=this.mainGrid.dom[m],b=null;null!=f&&(b=WebSquare.idCache[f.uuid]),b&&"function"==typeof b.remove&&b.remove(),delete this.mainGrid.dom[m],this.cellManagerHashByID[g]=null,this.cellManagerHashByRowIndex[s]=null}}else this.parseTypeGetter(),this.isValidTypeGetter&&(c=this.typeGetter(h))}else if(1==t.dynamicInputType){if((c=t.options).id="dynamic_"+c.inputType+"_"+o+"_"+n,this.cellManagerHashByRowIndex[s]){var g=this.cellManagerIDByRowIndex[s],m=this.mainGridId+g,f=this.mainGrid.dom[m],b=null;null!=f&&(b=WebSquare.idCache[f.uuid]),b&&"function"==typeof b.remove&&b.remove(),delete this.mainGrid.dom[m],this.cellManagerIDByRowIndex[s]=null,this.cellManagerHashByRowIndex[s]=null}}else if(this.cellManagerHashByRowIndex[s]&&!t.dynamicInputType)return this.cellManagerHashByRowIndex[s];return c?(c.isUDC||((d=1==this.mainGrid.options.setCellInputTypeCustom?this.cellManagerHashByRowIndex[s]:this.cellManagerHashByID[c.id])?(this.updateCellManagerHash(c.id,s,d,c.itemSet),d.isLocked):(c.realRowIndex=s,c.rowIndex=o,c.displayRowIndex=o,d=this.createCellManager(i,c))),1!=this.mainGrid.options.setCellInputTypeCustom&&(d.customValue=c.value)):d=this.createCellManager(i,{id:this.colID+"_"+s+"__default",inputType:"text",realRowIndex:s}),d}catch(t){return $l("Custom type 그리드 생성 중 오류가 발생하였습니다. gridView ["+this.mainGrid.id+"] column:["+this.id+"] realRowIndex:["+s+"] colIndex["+n+"]"),!1}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.setInnerHTML=function(t,e,i,o,s){try{var a=this.mainGrid.getRealRowIndex(i),n=this.getCellManager({element:this.element,rowIndex:i,realRowIndex:a,td:t});if(!1===n)t.innerHTML=this.mainGrid.dataTagOpen+e+this.mainGrid.dataTagClose;else{this.clearStyle(n,t);!0===this.isValidTypeGetter&&n.options.class&&this.mainGrid.addClass(t,n.options.class),n.setInnerHTML(t,e,i,o),null!=n.customValue&&(e=n.customValue,this.mainGrid.dataList.__setCellData(i,this.colID,e)),this.useCustomFormatter=n.useCustomFormatter,this.useCustomModelFormatter=n.useCustomModelFormatter,this.useEscapeFormatter=n.useEscapeFormatter}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.setEditMode=function(t,e){try{if(!this.internal){var i=this.mainGrid.getRealRowIndex(e),o=this.cellManagerHashByRowIndex[i];o&&o.setEditMode(t,e)}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.setPosition=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];e&&e.setPosition()}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype._handleEndEdit_common=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex)||this.editRowIndex,i=this.cellManagerHashByRowIndex[e]
;if(i)return i._handleEndEdit_common(t)}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype._handleEndEdit_focus=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex)||this.editRowIndex,i=this.cellManagerHashByRowIndex[e];i&&i._handleEndEdit_focus(t)}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype._handleCancelEdit=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex),i=this.cellManagerHashByRowIndex[e];i&&i._handleCancelEdit()}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.doDefaultAction=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex),i=this.cellManagerHashByRowIndex[e];i&&i.doDefaultAction()}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.clearStyle=function(t,e){try{var i=a.D.getDataPrefix("editModeEvent");"calendar"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_calendar")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_calendar"),e.setAttribute(i,"")),"select"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_select")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_select"),e.setAttribute(i,"")),"autoComplete"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_autoComplete")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_autoComplete"),e.setAttribute(i,"")),"checkcombobox"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_checkcombobox")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_checkcombobox"),e.setAttribute(i,""))}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.validate=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];if(!e)return!0;switch(e.options.inputType){case"calendar":return e.validate();default:return!0}}}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype._getEditedValue=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];if(e&&e._getEditedValue)return e._getEditedValue()}return""}catch(t){r.w.printStackTrace(t,null,this)}},A.custom.prototype.refreshCellManagerHash=function(){try{for(var t=this.mainGrid.getRowCount(),e=0;e<t;e++)this.getCellManager({element:this.element,rowIndex:e,realRowIndex:this.mainGrid.getRealRowIndex(e)})}catch(t){r.w.printStackTrace(t,null,this)}},A.user=function(){},A.user.prototype.setInnerHTML=function(t,e,i,o,s){var r,n=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),l=this.mainGrid._getGroupbyDisplayRowIndex(i),h=this.getDisplayData(e);"function"==typeof n?(this.useCustomFormatter=!0,r=n.call(this.mainGrid,e,h,l,o)):(this.useCustomFormatter=!1,r=h),t.innerHTML=this.mainGrid.dataTagOpen+r+this.mainGrid.dataTagClose},A.user.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=d.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=a.D.getDataPrefix("col_id"),r=this.mainGrid.getColumnIndex(e.getAttribute(s))}else{var n=this.mainGrid.getLastFocusedCell();i=n.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),r=n.focusedColIndex}this.mainGrid._getEditDisabled(i,r)||this.mainGrid.___getEditReadOnly(i,r)||d.B.fireEvent(this.mainGrid,"oncellclick",o,r,this.options.id)};var M=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(M.prototype,n.s.prototype),M.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.gridView",pluginName:"gridView",serializable:!0,
userEvents:["oncellclick","oncelldblclick","onrightbuttonclick","ontextimageclick","ondateselect","oneditdblclick","oncellindexchange","onrowindexchange","oncolumnindexchange","onfilereadend","onscrollend","onscrollstart","onbeforeedit","oneditend","oneditkeydown","onafteredit","onscrolly","onscrollx","onsort","onbeforesort","onheaderclick","onheaderrightbuttonclick","onheaderdblclick","onfooterclick","onsubtotalclick","onsubtotaldblclick","onbodymouseover","onbodymouseout","ongroupby","ontoggleclick","onclick","onblankclick","onkeydown","onkeyup","onviewchange","onbeforepaste","onafterpaste","oncolumnwidthchange","onbeforecolumnmove","onaftercolumnmove","onaftercolumnresize","ondatadragstart","ondatadragover","ondatadrop","oncontextopen","oncontextclick","oneditkeyup"],rowNumVisible:!1,rowNumRowSpan:!0,rowNumHeaderValue:"",rowNumLocaleRef:"",rowNumBackgroundColor:"",rowNumStatusResize:!1,cellStatusVisible:!1,cellStatusIconPosition:"right",rowStatusVisible:!1,rowStatusRowSpan:!0,rowStatusColSpan:!1,rowStatusHeaderValue:"",rowStatusLocaleRef:"",overflowX:"auto",overflowY:"auto",fixedColumn:0,fixedColumnWithHidden:!0,fixedColumnNoBGColor:!1,fixedColumnScrollHidden:!1,fixedColumnNoMove:!1,fixedColumnScrollReset:!0,rowNumStatusFixed:!0,fixedRightColumn:0,fixedRow:0,lastFixedRow:0,lastFixedRowStartIndex:0,resize:!0,rowResize:!1,baseNode:"vector",repeatNode:"data/INFO",valueNode:"",focusMode:"cell",selectedCellColor:"#FCA73C",selectedRowColor:"#FCA73C",oddEvenColorDisplay:!1,oddRowBackgroundColor:"#EFF7FF",evenRowBackgroundColor:"#FFFFFF",rowMouseOver:!1,rowMouseOverColor:"#ffff80",selectedCellOverColor:"",selectedRowOverColor:"",editModeEvent:"ondblclick",editModeEventIcon:"onclick",keyMoveEditMode:!1,enterKeyMove:"down",skipMultiRowMove:!1,sortable:!1,sortHeaderDiv:!1,sortOrderReverse:!1,noSortInit:!1,showSortableImage:!1,preventMultisort:!1,useCtrlOnMultisort:!0,useCtrlKey:!0,sortedImagePosition:"",sortedIconPosition:"",sortEvent:"ondblclick",headerTooltipDisplay:!1,rowStatusTooltipDisplay:!1,tabKeyMove:"right",tooltipDisplay:!1,tooltipDisplayTime:0,tooltipClass:"",tooltipStyle:"",tooltipHide:"click",tooltipShowAlways:!1,tooltipShowAlwaysColumns:"",tooltipHeaderShowAlways:!1,tooltipFormatter:"",tooltipFormatterHeader:"",tooltipPositionX:"20",tooltipPositionY:"3+cellHeight",tooltipDisplayColumn:"",tooltipHeader:!1,showImageTooltip:!1,captionTitle:"",captionAuto:!1,noResultMessageVisibleAlways:!1,noResultMessageVisible:!1,noResultMessageExclude:"",noResultMessage:"",noResultMessageClass:"",noResultMessageStyle:"",noResultMessageStylePriority:!1,hiddenClass:"",readOnly:"",readOnlyPriority:"",readOnlyBackgroundColor:"",readOnlyBackgroundImg:"",readOnlyBackgroundImgCSS:"",readOnlyTabIgnore:!1,ignoreNonEditableCell:!1,ignoreNonEditableCellTabEnter:!1,disabledPriority:"",disabledBackgroundColor:"",disabledFontColor:"",summary:"",footerCaption:"",footerCaptionAuto:!1,footerSummary:"",footerSummaryAuto:!1,drawLimitTime:70,drawLimitRow:4,loadCount:0,autoFit:"",autoFitMinWidth:"",autoFitFixYScroll:!1,fastScroll:"",lazyDrawHiddenColumn:!1,defaultCellHeight:-1,defaultHeaderCellHeight:-1,hideHeader:!1,dataDragDrop:!1,dataDragDropOther:!1,dataDragDropSelf:!1,dataDragDropStatus:!1,dataDragSelect:!1,dataDragSelectAutoScroll:!1,dataDragSelectAutoScrollDPI:5,dataDragSelectAutoScrollPeriod:70,dataDragSelectAutoScrollDelay:50,dataDragSelectAutoScrollLevel:1300,dragDisplayColumn:"",dragStartFunction:"",dragEndFunction:"",headFiller:!1,focusMove:"true",focusFlow:"default",scrollMsg:"",visibleRowNum:"",visibleRowNumFix:!1,fixHeight:!1,fastEditMode:!1,iScrollMoveEffectTime:500,iScrollSlideTime:800,iScrollSlidePeriod:100,rollbackCommit:!0,numberCasting:!1,backgroundColorMode:"lazy",senseReader:!1,senseReaderLinkFocus:!1,useStartEndDiv:!0,showLastRow:!1,autoScope:!1,autoResizeEmbeddedInput:!1,servletPopup:!1,excelUploadPopupURL:"",advancedExcelUploadPopupURL:"",advancedExcelMultiUploadPopupURL:"",advancedExcelDownloadPopupURL:"",excelUploadURL:"",
excelDownloadURL:"",csvDownloadURL:"",csvUploadPopupURL:"",csvUploadURL:"",advancedExcelUploadURL:"",advancedExcelDownloadURL:"",drilldownRealRowIndex:!0,drilldownRealRowIndexAll:!1,drilldownToggleScrollFix:!1,escape:!0,fixPrint:!1,xmlEncode:!1,wheelRows:3,wheelStop:!1,scrollByColumn:!1,scrollByColumnAdaptive:!1,rowNumWidth:"",rowStatusWidth:"",keepDefaultColumnWidth:!1,columnMove:!1,columnMoveWithFooter:!1,columnOrder:"",copyAmount:"",copyOption:"",copyType:"default",pasteOption:"",rowCopy:!1,customPasteFormatter:"",checkReadOnlyOnPaste:!1,checkDisabledOnPaste:!1,checkReadOnlyOnCut:!0,checkDisabledOnCut:!0,checkBlankRowOnPaste:!1,checkEditableInputClass:!1,checkEditOnPaste:!1,checkOnCellClick:!1,setDefaultValueOnPaste:!1,preventAddRowOnPaste:!1,preventCopy:!1,preventPaste:!1,groupbyZone:!1,groupbyZoneSearch:!1,groupbyListVisibleRowNum:10,groupbyZoneMessage:"",groupbyZoneHeight:"50",groupbyMaxCount:-1,groupbyDisplayRowIndex:!1,groupbyFilterIcon:!1,plainText:!1,excludeDeletedRows:!1,excludeModifiedRows:!1,initFixedHeightByRowNum:-1,moveKeyEditMode:!1,moveKeyEditModeAll:!1,keepBeforeDisplayData:!1,touchScrollDelta:5,dataList:"",useFilterSearch:!1,useSearchFilter:!1,useFilterList:!1,useFilterListSync:!1,useFilterListFormat:!1,useResizeFilterList:!1,filterListRowHeight:20,filterListVisibleRowNum:0,filterListWidth:0,caseSensitive:!1,displayValueOnUseFilterList:!1,customFilterListVisibleRowNum:10,showAllFilterList:!1,useFilterEmptyMsg:"",filterDisplayMode:"label",filterSearchTarget:"label",filterShowAlways:!1,duplicateColumnId:!1,filterFocusMode:"",focusOnSetData:!1,focusDefaultColumn:!1,focusAutoRemove:!1,scrollFix:!1,scrollRowHeight:!1,applyAllColumnStyle:!1,disabledScrollHidden:!1,hammerEnabled:!1,hammerPressTime:351,dynamic:!1,ignoreCellClick:!1,ignoreToggleOnDisabled:!1,adaptive:"",autoFitFilterList:!1,summaryAuto:!1,summaryOnlyAuto:!1,arrowMove:!1,filterBoxvisibleRowNum:4,groupbyFilterBox:!1,groupbyFilterBoxLocation:"bottom",groupbyFilterBoxLabelSize:3,customFilterBox:!1,customFilterFrameModal:!1,fixAdaptive:!1,groupbyFilterBoxFormatter:"",showSortableUseFilter:!1,customFormatterRealRowIndex:!1,oddEvenColorMerged:!1,showCustomFilterReset:!1,setCellInputTypeCustom:!1,useHeaderCheckboxLabelFor:!0,returnTrueFalseValue:!1,initStyle:!1,mergeCol:"",mergeRow:"",mergeCells:"never",noImageTooltip:!1,mergeCellsFixedCols:"never",mergeCellsFixedRows:"never",mergeExcludeValue:"",rowNumStatusUniqueId:!1,checkHeaderOnly:!1,checkAllType:"include",useDefaultStyle:!1,foldAll:!1,contextMenu:!1,useHeaderContextMenu:!1,contextMenuRowHeight:20,contextMenuAltClick:!1,titleAuto:!1,syncScroll:!1,disabledClass:"w2grid_default_disabled",readOnlyClass:"w2grid_default_readonly",selectByLabel:!1,syncWithScrollTrack:!1,aliasDataCollection:"",editInputClass:"",directEdit:!1,numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",useMaxLength:!1,noSelect:!1,scrollFocus:!1,postMsg:!1,useXHR:!1,preventDuplicateFocusedCell:!1,alwaysTriggerScrollStart:!1,CellClickFixScrollX:!1,drawType:"virtual",mergeRefreshAlways:!0,subtotalStyleFormatter:"",useImageClick:!1,hideSortIconOnNoData:!1,hideFilterIconOnNoData:!1,showCheckboxLabelUserFormat:!1,showRadioLabelUserFormat:!1,useMoreButton:!1,moreButtonTitle:"",useTextMultiLink:!1,dataTag:"nobr",ctrlShiftKey:!1,scrollXNative:!1,scrollXNativeMobile:""},M.prototype.initialize=function(t){if(this.initializeType="gridView",isNaN(parseInt(this.options.visibleRowNum,10))||(this.options.initFixedHeightByRowNum=-1),this.options.initFixedHeightByRowNum>0&&""===this.options.visibleRowNum&&(this.options.visibleRowNum=this.options.initFixedHeightByRowNum),this.firstEmbeddedInputResize=!0,"none"===this.options.autoFit&&(this.options.autoFit=""),"native"===this.options.drawType&&(this.options.visibleRowNum="all"),"native"===this.options.copyType&&(this.options.noSelect=!1),t){for(var e=!1,i=!1,s=t.getChildNodes(),r=0;r<s.length;r++)"w2:header"!=s[r].getTagName()?"w2:gBody"!=s[r].getTagName()||(e=!0):i=!0
;if(!e||!i)return this.uncompleted=!0,void(this.options.dynamic||$l(" gridView error : cannot find <w2:header> or <w2:gBody>.["+this.id+"]"))}if(this.options.dataList=this.options.dataList.wq_replaceAll("data:",""),this._dataList=null,this.options.dataList&&(this._dataList=this.modelControl.getDataComp(this.options.dataList,{type:"aliasDataCollection"})),this._dataList)switch(this._grid=this,this._dataList.addChild(this),this._dataList=WebSquare.DataCollection.api.getObj(this._dataList),this.successBinding=!0,this._dataList.initializeType){case"linkedDataList":this._linkedDataList=this._dataList,this._dataList=this._linkedDataList._dataList,this._dataList?(this.dataList=new WebSquare.uiplugin.mappingController(this),o.x.extend(this,WebSquare.uiplugin.linkedMappingController.prototype),o.x.extend(this.dataList,WebSquare.uiplugin.linkedMappingController.prototype),this.dataList._linkedDataList=this._linkedDataList):(this.successBinding=!1,this._dataList={});break;case"dataList":this.dataList=new WebSquare.uiplugin.mappingController(this),this.dataList.mappingCommonAPI()}else $l(" gridView error : invalid dataList("+this.options.dataList+").["+this.id+"]"),this.successBinding=!1,this._dataList={};this.skipPreActivate=!0;var n=this.options.dataList;null!=this.scope_obj&&(n=this.scope_obj.id+"_"+this.options.dataList),WebSquare.DataCollection.api.addRelation(this.id,n,!1),this.skipPreActivate=!1,this.myhelper=new WebSquare.korHelper,(a.D.isIEAllVersion()||a.D.isSpartan())&&(this.options.useResizeFilterList=!1),(this.options.useSearchFilter||this.options.useResizeFilterList)&&(this.options.useFilterSearch=!1),this._initialize()},M.prototype._initialize=function(t){this.focusedCellInfo={},this.extraData={grid:{},row:[],col:[],cell:[]},this.drilldown=new WebSquare.uiplugin.drilldown,"false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove||(this.options.enterKeyMove="none"),this.options.groupbyFilterBox&&(this.groupbyFilterBox_select=null,this.groupbyFilterBox_history=[]),this.date=new Date,this.isDrillDown=!1,this.depthColumn="",this.showDepth="",this.removed=!1,this.useExpression=!1,this.colWidthList=[],this.gridWidth=0,this.resizeStarted=!1,this.headerHeight=0,this.footerHeight=0,this.hgap=[],this.autofitColumn=!1,this.autofitColumnIndexArr=[],this.autofitColumnWidthArr=[],this.autofitDone=!1,this.resizeStatus="init",this.scrollWidthSize=18,this.scrollLayerWidthSize=18,this.hiddenList=[],this.headerFocus=!1,this.headerObjArr=[],this.tmpSelectbox=null,this.noevent=!1,this.rowIndex=-1,this.lastIndex=-1,this.oelIndex=-1,this.initializeDrawController(),this.drawedRowLength=0,this.maxRowLength=0,this.drawSizeChanged=!1,this.drawSizeAdded=!1,this.isExistTextarea=!1,this.bodyHeight=0,this.scrollEvent=!0,this.isColMerge=!1,this.isColMergeAnd=!1,this.upperToLowerColumnRelation={},this.hasSubtotal=!1,this.startRowNumber=0,this.dataRowList=[],this.subtotalRowHash={},this.subtotalDataArr={},this.subtotalObj={},this.drawSetTimeoutKey=[],this.overElem=null,this.outElem=null,this.hasFooter=!1,this.footerDataObj=null,this.drawFooterStatus=!0,this.bScrollTop=-1,this.bScrollY=0,this.drawedTime=0,this.defaultColCnt=0,this.options.rowNumVisible&&this.defaultColCnt++,this.options.rowStatusVisible&&this.defaultColCnt++,this.loadCheck=[],this.beforeDataLength=-1,this.beforeMaxRowLength=-1,this.checkScrollStart=!0,this.editEnd=!1,this.lastOverSrc=null,this.headerInfoHash={},this.headerInfoHash2={},this.cellInfoHash={},this.cellInfoHash2={},this.expressionAssArr=[],this.labelColumnAssArr=[],this.rowStyleValueObj={},this.columnStyleValueObj={},this.cellStyleValueObj={},this.defaultStyleValueObj={},this.initStyleValueObj={},this.adaptiveColumnStyleValueObj={},this.rowStyleFixedValueObj={},this.rowStyleDataValueObj={},this.columnStyleFixedValueObj={},this.columnStyleDataValueObj={},this.disabledCellStyleObj={},this.headerCellStyleValueObj={},this.headerCellClassObj={},this.rowStyleIndex=0,this.cellStyleIndex=0,this.rowStyleFixedIndex=0,
this.rowStyleDataIndex=0,this.rowStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.tdCellClassArr=[],this.columnClassObj={},this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.rowReadOnlyArr=[],this.cellReadOnlyArr=[],this.rowDisabledArr=[],this.cellDisabledArr=[],this.focusedCell=[],this.focusedRow=[],this.headerToBodyRelation={},this.bodyToHeaderRelation={},this.passiveColSpanRelation={},this.colMoveBolockedHeaderObj={},this.backupHeaderHTML={},this.expressionHeaderInfo={},this.columnOrder=[],this.isIE6=a.D.isIE("6"),"BackCompat"==document.compatMode&&(this.isIE6=!0),this.isIE7=a.D.isIE("7"),this.isIE6or7=this.isIE6||this.isIE7,this.isMobile=a.D.isMobile(),this.isWebKit=/webkit/.test(navigator.userAgent.toLowerCase()),this.tmpCnt=0,this.initFlag=!1,this.options.rowNumBackgroundColor=this.options.rowNumBackgroundColor.wq_trim(),this.options.selectedCellColor=this.options.selectedCellColor.wq_trim(),this.options.selectedRowColor=this.options.selectedRowColor.wq_trim(),this.options.oddRowBackgroundColor=this.options.oddRowBackgroundColor.wq_trim(),this.options.evenRowBackgroundColor=this.options.evenRowBackgroundColor.wq_trim(),this.options.rowMouseOverColor=this.options.rowMouseOverColor.wq_trim(),this.options.readOnlyBackgroundColor=this.options.readOnlyBackgroundColor.wq_trim(),this.options.disabledBackgroundColor=this.options.disabledBackgroundColor.wq_trim(),this.options.disabledFontColor=this.options.disabledFontColor.wq_trim(),a.D.getBoolean(this.options.focusOnSetData)&&(this.options.focusOnSetData=!0),this.options.senseReader&&(this.options.focusFlow="linear","all"===this.options.visibleRowNum&&(this.options.showLastRow=!0),this.element&&"false"!=this.element.getAttribute("autoScope")&&(this.options.autoScope=!0),this.senseReaderMode=!0),this.embeddedWidthObj={},this.options.sortable&&this.options.sortHeaderDiv&&(this.options.showSortableImage=!0,this.options.sortEvent="onclick"),this.radioGroupRepChk={},this.options.excelUploadPopupURL=this.options.excelUploadPopupURL||this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/fileUpload.jsp"),{baseServletURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/fileUpload.html"),{baseURI:!0}),this.options.advancedExcelUploadPopupURL=this.options.advancedExcelUploadPopupURL||this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/advancedfileUpload.jsp"),{baseServletURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedfileUpload.html"),{baseURI:!0}),this.options.advancedExcelMultiUploadPopupURL=this.options.advancedExcelMultiUploadPopupURL||this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedMultiUpload.html"),{baseURI:!0}),this.options.advancedExcelDownloadPopupURL=this.options.advancedExcelDownloadPopupURL||this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/download/advancedfileDownload.html"),{baseURI:!0}),this.options.excelUploadURL=this.options.excelUploadURL||WebSquare.baseServletURI+"excelToGrid.wq",this.options.excelDownloadURL=this.options.excelDownloadURL||WebSquare.baseServletURI+"xmlToExcel.wq",this.options.csvDownloadURL=this.options.csvDownloadURL||WebSquare.baseServletURI+"xmlToCSV.wq",this.options.csvUploadURL=this.options.csvUploadURL||WebSquare.baseServletURI+"csvToXML.wq",this.options.csvUploadPopupURL=this.options.csvUploadPopupURL||this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/csvfileUpload.jsp"),{baseServletURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/csvfileUpload.html"),{baseURI:!0}),this.options.advancedExcelUploadURL=this.options.advancedExcelUploadURL||WebSquare.baseServletURI+"excelToGrid2.wq",this.options.advancedExcelDownloadURL=this.options.advancedExcelDownloadURL||WebSquare.baseServletURI+"xmlToExcel2.wq",this.groupbyStatus={},this.groupbyZoneStatus={},
this.groupbyDisplayOptions={},this.directItemChoiceKeyObj={},this.rowStatusColIDArr=[],this.cellIdList=[],this.firstOpenCustomFilter={},this.customFilterStatusObj={},this.beforeEditedCellInfo=null,this.hiddenAdaptiveList=[],this.adaptiveEmbeddedInputIdList=[],this.hideThresholdObj={},this.orgBodyHeightObj={},this.orgHeaderHeightObj={},this.orgFooterHeightObj={},this.orgSubtotalHeightObj={},this.oldOptions={},this.adaptiveGridType=0,this.tooltipPositionParse=!1,this.oneRowScrollHeight=20,this._manager=null,this.beforeEditedCellInfo=null,this.options.noResultMessage=this.options.noResultMessage||WebSquare.language.getMessage("Grid_noResultMessage")||"조회 결과가 없습니다.",this.options.scrollMsg=this.options.scrollMsg||WebSquare.language.getMessage("Grid_scrollMsg")||"화면 갱신 중 입니다...",this.cellMergeInfo={},this.cellMergeRealInfo={},this.tdMergeInfo={},this.mergeColObj={},this.mergeRowObj={},this.hiddenRowObj={length:0,extraRow:0,row:{},init:!1},this.hiddenCellObj={length:0,init:!1},!0===this.options.moveKeyEditModeAll&&(this.options.moveKeyEditMode=!0),this.filterEmptyStr=this.options.useFilterEmptyMsg||WebSquare.language.getMessage("GRID_useFilterEmptyMsg"),this.useFilterEmptyValueInfo={"":!0};var e=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];e.push("");for(var i=0;i<e.length;i++)e[i]=e[i].trim(),this.useFilterEmptyValueInfo[e[i]]=!0;this._regDetectDOM=new RegExp("<[^<]+>","i"),this._regRemoveDOM=new RegExp("<[/]{0,1}[^></]+[/]{0,1}>","g"),this._bindDrag=!1,this._subtotalDisplayFormat="",this._dynamicVisibleRowNum=-1,"span"==this.options.dataTag?(this.dataTagOpen="<span class='w2grid_span'>",this.dataTagClose="</span>"):(this.dataTagOpen="<"+this.options.dataTag+">",this.dataTagClose="</"+this.options.dataTag+">"),WebSquare.util.isMobile()&&this.options.scrollXNativeMobile&&(this.options.scrollXNative=a.D.getBoolean(this.options.scrollXNativeMobile)),this._setOverflowYScrollFlag=!1,this._setOverflowYHiddenFlag=!1},M.prototype.setPreAction=function(){try{var t=this.render.offsetWidth,e=this.render.offsetHeight;this.resizeObj={width:t,height:e,scrollLeft:0,scrollTop:0,clientWidth:this.render.clientWidth};var i=this.getElementById(this.id+"_head_table").getElementsByTagName("tr"),o=i[i.length-1],s=this.getElementById(this.id+"_body_table");this.gridLastTrBottomFix=s.offsetHeight-o.offsetTop-o.offsetHeight,this.setTableLayout(),this._handleScrollX(),this.setCellInfo(),this.setDataListCellInfo(),1==this.isDrillDown&&this.initDrilldown(),!0!==this.options.preventCopy&&!0!==this.options.noSelect||this.addClass("w2noselect")}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.setAction=function(){try{if(this.initializeEvent(),this.options.columnOrder&&this.setColumnOrder(this.options.columnOrder),this.options.mergeCol){for(var t=this.getColumnCount(),e=0;e<t;e++)this.mergeColObj[e]=!1;var i=this.options.mergeCol.split(",");for(e=0;e<i.length;e++){var o=i[e];isNaN(o)||(o=Number(o)),this.mergeCol(i[e],!0)}}this._noResultMessageDivTop=WebSquare.util.getStyleProperty(this.getElementById(this.id+"_noresult"),"top");for(e=0;e<this.oneRowDataLength;e++){var s=this.getColumnID(e),n=this.getCellInfo(e);if(""!=this.options.hiddenClass||""!=n.options.hiddenClass){var l=this.options.hiddenClass;""!=n.options.hiddenClass&&(l=n.options.hiddenClass);var h=this._getRealColIndex("body",s)+this.defaultColCnt,d=null!=this.bodyToHeaderRelation[s]?this.getHeaderLayer(this.bodyToHeaderRelation[s]):null;this.hiddenList[h]?null==d||this.hasClass(d,l)||this.addClass(d,l):null!=d&&this.hasClass(d,l)&&this.removeClass(d,l)}}!this.startedDisplayNone&&this.getRowCount&&this.getRowCount()>0&&this.notifyDataChanged({refreshScroll:!0}),!this.startedDisplayNone&&this.options.focusOnSetData&&this._setFocusedCell(0,0),this.successBinding&&this._dataList&&this._dataList.options.initRowPosition&&this._dataList.broadcast({linkedDataList:["notifyRowPositionChanged"]});var c=WebSquare.BootLoader.fullViewed||!1,u=a.D.fullViewed||!1
;if(c||u||!this.startedDisplayNone&&this.checkAdaptiveGridType()&&(""==this.options.adaptive&&0==Object.keys(this.hideThresholdObj).length||(this.oldOptions.headerColBorder="",this.oldOptions.bodyColBorder="",this.setAdaptive(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)))),1==this.options.summaryAuto){var p=this.getHeaderValueList(),g="",m="";for(e=0;e<p.length;e++)g.length>0&&(m=","),g=g+m+p[e];this.setSummary(g)}if(this.changeCount=0,a.D.getBoolean(this.options.captionAuto)){for(p=this.getHeaderValueList(),g="",m="",e=0;e<p.length;e++)g.length>0&&(m=","),g=g+m+p[e];this.options.captionTitle?this.setCaption(this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+g+WebSquare.language.getMessage("Grid_caption")):this.setCaption(g+WebSquare.language.getMessage("Grid_caption"))}if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var f=document.getElementById(this.id).style.cssText,b=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:f,className:b}}if(this.startedDisplayNone||this._setVisibleRowNumFix(),this.options.noResultMessageVisibleAlways&&this.displayNoResultMessage(),this.options.groupbyZone){if(this.delayedDraw({}))return;this._drawGroupbyZone()}}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.setDataList=function(){try{if(!this.successBinding&&(this._dataList=this.modelControl.getDataComp(this.options.dataList),this._dataList)){switch(this._grid=this,this._dataList.addChild(this),this.successBinding=!0,this._dataList.initializeType){case"linkedDataList":this._linkedDataList=this._dataList,this._dataList=this._linkedDataList._dataList,this._dataList?(this.dataList=new WebSquare.uiplugin.mappingController(this),o.x.extend(this,WebSquare.uiplugin.linkedMappingController.prototype)):(this.successBinding=!1,this._dataList={});break;case"dataList":this.dataList=new WebSquare.uiplugin.mappingController(this),this.dataList.mappingCommonAPI()}for(var t=0;t<this.oneRowDataLength;t++)this.getCellInfo(t).setDataListCellRefresh(this.getCellInfo(t).element);this.render&&this.notifyDataChanged({refreshScroll:!0})}}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.resetDataList=function(){try{this.successBinding=!1,this.setDataList()}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.serialize=function(){return this.focusedCell},M.prototype.restore=function(t){try{for(var e=0,i=t.length;e<i;e++)this._setFocusedCell(t[e].focusedRowIndex,t[e].focusedColIndex,null,{useShiftKey:!0})}catch(t){return r.w.printStackTrace(t),!1}return!0},M.prototype.onComplete=function(){this._setRedrawTextAreaColumn(),n.s.prototype.onComplete.call(this)},o.x.extend(M.prototype,l.prototype),o.x.extend(M.prototype,u.prototype),o.x.extend(M.prototype,p.prototype),o.x.extend(M.prototype,g.prototype),o.x.extend(M.prototype,m.prototype),o.x.extend(M.prototype,f.prototype),o.x.extend(M.prototype,b.prototype),o.x.extend(M.prototype,y.prototype),o.x.extend(M.prototype,v.prototype),o.x.extend(M.prototype,S.prototype),o.x.extend(M.prototype,C.prototype),o.x.extend(M.prototype,_.prototype),o.x.extend(M.prototype,I.prototype),o.x.extend(M.prototype,T.prototype)},2712:(t,e,i)=>{i.d(e,{v:()=>n});i(2981);var o=i(2085),s=i(1960),r=i(3082),a=i(7275),n=function(t){this._grid=t};n.prototype.getRealRowIndex=function(t){try{var e;if(this._grid.groupbyStatus&&this._grid.groupbyStatus.grouped){for(var i in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[i])return this._grid._dataList.getRealRowIndex(t);e=this._grid.groupbyStatus.groupedRowIndexArr[t]}else e=this._grid._dataList.getRealRowIndex(t);return e}catch(t){o.w.printStackTrace(t)}},n.prototype.getTotalRow=function(){try{return this._grid._dataList.getTotalRow()}catch(t){o.w.printStackTrace(t)}},n.prototype.getTotalCol=function(){try{return this._grid.oneRowDataLength}catch(t){o.w.printStackTrace(t)}},
n.prototype.getRowCount=function(){try{return this._grid._dataList.getDataLength()}catch(t){o.w.printStackTrace(t)}},n.prototype._getData=function(t,e){try{e=this._grid.getColumnID(e);var i=this._grid.cellInfoHash[e]||{options:{}};if((1!=this._grid.options.moveKeyEditModeAll||"checkbox"!=i.options.inputType&&"radio"!=i.options.inputType)&&this._grid.editEndBeforeGetData(),i&&"expression"==i.options.inputType)return i.getExpressionValue(t);var s=this._grid._dataList._getData(t,e);return null==s&&(s=""),s}catch(t){o.w.printStackTrace(t)}},n.prototype.getCellData=function(t,e,i){try{e=this._grid.getColumnID(e);return"2"==(i=null==i||void 0===i?"0":i+"")?this._getCellData(t,e,i):this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList?this._getCellData(t,e,"0"===i?3:i):this._getCellData(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype._getCellData=function(t,e,i){try{e=this._grid.getColumnID(e);if("2"==(i=null==i||void 0===i?"0":i+""))return this._grid._getCellDisplayData(t,e);var s=this._grid.getRealRowIndex(t);return"3"!=i&&null!=s&&(t=s),this._getData(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.getOriginalCellData=function(t,e){try{e=this._grid.getColumnID(e);return this._grid._dataList.getOriginalCellData(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.getColCnt=function(){try{for(var t=0,e=this._grid.htmlInfo?this._grid.htmlInfo.head.rowArr[0]:this._grid.struct.head.rowArr[0],i=0;i<e.length;i++){var s=e[i];t+=parseInt(s.colSpan,10)||1}return t}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.getColData=function(t,e){try{t=this._grid.getColumnID(t);return this._grid._dataList.getColData(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.getRowData=function(t,e){try{for(var i=[],s=0;s<this._grid.getColumnCount();s++)"displayData"!=e?i.push(this.getCellData(t,s)):i.push(this._grid._getCellDisplayData(t,s));return i}catch(t){o.w.printStackTrace(t)}},n.prototype._getRowData=function(t,e){try{for(var i=[],s=0;s<this._grid.getColumnCount();s++)"displayData"!=e?i.push(this._getData(t,s)):i.push(this._grid._getDisplayData(t,s));return i}catch(t){o.w.printStackTrace(t)}},n.prototype.getDataRow=function(t){try{return this._grid._dataList.getDataRow(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getMatchedData=function(t,e,i,s,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedData(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getUnmatchedData=function(t,e,i,s,r){try{return this._grid._dataList.getUnmatchedData(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getMatchedColumnData=function(t,e,i,s,r,a){try{return this._grid._dataList.getMatchedColumnData(t,e,i,s,r,a)}catch(t){o.w.printStackTrace(t)}},n.prototype.getUnmatchedColumnData=function(t,e,i,s,r,a){try{return this._grid._dataList.getUnmatchedColumnData(t,e,i,s,r,a)}catch(t){o.w.printStackTrace(t)}},n.prototype.getMatchedIndex=function(t,e,i,s,r){try{return this._grid._dataList.getMatchedIndex(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getUnmatchedIndex=function(t,e,i,s,r){try{return this._grid._dataList.getUnmatchedIndex(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getRangeData=function(t,e,i){try{var s=[];if(t>e){var r=e;e=t,t=r}t<0&&(t=0),e>this._grid.getDataLength()&&(e=this._grid.getDataLength());for(var a=t;a<e;a++)s=s.concat(this.getRowData(a,i));return s}catch(t){o.w.printStackTrace(t)}},n.prototype.getAllData=function(){try{return this._grid._dataList.getAllData()}catch(t){o.w.printStackTrace(t)}},n.prototype.getColumnDistinctDataArray=function(t){try{t=this._grid.getColumnID(t);return this._grid._dataList.getColumnDistinctDataArray(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getRangeXML=function(t,e){try{return this._grid._dataList.getRangeXML(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.getMatchedXML=function(t,e,i,s,r){try{t=this._grid.getColumnID(t)
;return this._grid._dataList.getMatchedXML(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getUnmatchedXML=function(t,e,i,s,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedXML(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getRowXML=function(t){try{return this._grid._dataList.getRowXML(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getAllXML=function(){try{return this._grid._dataList.getAllXML()}catch(t){o.w.printStackTrace(t)}},n.prototype.getRowJSON=function(t){try{return this._grid._dataList.getRowJSON(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getAllJSON=function(){try{return this._grid._dataList.getAllJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getRangeJSON=function(t,e){try{return this._grid._dataList.getRangeJSON(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.getMatchedJSON=function(t,e,i,s,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedJSON(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getUnmatchedJSON=function(t,e,i,s,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedJSON(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getRowArray=function(t){try{return this._grid._dataList.getRowArray(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getAllArray=function(){try{return this._grid._dataList.getAllArray()}catch(t){o.w.printStackTrace(t)}},n.prototype.getRangeArray=function(t,e){try{return this._grid._dataList.getRangeArray(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.getMatchedArray=function(t,e,i,s,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedArray(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.getUnmatchedArray=function(t,e,i,s,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedArray(t,e,i,s,r)}catch(t){o.w.printStackTrace(t)}},n.prototype.setCellData=function(t,e,i,s,r,a,n,l){try{e=this._grid.getColumnID(e);if(this._grid._linkedDataList){var h=this._grid._linkedDataList.filteredRowIndexArr[t];"number"!=typeof(t=this._grid._dataList.getFilteredRowIndex(h))&&(t=h)}this._setCellData(t,e,i,null,s,r,a,n,l)}catch(t){o.w.printStackTrace(t)}},n.prototype._setCellData=function(t,e,i,r,a,n,l,h,d){try{var c=!1;if("object"==typeof t&&null!=t){e=t.colID,i=t.data,r=t.noDraw,a=t.direction,n=t.skipBroadCast,l=t.noEvent,h=t.excludeId,d=t.skipInstance,c=t.useRealRowIndex;var u=t.filteredRowIndex;t=null,t=u}null==i&&(i=""),null==this._grid.editedCell||this._grid.getCellOption(t,e,"embeddedInput")||this._grid.editedCell.handleCancelEdit();var p,g=this._grid._dataList.getTotalRow(),m=this._grid._dataList.getTotalCol();p=!0===c||this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList?t:this._grid.getRealRowIndex(t);var f=t,b="",y=(e=this._grid.getColumnID(e),this._grid.getColumnIndex(e)),v=this._grid._dataList.getColumnIndex(e),w=this._grid.groupbyStatus.grouped?p:t;if(this._grid.isDrillDown&&this._grid._dataList.options.depthColumn?b=this.getCellData(p,e,"3"):w>=0&&w<g&&v>=0&&v<m&&(b=this.getCellData(t,e)),w>=0&&w<g&&v>=0&&v<m){var S=this._grid.cellInfoHash[this._grid.tdIdList[y]]||{options:{}},C=S.options.inputType||"text";if(("text"==C||"textImage"==C||"drilldown"==C)&&"all"==S.options.applyFormat&&!S.options.embeddedInput){var _=this._grid.getInput(S);b=S.formatter.format(b),b=_.validator.validateString(b)}var x=this._grid.getColumnOption(S.options.col_id,"dataType");if("bigDecimal"==x&&"string"==typeof i?i=WebSquare.bigDecimal(i).toString():"bigDecimal"==x&&($l("If dataType is bigDecimal, data must be entered to String.["+this.id+"]"),i=WebSquare.bigDecimal(i).toString()),i.toString().replace(/\r(\n)?/,"\n")!==b.toString().replace(/\r(\n)?/,"\n")){var I=t;if(this._grid.isDrillDown&&this._grid._dataList.options.depthColumn&&(I=p),this._grid.groupbyStatus.grouped?this._grid._dataList._setCellData({filteredRowIndex:p,colID:e,value:i,
direction:a,skipBroadCast:n,noEvent:l,excludeId:h,realRowIndex:!0,notifyRowIndex:t,skipInstance:d}):this._grid._dataList._setCellData(I,e,i,a,n,l,h,d),null==this._grid._dataList.getColumnID(e)&&this._grid.notifyCellChanged(f,y),s.B.fireEvent(this._grid,"onchange",t,y,i,b),"radio"==S.options.inputType&&S.options.groupName&&S.options.trueValue==i&&(S.resetOthers(t),this._grid.radioGroupRepChk[S.options.groupName]&&this.setCellData(t,S.options.groupName,S.options.groupValue)),this._grid.radioGroupRepChk[S.options.id]){for(var T=this._grid.getColumnCount(),k=0;k<T;k++){var D=this._grid.cellInfoHash[this._grid.tdIdList[k]]||{options:{}};if("radio"==D.options.inputType&&D.options.groupName==S.options.id&&D.options.groupValue==i){this.setCellData(t,k,D.options.trueValue,a,n,l,h,d);break}}k==T&&this._grid._resetRadioGroup(t,S.id,!1)}if(this._grid.isDrillDown)if(this._grid.drilldown.options.depthColumn==y)this._grid.notifyDataChanged({keepTop:!0}),0==this._grid.getDataLength()&&this._grid.removeFocusedCell(),this._grid.setScrollYHeight();else if("checkbox"==S.options.inputType&&S.options.setRecursive)for(var L=this._grid.drilldown.getChildRowArr(t,!0),W=0;W<L.length;W++)this._getData(L[W],y)!=i&&this._setCellData(L[W],y,i,r,a,n,l,h,d)}else null==this._grid.editedCell||r||this._grid.notifyCellChanged(f,y)}}catch(t){o.w.printStackTrace(t)}},n.prototype.__setCellData=function(t,e,i,s,r,a,n){try{var l;e=this._grid.getColumnID(e);this._grid._linkedDataList?(l=this._grid._linkedDataList.filteredRowIndexArr[t],"number"!=typeof(t=this._grid._dataList.getFilteredRowIndex(l))&&(t=l)):l=this._grid.dataList.getRealRowIndex(t),this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList&&(t=l),this._setCellData(t,e,i,null,s,r,a,n)}catch(t){o.w.printStackTrace(t)}},n.prototype.setOriginalCellData=function(t,e,i){try{e=this._grid.getColumnID(e);this._grid._dataList.setOriginalCellData(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype._setOriginalCellData=function(t,e,i){try{e=this._grid.getColumnID(e);this._grid._dataList._setOriginalCellData(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype.setColumnDefaultValue=function(t,e){try{t=this._grid.getColumnID(t);this._grid._dataList.setColumnDefaultValue(t,e)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.setRowData=function(t,e,i){try{this._grid._dataList.setRowData(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype.setDataFile=function(t,e){try{t=this._grid._dataList.toArray(t);for(var i,s=[],r=0;r<this._grid.oneRowDataLength;r++){"expression"==(n=this._grid.getCellInfo(r)).options.inputType&&s.push(r)}i=t.length/this._grid.oneRowDataLength;for(r=0;r<s.length;r++)for(var a=0;a<i;a++){t[c=a*this._grid.oneRowDataLength+parseInt(s[r],10)]=""}for(r=0;r<this._grid.oneRowDataLength;r++){var n,l=(n=this._grid.getCellInfo(r)).options.dataType;if("select"==n.options.inputType){var h=[];for(a=0;a<n.itemArr.length;a++){h[(d=n.itemArr[a]).label]=d.value}for(a=0;a<i;a++){t[c=a*this._grid.oneRowDataLength+r]=h[t[c]]}}else if("checkcombobox"==n.options.inputType){for(h=[],a=0;a<n.itemArr.length;a++){var d;h[(d=n.itemArr[a]).label]=d.value}for(a=0;a<i;a++){for(var c=a*this._grid.oneRowDataLength+r,u=[],p=t[c].split(n.separator),g=0;g<p.length;g++)u.push(h[p[g]]);t[c]=u.join(n.separator)}}if(""!=n.options.displayFormat)for(a=0;a<i;a++){var m,f=t[c=a*this._grid.oneRowDataLength+r],b=n.options.displayFormat;m="number"==l||"bigDecimal"==l?WebSquare.text.unformatCurrency(b,f):"date"==l?WebSquare.text.unformatDate(b,f):"time"==l?WebSquare.text.unformatTime(b,f):WebSquare.text.unformatText(b,f),t[c]=m}}this._grid._dataList.setData(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.setData=function(t,e,i){try{this._grid._dataList.setData(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype.insertData=function(t,e){try{this._grid._dataList.insertData(t,e)}catch(t){o.w.printStackTrace(t)}},
n.prototype._insertData=function(t,e,i){try{this._grid._dataList._insertData(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype.getDataLength=function(){try{var t;if(this._grid.successBinding)if(this._grid.groupbyStatus&&this._grid.groupbyStatus.grouped){for(var e in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[e])return this._grid._dataList.getDataLength();t=this._grid.groupbyStatus.groupedRowIndexArr.length}else t=this._grid._dataList.getDataLength();else t=0;return t}catch(t){o.w.printStackTrace(t)}},n.prototype.setRowXML=function(t,e,i){try{this._grid._dataList.setRowXML(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype.setXML=function(t,e,i){try{if("grid"==this._grid.initializeType&&i&&i.ref&&(this._grid.options.ref=i.ref,this._grid._dataList.options.ref=i.ref,i.baseNode&&(this._grid.options.baseNode=i.baseNode,this._grid._dataList.options.baseNode=i.baseNode),i.repeatNode&&(this._grid.options.repeatNode=i.repeatNode,this._grid._dataList.options.repeatNode=i.repeatNode),i.aliasDataCollection&&(this._grid.options.aliasDataCollection=i.aliasDataCollection,this._grid._dataList.options.aliasDataCollection=i.aliasDataCollection),this._grid._setRef(),this._grid._dataList.repeatNodeTagName=this.repeatNodeTagName),null==t)return void a.k.printLog("[WebSquare.uiplugin.mappingController.setXML] XML is null["+this.id+"]");var s=this._grid.xmlData2ArrData(t);if(void 0===s)return void a.k.printLog("[WebSquare.uiplugin.mappingController.setXML] DataArray which converted from XML is undefined.["+this.id+"]");this.setData(s,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.insertXML=function(t,e){try{this._grid._dataList.insertXML(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.setJSON=function(t,e){try{if(null==t)return void a.k.printLog("[WebSquare.uiplugin.mappingController.setJSON] JSON is null["+this.id+"]");var i=this._grid.jsonData2ArrData(t);if(void 0===i)return void a.k.printLog("[WebSquare.uiplugin.mappingController.setJSON] DataArray which converted from JSON is undefined.["+this.id+"]");this.setData(i,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.setRowJSON=function(t,e,i){try{this._grid._dataList.setRowJSON(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype.insertJSON=function(t,e){try{this._grid._dataList.insertJSON(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.rowMoveUp=function(t){try{this._grid._dataList.rowMoveUp(t)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.rowMoveDown=function(t){try{this._grid._dataList.rowMoveDown(t)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.rowMoveUpFiltered=function(t){try{this._grid._dataList.rowMoveUpFiltered(t)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.rowMoveDownFiltered=function(t){try{this._grid._dataList.rowMoveDownFiltered(t)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.insertRow=function(t,e){try{e=e||{};return this._grid.options.insertIntoSortedRow&&(e.insertIntoSortedRow=this.options.insertIntoSortedRow),"grid"==this.initializeType&&this.options.ref&&1==this.repeatNodeTagNameFilter&&(t=null),this._grid._dataList.insertRow(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.removeRow=function(t,e){try{return this._grid._dataList.removeRow(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.removeRows=function(t){try{return this._grid._dataList.removeRows(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.removeAll=function(){try{return this._grid._dataList.removeAll()}catch(t){o.w.printStackTrace(t)}},n.prototype.removeRange=function(t,e){try{return this._grid._dataList.removeRange(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.reform=function(){try{this._grid._dataList.reform()}catch(t){o.w.printStackTrace(t)}},n.prototype.undoRow=function(t){try{this._grid._dataList.undoRow(t)}catch(t){o.w.printStackTrace(t)}},n.prototype._undoRow=function(t){try{this._grid._dataList._undoRow(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.undoAll=function(){try{this._grid._dataList.undoAll()}catch(t){
o.w.printStackTrace(t)}},n.prototype.getRowStatusValue=function(t){try{var e=this._grid._getGroupbyDisplayRowIndex(t);return this._grid._dataList.getRowStatusValue(e)}catch(t){o.w.printStackTrace(t)}},n.prototype._getRowStatusValue=function(t){try{return this._grid._dataList._getRowStatusValue(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getRowStatus=function(t){try{var e=this._grid._getGroupbyDisplayRowIndex(t);return this._grid._dataList.getRowStatus(e)}catch(t){o.w.printStackTrace(t)}},n.prototype._getRowStatus=function(t){try{return this._grid._dataList._getRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getRowIndexByStatus=function(t){try{return this._grid._dataList.getRowIndexByStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){o.w.printStackTrace(t)}},n.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){o.w.printStackTrace(t)}},n.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){o.w.printStackTrace(t)}},n.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){o.w.printStackTrace(t)}},n.prototype.getVoidIndex=function(){try{return this.getRowIndexByStatus("V")}catch(t){o.w.printStackTrace(t)}},n.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){o.w.printStackTrace(t)}},n.prototype.getInsertedData=function(){try{return this._grid._dataList.getInsertedData()}catch(t){o.w.printStackTrace(t)}},n.prototype.getInsertedXML=function(){try{return this._grid._dataList.getInsertedXML()}catch(t){o.w.printStackTrace(t)}},n.prototype.getInsertedJSON=function(){try{return this._grid._dataList.getInsertedJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getInsertedArray=function(){try{return this._grid._dataList.getInsertedArray()}catch(t){o.w.printStackTrace(t)}},n.prototype.getDeletedData=function(){try{return this._grid._dataList.getDeletedData()}catch(t){o.w.printStackTrace(t)}},n.prototype.getDeletedXML=function(){try{return this._grid._dataList.getDeletedXML()}catch(t){o.w.printStackTrace(t)}},n.prototype.getDeletedJSON=function(){try{return this._grid._dataList.getDeletedJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getDeletedArray=function(){try{return this._grid._dataList.getDeletedArray()}catch(t){o.w.printStackTrace(t)}},n.prototype.getRemovedXML=function(){try{return this._grid._dataList.getRemovedXML()}catch(t){o.w.printStackTrace(t)}},n.prototype.getRemovedJSON=function(){try{return this._grid._dataList.getRemovedJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getRemovedArray=function(){try{return this._grid._dataList.getRemovedArray()}catch(t){o.w.printStackTrace(t)}},n.prototype.getVoidData=function(){try{return this._grid._dataList.getVoidData()}catch(t){o.w.printStackTrace(t)}},n.prototype.getVoidXML=function(){try{return this._grid._dataList.getVoidXML()}catch(t){o.w.printStackTrace(t)}},n.prototype.getVoidJSON=function(){try{return this._grid._dataList.getVoidJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getVoidArray=function(){try{return this._grid._dataList.getVoidArray()}catch(t){o.w.printStackTrace(t)}},n.prototype.getOnlyDeletedData=function(){try{return this._grid._dataList.getOnlyDeletedData()}catch(t){o.w.printStackTrace(t)}},n.prototype.getOnlyDeletedXML=function(){try{return this._grid._dataList.getOnlyDeletedXML()}catch(t){o.w.printStackTrace(t)}},n.prototype.getOnlyDeletedJSON=function(){try{return this._grid._dataList.getOnlyDeletedJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getOnlyDeletedArray=function(){try{return this._grid._dataList.getOnlyDeletedArray()}catch(t){o.w.printStackTrace(t)}},n.prototype.getUpdatedData=function(){try{return this._grid._dataList.getUpdatedData()}catch(t){o.w.printStackTrace(t)}},n.prototype.getUpdatedXML=function(){try{return this._grid._dataList.getUpdatedXML()}catch(t){o.w.printStackTrace(t)}},
n.prototype.getUpdatedJSON=function(){try{return this._grid._dataList.getUpdatedJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getUpdatedArray=function(){try{return this._grid._dataList.getUpdatedArray()}catch(t){o.w.printStackTrace(t)}},n.prototype.getModifiedData=function(){try{return this._grid._dataList.getModifiedData()}catch(t){o.w.printStackTrace(t)}},n.prototype.getModifiedXML=function(){try{return this._grid._dataList.getModifiedXML()}catch(t){o.w.printStackTrace(t)}},n.prototype.getModifiedJSON=function(){try{return this._grid._dataList.getModifiedJSON()}catch(t){o.w.printStackTrace(t)}},n.prototype.getModifiedArray=function(){try{return this._grid._dataList.getModifiedArray()}catch(t){o.w.printStackTrace(t)}},n.prototype._setRowStatus=function(t,e){try{return this._grid._dataList._setRowStatus(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype._initRowStatus=function(t){try{this._grid._dataList._initRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.initRowStatus=function(t){try{this._grid._dataList.initRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype._createRowStatus=function(t){try{this._grid._dataList._createRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype._updateRowStatus=function(t){try{this._grid._dataList._updateRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.removeRowStatus=function(t){try{return this._grid._dataList.removeRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.deleteRow=function(t){try{this._grid._dataList.deleteRow(t)}catch(t){o.w.printStackTrace(t)}},n.prototype._deleteRowStatus=function(t){try{this._grid._dataList._deleteRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.undeleteRow=function(t){try{this._grid._dataList.undeleteRow(t)}catch(t){o.w.printStackTrace(t)}},n.prototype._undeleteRowStatus=function(t){try{this._grid._dataList._undeleteRowStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.modifyAllStatus=function(t){try{this._grid._dataList.modifyAllStatus(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.modifyRangeStatus=function(t,e,i){try{var r=[],a=this.getDataLength()+1;if(0<=t&&e<a)for(var n=t;n<e;n++){var l=this.getRealRowIndex(n),h=this._setRowStatus(l,i);i!=h&&r.push({rowIndex:n,newRowStatus:i,oldRowStatus:h})}s.B.fireEvent(this,"onrowstatuschange",r),this.broadcast({gridView:["notifyModifyRangeStatus",[t,e,i]]})}catch(t){o.w.printStackTrace(t)}},n.prototype.modifyMatchedStatus=function(t,e,i){try{this._grid._dataList.modifyMatchedStatus(t,e,i)}catch(t){o.w.printStackTrace(t)}},n.prototype.modifyRowStatus=function(t,e){try{this._grid._dataList.modifyRowStatus(t,e)}catch(t){o.w.printStackTrace(t)}},n.prototype.setColumnFilter=function(t,e,i,s){try{"object"!=typeof t||r.D.isString(t)||(t.internal=!0),this._grid._linkedDataList?this._grid._linkedDataList.setColumnFilter(t,e,i,s):this._grid._dataList.setColumnFilter(t,e,i,s)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.removeColumnFilter=function(t){try{t=this._grid.getColumnID(t);this._grid._linkedDataList?this._grid._linkedDataList.removeColumnFilter(t,{internal:!0}):this._grid._dataList.removeColumnFilter(t,{internal:!0})}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.clearSortFilter=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.clearSortFilter():this._grid._dataList.clearSortFilter()}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.removeColumnFilterAll=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.removeColumnFilterAll():this._grid._dataList.removeColumnFilterAll()}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.setFilter=function(t){try{if(this._grid._linkedDataList)t.internal=!0,this._grid._linkedDataList.setFilter(t);else{if(t){var e=this._grid.getColumnID(t.sortIndex),i=this._grid.cellInfoHash[e]||{options:{}};if(t.isExpressionArr=[],t.cellInfoArr=[],t.gridId=this._grid.id,
i&&"expression"==i.options.inputType&&"gridView"==this._grid.initializeType&&isNaN(this._grid._dataList.getColumnIndex(t.sortIndex))&&(t.fakeExpressionArr=this._grid.getFakeExpressionArr()),e){var s=e.split(" "),r=[];t.isCustomCol=[],t.sortLabel=[];for(var a=0;a<s.length;a++){i=this._grid.cellInfoHash[s[a]];var n=!1;if("custom"!=i.options.inputType||i.internal?"expression"==i.options.inputType?(t.isExpression=!0,t.isExpressionArr.push(!0)):t.isExpressionArr.push(!1):(n=!0,t.isExpressionArr.push(!1)),t.cellInfoArr.push(s[a]),n)if(t.isCustomCol.push(!0),t.customSortItemsetIdObj=[],i.options.sortLabel){for(var l=this.getTotalRow(),h={},d={},c=0;c<l;c++){var u=i.cellManagerHashByRowIndex[c]?i.cellManagerHashByRowIndex[c]:i;if("select"==u.options.inputType||"autoComplete"==u.options.inputType){var p=u.dataComp;if(p&&!h[p])"linkedDataList"==(g=this._grid.modelControl.getDataComp(p)).initializeType?h[p]=g._dataList.getAllJSON():h[p]=g.getAllJSON();d[c]=p,t.customSortItemsetIdObj[c]={label:u.itemsetObj.label,value:u.itemsetObj.value}}else d[c]=""}t.customCellDataListInfo=d,t.customDataListInfoHash=h,t.sortLabel.push(!0)}else r[a]=[],t.sortLabel.push(!1);else if(t.isCustomCol.push(!1),!i.options.sortLabel||"select"!=i.options.inputType&&"autoComplete"!=i.options.inputType)r[a]=[],t.sortLabel.push(!1);else{var g;if(i.dataComp)"linkedDataList"==(g=this._grid.modelControl.getDataComp(i.dataComp)).initializeType?r[a]=g._dataList.getAllJSON():r[a]=g.getAllJSON();else r[a]=i.getItemArray();t.sortItemsetIdObj={label:i.itemsetObj.label,value:i.itemsetObj.value},t.sortLabel.push(!0)}}r.length>0&&(t.sortItemArr=r)}}t.internal=!0,this._grid._dataList.setFilter(t),"outfocus"==t.focuseMode&&this._grid.setScrollTop(0)}}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.removeFilter=function(t,e){try{t&&(t.internal=!0),this._grid._linkedDataList?this._grid._linkedDataList.removeFilter(t,e):this._grid._dataList.removeFilter(t,e)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.clearFilter=function(t){try{this._grid._linkedDataList?this._grid._linkedDataList.clearFilter(t):this._grid._dataList.clearFilter(t)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.sort=function(t,e){try{this._grid._linkedDataList?this._grid._linkedDataList.sort(t,e):this._grid._dataList.sort(t,e)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.clearSort=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.clearSort():(this._grid._dataList.clearSort(),"outfocus"==this._grid.options.filterFocusMode&&this._grid.setScrollTop(0))}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.multisort=function(t){try{this._grid._linkedDataList?this._grid._linkedDataList.multisort(t):this._grid._dataList.multisort(t)}catch(t){o.w.printStackTrace(t,null,this)}},n.prototype.setMatchIgnoreCase=function(t){try{return this._grid._dataList.setMatchIgnoreCase(t)}catch(t){o.w.printStackTrace(t)}},n.prototype.mappingCommonAPI=function(){try{this._grid._getData=this._getData,this._grid._getRowData=this._getRowData,this._grid._setCellData=this._setCellData,this._grid._setOriginalCellData=this._setOriginalCellData,this._grid._insertData=this._insertData,this._grid._undoRow=this._undoRow,this._grid._getRowStatusValue=this._getRowStatusValue,this._grid._getRowStatus=this._getRowStatus,this._grid._setRowStatus=this._setRowStatus,this._grid._createRowStatus=this._createRowStatus,this._grid._updateRowStatus=this._updateRowStatus,this._grid._deleteRowStatus=this._deleteRowStatus,this._grid._undeleteRowStatus=this._undeleteRowStatus,this._grid.getRowJSON=this.getRowJSON,this._grid.getRowCount=this.getRowCount,this._grid.getCellData=this.getCellData,this._grid._getCellData=this._getCellData,this._grid.getOriginalCellData=this.getOriginalCellData,this._grid.getColData=this.getColData,this._grid.getRowData=this.getRowData,this._grid.getDataRow=this.getDataRow,this._grid.getMatchedData=this.getMatchedData,this._grid.getUnmatchedData=this.getUnmatchedData,
this._grid.getMatchedColumnData=this.getMatchedColumnData,this._grid.getUnmatchedColumnData=this.getUnmatchedColumnData,this._grid.getMatchedIndex=this.getMatchedIndex,this._grid.getUnmatchedIndex=this.getUnmatchedIndex,this._grid.getRangeData=this.getRangeData,this._grid.getAllData=this.getAllData,this._grid.getColumnDistinctDataArray=this.getColumnDistinctDataArray,this._grid.getRangeXML=this.getRangeXML,this._grid.getMatchedXML=this.getMatchedXML,this._grid.getUnmatchedXML=this.getUnmatchedXML,this._grid.getRowXML=this.getRowXML,this._grid.getAllXML=this.getAllXML,this._grid.getRowJSON=this.getRowJSON,this._grid.getAllJSON=this.getAllJSON,this._grid.getRangeJSON=this.getRangeJSON,this._grid.getMatchedJSON=this.getMatchedJSON,this._grid.getUnmatchedJSON=this.getUnmatchedJSON,this._grid.getRowStatusValue=this.getRowStatusValue,this._grid.getRowStatus=this.getRowStatus,this._grid.getRowIndexByStatus=this.getRowIndexByStatus,this._grid.getInsertedIndex=this.getInsertedIndex,this._grid.getUpdatedIndex=this.getUpdatedIndex,this._grid.getDeletedIndex=this.getDeletedIndex,this._grid.getModifiedIndex=this.getModifiedIndex,this._grid.getInsertedData=this.getInsertedData,this._grid.getInsertedXML=this.getInsertedXML,this._grid.getInsertedJSON=this.getInsertedJSON,this._grid.getDeletedData=this.getDeletedData,this._grid.getDeletedXML=this.getDeletedXML,this._grid.getDeletedJSON=this.getDeletedJSON,this._grid.getVoidData=this.getVoidData,this._grid.getVoidXML=this.getVoidXML,this._grid.getVoidJSON=this.getVoidJSON,this._grid.getOnlyDeletedData=this.getOnlyDeletedData,this._grid.getOnlyDeletedXML=this.getOnlyDeletedXML,this._grid.getOnlyDeletedXML=this.getOnlyDeletedXML,this._grid.getOnlyDeletedJSON=this.getOnlyDeletedJSON,this._grid.getUpdatedData=this.getUpdatedData,this._grid.getUpdatedXML=this.getUpdatedXML,this._grid.getUpdatedJSON=this.getUpdatedJSON,this._grid.getModifiedData=this.getModifiedData,this._grid.getModifiedXML=this.getModifiedXML,this._grid.getModifiedJSON=this.getModifiedJSON,this._grid.setMatchIgnoreCase=this.setMatchIgnoreCase}catch(t){o.w.printStackTrace(t,null,this)}}},477:(t,e,i)=>{i.r(e),i.d(e,{group:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=i(7716),c=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(c.prototype,h.s.prototype),o.x.extend(c.prototype,d.g.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.group",pluginName:"group",userEvents:["ondragstart","ondrag","ondragend","ondragenter","ondragover","ondragleave","ondrop","ontooltipshow","ontooltiphide"],systemEvents:["onblur","onclick","ondblclick","onfocus","onmousedown","onmouseout","onmouseover","onmouseup","onmousemove","onmouseleave","onmouseenter"],parseChild:!0,parseAttributes:!0,tagname:"div",text:"",lazyDraw:!1,role:"",initStyle:!1,keepDisabled:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,tooltipPositionX:"",tooltipPositionY:"",ignoreDisabled:!1},c.prototype.initialize=function(t){this.bindDrag=!1,this.bindDrop=!1,this.tooltipPositionParse=!1},c.html5={article:"div",aside:"div",bdi:"div",details:"div",dialog:"div",figcaption:"div",figure:"div",footer:"div",header:"div",main:"div",mark:"div",menuitem:"div",meter:"div",nav:"div",progress:"div",rp:"div",rt:"div",ruby:"div",section:"div",summary:"div",time:"div",wbr:"div"},c.prototype.toHTML=function(){try{var t=[],e=""!=this.options.role?"role='"+this.options.role+"'":"",i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",a=this.options.tagname,l=this.options.headers?" headers='"+this.options.headers+"'":"";if(s.v.browserCheck.ie){var h=s.v.browserVersion();"6"!=h&&"7"!=h&&"8"!=h||WebSquare.uiplugin.group.html5[a]&&(a=WebSquare.uiplugin.group.html5[a])}if(l&&n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/applyScopeHeaders/@value")))l=" headers='"+(this.scope_id?this.scope_id+"_":"")+this.options.headers+"'"
;if(t.push("<"+a+" id='"+this.id+"' "+i+" class='w2group "+this.options.className+"' "+e+" "+l+" "+this.getAttributesString()+o+">"),!this.options.lazyDraw){var d=!1,c=this.getChildren();if(c.length<=1)("th"===a||"td"===a)&&this.options.useLocale&&this.options.localeRef?(t.push(this.getLocaleValue(this.options.localeRef)),d=!0):1===c.length&&(t.push(c[0].toHTML()),c[0].element&&3==c[0].element.nodeType&&(d=!0));else for(var u=0;u<c.length;u++)t.push(c[u].toHTML()),c[u].element&&3==c[u].element.nodeType&&(d=!0);d||t.push(this.options.text)}return t.push("</"+a+">"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){if(this.setDragDrop(),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}var i=WebSquare.BootLoader.fullViewed||!1,o=n.D.fullViewed||!1;if(!(i||o||"table"!=this.options.tagname||"crosstab"!=this.options.adaptive&&"layout"!=this.options.adaptive)){for(var r=this.getElementById(this.id).getElementsByTagName("tr"),l=0;l<r.length;l++){var h=r[l].className;h.indexOf("w2group")>-1&&-1==h.indexOf("w2tb_tr")&&(r[l].className=h+" w2tb_tr")}this.setAdaptive(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)),this.invoke("setSetting","")}if("td"==this.options.tagname&&!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var d,c=this.element&&null!=this.element.previousElementSibling&&"w2:attributes"!=this.element.previousElementSibling.tagName,u=null!=this.render.previousSibling;if(c&&"TH"===this.render.previousElementSibling.tagName||u&&"TH"===this.render.previousSibling.tagName)d=c?null!=this.render.previousElementSibling.textContent?this.render.previousElementSibling.textContent:this.render.previousElementSibling.innerText||"":null!=this.render.previousSibling.textContent?this.render.previousSibling.textContent:this.render.previousSibling.innerText||"",n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/adaptive/trimText/@value"))?this.render.setAttribute("data-title",d.wq_trim()):this.render.setAttribute("data-title",d);else this.addClass("w2tb_noTH")}if("a"==this.options.tagname){var p=this.uuid;if(!n.D.isIEAllVersion()){var g=this.getAttributeNode("disabled");"true"!==g&&"disabled"!==g||this.addClass(this.render,"w2anchor_disabled")}n.D.isIE()&&n.D.browserVersion()<10&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,(function(t){var e=WebSquare.idCache[p];e.getDisabled()&&a.B.preventDefault(t);try{e.render&&null!=e.render.getAttribute("href").toString().toLowerCase().match(/javascript[\s]*:[\s]*void/)&&a.B.preventDefault(t)}catch(t){}})))}this.options.tooltipDisplay&&!this.options.tooltipFormatter&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)));var m=n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/captionAuto/@value"))||"table"==this.options.tagname&&this.hasClass("w2tb")&&n.D.getBoolean(s.v.getConfiguration("/WebSquare/tableLayout/captionAuto/@value")),f=n.D.getBoolean(this.options.captionAuto),b=n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/summaryOnlyAuto/@value"))||"table"==this.options.tagname&&this.hasClass("w2tb")&&n.D.getBoolean(s.v.getConfiguration("/WebSquare/tableLayout/summaryOnlyAuto/@value")),y=n.D.getBoolean(this.options.summaryOnlyAuto),v="table"==this.options.tagname&&(m&&f||m&&null==this.options.captionAuto||1==f),w="table"==this.options.tagname&&(b&&y||b&&null==this.options.summaryOnlyAuto||1==y);if(v){var S=this._getHeaderTitleList(this.render)
;this.options.captionTitle?this._setCaption(this.render,this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+S+WebSquare.language.getMessage("Grid_caption"),this.options.captionTitle):this._setCaption(this.render,S+WebSquare.language.getMessage("Grid_caption"),this.options.captionTitle)}if(w){S=this._getHeaderTitleList(this.render);this._setSummary(this.render,S)}"table"!=this.options.tagname||this.render.getAttribute("summary")||this.render.removeAttribute("summary")},c.prototype.draw=function(){try{var t=[],e=this.getChildren();if(e.length>0&&e[0].render)return;for(var i=0;i<e.length;i++)t.push(e[i].toHTML());this.render.innerHTML=t.join("");for(i=0;i<e.length;i++)e[i].activate(),e[i].onComplete()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{this.init(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.init=function(t){try{t=o.x.extend({excludePlugin:"",excludeId:"",fireEvent:!1,recursive:!1},t||{});for(var e=this.getChildren().slice(0).reverse();e.length>0;){var i=e.pop();if(i.setInitValue&&-1==(" "+t.excludePlugin+" ").indexOf(" "+i.options.pluginName+" ")&&-1==(" "+t.excludeId+" ").indexOf(" "+i.id+" ")&&i.setInitValue(t),t.recursive)for(var s=0;s<i.childControlList.length;s++)e.push(i.childControlList[s])}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.invoke=function(t,e,i,o){try{return h.s.prototype.invoke.call(this,t,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t,e){try{if(t=n.D.getBoolean(t),!0!==this.options.ignoreDisabled&&!0!==n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/ignoreDisabled/@value"))&&(h.s.prototype.setDisabled.call(this,t),"a"==this.options.tagname&&(t?this.addClass(this.render,"w2anchor_disabled"):this.removeClass(this.render,"w2anchor_disabled"))),this.options.keepDisabled){if(t){this.disabledComps=[];l=0;for(var i=this.childControlList.length;l<i;l++){(d=this.childControlList[l]).getDisabled&&!0===d.getDisabled()&&this.disabledComps.push(d)}}for(l=0;l<this.childControlList.length;l++){d=this.childControlList[l];for(var o=!1,a=0;a<this.disabledComps.length;a++)if(d===this.disabledComps[a]){o=!0;break}o||d.setDisabled(t,e)}}else for(var l=0;l<this.childControlList.length;l++){var d;(d=this.childControlList[l]).setDisabled&&"stop"!=d.activeStatus&&d.setDisabled(t,e)}}catch(t){r.w.printStackTrace(t)}return t},c.prototype.getDisabled=function(){try{return this.options&&this.options.disabled}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getAttributeNode=function(t){try{return h.s.attributes.getAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},c.prototype.setAttributeNode=function(t,e){try{h.s.attributes.setAttributeNode.call(this,t,e)}catch(t){r.w.printStackTrace(t)}},c.prototype.removeAttributeNode=function(t){try{h.s.attributes.removeAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},c.prototype.setAdaptive=function(){try{var t=parseInt(this.options.adaptiveThreshold)||480;n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=t?this.addAdaptive():this.removeAdaptive())}catch(t){r.w.printStackTrace(t)}},c.prototype.addAdaptive=function(){try{if(!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var t,e=this.options.adaptive;if("layout"==e?t="w2tb_adaptive_layout":"crosstab"==e&&(t="w2tb_adaptive_crosstab"),!this.checkAdaptiveValid(e))return;this.setAdaptiveText(),this.hasClass(t)||this.addClass(t),this.removeAdaptiveHeight(e),this.setAdaptiveHeight(e)}}catch(t){r.w.printStackTrace(t)}},c.prototype.removeAdaptive=function(){try{if(!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var t,e=this.options.adaptive;"layout"==e?t="w2tb_adaptive_layout":"crosstab"==e&&(t="w2tb_adaptive_crosstab"),this.hasClass(t)&&this.removeClass(t),this.removeAdaptiveHeight(e)}}catch(t){r.w.printStackTrace(t)}},c.prototype.setAdaptiveHeight=function(t){try{if("crosstab"==t){
var e,i=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr");document.getElementById(this.id).getElementsByTagName("thead")[0]&&(e=document.getElementById(this.id).getElementsByTagName("thead")[0].getElementsByClassName("w2tb_tr"));for(var o=0,s=0;s<i.length;s++)for(var a=i[s].getElementsByClassName("w2tb_td"),l=0;l<a.length;l++){var h=a[l].offsetHeight;o=o>=h?o:h}for(s=0;s<i.length;s++){var d;a=i[s].getElementsByClassName("w2tb_td");d=e?e.length<=s?e[e.length-1].getElementsByClassName("w2tb_th"):e[s].getElementsByClassName("w2tb_th"):i[s].getElementsByClassName("w2tb_th");var c=parseInt(n.D.getComponentById(d[0].id).getStyle("padding-top")),u=parseInt(n.D.getComponentById(d[0].id).getStyle("padding-bottom"));for(l=0;l<d.length;l++){var p=a[l],g=d[l],m=g.offsetHeight,f=parseInt(n.D.getComponentById(p.id).getStyle("padding-top")),b=parseInt(n.D.getComponentById(p.id).getStyle("padding-bottom"));m>o?n.D.getComponentById(p.id).setSize("height",m-(f+b+1)):m<o&&(n.D.getComponentById(g.id).setSize("height",o-(c+u+1)),n.D.getComponentById(p.id).setSize("height",o-(c+u+1)))}}this.render.setAttribute("data-oldwidth",this.render.style.width),this.options.adaptiveWidth?this.render.style.width=this.options.adaptiveWidth:this.render.style.width=e?"100%":i.length*p.offsetWidth+"px"}else if("layout"==t)for(a=document.getElementById(this.id).getElementsByClassName("w2tb_td"),s=0;s<a.length;s++){var y=a[s].getAttribute("data-title");if(y){var v=n.D.getRulerSpan();v.style.padding=window.getComputedStyle(a[s],":before").getPropertyValue("padding"),v.style["padding-top"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-top"),v.style["padding-right"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-right"),v.style["padding-bottom"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-bottom"),v.style["padding-left"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-left"),v.style.width=window.getComputedStyle(a[s],":before").getPropertyValue("width"),v.style["border-width"]=window.getComputedStyle(a[s],":before").getPropertyValue("border-width"),v.style["line-height"]=window.getComputedStyle(a[s],":before").getPropertyValue("line-height"),v.style["white-space"]=window.getComputedStyle(a[s],":before").getPropertyValue("white-space"),v.style["word-wrap"]=window.getComputedStyle(a[s],":before").getPropertyValue("word-wrap"),v.style["word-break"]=window.getComputedStyle(a[s],":before").getPropertyValue("word-break"),v.style["font-weight"]=window.getComputedStyle(a[s],":before").getPropertyValue("font-weight"),v.innerHTML=y,v.offsetHeight>a[s].offsetHeight&&(a[s].style.height=parseInt(window.getComputedStyle(v).getPropertyValue("height"),10)+"px"),v.style.top="-10000px",v.style.left="-10000px",v.style.visibility="hidden"}}}catch(t){r.w.printStackTrace(t)}},c.prototype.removeAdaptiveHeight=function(t){try{if("crosstab"==t){for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<e.length;o++)e[o].style.removeProperty("height");for(var s=0;s<i.length;s++)i[s].style.removeProperty("height");var a=this.render.getAttribute("data-oldwidth");a&&(this.render.style.width=a)}else if("layout"==t)for(i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<i.length;o++)i[o].style.removeProperty("height")}catch(t){r.w.printStackTrace(t)}},c.prototype.setAdaptiveLabel=function(t){try{if(!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var e=this.render.nextSibling||this.render.nextElementSibling;null!=e&&"TD"==e.tagName&&null!=e.getAttribute("data-title")&&(e.setAttribute("data-title",t),this.render.innerHTML=t)}}catch(t){r.w.printStackTrace(t)}},c.prototype.checkAdaptiveValid=function(t){try{var e=!0;if("crosstab"===t){var i,o=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr")
;document.getElementById(this.id).getElementsByTagName("thead")[0]&&(i=document.getElementById(this.id).getElementsByTagName("thead")[0].getElementsByClassName("w2tb_tr"));for(var s=0;s<o.length;s++){var a=o[s].getElementsByClassName("w2tb_td"),n=o[s].getElementsByClassName("w2tb_th");if(a.length!==n.length){e=!1;break}}if(!e&&i){e=!0;for(s=0;s<o.length;s++){a=o[s].getElementsByClassName("w2tb_td");if(n=i.length<=s?i[i.length-1].getElementsByClassName("w2tb_th"):i[s].getElementsByClassName("w2tb_th"),a.length!==n.length){e=!1;break}}}}return e||l.k.printLog("warning : tableLayout이 crosstab을 지원할 수 없는 구조입니다.["+this.getOriginalID()+"]"),e}catch(t){r.w.printStackTrace(t)}},c.prototype.setReadOnly=function(t){try{this.options.readOnly=t,this.invoke("setReadOnly",t)}catch(t){r.w.printStackTrace(t)}},c.prototype._setCaption=function(t,e,i){try{var o=t.getElementsByTagName("caption")[0];if(o&&o.parentNode==t)o.innerHTML=e;else{(o=document.createElement("caption")).innerHTML=e;var s=t.getElementsByTagName("colgroup")[0];s.parentNode.insertBefore(o,s)}if(i){var a=n.D.getDataPrefix("captiontitle");o.setAttribute(a,i)}var l=o.className;l&&""!=l?this.addClass(o,"setcaption"):o.className="setcaption"}catch(t){r.w.printStackTrace(t)}},c.prototype.setCaptionAuto=function(t){try{for(var e=this.render.getElementsByTagName("TABLE"),i=[],o=e.length,s=0;s<o;s++)i[s]=e[s];i[o]=this.render;var a=n.D.getDataPrefix("captiontitle");for(s=0;s<o+1;s++){var l=this._getHeaderTitleList(i[s]),h="";t?h=t:i[s].caption&&(h=i[s].caption.getAttribute(a)),h?this._setCaption(i[s],h+WebSquare.language.getMessage("Grid_caption2")+l+WebSquare.language.getMessage("Grid_caption"),h):this._setCaption(i[s],l+WebSquare.language.getMessage("Grid_caption"))}}catch(t){r.w.printStackTrace(t)}},c.prototype._getHeaderTitleList=function(t){try{var e=[],i="",o=[],s=[],a=[],n="",l=t.getElementsByTagName("tbody"),h=t.getElementsByTagName("thead"),d=0,c=0;if(l.length>1){for(var u=0;u<l.length;u++)if(l[u].parentNode==t)for(var p=l[u].getElementsByTagName("th"),g=0;g<p.length;g++)p[g].parentNode.parentNode==l[u]&&(s[d++]=p[g])}else l[0]&&(s=l[0].getElementsByTagName("th"));if(h.length>1){for(u=0;u<h.length;u++)if(h[u].parentNode==t)for(p=h[u].getElementsByTagName("th"),g=0;g<p.length;g++)p[g].parentNode.parentNode==h[u]&&(a[c++]=p[g])}else h[0]&&(a=h[0].getElementsByTagName("th"));o=a;for(var m=0;m<o.length;m++){e.length>0&&(n=","),null!=(f=o[m]).innerText&&""!=f.innerText?e[m]=f.innerText:null!=f.textContent&&""!=f.textContent?e[m]=f.textContent:e[m]=f.innerHTML,e[m]=e[m].replace(/(<([^>]+)>)/gi,"").trim(),""!=e[m]&&(i=i+n+e[m])}o=s;for(m=0;m<o.length;m++){var f;e.length>0&&(n=","),null!=(f=o[m]).innerText&&""!=f.innerText?e[m]=f.innerText:null!=f.textContent&&""!=f.textContent?e[m]=f.textContent:e[m]=f.innerHTML,e[m]=e[m].replace(/(<([^>]+)>)/gi,"").trim(),""!=e[m]&&(i=i+n+e[m])}return i}catch(t){r.w.printStackTrace(t)}},c.prototype._setSummary=function(t,e){try{t.setAttribute("summary",e)}catch(t){r.w.printStackTrace(t)}},c.prototype.setSummaryOnlyAuto=function(){try{for(var t=[],e=this.render.getElementsByTagName("TABLE"),i=e.length,o=0;o<i;o++)t[o]=e[o];t[i]=this.render;for(o=0;o<i+1;o++){var s=this._getHeaderTitleList(t[o]);this._setSummary(t[o],s)}}catch(t){r.w.printStackTrace(t)}},c.prototype.hideTooltip=function(){try{n.D.setTimeout((function(){this.tooltip&&this.tooltip.setStyle("display","none")}),{key:this.id+"_timeShowTooltip",delay:1e3*this.options.tooltipTime,caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e,i){try{n.D.clearTimeout(this.id+"_timeShowTooltip"),n.D.clearTimeout(this.id+"_timeHideTooltip"),n.D.setTimeout(this._showTooltip,{key:this.id+"_timeShowTooltip",delay:1e3*this.options.tooltipTime,caller:this,args:[t,e,i]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.bind=function(t,e){try{h.s.prototype.bind.call(this,t,e),this.setDragDrop()}catch(t){r.w.printStackTrace(t,null,this)}},
c.prototype.setDragDrop=function(){var t=!1,e=!1;if(null!=this.options.xmlEvents){for(var i=0;i<this.userEventList.length;i++){switch(this.userEventList[i].name){case"ondragstart":case"ondrag":case"ondragend":t=!0;break;case"ondragenter":case"ondragover":case"ondragleave":case"ondrop":e=!0}}t&&!this.bindDrag&&(n.D.isMobile()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))):(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(document.documentElement,"onmousemove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.handleTouchEnd))),this.bindDrag=!0),e&&!this.bindDrop&&(WebSquare.dragdrop2.droppable[this.uuid]={over:!1},this.bindDrop=!0)}},c.prototype.finalize=function(){this.bindDrag=!1,this.bindDrop=!1,WebSquare.dragdrop2.droppable[this.uuid]=null,delete WebSquare.dragdrop2.droppable[this.uuid],this.options&&this.options.udcName&&a.B.fireEvent(this,"ondestroyed")},c.prototype.handleTouchStart=function(t){t.touches&&1!=t.touches.length||(this.setUserData("dragStatus","stop"),WebSquare.getBody().addClass("w2noselect"),n.D.emptySelection())},c.prototype.handleTouchMove=function(t){if(!t.touches||1==t.touches.length){var e=this.getUserData("dragStatus");if("stop"!=e&&"move"!=e||!this.getUserData("draggable"))return;s.v.setTimer(this._handleTouchMove,{key:this.id+"_handleTouchMove",caller:this,args:[{clientX:t.touches?t.touches[0].pageX:t.clientX,clientY:t.touches?t.touches[0].pageY:t.clientY}],delay:30,max:30}),a.B.preventDefault(t)}},c.prototype._handleTouchMove=function(t){var e=this.getUserData("dragStatus");if(("stop"==e||"move"==e)&&this.getUserData("draggable")){var i=t.touches?t.touches[0].pageX:t.clientX,o=t.touches?t.touches[0].pageY:t.clientY;if(i+=document.body.scrollLeft,o+=document.body.scrollTop,"stop"==e){function t(t){for(var e in t)if(null!=WebSquare.idCache[e]){var i=WebSquare.idCache[e].render,o=WebSquare.style.getAbsoluteTop(i),s=WebSquare.style.getAbsoluteLeft(i);t[e].position={top:o,left:s,bottom:o+i.offsetHeight,right:s+i.offsetWidth}}}t(WebSquare.dragdrop2.droppable),t(WebSquare.dragdrop2.scrollable),this.setUserData("dragStatus","move"),a.B.fireEvent(this,"ondragstart",i,o)}for(var r in a.B.fireEvent(this,"ondrag",i,o),WebSquare.dragdrop2.scrollable){var n=WebSquare.dragdrop2.scrollable[r],l=WebSquare.idCache[r];if(null!=l){var h,d,c=n.position,u=l.options.dragScrollSize;if(c.left<=i&&i<=c.right&&(c.top<=o&&o<=c.top+u?(h="up",d=l.render.clientHeight*(u-(o-c.top))/u+WebSquare.dragdrop2.scrollByDragSpeed):c.bottom-u<=o&&o<=c.bottom&&(h="down",d=l.render.clientHeight*(u-(c.bottom-o))/u+WebSquare.dragdrop2.scrollByDragSpeed)),null==h)n.scroll=!1,s.v.clearTimer(l.id+"_setSlideByDrag"),s.v.clearTimer(l.id+"_slideByDrag");else{var p=n.scroll?50:WebSquare.dragdrop2.scrollByDragDelay;s.v.setTimer((function(t,e,s){var r=WebSquare.idCache[s],n=r.getScrollTop(),l="up"==t?0:r.getMaxScrollTop();n!=l&&(r.scroll=!0,WebSquare.style.animate(r,(function(t){var e=parseInt(n+t*(l-n),10),s=e-this.getScrollTop();for(var r in this._scrollTo(null,e),WebSquare.dragdrop2.droppable){for(var h=WebSquare.idCache[r],d=!1;h=h.parentControl;)if(h==this){d=!0;break}d&&(WebSquare.dragdrop2.droppable[r].position.top-=s,WebSquare.dragdrop2.droppable[r].position.bottom-=s)}for(var c in WebSquare.dragdrop2.droppable){var u=WebSquare.dragdrop2.droppable[c],p=u.position;null!=WebSquare.idCache[c]&&(p.left<=i&&i<=p.right&&p.top<=o&&o<=p.bottom?(u.over||(u.over=!0,a.B.fireEvent(WebSquare.idCache[c],"ondragenter")),
u.drop=!1===a.B.fireEvent(WebSquare.idCache[c],"ondragover")):u.over&&(u.over=!1,u.drop=!1,a.B.fireEvent(WebSquare.idCache[c],"ondragleave")))}}),{key:r.id+"_slideByDrag",easing:"linear",duration:1e3/e*Math.abs(l-n)}))}),{key:l.id+"_setSlideByDrag",delay:p,args:[h,d,r]})}}}for(var g in WebSquare.dragdrop2.droppable){var m=WebSquare.dragdrop2.droppable[g];c=m.position;null!=WebSquare.idCache[g]&&(c.left<=i&&i<=c.right&&c.top<=o&&o<=c.bottom?(m.over||(m.over=!0,a.B.fireEvent(WebSquare.idCache[g],"ondragenter")),m.drop=!1===a.B.fireEvent(WebSquare.idCache[g],"ondragover")):m.over&&(m.over=!1,m.drop=!1,a.B.fireEvent(WebSquare.idCache[g],"ondragleave")))}}},c.prototype.handleTouchEnd=function(t){var e=this.getUserData("dragStatus","move");WebSquare.getBody().removeClass("w2noselect");var i=!1;if(n.D.isChrome()||n.D.isOpera()){var o=this.event.getTargetIterator(t,this.render);o.next()&&("INPUT"==o.getElement().tagName||o.match("w2input_focus"))&&(i=!0)}if(i||n.D.emptySelection(),"pass"!=e){for(var r in WebSquare.dragdrop2.droppable)WebSquare.dragdrop2.droppable[r].over&&WebSquare.dragdrop2.droppable[r].drop&&null!=WebSquare.idCache[r]&&a.B.fireEvent(WebSquare.idCache[r],"ondrop",this),WebSquare.dragdrop2.droppable[r].over=!1,WebSquare.dragdrop2.droppable[r].drop=!1;for(var l in a.B.fireEvent(this,"ondragend"),this.render&&this.setUserData("dragStatus","pass"),WebSquare.dragdrop2.scrollable)WebSquare.dragdrop2.scrollable[l].scroll=!1,s.v.clearTimer(WebSquare.idCache[l].id+"_setSlideByDrag"),s.v.clearTimer(WebSquare.idCache[l].id+"_slideByDrag")}},c.prototype.handleMouseoverEvent=function(t){try{var e=a.B.getTarget(t);if(e){var i=e,o=WebSquare.style.getStyle(e,"text-overflow"),s=e.offsetWidth,n=e.offsetHeight,h=20,d=n;try{this.options.tooltipPositionX&&(h=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(s,n)),this.options.tooltipPositionY&&(d=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(s,n))}catch(t){l.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=i.className,this.toolTipRuler.innerHTML=i.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(i,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(i,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(i,"font-weight");var c=this.toolTipRuler.offsetWidth,u=e.clientWidth;if(3!=i.nodeType){var p=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),g=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");c-=parseInt(p||"0",10),c-=parseInt(g||"0",10),u-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(u<c){var m=WebSquare.style.getAbsoluteLeft(e)+h,f=WebSquare.style.getAbsoluteTop(e)+d,b=i.innerText.wq_trim();document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(b=this.options.tooltipItemLabel),this.showTooltip(m,f,b)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),this.hideTooltip()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAdaptiveText=function(t){try{if("table"!==this.options.tagname)return;for(var e=this.render.getElementsByTagName("td"),i=0;i<e.length;i++){var o=e[i];if(o.previousSibling&&"TH"===o.previousSibling.tagName){var a=null!=o.previousSibling.textContent?o.previousSibling.textContent:o.previousSibling.innerText||""
;n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/adaptive/trimText/@value"))?o.setAttribute("data-title",a.wq_trim()):o.setAttribute("data-title",a)}}}catch(t){r.w.printStackTrace(t,null,this)}}},1553:(t,e,i)=>{i.r(e),i.d(e,{image:()=>h});var o=i(2981),s=(i(1656),i(2085)),r=i(1960),a=i(3082),n=i(7275),l=i(6615),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.image",pluginName:"image",systemEvents:["onabort","onerror","onblur","onclick","ondblclick","onfocus","onmousedown","onmouseup","onmouseout","onmouseover","onmousemove"],src:"",alt:"",usemap:"",title:"",longdesc:"",msaName:""},h.prototype.initialize=function(t){},h.prototype.toHTML=function(){try{var t=[],e=this.options.src?this.getImageURL(this.options.src):"",i=""==this.options.title?"":"title='"+this.options.title+"'",o=""==this.options.usemap?"":"usemap='"+this.options.usemap+"'",r=""==this.options.longdesc?"":"longdesc='"+this.options.longdesc+"'",a=""==this.options.style?"":"style='"+this.options.style+"'",n=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'",l="";if("$empty"==this.options.alt)var h="alt=''";else h=""==this.options.alt?"":"alt='"+this.options.alt+"'";return this.options.onerror&&(l=' onerror="('+this.options.onerror+').call(this,event);" '),t.push("<img id='"+this.id+"' src='"+e+"' "+a+" "+n+" class='w2image "+this.options.className+"' "+h+" "+i+" "+o+" "+r+" "+l+" />"),t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{a.D.isIE(6)||a.D.isIE(7)||a.D.isIE(8)||a.D.isIE(9)||(this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,this.handleDragOverEvent)),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,this.handleDropEvent))),this.refresh()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setSrcNM(t)}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setSrc=function(t){try{var e="";t&&(e=this.getImageURL(t)),this.render.src=e}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setSrcNM=function(t){try{return this.setSrc(t)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getSrc=function(){try{return this.render.src}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setLongdesc=function(t){try{this.render.longDesc=t}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getLongdesc=function(){try{return this.render.longDesc}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setAlt=function(t){try{this.render.alt=t}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getAlt=function(){try{return this.render.alt}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?(this.setOpacity(.3),this.addClass(this.render,"w2image_disabled")):(this.setOpacity(1),this.removeClass(this.render,"w2image_disabled"))}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleDropEvent=function(t){try{r.B.stopEvent(t);var e=t.dataTransfer.files[0],i=new FileReader,o=this;i?(i.onload=function(t){o.setSrc(t.target.result)},i.readAsDataURL(e)):n.k.printLog("NOT SUPPORT HTML5 FILE API["+this.id+"]")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleDragOverEvent=function(t){try{r.B.stopEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}}},8067:(t,e,i)=>{i.r(e),i.d(e,{input:()=>u});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=i(1577),c=i(7716),u=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(u.prototype,h.s.prototype),o.x.extend(u.prototype,d.z.prototype),
o.x.extend(u.prototype,c.g.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.input",pluginName:"input",serializable:!0,parseAttributes:!0,userEvents:["onfocus","onblur","onbeforeedit","oneditend","onafteredit","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull","ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onkeydown","oninput","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,valueType:"",type:"text",editType:"",dataType:"text",ioFormat:"",ioFormatter:"",displayFormat:"",displayFormatter:"",formatArray:"",applyFormat:"display",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",copyOnReadOnly:"",maskFormat:"",ltrim:!1,rtrim:!1,trim:!1,mandatory:!1,maxlength:"-1",maxLength:"-1",minlength:-1,adjustMaxLength:!1,useMaxLength:!1,allowChar:"",ignoreChar:"",byteCheckIgnoreChar:"",byteCheckIgnoreCharType:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validateOnCheckMaxByteLength:!1,validateOnInput:!1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,onFocusStyle:"",onFocusClass:"w2input_focus",readOnlyClass:"w2input_readonly",readOnlyFocusEvent:!1,refSyncKeyup:!1,initValue:"",title:"",name:"",useKeyupBlur:!0,preventCopyPaste:!1,delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",focusCalcSize:!0,enterBlur:!0,placeholder:"",autocomplete:"",useVerticalAlign:!0,escape:!0,autocorrect:"",autoCapitalize:"off",imeMode:"",autoFocus:!1,nextTabByEnter:!1,nextTabByKeyDown:!1,showPlaceHolderOnReadOnly:!1,refSync:!1,useMonthYearFormat:!1,customModelFormatter:"",customModelUnformatter:"",customPasteFormatter:"",inputMode:"",useBigDecimalFloat:!1,setValueHandler:"",getValueHandler:"",autoDecimalPoint:!1,editFormat:"",maskFormatModelExcludeChar:"",maskFormatModelExcludeCharValue:!1,exceptValidKeydown:""},u.prototype.initialize=function(t){try{this.originalStyleObj=null,this.focusStyleObj=null,this.focusedSizeFlag=!1,this.realValue="",this.supportPlaceholder=!1,this.supportAutocomplete=!1,this._focusStatus="init",this._getFocused=!1,this._changeApplyFormat=!1,this.originalHashValue={},this.options.maxlength="-1"!==this.options.maxLength?this.options.maxLength:this.options.maxlength,this.options.maxLength=this.options.maxlength,this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.decimalDelimiter=this.options.decimalDelimiter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,this.floatMaxlength="-1",this.options.parentEvent&&this.options.parentEvent.options&&"searchbox"===this.options.parentEvent.options.pluginName&&(this.scope_obj=this.options.parentEvent.scope_obj,this.scope_id=this.options.parentEvent.scope_id),"number"===this.options.dataType&&"true"===this.options.floatNumber&&(this.options.dataType="float");var e=this.options.dataType;this.options.maskFormat||"all"!=this.options.applyFormat||""!=this.options.displayFormatter||"bigDecimal"===e||"number"===e||"float"===e||"euro"===e||"rupee"===e||"tenge"===e||(this._changeApplyFormat=!0,this.options.applyFormat="display"),this.options.maskFormat&&(this.options.applyFormat="all","text"!=this.options.dataType||this.options.allowChar||(this.options.allowChar="0-9")),""!=this.options.displayFormat||"number"!=e&&"bigDecimal"!=e||(this.options.displayFormat=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/displayFormat/@defaultValue')||"",this.options.displayFormat&&(this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter="."))),"euro"==e&&(this.options.euroMask||(this.options.euroMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),
this.options.customModelFormatter||(this.options.customModelFormatter=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||""));var i=this.options.onFocusStyle;if(i){var o="w2input_userfocus",a="#"+this.id+"."+o;WebSquare.cssManager.addConvertedCSS(a,i),this.options.onFocusStyle="",this.options.onFocusClass=o}if(""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"float":case"bigDecimal":this.useBigDecimalFloat||(this.options.displayFormat=this.options.numberMask),this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}else switch(this.options.dataType){case"float":case"bigDecimal":case"number":this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}if(this.options.byteCheckIgnoreChar&&this.options.byteCheckIgnoreCharType){for(var n=this.options.byteCheckIgnoreCharType.split(","),l=!1,h=0;h<n.length;h++)n[h].wq_trim()==this.options.dataType&&(l=!0);l||(this.options.byteCheckIgnoreChar="")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this.options.maskFormat&&(this.useBigDecimalFloat=!0);var c=this.options.dataType;if("bigDecimal"==c&&(c=this.useBigDecimalFloat?"float":"number"),this.formatter=WebSquare.format.createFormatter(c,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),"default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),
this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this.options.maskFormat&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar))),this.validator=new d.s.validateInvoker(this.id,this.options),"true"!==this.options.floatNumber||"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType)switch(this.options.dataType){case"date":case"time":break;case"number":""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):this.options.maskFormat?this.validator.addCommand(new d.s.numberMaskCommand(this.options.displayFormat,this.options.maskFormat,this.options.applyFormat)):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"bigDecimal":if(!this.useBigDecimalFloat){this.options.maskFormat&&this.validator.addCommand(new d.s.numberMaskCommand(this.options.displayFormat,this.options.maskFormat,this.options.applyFormat)),""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")?(this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(this.options.maxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(this.options.maxlength)),this.floatMaxlength=this.options.maxlength,this.options.maxlength="-1"):this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);break;case"text":this.options.maskFormat&&this.validator.addCommand(new d.s.textMaskCommand(this.options.displayFormat,this.options.maskFormat,this.options.applyFormat,this.options.allowChar))}else if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")){var u=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(u,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(u)),this.floatMaxlength=u,this.options.maxlength="-1"}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if(this.inputEvented=!1,this.options.placeholder&&WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.autocomplete&&WebSquare.uiplugin.input.autocomplete&&(this.supportAutocomplete=!0),this.beforeEditValue="",this._editTokens={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},"!":{escape:!0}},
this.options.editFormat&&(this._editFormat=this.options.editFormat.split("||").sort((function(t,e){return t.replace(/[^a-z^A-Z^0-9]/g,"").length-e.replace(/[^a-z^A-Z^0-9]/g,"").length}))),this._editValue="",this._oldValue="",this.floatMaxlength>0){u=this.floatMaxlength+"";var p=this.options.decimalDelimiter||".",g=u.split(p);this._integerMaxLength=parseInt(g[0]),this._fractionMaxLength=g[1]?parseInt(g[1]):0}}catch(t){r.w.printStackTrace(t,null,this)}},u.htmlStr=["<input id='",,"'",," class='w2input ",,"'",,"",," />"],u.placeholder="string"==typeof document.createElement("input").placeholder,u.autocomplete="string"==typeof document.createElement("input").autocomplete,u.prototype.toHTML=function(){try{var t=WebSquare.uiplugin.input.htmlStr,e="";"auto"==this.options.imeMode?e="ime-mode:auto;":"inactive"==this.options.imeMode?e="ime-mode:inactive;":"active"==this.options.imeMode?e="ime-mode:active;":"disabled"==this.options.imeMode&&(e="ime-mode:disabled;"),this.options.style&&";"!==this.options.style.slice(-1)&&(this.options.style+=";");var i=this.options.escape?WebSquare.xml._encode(this.options.placeholder):this.options.placeholder,o=this.options.escape?WebSquare.xml._encode(this.options.title):this.options.title;return t[1]=this.id,t[3]=""==this.options.style&&""==this.options.imeMode?"":" style='"+this.options.style+e+"'",t[5]=this.options.className+(this.options.readOnly?" "+this.options.readOnlyClass:""),t[7]=this.options.type?" type='"+this.options.type+"'":"",t[9]=this.options.title?" title='"+o+"'":"",t[9]+=this.options.name?" name='"+this.options.name+"'":"",t[9]+=this.options.maxlength>=0&&!this.options.useMaxLength?" maxLength='"+this.options.maxlength+"'":"",t[9]+=this.supportPlaceholder?" placeholder='"+i+"'":"",t[9]+=this.supportAutocomplete&&this.options.autocomplete?" autocomplete='"+this.options.autocomplete+"'":"",t[9]+=0!=WebSquare.hybridApp&&this.options.autocorrect?" autocorrect='"+this.options.autocorrect+"'":"",t[9]+=0==WebSquare.hybridApp?"":" autoCapitalize='"+this.options.autoCapitalize+"'",t[9]+=this.getAttributesString(),t[9]+=this.options.imeMode?" imeMode='"+this.options.imeMode+"'":"",t[9]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",n.D.isMobile()&&(t[9]+=this.options.inputMode?" inputMode='"+this.options.inputMode+"'":""),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.useVerticalAlign&&this.setVerticalAlign(),this.options.initValue&&this._setValue(this.options.initValue),this.modelControl.isBinded()){var i=this.modelControl.getData();this.options.useMonthYearFormat&&"date"===this.options.dataType&&(i=WebSquare.date.getIOFormatDate(i,this.options.ioFormat)),this.setValueNM(i)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),this._editFormat)return void this.setActionEditFormat();var o=this;this.addEvent("oneditend",(function(){var t="",e=o.render.value.wq_trim();("number"==o.options.dataType||"float"==o.options.dataType||o.useBigDecimalFloat||"euro"==o.options.dataType||"rupee"==o.options.dataType||"tenge"==o.options.dataType)&&("."!==e&&"-"!==e&&"+"!==e&&","!==e&&e!=="+"+this.options.decimalDelimiter&&e!=="-"+this.options.decimalDelimiter||(o.render.value="")),t="all"==o.options.applyFormat?o.options.maskFormat?o.render.value:o._getValue():o.render.value,t=o.validator.validateString(t),o.options.placeholder&&!this.supportPlaceholder&&0==o.realValue.length&&this.render.className.match("w2input_placeholder")||o.setValueNM(t,!0)})),
(n.D.isIEAllVersion()||n.D.isSpartan())&&(this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent)),this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdv,{eventonreadonly:!0})),1==this.getReadOnly()&&(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.validateOnInput&&(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),s.v.browserCheck.android&&s.v.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this.options.maskFormat&&!this.useBigDecimalFloat&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.D.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),"number"==this.options.dataType&&this.setStyle("imeMode","disabled")),n.D.isIEAllVersion()?this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){document.activeElement!=this.render&&this.focus()}))):n.D.isOpera()&&this.options.preventCopyPaste&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t),this.focus()}))),"noFormat"==this.options.copyOnReadOnly&&(n.D.isIEAllVersion()?(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly&&a.B.preventDefault(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){67==t.keyCode&&(t.ctrlKey||t.metaKey)&&this.handleCopyEvent({})})))):this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent))),"color"!=this.options.type||n.D.isIEAllVersion()||n.D.isSpartan()||this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleColorChangeEvent)),this.options.maxlength>=0&&!this.options.useMaxLength&&(this.render.maxLength=this.options.maxlength,this.originalMaxLength=this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setActionEditFormat=function(){try{this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownDynamicMask)),this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleDynamicMask)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpDynamicMask)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurDynamicMask)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdvMask)),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&!this.noRefresh){var t=this._getValue(),e=this.modelControl.getData(),i=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id)
;"function"==typeof i&&(e=i.call(this,e,this.getDisplayValue())),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat)),this.options.maskFormat&&(e=this.maskFormatModelUnFormat(e)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this._getValue()})}this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.commit=function(){try{var t=this._getValue();if(("bigDecimal"===this.options.dataType||"float"===this.options.dataType)&&t[t.length-1]===this.options.decimalDelimiter)return;this._setValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{var e,i=this.options.setValueHandler;if(i){var o=n.D.getGlobalFunction(i,this.scope_id);"function"==typeof o&&(e=o.call(this,t))}else e=this._setValue(t);return this._oldValue=this._getValue(),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setValue=function(t,e){try{if(n.D.isNull(t))return;t=this._trim(t),this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength&&(t=this.adjustMaxLength(t));var i=this._getValue(),o=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof o&&(t=o.call(this,t,this.getDisplayValue())),this.options.maskFormat&&(t=this.maskFormatModelUnFormat(t)),e&&!0===e.skipNM||this.setValueNM(t,!1,e),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat));var s=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id),l=t;"function"==typeof s&&(t=s.call(this,t,this.getDisplayValue())),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(t)):l!==t?this.modelControl.setData(t,null,{orgValue:l}):this.modelControl.setData(t),this._editFormat&&(this._editValue=t),i!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t,e){try{if(n.D.isNull(t))return;if(t=this._trim(t),"bigDecimal"==this.getDataType()){var i=this.options.decimalDelimiter||".";if("number"==typeof t)if(l.k.printLog("Warning : BigDecimal Datatype, then you must enter a string instead of a number to get the exact data.["+this.id+"]"),this.useBigDecimalFloat){var o=(s=(t=t.toString()).split(i))[1]?s[1].length:0;t=Big(t.toString()).toFixed(o)}else t=Big(t.toString()).toFixed();else if(t.constructor==Big)t=t.toFixed();else if("string"==typeof t)try{if(""===t)t="";else if(!this.options.maskFormat)if(this.useBigDecimalFloat){var s;o=(s=t.split(i))[1]?s[1].length:0;t=Big(t).toFixed(o)}else t=Big(t).toFixed()}catch(t){l.k.printLog("Warning : You must enter the exact number of data.["+this.id+"]")}}else t=t.toString();if(t=document.activeElement==this.render||this._editFormat?t:this.formatter.format(t),this._editFormat){var a=!1;if(this.options.displayFormatter){var h=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof h&&(t=h(t),a=!0)}if(!0!==a)t=WebSquare.text.dynamicMask(t,this._editFormat,this._editTokens).value}else e&&"all"==this.options.applyFormat?(t=this.validator.validateString(t),t=this.formatter.format(t)):this.options.maskFormat&&"all"==this.options.applyFormat&&(t=this.formatter.format(t));this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2input_placeholder")||this.addClass("w2input_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2input_placeholder"),this.render.value!==t&&(this.render.value=t)):this.render.value!==t&&(this.render.value=t),this.realValue=t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getValue=function(){try{var t,e=this.options.getValueHandler;if(!e){if(t=this._getValue(),
!0===this.options.maskFormatModelExcludeCharValue&&(t=this.maskFormatModelFormat(t)),("euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&this.parentControl&&this.parentControl.options&&"gridView"!=this.parentControl.options.pluginName){var i=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof i&&(t=i.call(this,t))}return t}var o=n.D.getGlobalFunction(e,this.scope_id);if("function"==typeof o)return o.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getValue=function(){try{var t;return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value,this.options.maskFormat&&"all"==this.options.applyFormat?t:this._editFormat?this._editValue:this.formatter.unformat(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setFocusSize=function(t){try{if(1==this.options.focusCalcSize&&-1==this.getStyle("height").indexOf("%")&&-1==this.getStyle("width").indexOf("%")){var e=parseInt(this.getStyle("height")),i=parseInt(this.getStyle("width")),o=this.focusStyleObj.paddingLeft+this.focusStyleObj.paddingRight+this.focusStyleObj.borderLeftWidth+this.focusStyleObj.borderRightWidth-(this.originalStyleObj.paddingLeft+this.originalStyleObj.paddingRight+this.originalStyleObj.borderLeftWidth+this.originalStyleObj.borderRightWidth),s=this.focusStyleObj.paddingTop+this.focusStyleObj.paddingBottom+this.focusStyleObj.borderTopWidth+this.focusStyleObj.borderBottomWidth-(this.originalStyleObj.paddingTop+this.originalStyleObj.paddingBottom+this.originalStyleObj.borderTopWidth+this.originalStyleObj.borderBottomWidth);1==t&&0==this.focusedSizeFlag?(this.setStyle("height",e-s+"px"),this.setStyle("width",i-o+"px"),this.focusedSizeFlag=!0):0==t&&1==this.focusedSizeFlag&&(this.setStyle("height",e+s+"px"),this.setStyle("width",i+o+"px"),this.focusedSizeFlag=!1)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setVerticalAlign=function(){try{if(n.D.isIE()){var t=this.getSize("height")||parseInt(this.getStyle("height"));isNaN(t)||this.setStyle("lineHeight",t+"px")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.addClass(this.render,"w2input_disabled"):this.removeClass(this.render,"w2input_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":1==e?this.addClass(this.render,"w2input_mandatory"):this.removeClass(this.render,"w2input_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getFormattedValue=function(){try{return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t=this.validator.validate(this._getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.adjustMaxLength=function(t){try{if(this.options.useMaxLength)return t;if(this.options.maxlength>0){var e=(t+="").substr(0,1),i=parseInt(this.originalMaxLength,10);"-"!=e&&"+"!=e||(i+=1),this.setMaxLength(i),this.render.maxLength=i}return t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDataType=function(t){try{if(!t||"euro"==t||"rupee"==t||"tenge"==t)return;this.options.dataType=t,
this._refreshOption()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._refreshOption=function(t){try{void 0!==t&&null!=t||(t={});var e=this.options.dataType;if("all"==this.options.applyFormat&&""==this.options.displayFormatter&&"bigDecimal"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e&&(this._changeApplyFormat=!0,this.options.applyFormat="display"),""==this.options.displayFormat||!0===t.refreshDisplayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"float":this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".");break;case"bigDecimal":case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this.options.maskFormat&&(this.useBigDecimalFloat=!0);var i=this.options.dataType;"bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number");var o=this._getValue();switch(this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),"default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this.options.maskFormat&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id)),this.validator.clearCommand(),this.validator=new d.s.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"bigDecimal":case"number":""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"float":this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat));break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter))}"string"==typeof t.refreshValue?this._setValue(t.refreshValue):this.setValueNM(o)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setFormat=function(t,e){try{for(var i in t)i in this.options&&"string"==typeof t[i]&&(this.options[i]=t[i]);this._refreshOption(e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t;var e=this._getValue()
;"number"===this.options.dataType&&("default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),""==this.options.displayFormat?(this.validator.removeCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9"))):(this.validator.removeCommand(new d.s.allowCharCommand("+\\-.0-9")),this.validator.addCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0))),this.formatter.setMasking(t),this.setValueNM(e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setIoFormat=function(t,e){try{if("date"!==this.options.dataType)return;var i={};if("string"==typeof e&&e!==this.options.dateMask&&(i.refreshDisplayFormat=!0),"string"==typeof t&&t!==this.options.ioFormat){var o=WebSquare.format.createFormatter(this.options.dataType,t,"",this.options.ioFormat,null,null,this.scope_id,this.id);i.refreshValue=o.format(this._getValue())}this._setFormat({ioFormat:t,dateMask:e},i)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setEditFormat=function(t){try{if(void 0!==t&&t.length>0){this._editFormat=t.split("||").sort((function(t,e){return t.replace(/[^a-z^A-Z^0-9]/g,"").length-e.replace(/[^a-z^A-Z^0-9]/g,"").length}));var e=this.getValue(),i=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.render.value=i.value,this._editValue=i.orgValue}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.changeCurrency=function(t,e,i,o,s,a){try{return 1===arguments.length&&"object"==typeof arguments[0]?this._changeCurrency(arguments[0]):this._changeCurrency({type:t,format:e,delimiter:i,decimalDelimiter:o,customModelFormatter:s,customModelUnformatter:a})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._changeCurrency=function(t){try{var e=t.type||"",i=t.format,o=t.delimiter||"",a=t.decimalDelimiter||"",l=t.customModelFormatter,h=t.customModelUnformatter;if(!e||"float"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e)return;this.options.decimalDelimiter;"number"===e&&"true"===this.options.floatNumber&&(e="float");var c=this.getValue(),u=e;switch(e){case"number":case"float":case"bigDecimal":u="number",i||(this.options.numberMask||(this.options.numberMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/numberMask/@value')||""),i=this.options.numberMask),this.options.delimiter=o||",",this.options.decimalDelimiter=a||".";break;case"euro":i||(this.options.euroMask||(this.options.euroMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),i=this.options.euroMask),this.options.delimiter=o||".",
this.options.decimalDelimiter=a||",";break;case"rupee":i||(this.options.rupeeMask||(this.options.rupeeMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/rupeeMask/@value')||""),i=this.options.rupeeMask),this.options.delimiter=o||",",this.options.decimalDelimiter=a||".";break;case"tenge":i||(this.options.tengeMask||(this.options.tengeMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/tengeMask/@value')||""),i=this.options.tengeMask),this.options.delimiter=o||" ",this.options.decimalDelimiter=a||","}if(!i)return;if(this.options.dataType=e,this.options.displayFormat=i,void 0!==l?this.options.customModelFormatter=l:this.options.customModelFormatter||(this.options.customModelFormatter=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+u+'"]/customModelFormatter/@value')||""),void 0!==h?this.options.customModelUnformatter=h:this.options.customModelUnformatter||(this.options.customModelUnformatter=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+u+'"]/customModelUnformatter/@value')||""),this._changeApplyFormat&&(this.options.applyFormat="all"),this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.validator.clearCommand(),this.validator=new d.s.validateInvoker(this.id,this.options),"float"===this.options.dataType||this.useBigDecimalFloat)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){var p=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(p,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(p)),this.floatMaxlength=p,this.options.maxlength="-1"}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if("number"===this.options.dataType)this.validator.addCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0);else if("euro"===this.options.dataType||"rupee"===this.options.dataType||"tenge"===this.options.dataType)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){p=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(p,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(p)),this.floatMaxlength=p,this.options.maxlength="-1"}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);this.formatter.setMasking(i),"function"==typeof(h=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id))&&(c=h.call(this,c)),this.setValueNM(c)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisplayFormatter=function(t){try{var e=this._getValue();if(this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.options.displayFormat){var i
;this.displayFormatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,"",this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),e=this.originalHashValue[e]||e,e=this.displayFormatter.format(e),i=this.displayFormatter.hash_format_to_original,this.originalHashValue=i}this.setValueNM(e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getDisplayFormatter=function(){try{return this.options.displayFormatter}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getIOValue=function(){try{return this._getValue()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getIOFormat=function(){try{return this.options.ioFormat}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getIOFormatter=function(){try{return this.options.ioFormatter}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(this.options.initValue)):this.modelControl.setData(this.options.initValue),t&&t.fireEvent&&e!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDefaultValue=function(t){try{"string"==typeof t&&(this.options.initValue=t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.checkMaxByteLength=function(t){if(-1!=this.options.maxByteLength||this._isNumberType()&&this.options.maxLength>0){if(this.options.validateOnCheckMaxByteLength){var e=this.render.value;e=this.validator.validateString(e),this.render.value=e,this.realValue=e}e=this.render.value;"all"==this.options.applyFormat&&(e=this.validator.validateString(e));var i=e;-1!=this.options.maxByteLength&&e!=(i=n.D.getStringByByteSize(e,this.options.maxByteLength,this.options.byteCheckIgnoreChar))&&(this.reFocus=!0,this._focusStatus="cancel",this.setValueNM(""),this.blur(),this.render.focus(),"all"==this.options.applyFormat?this.setValueNM(i):(this.render.value=i,this.realValue=i));var o=i.charAt(i.length-1),r=!1;if(this.options.autoFocus&&!0!==n.D.isKorean(o))if(n.D.getByteLength(i)==this.options.maxByteLength)r=!0;else if(this._isNumberType()&&this.options.maxLength>0){var l=this.options.decimalDelimiter||".",h=(e=e.toString()).split(l),d=h[0],c=h[1],u=this.options.maxLength.toString().split(l),p=u[1]?parseInt(u[1]):0,g=u[0]?parseInt(u[0]):0;c&&c.length>0?p>0&&c.length>=p&&(r=!0):d.length>0&&!p&&g>0&&d.length>=g&&(r=!0)}if(r){if("spinner"===this.options.pluginName&&this.parentControl)return void((m=n.D.getNextTabbableComp(this.parentControl.id))&&m.focus());if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var m;(m=n.D.getNextTabbableComp(this.id))&&this._keyDownStart&&m.focus()}else{var f=n.D.getGlobalFunction(s.v.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof f&&f.call(this,this.id)}}this.options.validateOnInput||!1===t||!0===n.D.isKorean(o)||n.D.getByteLength(i)!=this.options.maxByteLength||a.B.fireEvent(this,"oneditfull")}},u.prototype.handlePasteEvent=function(t){var e,i;if("paste"==t.type){var o;if(t.clipboardData)o=t.clipboardData;else{if(!window.clipboardData)return;o=window.clipboardData}if(""!=(e=o.getData("Text"))){var s=this.formatter.masking,r=this.valueType;i=void 0!==r&&null!=r&&"number"==r?WebSquare.text.unformatCurrency(s,e):void 0!==r&&null!=r&&"date"==r?WebSquare.text.unformatDate(s,e):void 0!==r&&null!=r&&"time"==r?WebSquare.text.unformatTime(s,e):WebSquare.text.unformatText(s,e),o.setData("Text",i),a.B.stopPropagation(t)}}},u.prototype.handlePasteValidator=function(t){var e="";if("paste"==t.type){var i,o;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return
;i=window.clipboardData}if(e=i.getData("Text"),"function"==typeof this._customPasteFormatter){var s=this._customPasteFormatter.call(this,e);e=s||e}if("number"==this.options.dataType){var r=this.render.value.wq_trim();"."!==r&&"-"!==r&&"+"!==r||(this.render.value="")}var n=WebSquare.text.getSelection(this.render);o="all"==this.options.applyFormat?this._getValue():this.render.value;var l=WebSquare.text.getCaretPos(this.render),h=e.length;e=o.substring(0,n.start)+e+o.substring(n.end),e=this.validator.validateString(e),this.setValueNM(e,!1),WebSquare.text.setCaretPos(this.render,l+h),a.B.preventDefault(t)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.modelControl.unbindRef(),this.options.ref="",this.refresh())}catch(t){r.w.printStackTrace(t)}},u.prototype.setPlaceholder=function(t){try{if(n.D.isNull(t))return;if(WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.hasClass("w2input_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")):this.options.placeholder="")}catch(t){r.w.printStackTrace(t)}},u.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAllowChar=function(t){try{if(n.D.isNull(t))return!1;if(this.options.allowChar!=t){var e=this._getValue();this.options.allowChar=t.wq_trim();var i=this.options.dataType;switch("bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number"),"default"==this.options.maskFormat?i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"numberMask":"textMask":"reverse"==this.options.maskFormat&&(i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"reverseNumberMask":"reverseTextMask"),this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.options.maskFormat&&this.formatter.setAllowChar(this.options.allowChar),this.validator=new d.s.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"number":case"bigDecimal":if("number"===this.options.dataType||!this.useBigDecimalFloat){""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.floatMaxlength>=0?(this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(this.floatMaxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(this.floatMaxlength)),
this.options.maxlength="-1"):this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat))}var o=this.formatter.unformat(e),s=this.validator.validateString(o);this.setValueNM(s),this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(s=WebSquare.date.getIOUnFormatDate(s,this.options.ioFormat));var a=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);return"function"==typeof a&&(s=a.call(this,s,this.getDisplayValue())),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(s)):this.modelControl.setData(s),this.noRefresh=!1,!0}}catch(t){r.w.printStackTrace(t)}return!1},u.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="";if(this.options.maskFormat)if(this.options.maskFormatModelExcludeChar)for(var i=this.options.maskFormatModelExcludeChar.split(""),o=0;o<t.length;o++){for(var s=!1,a=0;a<i.length;a++)if(t[o]==i[a]){s=!0;break}s||(e+=t[o])}else e=t;else e=t;return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.maskFormatModelUnFormat=function(t){try{if(!t)return t;var e=t;if(this.options.maskFormat&&this.options.maskFormatModelNumber&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType)&&(e=t.toString(),this.options.displayFormat&&this.options.displayFormat.indexOf(".")>0))for(var i=e.indexOf(".")<0?0:e.length-e.indexOf(".")-1,o=0;o<this.options.displayFormat.length-this.options.displayFormat.indexOf(".")-i-1;o++)0==o&&e.indexOf(".")<0&&(e=t+"."),e+="0";return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleBlurEventBasic=function(t,e){try{e=e||{};if(this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;!0!==e.skipEditEnd&&a.B.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass);var i=this._getValue(),o=!0;"all"===this.options.applyFormat&&0===Math.abs(i)&&"-"===i.charAt(0)&&(i=i.slice(1),o=!1),this._editFormat&&(o=!1),this._setValue(i,{skipNM:o});var s={value:this._oldValue};void 0===s.value&&(s.value=this.originalValue),s.value!=this._getValue()&&(a.B.fireEvent(this,"onchange",{oldValue:s.value,newValue:this._getValue()}),a.B.fireEvent(this,"onviewchange",{oldValue:s.value,newValue:this._getValue()})),a.B.fireEvent(this,"onblur",t),a.B.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),n.D.isIEAllVersion()||n.D.isOpera()||a.B.fireEvent(this,"onfocusout",t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleFocusinEvent=function(t){this.options.autoFocus&&(this._keyDownStart=!1),this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass);var e=this.render.value;"all"!=this.options.applyFormat&&(e=this.formatter.unformat(e)),e!=this.render.value&&(this.render.value=e);var i=this,o={};n.D.isIEAllVersion("11")?(o.onRestore=function(t){document.execCommand("undo",!1,null)},o.stopEvent=!0):o.onRestore=function(t){i.render.value=t.value};var s=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:s},o),this._oldValue=s,this._focusStatus="focusin"},u.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},
u.prototype.handleFocusValueEventAdv=function(t){try{if(this.options.autoFocus&&(this._keyDownStart=!1),this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2input_placeholder")),a.B.fireEvent(this,"onbeforeedit"),this.originalValue=this._getValue(),!n.D.isIEAllVersion()){var e=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{}),this._oldValue=e}this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass),this.focusStyleObj||(this.focusStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.reFocus?this.reFocus=null:"select"==this.options.editType&&this.select(),this.setFocusSize(!0),0!=this.inputEvented||this._editFormat||(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),s.v.browserCheck.android&&s.v.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this.options.maskFormat&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.D.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),this.options.validateOnInput?(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))):this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))):this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))):this.options.customPasteFormatter&&"string"==typeof this.options.customPasteFormatter&&(this._customPasteFormatter=n.D.getGlobalFunction(this.options.customPasteFormatter.wq_trim(),this.scope_id),"function"==typeof this._customPasteFormatter&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),"number"==this.options.dataType&&this.setStyle("imeMode","disabled"),this.options.preventCopyPaste&&(this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),
this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)})))));var i=this.render.value;if(this._editFormat)i=this._editValue||"",i=WebSquare.text.dynamicMask(i,this._editFormat,this._editTokens).value;else"all"!=this.options.applyFormat&&(i=this.formatter.unformat(i));i!=this.render.value&&(this.render.value=i,"select"==this.options.editType&&this.selectFlag&&(this.select(),this.selectFlag=!1)),a.B.fireEvent(this,"onfocus",t),this._focusStatus="done"}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{this.options.refSync&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||(this.options.exceptValidKeydown.indexOf(t.keyCode)>-1?a.B.preventDefault(t):a.B.stopEvent(t)),37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){this.blurHandler=!0;var o=a.B.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t))))}else if(27==e)this.blurHandler=!0;else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(9==e){var l;o=a.B.fireEvent(this,"oneditenter",t);if(this.tabOrderMoveStart=!1,!1!==o)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if("true"==this.options.nextTabByKeyDown)(l=n.D.getPreTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,l.focus()),a.B.preventDefault(t);else this.tabOrderMoveStart=!0,a.B.preventDefault(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if("true"==this.options.nextTabByKeyDown)(l=n.D.getNextTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,l.focus()),a.B.preventDefault(t);else this.tabOrderMoveStart=!0,a.B.preventDefault(t)}else if(8==e){var h;if(h=s.v.browserCheck.android&&s.v.browserVersion()>=5,"all"==this.options.applyFormat&&!h){i=this.render.value;var d=WebSquare.text.getCaretPos(this.render),c=i.substring(d-1,d),u=WebSquare.text.getSelection(this.render);if(("float"===this.options.dataType||"bigDecimal"===this.options.dataType&&this.useBigDecimalFloat||"euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&c===this.options.decimalDelimiter)a.B.preventDefault(t),this.render.value=i.slice(0,d-1)+i.slice(d,i.length),WebSquare.text.setCaretPos(this.render,this.render.value.length+1);else if(isNaN(Number(c))&&u.start==u.end){var p=i.substring(d-2,d-1);(!isNaN(Number(p))&&""!=p||this.options.maskFormat&&"text"==this.options.dataType&&""!=p&&new RegExp("["+this.options.allowChar+"]").test(p))&&new RegExp("[^"+this.options.allowChar+"]").test(c)&&(this.render.value=i.slice(0,d-2)+i.slice(d-1,i.length),WebSquare.text.setCaretPos(this.render,d-1))}}}else if(this.options.preventCopyPaste&&n.D.isOpera()){if(t.ctrlKey&&(88===t.keyCode||67===t.keyCode||86===t.keyCode))return void a.B.stopEvent(t)}else this.options.autoFocus&&(this._keyDownStart=!0);if(this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength){d=WebSquare.text.getCaretPos(this.render);var g=this._getValue();this.adjustMaxLength(this.render.value),0==d&&g.length==this.options.maxlength&&(189==e||109==e?this.render.value="-"+g:(187==e&&t.shiftKey||107==e)&&(this.render.value="+"+g)),this.adjustMaxLength(this.render.value)}
n.D.isOpera()&&this.checkMaxByteLength(!1),this.beforeEditValue=this._getValue()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleInputEvent=function(t){try{if("all"==this.options.applyFormat&&this.realValue.length-this.render.value.length==1){var e=this.realValue,i=this.render.value,o=WebSquare.text.getCaretPos(this.render);isNaN(Number(e.substring(o,o+1)))&&(this.render.value=i.slice(0,o-1)+i.slice(o,i.length),WebSquare.text.setCaretPos(this.render,o-1)),this.handleKeyupEvent({})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleInputMask=function(t){try{if(this.options.maskFormat&&"all"==this.options.applyFormat){var e,i=this.render.value,o=i,s=WebSquare.text.getCaretPos(this.render);if(t){var a=t.charCode?t.charCode:t.keyCode;e=a&&String.fromCharCode(a)||t.data}if(!e&&!(e=i[s-1]))return;"default"==this.options.maskFormat&&i.length==s&&(i=i.substr(0,s));var n=!1;if("text"==this.options.dataType&&(i=this.validator.validateKeyInput(this.render,i,t).str,o.length!==i.length&&(n=!0)),"number"==this.options.dataType||"bigDecimal"==this.options.dataType?(2==i.toString().length&&"-"==i.toString()[0]&&(i=this.formatter.executeFormat(i)),i=this.validator.validateString(i)):i=this.formatter.unformat(i),i=this.formatter.format(i,!0),"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("reverse"==this.options.maskFormat)i.substr(0,i.length-1)==o&&"0"!=e&&s==o.length&&(i="-"==i[0]?"-":"");else if("default"==this.options.maskFormat)if("-"==i[0]){if(i.substr(2,i.length-2)==o.substr(1,o.length-1)&&"0"!=e&&1==s)i="-";else if(this.options.displayFormat&&"#"==this.options.displayFormat.charAt(s-1)&&s==o.length)for(var l=1;"#"==this.options.displayFormat.charAt(s-l)&&"0"==o.charAt(s-l)&&s-l>=1;)i=i.concat("0"),l+=1}else if(i.substr(1,i.length-1)==o&&"0"!=e&&0==s)i="";else if(this.options.displayFormat&&"0"!=this.options.displayFormat.charAt(s-1)&&s==o.length){l=s-1;for(var h,d="";/[0\D]/g.test(o.charAt(l))&&"0"!=this.options.displayFormat.charAt(l)&&l>=0;)l-=1;for(h=l+=1;"0"!=this.options.displayFormat.charAt(l)&&/[0\D]/g.test(o.charAt(h))&&h<o.length&&!(this.options.displayFormat.length<l);)"#"!=this.options.displayFormat.charAt(l)&&"0"!=this.options.displayFormat.charAt(l)?(d=d.concat(this.options.displayFormat.charAt(l)),this.options.displayFormat.charAt(l)==o.charAt(h)&&(h+=1)):(d=d.concat("0"),h+=1),l+=1;for(l=d.length;/\D/g.test(d[l])&&l>=0;)l-=1;d=d.substr(0,l+1),i=i.concat(d)}if(this.render.value!=i&&(this.render.value=i),this.realValue=i,"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("default"==this.options.maskFormat)if(WebSquare.text.setCaretPos(this.render,s),/\d/g.test(e))if(s==o.length)if("0"===i[s-1])1==s||"-"==i[0]&&2==s?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s+1);else if("0"!==i[s]){for(;"0"!==i[s]&&s<=i.length;)s+=1;WebSquare.text.setCaretPos(this.render,s-1)}else"0"!=i[s]||/\d/g.test(i[s-1])?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s+1);else(/\D/g.test(i[s])||/\D/g.test(i[s-1]))&&WebSquare.text.setCaretPos(this.render,s+1);else e?"-"==e?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s-1):WebSquare.text.setCaretPos(this.render,s);else"reverse"==this.options.maskFormat&&(WebSquare.text.setCaretPos(this.render,s-(o.length-i.length)),/\d/g.test(t.data)&&s==o.length&&WebSquare.text.setCaretPos(this.render,i.length));else if("text"==this.options.dataType)if("default"==this.options.maskFormat)if(WebSquare.text.setCaretPos(this.render,s),new RegExp("["+this.options.allowChar+"]").test(e))if(s==o.length){for(;s<=i.length;)s+=1;WebSquare.text.setCaretPos(this.render,s)
}else new RegExp("[^"+this.options.allowChar+"]").test(i[s])||new RegExp("[^"+this.options.allowChar+"]").test(i[s-1])?WebSquare.text.setCaretPos(this.render,s+1):n&&i.length==this.options.displayFormat.length&&WebSquare.text.setCaretPos(this.render,s-1);else e?WebSquare.text.setCaretPos(this.render,s-1):WebSquare.text.setCaretPos(this.render,s);else"reverse"==this.options.maskFormat&&(WebSquare.text.setCaretPos(this.render,s-(o.length-i.length)),new RegExp("["+this.options.allowChar+"]").test(t.data)&&s==o.length&&WebSquare.text.setCaretPos(this.render,i.length))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleInputValidator=function(t){try{var e=this.render.value,i=this.validator.validateKeyInput(this.render,e,t);if(i.valid){if(e!==i.str){var o=WebSquare.text.getCaretPos(this.render);n.D.isIEAllVersion()||(o-=e.length-i.str.length);var s=this.render.id,l=i.str;!0===t.isComposing&&"function"==typeof requestAnimationFrame?requestAnimationFrame((function(){document.getElementById(s).value=l})):this.render.value=l,WebSquare.text.setCaretPos(this.render,o)}}else a.B.stopEvent(t);if(!this.options.maskFormat){var h="";-1!=this.options.maxByteLength?h=n.D.getStringByByteSize(this.render.value,this.options.maxByteLength,this.options.byteCheckIgnoreChar):-1!=this.options.maxLength&&this.options.maxLength.indexOf(this.options.decimalDelimiter)<0&&(h=this.render.value,"function"==typeof customModelFormatter&&(h=customModelFormatter.call(this,h)),h=(h=this.formatter.unformat(h)).split(this.options.delimiter).join(""));var d=h.charAt(h.length-1);if(h.length>0&&!0!==n.D.isKorean(d)&&(n.D.getByteLength(h)==this.options.maxByteLength||h.length==this.options.maxLength)){var c=this;setTimeout((function(){a.B.fireEvent(c,"oneditfull")}),200)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(n.D.isFF()&&t.ctrlKey&&e)return;if("all"==this.options.applyFormat&&!this.options.maskFormat&&(i=this.formatter.unformat(i),"number"===this.options.dataType)){var o=this.options.delimiter||",";-1!=i.indexOf(o)&&(i=i.split(o).join(""))}if(!this.validator.validateKeyPress(this.render,i,t)){if(this._isNumberType()&&this.options.validateOnInput&&this.floatMaxlength>0&&this.options.autoDecimalPoint){var s=!1;if(this.render.value.indexOf(this.options.decimalDelimiter)>-1&&(s=!0),!s)return}if(1==this.options.autoPopupInvalidMessage&&e>46&&!(e>=112&&e<=123)&&alert(this.options.invalidMessage),!0===n.D.getBoolean(this.options.fireEventOnInvalid)&&this.validator.obfuscator_invalidObject){var l={};l.callerId=this.validator.obfuscator_invalidObject.callerId,l.type=this.validator.obfuscator_invalidObject.getType(),l.value=this.validator.obfuscator_invalidObject.getValue(),l.detail=this.validator.obfuscator_invalidObject.getDetail(),a.B.fireEvent(this,"oninputinvalid",l)}a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=!1,o=this.render.value;if(this._isNumberType()&&this.options.autoFocus&&!1===this.options.autoDecimalPoint&&(e>=48&&e<=57||e>=96&&e<=105||o.charAt(o.length-1)==this.options.decimalDelimiter)&&this.floatMaxlength>0){o=this.formatter.unformat(o);var s=this.options.delimiter||",";if(-1!=o.indexOf(s)&&(o=o.split(s).join("")),-1==o.indexOf(this.options.decimalDelimiter))this.beforeEditValue.length==this._integerMaxLength&&(i=!0,this.tabOrderMoveStart=!0);else if(this._fractionMaxLength>0){var l=o.split(this.options.decimalDelimiter),h=(l[0],l[1]);h&&h.length>0&&h.length>=this._fractionMaxLength&&(i=!0,this.tabOrderMoveStart=!0)}}if(37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var d=this._getValue(),c=this.modelControl.getData();this.noRefresh=!0,
this.options.useMonthYearFormat&&"date"===this.options.dataType&&(d=WebSquare.date.getIOUnFormatDate(d,this.options.ioFormat));var u=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof u&&(d=u.call(this,d,this.getDisplayValue())),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(d)):this.modelControl.setData(d),this.noRefresh=!1,c!=d&&a.B.fireEvent(this,"onchange",{oldValue:c,newValue:d})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(p=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(p=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else if(9==e||i){var p;if(null!=WebSquare.tabOrder[this.id]&&"true"!=this.options.nextTabByKeyDown)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(p=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(p=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else{if("all"==this.options.applyFormat&&!this.options.maskFormat){d="";if(90==e&&t.ctrlKey){var g=WebSquare.historyManager.get(this.options.pluginName,this.id);void 0===g.value&&(g.value=""),d=g.value}else d=this.render.value;var m,f,b=WebSquare.text.getCaretPos(this.render),y=WebSquare.text.getSelection(this.render);if(m=d.length,d=this.formatter.unformat(d),this.options.autoDecimalPoint&&-1==d.indexOf(this.options.decimalDelimiter)){var v=d.split(this.options.delimiter).join("");v.length>this._integerMaxLength&&(d=v.slice(0,this._integerMaxLength)+this.options.decimalDelimiter+v.slice(this._integerMaxLength,v.length))}d=this.validator.validateString(d),d=this.formatter.format(d,!0),d=this.validator.validateString(d),f=(d=this.formatter.format(d,!0)).length,this.render.value!=d&&(this.render.value=d),this.realValue=d,y.start===y.end&&WebSquare.text.setCaretPos(this.render,Math.max(b+f-m,0))}this.checkMaxByteLength()}this.options.autoFocus&&(this._keyDownStart=!1);var w={oldValue:this.beforeEditValue,newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?a.B.fireEvent(this.parentControl,"oneditkeyup",w,t):a.B.fireEvent(this,"oneditkeyup",w,t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this._setValue(this._getValue());var e={value:this._oldValue};void 0===e.value&&(e.value=this.originalValue),e.value!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e.value,newValue:this._getValue()}),a.B.fireEvent(this,"onblur",t),this._focusStatus="init"}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleCopyEvent=function(t){try{if(this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly){var e,i=this._getValue();if(n.D.isIEAllVersion()){e=window.clipboardData;var o=this;s.v.setTimer((function(){e.setData("Text",i),s.v.clearTimer(o.id+"_handleCopyEvent")}),{key:o.id+"_handleCopyEvent",caller:o,delay:1})}else(e=t.clipboardData).setData("Text",i);a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleColorChangeEvent=function(t){try{this.modelControl.isBinded()&&this.modelControl.setData(this.render.value)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleDynamicMask=function(t){try{for(var e=this.render.selectionStart,i=0,o=0,s=this.render.value,a=e-1;a>=0;a--)0==/^[0-9a-zA-Z]/.test(s.charAt(a))&&i++;this.render.value[e-1];var n=WebSquare.text.dynamicMask(this.render.value,this._editFormat,this._editTokens)
;this.render.value=n.value,this._editValue=n.orgValue;for(a=e;a>=0;a--)0==/^[0-9a-zA-Z]/.test(n.value.charAt(a))&&o++;var l=e+(o-i);this.render===document.activeElement&&this.render.setSelectionRange(l,l)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeyDownDynamicMask=function(t){try{WebSquare.text.deleteMaskChar(t,this,this.render);var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||a.B.stopEvent(t),13==e){this.blurHandler=!0;var o=a.B.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t))))}else if(9==e){o=a.B.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeyUpDynamicMask=function(t){try{var e=t.charCode?t.charCode:t.keyCode;this.render.value;if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var i=this._getValue(),o=this.modelControl.getData();this.noRefresh=!0;var s=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof s&&(i=s.call(this,i,this.getDisplayValue())),this.modelControl.setData(i),this.noRefresh=!1,o!=i&&a.B.fireEvent(this,"onchange",{oldValue:o,newValue:i})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(l=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(l=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(9==e){var l;if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(l=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(l=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}this.options.autoFocus&&(this._keyDownStart=!1);var h={oldValue:this.modelControl.getData(),newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?a.B.fireEvent(this.parentControl,"oneditkeyup",h,t):a.B.fireEvent(this,"oneditkeyup",h,t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleBlurDynamicMask=function(t){try{this.handleBlurEventBasic(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleFocusValueEventAdvMask=function(t){try{this.handleFocusValueEventAdv(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.focus=function(t){try{this.render.focus(),"select"==this.options.editType&&this.render.select()}catch(t){r.w.printStackTrace(t)}},u.prototype.select=function(t){try{this.selectFlag=!0,this.render.select()}catch(t){r.w.printStackTrace(t)}},u.prototype.setDisabled=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t)}else this.options.disabled=t,this.setProperty("disabled",t),
(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t)}return t},u.prototype.setReadOnly=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t)}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t,null,this)}return t},u.prototype.serialize=function(){return{value:this._getValue()}},u.prototype.restore=function(t){try{this._setValue(t.value)}catch(t){return r.w.printStackTrace(t,null,this),!1}return!0},u.prototype._trim=function(t){try{var e=t+"";return this.options.trim?t=e.wq_trim():(this.options.ltrim&&(t=e.replace(/^\s+/,"")),this.options.rtrim&&(t=e.replace(/\s+$/,""))),t}catch(e){return r.w.printStackTrace(e,null,this),t}},u.prototype.setImeMode=function(t){try{this.setStyle("imeMode",t)}catch(e){return r.w.printStackTrace(e,null,this),t}},u.prototype.getFocusedComponentId=function(){try{var t=this.parentControl&&this.parentControl.options&&this.parentControl.options.pluginName;if("grid"===t||"gridView"===t)return this.parentControl.id}catch(t){r.w.printStackTrace(t,null,this)}return this.id},u.prototype._isNumberType=function(){try{var t=this.options.dataType;return!(!t||"float"!=t&&"number"!=t&&"bigDecimal"!=t&&"euro"!=t&&"tenge"!=t&&"rupee"!=t)}catch(t){r.w.printStackTrace(t,null,this)}}},7121:(t,e,i)=>{i.r(e),i.d(e,{inputCalendar:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(9304),h=i(6615),d=i(1577),c=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(c.prototype,h.s.prototype),o.x.extend(c.prototype,d.z.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.inputCalendar",pluginName:"inputCalendar",userEvents:["onfocus","onblur","onchange","oniconclick","ondateselect","onviewchange","onyearselect","onmonthselect"],systemEvents:["onclick","onkeydown","onkeyup","onkeypress"],serializable:!0,useConfig:!0,delimiter:"-",ioFormat:"",calendarDisplayFormat:"",calendarDisplayFormatFunc:"",displayFormat:"",displayFormatter:"",displayFormatFunc:"",applyFormat:"display",monthNames:"",monthNamesForYearMonthType:"",yearSuffix:"",calendarValueType:"yearMonthDate",calendarImage:"",calendarImageOver:"",calendarClass:"class1",chooseOption:!1,direction:"auto",holiday:"",holidayRef:"",validCheck:!1,dateValidCheck:"",dateValidSet:!1,dateValidSetCustom:!1,disableDateValidSet:!1,wmode:!1,readOnlyClass:"w2inputCalendar_readOnly",imageReadOnlyClass:"w2inputCalendar_img_readOnly",handleIconClick:null,pickerType:"selectbox",dynamicHeaderOrder:"month",fixPickerStatus:"default",pickerStatusRefresh:!1,setCurrentDate:!1,enabledDate:"*",disabledDate:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessageFunc:"",displaymessage:!1,keepFocusSelect:!1,innerHeight:"17px",inputReadOnly:!1,useUnlimitedYear:!0,defaultDate:"",initValue:"",cancleButtonShow:!1,cancelButtonShow:!1,footerDiv:!1,renderDiv:!0,focusOnDateSelect:!1,title:"",summary:"",caption:"",focusOnOuterDiv:!1,focusOnLastYear:!1,alt:"",renderType:"component",useYearSelect:!0,useMonthSelect:!0,useAnchor:!1,useCalendarTabIndex:!0,maxYear:2030,serverSync:!1,serverSyncType:"once",minYear:1978,weekStartsOn:0,displayDayType:"image",fixedDate:"",rightAlign:!1,outsideClickEvent:!1,skipConfirm:!1,skipConfirmOnly:!1,topLayout:!1,visibleHourList:"",visibleMinList:"",visibleSecList:"",senseReader:!1,disableBeforeToday:!1,disableAfterToday:!1,disableBeforeDate:"",disableAfterDate:"",disableBeforeAfterDate:!1,buttonTitle:"",useMonthYearFormat:!1,keepFixedDate:!1,keepInvalidDate:!1,
useButton:!1,placeholder:"",original_placeholder:"",autocomplete:"",showPlaceHolderOnReadOnly:!1,nextTabID:"",autoFocus:!1,validateRef:!1,unformatOnPaste:!1,type:"text",showToday:!0,showCalendarOnFocus:!1,visibleWeekNum:6,nextLastMonthDateSelect:!1,getValueHandler:"",setValueHandler:"",todaySelect:!1,useEditFormat:!1,dayMoveFixed:!1,validateOnInput:!1,validateOnInputMobile:!1},c.prototype.initialize=function(t){try{this.options.cancleButtonShow=this.options.cancleButtonShow||this.options.cancelButtonShow,""==this.options.alt&&(this.options.alt=l.d.getMessage("Calendar_open")),this.calendar=null,this.evented=!1,this.formatter=null,this.validator=null,this.sub_validator=null,this._setFocused=!1,this.supportPlaceholder=!1,this.supportAutocomplete=!1,this.realValue="",this._setSetting=!1;var e=this.options.calendarValueType;if(this.options.displayFormatFunc&&!this.options.displayFormat){var i=n.D.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof i&&(this.options.displayFormat=i.call(this,this.options.calendarValueType))}if(this.options.calendarDisplayFormatFunc&&!this.options.calendarDisplayFormat){var o=n.D.getGlobalFunction(this.options.calendarDisplayFormatFunc,this.scope_id);"function"==typeof o&&(this.options.calendarDisplayFormat=o.call(this,this.options.calendarValueType))}if(this.options.displayFormat||(this.options.displayFormat=s.v.getConfiguration('/WebSquare/inputCalendar/displayFormat[@valueType="'+e+'"]/@defaultValue')),this.options.calendarDisplayFormat||(this.options.calendarDisplayFormat=s.v.getConfiguration('/WebSquare/inputCalendar/calendarDisplayFormat[@valueType="'+e+'"]/@defaultValue')),this.options.ioFormat||(this.options.ioFormat=s.v.getConfiguration('/WebSquare/inputCalendar/ioFormat[@valueType="'+e+'"]/@defaultValue')),this.options.placeholder||(this.options.placeholder=s.v.getConfiguration('/WebSquare/inputCalendar/placeholder[@valueType="'+e+'"]/@defaultValue')),""===this.options.yearSuffix&&(this.options.yearSuffix="$blank"),this.options.ioFormat&&(this.options.ioFormat=this.options.ioFormat.match(/([yMdHmS]+)/g).join("")),""==this.options.delimiter){var a=this.options.displayFormat.replace(/[a-zA-Z]/g,"");a.length>0?this.options.delimiter=a.charAt(0):this.options.delimiter="-"}var h="";if("yearMonthDate"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat||(this.options.ioFormat="yyyyMMdd"),h="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat||(this.options.ioFormat="yyyyMM"),h="yyyy"+this.options.delimiter+"MM"):"yearMonthDateHour"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHH"),h="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmm"),h="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmmSS"),h="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"):"year"==this.options.calendarValueType&&(this.options.displayFormat=this.options.displayFormat||"yyyy",this.options.ioFormat||(this.options.ioFormat="yyyy"),h="yyyy"),1==this.options.useEditFormat){var c=h.replace(/[a-zA-Z]/g,"#")
;this._editFormat=c.split("||")}this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new d.s.validateInvoker(this.id,this.options),this.sub_validator=new d.s.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new d.s.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new d.s.allowCharCommand("0-9"));var u=0;if("yearMonthDate"==this.options.calendarValueType?u=8:"yearMonth"==this.options.calendarValueType?u=6:"yearMonthDateHour"==this.options.calendarValueType?u=10:"yearMonthDateTime"==this.options.calendarValueType?u=12:"yearMonthDateTimeSec"==this.options.calendarValueType?u=14:"year"==this.options.calendarValueType&&(u=4),this.invalidMessage=l.d.getMessage("IC_invalidCalendarSelect")||"날짜 형식이 잘못 되었습니다.","all"==this.options.applyFormat&&this.options.displayFormat&&(u=this.options.ioFormat.length),this.options.maxlength=u,this.options.minlength=u,this.options.autoFocus&&(this.options.maxByteLength=u),this.sub_validator.addCommand(new d.s.maxLengthCommand(u)),this.sub_validator.addCommand(new d.s.minLengthCommand(u)),!this.options.renderDiv){var p=this.options.style,g=s.v.makeStyle(p),m=[],f=[];for(var b in g)"position width height left top right bottom display visibility".indexOf(b.toLowerCase())>-1?m.push(b+":"+g[b]):f.push(b+":"+g[b]);WebSquare.cssManager.addConvertedCSS("#"+this.id+" input",f.join(";")),this.options.style=m.join(";")}this.options.validCheck&&""===this.options.dateValidCheck?this.options.dateValidCheck="true":""===this.options.dateValidCheck&&(this.options.dateValidCheck="false"),this.options.senseReader&&(this.options.renderDiv=!0,this.options.useAnchor=!1,this.options.focusOnOuterDiv=!0),this.options.placeholder&&(WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.options.original_placeholder=this.options.placeholder),this.options.autocomplete&&WebSquare.uiplugin.inputCalendar.autocomplete&&(this.supportAutocomplete=!0),this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!0),this._skipDateValidSet=!1,this._editTokens={"#":{pattern:/\d/}},this.resizeObj={width:0,height:0}}catch(t){r.w.printStackTrace(t,null,this)}},c.placeholder="string"==typeof document.createElement("input").placeholder,c.autocomplete="string"==typeof document.createElement("input").autocomplete,c.prototype.toHTML=function(){try{var t="";(this.options.inputReadOnly||this.options.showCalendarOnFocus)&&(t=" readOnly ");var e=[],i=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'",a=""==this.options.title?"":"title='"+this.options.title+"'",l=""==this.options.innerHeight?"":"style='height:"+this.options.innerHeight+"'",h=""==this.options.alt?"":"alt='"+this.options.alt+"'",d=this.options.buttonTitle?" title='"+this.options.buttonTitle+"'":"",c=""==this.options.placeholder?"":" placeholder='"+this.options.placeholder+"'",u=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",p="text"==this.options.type?"":" type ='"+this.options.type+"'",g=this.options.className?" "+this.options.className:"",m=""==this.options.calendarImage?o.x._resourceURI+"uiplugin/inputCalendar/images/icon_calendar.gif":this.options.calendarImage;if(0==this.options.renderDiv)e.push("<div id='"+this.id+"' "+i+" class='w2inputCalendar w2inputCalendar_type_"+this.options.calendarValueType+"'>"),e.push("<table class='w2inputCalendar_table'><tr>"),e.push("<td class='w2inputCalendar_col_input'><input "+l+" id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_input"+g+"' "+t+" "+p+" "+a+" "+s+" "+c+" "+u+" /></td>"),e.push("<td class='w2inputCalendar_col_img'>"),
1==this.options.useAnchor&&e.push("<a id='"+this.id+"_a' href='#' class='w2inputCalendar_a' role='button' aria-haspopup='true' aria-owns='"+this.id+"_calendar' >"),e.push("<img id='"+this.id+"_img' class='w2inputCalendar_img'"+d+" src='"+m+"' "+h+" "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?s:"")+" />"),1==this.options.useAnchor&&e.push("</a>"),e.push("</td></tr></table>"),e.push("</div>");else if(1==this.options.renderDiv){if(m=""==this.options.calendarImage?"":" style='background-image:url("+m+")'",e.push("<div id='"+this.id+"' "+i+" class='w2inputCalendar_div"+g+" w2inputCalendar_type_"+this.options.calendarValueType+"'>"),e.push("<div id='"+this.id+"_div_input' class='w2inputCalendar_div_input' >"),e.push("<input id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_divInput ' "+t+" "+p+" "+a+" "+s+" "+c+" "+u+" />"),e.push("</div>"),e.push("<div id='"+this.id+"_div_img' class='w2inputCalendar_div_img' >"),this.options.senseReader){var f=n.D.isMobile()?this.id+"_calendar_start":this.id+"_calendar";e.push("<a id='"+this.id+"_img'"+d+"role='button'"+m+"class='w2inputCalendar_button w2inputCalendar_button_native' href='#"+f+"' >"+this.options.alt+"</a>")}else e.push("<button type='button' id='"+this.id+"_img'"+d+m+" class='w2inputCalendar_button' "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?s:"tabIndex='-1'")+" >"+this.options.alt+"</button>");e.push("</div>"),e.push("</div>")}return e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSize=function(t,e){try{WebSquare.style.setSize.call(this,this.render,t,e),this.setSetting()}catch(t){r.w.printStackTrace(t)}},c.prototype.setSetting=function(){try{if(this.render&&1==this.options.renderDiv){var t,e,i=WebSquare.style.getStyle(this.render,"width"),o=WebSquare.style.getStyle(this.dom.divImg,"width");if(o=o.lastIndexOf("px")>-1?Math.ceil(1*o.wq_replaceAll("px","")):0,(i="auto"==i?"100%":i).lastIndexOf("px")>-1)s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=parseInt(i.wq_replaceAll("px",""),10)-o-s;else if(i.lastIndexOf("%")>-1){if(w=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id)){var s,a=WebSquare.style.getStyle(w,"padding-left"),l=WebSquare.style.getStyle(w,"padding-right"),h=WebSquare.style.getStyle(w,"border-left-width"),d=WebSquare.style.getStyle(w,"border-right-width");a=a.lastIndexOf("px")>-1?parseInt(a,10):0,l=l.lastIndexOf("px")>-1?parseInt(l,10):0,h=h.lastIndexOf("px")>-1?parseInt(h,10):0,d=d.lastIndexOf("px")>-1?parseInt(d,10):0,s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=(w.offsetWidth-(a+l+h+d))*parseInt(i.wq_replaceAll("%",""),10)/100-o-s}}var c=WebSquare.style.getStyle(this.dom.input,"border-right-width");c=(c=1*c.wq_replaceAll("px",""))>1?parseInt(c,10):Math.ceil(c);var u=WebSquare.style.getStyle(this.dom.input,"border-left-width");u=(u=1*u.wq_replaceAll("px",""))>1?parseInt(u,10):Math.ceil(u);var p=WebSquare.style.getStyle(this.dom.input,"border-top-width");p=(p=1*p.wq_replaceAll("px",""))>1?parseInt(p,10):Math.ceil(p);var g=WebSquare.style.getStyle(this.dom.input,"border-bottom-width");g=(g=1*g.wq_replaceAll("px",""))>1?parseInt(g,10):Math.ceil(g);var m=WebSquare.style.getStyle(this.dom.input,"padding-right");m=(m=1*m.wq_replaceAll("px",""))>1?parseInt(m,10):Math.ceil(m);var f=WebSquare.style.getStyle(this.dom.input,"padding-left");f=(f=1*f.wq_replaceAll("px",""))>1?parseInt(f,10):Math.ceil(f);var b=WebSquare.style.getStyle(this.dom.input,"padding-top");b=(b=1*b.wq_replaceAll("px",""))>1?parseInt(b,10):Math.ceil(b);var y=WebSquare.style.getStyle(this.dom.input,"padding-bottom");y=(y=1*y.wq_replaceAll("px",""))>1?parseInt(y,10):Math.ceil(y),t=i-(c+u+m+f),WebSquare.style.setStyle(this.dom.divInput,"width",Math.max(i,0)+"px"),WebSquare.style.setStyle(this.dom.input,"width",Math.max(t,0)+"px")
;var v=WebSquare.style.getStyle(this.render,"height");if((v="auto"==v?this.render.offsetHeight+"px":v).lastIndexOf("px")>-1)v=parseInt(v.wq_replaceAll("px",""),10);else if(v.lastIndexOf("%")>-1){var w;if(w=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id))v=w.offsetHeight*parseInt(v.wq_replaceAll("%",""),10)/100}e=v-(p+g+b+y),(n.D.isIE(6)||n.D.isIE(7))&&(e-=2),WebSquare.style.setStyle(this.dom.divInput,"height",Math.max(v,0)+"px"),WebSquare.style.setStyle(this.dom.input,"height",Math.max(e,0)+"px")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{if(1==this.options.renderDiv){if(this.dom.divInput=this.getElementById(this.id+"_div_input"),this.dom.divImg=this.getElementById(this.id+"_div_img"),this.scope_obj&&this.scope_obj.uuid!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var t=this;this.scope_obj.bind("onsetsize",(function(){!1===t._setSetting&&(t.setSetting(),t._setSetting=!0)}))}h.s.addCheckResize(this.uuid,"checkResize")}this.dom.input=this.getElementById(this.id+"_input"),this.dom.img=this.getElementById(this.id+"_img")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.setSetting(),this.setInputSize(),this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.useMonthYearFormat&&(t=WebSquare.date.getIOFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.options.validCheck&&(t=this.validator.validateString(t),t=this.sub_validator.validateString(t)),this.setValueNM(t)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass(this.dom.input,"w2inputCalendar_placeholder")),n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),a.B.stopPropagation(t)}))):(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0;break}e=null;var i=WebSquare.getBody().getLayerListener().layers[this.id].component,o={};i.id&&(o[i.id]=!0),WebSquare.getBody().getLayerListener().hideAll(o),a.B.stopPropagation(t)}))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent))),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showCalendar,fnHide:this._hideCalendar,event:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.options.inputReadOnly||(s.v.browserCheck.ieAllVersion?this.event.addListener(this.dom.input,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusEvent)):this.event.addListener(this.dom.input,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent))),this.options.unformatOnPaste&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),(this.options.validateOnInput||1==this.options.useEditFormat)&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),
this.options.setCurrentDate&&(this.options.useMonthYearFormat?"yearMonthDate"!=this.options.calendarValueType&&"yearMonth"!=this.options.calendarValueType&&"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType||this._setValue(WebSquare.date.getFormattedDate(new Date,this.options.ioFormat)):"yearMonthDate"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMdd")):"yearMonth"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMM")):"yearMonthDateHour"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHH")):"yearMonthDateTime"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmm")):"yearMonthDateTimeSec"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmmSS")):"year"==this.options.calendarValueType&&this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyy"))),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.options.renderDiv&&this.options.senseReader&&this.options.focusOnOuterDiv)null!=document.getElementById(this.id+"_img")&&a.B.addListener(document.getElementById(this.id+"_img"),"onclick",(function(t){a.B.preventDefault(t)}))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onComplete=function(){try{if(this.options.handleIconClick){var t=null;try{t=n.D.getGlobalFunction(this.options.handleIconClick,this.scope_id)}catch(t){$l("no function for handleIconClick : "+this.options.handleIconClick+"["+this.id+"]")}"function"==typeof t&&this.addEvent("oniconclick",t)}h.s.prototype.onComplete.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this._getValue(),e=this.modelControl.getData();if(this.options.validateRef&&""!=e&&this.options.validCheck&&!n.D.getBoolean(this.options.dateValidSet)){var i=this.validator.validate(e);if(i&&n.D.getBoolean(this.options.dateValidCheck)&&(i=this.sub_validator.validate(e)),!i)return alert(this.invalidMessage),this._setValue("",{skipValidate:!0}),void this.focus()}this.options.useMonthYearFormat&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat,this.options.calendarValueType)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&a.B.fireEvent(this,"onchange")}this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInputSize=function(){try{var t=this.getStyle("height"),e={paddingTop:parseInt(n.D.getStyleProperty(this.dom.input,"padding-top"))||0,paddingBottom:parseInt(n.D.getStyleProperty(this.dom.input,"padding-bottom"))||0,borderTopWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-top-width"))||0,borderBottomWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-bottom-width"))||0};if(t.indexOf("px")>-1&&1!=this.options.renderDiv){var i=(t=parseInt(t))-(e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth);this.dom.input.style.height=i+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSkin=function(t){try{this.options.calendarClass=t,this.calendar&&this.calendar.changeClass(this.calendar.render,"w2calendar_"+this.calendar.options.calendarClass,"w2calendar_"+t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setVerticalAlign=function(){try{if(s.v.browserCheck.ie){var t=parseInt(n.D.getStyleProperty(this.dom.input,"height"))||0;this.dom.input.style.lineHeight=t+"px"}else s.v.browserCheck.moz}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setMinYear=function(t){try{if(t&&t>0&&(this.options.minYear=t,this.calendar)){var e=this.options.maxYear;this.calendar.updateYearSelect(t,e)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setMaxYear=function(t){
try{if(t&&t<1e4&&(this.options.maxYear=t,this.calendar)){var e=this.options.minYear;this.calendar.updateYearSelect(e,t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{var e=this.options.setValueHandler;if(!e)return this._setValue(t);var i=n.D.getGlobalFunction(e,this.scope_id);if("function"==typeof i)return i.call(this,t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t,e){try{if(n.D.isNull(t))return;t=t.toString(),e&&!0===e.noFormat?this.dom.input.value=t:(t=document.activeElement==this.dom.input?t:this.formatter.format(t),this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass(this.dom.input,"w2inputCalendar_placeholder")||this.addClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=this.options.placeholder):(this.removeClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=t):this.dom.input.value=t),this.realValue=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._setValue=function(t,e){try{t=t.toString(),e&&!0===e.skipValidate||(t=this.validator.validateString(t),t=this.sub_validator.validateString(t));var i=this._getValue();if(""!=t&&this.options.validCheck&&!n.D.getBoolean(this.options.dateValidSet)){var o=this.validator.validate(t);if(o&&n.D.getBoolean(this.options.dateValidCheck)&&(o=this.sub_validator.validate(t)),!o){if(alert(this.invalidMessage),!1===this.options.keepInvalidDate&&this._setValue("",{skipValidate:!0}),!0===this.options.keepInvalidDate&&(n.D.isChrome()||n.D.isFF())){var s=this;setTimeout((function(){s._setFocused=!1,s.dom.input.focus()}),1)}else this.focus();return}}if(this.setValueNM(t,e),this.options.useMonthYearFormat&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.modelControl.setData(t),i!=this._getValue()&&a.B.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]}),i!==t){var l=this.uuid;WebSquare.historyManager.set(this.options.pluginName,this.id,{value:t},{onRestore:function(t){WebSquare.idCache[l]._setValue(t.value,{skipValidate:!0})}})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getValue=function(){try{var t=this.options.getValueHandler;if(!t)return this._getValue();var e=n.D.getGlobalFunction(t,this.scope_id);if("function"==typeof e)return e.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getValue=function(){try{var t="";return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass(this.dom.input,"w2inputCalendar_placeholder")?"":this.dom.input.value,this.formatter.unformat(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getTitle=function(){return this.dom.input.getAttribute("title")},c.prototype.makeCalendar=function(){try{var t,e=this,i=this.uuid,o=this.options.ioFormat.match(/([yMdHmS]+)/g).join(""),s=this.org_id||this.id;t="yearMonth"==this.options.calendarValueType&&this.options.monthNamesForYearMonthType?this.options.monthNamesForYearMonthType:this.options.monthNames;var n={pluginName:"calendar",className:"w2inputCalendar_calendar",calendarClass:this.options.calendarClass,monthNames:t,yearSuffix:this.options.yearSuffix,calendarValueType:this.options.calendarValueType,chooseOption:this.options.chooseOption,holiday:this.options.holiday,holidayRef:this.options.holidayRef,wmode:this.options.wmode,delimiter:this.options.delimiter,dateFormat:o,displayFormat:this.options.calendarDisplayFormat,useUnlimitedYear:this.options.useUnlimitedYear,selectUnlimitedYear:this.options.selectUnlimitedYear,cancleButtonShow:this.options.cancleButtonShow,footerDiv:this.options.footerDiv,focusOnOuterDiv:this.options.focusOnOuterDiv,renderType:this.options.renderType,mobileRenderType:this.options.mobileRenderType,summary:this.options.summary,caption:this.options.caption,
title:this.options.title+" "+l.d.getMessage("Calendar_name"),backlink:1==this.options.useAnchor?this.id+"_input":"",useYearSelect:this.options.useYearSelect,useMonthSelect:this.options.useMonthSelect,maxYear:this.options.maxYear,minYear:this.options.minYear,weekStartsOn:this.options.weekStartsOn,displayDayType:this.options.displayDayType,keepFocusSelect:this.options.keepFocusSelect,outsideClickEvent:this.options.outsideClickEvent,skipConfirm:this.options.skipConfirm,skipConfirmOnly:this.options.skipConfirmOnly,serverSync:this.options.serverSync,serverSyncType:this.options.serverSyncType,topLayout:this.options.topLayout,showToday:this.options.showToday,visibleHourList:this.options.visibleHourList,visibleMinList:this.options.visibleMinList,visibleSecList:this.options.visibleSecList,disableBeforeToday:this.options.disableBeforeToday,disableAfterToday:this.options.disableAfterToday,disableBeforeDate:this.options.disableBeforeDate,disableAfterDate:this.options.disableAfterDate,disableBeforeAfterDate:this.options.disableBeforeAfterDate,pickerType:this.options.pickerType,dynamicHeaderOrder:this.options.dynamicHeaderOrder,fixPickerStatus:this.options.fixPickerStatus,keepFixedDate:this.options.keepFixedDate,useMonthYearFormat:this.options.useMonthYearFormat,useButton:this.options.useButton,enabledDate:this.options.enabledDate,disabledDate:this.options.disabledDate,senseReader:!0===this.options.senseReader,visibleWeekNum:this.options.visibleWeekNum,nextLastMonthDateSelect:this.options.nextLastMonthDateSelect,ioFormat:this.options.ioFormat,todaySelect:this.options.todaySelect,dayMoveFixed:this.options.dayMoveFixed},h=WebSquare.controlFactory.createControl(s+"_calendar",n,null,this.scope_obj,!0,this.parentFrame);return h.options.xmlEvents=[{name:"ondateselect",action:"script",param:{handler:function(t){var i=e.options.skipConfirm||e.options.skipConfirmOnly,o="yearMonthDateHour"!=e.options.calendarValueType&&"yearMonthDateTime"!=e.options.calendarValueType&&"yearMonthDateTimeSec"!=e.options.calendarValueType;if(i||o){var s=e._getValue();e.endEdit();var r=e._getValue(),n=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());a.B.fireEvent(e,"ondateselect",this.getFormattedValue(),n),s!=r&&a.B.fireEvent(e,"onafterviewchange",{oldValue:s,newValue:r})}else{n=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());a.B.fireEvent(e,"ondateselect",this.getFormattedValue(),n)}}}},{name:"onyearselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"year"==e.options.calendarValueType&&e.endEdit();var o=WebSquare.idCache[i];a.B.fireEvent(o,"onyearselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onmonthselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"yearMonth"==e.options.calendarValueType&&e.endEdit();var o=WebSquare.idCache[i];a.B.fireEvent(o,"onmonthselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onconfirm",action:"script",param:{handler:function(t){var i=this.getFormattedValue(),o=e._getValue(),s=this.options.disableBeforeDate,r=this.options.disableAfterDate;i&&(s&&parseInt(i.substr(0,8),10)<parseInt(s.substr(0,8),10)&&(i=s+i.substring(8)),r&&parseInt(i.substr(0,8),10)>parseInt(r.substr(0,8),10)&&(i=r+i.substring(8))),e._setValue(i,{skipValidate:!0});var n=e._getValue();o!=n&&(a.B.fireEvent(e,"onconfirm"),a.B.fireEvent(e,"onviewchange",{oldValue:o,newValue:n}),a.B.fireEvent(e,"onafterviewchange",{oldValue:o,newValue:n})),e.hideCalendar(),e.dom.input.focus(),"select"==e.options.editType&&e.dom.input.select()}}},{name:"onoutsideclick",action:"script",param:{handler:function(t){var i=this.getFormattedValue();e._setValue(i,{skipValidate:!0})}}},{name:"oncancel",action:"script",param:{handler:function(t){e.hideCalendar(),(document.getElementById(e.id+"_a")||document.getElementById(e.id+"_img")).focus()}}}],
h.writeTo(WebSquare.getBody(),null,this.parentFrame),h.activate(),this.event.addListener(h.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),this.addControl(h),h}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showCalendar=function(){try{WebSquare.getBody().getLayerListener().show(this.id),"today"!=this.options.fixedDate||this.options.keepFixedDate||this.calendar.setInitValue(this._getValue()),a.B.fireEvent(this,"onafteropen")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._showCalendar=function(){try{if(this.calendar||(this.calendar=this.makeCalendar()),this.calendar){var t,e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight+5,o=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,a=parseInt(this.calendar.getStyle("width"))+parseInt(this.calendar.getStyle("border-right-width"))+parseInt(this.calendar.getStyle("border-left-width"));t="number"==typeof WebSquare.BootLoader.fullViewRatio&&1!==WebSquare.BootLoader.fullViewRatio?document.body.clientWidth||document.documentElement.clientWidth/WebSquare.BootLoader.fullViewRatio:document.documentElement.clientWidth||document.body.clientWidth,this.options.rightAlign||e+a>o+t&&(e=o+t-a-10),this.calendar.show("block",this.uuid);var n=(document.documentElement.scrollHeight||document.body.scrollHeight)-this.calendar.render.offsetHeight;i>n&&(i=n),this.options.rightAlign&&((e=e-(a-this.render.offsetWidth)-23)<0&&(e=WebSquare.style.getAbsoluteLeft(this.render)),e+a>o+(document.documentElement.clientWidth||document.body.clientWidth)&&(e=o+(document.documentElement.clientWidth||document.body.clientWidth)-a-23)),this.calendar.setPosition(e,i);var l=this.options.direction;if("auto"==l){var h=WebSquare.style.getAbsoluteTop(this.render)-s,d=document.documentElement.clientHeight-(h+this.render.offsetHeight),c=this.calendar.render.offsetHeight;d<c&&h>c&&(l="up")}"up"==l&&(i=WebSquare.style.getAbsoluteTop(this.render)-this.calendar.render.offsetHeight-5,this.calendar.setPosition(e,i)),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.calendar.render);var u=this._getValue(),p="";if(""!=u){if(this.options.serverSync&&this.calendar.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType}),"yearMonthDate"==this.options.calendarValueType)p=WebSquare.text.unformatDate(this.options.ioFormat,u);else if("yearMonth"==this.options.calendarValueType)p=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("year"==this.options.calendarValueType)p=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("yearMonthDateHour"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,u);var g=(b=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);this.calendar.gotoTime(g)}else if("yearMonthDateTime"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,u);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);var m=b.substr(2);this.calendar.gotoTime(g,m)}else if("yearMonthDateTimeSec"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,u);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2),m=b.substr(2,2);var f=b.substr(4);this.calendar.gotoTime(g,m,f)}this.calendar.gotoCalendar(p)}else if(""!==this.options.defaultDate){if(this.options.serverSync&&this.calendar.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType}),"yearMonthDateTimeSec"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),m=b.substr(2,2),f=b.substr(4);this.calendar.gotoTime(g,m,f)
}else if("yearMonthDateTime"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),m=b.substr(2);this.calendar.gotoTime(g,m)}else if("yearMonthDateHour"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);var b;g=(b=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2);this.calendar.gotoTime(g)}this.calendar.gotoCalendar(this.options.defaultDate)}else this.calendar.gotoToday();this.options.focusOnOuterDiv&&(this.options.focusOnLastYear?this.calendar.getElementById(this.calendar.id+"_last_year").focus():this.calendar.render.focus())}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hideCalendar=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._hideCalendar=function(){try{this.calendar&&(!0===this.options.pickerStatusRefresh&&this.calendar._pickerStatusRefresh(),this.calendar.hide(),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.calendar.id))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{this.calendar&&"none"!=this.calendar.getStyle("display")?this.hideCalendar():this.showCalendar()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.focus=function(){try{this._setFocused=!0,this.dom.input.focus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.blur=function(){try{this.dom.input.blur()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.select=function(){try{this.dom.input.select()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.dom.input.setAttribute("disabled","disabled"):this.dom.input.removeAttribute("disabled");break;case"readOnly":1==e?(this.addClass(this.dom.input,this.options.readOnlyClass),this.addClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.setAttribute("readonly","readonly")):(this.removeClass(this.dom.input,this.options.readOnlyClass),this.removeClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.removeAttribute("readonly"));break;case"mandatory":1==e?this.addClass(this.render,"w2inputCalendar_mandatory"):this.removeClass(this.render,"w2inputCalendar_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.disableValidate=function(t){try{if(!t||8!==t.length)return;var e=this.options.disableBeforeDate,i=this.options.disableAfterDate,o=!1;if(this.options.ioFormat&&this.options.ioFormat.length>=8&&"yyyyMMdd"!==this.options.ioFormat){var s=this.options.ioFormat;i&&(i=WebSquare.text.unformatDate(s.substr(0,8),i)),e&&(e=WebSquare.text.unformatDate(s.substr(0,8),e)),t=WebSquare.text.unformatDate(s.substr(0,8),t)}return t=parseInt(t),e=parseInt(e),i=parseInt(i),(""!==this.options.disableBeforeDate&&t<e||""!==this.options.disableAfterDate&&t>i)&&(o=!0),o}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t="";t=1==this.options.useEditFormat?this._editValue:this._getValue();var e=this.validator.validate(t);if(e&&""!=t&&(n.D.getBoolean(this.options.dateValidCheck)||n.D.getBoolean(this.options.dateValidSet))&&(e=this.sub_validator.validate(t)),0==e&&!n.D.getBoolean(this.options.dateValidSet))if(n.D.isChrome()||n.D.isFF()){var i=this;setTimeout((function(){i.focus()}),1)}else this.focus();return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},
c.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this._getValue()&&a.B.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInputReadOnly=function(t){try{return n.D.getBoolean(t)?(this.dom.input.readOnly=!0,!0):(this.dom.input.readOnly=!1,!1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{if((t=n.D.getBoolean(t))&&(this.options.placeholder||this.options.original_placeholder)){var e=this.options.placeholder||this.options.original_placeholder;this.setPlaceholder(""),this.options.original_placeholder=e}h.s.prototype.setDisabled.call(this,t);var i=this.options.userAnchor?document.getElementById(this.id+"_a"):document.getElementById(this.id+"_img");t?(this.dom.input.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled"),this.addClass(this.dom.input,"w2input_disabled"),this.addClass(this.dom.img,"w2button_disabled")):(this.dom.input.removeAttribute("disabled"),i.removeAttribute("disabled"),this.removeClass(this.dom.input,"w2input_disabled"),this.removeClass(this.dom.img,"w2button_disabled"),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder))}catch(t){r.w.printStackTrace(t)}return t},c.prototype.setReadOnly=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t),(n.D.isIE(6)||n.D.isIE(7))&&this.setInputReadOnly(!0)}else this.options.readOnly=t,this.setProperty("readOnly",t),!0===this.options.inputReadOnly?this.setInputReadOnly(!0):(n.D.isIE(6)||n.D.isIE(7))&&this.setInputReadOnly(!1),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t,null,this)}return t},c.prototype.handleClickEventDocument=function(t){try{this.event&&!this.event.isMine(t,this.render)&&this.hideCalendar()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0,"select"===this.options.editType&&e.getElement().select();break}if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_a")||e.match("w2inputCalendar_button")){if(0==a.B.fireEvent(this,"oniconclick"))continue;"native"==this.options.renderType?this.showCalendar():this.toggle(),1==this.options.useAnchor&&a.B.stopEvent(t);break}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button")){this.addClass(e.getElement(),"w2inputCalendar_img_over");var i=""==this.options.calendarImageOver?o.x._resourceURI+"uiplugin/inputCalendar/images/icon_calendar_over.gif":this.options.calendarImageOver;e.match("w2inputCalendar_button")?this.options.calendarImage&&(e.getElement().style.backgroundImage="url("+i+")"):e.getElement().src=i}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button"))if(this.removeClass(e.getElement(),"w2inputCalendar_img_over"),e.match("w2inputCalendar_button"))""===this.options.calendarImage?e.getElement().style.backgroundImage="":e.getElement().style.backgroundImage="url("+this.options.calendarImage+")";else{
var i=""==this.options.calendarImage?o.x._resourceURI+"uiplugin/inputCalendar/images/icon_calendar.gif":this.options.calendarImage;e.getElement().src=i}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusEvent=function(t){try{if(1==this.dom.input.readOnly)return this.options.showCalendarOnFocus&&(this._showCalendarOnFocus&&this.toggle(),this._showCalendarOnFocus=!0),void a.B.stopEvent(t);this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value="",this.removeClass(this.dom.input,"w2inputCalendar_placeholder")),0==this.evented&&(this.evented=!0,this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),0==this.options.useEditFormat&&this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),n.D.isMobile()&&this.options.validateOnInputMobile?this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.validateOnInputMobile)):this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent))),this.addClass(this.dom.input,"w2inputCalendar_focus");var e=this._getValue();if("all"==this.options.applyFormat)this.dom.input.value=this.formatter.format(e,!0);else if(1==this.options.useEditFormat){var i=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=i.value}else this.dom.input.value=e,0==this._setFocused&&this.select(),this._setFocused=!1;var o=this,s=WebSquare.historyManager.get(this.options.pluginName,this.id);if(n.D.getBoolean(this.options.dateValidSet)&&this.dom.input.value&&!this.validate()&&(e=s.value),this.options.disableDateValidSet){var l=this._getValue();this.disableValidate(l)||(e=l)}WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{onRestore:function(t){o._setValue(t.value,{skipValidate:!0})}}),a.B.fireEvent(this,"onfocus"),"select"===this.options.editType&&this.select()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleBlurEvent=function(t){try{this.removeClass(this.dom.input,"w2inputCalendar_focus");var e,i=WebSquare.historyManager.get(this.options.pluginName,this.id),o=this._getValue();if(e=this.parentControl&&this.parentControl.options&&("grid"===this.parentControl.options.pluginName||"gridView"===this.parentControl.options.pluginName)?o:this.validator.validateString(o),o!=(e=this.sub_validator.validateString(e))&&(1==this.options.useEditFormat?this.setValueNM(o,{noFormat:!0}):this.setValueNM(e)),this._setValue(e,{skipValidate:!0}),this.formatter.unformat(i.value)!=this._getValue()){a.B.fireEvent(this,"onchange");var s=this._getValue();a.B.fireEvent(this,"onviewchange",{oldValue:i.value,newValue:s})}if(n.D.getBoolean(this.options.dateValidSet)&&!0!==this._skipDateValidSet&&(this.validate()?this._setValue(e,{skipValidate:!0}):!0!==this.options.dateValidSetCustom&&null!=i.value&&this._setValue(i.value,{skipValidate:!0})),this.options.disableDateValidSet){var l=this._getValue();this.disableValidate(l)?null!=i.value&&this._setValue(i.value,{skipValidate:!0}):this._setValue(l,{skipValidate:!0})}this.hideCalendar(),a.B.fireEvent(this,"onblur"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleInputValidator=function(t){try{var e=this.dom.input.value;if(1==this.options.useEditFormat){for(var i=this.dom.input.selectionStart,o=0,s=0,n=i-1;n>=0;n--)0==/^[0-9a-zA-Z]/.test(e.charAt(n))&&o++;var l=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=l.value,this._editValue=l.orgValue;for(n=i;n>=0;n--)0==/^[0-9a-zA-Z]/.test(l.value.charAt(n))&&s++;var h=i+(s-o);this.dom.input===document.activeElement&&this.dom.input.setSelectionRange(h,h)}if(1==this.options.validateOnInput){
var d=this.validator.validateKeyInput(this.dom.input,e,t);if(d.valid){var c=this.sub_validator.validateKeyInput(this.dom.input,d.str,t);if(c.valid){var u=c.str,p=this.dom.input.id;!0===t.isComposing&&"function"==typeof requestAnimationFrame?requestAnimationFrame((function(){document.getElementById(p).value=u})):this.dom.input.value=u}else a.B.stopEvent(t)}else a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return;var i=0;if("all"==this.options.applyFormat&&this.options.displayFormat?i=this.options.displayFormat.length:1==this.options.useEditFormat&&(i=this._editFormat[0].length),e==t.which||null==t.which){var o=this._getValue();this.validator.validateKeyPress(this.dom.input,o,t)&&this.sub_validator.validateKeyPress(this.dom.input,o,t,i)||a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateOnInputMobile=function(t){try{var e=this.dom.input.value.length-1,i=this.dom.input.value.charCodeAt(e),o={charCode:i,keyCode:i},s=this._getValue(),a=0;"all"==this.options.applyFormat&&this.options.displayFormat?a=this.options.displayFormat.length:1==this.options.useEditFormat&&(a=this._editFormat[0].length),this.validator.validateKeyPress(this.dom.input,s,o)&&this.sub_validator.validateKeyPress(this.dom.input,s,o,a)||(this.dom.input.value=this.dom.input.value.slice(0,e))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return;if(37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e||9==e);else if(27==e)this.dom.input.value="";else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else{var i=this.dom.input.value;if("all"==this.options.applyFormat){i=this._getValue();var o,s,a=WebSquare.text.getCaretPos(this.dom.input);o=i.length,i=this.formatter.unformat(i),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),i=this.formatter.format(i,!0),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),s=(i=this.formatter.format(i,!0)).length,this.dom.input.value=i,this.realValue=i,WebSquare.text.setCaretPos(this.dom.input,a+s-o)}n.D.autoFocus(this,i)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(this.calendar&&"none"!=this.calendar.getStyle("display")){var i="dynamic"===this.options.pickerType&&("year"===this.options.calendarValueType||"yearMonth"===this.options.calendarValueType);if(37==e||38==e||39==e||40==e)a.B.preventDefault(t);else if(27==e)this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();else if(9==e&&1!=t.shiftKey){for(var o=this.event.getTargetIterator(t,this.calendar.render);o.next();){if(i&&o.match("w2calendar_picker_header_next_entity")){this.hideCalendar();break}if(0==this.options.cancleButtonShow&&o.match("w2calendar_go_today")||1==this.options.cancleButtonShow&&o.match("w2calendar_date_cancel")||"yearMonthDateTime"==this.options.calendarValueType&&o.match("w2calendar_time_cancel")){a.B.stopEvent(t),this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();break}}document.activeElement.id===this.id+"_img"&&this.hideCalendar()}else if(9==e&&1==t.shiftKey){for(o=this.event.getTargetIterator(t,this.calendar.render);o.next();){if(i&&o.match("w2calendar_picker_header_last_entity")){this.hideCalendar();break}if(o.match("w2calendar_header_last_year")){a.B.stopEvent(t),this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();break}}document.activeElement.id===this.id+"_img"&&this.hideCalendar()}}else if(13==e){for(o=this.event.getTargetIterator(t,this.render);o.next();)if(o.match("w2inputCalendar_img")){a.B.stopEvent(t),this.showCalendar();break}
}else if(9==e)for(o=this.event.getTargetIterator(t,this.render);o.next();){if(o.match("w2inputCalendar_input")||o.match("w2inputCalendar_divInput")){if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.B.preventDefault(t),s=n.D.getPreTabbableComp(this.id))return void s.focus()}else if(!1===this.options.useCalendarTabIndex)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.B.preventDefault(t),s=n.D.getNextTabbableComp(this.id))return void s.focus()}else if(o.match("w2inputCalendar_img")||o.match("w2inputCalendar_a")||o.match("w2inputCalendar_button")){var s;if(!t.shiftKey)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.B.preventDefault(t),s=n.D.getNextTabbableComp(this.id))return void s.focus()}}this.dom.input===document.activeElement&&this.options.useEditFormat&&WebSquare.text.deleteMaskChar(t,this,this.dom.input)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handlePasteEvent=function(t){var e="";if("paste"==t.type){var i,o;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}e=i.getData("Text"),n.D.getBoolean(this.options.unformatOnPaste)&&(e=(e=e.wq_trim()).replace(/[a-zA-Z]+/g,""),e=WebSquare.text.unformatDate2(this.options.displayFormat,e,this.options.ioFormat));var s=WebSquare.text.getSelection(this.dom.input);e=(o="all"==this.options.applyFormat?this._getValue():this.dom.input.value).substring(0,s.start)+e+o.substring(s.end),e=this.validator.validateString(e),e=this.sub_validator.validateString(e),"all"==this.options.applyFormat?this.setValueNM(e):this.setValueNM(e,{noFormat:!0}),a.B.preventDefault(t)}},c.prototype.setDisplayFormat=function(t){try{if(1==this.options.useEditFormat){var e=t.replace(/[a-zA-Z]/g,"#");this._editFormat=e.split("||")}this.options.displayFormat=t,this.formatter.setMasking(t),this.setValueNM(this._getValue())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDefaultDate=function(){try{return this.options.defaultDate}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDefaultDate=function(t){try{if("string"!=typeof t)return;var e=8;if("yearMonthDateTimeSec"==this.options.calendarValueType?e=14:"yearMonthDateTime"==this.options.calendarValueType?e=12:"yearMonthDateHour"==this.options.calendarValueType&&(e=10),t.length!==e)return;this.hideCalendar(),this.options.defaultDate=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getAccessibiltyId=function(){try{return this.id+"_input"}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setFormat=function(){try{if("object"==typeof arguments[0]){var t=arguments[0].ioFormat||this.options.ioFormat,e=arguments[0].displayFormat||this.options.displayFormat,i=arguments[0].displayFormatter||this.options.displayFormatter;this.options.useMonthYearFormat=arguments[0].useMonthYearFormat||this.options.useMonthYearFormat,this.options.calendarDisplayFormat=arguments[0].calendarDisplayFormat||this.options.calendarDisplayFormat}else t=arguments[0]||this.options.ioFormat,e=arguments[1]||this.options.displayFormat,i=this.options.displayFormatter;if(this.options.displayFormat=e,this.options.displayFormatter=i,1==this.options.useEditFormat){var o=e.replace(/[a-zA-Z]/g,"#");this._editFormat=o.split("||")}if(t!=this.options.ioFormat){t=t.match(/([yMdHmS]+)/g).join("");var s=this.getFormattedValue(t);if(this.options.ioFormat=t,this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),n.D.getBoolean(this.options.dateValidCheck)||n.D.getBoolean(this.options.dateValidSet)){var a=new d.s.dateCommand(this.options.ioFormat);this.sub_validator.removeCommand(a),this.sub_validator.addCommand(a)}this._setValue(s,{skipValidate:!0}),this.calendar&&(this.calendar.remove(),delete this.calendar)}else{s=this._getValue()
;this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),this.setValueNM(s)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setIoFormat=function(t,e){try{"object"==typeof t?this.setFormat(t):this.setFormat({ioFormat:t,displayFormat:e})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setCalendarValueType=function(t,e){try{if(t==this.options.calendarValueType)return!1;this.removeClass("w2inputCalendar_type_"+this.options.calendarValueType),this.addClass("w2inputCalendar_type_"+t),this.options.calendarValueType=t,(e=e||{}).ioFormat&&(e.ioFormat=e.ioFormat.match(/([yMdHmS]+)/g).join(""));var i="";if("yearMonthDate"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat=e.ioFormat||"yyyyMMdd",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat=e.ioFormat||"yyyyMM",i="yyyy"+this.options.delimiter+"MM"):"year"==t?(this.options.displayFormat=e.displayFormat||"yyyy",this.options.ioFormat=e.ioFormat||"yyyy",i="yyyy"):"yearMonthDateHour"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat=e.ioFormat||"yyyyMMddHH",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmm",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==t&&(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmmSS",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"),1==this.options.useEditFormat){var o=i.replace(/[a-zA-Z]/g,"#");this._editFormat=o.split("||")}this.calendar&&(this.calendar.remove(),delete this.calendar),this.formatter=null,this.validator=null,this.sub_validator=null,this.options.maxlength=this.options.minlength=-1,this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new d.s.validateInvoker(this.id,this.options),this.sub_validator=new d.s.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new d.s.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new d.s.allowCharCommand("0-9"));var s=0;return"yearMonthDate"==this.options.calendarValueType?s=8:"yearMonth"==this.options.calendarValueType?s=6:"year"==this.options.calendarValueType?s=4:"yearMonthDateHour"==this.options.calendarValueType?s=10:"yearMonthDateTime"==this.options.calendarValueType?s=12:"yearMonthDateTimeSec"==this.options.calendarValueType&&(s=14),"all"==this.options.applyFormat&&this.options.displayFormat&&(s=this.options.ioFormat.length),this.options.maxlength=s,this.options.minlength=s,this.sub_validator.addCommand(new d.s.maxLengthCommand(s)),this.sub_validator.addCommand(new d.s.minLengthCommand(s)),!0}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getIoFormat=function(){try{return this.options.ioFormat}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getFormattedValue=function(t){try{t=t||this.options.displayFormat;var e=this._getValue();return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2inputCalendar_placeholder")&&(e=""),WebSquare.format.createFormatter("date",t,"",this.options.ioFormat,null,null,this.scope_id,this.id).format(e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),
this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},c.prototype.setPlaceholder=function(t){try{if(n.D.isNull(t))return;WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.options.placeholder!=t&&(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder?this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.dom.input.placeholder=this.options.placeholder:this.options.placeholder="":this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?0==this.realValue.length&&(this.hasClass("w2inputCalendar_placeholder")?this.dom.input.value=this.options.placeholder:(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))):this.options.placeholder="")}catch(t){r.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype.setHolidayRef=function(t){try{t&&(this.options.holidayRef=t,this.calendar&&(this.calendar.options.holidayRef=t,this.calendar.refresh()))}catch(t){r.w.printStackTrace(t)}},c.prototype.setHoliday=function(t,e){try{t&&(this.options.holiday=e?t:this.options.holiday+" "+t),this.calendar&&(this.calendar.options.holiday=this.options.holiday,this.calendar.updateCalendar())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.removeHoliday=function(){try{this.options.holiday="",this.calendar&&(this.calendar.options.holiday="",this.calendar.updateCalendar())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.enableDate=function(t){try{this.options.enabledDate=this.options.enabledDate+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.disabledDate=this.options.disabledDate.replace(new RegExp(o,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,this.calendar.updateCalendar())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.disableDate=function(t){try{t&&(this.options.disabledDate=this.options.disabledDate+" "+t);for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.enabledDate=this.options.enabledDate.replace(new RegExp(o,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,this.calendar.updateCalendar())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.disableBeforeDate=function(t){try{t&&(this.options.disableBeforeDate=t,this.calendar&&(this.calendar.options.disableBeforeDate=t,this.calendar.updateCalendar()))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.disableAfterDate=function(t){try{t&&(this.options.disableAfterDate=t,this.calendar&&(this.calendar.options.disableAfterDate=t,this.calendar.updateCalendar()))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.enableAllDate=function(){try{this.options.disableBeforeDate="",this.options.disableAfterDate="",this.calendar&&(this.calendar.options.disableBeforeDate="",this.calendar.options.disableAfterDate="",this.calendar.updateCalendar())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.holidayRef=this.options.holidayRef,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t)}},c.prototype.setButtonTitle=function(t){try{var e=document.getElementById(this.id+"_img");null!=e&&e.setAttribute("title",t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getButtonTitle=function(){try{var t="",e=document.getElementById(this.id+"_img");return null!=e&&(t=e.getAttribute("title")),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.serialize=function(){return{value:this._getValue()}},
c.prototype.restore=function(t){try{return this._setValue(t.value,{skipValidate:!0}),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},c.prototype.setInputStyle=function(t,e){try{var i=document.getElementById(this.id+"_input");null!=i&&WebSquare.style.setStyle(i,t,e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.endEdit=function(){try{if(!this.calendar)return;var t=this.calendar.getFormattedValue(),e=this._getValue();this.toggle(),this._setValue(t,{skipValidate:!0});var i=this._getValue();e!=i&&a.B.fireEvent(this,"onviewchange",{oldValue:e,newValue:i}),this.hideCalendar(),n.D.isMobile()&&!this.options.focusOnDateSelect||(this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!1),this.dom.input.focus(),"select"==this.options.editType&&this.dom.input.select())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValueCancel=function(){try{var t=WebSquare.historyManager.get(this.options.pluginName,this.id);null!=t.value&&this._setValue(t.value,{skipValidate:!0}),this.focus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkResize=function(){try{if(!this.render)return;var t=this.render.offsetWidth,e=this.render.offsetHeight;if(t>0&&e>0)if(0==this.resizeObj.width&&0==this.resizeObj.height);else{var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.setSetting()}this.resizeObj={width:t,height:e}}catch(t){r.w.printStackTrace(t,null,this)}}},7967:(t,e,i)=>{i.r(e),i.d(e,{list:()=>d});var o=i(2981),s=i(2085),r=i(1960),a=i(3082),n=i(7275),l=i(6615),h=i(3729),d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),o.x.extend(d.prototype,h.E.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.list",pluginName:"list",userEvents:["onrowclick"],tagName:"div",sortable:!1,virtualized:!1,visibleRowNum:10,useSearch:!1,_listRowHeight:0,wheelRows:0,placeholder:"",useCloseButton:!1,selectedCellColor:"#FCA73C"},d.prototype.initialize=function(t){if(this.uniqueIdSequence=0,this.listRowInfo=WebSquare.xml.getChildren(t.parentNode,"w2:list")[0],this.listColumnInfo=WebSquare.xml.getChildren(t,"w2:listRow"),this.options.nodeset&&(this.modelDataXMLArr=WebSquare.ModelUtil.findInstanceNodes(this.options.nodeset,null,this.scope_id),this.modelControl.itemsetObj={nodeset:this.options.nodeset,label:"",value:""}),this.options.virtualized){this.options.rowHeight=21;for(var e=this.listRowInfo.style.split(";"),i=0;i<e.length;i++){var o=e[i];if(o.indexOf("height")>-1&&o.indexOf(":")>-1){var s=parseInt(o.split(":")[1].wq_trim().replaceAll("px",""));isNaN(s)||(this.options.rowHeight=s+1)}}}this.listRowObjArr=[],this.isIE67=a.D.isIEAllVersion("6 7"),this.options.useSearch&&(this.myhelper=new WebSquare.korHelper)},d.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";if(t.push("<"+this.options.tagName+" id='"+this.id+"' "+e+" class='w2list w2noselect "+this.options.className+"' tabIndex='0'>"),this.options.virtualized){var i=this.isIE67?"position:relative;height:100%;background-color:white;":"position:relative;width:100%;height:100%;box-sizing:border-box;background-color:white;",o=this.isIE67?"position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%'":"";if(t.push("<div id='"+this.id+"_main' style='"+i+"'>"),this.options.useSearch){var s="height:"+(parseInt(this.options._listRowHeight)-3)+"px;";t.push("<input id='"+this.id+"_input' name='"+this.id+"_input' style='"+s+"'class='w2list_input' placeholder='"+this.options.placeholder+"'></input>")}t.push("<div id='"+this.id+"_items_main' style='"+o+"'>")}if(this.options.nodeset){var r=this.modelDataXMLArr.length;this.options.virtualized&&(r=Math.min(this.modelDataXMLArr.length,this.options.visibleRowNum));for(var n=0;n<r;n++){var l=""==this.listRowInfo.style?"":"style='"+this.listRowInfo.style+"'";t.push("<"+this.listRowInfo.tagName+" "+l+" class='w2list_listRow "+this.listRowInfo.class+"' >");for(var h=0;h<this.listColumnInfo.length;h++){
var d=this.listColumnInfo[h],c=d.value,u=WebSquare.xml.getValue(this.modelDataXMLArr[n],d.ref);switch(""!=u&&(c=u),d.inputType){case"checkbox":var p=a.D.getBoolean(c)?'checked="checked"':"",g=""==d.style?"":" style='"+d.style+"' ";t.push("<input type='checkbox' "+p),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_checkbox "+d.class+"' >"),t.push("</input>");break;case"text":g=""==d.style?"":" style='"+d.style+"' ";t.push("<span "),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_text "+d.class+"' >"),t.push(c),t.push("</span>");break;case"button":g=""==d.style?"":" style='"+d.style+"' ";t.push("<input type='button'"),t.push(" value='"+c+"' "),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_button "+d.class+"' >"),t.push("</input>")}}t.push("</"+this.listRowInfo.tagName+">")}}return this.options.virtualized&&(t.push("</div>"),t.push("<div id='"+this.id+"_scroll_main' class='w2list_scroll_main' style='position:absolute;right:0;top:0;height:100%;padding:1px;background-color:#ccc;box-sizing:border-box;'>"),t.push("<div id='"+this.id+"_scroll_track' class='w2list_scroll_track' style='position:relative;width:100%;height:100%;background-color:#eee;box-sizing:border-box;'>"),t.push("<div id='"+this.id+"_scroll_thumb' class='w2list_scroll_thumb' style='position:absolute;width:100%;height:100%;left:1px;width:8px;background-color:#bbb;border-radius:3px'>"),t.push("</div>"),t.push("</div>"),t.push("</div>"),t.push("</div>")),t.push("</"+this.options.tagName+">"),t.join("")},d.prototype.setPreAction=function(){try{this.options.useSearch&&(this.dom.input=this.getElementById(this.id+"_input"))}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){if(this.initializeListInfo(),this.options.virtualized){var t=this.getElementById(this.id+"_items_main");this.event.addListener(t,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(t,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(t,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),a.D.isIE()?this.event.addListener(t,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)):this.event.addListener(t,"onwheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}else this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent));if(this.options.sortable&&(1==this.isMobile||this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent))),this.options.virtualized){this.adjustRender();var e=this.getElementById(this.id+"_scroll_thumb"),i=this.getElementById(this.id+"_scroll_track");this.event.addListener(e,"onmouseenter",this.event.bindAsEventListener(this,(function(t){e.style.backgroundColor="#aaa"}))),this.event.addListener(e,"onmouseleave",this.event.bindAsEventListener(this,(function(t){this.scrollStarted||(e.style.backgroundColor="#bbb")}))),this.event.addListener(e,"onmousedown",this.event.bindAsEventListener(this,(function(t){this.listRowObjArr.length>0&&(this.scrollStarted=!0,this.scrollStartMouseEvent={},this.scrollStartMouseEvent.clientY=t.clientY,this.scrollStartMouseEvent.original_top=e.offsetTop,this.scrollStartMouseEvent.max_top=e.parentElement.offsetHeight-e.offsetHeight,e.style.backgroundColor="#999")}))),this.event.addListener(i,"onclick",this.event.bindAsEventListener(this,(function(t){if(!this.scrollStarted){if((a.D.isIE()?t.srcElement:t.target)!=i)return;r.B.stopPropagation(t);var o=t.offsetY-e.offsetHeight/2;if(o<0&&(o=0),
o>e.parentElement.offsetHeight-e.offsetHeight&&(o=e.parentElement.offsetHeight-e.offsetHeight),e.offsetTop!=o){e.style.top=o+"px";var s=this.listRowObjArr.length-this.options.visibleRowNum;if(s>0){var n=(i.offsetHeight-e.offsetHeight)/s,l=Math.floor(o/n);this.setFirstRowIndex(l,!0)}else this.setFirstRowIndex(0,!0)}}}))),this.event.addListener(this.parentControl.render,"onmouseup",this.event.bindAsEventListener(this,(function(t){this.scrollStarted&&(this.scrollStarted=!1,e.style.backgroundColor="#bbb")}))),this.event.addListener(this.parentControl.render,"onmouseleave",this.event.bindAsEventListener(this,(function(t){this.scrollStarted&&(this.scrollStarted=!1,e.style.backgroundColor="#bbb")}))),this.event.addListener(this.parentControl.render,"onmousemove",this.event.bindAsEventListener(this,(function(t){if(this.scrollStarted){var o=t.clientY-this.scrollStartMouseEvent.clientY,s=this.scrollStartMouseEvent.original_top+o;if(s<0&&(s=0),s>this.scrollStartMouseEvent.max_top&&(s=this.scrollStartMouseEvent.max_top),e.offsetTop!=s){e.style.top=s+"px";var r=this.listRowObjArr.length-this.options.visibleRowNum;if(r>0){var a=(i.offsetHeight-e.offsetHeight)/r,n=Math.floor(s/a);this.setFirstRowIndex(n,!0)}else this.setFirstRowIndex(0,!0)}}})))}},d.prototype.setLayout=function(){},d.prototype.initializeListInfo=function(){try{if(this.options.nodeset){for(var t=a.D.getDataPrefix("unique_id"),e=0;e<this.modelDataXMLArr.length;e++){var i,o,r,n=this.id+"_"+this.uniqueIdSequence;WebSquare.xml.setAttribute(this.modelDataXMLArr[e],t,n),this.render.childNodes[e].setAttribute(t,n);for(var l={},h=0;h<this.listColumnInfo.length;h++)o=(i=this.listColumnInfo[h]).value,""!=(r=WebSquare.xml.getValue(this.modelDataXMLArr[e],i.ref))&&(o=r),l[i.id]=o;l[t]=n,this.listRowObjArr.push(l),this.uniqueIdSequence++}this.onListRowObjArrChanged()}}catch(t){s.w.printStackTrace(t)}},d.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=WebSquare.ModelUtil.findInstanceNodes(this.options.nodeset,null,this.scope_id);this.modelDataXMLArr=t;var e=this.listRowObjArr;this.listRowObjArr=[];for(var i=0;i<this.modelDataXMLArr.length;i++)this.listRowObjArr[i]=this.createObjByXML(this.modelDataXMLArr[i]);var o=a.D.getDataPrefix("unique_id");for(i=0;i<e.length;i++)for(var r=0;r<this.listRowObjArr.length;r++)if(e[i][o]==this.listRowObjArr[r][o]){e[i].exist=!0;break}for(i=0;i<e.length;i++)if(1!=e[i].exist){var n=this.getRenderByUniqueId(e[i][o]);n.parentNode.removeChild(n)}for(i=0;i<this.listRowObjArr.length;i++){var l=this.listRowObjArr[i],h=this.getRenderByUniqueId(l[o]);if(h){for(r=0;r<e.length;r++){var d=e[r];if(d[o]==l[o])for(var c=0;c<this.listColumnInfo.length;c++){var u=l[this.listColumnInfo[c].id];if(d[this.listColumnInfo[c].id]!=u)switch(this.listColumnInfo[c].inputType){case"checkbox":h.childNodes[c].checked=a.D.getBoolean(u);break;case"text":h.childNodes[c].innerHTML=u;break;case"button":h.childNodes[c].value=u}}}var p;for(r=0;r<this.getLength();r++){var g=this.render.childNodes[r];h.getAttribute(o)==g.getAttribute(o)&&(p=r)}this.moveRowRender(p,i)}else this.insertRowRender(i,this.listRowObjArr[i])}this.onListRowObjArrChanged()}}catch(t){s.w.printStackTrace(t)}},d.prototype.refresh=function(){},d.prototype.insertInModel=function(t,e,i){try{switch(i){case"append":var o=this.options.nodeset.split("/");o.splice(o.length-1,1);var r=o;r=r.join("/"),WebSquare.ModelUtil.setInstanceNode(e,r,null,"append");break;case"insertBeforeSibling":WebSquare.ModelUtil.setInstanceNode(e,this.options.nodeset+"["+(t+1)+"]",null,"insertBeforeSibling");break;case"appendSibling":WebSquare.ModelUtil.setInstanceNode(e,this.options.nodeset+"["+t+"]",null,"appendSibling");break;default:return}}catch(t){s.w.printStackTrace(t)}},d.prototype.removeFromModel=function(t){try{WebSquare.ModelUtil.removeInstanceNode(this.options.nodeset+"["+(t+1)+"]")}catch(t){s.w.printStackTrace(t)}},d.prototype.insertRow=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t<0)return
;if(t>o&&(t=o),this.options.nodeset){var r=this.createXMLByObj(e);0==i.length?this.insertInModel(t,r,"append"):i.length>t&&t>=0?this.insertInModel(t,r,"insertBeforeSibling"):this.insertInModel(t,r,"appendSibling")}else this.insertRowNM(t,e)}catch(t){s.w.printStackTrace(t)}},d.prototype.insertRowNM=function(t,e){try{var i=this.getLength();e[a.D.getDataPrefix("unique_id")]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++,i>t&&t>=0?this.listRowObjArr.splice(t,0,e):this.listRowObjArr.push(e),this.onListRowObjArrChanged(),this.insertRowRender(t,e)}catch(t){s.w.printStackTrace(t)}},d.prototype.insertRenderStr=function(t){try{var e,i,o=a.D.getDataPrefix("unique_id");t[o]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++,this.listRowObjArr.push(t),this.onListRowObjArrChanged();for(var r="<"+this.listRowInfo.tagName+" class='w2list_listRow "+this.listRowInfo.class+"' style='"+this.listRowInfo.style+"' "+o+"='"+t[o]+"'>",n=0;n<this.listColumnInfo.length;n++){var l=this.listColumnInfo[n].id;null!=t[l]||null!=t[l]?e=t[l]:(e=this.listColumnInfo[n].value,t[this.listColumnInfo[n].id]=this.listColumnInfo[n].value),i=this.listColumnInfo[n],r+=this.createItemNodeStr(i,e)}return r+="</"+this.listRowInfo.tagName+">"}catch(t){s.w.printStackTrace(t)}},d.prototype.insertRowRender=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t<0)return;t>o&&(t=o);var r=this.createRenderByObj(e);i.length>t&&t>=0?this.render.insertBefore(r,i[t]):this.render.appendChild(r)}catch(t){s.w.printStackTrace(t)}},d.prototype.removeRow=function(t){try{this.getChildNodes().length>t&&t>=0&&(this.options.nodeset?this.removeFromModel(t):this.removeRowNM(t))}catch(t){s.w.printStackTrace(t)}},d.prototype.removeRowNM=function(t){try{this.removeRowRender(t),this.listRowObjArr.splice(t,1),this.onListRowObjArrChanged()}catch(t){s.w.printStackTrace(t)}},d.prototype.removeRowRender=function(t){try{var e=this.options.virtualized?this.getElementById(this.id+"_items_main"):this.getElementById(this.id),i=e.children;i.length>t&&t>=0&&e.removeChild(i[t])}catch(t){s.w.printStackTrace(t)}},d.prototype.removeAll=function(){try{this.options.nodeset?WebSquare.ModelUtil.removeInstanceNodes(this.options.nodeset):(this.listRowObjArr=[],this.render.innerHTML=""),this.onListRowObjArrChanged()}catch(t){s.w.printStackTrace(t)}},d.prototype.moveRow=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t>o||e>o)return;if(t>=0&&e>=0)if(this.options.nodeset){var r=this.modelDataXMLArr[t];i.length-1>e&&e>=0?(this.removeFromModel(t),this.insertInModel(e,r,"insertBeforeSibling")):(this.removeFromModel(t),this.insertInModel(e,r,"appendSibling"))}else this.moveRowNM(t,e)}catch(t){s.w.printStackTrace(t)}},d.prototype.moveRowNM=function(t,e){try{this.moveRowRender(t,e);var i=this.listRowObjArr.splice(t,1)[0];this.listRowObjArr.splice(e,0,i),this.onListRowObjArrChanged()}catch(t){s.w.printStackTrace(t)}},d.prototype.moveRowRender=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t>o||e>o)return;if(t>=0&&e>=0){var r=i[t];if(i.length-1>e&&e>=0){var a=e>t?e+1:e;this.render.insertBefore(r,i[a])}else this.render.appendChild(r)}}catch(t){s.w.printStackTrace(t)}},d.prototype.getLength=function(){try{return this.options.virtualized?this.listRowObjArr?this.listRowObjArr.length:0:this.getChildNodes().length}catch(t){s.w.printStackTrace(t)}},d.prototype.getChildNodes=function(){try{if("dl"==this.options.tagName||this.options.useCloseButton){for(var t=[],e=0;e<this.render.childNodes.length;e++){var i=this.render.childNodes[e];"3"!=i.nodeType&&t.push(i)}return t}return this.render.getElementsByTagName(this.listRowInfo.tagName)}catch(t){s.w.printStackTrace(t)}},d.prototype.getRenderByUniqueId=function(t){try{for(var e=a.D.getDataPrefix("unique_id"),i=0;i<this.getLength();i++){var o=this.render.childNodes[i];if(o.getAttribute(e)==t)return o}}catch(t){s.w.printStackTrace(t)}},d.prototype.getCellData=function(t,e){try{var i,o=this.getLength();if("string"==typeof t||!(o>t&&t>=0))return
;"string"==typeof e?i=e:"number"==typeof e&&(i=this.listColumnInfo[e].id);var r=this.listRowObjArr[t];return r?r[i]:""}catch(t){s.w.printStackTrace(t)}},d.prototype.setCellData=function(t,e,i){try{var o,r,n,l=this.getLength();if("string"==typeof t||!(l>t&&t>=0))return;if("string"==typeof e){o=e;for(var h=0;h<this.listColumnInfo.length;h++)if(o==this.listColumnInfo[h].id){r=h;break}}else"number"==typeof e&&(r=e,o=this.listColumnInfo[e].id);if(n=this.getCellData(t,o),this.options.nodeset){var d,c;for(h=0;h<this.listColumnInfo.length;h++)if(o==(c=this.listColumnInfo[h]).id){d=c.ref;break}if(!d)return;WebSquare.ModelUtil.setInstanceValue(this.options.nodeset+"["+(t+1)+"]/"+d,i),n!==i&&this.fireOnchange()}else if(this.listRowObjArr[t][o]=i,this.options.virtualized)this.setFirstRowIndex(this.firstListIndex);else{var u=this.getChildNodes()[t],p=this.listColumnInfo[r].inputType,g=u.childNodes[r];switch(p){case"checkbox":g.checked=a.D.getBoolean(i);break;case"text":g.innerHTML=i;break;case"button":g.value=i}}}catch(t){s.w.printStackTrace(t)}},d.prototype.getRowData=function(t){try{var e=this.getLength();if("string"==typeof t||!(e>t&&t>=0))return;var i={},o=this.listRowObjArr[t],r=a.D.getDataPrefix("unique_id");for(var n in o)n!=r&&"render"!=n&&(i[n]=o[n]);return i}catch(t){s.w.printStackTrace(t)}},d.prototype.setRowData=function(t,e,i){try{var o=this.getLength();if("string"==typeof t||!(o>=t&&t>=0)||"object"!=typeof e)return;if(!i)return void(this.options.nodeset?this.insertRow(o,e):this.insertRowNM(o,e));e&&(this.options.nodeset?(this.removeRow(t),this.insertRow(t,e)):(this.removeRowNM(t),this.insertRowNM(t,e)))}catch(t){s.w.printStackTrace(t)}},d.prototype.setXML=function(t,e){null!=t||n.k.printLog("[WebSquare.uiplugin.list.setXML] XML is null["+this.id+"]")},d.prototype.setJSON=function(t,e){try{if(null==t)return void n.k.printLog("[WebSquare.uiplugin.list.setJSON] data is null["+this.id+"]");if(e&&0==t.length)return;var i,o="";if(e||(this.listRowObjArr=[],this.options.virtualized&&(this.getElementById(this.id+"_items_main").innerHTML="")),this.options.virtualized)i=e?this.listRowObjArr.length:0,this.listRowObjArr=this.listRowObjArr.concat(t),this.adjustRender(),this.setFirstRowIndex(i);else{for(var r=0;r<t.length;r++)i=e?this.getLength+r:r,this.options.nodeset?this.insertRow(i,t[r]):e?this.insertRowNM(i,t[r]):o+=this.insertRenderStr(t[r]);e||(this.render.innerHTML=o)}}catch(t){s.w.printStackTrace(t)}},d.prototype.toggleCheckbox=function(t,e){try{var i=this.getLength();if("string"==typeof t||"number"==typeof e)return;if(i>t&&t>=0){var o=a.D.getBoolean(this.getCellData(t,e));this.setCellData(t,e,!o)}}catch(t){s.w.printStackTrace(t)}},d.prototype.createItemNode=function(t,e){try{if(t){var i,o=a.D.getDataPrefix("check_id"),r=a.D.getDataPrefix("itemid");switch(t.inputType){case"checkbox":(i=document.createElement("input")).setAttribute("type","checkbox"),i.setAttribute(r,t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_checkbox "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_checkbox "+t.class),!0===(e=a.D.getBoolean(e))&&i.setAttribute("checked","checked");break;case"text":(i=document.createElement("span")).setAttribute(r,t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_text "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_text "+t.class),t.check_id&&i.setAttribute(o,t.check_id),null!=e&&null!=e&&(i.innerHTML=e.toString());break;case"button":(i=document.createElement("input")).setAttribute("type","button"),i.setAttribute(r,t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_button "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_button "+t.class),e&&i.setAttribute("value",e)}return i&&t.style&&i.setAttribute("style",t.style),i}}catch(t){s.w.printStackTrace(t)}},d.prototype.createItemNodeStr=function(t,e){try{if(t){var i;switch(t.inputType){case"checkbox":
i="<input type='checkbox' class='w2list_listColumn w2list_listColumn_checkbox "+t.class+"'' style='"+t.style+"'",!0===(e=a.D.getBoolean(e))&&(i+=" checked='checked'"),i+="/>";break;case"text":var o="w2list_listColumn_text";this.options.useCloseButton&&(o="w2list_listColumn_text_with_closeButton"),i="<span class='w2list_listColumn "+o+" "+t.class+"' style='"+t.style+"'>",null!=e&&null!=e&&(i+=WebSquare.xml.encode(e.toString())),i+="</span>",this.options.useCloseButton&&(i+="<div class='w2list_listColumn_close'></div>");break;case"button":i="<input type='button' class='w2list_listColumn w2list_listColumn_button "+t.class+"'' style='"+t.style+"'",(e=a.D.getBoolean(e))&&(i+=" value='checked'"),i+="/>"}return i}}catch(t){s.w.printStackTrace(t)}},d.prototype.getAllData=function(){try{if(this.options.virtualized)return this.listRowObjArr;for(var t=[],e=this.getLength(),i=0;i<e;i++){var o=this.getRowData(i);t.push(o)}return t}catch(t){s.w.printStackTrace(t)}},d.prototype.createXMLByObj=function(t){try{var e=this.options.nodeset.split("/"),i=e[e.length-1],o=WebSquare.xml.parse("<"+i+" />").documentElement,r=a.D.getDataPrefix("unique_id");t[r]?WebSquare.xml.setAttribute(o,r,t[r]):(WebSquare.xml.setAttribute(o,r,this.id+"_"+this.uniqueIdSequence),this.uniqueIdSequence++);for(var n=0;n<this.listColumnInfo.length;n++){var l=this.listColumnInfo[n].ref,h=l.lastIndexOf("/");if(h>0){var d=l.substring(0,h),c=l.substring(h+1);if(c.match(/[@'"()=]/i).length>0){var u=WebSquare.xml.createNode(o,d,!1);(p=t[this.listColumnInfo[n].id])||(p=this.listColumnInfo[n].value),c=c.replace(/[@'"()=]/i,""),WebSquare.xml.setAttribute(u,c,p)}else WebSquare.xml.createNode(o,l,!1)}else{var p,g=this.listColumnInfo[n].ref.replace(/[@'"()=]/i,"");(p=t[this.listColumnInfo[n].id])||(p=this.listColumnInfo[n].value),WebSquare.xml.setAttribute(o,g,p)}}return o}catch(t){s.w.printStackTrace(t)}},d.prototype.createRenderByObj=function(t,e){try{if(t){var i=a.D.getDataPrefix("unique_id"),o=a.D.getDataPrefix("check_id");t[i]||(t[i]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++);var r,n,l,h=document.createElement(this.listRowInfo.tagName);h.setAttribute("class","w2list_listRow "+this.listRowInfo.class),h.setAttribute("style",this.listRowInfo.style),this.isIE67&&(h.className="w2list_listRow "+this.listRowInfo.class,h.style.cssText=this.listRowInfo.style),h.setAttribute(i,t[i]),this.listRowInfo.check_id&&h.setAttribute(o,this.listRowInfo.check_id);for(var d=[],c=0;c<this.listColumnInfo.length;c++){var u=this.listColumnInfo[c].id;null!=t[u]||null!=t[u]?r=t[u]:(r=this.listColumnInfo[c].value,t[this.listColumnInfo[c].id]=this.listColumnInfo[c].value),l=this.listColumnInfo[c],n=this.createItemNode(l,r),d[c]=n}if(0!=d.length)for(c=0;c<d.length;c++)d[c]&&h.appendChild(d[c]);this.options.virtualized&&(h.style.backgroundColor=e?this.options.selectedCellColor:"")}return h}catch(t){s.w.printStackTrace(t)}},d.prototype.createObjByXML=function(t){try{for(var e,i,o,r={},n=0;n<this.listColumnInfo.length;n++)i=(e=this.listColumnInfo[n]).value,""!=(o=WebSquare.xml.getValue(t,e.ref))&&(i=o),r[e.id]=i;var l=a.D.getDataPrefix("unique_id");return r[l]=t.getAttribute(l),r}catch(t){s.w.printStackTrace(t)}},d.prototype.handleClickEvent=function(t){try{var e=a.D.getDataPrefix("unique_id"),i=a.D.getDataPrefix("check_id"),o=a.D.getDataPrefix("itemid");if(this.options.virtualized){for(var n,l,h,d="",c=this.getElementById(this.id+"_items_main"),u=this.event.getTargetIterator(t,this.render);u.next()&&!u.match(null,this.id)&&!u.match(null,c.id);){if(u.match("w2list_listRow")){""==d&&(d="w2list_listRow"),n=(g=u.getElement()).getAttribute(e),this.options.labelCheck&&(h=g.getAttribute(i));break}if(u.match("w2list_listColumn_checkbox"))d="w2list_listColumn_checkbox",l=(g=u.getElement()).getAttribute(o);else if(u.match("w2list_listColumn_text")){d="w2list_listColumn_text",l=(g=u.getElement()).getAttribute(o),this.options.labelCheck&&(h=g.getAttribute(i))}else if(u.match("w2list_listColumn_button")){
d="w2list_listColumn_button",l=(g=u.getElement()).getAttribute(o)}}if(u=null,""!=d&&n)for(var p=0;p<this.listRowObjArr.length;p++)if(this.listRowObjArr[p][e]==n){switch(d){case"w2list_listRow":r.B.fireEvent(this,"onrowclick",p,{target:t.target||t.srcElement}),this.options.labelCheck&&this.toggleCheckbox(p,h);break;case"w2list_listColumn_text":this.options.labelCheck&&this.toggleCheckbox(p,h);break;case"w2list_listColumn_checkbox":this.toggleCheckbox(p,l)}this.selectedIndex=p;break}this.setFirstRowIndex(this.firstListIndex,!0)}else{for(u=this.event.getTargetIterator(t,this.render);u.next()&&!u.match(null,this.id);){if(u.match("w2list_listRow")){var g=u.getElement();for(p=0;p<this.listRowObjArr.length;p++)if(this.getRenderByUniqueId(this.listRowObjArr[p][e])==g)return m=p,void r.B.fireEvent(this,"onrowclick",m,{target:t.target||t.srcElement})}if(u.match("w2list_listColumn_checkbox")){var m,f;for(g=u.getElement(),p=0;p<this.listRowObjArr.length;p++)for(var b=0;b<this.listColumnInfo.length;b++)if(this.getRenderByUniqueId(this.listRowObjArr[p][e])&&this.getRenderByUniqueId(this.listRowObjArr[p][e]).childNodes[b]==g)return m=p,f=this.listColumnInfo[b].id,void this.toggleCheckbox(m,f)}}u=null}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.fireOnchange=function(){try{r.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleMouseoverEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next()&&!e.match(null,this.id);)e.match("w2list_listRow")&&this.addClass(e.getElement(),"w2list_listRow_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleMouseoutEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next()&&!e.match(null,this.id);)e.match("w2list_listRow")&&this.removeClass(e.getElement(),"w2list_listRow_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleMousewheelEvent=function(t){try{var e;r.B.stopEvent(t),this.options.wheelRows>0?(e=r.B.getMouseWheelDelta(t),e=-1*Math.round(this.options.wheelRows*e)):e=a.D.isFF()?t.deltaY:a.D.isIEAllVersion(11)?t.deltaY/40:t.wheelDelta/-40;var i=Math.floor(e),o=this.firstListIndex+i;this.setFirstRowIndex(o)}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.handleKeydownEvent=function(t){try{if(this.options.useSearch&&this.event.isMe(t,this.dom.input)&&(this.editmode=!0,this.inputKeyDown(t,!1)),this.options.virtualized){var e=t.charCode?t.charCode:t.keyCode;if(38==e){var i=this.firstListIndex?this.firstListIndex:0;null!=this.selectedIndex?(this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=0),(this.selectedIndex<this.firstListIndex||this.selectedIndex>this.firstListIndex+(this.options.visibleRowNum-1))&&(i=this.selectedIndex)):i--,this.setFirstRowIndex(i)}else if(40==e){i=this.firstListIndex?this.firstListIndex:0;null!=this.selectedIndex?(this.selectedIndex++,this.selectedIndex>=this.listRowObjArr.length&&(this.selectedIndex=this.listRowObjArr.length-1),(this.selectedIndex<this.firstListIndex||this.selectedIndex>this.firstListIndex+(this.options.visibleRowNum-1))&&(i=this.selectedIndex-(this.options.visibleRowNum-1))):i++,this.setFirstRowIndex(i)}}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.inputKeyDown=function(t,e){},d.prototype.handleDragEvent=function(t){for(var e=this.event.getTargetIterator(t),i=a.D.getDataPrefix("unique_id");e.next();)if(e.match("w2list_listRow")){if(!this.options.sortable)return;e.getElement().style.cursor="pointer",a.D.emptySelection();for(var o,s=this.id,r=e.getElement(),n=this.getChildNodes(),l=0;l<n.length;l++)if(n[l]==r){o=l;break}var h=this;return void WebSquare.dragdrop.gDragManager.activate(t,r,{id:this.id+"_drag",className:"w2list w2list_listRow w2list_drag",contents:this.options.detachMessage||" detached item ",delay:15,detachIdx:o,detachListId:s,applyMousePosition:!0,onDrop:function(t,e,o,s,r,n,l){var d,c,u,p,g=!1,m=this.detachIdx,f=this.detachListId,b=h,y=null
;for(this.isMobile?(y=new WebSquare.targetIterator(document.elementFromPoint(l.changedTouches[0].clientX,l.changedTouches[0].clientY)),l.preventDefault()):y=h.event.getTargetIterator(l);y.next();){if(y.match("w2list_listRow")){g=!0;for(var v=(p=y.getElement()).parentNode.childNodes,w=0;w<v.length;w++)if(v[w]==p){u=w;break}}if(y.match("w2list")){g=!0,c=y.getElement().id,d=a.D.getComponentById(c);break}if(y.match(null,null,"body"))return}if(g){var S=!1;if("object"==typeof p&&"number"==typeof u||(S=!0,p=t,u=d?0==d.getLength()?0:d.getLength():0),f==c)m!=(u=S?u-1:u)&&(b.options.nodeset?b.moveRow(m,u):b.moveRowNM(m,u));else{var C=b.listRowObjArr[m];if(b.options.nodeset?b.removeRow(m):b.removeRowNM(m),delete C[i],!d)return;d.options.nodeset?d.insertRow(u,C):d.insertRowNM(u,C)}}}})}},d.prototype.getMaxItemWidth=function(t){try{var e,i,o=0;e=this.options.virtualized?document.getElementById(this.id+"_items_main"):this.render;for(var r=0;r<e.childNodes.length;r++){for(var a=0,n=e.childNodes[r],l=0;l<n.childNodes.length;l++)a+=WebSquare.style.getSize(n.childNodes[l],"width");a>o&&(o=a),i=r}if(this.options.virtualized){for(l=i;l<this.listRowObjArr.length;l++){var h=this.listRowObjArr[l].id2,d=0;h&&(d=WebSquare.util.getWidth(h)),d>o&&(o=d)}var c=e.getElementsByTagName("input")[0];if(c&&"checkbox"===c.type){var u=WebSquare.style.getSize(c,"outerMarginWidth");u>0&&(o+=u)}return o}return o+10}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.setFirstRowIndex=function(t,e){try{t=Math.max(0,Math.min(this.listRowObjArr.length-this.options.visibleRowNum,t)),this.firstListIndex=t;var i=this.getAllData();if(i.length>0){e||this.adjustScrollYThumb(t);for(var o=0;o<Math.min(this.options.visibleRowNum,this.listRowObjArr.length);o++){if(this.fastDrawRawData(o,t+o),this.isIE67)this.getElementById(this.id+"_items_main").getElementsByTagName("input")[o].checked=i[o].id1}}}catch(t){s.w.printStackTrace(t,null,this)}},d.prototype.adjustRender=function(){var t=this.options.rowHeight,e=this.options.useSearch?1:0;this.render.style.height=t*(Math.min(this.listRowObjArr.length,this.options.visibleRowNum)+e)+"px";var i=this.getElementById(this.id+"_main"),o=this.getElementById(this.id+"_scroll_main"),s=this.listRowObjArr.length>this.options.visibleRowNum;if(i&&o){var r=12;s?(r=12,i.style.paddingRight=this.isIE67?"0":"12px",o.style.width=r+"px",o.style.display="block"):(r=0,i.style.paddingRight="0",o.style.width=r+"px",o.style.display="none"),this.options.useSearch}this.onListRowObjArrChanged()},d.prototype.adjustScrollYThumb=function(t){if(this.options.virtualized){var e=this.getElementById(this.id+"_scroll_thumb"),i=this.getElementById(this.id+"_scroll_track"),o=this.listRowObjArr.length-this.options.visibleRowNum;if(t>o)e.style.top=i.offsetHeight-i.offsetHeight+"px";else{var s=(i.offsetHeight-e.offsetHeight)/o;isNaN(s)&&(s=0),e.style.top=t*s+"px"}}},d.prototype.fastDrawRawData=function(t,e){var i,o=this.getElementById(this.id+"_items_main");if(o.children.length>t){var s=a.D.getDataPrefix("unique_id"),r=o.children[t];this.selectedIndex===e?r.style.backgroundColor=this.options.selectedCellColor:r.style.backgroundColor="";var n=this.listRowObjArr[e];n[s]||(n[s]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++),o.children[t].setAttribute(s,n[s]);for(var l=0;l<this.listColumnInfo.length;l++){var h=this.listColumnInfo[l].id;null!=n[h]||null!=n[h]?(i=n[h],this.options.virtualized&&"id2"==h&&(i=n.formattedValue||i)):(i=this.listColumnInfo[l].value,n[this.listColumnInfo[l].id]=this.listColumnInfo[l].value);var d=this.listColumnInfo[l];this.updateItemNode(d,i,t,l)}}else{var c=this.createRenderByObj(this.listRowObjArr[e],this.selectedIndex===e);o.appendChild(c)}},d.prototype.updateItemNode=function(t,e,i,o){try{if(t){var r=this.getElementById(this.id+"_items_main").children[i].children[o];switch(t.inputType){case"checkbox":e=a.D.getBoolean(e),r.checked=!0===e;break;case"text":null!=e&&null!=e&&(r.innerHTML=e.toString());break;case"button":
e&&r.setAttribute("value",e)}}}catch(t){s.w.printStackTrace(t)}},d.prototype.saveState=function(t){try{if(null==t)return;t=t.toString(),this.state||(this.state={}),this.state[t]={selectedIndex:this.selectedIndex,firstListIndex:this.firstListIndex}}catch(t){s.w.printStackTrace(t)}},d.prototype.loadState=function(t){try{if(null==t)return;t=t.toString(),this.state||(this.state={}),this.state[t]?(this.selectedIndex=this.state[t].selectedIndex,this.firstListIndex=this.state[t].firstListIndex):(this.selectedIndex=void 0,this.firstListIndex=0),this.setFirstRowIndex(this.firstListIndex)}catch(t){s.w.printStackTrace(t)}},d.prototype.onListRowObjArrChanged=function(){try{if(this.options.virtualized){var t=this.getElementById(this.id+"_scroll_thumb"),e=this.getElementById(this.id+"_scroll_track");if(this.options.visibleRowNum>=this.listRowObjArr.length)t.style.height="100%";else{var i=e.offsetHeight*(this.options.visibleRowNum/this.listRowObjArr.length);i<28&&(i=28),i=i.toString()+"px",t.style.height=i}}}catch(t){s.w.printStackTrace(t)}},d.prototype.setCellDataNM=function(t,e,i){try{var o,r,n=this.getLength();if("string"==typeof t||!(n>t&&t>=0))return;if("string"==typeof e){o=e;for(var l=0;l<this.listColumnInfo.length;l++)if(o==this.listColumnInfo[l].id){r=l;break}}else"number"==typeof e&&(r=e,o=this.listColumnInfo[e].id);if(this.options.virtualized){if(this.getElementById(this.id+"_items_main").children.length>t&&this.updateItemNode(this.listColumnInfo[r],i,t,r),"id2"==e&&this.listRowObjArr&&this.listRowObjArr[t])i!=this.listRowObjArr[t][e]&&(this.listRowObjArr[t].formattedValue=i)}else{var h=this.getChildNodes()[t],d=this.listColumnInfo[r].inputType,c=h.childNodes[r];switch(d){case"checkbox":c.checked=a.D.getBoolean(i);break;case"text":c.innerHTML=i;break;case"button":c.value=i}}}catch(t){s.w.printStackTrace(t)}}},3708:(t,e,i)=>{i.r(e),i.d(e,{output:()=>l});var o=i(2981),s=i(2085),r=i(3082),a=i(6615),n=i(7716),l=function(t,e,i){a.s.call(this,t,e,i);var o,s=["div","label","h1","h2","h3","h4","h5","h6"];for(this.options.tagname=""!=this.options.for?"label":this.options.tagname,o=0;o<s.length&&s[o]!=this.options.tagname;o++);o>=s.length&&(this.options.tagname=s[0])};o.x.extend(l.prototype,a.s.prototype),o.x.extend(l.prototype,n.g.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.output",pluginName:"output",useConfig:!0,userEvents:[],systemEvents:["onfocus","onblur","onclick","ondblclick","onmouseup","onmousedown","onmouseout","onmouseover","onmousemove"],label:"",ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",localeRef:"",useLocale:!1,escape:!0,escapeFormatter:"",for:"",tagname:"div",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:""},l.prototype.initialize=function(t){try{if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,
this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}if(this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.label=e.value,this.escapeLabel=e.value)}this.useEscapeFormatter=!1}catch(t){s.w.printStackTrace(t,null,this)}},l.htmlStr=["<",null," id='",null,"'",null," class='w2output ",null,"'",null,">",null,"</",null,">"],l.prototype.toHTML=function(){try{if(null!=this.scope_obj&&this.scope_obj.id&&this.options.for){var t=r.D.getComponentById(this.options.for,this.scope_obj.id);null!=t&&(this.options.for=t.id)}var e=WebSquare.uiplugin.output.htmlStr,i="";return this.options.escapeFormatter||(i=this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label)):this.formatter.format(this.options.label)),e[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":" style ='"+this.options.style+"'",e[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",e[7]=this.options.className,e[9]="label"==this.options.tagname?" for='"+this.options.for+"'":"",e[11]=i,e[13]=this.options.tagname,e.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}if(this.displayLocaleValue(),"label"!=this.options.tagname||""==this.options.for)return;var e=r.D.getComponentById(this.options.for)||null;if(null==e)return;var i="function"==typeof e.getAccessibiltyId?e.getAccessibiltyId():this.options.for;this.render.setAttribute("for",i)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onComplete=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=r.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id);this.options.escapeFormatter=t,"function"==typeof t&&(this.useEscapeFormatter=!0)}}catch(t){s.w.printStackTrace(t,null,this)}this.setValueNM(this.options.label)}a.s.prototype.onComplete.call(this)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setVerticalAlign=function(){try{var t="top",e=this.options.style.toLowerCase();if(e.match(/vertical-align[\s]*:[\s]*middle/)?t="middle":e.match(/vertical-align[\s]*:[\s]*bottom/)&&(t="bottom"),"top"==t);else{var i=this.getStyle("height");if(i.indexOf("px")>-1){i=parseInt(i);var o=parseInt(this.getStyle("padding-top"))||0,r=parseInt(this.getStyle("font-size"))||0,a=0;"middle"==t?a=Math.floor((i-r)/2):"bottom"==t&&(a=Math.floor(i-r)),a+o>0&&i-a>0&&(this.setStyle("paddingTop",a+o+"px"),this.setStyle("height",i-a+"px"))}}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setValueNM(t),this.modelControl.setData(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue1=function(t){try{this.setValue(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValueNM=function(t){try{if(r.D.isNull(t))return;t=t.toString(),this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.escapeLabel=t,this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setWidth=function(t){try{isNaN(parseInt(t))||(this.render.style.width=t+"px")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setHeight=function(t){try{t=parseInt(t,10),isNaN(t)||(this.render.style.height=t+"px")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setBackgroundImage=function(t){try{
this.render.style.backgroundImage=void 0===t||null==t||""==t?"":this.getImageURL(t,!0)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getFormatValue=function(){try{return this.formatter.format(this.escapeLabel)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getLabel=function(){try{return this.getValue()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.formatter.format(this.escapeLabel)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?(this.addClass(this.render,"w2output_disabled"),this.setStyle("color","#c0c0c0")):(this.removeClass(this.render,"w2output_disabled"),this.setStyle("color",""))}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getRawValue=function(){try{return this.options.label}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValueNM(this.options.label)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){s.w.printStackTrace(t)}},l.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){s.w.printStackTrace(t)}}},9248:(t,e,i)=>{i.r(e),i.d(e,{pageList:()=>l});var o=i(2981),s=i(2085),r=i(1960),a=i(3082),n=i(6615),l=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.pageList",pluginName:"pageList",userEvents:["onclick","onchange","onviewchange","oninputblur"],useConfig:!0,defaultClass:"w2pageList_label",selectedStyle:"",selectedClass:"w2pageList_label_selected",displayFormat:"#",useDelim:!1,delimiter:"",pageSize:10,pagingType:"1",buttonShowType:"1",naviType:"config",nativeTooltip:!0,leftPageBackImage:"",leftPageImage:"",rightPageImage:"",rightPageBackImage:"",deliImage:"",leftPageBackImageClass:"w2pageList_col_prevPage",leftPageImageClass:"w2pageList_col_prev",rightPageImageClass:"w2pageList_col_next",rightPageBackImageClass:"w2pageList_col_nextPage",deliImageClass:"w2pageList_delimiter",leftPageBackImageStyle:"",leftPageImageStyle:"",rightPageImageStyle:"",rightPageBackImageStyle:"",deliImageStyle:"",indexWidth:-1,deliWidth:-1,shiftMoveButtonWidth:-1,oneMoveButtonWidth:-1,renderType:"table",href:"",displayButtonType:"display",displaySearchbox:!1,displaySelectedIndex:!1},l.prototype.initialize=function(t){try{this.pageCount=0,1==this.options.displaySearchbox?(this.displayIndex=0,this.selectedIndex=0):(this.displayIndex=1,this.selectedIndex=-1),"nativelist"==this.options.renderType||"list"==this.options.renderType?(this.default_leftPageBackImage=o.x._resourceURI+"uiplugin/pageList/images/b_first.png",this.default_leftPageImage=o.x._resourceURI+"uiplugin/pageList/images/b_prev.png",this.default_rightPageImage=o.x._resourceURI+"uiplugin/pageList/images/b_next.png",this.default_rightPageBackImage=o.x._resourceURI+"uiplugin/pageList/images/b_end.png",this.options.leftPageImageClass="w2pageList_col_prev_li",this.options.rightPageImageClass="w2pageList_col_next_li",this.options.rightPageBackImageClass="w2pageList_col_nextPage_li",
this.options.leftPageBackImageClass="w2pageList_col_prevPage_li"):(this.default_leftPageBackImage=o.x._resourceURI+"uiplugin/pageList/images/b_first.gif",this.default_leftPageImage=o.x._resourceURI+"uiplugin/pageList/images/b_prev.gif",this.default_rightPageImage=o.x._resourceURI+"uiplugin/pageList/images/b_next.gif",this.default_rightPageBackImage=o.x._resourceURI+"uiplugin/pageList/images/b_end.gif"),this.options=WebSquare.cssManager.styleToClass(this.id,this.options),this.options.leftPageBackImage=this.options.leftPageBackImage?this.options.leftPageBackImage:this.default_leftPageBackImage,this.options.leftPageImage=this.options.leftPageImage?this.options.leftPageImage:this.default_leftPageImage,this.options.rightPageImage=this.options.rightPageImage?this.options.rightPageImage:this.default_rightPageImage,this.options.rightPageBackImage=this.options.rightPageBackImage?this.options.rightPageBackImage:this.default_rightPageBackImage,this.labelStyle="",-1!=this.options.indexWidth&&(this.labelStyle+="width:"+this.options.indexWidth+"px;"),-1!=this.options.deliWidth&&(this.options.deliImageStyle+=";width:"+this.options.deliWidth+"px;"),-1!=this.options.shiftMoveButtonWidth&&(this.options.leftPageBackImageStyle+=";width:"+this.options.shiftMoveButtonWidth+"px;",this.options.rightPageBackImageStyle+=";width:"+this.options.shiftMoveButtonWidth+"px;"),-1!=this.options.oneMoveButtonWidth&&(this.options.leftPageImageStyle+=";width:"+this.options.oneMoveButtonWidth+"px;",this.options.rightPageImageStyle+=";width:"+this.options.oneMoveButtonWidth+"px;"),""!=this.options.deliImage&&(this.options.deliImageStyle+=";background-image:url("+this.options.deliImage+");"),"list"==this.options.renderType?(this.options.leftPageBackImageStyle+="background-image:none;",this.options.leftPageImageStyle+="background-image:none;",this.options.rightPageImageStyle+="background-image:none;",this.options.rightPageBackImageStyle+="background-image:none;"):(this.options.leftPageBackImage!=this.default_leftPageBackImage&&(this.options.leftPageBackImageStyle+=";background-image:url("+this.options.leftPageBackImage+");"),this.options.leftPageImage!=this.default_leftPageImage&&(this.options.leftPageImageStyle+=";background-image:url("+this.options.leftPageImage+");"),this.options.rightPageImage!=this.default_rightPageImage&&(this.options.rightPageImageStyle+=";background-image:url("+this.options.rightPageImage+");"),this.options.rightPageBackImage!=this.default_rightPageBackImage&&(this.options.rightPageBackImageStyle+=";background-image:url("+this.options.rightPageBackImage+");")),"3"==this.options.buttonShowType&&(this.options.pagingType="2")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=[],e=a.D.getDataPrefix("index"),i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'",r=""==this.options.href?"":"href='"+this.options.href+"'",n=""==this.options.leftPageImageStyle?"":"style='"+this.options.leftPageImageStyle+"'",l=""==this.options.leftPageBackImageStyle?"":"style='"+this.options.leftPageBackImageStyle+"'",h=""==this.options.leftPageImage?"":"src='"+this.options.leftPageImage+"'",d=""==this.options.leftPageBackImage?"":"src='"+this.options.leftPageBackImage+"'",c=""==this.options.rightPageImageStyle?"":"style='"+this.options.rightPageImageStyle+"'",u=""==this.options.rightPageBackImageStyle?"":"style='"+this.options.rightPageBackImageStyle+"'",p=""==this.options.rightPageImage?"":"src='"+this.options.rightPageImage+"'",g=""==this.options.rightPageBackImage?"":"src='"+this.options.rightPageBackImage+"'",m=""==this.labelStyle?"":"style='"+this.labelStyle+"'",f=""==this.options.deliImageStyle?"":"style='"+this.options.deliImageStyle+"'";this.prevPageButtonId=this.id+"_prevPage_btn",this.nextPageButtonId=this.id+"_nextPage_btn",this.prevButtonId=this.id+"_prev_btn",this.nextButtonId=this.id+"_next_btn"
;var b,y=a.D.getBoolean(this.options.displaySearchbox);if(t.push("<div id='"+this.id+"' "+i+" class='w2pageList w2pageList_pagePrev_last w2pageList_prev_last "+this.options.className+"'>"),"list"==this.options.renderType){t.push("<ul class='w2pageList_ul'>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_previousList_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+l+"><a href=#"+this.prevPageButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+d+" alt='"+WebSquare.language.getMessage("pagelist_previousList_page")+"'/></a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_first_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+l+"><a href=#"+this.prevPageButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+d+" alt='"+WebSquare.language.getMessage("Pagelist_first_page")+"'/></a></li>")):(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+l+"><a href=#"+this.prevPageButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+d+" alt='"+WebSquare.language.getMessage("Pagelist_previous_page")+"'/></a></li>")),"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<li id='"+this.prevButtonId+"' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+n+"><a href=#"+this.prevButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+h+" alt='"+WebSquare.language.getMessage("Pagelist_previous_page")+"'/></a></li>"));var v=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1);if(y)t.push("<li class='w2pageList_li_label' "+m+"><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></li>");else for(var w=this.displayIndex;w<=v;w++)b=this.options.nativeTooltip?this.getLabel(w):"",this.options.href?t.push("<li class='w2pageList_li_label' "+m+"><a id='"+this.id+"_page_"+w+"' "+r+" class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+w+"' role='button' aria-pressed='false' title='"+b+"'>"+this.getLabel(w)+"</a></li>"):t.push("<li class='w2pageList_li_label' "+m+"><a id='"+this.id+"_page_"+w+"' href=#"+this.id+"_page_"+w+" class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+w+"' role='button' aria-pressed='false'  title='"+b+"'>"+this.getLabel(w)+"</a></li>"),1==this.options.useDelim&&w<v&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+f+">"+this.options.delimiter+"</li>");"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextButtonId+"' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+c+"><a href=#"+this.nextButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+p+" alt='"+WebSquare.language.getMessage("Pagelist_next_page")+"'/></a></li>")),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_nextList_page"):"",
t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+"><a href=#"+this.nextPageButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+g+" alt='"+WebSquare.language.getMessage("pagelist_nextList_page")+"'/></a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_last_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+"'><a href=#"+this.nextPageButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+g+" alt='"+WebSquare.language.getMessage("Pagelist_last_page")+"'/></a></li>")):(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+"'><a href=#"+this.nextPageButtonId+" role='button' aria-pressed='false' title='"+b+"'><img "+g+" alt='"+WebSquare.language.getMessage("Pagelist_next_page")+"'/></a></li>")),t.push("</ul>")}else if("nativelist"==this.options.renderType){t.push("<ul class='w2pageList_ul_native'>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_previousList_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"_native' "+l+"><a href = javascript:void(null);>"+b+"</a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_first_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"_native' "+l+"><a href = javascript:void(null);>"+b+"</a></li>")):(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"_native' "+l+"><a href = javascript:void(null);>"+b+"</a></li>")),"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<li id='"+this.prevButtonId+"' class='w2pageList_control_prev "+this.options.leftPageImageClass+"_native' "+n+"><a href = javascript:void(null);>"+b+"</a></li>"));v=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1);if(y)t.push("<li class='w2pageList_li_label' "+m+"><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></li>");else for(w=this.displayIndex;w<=v;w++)b=this.options.nativeTooltip?this.getLabel(w):"",this.options.href?t.push("<li class='w2pageList_li_label' "+m+"><a id='"+this.id+"_page_"+w+"' "+r+" class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+w+"' role='button' aria-pressed='false' title='"+b+"'>"+this.getLabel(w)+"</a></li>"):t.push("<li class='w2pageList_li_label' "+m+"><a id='"+this.id+"_page_"+w+"' href= javascript:void(null) class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+w+"' role='button' aria-pressed='false'  title='"+b+"'>"+this.getLabel(w)+"</a></li>"),1==this.options.useDelim&&w<v&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+f+">"+this.options.delimiter+"</li>")
;"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextButtonId+"' class='w2pageList_control_next "+this.options.rightPageImageClass+"_native' "+c+"><a href = javascript:void(null);>"+b+"</a></li>")),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_nextList_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"_native' "+u+"><a href = javascript:void(null);>"+b+"</a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_last_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"_native' "+u+"'><a href = javascript:void(null);>"+b+"</a></li>")):(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"_native' "+u+"'><a href = javascript:void(null);>"+b+"</a></li>")),t.push("</ul>")}else{t.push("<table class='w2pageList_table'><tr>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_previousList_page"):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+l+" role='button' aria-pressed='false' "+o+" title='"+b+"'></td>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_first_page"):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+l+" role='button' aria-pressed='false' "+o+" title='"+b+"'></td>")):(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+l+" role='button' aria-pressed='false' "+o+" title='"+b+"'></td>")),"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<td id='"+this.prevButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+n+" role='button' aria-pressed='false' "+o+" title='"+b+"'></td>"));v=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1);if(y)t.push("<td class='w2pageList_col_label_input' "+m+"><div><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></div></td>");else for(w=this.displayIndex;w<=v;w++)b=this.options.nativeTooltip?this.getLabel(w):"",t.push("<td class='w2pageList_col_label' "+m+"><div id='"+this.id+"_page_"+w+"' class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+w+"' role='button' aria-pressed='false'  "+o+" title='"+b+"'>"+this.getLabel(w)+"</div></td>"),1==this.options.useDelim&&w<v&&t.push("<td class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+f+">"+this.options.delimiter+"</td>")
;"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<td id='"+this.nextButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+c+" "+o+" title='"+b+"'></td>")),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_nextList_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+" "+o+" title='"+b+"'></td>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(b=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_last_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+" "+o+" title='"+b+"'></td>")):(b=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_next_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+" "+o+" title='"+b+"'></td>")),t.push("</tr></table>")}return t.push("</div>"),t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{if(13!=(t.charCode?t.charCode:t.keyCode))return;var e=t.srcElement||t.target;"a"==e.nodeName.toLowerCase()?null==e.getAttribute("href")&&this.handleClickEvent(t):this.handleClickEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getLabel=function(t){try{return WebSquare.text.formatCurrency(t,this.options.displayFormat)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getCount=function(){try{return this.pageCount}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setCount=function(t,e){try{var i=e||!1;if(e&&t<this.selectedIndex&&($l("range exception for "+this.id),i=!1),this.options.displaySearchbox)var o=parseInt(t,10)||0;else o="string"==typeof t?parseInt(t,10)||0:t;this.pageCount=o,(0==i||this.selectedIndex<1)&&(this.displayIndex=1),this.redraw(),0==i||this.selectedIndex<1?this.setSelectedIndex(1):this.setSelectedIndex(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setSelectedIndex=function(t){try{if(0==this.pageCount){if("auto"==this.options.displayButtonType||"autoOver"==this.options.displayButtonType){var e=document.getElementById(this.prevPageButtonId),i=document.getElementById(this.prevButtonId),o=document.getElementById(this.nextButtonId),n=document.getElementById(this.nextPageButtonId);e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden")}return}if(a.D.isNull(t))return;if((t=parseInt(t,10))<1||t>this.pageCount||isNaN(t))return void $l("range exception for "+this.id);var l=this.selectedIndex;this.setDisplayIndex(t);var h=document.getElementById(this.id+"_page_"+this.selectedIndex);h&&(this.changeClass(h,this.options.selectedClass,this.options.defaultClass),h.removeAttribute("title"),h.setAttribute("aira-pressed",!1)),this.selectedIndex=t,this.changeButtonCursor(t);var d=document.getElementById(this.id+"_page_"+t);d&&(this.changeClass(d,this.options.defaultClass,this.options.selectedClass),
d.setAttribute("title",WebSquare.language.getMessage("Pagelist_selected",d.textContent||d.innerText)),d.setAttribute("aria-pressed",!0)),l>0&&l!=this.selectedIndex&&r.B.fireEvent(this,"onchange",this.selectedIndex,l);var c=this.options.displayButtonType,u=this.options.pagingType;if("display"!=c){e=document.getElementById(this.prevPageButtonId),i=document.getElementById(this.prevButtonId),o=document.getElementById(this.nextButtonId),n=document.getElementById(this.nextPageButtonId);var p=!1,g=!1,m=!1;if("auto"==c||"autoOver"==c||"autoHidden"==c){if("autoHidden"==c){if("4"==this.options.buttonShowType)1==this.selectedIndex?g=!0:this.selectedIndex==this.pageCount&&(p=!0);else if(this.options.pageSize>=this.pageCount)m=!0;else if("1"==u){var f=this.pageCount-this.options.pageSize+1;this.selectedIndex<=this.options.pageSize&&this.selectedIndex<f?g=!0:this.selectedIndex>=f&&(p=!0)}else if("2"==u){var b;b=0==parseInt(this.pageCount%this.options.pageSize)?this.pageCount-this.options.pageSize+1:this.pageCount-parseInt(this.pageCount%this.options.pageSize)+1,this.selectedIndex<=this.options.pageSize?g=!0:this.selectedIndex>=b&&(p=!0)}}else 1===this.selectedIndex?g=!0:this.selectedIndex==this.pageCount&&(p=!0);g?(e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="visible"),n&&(n.style.visibility="visible")):p?(e&&(e.style.visibility="visible"),i&&(i.style.visibility="visible"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden")):m?(e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden")):(e&&(e.style.visibility="visible"),i&&(i.style.visibility="visible"),o&&(o.style.visibility="visible"),n&&(n.style.visibility="visible"))}("displayOver"==c||"autoOver"==c)&&this.options.pageSize>=this.pageCount&&(e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden"))}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setFocus=function(t){try{if(0==this.pageCount)return;if(a.D.isNull(t))return;if((t=t.toString())<1||t>this.pageCount)return void $l("range exception for "+this.id);var e=document.getElementById(this.id+"_page_"+t);e&&e.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setIdxClass=function(t){try{this.setSelectedIndex(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{if(a.D.isNull(t))return;t=t.toString(),this.options.displaySearchbox&&isNaN(t)&&(t=this.selectedIndex),this.setSelectedIndex(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.moveLeft=function(){try{this.setSelectedIndex(this.selectedIndex-1),this.setFocus(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.moveRight=function(){try{this.setSelectedIndex(this.selectedIndex+1),this.setFocus(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.pageLeft=function(){try{if(this.options.displaySearchbox)var t=1;else t=this.selectedIndex-this.options.pageSize;this.setDisplayIndex(t),this.setSelectedIndex(this.displayIndex),this.setFocus(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.pageLeftLast=function(){try{if(1==this.displayIndex)this.setSelectedIndex(1);else{var t=this.selectedIndex-this.options.pageSize;this.setDisplayIndex(t);var e=this.displayIndex+this.options.pageSize-1;this.setSelectedIndex(e),this.setFocus(this.selectedIndex)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.pageRight=function(){try{if(this.options.displaySearchbox)var t=this.selectedIndex+this.pageCount;else t=this.selectedIndex+this.options.pageSize;this.setDisplayIndex(t),1==this.options.pagingType&&t>this.pageCount?this.setSelectedIndex(this.pageCount):this.setSelectedIndex(this.displayIndex),this.setFocus(this.selectedIndex)}catch(t){
s.w.printStackTrace(t,null,this)}},l.prototype.setDisplayIndex=function(t){try{if(0==this.pageCount)return;var e;if(this.options.displaySearchbox)document.getElementById(this.id+"_input").value=t,e=t;else t=parseInt(t,10),e=parseInt((t-1)/this.options.pageSize)*this.options.pageSize+1,"1"==this.options.pagingType&&"3"!=this.options.buttonShowType&&t+this.options.pageSize>this.pageCount&&(e=this.pageCount-this.options.pageSize+1);if("2"==this.options.buttonShowType&&"1"==this.options.naviType&&(e=t),e<1&&(e=1),e>this.pageCount&&(e=this.pageCount),this.displayIndex==e||isNaN(e))return;this.displayIndex=e,this.redraw()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.changeButtonCursor=function(t){try{"3"==this.options.buttonShowType||"2"==this.options.buttonShowType?(1==this.displayIndex?this.addClass("w2pageList_prev_last"):this.removeClass("w2pageList_prev_last"),this.displayIndex+this.options.pageSize>this.pageCount?this.addClass("w2pageList_next_last"):this.removeClass("w2pageList_next_last"),1==t?this.addClass("w2pageList_pagePrev_last"):this.removeClass("w2pageList_pagePrev_last"),t==this.pageCount?this.addClass("w2pageList_pageNext_last"):this.removeClass("w2pageList_pageNext_last")):(1==this.displayIndex?this.addClass("w2pageList_pagePrev_last"):this.removeClass("w2pageList_pagePrev_last"),this.displayIndex+this.options.pageSize>this.pageCount?this.addClass("w2pageList_pageNext_last"):this.removeClass("w2pageList_pageNext_last"),1==t?this.addClass("w2pageList_prev_last"):this.removeClass("w2pageList_prev_last"),t==this.pageCount?this.addClass("w2pageList_next_last"):this.removeClass("w2pageList_next_last"))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setPageSize=function(t){try{this.options.pageSize="string"==typeof t?parseInt(t,10)||this.options.pageSize:t||this.options.pageSize}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getPageSize=function(){try{return this.options.pageSize}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){try{for(var e=a.D.getDataPrefix("index"),i=this.event.getTargetIterator(t,this.render),o=this.getSelectedIndex();i.next();)if(i.match("w2pageList_control_pagePrev")&&("2"==this.options.buttonShowType?this.moveLeft():"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?this.setSelectedIndex(1):("0"==this.options.buttonShowType||this.options.buttonShowType,this.pageLeft()),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),i.match("w2pageList_control_prev")&&("3"==this.options.buttonShowType?this.pageLeftLast():this.moveLeft(),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),i.match("w2pageList_control_next")&&("3"==this.options.buttonShowType?this.pageRight():this.moveRight(),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),i.match("w2pageList_control_pageNext")&&("2"==this.options.buttonShowType?this.moveRight():"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?this.setSelectedIndex(this.pageCount):("0"==this.options.buttonShowType||this.options.buttonShowType,this.pageRight()),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),i.match("w2pageList_control_label")){var n=i.getElement().getAttribute(e);this.setSelectedIndex(n),r.B.fireEvent(this,"onclick",n),"list"==this.options.renderType&&r.B.stopEvent(t)}i=null;var l=this.getSelectedIndex();if(o!=l){var h={oldSelectedIndex:o,newSelectedIndex:l};r.B.fireEvent(this,"onviewchange",h)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseoverEvent=function(t){try{r.B.stopEvent(t);var e=this.event.getTargetIterator(t,this.render)
;if("nativelist"==this.options.renderType)for(;e.next();)e.match("w2pageList_control_label")?this.addClass(e.getElement(),"w2pageList_label_over_native"):e.match("w2pageList_col_prev_li_native")?this.addClass(e.getElement(),"w2pageList_col_prev_li_over_native"):e.match("w2pageList_col_next_li_native")?this.addClass(e.getElement(),"w2pageList_col_next_li_over_native"):e.match("w2pageList_col_prevPage_li_native")?this.addClass(e.getElement(),"w2pageList_col_prevPage_li_over_native"):e.match("w2pageList_col_nextPage_li_native")&&this.addClass(e.getElement(),"w2pageList_col_nextPage_li_over_native");else for(;e.next();)e.match("w2pageList_control_label")?this.addClass(e.getElement(),"w2pageList_label_over"):e.match("w2pageList_col_prev")?this.addClass(e.getElement(),"w2pageList_col_prev_over"):e.match("w2pageList_col_next")?this.addClass(e.getElement(),"w2pageList_col_next_over"):e.match("w2pageList_col_prevPage")?this.addClass(e.getElement(),"w2pageList_col_prevPage_over"):e.match("w2pageList_col_nextPage")&&this.addClass(e.getElement(),"w2pageList_col_nextPage_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseoutEvent=function(t){try{r.B.stopEvent(t);var e=this.event.getTargetIterator(t,this.render);if("nativelist"==this.options.renderType)for(;e.next();)e.match("w2pageList_control_label")?this.removeClass(e.getElement(),"w2pageList_label_over_native"):e.match("w2pageList_col_prev_li_native")?this.removeClass(e.getElement(),"w2pageList_col_prev_li_over_native"):e.match("w2pageList_col_next_li_native")?this.removeClass(e.getElement(),"w2pageList_col_next_li_over_native"):e.match("w2pageList_col_prevPage_li_native")?this.removeClass(e.getElement(),"w2pageList_col_prevPage_li_over_native"):e.match("w2pageList_col_nextPage_li_native")&&this.removeClass(e.getElement(),"w2pageList_col_nextPage_li_over_native");else for(;e.next();)e.match("w2pageList_control_label")?this.removeClass(e.getElement(),"w2pageList_label_over"):e.match("w2pageList_col_prev")?this.removeClass(e.getElement(),"w2pageList_col_prev_over"):e.match("w2pageList_col_next")?this.removeClass(e.getElement(),"w2pageList_col_next_over"):e.match("w2pageList_col_prevPage")?this.removeClass(e.getElement(),"w2pageList_col_prevPage_over"):e.match("w2pageList_col_nextPage")&&this.removeClass(e.getElement(),"w2pageList_col_nextPage_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onInputKeyEventHandler=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=new RegExp("[0-9]","g"),o=document.getElementById(this.id+"_input");13==e&&(o.blur(),this.options.displaySelectedIndex&&(o.value>this.pageCount||o.value<=0||""==o.value||null==o.value)?(o.value=this.selectedIndex,this.setValue(o.value)):this.setValue(o.value)),String.fromCharCode(e).match(i)&&16!=e||8==e||37==e&&"ArrowLeft"==t.key||39==e&&"ArrowRight"==t.key||r.B.stopEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onBlurEvent=function(t){try{var e=document.getElementById(this.id+"_input");this.options.displaySelectedIndex&&(e.value>this.pageCount||e.value<=0||""==e.value||null==e.value)?(e.value=this.selectedIndex,this.setValue(e.value)):this.setValue(e.value),r.B.fireEvent(this,"oninputblur",e.value)}catch(t){s.w.printStackTrace(t,null,this)}}},5939:(t,e,i)=>{i.r(e),i.d(e,{panelContainer:()=>h,panel:()=>d});var o=i(2981),s=i(2085),r=i(1960),a=i(3082),n=i(7275),l=i(6615),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.panelContainer",pluginName:"panelContainer",useConfig:!0,cols:1,colWidth:0,panelMove:!0},h.prototype.initialize=function(t){this.panelIdCount=0,this.colArr=[]},h.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";t.push("<div id='"+this.id+"' "+e+" class='w2panelContainer "+this.options.className+"'>");for(var i=0;i<this.options.cols;i++)t.push("<div id='"+this.id+"_col_"+i+"' class='w2panelContainer_col'></div>")
;return t.push("</div>"),t.join("")},h.prototype.setAction=function(){var t=0,e=[];if(0==this.options.colWidth)for(var i=0;i<this.options.cols;i++)e[i]=parseInt(100/this.options.cols,10)+(i<100%this.options.cols?1:0);for(i=0;i<this.render.childNodes.length;i++)this.colArr.push(this.render.childNodes[i]),0==this.options.colWidth?(this.colArr[i].style.width=e[i]+"%",this.colArr[i].style.left=t+"%",t+=e[i]):(this.colArr[i].style.width=this.options.colWidth+"px",this.colArr[i].style.left=i*this.options.colWidth+"px");this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent))},h.prototype.addPanel=function(t){var e=t.col||0;t.id||(t.id=this.id+"_panel"+this.panelIdCount++);var i=new WebSquare.uiplugin.panel(t.id,t),o=this;return i.options.xmlEvents=[{name:"onpanelopen",action:"script",param:{handler:function(t){var e=o.getPanelInfoById(this.id);r.B.fireEvent(o,"onpanelopen",e)}}},{name:"onpanelclose",action:"script",param:{handler:function(t){var e=o.getPanelInfoById(this.id);r.B.fireEvent(o,"onpanelclose",e)}}}],this.addControl(i),i.appendTo(this.colArr[e]),i.activate(),i},h.prototype.removePanel=function(t,e){if(t=parseInt(t,10),!((e=parseInt(e,10))>=this.render.childNodes.length||t>=this.render.childNodes[e].childNodes.length)){var i=this.render.childNodes[e],o=i.childNodes[t],s=o.id;return this.removeControl(this.getPanelById(s)),a.D.getComponentById(s+"_content").remove(),window[s]&&(window[s]=null),window[WebSquare.noConflict].comp[s]=null,delete window[WebSquare.noConflict].comp[s],i.removeChild(o),s}},h.prototype.getPanelById=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i.id==t)return i}},h.prototype.getPanelInfo=function(){for(var t=[],e=0;e<this.options.cols;e++){for(var i=this.render.childNodes[e],o=[],s=0;s<i.childNodes.length;s++)for(var r=i.childNodes[s],a=0;a<this.childControlList.length;a++){var n=this.childControlList[a];if(n.render==r){o.push({id:n.id,style:n.options.style,title:n.options.title,src:n.options.src,scope:n.options.scope,col:e,row:s,isOpen:"0px"!=WebSquare.style.getStyle(this.getElementById(n.id+"_content"),"height")});break}}t.push(o)}return t},h.prototype.getPanelInfoById=function(t){for(var e=this.getPanelInfo(),i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var r=o[s];if(t==r.id)return r}},h.prototype.setPanelTitle=function(t,e){var i=this.getPanelById(t);i&&(i.options.title=e,i.render.childNodes[0].childNodes[1].innerHTML=e)},h.prototype.openPanel=function(t){var e=this.getPanelById(t),i=e.getElementById(e.id+"_content");0==i.offsetHeight&&WebSquare.style.animate(i,{height:i.scrollHeight},{key:e.id+"_toggle",easing:"linear",duration:300,caller:e,complete:function(){WebSquare.style.setStyle(i,"height",""),e.removeClass("w2panel_closed"),r.B.fireEvent(e,"onpanelopen")}})},h.prototype.closePanel=function(t){var e=this.getPanelById(t),i=e.getElementById(e.id+"_content");0==i.offsetHeight||(WebSquare.style.setStyle(i,"height",i.scrollHeight+"px"),WebSquare.style.animate(i,{height:0},{key:e.id+"_toggle",easing:"linear",duration:300,caller:e,complete:function(){e.addClass("w2panel_closed"),r.B.fireEvent(e,"onpanelclose")}}))},h.prototype.handleMousedownEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);this.options.panelMove&&e.next();)if(e.match("w2panel_title"))return this.dragDropElem=e.getElement().parentNode,this.render.style.cursor="pointer",this.addClass("w2noselect"),void r.B.stopEvent(t);this.dragDropElem=null},h.prototype.handleMousemoveEvent=function(t){this.dragDropElem&&(this.ghost||(this.ghost=document.createElement("div"),this.ghost.innerHTML=this.dragDropElem.childNodes[0].childNodes[1].innerHTML,
this.ghost.className="w2panelContainer_ghost",WebSquare.getBody().appendChild(this.ghost)),this.ghost.style.left=r.B.getMouseX(t)+10+"px",this.ghost.style.top=r.B.getMouseY(t)+10+"px",r.B.preventDefault(t))},h.prototype.handleMouseupEvent=function(t){try{if(this.dragDropElem){for(var e=this.event.getTargetIterator(t,this.render);e.next()&&(!e.match("w2panel_title")||e.getElement().parentNode!=this.dragDropElem);)if(e.match(null,this.id)){for(var i=r.B.getMouseX(t)+this.render.scrollLeft-WebSquare.style.getAbsoluteLeft(this.render),o=r.B.getMouseY(t)+this.render.scrollTop-WebSquare.style.getAbsoluteTop(this.render),a=null,n=0;n<this.render.childNodes.length;n++){if(i<(a=this.render.childNodes[n]).offsetLeft+a.offsetWidth)break}for(var l=this.render.childNodes[n].childNodes,h=0;h<l.length;h++){var d=l[h];if(o<d.offsetTop+d.offsetHeight)break}if(this.dragDropElem.parentNode.removeChild(this.dragDropElem),!a)return;h<l.length?a.insertBefore(this.dragDropElem,l[h]):(h=l.length,a.appendChild(this.dragDropElem)),r.B.fireEvent(this,"onpanelmove",h,n)}this.render.style.cursor="",this.removeClass("w2noselect")}this.dragDropElem=null,this.ghost&&(this.ghost.parentNode.removeChild(this.ghost),this.ghost=null)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.movePanel=function(t,e,i){try{var o=this.getPanelById(t),a=this.render.childNodes[i];if(!a)return void n.k.printLog("invalid position : ["+e+","+i+"]["+this.id+"]");var l=this.render.childNodes[i].childNodes;o?(o.render.parentNode.removeChild(o.render),e<l.length?a.insertBefore(o.render,l[e]):(e=l.length,a.appendChild(o.render)),r.B.fireEvent(this,"onpanelmove",e,i)):n.k.printLog("cannot find pannel : "+t+"["+this.id+"]")}catch(t){s.w.printStackTrace(t,null,this)}};var d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.panel",pluginName:"panel",title:"",src:"",scope:!1,isOpen:!0},d.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2panel "+this.options.className+"'>"),t.push("<div id='"+this.id+"_title' class='w2panel_title'>"),t.push("<div id='"+this.id+"_title_image' class='w2panel_title_image'></div>"),t.push("<span id='"+this.id+"_title_text' class='w2panel_title_text'>"+this.options.title+"</span>"),t.push("</div>"),t.push("</div>"),t.join("")},d.prototype.setAction=function(){var t=new WebSquare.uiplugin.wframe(this.id+"_content",{className:"w2panel_content",src:this.options.src,scope:this.options.scope,style:this.options.isOpen?"":"height:0"});t.appendTo(this),t.activate(),this.contentRender=t.render,this.event.addListener(this.getElementById(this.id+"_title"),"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.options.isOpen||this.addClass("w2panel_closed")},d.prototype.handleTitleClick=function(t){0==this.getElementById(this.id+"_content").offsetHeight?this.parentControl.openPanel(this.id):this.parentControl.closePanel(this.id)}},5459:(t,e,i)=>{i.r(e),i.d(e,{radio:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(3729),d=i(1577),c=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(c.prototype,l.s.prototype),o.x.extend(c.prototype,h.E.prototype),o.x.extend(c.prototype,d.z.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.radio",pluginName:"radio",userEvents:["onchange","onlabelclick","onradioclick","onviewchange","onkeyup","onkeydown"],useConfig:!0,renderType:"",tagname:"div",itemTagname:"div",value:"",cols:0,rows:0,name:"",nameScope:!1,selectedIndex:-1,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",useRadioTitle:!0,inValidValue:"reset",escape:!0,ignoreTabIndex:!1,tooltipItemLabel:"",tooltipShowAlways:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,visibleColumn:"",
visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F"},c.prototype.initialize=function(t){try{var e=s.v.getConfiguration("/WebSquare/radio/renderType/@value");""==this.options.renderType&&""!=e?this.options.renderType=e:""==this.options.renderType&&(this.options.renderType="table"),this.selectedIndex=-1,this.inputType="radio","native"==this.options.renderType?this.itemArr=[{label:"",value:this.options.value}]:this.initializeItemArr(t),this.itemDisabledArray=[];for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.setTableCount(),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.options.tooltipFormatter&&(this.tooltipFormatter=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=this.itemArr.length,i=this.options.name||this.id+"_input";this.options.nameScope&&this.options.name&&this.scope_id&&(i=this.scope_id+"_"+i);var o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.title?"":"title='"+this.options.title+"'",a=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'";1==this.options.ignoreTabIndex&&(a=n.D.isIEAllVersion("8")||n.D.isIEAllVersion("9")?" tabindex='-40000'":" tabindex='-1'");var l=n.D.getDataPrefix("index");if("native"==this.options.renderType.toLowerCase())t.push("<input type='"+this.inputType+"' "+o+" class='w2"+this.inputType+"_input "+this.options.className+"' name='"+i+"' id='"+this.id+"' "+l+"='0' "+s+a+" />");else if("radiogroup"==this.options.renderType.toLowerCase()){t.push("<"+this.options.tagname+" id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+" >");for(var h=0;h<e;h++){var d="";this.itemArr&&this.itemArr[h]&&!0===this.itemArr[h]._hidden&&(d=" style='display:none;'");var c=this.id+"_input_"+h,u=this.options.escape?WebSquare.xml._encode(this.itemArr[h].label):this.itemArr[h].label,p="",g="";this.itemDisabledArray[h]&&(p="disabled",g="w2radio_disabled"),t.push("<"+this.options.itemTagname+" class='w2radio_item w2radio_item_"+h+"'"+d+">"),t.push("<input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' "+l+"='"+h+"'  id='"+c+"' "+p+a+"/>"),t.push("<label class='w2"+this.inputType+"_label "+g+"' "+l+"='"+h+"' for='"+c+"' >"+u+"</"+"label>"),t.push("</"+this.options.itemTagname+">")}t.push("</"+this.options.tagname+">")}else{t.push("<div id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+" >"),t.push("<table class='w2"+this.inputType+"_main'>");for(var m=0;m<this.rowCount;m++){c=this.id+"_input_"+m;t.push("<tr class='w2"+this.inputType+"_row'>");for(var f=0;f<this.colCount;f++){var b=m*this.colCount+f;d="";this.itemArr&&this.itemArr[b]&&!0===this.itemArr[b]._hidden&&(d=" style='display:none;'");c=this.id+"_input_"+b,p="",g="";if(this.itemDisabledArray[b]&&(p="disabled",g="w2radio_disabled"),b<e){u=this.options.escape?WebSquare.xml._encode(this.itemArr[b].label):this.itemArr[b].label;var y=this.options.useRadioTitle?" title='"+u+"' ":"";t.push("<td class='w2"+this.inputType+"_td_input'"+d+"><input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' "+l+"='"+b+"'  id='"+c+"'"+y+" "+p+a+"/></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+d+"><"+"label class='w2"+this.inputType+"_label "+g+"' "+l+"='"+b+"' for='"+c+"' >"+u+"</"+"label></td>")}else t.push("<td class='w2"+this.inputType+"_td_input'"+d+"></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+d+"></td>")}t.push("</tr>")}t.push("</table>"),t.push("</div>")}return t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw(),this.options.enableColumn&&this.refreshEnable()),
this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}this.options.selectedIndex>-1&&(this.setSelectedIndexNM(this.options.selectedIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getAccessibiltyId=function(){try{return"native"==this.options.renderType?this.id:this.id+"_input_0"}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=this.getValue(),e=!1;0==this.getItemCount()&&this.options.selectedIndex>-1&&(e=!0),this.refreshItemArr(),this.itemDisabledArray=new Array;for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(this.options.disabled);this.componentRedraw(t),e&&(this.setSelectedIndexNM(this.options.selectedIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t){try{this.setTableCount(),this.redraw(),this.setValueNM(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t){try{if(n.D.isNull(t))return;t=parseInt(t);var e=this.getSelectedIndex(),i="";this.modelControl.isBinded()?i=this.modelControl.getData():e>=0&&(i=this.itemArr[e].value),this.setSelectedIndexNM(t),this.modelControl.setData(this.itemArr[t].value),e!=this.getSelectedIndex()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;this.selectedIndex=t;var i=this.getRadioList()[t];return e=null==e||e,i.checked=e,!0}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;t=t.toString();for(var e=this.getItemCount(),i=!1,o=0;o<e;o++)this.itemArr[o].value==t?(this.setSelectedIndexNM(o,!0),i=!0):"reset"==this.options.inValidValue&&this.checkedRadio(o,!1);"reset"==this.options.inValidValue&&0==i&&(this.selectedIndex=-1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkedRadio=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;var i=this.getRadioList()[t];return e=null==e||e,i.checked=e,!0}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInstanceValue=function(){try{var t=this.getValue();this.modelControl.setData(t)}catch(t){
r.w.printStackTrace(t,null,this)}},c.prototype.setTableCount=function(){try{if(this.rowCount=this.itemArr.length,this.colCount=1,0!=this.options.rows){var t=this.options.rows;this.rowCount=t,this.colCount=Math.ceil(this.itemArr.length/t)}if(0!=this.options.cols){var e=this.options.cols;this.colCount=e,this.rowCount=Math.ceil(this.itemArr.length/e)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getValue=function(){try{for(var t="",e=this.getRadioList(),i=0;i<e.length;i++)e[i].checked&&(t=this.itemArr[i].value);return t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getText=function(){try{for(var t="",e=this.getRadioList(),i=0;i<e.length;i++)e[i].checked&&(t=this.itemArr[i].label);return t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o=this.getValue(),s={};s.value=t,s.label=e,this.itemArr.splice(i,0,s),this.itemDisabledArray.splice(i,0,!!this.options.disabled);for(var a=this.getRadioList(),n=[],l=0;l<a.length;l++)n.push(a[l].itemDisabled);n.splice(i,0,!1),this.componentRedraw(o);var h=this.getRadioList();for(l=0;l<h.length;l++)h[l].itemDisabled=n[l];return i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;for(var e=this.getValue(),i=null,o=this.getRadioList(),s=[],a=0;a<o.length;a++)s.push(o[a].itemDisabled);t>=0&&t<this.getItemCount()&&(i=this.itemArr.splice(t,1)[0],this.itemDisabledArray.splice(t,1),s.splice(t,1)),this.componentRedraw(e);var n=this.getRadioList();for(a=0;a<n.length;a++)n[a].itemDisabled=s[a];return i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.removeAll=function(){try{this.itemArr=new Array,this.itemDisabledArray=new Array,this.componentRedraw("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"readOnly":for(var i=this.getRadioList(),o=0;o<i.length;o++)i[o].disabled=e;break;case"mandatory":1==e?this.addClass(this.render,"w2radio_mandatory"):this.removeClass(this.render,"w2radio_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getRadioList=function(){try{return"native"==this.options.renderType?[this.render]:this.getDomList("radioArr","input")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getLabelList=function(){try{return this.getDomList("labelArr","label")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.focus=function(){try{var t=this.getRadioList();-1!=this.selectedIndex?t[this.selectedIndex].focus():t[0].focus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.click=function(t){try{this.getRadioList()[t].click()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.reset=function(){try{for(var t=this.getRadioList(),e=this.getValue(),i=0;i<t.length;i++)t[i].checked&&(t[i].checked=!1);this.selectedIndex=-1;var o=this.getValue();this.setInstanceValue(),e!=o&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:o})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t);for(var e=this.getRadioList(),i=this.getLabelList(),o=0;o<e.length;o++)e[o].itemDisabled||(t?e[o].setAttribute("disabled","disabled"):e[o].removeAttribute("disabled"),this.itemDisabledArray[o]=t,i[o]&&(t?this.addClass(i[o],"w2radio_disabled"):this.removeClass(i[o],"w2radio_disabled")));return this.options.disabled=t,
t?this.render.setAttribute("disabled","disabled"):this.render.removeAttribute("disabled"),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;e=n.D.getBoolean(e);var i=this.getRadioList(),o=this.getLabelList();i[t].disabled=e,i[t].itemDisabled=e,this.itemDisabledArray[t]=e,1==e?this.addClass(o[t],"w2radio_disabled"):this.removeClass(o[t],"w2radio_disabled")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.getRadioList()[t].disabled}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{for(var e=this.getValue(),i=this.getRadioList(),o=0;o<i.length;o++)i[o].checked&&(i[o].checked=!1);this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype.handleClickEvent=function(t){try{this.setRefPosition();for(var e=n.D.getDataPrefix("index"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2"+this.inputType+"_input")){var o=i.getElement().getAttribute(e),s=this.selectedIndex;if(this.getRadioList()[o].disabled)continue;this.setSelectedIndex(o),this.fireOnclick({type:"1",index:o,oldIndex:s})}if(i.match("w2"+this.inputType+"_label")&&!i.match("w2"+this.inputType+"_disabled")){o=i.getElement().getAttribute(e),this.getRadioList();a.B.preventDefault(t);s=this.selectedIndex;this.setSelectedIndex(o),this.fireOnclick({type:"2",index:o,oldIndex:s})}}i=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{for(var e=a.B.getTarget(t);e&&(!e.firstChild||"LABEL"!=e.firstChild.tagName)&&!("radiogroup"===this.options.renderType&&e&&"DIV"===e.tagName&&e.className.indexOf("w2radio_item")>=0);)e=e.parentNode;var i=n.D.getDataPrefix("index");if(e){var o;o="radiogroup"===this.options.renderType?e.getElementsByClassName("w2radio_label")[0]:e.firstChild;e.offsetWidth,e.offsetHeight;var s=WebSquare.style.getStyle(e,"text-overflow"),l=o.innerHTML;if(!0===this.options.tooltipShowAlways){var h=WebSquare.style.getAbsoluteLeft(o),d=WebSquare.style.getAbsoluteTop(o);if("function"==typeof this.tooltipFormatter){var c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else if("ellipsis"==s){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=e.className,this.toolTipRuler.innerHTML=e.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(e,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(e,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(e,"font-weight");var u=this.toolTipRuler.firstChild.offsetWidth,p=e.clientWidth;if(3!=o.nodeType){var g=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),m=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");u-=parseInt(g||"0",10),u-=parseInt(m||"0",10),p-=parseInt(WebSquare.style.getStyle(o,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(o,"padding-right"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(p<u){h=WebSquare.style.getAbsoluteLeft(o),
d=WebSquare.style.getAbsoluteTop(o);if(document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel)l=this.options.tooltipItemLabel;else if("function"==typeof this.tooltipFormatter){c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),!0!==this.options.tooltipDisplay&&!0!==this.options.tooltipShowAlways||this.hideTooltip()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var a=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(a){var l=n.D.getGlobalFunction(a,o.scope_id),h=!0;if("function"==typeof l&&(h=l(o)),!h)return}}catch(t){r.w.printStackTrace(t)}var d=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2radio_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i;var c=Math.max(e-(this.tooltip.render.offsetHeight+3),0);if(this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",c+"px"),document.body.scrollWidth>d){var u=t-(document.body.scrollWidth-d);u<0&&(u=0),this.tooltip.setStyle("left",u+"px")}})),100*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{9==(t.charCode?t.charCode:t.keyCode)&&(this.tabOrderMoveStart=!1,t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.fireOnchange=function(){try{a.B.fireEvent(this,"onchange")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.fireOnclick=function(t){try{if(!t)return;var e,i=t.type||"1",o=t.index,s=this.getValue(),n=t.oldIndex;this.itemArr[n]&&(e=this.itemArr[n].value),this.focus(),"1"===i?a.B.fireEvent(this,"onradioclick",o,s):"2"===i&&a.B.fireEvent(this,"onlabelclick",o,s),o!=n&&a.B.fireEvent(this,"onviewchange",{oldIndex:n,oldValue:e,index:o,value:s})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshVisible=function(){try{if(!this.render)return;this._refreshVisible(this.render.getElementsByTagName("input")),"radiogroup"!==this.options.renderType.toLowerCase()&&this._refreshVisible(this.render.getElementsByTagName("label"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._refreshVisible=function(t){try{
for(var e=n.D.getDataPrefix("index"),i=0;i<t.length;i++){var o=parseInt(t[i].getAttribute(e),10);this.itemArr[o]&&!0===this.itemArr[o]._hidden?t[o].parentNode.style.display="none":t[o].parentNode.style.display=""}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.w.printStackTrace(t,null,this)}}},9533:(t,e,i)=>{i.r(e),i.d(e,{scrollView:()=>d});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(7716),d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),o.x.extend(d.prototype,h.g.prototype),d.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.scrollView",pluginName:"scrollView",userEvents:["onscroll","onscrollbottom"],parseChild:!0,verticalScroll:!0,horizontalScroll:!1,bounce:!0,paging:!1,showVerticalScroll:!0,showHorizontalScroll:!0,slideDuration:1200,resilienceDuration:500,pagingDuration:300,slidePeriod:15,scrollTop:0,scrollLeft:0,scrollType:"mobile",resizeAutoScroll:!1,css3d:!1,fadeOutScrollBar:!0,eventSmoothing:!0,overScrollGlow:!1,dragScrollSize:50,slideThreshold:5,useStylus:!1},d.prototype.initialize=function(t){this.isMobile=n.D.isMobile(),this.isAndroid=/android/.test(navigator.userAgent.toLowerCase()),this.transformArr=["-webkit-transform",":","translate3d(",,"px, ",,"px, 0px) scale(1)"],this.support3D="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,this.fingerTop=0,this.fingerLeft=0,this.scrollLock=!1,this.measureDrawTime=!1,WebSquare.dragdrop2.scrollable[this.uuid]={scroll:!1}},d.prototype.toHTML=function(){try{var t=[],e=this.getChildren(),i=this.options.className,o="",s=""==this.options.style?"":"style='"+this.options.style+"'",a=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";this.isMobile||"auto"!=this.options.scrollType?"accessibility"==this.options.scrollType?i+=" nativeScroll":o=" style='width: 100%;height: 100%;overflow: hidden'":i+=" nativeScroll",t.push("<div id='"+this.id+"' "+s+" class='w2scrollView "+i+"' "+a+">"),t.push("<div id='"+this.id+"_container' class='w2scrollView_container'"+o+">");for(var n=0;n<e.length;n++)t.push(e[n].toHTML());return t.push("</div>"),t.push("<div id='"+this.id+"_iScrollX' class='w2scrollView_iScrollX' style='visibility:hidden;left:0px;'></div>"),t.push("<div id='"+this.id+"_iScrollY' class='w2scrollView_iScrollY' style='visibility:hidden;top:0px;'></div>"),t.push("<div id='"+this.id+"_overScrollTop' class='w2scrollView_overScrollTop' style='display:none;top:0px;'></div>"),t.push("<div id='"+this.id+"_overScrollBottom' class='w2scrollView_overScrollBottom' style='display:none;bottom:0px;'></div>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){this.dom.container=this.getElementById(this.id+"_container"),this.dom.iScrollX=this.getElementById(this.id+"_iScrollX"),this.dom.iScrollY=this.getElementById(this.id+"_iScrollY"),this.dom.overScrollTop=this.getElementById(this.id+"_overScrollTop"),this.dom.overScrollBottom=this.getElementById(this.id+"_overScrollBottom"),this.iScroll={prevTouches:[]},this.isMobile?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))):"auto"!=this.options.scrollType&&"accessibility"!=this.options.scrollType&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(document.documentElement,"onmousemove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.handleTouchEnd)),
this.event.addListener(document.documentElement,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOut)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,(function(t){a.B.preventDefault(t)})))),this.iScrollXHeight=parseInt(1.5*this.dom.iScrollX.offsetHeight,10),this.iScrollYWidth=parseInt(1.5*this.dom.iScrollY.offsetWidth,10),this.checkResize(),this._scrollTo(this.options.scrollLeft,this.options.scrollTop),this.measureDrawTime=!0},d.prototype.setIScroll=function(){try{if(this.options.verticalScroll&&this.options.showVerticalScroll){var t=this.render.clientHeight,e=this.dom.container.scrollHeight;if(e>t){this.options.horizontalScroll&&(t-=this.iScrollXHeight);var i=this.getMaxScrollTop(),o=parseInt(t*t/e,10);o=o<30?30:o;var s=parseInt(this.getScrollTop()*(t-o)/i,10);s<0?(o+=s,s=0):s+o>=t&&(o=t-s),this.options.css3d&&this.support3D?(this.transformArr[3]=0,this.transformArr[5]=s,this.dom.iScrollY.style[this.transformArr[0]]=this.transformArr.slice(2).join("")):this.dom.iScrollY.style.top=s+"px",this.dom.iScrollY.style.height=o+"px",this.dom.iScrollY.style.visibility="visible"}else this.dom.iScrollY.style.visibility="hidden"}if(this.options.horizontalScroll&&this.options.showHorizontalScroll){var a=this.render.clientWidth,n=this.dom.container.scrollWidth;if(n>a){this.options.verticalScroll&&(a-=this.iScrollYWidth);var l=this.getMaxScrollLeft(),h=parseInt(a*a/n,10);h=h<30?30:h;var d=parseInt(this.getScrollLeft()*(a-h)/l,10);d<0?(h+=d,d=0):d+h>=a&&(h=a-d),this.options.css3d&&this.support3D?(this.transformArr[3]=d,this.transformArr[5]=0,this.dom.iScrollX.style[this.transformArr[0]]=this.transformArr.slice(2).join("")):this.dom.iScrollX.style.left=d+"px",this.dom.iScrollX.style.width=h+"px",this.dom.iScrollX.style.visibility="visible"}else this.dom.iScrollX.style.visibility="hidden"}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.checkResize=function(){try{var t=this.render.clientHeight,e=this.render.clientWidth,i=this.dom.container.scrollHeight,o=this.dom.container.scrollWidth;if(!this.sizeBackup||this.sizeBackup.renderWidth!=e||this.sizeBackup.renderHeight!=t||this.sizeBackup.scrollWidth!=o||this.sizeBackup.scrollHeight!=i){this.sizeBackup={renderWidth:e,renderHeight:t,scrollWidth:o,scrollHeight:i};var a=parseInt(this.dom.container.style.top||0,10);this.isSliding&&a&&(this.stopSlide(),this._scrollTo(null,this.dom.container.scrollTop-a));var n=this.getScrollLeft(),l=this.getScrollTop(),h=this.getMaxScrollLeft(),d=this.getMaxScrollTop();if(this.options.resizeAutoScroll&&this.sizeBackup){for(var c=document.activeElement,u=c;(u=u.parentNode)&&u!=this.render;);if(u){var p=WebSquare.style.getAbsoluteTop(c),g=WebSquare.style.getAbsoluteTop(this.render),m=l;p<g?m-=g-p:p+c.offsetHeight>g+t&&(m+=p+c.offsetHeight-(g+t)),m!==l&&m>=0&&m<=d&&this._scrollTo(null,m)}}(n>h||l>d)&&(this.stopSlide(),this._scrollTo(n<h?n:h,l<d?l:d)),this.setIScroll()}s.v.setTimer(this.checkResize,{key:this.id+"_checkResize",caller:this,delay:100})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.iScrollAddMoveClass=function(){this.options.fadeOutScrollBar&&(s.v.clearTimer(this.id+"_iScrollRemoveClass"),WebSquare.style.setStyle(this.dom.iScrollX,"opacity","1"),WebSquare.style.setStyle(this.dom.iScrollY,"opacity","1")),this.__addClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__addClass(this.dom.iScrollY,"w2scrollView_iScrollY_move")},d.prototype.iScrollRemoveMoveClass=function(){this.options.fadeOutScrollBar?WebSquare.style.animate([this.dom.iScrollX,this.dom.iScrollY],{opacity:0},{key:this.id+"_iScrollRemoveClass",duration:500,easing:"ease-out",caller:this,complete:function(){this.__removeClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__removeClass(this.dom.iScrollY,"w2scrollView_iScrollY_move")}}):(this.__removeClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__removeClass(this.dom.iScrollY,"w2scrollView_iScrollY_move"))},d.prototype.scrollTo=function(t,e,i){
this.stopSlide(),(i=i||{}).duration=null==i.duration?500:i.duration,i.timingFunction=i.timingFunction||"ease",this.options.horizontalScroll&&"number"==typeof t&&(i.initX=this.getScrollLeft(),i.finishX=t),this.options.verticalScroll&&"number"==typeof e&&(i.initY=this.getScrollTop(),i.finishY=e),this.iScroll.prevTouches=[],this.isSliding=!0,this.setIScroll(),this.iScrollAddMoveClass();var o=i.delay||0;o<=0?this.slide(i):s.v.setTimer(this.slide,{key:this.id+"_iScroll_slide",caller:this,delay:o,args:[i]})},d.prototype._scrollTo=function(t,e){this.measureDrawTime&&s.v.measureTime((function(t){this.options.slidePeriod=parseInt(t.aver,10)}),{key:this.id+"_measureDrawTime",caller:this});t=parseInt(t,10),e=parseInt(e,10);var i=this.getScrollLeft(),o=this.getScrollTop(),r=this.getMaxScrollLeft(),n=this.getMaxScrollTop();if(t=isNaN(t)?i:t,e=isNaN(e)?o:e,t!=i||e!=o){if(WebSquare.getBody().getLayerListener().hideAll(),this.options.css3d&&this.support3D)this.transformArr[3]=-t,this.transformArr[5]=-e,this.dom.container.style.cssText=this.transformArr.join("");else{var l=t,h=0,d=e,c=0;t<0?(l=0,h=-t):r<t&&(l=r,h=-(t-r)),e<0?(d=0,c=-e):n<e&&(d=n,c=-(e-n)),this.dom.container.scrollLeft=l,this.dom.container.scrollTop=d,this.dom.container.style.left=h+"px",this.dom.container.style.top=c+"px"}this.options.scrollLeft=t,this.options.scrollTop=e,this.setIScroll(),a.B.fireEvent(this,"onscroll",t,e),!this.scrollBottom&&e>=n&&(this.scrollBottom=!0,a.B.fireEvent(this,"onscrollbottom"))}},d.prototype.scrollBy=function(t,e,i){this.stopSlide(!0);t=t||0,e=e||0;var o=this.getScrollLeft(),s=this.getScrollTop();this.scrollTo(o+t,s+e,i)},d.prototype.resetScrollBottom=function(){this.scrollBottom=!1},d.prototype.slide=function(t){try{s.v.clearTimer(this.id+"_iScroll_slide");var e=this.render.clientWidth,i=this.render.clientHeight,o=this.getScrollTop(),a=this.getScrollLeft(),n=this.getMaxScrollTop(),l=this.getMaxScrollLeft();null==t.endTime&&(t.endTime=(new Date).getTime()+t.duration),null==t.slidePeriod&&(t.slidePeriod=this.options.slidePeriod);var h=null==t.initX?a:t.initX,d=null==t.initY?o:t.initY,c=null==t.finishX?a:t.finishX,u=null==t.finishY?o:t.finishY,p=t.duration,g=(new Date).getTime()-(t.endTime-p);this.forceToStopSlide&&(g=p),h<0&&2*h<c&&c<0&&(c=0),d<0&&2*d<u&&u<0&&(u=0),h>l&&l<c&&c<2*h-l&&(c=l),d>n&&n<u&&u<2*d-n&&(u=n);var m=WebSquare.style.cubicBezierAtTime(g/p,t.timingFunction,p/1e3),f=h+(c-h)*m,b=d+(u-d)*m;if(this.options.bounce)!t.xResilience&&(f<0&&c<0||l<f&&l<c)&&(t.xResilience=!0,f<-e/2&&(f=-e/2),f>l+e/2&&(f=l+e/2),c<-e?(h=f,c=-e):c>l+e&&(h=f,c=l+e),c<0?t.turningPointX=c/2:c>l&&(t.turningPointX=l+(c-l)/2)),!t.yResilience&&(b<0&&u<0||n<b&&n<u)&&(t.yResilience=!0,b<-i/2&&(b=-i/2),b>n+i/2&&(b=n+i/2),u<-i?(d=b,u=-i):u>n+i&&(d=b,u=n+e),t.turningPointY=u<0?u/2:n+(u-n)/2),t.xResilience&&(f<t.turningPointX&&c<0||f>t.turningPointX&&c>0)&&(f=-f+2*t.turningPointX),t.yResilience&&(b<t.turningPointY&&u<0||b>t.turningPointY&&u>0)&&(b=-b+2*t.turningPointY);else{f<0&&(f=0),f>l&&(f=l),b<0&&(b=0),b>n&&(b=n);var y=c==f||c<=0&&f<=0||c>=l&&f>=l,v=u==b||u<=0&&b<=0||u>=n&&b>=n,w=this.options.horizontalScroll,S=this.options.verticalScroll;(w&&S&&y&&v||w&&!S&&y||!w&&S&&v)&&(g=p)}if(t.initX=h,t.initY=d,t.finishX=c,t.finishY=u,g>=p){f=t.finishX,b=t.finishY,f<0&&(f=0),f>l&&(f=l),b<0&&(b=0),b>n&&(b=n),this._scrollTo(f,b),this.stopSlide();var C=!0;("none"!=this.dom.overScrollTop.style.display&&this.dom.overScrollTop.offsetTop>=-this.dom.overScrollTop.offsetHeight||"none"!=this.dom.overScrollBottom.style.display&&this.dom.overScrollBottom.offsetTop<this.render.clientHeight)&&(C=!1),this.hideOverScrollGlow(C)}else this._scrollTo(f,b),s.v.setTimer(this.slide,{key:this.id+"_iScroll_slide",caller:this,delay:t.slidePeriod,args:[t]})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.stopSlide=function(t){try{this.isSliding&&(this.isSliding=!1,this.forceToStopSlide=t,s.v.clearTimer(this.id+"_iScroll_slide",t),this.forceToStopSlide=null,this.iScrollRemoveMoveClass())}catch(t){
r.w.printStackTrace(t,null,this)}},d.prototype.getSlideFactor=function(t,e){var i=this.isMobile?.3:1;return parseInt(i*t/100*e,10)},d.prototype.hideOverScrollGlow=function(t){if(!this.options.bounce&&this.options.overScrollGlow){var e=this,i=this.getScrollTop();t?0==i?(WebSquare.style.show(this.dom.overScrollTop),WebSquare.style.setStyle(this.dom.overScrollTop,"top",-this.dom.overScrollTop.offsetHeight+"px"),WebSquare.style.animate(this.dom.overScrollTop,{top:0},{key:this.id+"_hideOverScrollGlowWithGlow",easing:"ease-in",duration:300,complete:function(){e.hideOverScrollGlow()}})):i==this.getMaxScrollTop()&&(WebSquare.style.show(this.dom.overScrollBottom),WebSquare.style.setStyle(this.dom.overScrollBottom,"bottom",-this.dom.overScrollBottom.offsetHeight+"px"),WebSquare.style.animate(this.dom.overScrollBottom,{bottom:0},{key:this.id+"_hideOverScrollGlowWithGlow",easing:"ease-in",duration:300,complete:function(){e.hideOverScrollGlow()}})):"none"!=this.dom.overScrollTop.style.display&&this.dom.overScrollTop.offsetTop>=-this.dom.overScrollTop.offsetHeight?WebSquare.style.animate(this.dom.overScrollTop,{top:-this.dom.overScrollTop.offsetHeight},{key:this.id+"_hideOverScrollGlow",easing:"ease-out",duration:300,complete:function(){WebSquare.style.hide(e.dom.overScrollTop)}}):"none"!=this.dom.overScrollBottom.style.display&&this.dom.overScrollBottom.offsetTop<this.render.clientHeight&&WebSquare.style.animate(this.dom.overScrollBottom,{bottom:-this.dom.overScrollBottom.offsetHeight},{key:this.id+"_hideOverScrollGlow",easing:"ease-out",duration:300,complete:function(){WebSquare.style.hide(e.dom.overScrollBottom)}})}},d.prototype.setScrollLock=function(t){this.scrollLock=!!t},d.prototype.getContentSize=function(t){try{var e=this.dom.container.scrollWidth,i=this.dom.container.scrollHeight;if(!t)return{width:e,height:i};if("height"==(t=t.toLowerCase()))return i;if("width"==t)return e;$l("getContentSize : wrong sizeName["+t+"]["+this.id+"]")}catch(t){r.w.printStackTrace(t)}},d.prototype.getMaxScrollTop=function(){var t=this.dom.container.scrollHeight-this.render.clientHeight;return t>=0?t:0},d.prototype.getMaxScrollLeft=function(){var t=this.dom.container.scrollWidth-this.render.clientWidth;return t>=0?t:0},d.prototype.getScrollTop=function(){try{if(this.options.css3d&&this.support3D)return this.options.scrollTop;var t=this.dom.container.scrollTop;return 0!=t&&t!=this.getMaxScrollTop()||(t-=parseInt(this.dom.container.style.top||0,10)),this.options.scrollTop=t,t}catch(t){r.w.printStackTrace(t)}},d.prototype.getScrollLeft=function(){try{if(this.options.css3d&&this.support3D)return this.options.scrollLeft;var t=this.dom.container.scrollLeft;return 0!=t&&t!=this.getMaxScrollLeft()||(t-=parseInt(this.dom.container.style.left||0,10)),this.options.scrollLeft=t,t}catch(t){r.w.printStackTrace(t)}},d.prototype.handleTouchStart=function(t){try{if(this.isTouched=!0,this.options.useStylus=t.touches&&t.touches[0].touchType&&t.touches[0].force>0?"stylus"===t.touches[0].touchType:this.options.useStylus||/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!window.MSStream,a.B.stopPropagation(t),this.stopSlide(),!t.touches||1==t.touches.length){this.setIScroll(),this.iScrollAddMoveClass(),this.iScroll.prevTouches=[{x:t.touches?t.touches[0].pageX:t.clientX,y:t.touches?t.touches[0].pageY:t.clientY}],this.distX=0,this.distY=0;var e=t.touches?t.touches[0]:t;this.pointX=e.pageX,this.pointY=e.pageY,this.iScroll.direction="",this.options.horizontalScroll&&!this.options.verticalScroll?this.iScroll.direction="horizontal":!this.options.horizontalScroll&&this.options.verticalScroll&&(this.iScroll.direction="vertical"),this.fingerLeft=this.getScrollLeft(),this.fingerTop=this.getScrollTop()}}catch(t){r.w.printStackTrace(t)}},d.prototype.handleTouchMove=function(t){try{if(!t.touches||1==t.touches.length){var e=t.touches?t.touches[0]:t,i=e.pageX-this.pointX,o=e.pageY-this.pointY;this.pointX=e.pageX,this.pointY=e.pageY,
this.distX+=i,this.distY+=o,this.options.eventSmoothing?s.v.setTimer(this._handleTouchMove,{key:this.id+"_handleTouchMove",caller:this,args:[{clientX:t.touches?t.touches[0].pageX:t.clientX,clientY:t.touches?t.touches[0].pageY:t.clientY}],delay:1,max:1}):this._handleTouchMove(t),(this.options.useStylus&&Math.abs(this.distX)>6||Math.abs(this.distY)>6)&&a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t)}},d.prototype._handleTouchMove=function(t){try{if(this.scrollLock||this.iScroll.prevTouches.length<=0)return;this.iScroll.prevTouches.push({x:t.touches?t.touches[0].pageX:t.clientX,y:t.touches?t.touches[0].pageY:t.clientY});var e=this.iScroll.prevTouches.length;this.iScroll.prevTouches=[this.iScroll.prevTouches[e-2],this.iScroll.prevTouches[e-1]];var i=this.iScroll.prevTouches,o=this.options.horizontalScroll?i[0].x-i[1].x:0,s=this.options.verticalScroll?i[0].y-i[1].y:0,a=this.render.clientWidth,n=this.render.clientHeight,l=this.getScrollTop(),h=this.getScrollLeft(),d=this.getMaxScrollTop(),c=this.getMaxScrollLeft();if(this.options.horizontalScroll&&this.options.verticalScroll&&!this.iScroll.direction){var u=Math.abs(s/o);(0==o||0==s)&&Math.abs(o+s)<=2?this.iScroll.direction="":this.iScroll.direction=0==o||u>2.747?"vertical":u<.364?"horizontal":"both"}if("vertical"==this.iScroll.direction?(o=0,h<0?(this._scrollTo(0,null),h=this.fingerLeft=0):h>c&&(this._scrollTo(c,null),h=this.fingerLeft=c)):"horizontal"==this.iScroll.direction&&(s=0,l<0?(this._scrollTo(null,0),l=this.fingerTop=0):l>d&&(this._scrollTo(null,d),l=this.fingerTop=d)),this.options.bounce||this.options.overScrollGlow||(0<=h&&h<=c&&(this.fingerLeft=h),0<=l&&l<=d&&(this.fingerTop=l)),h=this.fingerLeft+=o,l=this.fingerTop+=s,this.options.bounce)h<0?(h/=2)<-a/2&&(h=-a/2):h>c&&(h=c+(h-c)/2)>c+a/2&&(h=c+a/2),l<0?(l/=2)<-n/2&&(l=-n/2):l>d&&(l=d+(l-d)/2)>d+n/2&&(l=d+n/2);else if(h<0&&(h=0),h>c&&(h=c),l<0&&(l=0),l>d&&(l=d),this.options.overScrollGlow){if(this.fingerTop<0){WebSquare.style.show(this.dom.overScrollTop);var p=-2*(g=this.dom.overScrollTop.offsetHeight)/n*this.fingerTop-g;p>0&&(p=0),WebSquare.style.setStyle(this.dom.overScrollTop,"top",p+"px")}else WebSquare.style.hide(this.dom.overScrollTop);if(this.fingerTop>d){WebSquare.style.show(this.dom.overScrollBottom);var g,m=-2*(g=this.dom.overScrollBottom.offsetHeight)/n*(d-this.fingerTop)-g;m>0&&(m=0),WebSquare.style.setStyle(this.dom.overScrollBottom,"bottom",m+"px")}else WebSquare.style.hide(this.dom.overScrollBottom)}this._scrollTo(h,l)}catch(t){r.w.printStackTrace(t)}},d.prototype.handleTouchEnd=function(t){try{this.isTouched=!1;var e=this.iScroll.prevTouches.length;if(a.B.stopPropagation(t),0==e)return;var i=this.render.clientWidth,o=this.render.clientHeight,s=this.dom.container.scrollWidth,n=this.dom.container.scrollHeight,l=this.getMaxScrollLeft(),h=this.getMaxScrollTop(),d=this.getScrollLeft(),c=this.getScrollTop(),u=null,p=null,g=null,m=null;if(e>=2){this.iScroll.prevTouches=[this.iScroll.prevTouches[e-2],this.iScroll.prevTouches[e-1]];var f=this.iScroll.prevTouches,b=f[0].x-f[1].x,y=f[0].y-f[1].y;if("vertical"==this.iScroll.direction&&(b=0),"horizontal"==this.iScroll.direction&&(y=0),b*b+y*y>this.options.slideThreshold*this.options.slideThreshold){if(this.iScroll.prevTouches=[],this.isSliding=!0,this.options.paging){if(this.options.horizontalScroll)(u=(parseInt(d/i,10)+(b>0?1:0))*i)<0&&(u=0),u>l&&(u=l);if(this.options.verticalScroll)(p=(parseInt(c/o,10)+(y>0?1:0))*o)<0&&(p=0),p>h&&(p=h);g=this.options.pagingDuration,m="ease"}else u=d+this.getSlideFactor(b,s),p=c+this.getSlideFactor(y,n),g=this.options.slideDuration,m="deceleration";return this.slide({initX:d,initY:c,finishX:this.options.horizontalScroll?u:null,finishY:this.options.verticalScroll?p:null,duration:g,timingFunction:m}),void(!this.options.bounce&&this.options.overScrollGlow&&(0==c&&p>0||c==h&&p<h)&&this.hideOverScrollGlow())}}if(this.options.paging){
if(this.options.horizontalScroll&&!this.options.verticalScroll)u=parseInt((d+i/2)/i,10)*i;else if(!this.options.horizontalScroll&&this.options.verticalScroll){p=parseInt((c+o/2)/o,10)*o}g=this.options.pagingDuration}else g=this.options.resilienceDuration;d<0?u=0:l<d&&(u=l),c<0?p=0:h<c&&(p=h),null!=u||null!=p?(this.iScroll.prevTouches=[],this.isSliding=!0,this.slide({initX:d,initY:c,finishX:u,finishY:p,xResilience:null!=u,yResilience:null!=p,duration:g,timingFunction:"deceleration"})):(this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[]),this.hideOverScrollGlow()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleMouseOut=function(t){null==a.B.getRelatedTarget(t)&&this.handleTouchEnd(t)},d.prototype.finalize=function(){s.v.clearTimer(this.id+"_checkResize"),s.v.clearTimer(this.id+"_iScroll_slide"),s.v.clearTimer(this.id+"_handleTouchMove"),s.v.clearTimer(this.id+"_hideOverScrollGlowWithGlow"),s.v.clearTimer(this.id+"_hideOverScrollGlow"),s.v.clearTimer(this.id+"_iScrollRemoveClass"),WebSquare.dragdrop2.scrollable[this.uuid]=null,delete WebSquare.dragdrop2.scrollable[this.uuid]}},1316:(t,e,i)=>{i.r(e),i.d(e,{selectbox:()=>c,selectbox_native:()=>u});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(3729),d=i(1577),c=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(c.prototype,l.s.prototype),o.x.extend(c.prototype,h.E.prototype),o.x.extend(c.prototype,d.z.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.selectbox",pluginName:"selectbox",renderType:"component",mobileRenderType:"",serializable:!0,userEvents:["onchange","onclose","onviewchange","onblur","ontooltipshow","ontooltiphide","onselected"],systemEvents:["onclick","ondblclick","onfocus","onblur","onkeydown","onkeyup"],useOtherComponentId:"",useConfig:!0,value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,displayMode:"0",delimiter:"\t",textAlign:"",defaultStyle:"",activeStyle:"",defaultClass:"w2SelectDefault",activeClass:"w2SelectActive",disabledClass:"w2selectbox_disabled",useLocale:!1,submenuSize:"auto",direction:"auto",tableRender:"",tooltipDisplay:!1,tooltipShowAlways:!1,tooltipClass:"",tooltipTime:1,tooltipDisplayItem:!1,itemTooltipDisplay:!1,itemTooltipFormatter:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",setDataRemoveAll:!0,escape:!0,emptyItem:!1,emptyValue:"",emptyIndex:0,optionOrder:"choose",animation:"",closeonmouseleave:!1,selectedData:!0,dataListAutoRefresh:!1,refreshSelectedIndex:!1,preventWheelEvent:!1,customFormatter:"",customLabelFormatter:"",keyMoveListSync:!1,keyMoveSync:!0,wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",findItemFirstKey:!0,enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",depthColumn:"",depthColumnWidth:0,depthColumnHeight:0,depthColumnShowPath:!1,depthColumnPathDelimiter:"-",keyBufferResetTime:1e3,customToggleKey:"",preventKeyList:"",valueNotInList:"default"},c.prototype.initialize=function(t){try{if(this._initializeCommon(t&&"$blank"==t.getAttribute("chooseOptionLabel")),this.gridOptions={},this.gridViewOptions={},t){var e="xf"==t.getTagName().split(":")[0]?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,i=WebSquare.Elem.api.getElementsByTagName(t,"choices",e)[0];if(i){var o=WebSquare.Elem.api.getElementsByTagName(i,"gridItemset",s.v._XML_NAMESPACE.W2)[0];null==o&&(o=WebSquare.Elem.api.getElementsByTagName(i,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0]),o&&"w2:gridItemset"==o.getTagName()?this.itemTableMode="grid":o&&"w2:gridViewItemset"==o.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView")}
"grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t);var a=n.D.isMobile();if("ul"!==this.options.tableRender||"auto"==this.options.renderType&&a||(this.options.renderType="component"),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.myhelper=new WebSquare.korHelper,this._preventKeyObj={},this.options.preventKeyList)if("all"===this.options.preventKeyList)this._preventKeyObj.all=!0;else for(var l=this.options.preventKeyList.split(","),h=0;h<l.length;h++){var d=l[h].wq_trim();d&&(this._preventKeyObj[d]=!0)}this.options.itemTooltipDisplay=this.options.tooltipDisplayItem?this.options.tooltipDisplayItem:this.options.itemTooltipDisplay,this.options.itemTooltipDisplay&&this.options.itemTooltipFormatter&&(this.itemTooltipFormatter=n.D.getGlobalFunction(this.options.itemTooltipFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._initializeCommon=function(t){try{this.itemTable=null,this.isOpen=!1,this.statusSubLayer=!1,this.selectedIndex=-1,this.selectedAllIndex=-1,this.cursorIndex=-1,this.showRowIndex=0,this.displayCount=0,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.defaultAllOptionLabel=WebSquare.language.getMessage("SelectBox_all");var e=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/chooseOptionLabel/@value");this.defaultChooseOptionLabel=t||!t&&"$blank"===e?"":WebSquare.language.getMessage("SelectBox_choose"),this._initDisplayMode(),this.options.selectedData="false"!=this.options.selectedData&&!1!==this.options.selectedData,this.refreshStop=!1,this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.isFireTooltipEvent=!1,this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"ㅁ",67:"ㅊ",68:"ㅇ",69:"ㄷ",70:"ㄹ",71:"ㅎ",81:"ㅂ",82:"ㄱ",83:"ㄴ",84:"ㅅ",86:"ㅍ",87:"ㅈ",88:"ㅌ",90:"ㅋ"},this.korCharHash2={69:"ㄸ",81:"ㅃ",82:"ㄲ",84:"ㅆ",87:"ㅉ"},this.options.depthColumn&&(this.options.tableRender="ul")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{l.s.prototype.finalize.call(this),this.labelRuler&&(this.labelRuler.parentNode.removeChild(this.labelRuler),this.labelRuler=null),this.itemTable&&(this.itemTable.remove(),this.itemTable=null)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";i=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";var o=""==this.options.title?"":"title='"+this.options.title+"'",s=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'",a=""==this.options.textAlign?s:"style='text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'";return"ul"===this.options.tableRender?(t.push("<div id='"+this.id+"' "+e+" class='w2selectbox "+this.options.className+"' "+o+">"),t.push("<a id='"+this.id+"_main_tbody' class='w2selectbox_ul_table_main' href='#"+this.id+"_itemTable' aria-haspopup='true' aria-expanded='false' onclick='event.returnValue=false; return false;'>"),t.push("<div class='w2selectbox_ul_col_label' "+s+"><span id='"+this.id+"_label' class='w2selectbox_ul_label' "+a+"></span></div>"),t.push("<span class='w2selectbox_ul_col_arrow'></span>"),t.push("</a>"),
t.push("</div>")):(t.push("<div id='"+this.id+"' role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none' "+e+" class='w2selectbox "+this.options.className+"' "+i+" "+o+">"),t.push("<table class='w2selectbox_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2selectbox_row w2selectbox_row_main'>"),t.push("<td class='w2selectbox_col_label' "+s+"><div id='"+this.id+"_label' role='document' aria-live='assertive' aria-automatic='true' class='w2selectbox_label' "+a+"></div></td>"),t.push("<td class='w2selectbox_col_button' id='"+this.id+"_button'  aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>"),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>")),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.tbody=this.getElementById(this.id+"_main_tbody"),this.options.useOtherComponentId?s.v.setTimer((function(){this.otherComponent=n.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.B.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),n.D.isMobile()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),this._closeSubLayer()})))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()?(this.refreshItemArr(),
this.componentRedraw()):!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.modelControl.isBinded()){var i=this.modelControl.getData();this.setValueNM(i)}if(-1==this.selectedIndex&&this.getItemCount()>0&&(0==this.options.emptyIndex||!this.options.emptyIndex))if(this.modelControl.isBinded()){i=this.getValue();if(this.options.emptyRef){for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value==i){this.setSelectedIndexNM(0),this.modelControl.setData(i);break}}else this.setSelectedIndexNM(0),this.modelControl.setData(i)}else this.setSelectedIndexNM(0),this.broadcast({linkedDataList:["refresh",["replace"]]});else this.options.emptyIndex&&"number"==typeof this.options.emptyIndex?this.modelControl.isBinded()?(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(this.options.emptyIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})):this.selectedIndex>0&&this.getItemCount()>0&&(this.modelControl.isBinded()||(this.setSelectedIndexNM(this.selectedIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})));this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onComplete=function(){try{this.options.customFormatter&&this.customFormatter(),l.s.prototype.onComplete.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.customFormatter=function(){try{var t=null;"grid"===this.itemTableMode||"gridView"===this.itemTableMode||("function"==typeof this.options.customFormatter?t=this.options.customFormatter:null!=(t=n.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=t),"function"==typeof t&&(this.modelControl.isBinded()&&!this.modelControl.isDataCollectionItemsetBinded&&this.refreshItemArr(),this.itemArr=t.call(this,this.itemArr),this.componentRedraw()))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(t,e){try{if(this.refreshStop)return;if(this.modelControl.isItemsetBinded())if(this.refreshItemArr(),this.componentRedraw(!1,t,e),"grid"==this.itemTableMode?(this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid?(this.itemTable.grid.clearFilter(),this.setGridData(),this.options.allOption&&this.gridItemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))):1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))):"gridView"==this.itemTableMode&&(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView?"dataList"===this.gridViewOptions.dataComp.initializeType&&this.setGridViewData():1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))),this.modelControl.isBinded())this.refresh();else{if(this.options.customFormatter&&this.customFormatter(),"auto"==this.options.submenuSize&&this.itemTable&&"grid"!==this.itemTableMode&&"gridView"!==this.itemTableMode&&!0!==this.refreshStopItemTable){var i=this.getMaxLabelSize();this.itemTable.setStyle("width",i+"px")}-1!=this.getSelectedIndex()||null!=this.getValue()&&""!==this.getValue()&&"keepValue"!==this.options.valueNotInList||this.setSelectedIndexNM(0)}this.isOpen&&this.setItemTable(),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{
if(this.refreshStop)return;if(this.modelControl.isBinded()){var t=this.modelControl.getDataComp(),e=this.getItemCount();if(t&&"linkedDataList"===t.initializeType&&(this.options.chooseOption||this.options.allOption)&&(1!=e||this.itemArr[0].label!==this._getChooseOptionLabel()&&this.itemArr[0].label!==this.defaultAllOptionLabel?2==e&&this.itemArr[0].label===this._getChooseOptionLabel()&&this.itemArr[1].label===this.defaultAllOptionLabel&&(e-=2):e--),e>0){this.modelControl.isDataCollectionItemsetBinded&&this.refreshItemArr();var i=this.getValue(),o=this.modelControl.getData();this.options.customFormatter&&this.customFormatter();var s=this.setValueNM(o);1==s?(i!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}),null!=this.getValue()&&o!=this.getValue()&&this.modelControl.setData(this.getValue()),this.broadcast({linkedDataList:["refresh",["replace"]]})):isNaN(s)?null!=this.getValue()&&o!=this.getValue()&&this.modelControl.setData(this.getValue()):this._setValueNotInList(o,!1)}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.changeChooseOption=function(t,e){try{var i=-2;if(!0===this.options.chooseOption){i=-1;for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value===this.options.chooseOptionValue){i=s;break}i>-1&&this.itemArr.splice(i,1)}this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.itemArr=[{label:e,value:t}].concat(this.itemArr),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),i!==this.getSelectedIndex()&&-1!==this.getSelectedIndex()||this.setSelectedIndex(0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showChooseOption=function(t){try{var e=this._getChooseOptionLabel();e=WebSquare.xml.decode(e).replace("&nbsp;"," ");var i=this.options.chooseOptionValue;if(1==t)this.options.chooseOption!=t&&("all"==this.options.optionOrder&&1==this.options.allOption?this.itemArr.splice(1,0,{label:e,value:i}):this.itemArr=[{label:e,value:i}].concat(this.itemArr));else if(this.options.chooseOptions!=t)for(var o=0;o<this.itemArr.length;o++)if(this.itemArr[o].label==e){this.itemArr.splice(o,1);break}this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),-2!==this.getSelectedIndex()&&-1!==this.getSelectedIndex()&&0!==this.getSelectedIndex()||this.setSelectedIndex(0),this.options.chooseOption=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t,e,i){try{if(this.refreshStop)return;if(this.showRowIndex=0,!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.setSelectOptions(),this.itemArr.length>0){var o=0;if(e||this.options.refreshSelectedIndex&&"insertRow"===i)return"insertRow"!==i&&"replace"!=e&&this.getSelectedIndex()>-1&&(o=this.getSelectedIndex()),void this.setSelectedIndexNM(o);if(this.options.refreshSelectedIndex&&"setCellData"===i)o=this.getSelectedIndex();else if(this.modelControl.isItemsetBinded()&&!this.modelControl.isBinded()&&-1!==this.selectedIndex)return void(this.options.emptyItem?this.setSelectedIndexNM(-1):this.setSelectedIndexNM(0));if(this._setLabel(o),this.options.refreshSelectedIndex&&"setCellData"===i)return}else this.dom.label&&(this.dom.label.innerHTML="");this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setLabelWidthByItemLength=function(){try{var t=this.getMaxLabelSize();this.render&&(this.render.style.width=t+"px")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getMaxLabelSize=function(){try{this.labelRuler||(this.labelRuler=document.createElement("div"),this.labelRuler.style.position="absolute",this.labelRuler.style.top="-1000px",
this.labelRuler.style.left="-1000px",this.labelRuler.style.visibility="hidden",document.body.appendChild(this.labelRuler));for(var t=0,e=0;e<this.itemArr.length;e++)this.labelRuler.innerHTML=this.itemArr[e].label,this.labelRuler.offsetWidth>t&&(t=this.labelRuler.offsetWidth);var i=document.getElementById(this.id+"_button"),o=0;return i&&(o=i.offsetWidth||parseInt(WebSquare.style.getComputedStyle(i,"width"))),t+o+10}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSubLayer=function(){try{var t=this;if(null==this.itemTable){if("grid"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridOptions.width||(this.gridOptions.parentWidth=this.render.offsetWidth),this.gridOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridData();else if("gridView"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridViewData();else{if("ul"===this.options.tableRender){var e=this.options.textAlign?"text-align:"+this.options.textAlign+";":"";this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:e+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_sb",w2table_main:"w2table_sb_ul_main",w2table_row:"w2table_sb_ul_row",w2table_col:"w2table_sb_ul_col",w2table_col_over:this.options.depthColumn?"":"w2table_sb_ul_col_over",escape:this.options.escape,tableRender:this.options.tableRender,wheelRows:this.options.wheelRows,chooseOption:this.options.chooseOption,allOption:this.options.allOption,findItemKor:this.options.findItemKor,findItem:this.options.findItem,keyBufferResetTime:this.options.keyBufferResetTime,parent_uuid:this.uuid,depthColumn:this.options.depthColumn,depthColumnHeight:this.options.depthColumnHeight,depthColumnWidth:this.options.depthColumnWidth})}else this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{
row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_sb",w2table_main:"w2table_sb_main",w2table_row:"w2table_sb_row",w2table_col:"w2table_sb_col",w2table_col_over:"w2table_sb_col_over",escape:this.options.escape,wheelRows:this.options.wheelRows,chooseOption:this.options.chooseOption,allOption:this.options.allOption,findItemKor:this.options.findItemKor,findItem:this.options.findItem,keyBufferResetTime:this.options.keyBufferResetTime,parent_uuid:this.uuid,depthColumn:this.options.depthColumn,depthColumnHeight:this.options.depthColumnHeight,depthColumnWidth:this.options.depthColumnWidth});this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(e,i){var o,s=e.charCode?e.charCode:e.keyCode,r=t.selectedIndex,n=t.getValue();if(t.focus(),t.options.depthColumn&&(o={skipClose:!0}),t.setSelectedIndex1(i,o),t.options.keyMoveSync||0!=t.options.keyMoveSync||13!=s||"keydown"!==e.type){var l={oldValue:n,newValue:t.getValue(),oldSelectedIndex:r,newSelectedIndex:t.selectedIndex};a.B.fireEvent(t,"onselected",l)}})),this.itemTable.addKeyDownEventListener((function(e){var i=e.charCode?e.charCode:e.keyCode;t.options.customToggleKey==i?(t._closeSubLayer(),t.focus()):"ul"==this.options.tableRender&&t.itemTable.endReached?(t.itemTable.endReached=!1,t.closeSubLayer(),t.focus()):27==i&&(t._closeSubLayer(),t.focus())})),this.options.keyMoveSync||this.itemTable.addKeyUpEventListener((function(e,i){if(13==(e.charCode?e.charCode:e.keyCode)){var o=t.selectedIndex,s=t.getValue();t.focus(),t.setSelectedIndex1(i);var r={oldValue:s,newValue:t.getValue(),oldSelectedIndex:o,newSelectedIndex:t.selectedIndex};a.B.fireEvent(t,"onselected",r)}})),this.options.keyMoveListSync&&this.itemTable.addOnchangeListener((function(e){try{t.setSelectedIndex1(e,{skipClose:!0})}catch(t){r.w.printStackTrace(t,null,this)}}));var i=WebSquare.idCache[this.uuid],o=this.options.closeonmouseleave,s=this.options.itemTooltipDisplay;(o||s)&&this.itemTable.addMouseLeaveEventListener((function(e){if(o){var r=t.render.offsetHeight,a=t.getAbsolutePosition("top");e.clientY>=a&&e.clientY<=a+r||t.closeSubLayer()}s&&i.hideTooltip()})),s&&this.itemTable.addMouseOverEventListener((function(t){var e=n.D.getDataPrefix("index"),o=t,s=WebSquare.style.getAbsoluteLeft(o)+20,r=WebSquare.style.getAbsoluteTop(o)+o.offsetHeight+3,a="ul"===i.options.tableRender?o.innerText:o.innerHTML;if(i.itemTooltipFormatter&&"function"==typeof i.itemTooltipFormatter){var l=parseInt(o.getAttribute(e),10);a=i.itemTooltipFormatter(a,l,i.options._rowIndex,i.options._colIndex)}i.showTooltip(s,r,a)})),this.setSelectOptions(),this.setItemTable()}var l=document.getElementById(this.id+"_main_tbody");l&&l.setAttribute("aria-controls",this.id+"_itemTable")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setGridData=function(){try{if(this.itemTable.grid.setData(this.gridItemArr),this.options.allOption&&this.gridItemArr.length>0){for(var t=[],e=-1,i=0;i<this.itemsetObj.items.length;i++)-1==e&&this.itemsetObj.items[i].ref==this.itemsetObj.label&&(e=i),t.push("");t[-1==e?0:e]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,t,!1)}if(this.itemsetObj.sortIndex&&this.gridItemArr.length>0){var o=[];if(this.options.allOption){var s=this.itemsetObj.sortIndex.split(" ")[0],a=this.itemTable.grid.getCellInfo(s).options.dataType,n=parseInt(this.itemsetObj.sortOrder.split(" ")[0],10);o[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==a?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*n:t<e?-1*n:0)}}this.itemTable.grid.multisort({sortIndex:this.itemsetObj.sortIndex,sortOrder:this.itemsetObj.sortOrder,sortFuncArr:o})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setGridViewData=function(){try{
var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList);if(t.removeAll(),t.setData(this.gridViewOptions.dataComp.getAllFilteredData()),this.options.allOption||this.options.chooseOption){for(var e=[],i=-1,o=0;o<this.itemsetObj.items.length;o++)-1==i&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(i=t.bodyIdColIndexMap[this.itemsetObj.label]),e.push("");this.options.allOption&&(e[-1==i?0:i]=this.defaultAllOptionLabel,t.setRowData(0,e,!1)),this.options.chooseOption&&(e[-1==i?0:i]=this._getChooseOptionLabel(),t.setRowData(0,e,!1))}for(var s=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display,a=0;a<this.itemArr.length;a++)this.itemArr[a]._hidden?this.itemTable.gridView.setRowVisible(a,!1):this.itemTable.gridView.setRowVisible(a,!0);s&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),s&&this.itemTable.hide()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectOptions=function(){try{null!=this.itemTable&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&!0!==this.refreshStopItemTable&&this.itemTable.setItemArr(this.itemArr)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemTable=function(){try{var t=this.render.offsetWidth,e=document.body.offsetWidth,i=0,o=WebSquare.style.getAbsoluteLeft(this.render),a=WebSquare.style.getAbsoluteTop(this.render),n=this.itemTable.render.getElementsByTagName("td");if("ul"===this.options.tableRender&&(n=this.itemTable.render.getElementsByTagName("li")),this.options.depthColumn);else if(n&&n.length>0){for(var l=this.options.visibleRowNum,h=0,d=0;d<this.itemArr.length&&l>0;d++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===this.itemArr[d]._hidden||(i+=n[d].offsetHeight,l--,h++);s.v.browserCheck.moz&&i<34&&1===h&&(i=34),this.itemTable.setStyle("height",i+"px")}else this.itemTable.setStyle("height","0px");"auto"==this.itemTable.getStyle("overflow-x")&&(i+=20,this.itemTable.setStyle("height",i+"px"));var c=WebSquare.style.getSize(this.itemTable.render,"outerwidth")-WebSquare.style.getSize(this.itemTable.render,"width");if(this.options.depthColumn);else if("fixed"==this.options.submenuSize)this.itemTable.setStyle("width",t-c+"px"),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=t+"px":this.itemTable.render.firstChild.style.width=t-17+"px";else if("auto"==this.options.submenuSize){var u,p=this.render.offsetWidth,g=WebSquare.style.getSize(this.itemTable.render,"innerwidth")-WebSquare.style.getSize(this.itemTable.render,"width"),m=this.itemTable.render.clientWidth-g;if(e>p&&e<m&&(m=e-c),m=p-c,this.itemTable.setStyle("width",m+"px"),this.itemTable.render.clientHeight>=this.itemTable.render.scrollHeight||this.getItemCount()<=this.options.visibleRowNum)this.itemTable.render.firstChild.style.width=m+"px",(u=this.itemTable.render.scrollWidth-c)>m&&(this.itemTable.render.firstChild.style.width=u+"px",this.itemTable.setStyle("width",u+"px"));else this.itemTable.render.firstChild.style.width=m-17+"px",(u=this.itemTable.render.scrollWidth-c)>e&&(u=e-17),u>m-17&&(this.itemTable.render.firstChild.style.width=u+"px",this.itemTable.setStyle("width",u+17+"px"));0===this.getItemCount()&&(this.itemTable.setStyle("width","0px"),this.itemTable.render.firstChild.style.width="0px")}else this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1&&this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+17+"px");var f=this.options.direction;if("auto"==f){var b=document.body.scrollTop;b<document.documentElement.scrollTop&&(b=document.documentElement.scrollTop);var y=WebSquare.style.getScale(),v=(a-b)*y,w=document.documentElement.clientHeight-(v+this.render.offsetHeight),S=this.itemTable.render.offsetHeight*y,C=Math.max(w,v);if(C<S&&n&&n.length>0){if(!this.options.depthColumn){var _=0
;for(d=0;d<n.length&&!(_+n[d].offsetHeight+2>C);d++)_+=n[d].offsetHeight;this.itemTable.rowCount=d,this.itemTable.setStyle("height",_+"px")}C!==w&&(f="up")}else w<S&&v>S&&(f="up")}if("up"==f?a-=this.itemTable.render.offsetHeight:a+=this.render.offsetHeight,this.options.depthColumn);else if(document.documentElement.clientWidth<o+this.itemTable.render.offsetWidth)(o=o+this.render.offsetWidth-this.itemTable.render.offsetWidth)<0?(o=WebSquare.style.getAbsoluteLeft(this.render),m=document.body.offsetWidth-17-o,this.itemTable.setStyle("width",m+"px"),"auto"!=this.itemTable.getStyle("overflow-x")&&(i+=20),this.itemTable.setStyle("height",i+"px"),this.itemTable.setStyle("overflow-x","auto")):this.itemTable.setStyle("overflow-x","hidden");else{m=this.itemTable.render.firstChild.offsetWidth;var x=this.itemTable.render.clientWidth;if(o+m<e&&"auto"==this.itemTable.getStyle("overflow-x")){var I=m>x?m:x;i-=20,this.itemTable.setStyle("height",i+"px"),this.itemTable.setStyle("width",I+"px"),this.itemTable.setStyle("overflow-x","hidden")}}this.itemTableDirection=f,this.itemTable.render.style.left=o+"px",this.itemTable.render.style.top=a+"px",WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}t.sort(),"descending"==this.options.sortMethod&&t.reverse(),this.itemArr=t}for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].orgLabel||this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);if("all"==this.options.optionOrder){if(1==this.options.chooseOption){var s=this._getChooseOptionLabel();s=WebSquare.xml.decode(s).replace("&nbsp;"," "),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr))}else if(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),1==this.options.chooseOption){s=this._getChooseOptionLabel();s=WebSquare.xml.decode(s).replace("&nbsp;"," "),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._openSubLayer=function(){try{if(this.setSubLayer(),!this.isOpen){this.itemTable.show(),this.addClass("w2selectbox_open");var t=document.getElementById(this.id+"_main_tbody");if(t&&t.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),n.D.isMobile()||this.itemTable.focus(),"ul"==this.options.tableRender&&(this.itemTable.removeClass(this.itemTable.selectedCell,this.itemTable.options.w2table_col_over),this.itemTable.selectedCell=null),this.options.emptyItem?this.itemTable.setSelectedIndex(this.selectedIndex,{noChangeFunc:!0}):-1!=this.selectedIndex&&this.itemTable.setSelectedIndex(this.selectedIndex),""!=this.options.animation&&"string"==typeof this.options.animation){var e="down",i=WebSquare.style.getAbsoluteTop(this.render),o=document.body.scrollTop;o<document.documentElement.scrollTop&&(o=document.documentElement.scrollTop);var s=i-o,a=document.documentElement.clientHeight-(s+this.render.offsetHeight),l=this.itemTable.render.offsetHeight;a<l&&s>l&&(e="up"),
"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("slow"):"slidedown"==this.options.animation.toLowerCase()&&"down"==e&&$("#"+this.itemTable.id).hide().slideDown("fast")}this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._openOtherLayer=function(){try{var t=this.otherComponent;if("grid"==this.itemTableMode?(this.setSubLayer(),this.setGridData(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),t=this.itemTable):"gridView"==this.itemTableMode&&(this.setSubLayer(),this.setGridViewData(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.style.height),t=this.itemTable),!this.isOpen){t.setPosition(0,0),t.show(),this.addClass("w2selectbox_open");var e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render),o=this.options.direction;if("auto"==o){var s=document.body.scrollTop;s<document.documentElement.scrollTop&&(s=document.documentElement.scrollTop);var a=i-s,l=document.documentElement.clientHeight-(a+this.render.offsetHeight),h=t.render.offsetHeight;l<h&&a>h&&(o="up")}"up"==o?"gridView"==this.itemTableMode?i-=t.gridView.render.offsetHeight:i-=t.grid.render.offsetHeight:i+=this.render.offsetHeight,"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(e=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(t.render.style.width=this.render.offsetWidth+"px")),document.documentElement.clientWidth<e+t.render.offsetWidth&&(e=e+this.render.offsetWidth-t.render.offsetWidth),e<0&&(e=0),t.render.style.left=e+"px",t.render.style.top=i+"px",this.isOpen=!0,this.itemTableDirection=o,WebSquare.style.adjustZIndex(this.uuid,t.uuid,"itemTable"),!n.D.isMobile()&&this.options.findItemFirstKey&&("grid"==this.itemTableMode?t.grid.render.focus():"gridView"==this.itemTableMode&&t.gridView.render.focus())}-1!=this.selectedIndex&&this.itemTable.setSelectedIndex(this.selectedIndex)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.closeSubLayer=function(t){try{var e={documentClick:t};null!=this.itemTable&&("grid"==this.itemTableMode?this.itemTable.grid.applyFocusedCellOut(this.itemTable.grid.focusedCell[0]):"gridView"==this.itemTableMode&&this.itemTable.gridView.applyFocusedCellOut(this.itemTable.gridView.focusedCell[0])),WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._closeSubLayer=function(t){try{var e=(t=t||{}).documentClick;if(this.isOpen&&null!=this.itemTable){this.itemTable.hide(),this.removeClass("w2selectbox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex),!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1);var i=document.getElementById(this.id+"_main_tbody");i&&i.setAttribute("aria-expanded","false")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i&&(i.hide(),this.removeClass("w2selectbox_open"),this.isOpen=!1,!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t,e){try{if(t=parseInt(t,10),
isNaN(t))return;if(t<0||t>=this.getItemCount()){if(this.options.emptyItem)if(this.modelControl.isBinded())(1==this.options.selectedData||0!=e)&&this.modelControl.setData(this.options.emptyValue),this.setSelectedIndexNM(-1);else{var i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(-1),-1!=i&&a.B.fireEvent(this,"onchange",{oldValue:o,newValue:this.getValue()})}return}if(this.modelControl.isBinded()){var s=this.modelControl.dataCollectionRefInfo?this.modelControl.dataCollectionRefInfo.dataComp:null;1==this.options.selectedData?(this.modelControl.setData(this.itemArr[t].value),null==s||s.getBroadcast()||this.setSelectedIndexNM(t)):0!=e?this.itemArr[t].value!=WebSquare.allValue?(this.modelControl.setData(this.itemArr[t].value),1==this.options.chooseOption&&0==t?this.setSelectedIndexNM(0):null==s||s.getBroadcast()||this.setSelectedIndexNM(t)):(this.modelControl.setData(""),this.setSelectedIndexNM(t)):this.setSelectedIndexNM(-1)}else{i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(t),i!=this.getSelectedIndex()&&a.B.fireEvent(this,"onchange",{oldValue:o,newValue:this.getValue()})}this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t){try{return t=parseInt(t,10),isNaN(t)?!1:t<0||t>=this.getItemCount()?!!this.options.emptyItem&&(this.selectedIndex=-1,this.dom.label.innerHTML="",this.itemTable&&this.itemTable.setSelectedIndex(0),!0):(this.selectedIndex=t,this._setLabel(t),this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t),!0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAllSelectedIndex=function(t,e){try{if(!this.allItemArr[t])return this.selectedAllIndex=-1,!1;this.selectedIndex=-1,this.selectedAllIndex=t;var i=this.allItemArr[t].label+"";return this.dom.label&&(this.dom.label.innerHTML=this._getLabel(i)),e&&this.modelControl.setData(this.allItemArr[t].value),NaN}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedRow=function(){try{if("gridView"==this.itemTableMode&&this.itemTable){var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList);if(t)return t.getRowArray(this.getSelectedIndex())}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{var e=!0;if(n.D.isNull(t))return!1;var i=this.getValue();if(this.modelControl.isBinded())this.modelControl.setData(t);else{i=this.getValue();var o=this.setValueNM(t);1==o?i!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}):isNaN(o)||(this._setValueNotInList(t),e=!1)}return this.broadcast({linkedDataList:["refresh",["replace"]]}),e}catch(t){return r.w.printStackTrace(t,null,this),!1}},c.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;t=t.toString();for(var e=this.getItemCount(),i=0;i<e;i++)if(this.itemArr[i].value==t)return this.setSelectedIndexNM(i),!0;return this.setAllValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}if(n.D.isNull(t))return!1;t=t.toString();for(var i=this.allItemArr.length,o=0;o<i;o++)if(this.allItemArr[o].value==t)return this.setAllSelectedIndex(o,e);return!1}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._setValueNotInList=function(t,e){try{switch(this.options.valueNotInList){case"keepValue":if(t)if(this.selectedIndex=-1,null!=this.dom.label.textContent)this.dom.label.textContent=t;else if(null!=this.dom.label.innerText)this.dom.label.innerText=t;else{var i=this._getLabel(t);this.dom.label.innerHTML=i}else this.options.emptyItem?this.setSelectedIndex(-1):this.setSelectedIndex(0);break;case"default":
default:this.options.emptyItem?this.setSelectedIndex(-1,e):this.setSelectedIndex(0,e)}}catch(t){return r.w.printStackTrace(t,null,this),!1}},c.prototype.getValue=function(){try{if(this.itemArr[this.selectedIndex])return this.itemArr[this.selectedIndex].value;var t=this.getAllValue();return!1!==t?t:this._getValueNotInList()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}return!!this.allItemArr[this.selectedAllIndex]&&this.allItemArr[this.selectedAllIndex].value}catch(t){return r.w.printStackTrace(t,null,this),!1}},c.prototype._getValueNotInList=function(){try{switch(this.options.valueNotInList){case"keepValue":return(null!=this.dom.label.textContent?this.dom.label.textContent:null!=this.dom.label.innerText?this.dom.label.innerText:this.dom.label.innerHTML)||(this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null);case"default":default:return this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null}}catch(t){return r.w.printStackTrace(t,null,this),null}},c.prototype.setText=function(t,e){try{var i=this.getItemCount(),o="";if(e)for(var s=0;s<i;s++)this.itemArr[s].orgLabel==t&&(o=this.itemArr[s].value);else for(s=0;s<i;s++)this.itemArr[s].label==t&&(o=this.itemArr[s].value);this.setValue(o)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{return this.itemArr[this.selectedIndex]?t?this.itemArr[this.selectedIndex].orgLabel:this.itemArr[this.selectedIndex].label:this.options.emptyItem&&-1==this.selectedIndex?"":null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addItemArr=function(t,e,i){try{!0===i||!1===i?this.itemArr.push({label:t,value:e,_hidden:i}):this.itemArr.push({label:t,value:e})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i,o){try{if(i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount()),null==o&&(o=this.options.dataListAutoRefresh),this.itemsetObj.nodeset.match("data:")&&o){var s=this.modelControl.getDataComp();if(s&&WebSquare.idCache[s.uuid]){var a={};a[this.itemsetObj.value]=t,a[this.itemsetObj.label]=e,this.stopRefresh(!0),s.insertJSON(i,[a]),this.stopRefresh(!1)}}var n={};return n.value=t,n.label=e,this.itemArr.splice(i,0,n),"0"!=this.options.displayMode&&(this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i)),this.options.emptyItem&&-1==this.selectedIndex&&this.setSelectedIndex(0),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t,e){try{if(t=parseInt(t,10),isNaN(t))return;if(null==e&&(e=this.options.dataListAutoRefresh),this.itemsetObj.nodeset.match("data:")&&e){var i=this.modelControl.getDataComp();if(i&&WebSquare.idCache[i.uuid]){var o=0;this.options.chooseOption&&o++,this.options.allOption&&o++,this.stopRefresh(!0),i.removeRow(t-o),this.stopRefresh(!1)}}var s=null;return t>=0&&t<this.getItemCount()&&(s=this.itemArr.splice(t,1)[0]),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.options.emptyItem&&(-1!=this.selectedIndex&&t!=this.selectedIndex||this.setSelectedIndex(0)),this.options.emptyItem&&"native"==this.options.renderType?this.selectedIndex>t&&t>=0?this.setSelectedIndex(this.selectedIndex-1):this.setSelectedIndex(this.selectedIndex):this.selectedIndex>t&&t>=0&&this.setSelectedIndex(this.selectedIndex-1),s}catch(t){r.w.printStackTrace(t,null,this)}},
c.prototype.removeAll=function(t){try{var e=this.getValue();if(this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),1==this.options.chooseOption)){var i=this._getChooseOptionLabel();i=WebSquare.xml.decode(i).replace("&nbsp;"," "),this.itemArr=[{label:i,value:this.options.chooseOptionValue}].concat(this.itemArr)}if(this.setSelectOptions(this.itemArr),this.dom.label)if(this.itemArr.length>0){i=this._getLabel(this.itemArr[0].label+"");this.dom.label.innerHTML=i}else this.dom.label.innerHTML="";if(this.options.setDataRemoveAll&&(t?this.setSelectedIndex(0):(this.selectedIndex=-1,!this.dom.label&&this.dom.select&&(this.dom.select.selectedIndex=-1),this.modelControl.isBinded()&&this.modelControl.setData(""),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}))),"grid"==this.itemTableMode)this.gridItemArr=[],this.itemTable&&this.itemTable.grid.removeAll();else if("gridView"==this.itemTableMode){if(this.gridViewItemArr=[],this.itemTable)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).removeAll()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":"component"==this.options.renderType?e&&this.closeSubLayer():e?this.dom.select&&this.dom.select.setAttribute("disabled","disabled"):this.dom.select&&this.dom.select.removeAttribute("disabled");var i=this.dom.button;1==e?(this.addClass(this.render,this.options.disabledClass),null!=i&&this.addClass(i,"w2selectbox_button_disabled")):(this.removeClass(this.render,this.options.disabledClass),null!=i&&this.removeClass(i,"w2selectbox_button_disabled"));break;case"mandatory":1==e?this.addClass(this.render,"w2selectbox_mandatory"):this.removeClass(this.render,"w2selectbox_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex1=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.selectedIndex,o=this.getValue();if(this.setSelectedIndex(t),i!=this.selectedIndex){var s={oldValue:o,newValue:this.getValue(),oldSelectedIndex:i,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onviewchange",s)}!0!==e.skipClose&&this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{var e=this.getValue();""===this.options.initValue&&this.itemArr&&this.itemArr[0]&&(this.options.initValue=this.itemArr[0].value),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hide=function(){try{this.closeSubLayer(),l.s.prototype.hide.call(this)}catch(t){r.w.printStackTrace(t)}},c.prototype.showTooltip=function(t,e,i){try{if(!i)return;null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o="";this.options.itemTooltipDisplay&&(o="position:absolute;z-index:10000;");var l=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var h=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(h){var d=n.D.getGlobalFunction(h,l.scope_id),c=!0;if("function"==typeof d&&(c=d(l)),!c)return}}catch(t){r.w.printStackTrace(t)}
this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2selectbox_tooltip "+this.options.tooltipClass,style:o}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i,this.isFireTooltipEvent||(this.isFireTooltipEvent=!0,a.B.fireEvent(this,"ontooltipshow"))})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&(this.tooltip.setStyle("display","none"),a.B.fireEvent(this,"ontooltiphide"),this.isFireTooltipEvent=!1)})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;n.D.isMobile()||this.focus(),this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex();if(!0===this._preventKeyObj[e]||!0===this._preventKeyObj.all)return;if(13==e&&this.options.keyMoveSync)return void this.handleClickEvent(t);if(this.options.customToggleKey==e)return void this.toggle();if(this.isOpen)return;if(!this.options.keyMoveSync||38!=e&&40!=e&&33!=e&&34!=e&&35!=e&&36!=e)return 9==e?(this.tabOrderMoveStart=!1,void(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))):(this.findItemStartedWithKeyChar(t,e),void(this.options.findItem&&this._keyBuffer&&(n.D.clearTimeout(this.id+"_selectKeyBuffer"),n.D.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime}))));if(this._oldIndex=this.selectedIndex,this._oldValue=this.getValue(),38==e)i>0&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(i-1),this.targetFocusedIndex=i-1):this.setSelectedIndex1(i-1));else if(40==e)"grid"==this.itemTableMode||"gridView"==this.itemTableMode?i+1<this.getItemCount()&&(this.setSelectedIndex1(i+1),this.targetFocusedIndex=i+1):i+1<this.getItemCount()&&this.setSelectedIndex1(i+1);else if(33==e){if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(o=i-this.options.visibleRowNum)<0&&(o=0),this.setSelectedIndex1(o),this.targetFocusedIndex=o;else(o=i-this.options.visibleRowNum)<0&&(o=0),this.setSelectedIndex1(o)}else if(34==e){var o;if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(o=i+this.options.visibleRowNum)>=this.getItemCount()&&(o=this.getItemCount()-1),this.setSelectedIndex1(o),this.targetFocusedIndex=o;else(o=i+this.options.visibleRowNum)>=this.getItemCount()&&(o=this.getItemCount()-1),this.setSelectedIndex1(o)}else 35==e?"grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(this.getItemCount()-1),this.targetFocusedIndex=this.getItemCount()-1):this.setSelectedIndex1(this.getItemCount()-1):36==e&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(0),this.targetFocusedIndex=0):this.setSelectedIndex1(0));if(this._oldIndex!=this.selectedIndex){var s={oldValue:this._oldValue,newValue:this.getValue(),oldSelectedIndex:this._oldIndex,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onselected",s)}a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode
;if(!0===this._preventKeyObj[i]||!0===this._preventKeyObj.all)return;if(!this.options.keyMoveSync&&this.modelControl.isBinded()){var o=this.getSelectedIndex();if(13==i){for(var s=this.modelControl.getData(),l=-1,h=0;h<this.itemArr.length;h++)if(this.itemArr[h].value==s){l=h;break}var d={oldValue:s,newValue:this.getValue(),oldSelectedIndex:l,newSelectedIndex:o};this.setSelectedIndex(this.getSelectedIndex()),a.B.fireEvent(this,"onselected",d)}else if(38==i||40==i||33==i||34==i||35==i||36==i)if(this._onSelected=!1,this._oldIndex=this.selectedIndex,this._oldValue=this.getValue(),38==i)o>0&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(o-1),this.targetFocusedIndex=o-1):this.setSelectedIndexNM(o-1));else if(40==i)"grid"==this.itemTableMode||"gridView"==this.itemTableMode?o+1<this.getItemCount()&&(this.setSelectedIndexNM(o+1),this.targetFocusedIndex=o+1):o+1<this.getItemCount()&&this.setSelectedIndexNM(o+1);else if(33==i){if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(c=o-this.options.visibleRowNum)<0&&(c=0),this.setSelectedIndexNM(c),this.targetFocusedIndex=c;else(c=o-this.options.visibleRowNum)<0&&(c=0),this.setSelectedIndexNM(c)}else if(34==i){var c;if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(c=o+this.options.visibleRowNum)>=this.getItemCount()&&(c=this.getItemCount()-1),this.setSelectedIndexNM(c),this.targetFocusedIndex=c;else(c=o+this.options.visibleRowNum)>=this.getItemCount()&&(c=this.getItemCount()-1),this.setSelectedIndexNM(c)}else 35==i?"grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(this.getItemCount()-1),this.targetFocusedIndex=this.getItemCount()-1):this.setSelectedIndexNM(this.getItemCount()-1):36==i&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(0),this.targetFocusedIndex=0):this.setSelectedIndexNM(0))}if(9==i||13==i&&this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMousewheelEvent=function(t){try{if(this.options.preventWheelEvent)return;a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2selectbox_focus")&&!this.isOpen){var i=this.getSelectedIndex();t.wheelDelta>0||t.detail<0?this.setSelectedIndex1(i-1):this.setSelectedIndex1(i+1)}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusEvent=function(t){try{a.B.stopEvent(t),this.addClass(this.dom.tbody,"w2selectbox_focus"),this.addClass("w2selectbox_body_focus")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleBlurEvent=function(t){try{a.B.stopEvent(t),this.removeClass(this.dom.tbody,"w2selectbox_focus"),this.removeClass("w2selectbox_body_focus"),this.itemTable&&this.itemTable.itemTableFocus||a.B.fireEvent(this,"onblur",t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{if(a.B.stopEvent(t),this.addClass(this.dom.tbody,"w2selectbox_over"),this.addClass("w2selectbox_body_over"),!this.isOpen){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2selectbox")&&(1==this.options.tooltipDisplay||1==this.options.tooltipShowAlways)){var i=e.getElement(),o=i.getElementsByClassName("w2selectbox_label")[0],s=WebSquare.style.getStyle(o,"text-overflow"),n=this.dom.label.innerHTML;if(!0===this.options.tooltipShowAlways){var l=WebSquare.style.getAbsoluteLeft(i)+20,h=WebSquare.style.getAbsoluteTop(i)+this.render.offsetHeight+3;this.showTooltip(l,h,n)}else if("ellipsis"==s){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",
this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=o.className,this.toolTipRuler.innerHTML=o.innerText,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(o,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(o,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(o,"font-weight");var d=this.toolTipRuler.offsetWidth,c=o.clientWidth;if(3!=o.nodeType){var u=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),p=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");d-=parseInt(u||"0",10),d-=parseInt(p||"0",10),c-=parseInt(WebSquare.style.getStyle(o,"padding-left"),10),c-=parseInt(WebSquare.style.getStyle(o,"padding-right"),10),c-=parseInt(WebSquare.style.getStyle(i,"padding-left"),10),c-=parseInt(WebSquare.style.getStyle(i,"padding-right"),10)}if(c<d){l=WebSquare.style.getAbsoluteLeft(i)+20,h=WebSquare.style.getAbsoluteTop(i)+this.render.offsetHeight+3;document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(n=this.options.tooltipItemLabel),this.showTooltip(l,h,n)}}}e=null}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),1!=this.options.tooltipDisplay&&1!=this.options.tooltipShowAlways||this.hideTooltip(),this.removeClass(this.dom.tbody,"w2selectbox_over"),this.removeClass("w2selectbox_body_over")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.findItemStartedWithKeyChar=function(t,e){try{var i=this.keyCharHash[e],o=-1;if(i){var s=this.korCharHash[e],a=this.korCharHash2[e],l=this.selectedIndex;this.options.findItem?(this._keyBuffer+=i,l=0):(this._keyBuffer=i,l++);for(var h=1;;)if(l%=this.itemArr.length,!0!==this.itemArr[l]._hidden){var d=this.itemArr[l].label.toLowerCase();if(0!=l||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=l&&1!=l||!0!==this.options.chooseOption||!0!==this.options.allOption){var c=!1;s&&!t.shiftKey?c=this.myhelper.startWith(d,s):a&&t.shiftKey&&(c=this.myhelper.startWith(d,a));var u=this.options.findItem?this._keyBuffer:i;if(d.startsWith(u)||c&&n.D.getBoolean(this.options.findItemKor)){o=l;break}if(d.startsWith(u)){this._keyBuffer="",o=l;break}if(h>this.itemArr.length)break;l++,h++}else{if(this.itemArr.length<=2)break;l++}else{if(this.itemArr.length<=1)break;l++}}else l++;if(o>-1)return this.setSelectedIndex1(o),!0}if(-1==o)return this._keyBuffer="",!1}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{"string"==typeof t&&t.length>0&&(this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype._setLabel=function(t,e){try{if(!this.dom.label||t<0||t>=this.getItemCount())return;var i=e&&e.skipCustomFormatter;if(t<0||t>=this.getItemCount())return;var o=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&!0!==i&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var s=this.itemArr[t].value+"",a=this.itemArr[t].orgLabel+""
;(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(o=this.customLabelFormatter.call(this,a,s,this.isOpen))}else{if(this.options.depthColumn&&this.options.depthColumnShowPath){for(var l=[o],h=this.itemArr[t]._depth,d=t-1;d>=0;d--){var c=this.itemArr[d]._depth;if(c<h&&(l.unshift(this.itemArr[d].label),(h=c)<=1))break}o=l.join(this.options.depthColumnPathDelimiter)}o=this._getLabel(o)}this.dom.label.innerHTML=o}catch(t){r.w.printStackTrace(t)}},c.prototype._getLabel=function(t){try{var e=t;return n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10?(t.indexOf("&")>-1&&(t=t.wq_replaceAll("&","&amp;")),t=this.options.escape?WebSquare.xml._encode(t):t.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;")):this.options.escape&&(t=WebSquare.xml._encode(t)),e}catch(t){r.w.printStackTrace(t)}},c.prototype.setDisplayMode=function(t){try{if("label"==t||"value"==t||"value delim label"==t||"label delim value"==t){var e=this.options.displayMode;this.options.displayMode=t,this._initDisplayMode(),e!=this.options.displayMode&&this._refreshItemTable()}}catch(t){r.w.printStackTrace(t)}},c.prototype.setDelimiter=function(t){try{this.options.delimiter!=t&&(this.options.delimiter=t||"\t","0"!=this.options.displayMode&&"3"!=this.options.displayMode&&this._refreshItemTable())}catch(t){r.w.printStackTrace(t)}},c.prototype._refreshItemTable=function(){try{if(this.isOpen&&this.closeSubLayer(),this.setSelectItemArr(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode)if(this.itemTable)this.itemTable.setItemArr(this.itemArr);else if("native"===this.options.renderType){var t=this.getSelectedIndex();this.componentRedraw(),this.setSelectedIndexNM(t)}this._setLabel(this.getSelectedIndex())}catch(t){r.w.printStackTrace(t)}},c.prototype._getChooseOptionLabel=function(t){try{var e;if("$blank"===this.options.chooseOptionLabel)e="";else if(e=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var i=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);i&&(e=i)}return e}catch(t){r.w.printStackTrace(t)}},c.prototype.stopRefresh=function(t){try{this.refreshStop=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.stopRefreshItemTable=function(t){try{this.refreshStopItemTable=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.focus=function(){"ul"==this.options.tableRender?this.dom.tbody.focus():this.render.focus()},c.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.w.printStackTrace(t)}return t},c.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},c.prototype.restore=function(t){this.setSelectedIndex(t.selectedIndex)};var u=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(u.prototype,c.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.selectbox",pluginName:"selectbox",renderType:"native",userEvents:["onchange","onclose","onviewchange","onfocus"],useConfig:!0,value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",displayMode:"0",delimiter:"\t",textAlign:"",useLocale:!1,disabledClass:"w2selectbox_disabled",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",dataListAutoRefresh:!1,refreshSelectedIndex:!1,title:"",emptyItem:!1,emptyValue:"",emptyIndex:0,findItem:!1,initStyle:!1},u.prototype.initialize=function(t){try{this._initializeCommon(t&&"$blank"==t.getAttribute("chooseOptionLabel")),this.initializeItemArr(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.finalize=function(){
l.s.prototype.finalize.call(this)},u.prototype.toHTML=function(){try{var t=[],e=this.options.style?"style='"+this.options.style+"'":"",i=this.options.title?"title='"+this.options.title+"'":"";if("select"==this.options.renderType){var o=this.options.textAlign?"style='text-align:"+this.options.textAlign+";"+this.options.style+"'":e;t.push("<select id='"+this.id+"' "+o+" class='w2selectbox_select "+this.options.className+"' "+i+">");for(var s=0;s<this.itemArr.length;s++)t.push("<option>"+this.itemArr[s].label+"</option>");t.push("</select>")}else{var a=this.options.textAlign?"style='text-align:"+this.options.textAlign+"'":"";t.push("<div id='"+this.id+"' "+e+" class='w2selectbox_native "+(n.D.isMobile()?"w2selectbox_native_mobile ":"")+(this.options.labelWidthAuto?"":"fixedWidth ")+this.options.className+"'>"),t.push("<div class='w2selectbox_native_innerDiv'>"),t.push("<select class='w2selectbox_native_select' id='"+this.id+"_input_0' "+i+a+">");for(s=0;s<this.itemArr.length;s++)t.push("<option>"+this.itemArr[s].label+"</option>");t.push("</select>"),t.push("</div>"),t.push("</div>")}return t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{if(this.dom.select="select"==this.options.renderType?this.render:this.render.firstChild.firstChild,!(n.D.isIE(6)||n.D.isIE(7))&&"native"==this.options.renderType){var t=this.render.clientHeight-this.dom.select.offsetHeight;t>0&&(this.dom.select.style.marginTop=parseInt(t/2,10)+"px")}!0===this.options.labelWidthAuto&&(this.render.style.width=""),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.modelControl.isBinded()){var i=this.modelControl.getData();this.setValueNM(i)}if(-1==this.selectedIndex&&this.getItemCount()>0&&(0==this.options.emptyIndex||!this.options.emptyIndex))if(this.modelControl.isBinded()){i=this.getValue();if(this.options.emptyRef){for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value==i){this.setSelectedIndexNM(0),this.modelControl.setData(i);break}}else this.setSelectedIndexNM(0),this.modelControl.setData(i)}else this.setSelectedIndexNM(0),this.broadcast({linkedDataList:["refresh",["replace"]]});else if(this.getItemCount()>0&&this.modelControl.isBinded()&&(0==this.options.emptyIndex||!this.options.emptyIndex)){i=this.getValue();this.modelControl.getData()!==i&&this.modelControl.setData(i)}else this.options.emptyIndex&&"number"==typeof this.options.emptyIndex&&(this.modelControl.isBinded()?(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(this.options.emptyIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})));this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.event.addListener2(this.dom.select,"onchange",this.event.bindAsEventListener(this,this.handleOnchange)),this.event.addListener(this.dom.select,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.dom.select,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.dom.select,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.dom.select,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.componentRedraw=function(t,e,i){try{if(this.refreshStop)return;this.showRowIndex=0;var o=0;if(this.options.refreshSelectedIndex&&"setCellData"===i&&(o=this.getSelectedIndex()),this.setSelectOptions(),this.itemArr.length>0){
if(this.options.refreshSelectedIndex&&"setCellData"===i)return void this.setSelectedIndexNM(o);if(e||"insertRow"===i){var s=0;return"insertRow"!==i&&"replace"!=e&&this.getSelectedIndex()>-1&&(s=this.getSelectedIndex()),this.dom.select.selectedIndex=s,void(this.selectedIndex=s)}this.dom.select.selectedIndex=0,this.selectedIndex=0}this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshVisible=function(){try{for(var t=0;t<this.itemArr.length;t++)!0===this.itemArr[t]._hidden&&this.dom.select?this.dom.select.options[t].style.display="none":this.dom.select.options[t].style.display=""}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshEnable=function(){try{for(var t=0;t<this.itemArr.length;t++)!0===this.itemArr[t]._disabled&&this.dom.select?this.dom.select.options[t].setAttribute("disabled",""):this.dom.select.options[t].removeAttribute("disabled")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectOptions=function(){try{for(var t=this.dom.select.options.length;t>=0;t--)this.dom.select.remove(t);for(t=0;t<this.itemArr.length;t++){var e=document.createElement("option");e.text=this.itemArr[t].label,this.dom.select.options[t]=e,!0===this.itemArr[t]._hidden&&(this.dom.select.options[t].style.display="none"),!0===this.itemArr[t]._disabled&&this.dom.select.options[t].setAttribute("disabled","")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndexNM=function(t){try{return t=parseInt(t),!this.options.emptyItem&&(isNaN(t)||t<0||t>=this.getItemCount())?!1:(this.selectedIndex=t,this.dom.select&&(this.dom.select.selectedIndex=t),this.broadcast({linkedDataList:["refresh",["replace"]]}),!0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleOnchange=function(t){var e=this.dom.select.selectedIndex,i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(e),this.options.emptyItem&&-1==e?this.modelControl.setData(this.options.emptyValue):this.modelControl.setData(this.itemArr[e].value);var s=this.getValue();if(this.selectedIndex=e,i!=this.getSelectedIndex()){a.B.fireEvent(this,"onchange",{oldValue:o,newValue:s});var r={oldValue:o,newValue:s,oldSelectedIndex:i,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onviewchange",r)}},u.prototype.handleKeydownEvent=function(t){try{if(9==(t.charCode?t.charCode:t.keyCode))return this.tabOrderMoveStart=!1,void(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}catch(t){r.w.printStackTrace(t)}},u.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{a.B.fireEvent(this,"onblur")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){a.B.fireEvent(this,"onfocus")},u.prototype.focus=function(){this.dom.select.focus()},u.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.onPropertyChange("disabled",t)}catch(t){r.w.printStackTrace(t)}return t},u.prototype._getValueNotInList=function(){try{switch(this.options.valueNotInList){case"keepValue":case"default":default:return this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null}}catch(t){return r.w.printStackTrace(t,null,this),null}},u.prototype._setValueNotInList=function(t,e){try{switch(this.options.valueNotInList){case"keepValue":case"default":default:
this.options.emptyItem?this.setSelectedIndex(-1,e):this.setSelectedIndex(0,e)}}catch(t){return r.w.printStackTrace(t,null,this),!1}}},7534:(t,e,i)=>{i.r(e),i.d(e,{span:()=>h});var o=i(2981),s=i(1656),r=i(2085),a=i(3082),n=i(7275),l=i(6615),h=function(t,e,i){l.s.call(this,t,e,i),this.options.tagname="span"};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.span",pluginName:"span",parseAttributes:!0,userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onmouseover","onmouseout"],useConfig:!0,label:"",escape:!0,escapeFormatter:"",tagname:"span",localeRef:"",useLocale:!1,ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:""},h.prototype.htmlStr=["<",""," id='","","' ",""," class='w2span ","","' ","",">","","</","",">"],h.prototype.htmlClosingStr=["<",""," id='","","' ",""," class='w2span ","","'",""," />"],h.prototype.initialize=function(t){if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}t&&t.getAttribute("escape");this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.useEscapeFormatter=!1},h.prototype.toHTML=function(){if(null!=this.scope_obj&&this.scope_obj.id&&this.options.for){var t=a.D.getComponentById(this.options.for,this.scope_obj.id);null!=t&&(this.options.for=t.id)}var e="";if(s.v.getEmptyTag()[this.options.tagname.toLowerCase()])(e=this.htmlClosingStr)[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":" style='"+this.options.style+"'",e[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",e[7]=this.options.className,e[9]=("label"==this.options.tagname?" for='"+this.options.for+"'":"")+this.getAttributesString();else{(e=this.htmlStr)[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":"style='"+this.options.style+"'",e[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",e[7]=this.options.className,e[9]=("label"==this.options.tagname?" for='"+this.options.for+"'":"")+this.getAttributesString();var i="";i=this.options.escapeFormatter?this.setEscapeFormatter():this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label+"")):this.formatter.format(this.options.label),e[11]=i,e[13]=this.options.tagname}return e.join("")},h.prototype.setEscapeFormatter=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{
var t=a.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id);"function"==typeof t&&(this.options.escapeFormatter=t,this.useEscapeFormatter=!0)}}catch(t){n.k.printLog("cannot find function : "+this.options.escapeFormatter+"["+this.id+"]")}var e=this.options.label;return this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e)}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onComplete=function(){this.options.escapeFormatter&&!this.useEscapeFormatter&&(this.render.innerHTML=this.setEscapeFormatter()),l.s.prototype.onComplete.call(this)},h.prototype.setAction=function(){try{if(this.refresh(),this.displayLocaleValue(),"label"!=this.options.tagname||""==this.options.for)return;var t=a.D.getComponentById(this.options.for)||null;if(null==t)return;var e="function"==typeof t.getAccessibiltyId?t.getAccessibiltyId():this.options.for;this.render.setAttribute("for",e)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t),this.options.label=t}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getLabel=function(){try{return this.getValue()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setValue=function(t){try{this.options.label=t;var e=this.options.label;this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e),this.modelControl.setData(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{return this.options.escape?WebSquare.xml._decode(this.options.label+""):this.options.label}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getFormatValue=function(){try{return this.options.escape?this.formatter.format(WebSquare.xml._decode(this.options.label+"")):this.formatter.format(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setDisplayFormatter=function(t){try{this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t)}},h.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.w.printStackTrace(t)}},h.prototype.addClass=function(){try{l.s.prototype.addClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.removeClass=function(){try{l.s.prototype.removeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.changeClass=function(){try{l.s.prototype.changeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.toggleClass=function(){try{l.s.prototype.toggleClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getAttributeNode=function(t){try{return l.s.attributes.getAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},h.prototype.setAttributeNode=function(t,e){try{
l.s.attributes.setAttributeNode.call(this,t,e)}catch(t){r.w.printStackTrace(t)}},h.prototype.removeAttributeNode=function(t){try{l.s.attributes.removeAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},h.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},h.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},h.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t)}}},1192:(t,e,i)=>{i.r(e),i.d(e,{spinner:()=>l});var o=i(2981),s=i(2085),r=i(1960),a=i(3082),n=i(6615),l=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.spinner",pluginName:"spinner",userEvents:["onDownButtonClick","onUpButtonClick","onviewchange","oneditkeyup","oneditenter","oneditfull"],useConfig:!0,buttonPosition:"horizon",buttonSize:30,spinnerClass:"type1",maxValue:"",minValue:"",maxYear:2030,minYear:1978,dataType:"number",dataTypeTimeSecond:!1,increment:1,dateIncrementType:"day",initValue:"",inputReadOnly:!1,ioFormat:"yyyyMMdd",ioFormatter:"",displayFormat:"",displayFormatter:"",dateMask:"yyyy/MM/dd",timeSecMask:"HH:mm:ss",timeMask:"HH:mm",title:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",positionFix:!1,autoFocus:!1,nextTabByEnter:!1,useAlert:!0},l.prototype.initialize=function(t){var e=this.options.style,i=this.options.readOnly;if(this.options.style=this.options.positionFix?"height:100%;":"position:absolute;width:0px;height:100%",this.options.readOnly=this.options.inputReadOnly,"date"===this.options.dataType&&!0===this.options.autoFocus&&("day"==this.options.dateIncrementType?this.options.maxByteLength=8:"month"==this.options.dateIncrementType?this.options.maxByteLength=6:"hour"==this.options.dateIncrementType?this.options.maxByteLength=10:"minute"==this.options.dateIncrementType?this.options.maxByteLength=12:"year"==this.options.dateIncrementType&&(this.options.maxByteLength=4)),this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":"day"==this.options.dateIncrementType?this.options.displayFormat=this.options.dateMask:"month"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM":"hour"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM/dd HH":"minute"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM/dd HH:mm":"year"==this.options.dateIncrementType&&(this.options.displayFormat="yyyy");break;case"time":this.options.dataTypeTimeSecond?this.options.displayFormat=this.options.timeSecMask:"hour"==this.options.dateIncrementType||"minute"==this.options.dateIncrementType?this.options.displayFormat=this.options.timeMask:"second"==this.options.dateIncrementType&&(this.options.displayFormat=this.options.timeSecMask);break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),
this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}"month"==this.options.dateIncrementType?this.options.ioFormat="yyyyMM":"hour"==this.options.dateIncrementType?this.options.ioFormat="yyyyMMddHH":"minute"==this.options.dateIncrementType?this.options.ioFormat="yyyyMMddHHmm":"year"==this.options.dateIncrementType&&(this.options.ioFormat="yyyy"),"time"==this.options.dataType&&(this.options.ioFormat="HHmmss");var s=this.options.nextTabID;this.options.nextTabID=null,"number"===this.options.dataType&&(this.options.max&&""!=this.options.max&&!isNaN(Number(this.options.max))&&(this.options.maxValue=this.options.max),this.options.min&&""!=this.options.min&&!isNaN(Number(this.options.min))&&(this.options.minValue=this.options.min),this.options.initValue&&!isNaN(Number(this.options.initValue))&&(this.options.minValue&&Number(this.options.minValue)>Number(this.options.initValue)&&(this.options.initValue=this.options.minValue),this.options.maxValue&&Number(this.options.maxValue)<Number(this.options.initValue)&&(this.options.initValue=this.options.maxValue)));var n=o.x.extend({},this.options),l=this.id+"___input";n.id=l,delete n._scope_obj_org_id,delete n._scope_obj_uuid,delete n._scope_obj_runtime_id,this.input=new WebSquare.uiplugin.input(l,n,t),this.input.options.useAlert=this.options.useAlert,this.input._childFlag=!0;var h=this.uuid;this.input.handleBlurEventBasic=function(t){if(!this.getReadOnly()||this.options.readOnlyFocusEvent){r.B.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this.setValue(this.getValue());var e=WebSquare.historyManager.get(this.options.pluginName,this.id);if(void 0===e.value&&(e.value=this.originalValue),e.value!=this.getValue()){var i=WebSquare.idCache[h];r.B.fireEvent(i,"onchange"),r.B.fireEvent(i,"onviewchange",{oldValue:e.value,newValue:this.getValue()})}if(("date"==this.options.dataType||"time"==this.options.dataType)&&null!=this.options.dateIncrementType&&""!==this.getValue())if(void 0===WebSquare.date.dateTimeAdd(this.getValue(),0,this.options.dateIncrementType,this.options.dataType,this.options.dataTypeTimeSecond,{useAlert:this.options.useAlert}))if(!0===this.options.autoFocus&&!1!==this.options.useAlert&&"year"!==this.options.dateIncrementType){var o=this;setTimeout((function(){o.focus()}),1)}else this.blur();r.B.fireEvent(this,"onblur",t),r.B.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),a.D.isIEAllVersion()||a.D.isOpera()||r.B.fireEvent(this,"onfocusout",t)}},this.options.nextTabID=s,this.options.style=e,this.options.readOnly=i,this.addControl(this.input),this.modelControl.ref=this.options.ref,this.input.modelControl.id=this.id,this.input.modelControl.scope_uuid=this.options._scope_obj_uuid,this.options.skin&&""!=this.options.skin&&(this.options.spinnerClass=this.options.skin)},l.prototype.toHTML=function(){try{var t=this.isGridCellComponent?"w2grid_spinner_up_start":"w2spinner_up_start",e=this.isGridCellComponent?"w2grid_spinner_up_center":"w2spinner_up_center",i=this.isGridCellComponent?"w2grid_spinner_up_end":"w2spinner_up_end",o=this.isGridCellComponent?"w2grid_spinner_up_image":"w2spinner_up_image",r=this.isGridCellComponent?"w2grid_spinner_down_start":"w2spinner_down_start",a=this.isGridCellComponent?"w2grid_spinner_down_center":"w2spinner_down_center",n=this.isGridCellComponent?"w2grid_spinner_down_end":"w2spinner_down_end",l=this.isGridCellComponent?"w2grid_spinner_down_image":"w2spinner_down_image",h=[],d="",c=""==this.options.style?"":"style='"+this.options.style+"'";if(d="vertical"==this.options.buttonPosition?"w2_vertical ":"w2_horizon ",d+=this.options.spinnerClass+" ",
this.options.positionFix){var u="type2"==this.options.skin?"w2spinner_pos_fix ":"";h.push("<div id='"+this.id+"' "+c+" class='w2spinner w2spinner_pos_fix_alignment "+d+this.options.className+"'>"),"type1"==this.options.skin&&(h.push(this.getChild(this.id+"___input").toHTML()),h.push("<div id='"+this.id+"_btnArea' class='w2spinner_btnArea' style='width:"+this.options.buttonSize+"px' >")),h.push("<div id='"+this.id+"_upButton' class='w2spinner_up "+u+"' style='width:"+this.options.buttonSize+"px;' >"),h.push("<div class='"+t+"'></div>"),h.push("<div class='"+e+"'></div>"),h.push("<div class='"+i+"'></div>"),h.push("<div id='"+this.id+"_upButton_image' class='"+o+"'></div>"),h.push("</div>"),"type2"==this.options.skin&&h.push(this.getChild(this.id+"___input").toHTML()),h.push("<div id='"+this.id+"_downButton' class='w2spinner_down "+u+"' style='width:"+this.options.buttonSize+"px;' >"),h.push("<div class='"+r+"'></div>"),h.push("<div class='"+a+"'></div>"),h.push("<div class='"+n+"'></div>"),h.push("<div id='"+this.id+"_downButton_image' class='"+l+"'></div>"),h.push("</div>"),"type1"==this.options.skin&&h.push("</div>"),h.push("</div>")}else h.push("<div id='"+this.id+"' "+c+" class='w2spinner "+d+this.options.className+"'>"),h.push("<div id='"+this.id+"_upButton' class='w2spinner_up'>"),h.push("<div class='"+t+"'></div>"),h.push("<div class='"+e+"'></div>"),h.push("<div class='"+i+"'></div>"),h.push("<div id='"+this.id+"_upButton_image' class='"+o+"'></div>"),h.push("</div>"),h.push("<div id='"+this.id+"_downButton' class='w2spinner_down'>"),h.push("<div class='"+r+"'></div>"),h.push("<div class='"+a+"'></div>"),h.push("<div class='"+n+"'></div>"),h.push("<div id='"+this.id+"_downButton_image' class='"+l+"'></div>"),h.push("</div>"),h.push(this.getChild(this.id+"___input").toHTML()),h.push("</div>");return h.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),"date"==this.options.dataType){this.dateValidator=null,this.input.validator.addCommand(new WebSquare.validator.dateCommand(this.options.ioFormat)),this.options.validateOnInput||this.input.validator.addCommand(new WebSquare.validator.ignoreCharCommand(" -/:-~"));var t;if(t=this.options.ioFormat.length,this.input.validator.addCommand(new WebSquare.validator.maxLengthCommand(t)),this.input.validator.addCommand(new WebSquare.validator.minLengthCommand(t)),this.validMesssage=WebSquare.language.getMessage("IC_invalidCalendarSelect"),null==this.validMesssage||""==this.validMesssage){var e=WebSquare.language.getMessage("TabControl_warning1")||"날짜 형식이 잘못 되었습니다.";this.validMesssage=e}}this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.positionFix?this._adjustAlignment():this.setInputStyle(),this.options.inputReadOnly&&this.input.bind("onmousedown",(function(t){r.B.preventDefault(t)}))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setSize=function(t,e){try{n.s.prototype.setSize.call(this,t,e),this.setInputStyle()}catch(t){s.w.printStackTrace(t)}},l.prototype.refreshItemset=function(){},l.prototype.refresh=function(){},l.prototype.setInputStyle=function(){try{this.input.originalStyleObj={paddingTop:parseInt(this.input.getStyle("padding-top"))||0,paddingBottom:parseInt(this.input.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.input.getStyle("padding-left"))||0,paddingRight:parseInt(this.input.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.input.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.input.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.input.getStyle("border-left-width"))||0,
borderRightWidth:parseInt(this.input.getStyle("border-right-width"))||0};var t=this.input.originalStyleObj.paddingLeft+this.input.originalStyleObj.paddingRight+this.input.originalStyleObj.borderLeftWidth+this.input.originalStyleObj.borderRightWidth,e=this.input.originalStyleObj.paddingTop+this.input.originalStyleObj.paddingBottom+this.input.originalStyleObj.borderTopWidth+this.input.originalStyleObj.borderBottomWidth,i=this.render.clientWidth||parseInt(this.render.style.width,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"width"),10),o=this.render.clientHeight||parseInt(this.render.style.height,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"height"),10);if("vertical"==this.options.buttonPosition){var r=this.render.clientHeight-e-this.options.buttonSize;r<0&&(r=0),this.input.setStyle("width",this.render.clientWidth+"px"),this.input.setStyle("height",r+"px")}else{var a=this.options.buttonSize;"horizon"==this.options.buttonPosition&&"type2"==this.options.skin&&(a*=2);var n=i-t-a;n<0&&(n=0),this.input.setStyle("width",n+"px"),this.input.setStyle("height",o+"px")}this.input.render.offsetHeight>0&&this.setStyle("height",this.input.render.offsetHeight+"px"),this.input.setVerticalAlign()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype._adjustAlignment=function(){try{this.input.originalStyleObj={paddingTop:parseInt(this.input.getStyle("padding-top"))||0,paddingBottom:parseInt(this.input.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.input.getStyle("padding-left"))||0,paddingRight:parseInt(this.input.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.input.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.input.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.input.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.input.getStyle("border-right-width"))||0};var t=this.input.originalStyleObj.paddingLeft+this.input.originalStyleObj.paddingRight+this.input.originalStyleObj.borderLeftWidth+this.input.originalStyleObj.borderRightWidth;"type2"==this.options.skin&&(t+=this.input.options.buttonSize,this.input.setStyle("left","0")),this.input.setStyle("height",this.render.offsetHeight+"px"),this.input.setStyle("width",this.render.clientWidth-t-this.options.buttonSize+"px")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2spinner_up")){this.upButtonClick();break}if(e.match("w2spinner_down")){this.downButtonClick();break}}e=null},l.prototype.handleMousewheelEvent=function(t){try{r.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2spinner")){if(t.wheelDelta>0||t.detail<0){this.upButtonClick();break}r.B.fireEvent(this,"onDownButtonClick"),this.downButtonClick();break}e=null}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=!0;if(9!=e&&13!=e||(i=r.B.fireEvent(this,"oneditenter",t)),9==e||13==e&&!0===this.options.nextTabByEnter)for(var o=this.event.getTargetIterator(t,this.render);o.next();){var n;if(o.match("w2input"))if(!1!==i)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(r.B.preventDefault(t),n=a.D.getPreTabbableComp(this.id))return void n.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(r.B.preventDefault(t),n=a.D.getNextTabbableComp(this.id))return void n.focus()}else 38==e?this.upButtonClick():40==e&&this.downButtonClick()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.focus=function(){try{this.input.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.upButtonClick=function(){if(0!=r.B.fireEvent(this,"onUpButtonClick"))if("number"==this.options.dataType){if(""==this.getValue())i=1,this.options.minValue&&(i=this.options.minValue);else{
var t=Number(this.options.minValue),e=Number(this.options.maxValue),i=Number(this.getValue())+Number(this.options.increment),o=Number(this.getValue());this.options.maxValue?i<=e?this.options.minValue&&i<t&&(i=t):i=e:this.options.minValue&&i<t&&(i=t)}this.setValue(i),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("date"==this.options.dataType)if("day"==this.options.dateIncrementType||"month"==this.options.dateIncrementType){var s="";s=8==this.options.ioFormat.length?this.calcurateDate(this.getValue(),this.options.increment,"day",this.options.dataType):this.calcurateDate(this.getValue(),this.options.increment,"month",this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else{s="";s=this.calcurateDate(this.getValue(),this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("time"==this.options.dataType){s="";s=this.calcurateDate(this.getValue(),this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}},l.prototype.downButtonClick=function(){if(0!=r.B.fireEvent(this,"onDownButtonClick"))if("number"==this.options.dataType){if(""==this.getValue())i=1,this.options.minValue&&(i=this.options.minValue);else{var t=Number(this.options.minValue),e=Number(this.options.maxValue),i=Number(this.getValue())-Number(this.options.increment),o=Number(this.getValue());this.options.minValue?i>=t?this.options.maxValue&&i>e&&(i=e):i=t:this.options.maxValue&&i>e&&(i=e)}this.setValue(i),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("date"==this.options.dataType)if("day"==this.options.dateIncrementType){var s="";s=8==this.options.ioFormat.length?this.calcurateDate(this.getValue(),-1*this.options.increment,"day",this.options.dataType):this.calcurateDate(this.getValue(),-1*this.options.increment,"month",this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else{s="";s=this.calcurateDate(this.getValue(),-1*this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("time"==this.options.dataType){s="";s=this.calcurateDate(this.getValue(),-1*this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}},l.prototype.calcurateDate=function(t,e,i,o){var s=parseInt(t.substring(0,4),10),r=parseInt(t.substring(4,6),10),a="",n=WebSquare.date.getMaxMinYear(),l=n.maxYear,h=n.minYear;return e=parseInt(e,10),8==t.length&&(a=parseInt(t.substring(6,8),10)),"day"==i?(t=WebSquare.date.dateAdd(t,e,{useAlert:this.options.useAlert}),isNaN(t)&&(t=""),t):"day"==this.options.dateIncrementType||"month"==i?6!=t.length?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_month_ShouldBeyyMMFormat",t)),t):s>l||s<h?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_YearRange",h,l,s)),s):r>12||r<1?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_MonthRange","1","12",r)),r):((r+=e)>12?(s+=parseInt(r/12),r=parseInt(r%12)):r<0?(s-=parseInt(-1*r/12)+1,r=12-parseInt(-1*r%12)):0==r&&(s-=1,r=12),r<10&&(r="0"+r),a?(a<10&&(a="0"+a),s+""+r+a):s+""+r):t=WebSquare.date.dateTimeAdd(t,e,i,o,this.options.dataTypeTimeSecond)},l.prototype.setDisabled=function(t){try{t=a.D.getBoolean(t),t=n.s.prototype.setDisabled.call(this,t),this.input.setDisabled(t)}catch(t){s.w.printStackTrace(t)}return t},l.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":
e?this.addClass(this.render,"w2spinner_disabled"):this.removeClass(this.render,"w2spinner_disabled")}}catch(t){s.w.printStackTrace(t,null,this)}},l.apiExtend=function(){var t=WebSquare.uiplugin.input.prototype,e=WebSquare.uiplugin.spinner.prototype;for(var i in t)e[i]||(e[i]=function(t){return function(){return this.input[t].apply(this.input,arguments)}}(i));e.refresh=function(){return this.input.refresh.apply(this.input,arguments)}},l.prototype.finalize=function(){try{for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove()}catch(t){s.w.printStackTrace(t,null,this)}},l._initImport=function(){l.apiExtend()},o.x._initImportList.push("uiplugin.spinner")},325:(t,e,i)=>{i.r(e),i.d(e,{tabControl:()=>c,content:()=>u});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=i(6191),c=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(c.prototype,h.s.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.tabControl",pluginName:"tabControl",userEvents:["ontabclick","onchange","ontabclose","onbeforeselect","onbeforetabclose","onbeforetabmove","onaftertabmove","ondrawcomplete","ontabload","ontabsplit","onscrollleftbtnclick","onscrollrightbtnclick","onsubmenubtnclick"],useConfig:!0,selectedIndex:0,containerClass:"w2tabcontrol_container",hostClass:"w2tabcontrol_tabhost",tabPosition:"",tabClass:"",tabStyle:"",activeTabClass:"w2tabcontrol_active",overTabClass:"w2tabcontrol_over",disabledTabClass:"w2tabcontrol_disabled",contentsClass:"w2tabcontrol_contents",selectedClass:"w2tabcontrol_selected",alwaysDraw:!1,useTabKeyOnly:!1,useMoveNextTabFocus:!1,useBackbridge:!1,useH3Bridge:!1,useConfirmMessage:!1,confirmTrueAction:"exist",confirmFalseAction:"new",confirmMessage:"[#title]탭이 존재합니다. 기존의 탭을 사용하시려면 '확인'을 새로운 탭을 생성하시려면 '취소'를 선택하세요",confirmMessageLocaleRef:"",tabScroll:!1,mobileTabScroll:!1,adjustTabScroll:!1,visibleRowNum:5,closable:!1,alwaysShowCloseBtn:!1,useBridgeHelper:!0,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,windowMaxNum:-1,tabScrollAuto:!1,focusOnStart:!0,useDrag:!1,preventTabClickEvent:!1,useLocale:!1,localeRef:"",hiddenTab:!1,useATagBtn:!1,tabMove:!1,initStyle:!1,useAccessibilityMenu:!1,forceChildCompEnabled:!1,tableRender:"",removeBridge:!1,spaAuto:!1,spaAutoDelay:3e3,closeAllBtn:!1,processMsgFrame:!1,frameModal:!1,changeActiveTab:!1,keepDisabledTab:!1,senseReader:!1,tabRole:!0,tabLiRole:"",changeActiveTabBeforeselect:!1,tooltipClass:"",noUseTitle:!1,useTitleTooltip:!1};var u=function(){};u.prototype.defaultOptions={alwaysDraw:!1,src:"",style:"",frameMode:"",name:"",title:"",scope:!1,tabHTML:"",initScript:"",postScript:"",frameModal:"",processMsgFrame:"",msaName:""},c.prototype.initialize=function(t){try{if(this.selectedIndex=0,this.tabArr=[],this.contentsArr=[],this.tabContentOptions=WebSquare.uiplugin.content.prototype.defaultOptions,this.focusedIndex=-1,this.activeFirstTime=!1,this.increaseKey=0,this.visibleTabIndex=0,this.itemTable=null,this.isOpen=!1,this.itemTableTdMargin=null,this.senseReaderMode=!0,this.bridgeIdArr=[],this.backbridgeIdArr=[],this.lastEventType="",this.storedFrame=[],this.autoNum=0,this.options.iframeStorageCount&&!this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.iframeStorageCount),this.options.iframeMaxSize&&!this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.iframeMaxSize),this.options.iframeMinSize&&!this.options.spaIframeMinSize&&(this.options.spaIframeMinSize=this.options.iframeMinSize),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==s.v.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),
n.D.getBoolean(this.options.useATagBtn)&&n.D.getBoolean(this.options.closable)?this.options.useATagBtn=!0:this.options.useATagBtn=!1,0==this.options.forceChildCompEnabled&&(this.options.forceChildCompEnabled=s.v.getConfiguration("/WebSquare/tabControl/forceChildCompEnabled/@value")||!1),null==t)return;this._initializeIScroll(),this.disabledTabStack=[],this.disabledComponents={},this.tabArr=this.makeTabArray(t,this.options),this.contentsArr=this.makeTabContentsArray(t,this.tabContentOptions,this.tabArr),this.initAllContents(),this.options.changeActiveTab&&(this.options.tabScroll=!0),!this.options.tabScroll||"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||(this.options.tabScroll=!1),this.tooltip=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.initContents=function(t){try{var e,i,o=this.options._scope_obj_uuid,a=null==o?null:WebSquare.idCache[o],l=t.contentsID;null!=a&&(l=this.options._scope_obj_org_id+t.contentsID.slice(this.id.length));var h,c=!0,u=n.D.getBoolean(t.scope)||n.D.getBoolean(s.v.getConfiguration("/WebSquare/wframe/scope/@value"));switch(t.frameMode){case"iframe":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",style:"width:100%; height:100%;",name:t.name,title:t.title,spa:this.options.spa,pluginName:"iframe",msaName:t.msaName};break;case"wframe":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",scope:u,pluginName:"wframe",delegateProcessMsg:t.delegateProcessMsg||!1!==t.delegateProcessMsg&&n.D.getBoolean(this.options.delegateProcessMsg)||!1,processMsgFrame:t.processMsgFrame||!1!==t.processMsgFrame&&this.options.processMsgFrame||!1,frameModal:t.frameModal||!1!==t.frameModal&&this.options.frameModal||!1,msaName:t.msaName},t.initScript&&(e.initScript=t.initScript),t.postScript&&(e.postScript=t.postScript);break;case"wframePreload":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",scope:u,pluginName:"wframe",src:t.src,preload:!0,delegateProcessMsg:t.delegateProcessMsg||!1!==t.delegateProcessMsg&&n.D.getBoolean(this.options.delegateProcessMsg)||!1,processMsgFrame:t.processMsgFrame||!1!==t.processMsgFrame&&this.options.processMsgFrame||!1,frameModal:t.frameModal||!1!==t.frameModal&&this.options.frameModal||!1,msaName:t.msaName},t.initScript&&(e.initScript=t.initScript),t.postScript&&(e.postScript=t.postScript);break;default:c=!1,(i=t.xml).setAttribute("className","w2tabcontrol_contents_wrapper")}return h=i&&"json"===i._elementType?d.D.createByJSON(l+"_body",null,i._element,a,o,c):d.D.create(l+"_body",e,i,a,o,c),t.dataObject&&h.setDataObject(t.dataObject),h}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.initAllContents=function(){try{for(var t,e,i=0;i<this.contentsArr.length;i++)t=this.contentsArr[i],e=this.initContents(t),this.addControl(e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeTabContentsArray=function(t,e,i){try{if(null==i||i.length<1)return[];for(var s=[],a={},l=t.getChildNodes(),h=[],d=0;d<l.length;d++)"w2:content"===l[d].getTagName()&&h.push(l[d]);for(d=0;d<i.length;d++){var c=d<h.length?h[d]:null;null==c||1!=c.getNodeType()||"w2:content"!=c.getTagName()?(c=null,a={}):a=WebSquare.WebSquareparser.parseAttribute(c);var u=null==c||null==c.getAttribute("id")?this.id+"_contents_"+d:this.id+"_contents_"+c.getAttribute("id");i[d].contentsID=u,a.alwaysDraw?a.alwaysDraw=n.D.getBoolean(a.alwaysDraw):0==a.alwaysDraw||(a.alwaysDraw=this.options.alwaysDraw);var p=o.x.extend({contentsID:u,contentsClass:a.contentsClass||this.options.contentsClass,src:a.src||e.src,frameMode:null!=a.src&&""!=a.src?a.frameMode||e.frameMode:"",alwaysDraw:a.alwaysDraw,render:null,xml:c,name:a.name||"",title:a.title,scope:a.scope||e.scope},a||{});null!=p.src&&""!=p.src&&""==p.frameMode&&(p.frameMode="wframe"),s.push(p)}return s}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeTabArray=function(t,e){try{if(null==t)return[];for(var i=[],o=!1,s=!1,a=0,l=t.getChildNodes(),h=0;h<l.length;h++){var d=l[h]
;if(1==d.getNodeType()&&"w2:tabs"==d.getTagName()){if(a++,-1!=this.options.windowMaxNum&&a>this.options.windowMaxNum){alert(WebSquare.language.getMessage("TabControl_maxNum_warning",this.options.windowMaxNum));break}var c=d.getAttribute("id"),u=this.id+"_tab_"+(null==c?h:c),p=WebSquare.WebSquareparser.parseAttribute(d);if(void 0===p.label&&(p.label=""),("true"==p.useLocale||this.options.useLocale&&"false"!=p.useLocale)&&p.localeRef){var g=this.getLocaleValue(p.localeRef);g&&(p.label=g)}1==this.options.closable&&(o=!0),1==this.options.useATagBtn&&(s=!0);var m={tabID:u,userTabID:c,contentsID:"",tabLabel:p.label,disabled:"true"==p.disabled,render:null,tabWidth:parseInt(p.tabWidth,10)>0?parseInt(p.tabWidth,10):this.options.tabWidth,tabGap:parseInt(p.tabGap,10)>0?parseInt(p.tabGap,10):this.options.tabGap,tabHeight:parseInt(p.tabHeight,10)>0?parseInt(p.tabHeight,10):this.options.tabHeight,tabClass:p.className||this.options.tabClass,tabStyle:p.style||this.options.tabStyle,activeTabClass:p.activeTabClass||this.options.activeTabClass,disabledTabClass:p.disabledTabClass||this.options.disabledTabClass,selectedClass:p.selectedClass||this.options.selectedClass,selectedImage:p.selectedImage?"url("+p.selectedImage+")":"",defaultImage:p.defaultImage?"url("+p.defaultImage+")":"",hoverImage:p.hoverImage?"url("+p.hoverImage+")":"",tabType:"image"==p.tabType?"image":"text",defaultClass:p.defaultClass||"",hoverClass:p.hoverClass||"",closable:1==n.D.getBoolean(p.closable)||o,hiddenTab:1==n.D.getBoolean(p.hiddenTab),closeBtn:null,label:p.label,value:u,title:p.title||p.label,tabHTML:p.tabHTML,useATagBtn:1==n.D.getBoolean(p.useATagBtn)||s};"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||"string"==typeof m.tabStyle&&m.tabStyle.indexOf("width")<0&&(m.tabStyle="width:"+15*m.label.length+"px;"+m.tabStyle),i.push(m)}}return i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";switch(this.options.tabPosition){case"top":i="w2tabcontrol_top ";break;case"bottom":i="w2tabcontrol_bottom ";break;case"left":i="w2tabcontrol_left ";break;case"right":i="w2tabcontrol_right "}t.push("<div id='"+this.id+"' "+e+" class='w2tabcontrol "+i+this.options.className+"'>"),"bottom"==this.options.tabPosition&&t.push(this.makeAllContentsHTML());var o="",s="",a="";return!0!==this.options.noUseTitle&&(o="title='"+WebSquare.language.getMessage("TabControl_previous_tab")+"'",s="title='"+WebSquare.language.getMessage("TabControl_next_tab")+"'",a="title='"+WebSquare.language.getMessage("TabControl_tab_list")+"'"),this.options.tabScroll&&!n.D.isMobile()||this.options.tabScroll&&!this.options.mobileTabScroll?(t.push("<div id='"+this.id+"_control' class='w2tabcontrol_control'>"),this.options.useAccessibilityMenu?t.push("<button type='button' "+o+" id='"+this.id+"_btn_scrollLeft' class='w2tabcontrol_control btn_scrollLeft'></button>"):t.push("<div id='"+this.id+"_btn_scrollLeft' class='w2tabcontrol_control btn_scrollLeft' "+o+" tabindex='-1'></div>"),t.push("<div id='"+this.id+"_mask' class='w2tabcontrol_control mask'>"),t.push("<div id='"+this.id+"_scroll' class='w2tabcontrol_control scroll'>")):n.D.isMobile()&&this.options.mobileTabScroll&&t.push("<div id='"+this.id+"_mobiletabscroll' class='w2tabcontrol_mobiletabscroll'>"),t.push(this.makeAllTabHTML()),this.options.tabScroll&&!n.D.isMobile()||this.options.tabScroll&&!this.options.mobileTabScroll?(t.push("</div>"),t.push("</div>"),this.options.useAccessibilityMenu?(t.push("<button type='button' id='"+this.id+"_btn_scrollRight' "+s+" class='w2tabcontrol_control btn_scrollRight'></button>"),t.push("<button type='button' id='"+this.id+"_btn_submenu' "+a+" class='w2tabcontrol_control btn_submenu'></button>")):(t.push("<div id='"+this.id+"_btn_scrollRight' class='w2tabcontrol_control btn_scrollRight' "+s+" tabindex='-1'></div>"),
t.push("<div id='"+this.id+"_btn_submenu' class='w2tabcontrol_control btn_submenu' "+a+" tabindex='-1'></div>")),t.push("</div>")):n.D.isMobile()&&this.options.mobileTabScroll&&t.push("</div>"),"bottom"!=this.options.tabPosition&&t.push(this.makeAllContentsHTML()),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeTextTabHTML=function(t,e,i){try{var o=WebSquare.language.getMessage("TabControl_close")||"닫기",s="";switch(this.options.tabPosition){case"top":s=" w2tabcontrol_tabhost_top";break;case"bottom":s=" w2tabcontrol_tabhost_bottom";break;case"left":s=" w2tabcontrol_tabhost_left";break;case"right":s=" w2tabcontrol_tabhost_right"}var a=this.options.alwaysShowCloseBtn?"style='display: block;' ":"",l=""==o||this.options.noUseTitle?"":'title="'+o+'"',h=["<li id='",null,"'  class='w2tabcontrol_li ",null,"' ",null," "+n.D.getDataPrefix("index")+"='",null,"' ><div class='w2tabcontrol_tab_center"+s+"' ><a role='tab' id='"+t.tabID+"_tabHTML'",null,null,null,"' ",null," "+(0==this.options.useTabKeyOnly?"tabindex='-1'":"")+" >",null,"</a></div><div class='w2tabcontrol_tab_left"+s+"'></div><div class='w2tabcontrol_tab_right"+s+"' >","<div id='",null,"' class='w2tabcontrol_tab_close' "+a+l+"></div></div></li>"],d=(t.tabWidth>0?"width:"+t.tabWidth+"px;":"")+(t.tabHeight>0?"height:"+t.tabHeight+"px;line-height:"+(t.tabHeight-1)+"px;":"")+(t.tabGap>0?"margin-right:"+t.tabGap+"px;":"")+(t.tabStyle?t.tabStyle:"");return h[1]=t.tabID,h[3]=" w2tabcontrol_li_"+e+(t.disabled?" "+t.disabledTabClass:"")+(t.tabClass?" "+t.tabClass:""),i||e!==this.options.selectedIndex+1?h[3]+=t.defaultClass?" "+t.defaultClass:"":h[3]+=" "+t.activeTabClass+(t.selectClass?" "+t.selectClass:" "+t.selectedClass),h[5]=""==d?"":'style="'+d+'"',h[7]=e,""!=this.options.tabLiRole&&(h[4]+=' role="'+this.options.tabLiRole+'"'),!1===this.options.tabRole&&(h[8]="' ><div class='w2tabcontrol_tab_center"+s+"' ><a  id='"+t.tabID+"_tabHTML'"),h[9]=" aria-controls='"+t.contentsID+"'",h[9]+=" aria-selected='"+(e===this.options.selectedIndex+1?"true":"false"),0==t.disabled&&(h[10]="' href='",this.options.removeBridge?h[11]="javascript:void(null);":h[11]="#"+t.contentsID+"_bridge"),h[13]=""==t.title||this.options.noUseTitle?"":'title="'+t.title+'"',h[15]=t.tabLabel,n.D.getBoolean(this.options.useATagBtn)&&(h[17]="<a id='",h[19]="' class='w2tabcontrol_tab_close_atag' href='javascript:void(null);' "+a+l+"></a></div></li>"),h[18]=t.tabID+"_close",h.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeImageTabHTML=function(t,e,i){try{var o=this.options.alwaysShowCloseBtn?"style='display: block;' ":"",s=WebSquare.language.getMessage("TabControl_close")||"닫기",a=n.D.getDataPrefix("index"),l=""==s||this.options.noUseTitle?"":'title="'+s+'"',h=["<li id='",null,"' class='w2tabcontrol_li ",null,"' ",null," "+a+"='",null,"'><div  id='"+t.tabID+"_tabHTML' class='w2tabcontrol_tab_center2' ",null," ",null," role='tab' ",null," "+(0==this.options.useTabKeyOnly?"tabindex='-1'":"")+" ></div><div class='w2tabcontrol_tab_left2'></div><div class='w2tabcontrol_tab_right2' >","<div id='",null,"' class='w2tabcontrol_tab_close2' "+o+l+"></div>","</div></li>"],d=(t.tabWidth>0?"width:"+t.tabWidth+"px;":"")+(t.tabHeight>0?"height:"+t.tabHeight+"px;line-height:"+(t.tabHeight-1)+"px;":"")+(t.tabGap>0?"margin-right:"+t.tabGap+"px;":"")+(t.tabStyle?t.tabStyle:"");return h[1]=t.tabID,h[3]=" w2tabcontrol_li_"+e+(t.disabled?" "+t.disabledTabClass:"")+(t.tabClass?" "+t.tabClass:""),i||e!==this.options.selectedIndex+1?(h[3]+=t.defaultClass?" "+t.defaultClass:"",h[9]=t.defaultImage?"style='background-image:"+t.defaultImage+";":""):(h[3]+=" "+t.activeTabClass+(t.selectClass?" "+t.selectClass:" "+t.selectedClass),h[9]=t.selectedImage?"style='background-image:"+t.selectedImage+";'":""),h[5]=""==d?"":'style="'+d+'"',h[7]=e,h[11]=""==t.title||this.options.noUseTitle?"":'title="'+t.title+'"',h[13]=""==t.contentsID?"":'aria-controls="'+t.contentsID+'"',
h[13]+=" aria-selected='"+(e===this.options.selectedIndex+1?"true":"false")+"'",h[16]=t.tabID+"_close",n.D.getBoolean(this.options.useATagBtn)&&(h[15]="<a id='",h[17]="' class='w2tabcontrol_tab_close2_atag' href='javascript:void(null);' "+o+l+"></a>"),h.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeAllTabHTML=function(){try{var t="";switch(this.options.tabPosition){case"top":t="w2tabcontrol_tabhost_top";break;case"bottom":t="w2tabcontrol_tabhost_bottom";break;case"left":t="w2tabcontrol_tabhost_left";break;case"right":t="w2tabcontrol_tabhost_right"}var e=[];e.push("<ul id='"+this.id+"_tabhost' class='"+this.options.hostClass+" "+t+"' role='tablist' >");for(var i=0;i<this.tabArr.length;i++){var o=this.tabArr[i];this.tabArr[i].hiddenTab&&(o.tabStyle=o.tabStyle+"; display:none; visibility:hidden;");var s="make"+o.tabType.capitalize()+"TabHTML";e.push(this[s](o,i+1))}return e.push("</ul>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeContentsHTML=function(t,e,i,o){try{var s=["<div id='",null,"' class='",null,"' role='tabpanel",null,null,null,"</div>"],a=this.getChild(t.contentsID+"_body"),l="";l=this.contentsArr[this.options.selectedIndex]!==t?"' aria-hidden='true' style='display:none'>":"' aria-hidden='false'>";var h="",d="",c="";if(this.options.useTabKeyOnly){var u,p=t.title||e;if(this.options.useH3Bridge)h="<h3 id='"+t.contentsID+"_bridge' style='' class='w2tabcontrol_contents_bridge_h3'>"+p+"</h3>",o>=0?this.bridgeIdArr.splice(o,0,t.contentsID+"_bridge"):this.bridgeIdArr.push(t.contentsID+"_bridge");else!0===this.options.removeBridge?(u=this.options.useBridgeHelper?"<h3 id='"+t.contentsID+"_bridge_helper' style='position:absolute;text-indent : -10000px;height:0px;' class='w2tabcontrol_contents_bridge_helper'>"+p+"</h3>":"",c="' tabIndex='0'",h=u):(u=this.options.useBridgeHelper?"<h3 id='"+t.contentsID+"_bridge_helper' style='position:absolute;text-indent : -10000px;background:none;height:0px;' class='w2tabcontrol_contents_bridge_helper'>"+p+"</h3>":"",h="<a id='"+t.contentsID+"_bridge' class='w2tabcontrol_bridge' href='javascript:void(null);'>"+u+"</a>"),o>=0?this.bridgeIdArr.splice(o,0,t.contentsID+"_bridge"):this.bridgeIdArr.push(t.contentsID+"_bridge")}return this.options.useBackbridge&&(d="<a id='"+t.contentsID+"_backbridge' tabindex='0' title='go back' class='w2tabcontrol_bridge'></a>",o>=0?this.backbridgeIdArr.splice(o,0,t.contentsID+"_backbridge"):this.backbridgeIdArr.push(t.contentsID+"_backbridge")),s[1]=t.contentsID,s[3]=t.contentsClass,s[5]=n.D.getBoolean(this.options.removeAriaLabelledby)?"":"' aria-labelledby='"+e,s[5]+=c,s[6]=l,s[7]=h,s[7]+=t.alwaysDraw&&!i?a.toHTML():"",s[7]+=d,s.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeAllContentsHTML=function(){try{var t=[];t.push("<div id='"+this.id+"_container' class='"+this.options.containerClass+"'>");for(var e=0;e<this.contentsArr.length;e++){var i=this.contentsArr[e],o=this.tabArr[e];t.push(this.makeContentsHTML(i,o.tabLabel))}return t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAdaptive=function(){try{var t,e=this.options.adaptive,i=parseInt(this.options.adaptiveThreshold)||480;"layout"==e&&(t="w2tab_adaptive_layout"),n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=i?this.hasClass(t)||this.addAdaptive():this.hasClass(t)&&this.removeAdaptive())}catch(t){r.w.printStackTrace(t)}},c.prototype.addAdaptive=function(){try{var t,e=this.options.adaptive,i=document.getElementById(this.id+"_container");if("layout"==e){t="w2tab_adaptive_layout";var o=i.style.height||i.offsetHeight+"px";if(i.style.height="auto",i.setAttribute("data-oldHeight",o),"right"===this.options.tabPosition){var s=this.render.offsetWidth-i.offsetLeft-i.offsetWidth||0,a=i.style.right||s+"px";i.setAttribute("data-oldRight",a),i.style.right="0px"}else if("left"===this.options.tabPosition){
var n=i.style.left||i.offsetLeft+"px";i.setAttribute("data-oldLeft",n),i.style.left="0px"}else if("top"===this.options.tabPosition){var l=i.style.top||i.offsetTop+"px";i.setAttribute("data-oldTop",l),i.style.top="0px"}}if(this.addClass(t),this.options.tabScroll)document.getElementById(this.id+"_control").style.display="none"}catch(t){r.w.printStackTrace(t)}},c.prototype.removeAdaptive=function(){try{var t,e=this.options.adaptive,i=document.getElementById(this.id+"_container");if("layout"==e&&(t="w2tab_adaptive_layout",i.style.height=i.getAttribute("data-oldHeight"),i.removeAttribute("data-oldHeight"),"right"===this.options.tabPosition?(i.style.right=i.getAttribute("data-oldRight"),i.removeAttribute("data-oldRight")):"left"===this.options.tabPosition?(i.style.left=i.getAttribute("data-oldLeft"),i.removeAttribute("data-oldLeft")):"top"===this.options.tabPosition&&(i.style.top=i.getAttribute("data-oldTop"),i.removeAttribute("data-oldTop"))),this.removeClass(t),this.options.tabScroll)document.getElementById(this.id+"_control").style.display="block"}catch(t){r.w.printStackTrace(t)}},c.prototype.setAction=function(){try{if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}for(var i=WebSquare.BootLoader.fullViewed||!1,o=n.D.fullViewed||!1,l=this.getTabHostAndContainer(),h=0;h<this.tabArr.length;h++){var d=this.tabArr[h];d.render=document.getElementById(d.tabID),d.closeBtn=document.getElementById(d.tabID+"_close"),d.contentsRender=document.getElementById(d.contentsID),this.contentsArr[h].render=d.contentsRender;var c=this.contentsArr[h].frameMode;if(1==this.contentsArr[h].alwaysDraw&&("iframe"===c||"wframe"===c||"wframePreload"===c)){var u=this.getChild(d.contentsID+"_body");u.options&&"wframe"===u.options.pluginName&&(u.options.mode="sync"),this._addTabEvent({uuid:u.uuid,tabID:d.tabID,idx:h,userTabID:d.userTabID}),"wframePreload"!==c&&u.setSrc(this.contentsArr[h].src,this.contentsArr[h].forceReload),"iframe"===c&&n.D.isIEAllVersion()&&n.D.setInterval(this.checkLoadEvent,{key:u.id+"_checkLoadEvent",caller:this,args:[u],delay:70})}d.tabHTML&&this.setTabHTML(d.userTabID,d.tabHTML)}if(this.options.tabScroll){WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:{}});var p=document.getElementById(this.id+"_btn_submenu");p&&(n.D.isMobile()?a.B.addListener(p,"ontouchstart",(function(t){a.B.stopPropagation(t)})):a.B.addListener(p,"onmousedown",(function(t){a.B.stopPropagation(t)})))}this.options.senseReader&&s.v.browserCheck.android||!n.D.isMobile()?(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTabClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent))):(n.D.getBoolean(s.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTabClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent))),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleMouseoverEvent))),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),n.D.isIE(6)&&this.event.addListener(this.render,"onresize",this.event.bindAsEventListener(this,this.handleResizeEvent));var g=this;if(this.options.useTabKeyOnly?(this.event.addListener(l.tabhost,"onfocusin",(function(t){g.lastEventType=t.type})),this.event.addListener(l.tabhost,"onkeydown",(function(t){var e=t.charCode||t.keyCode;9!==e&&13!==e||(g.lastEventType=t.type)})),this.event.addListener(l.tabhost,"onmousedown",(function(t){g.senseReaderMode=!1
}))):(this.event.addListener(l.tabhost,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),this.event.addListener(l.container,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),1==this.options.useMoveNextTabFocus&&this.event.addListener(l.container,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusInEvent))),n.D.isMobile()?(this.event.addListener(l.tabhost,"ontouchstart",this.event.bindAsEventListener(this,this.handleTabMove)),this.event.addListener(l.tabhost,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove))):this.event.addListener(l.tabhost,"onmousedown",this.event.bindAsEventListener(this,this.handleTabMove)),this.options.useBackbridge)for(h=0;h<this.backbridgeIdArr.length;h++){var m=this.getElementById(this.backbridgeIdArr[h]);if(m){!function(t){a.B.addListener(m,"onkeydown",(function(e){13===(e.charCode||e.keyCode)&&g.setFocusedTab(t)}))}(h)}}this.setActiveTab(this.options.selectedIndex),this.adjustContentsHeight(),i||o||"layout"==this.options.adaptive&&(this.setAdaptive(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive))),this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onComplete=function(){this._makeIframeBackground(),h.s.prototype.onComplete.call(this)},c.prototype._makeIframeBackground=function(){try{s.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&s.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.makeIframe=function(){if(WebSquare.uiplugin.iframe){for(var t,e=this.storedFrame.length,i=0;i<this.contentsArr.length;i++)"iframe"==this.contentsArr[i].frameMode&&e++;this.options.spaIframeMinSize>e&&(this._makeIframe(),s.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50}))}else{requires("uiplugin.iframe").then((t=this,function(e,i){t.makeIframe()}))}},c.prototype._makeIframe=function(){try{var t=document.getElementById(this.id+"_container"),e=["<div id='",null,"' class='",this.options.contentsClass,"' role='tabpanel","","' aria-hidden='true' style='display:none'>",null,"</div>"],i=this.uuid+"_iframe_"+this.autoNum++,o=new WebSquare.uiplugin.iframe(i,{className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",style:"width:100%; height:100%;",spa:this.options.spa,src:WebSquare.net.getBlankXML()});e[1]=i,e[5]=n.D.getBoolean(this.options.removeAriaLabelledby)?"":"' aria-labelledby='",e[7]=o.toHTML();var s=document.createElement("div");s.innerHTML=e.join("");var a=s.removeChild(s.firstChild);t.appendChild(a),o.render=a.firstChild,this.storedFrame.push(o.id),o.activeStatus="active"}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.createFrame=function(t){try{if(this.options.windowMaxNum<=this.getTabCount()+this.storedFrame.length)return void l.k.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")");void 0!==t&&null!=t||(t={}),(isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length)&&this._makeIframe()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.addRoundedCornerForIE=function(){try{for(var t=WebSquare.language.getMessage("TabControl_right_corner")||"오른쪽 모서리 이미지",e=WebSquare.language.getMessage("TabControl_left_corner")||"왼쪽 모서리 이미지",i=0;i<this.tabArr.length;i++){var s=this.tabArr[i];if("img"!=s.render.firstChild.nodeName.toLowerCase()){var a=document.createElement("img");a.src=o.x._resourceURI+"uiplugin/tabControl/images/right-top.png",a.className="w2tabcontrol_righttop",a.setAttribute("alt",t),s.render.insertBefore(a,s.render.firstChild),(a=document.createElement("img")).src=o.x._resourceURI+"uiplugin/tabControl/images/left-top.png",a.className="w2tabcontrol_lefttop",a.setAttribute("alt",e),s.render.insertBefore(a,s.render.firstChild),a=null}}}catch(t){
r.w.printStackTrace(t,null,this)}},c.prototype.getTabHostAndContainer=function(){try{var t=document.getElementById(this.id+"_tabhost");return{container:document.getElementById(this.id+"_container"),tabhost:t}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.adjustContentsHeight=function(){try{var t=this.getTabHostAndContainer(),e=t.container,i=t.tabhost,o=n.D.getStyleProperty(this.render,"height");if(n.D.isIEAllVersion()&&("auto"===o||"0px"===o)&&window.getComputedStyle)try{o=document.defaultView.getComputedStyle(this.render,null).getPropertyValue("height"),parseInt(o,10)<e.offsetHeight&&(this.render.style.height=e.offsetHeight+i.offsetHeight+"px")}catch(t){r.w.printStackTrace(t,null,this)}if(this.options.tabScroll&&"auto"!=o&&"0px"!=o){var s=document.getElementById(this.id+"_control");if(parseInt(o,10)==parseInt(n.D.getStyleProperty(s,"height"),10))return}if(null==o||""==o||"auto"==o||"0px"==o)return;if("%"==(o+"").charAt((o+"").length-1))return;var a=(parseInt(o,10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-bottom"),10)||0),l=(parseInt(n.D.getStyleProperty(i,"height"),10)||0)+(parseInt(n.D.getStyleProperty(i,"border-top-width"),10)||0)+(parseInt(n.D.getStyleProperty(i,"border-bottom-width"),10)||0)+(parseInt(n.D.getStyleProperty(i,"margin-top"),10)||0)+(parseInt(n.D.getStyleProperty(i,"margin-bottom"),10)||0);switch(this.options.tabPosition?e.style.position="absolute":e.style.height=a-l+"px",this.options.tabPosition){case"top":e.style.height=a-l+"px",e.style.top=i.offsetTop+i.scrollHeight+"px";break;case"bottom":if(e.style.height=a-l+"px",this.options.tabScroll)(s=document.getElementById(this.id+"_control")).style.top=e.offsetTop+e.offsetHeight+"px";else i.style.top=e.offsetTop+e.offsetHeight+"px";break;case"left":for(var h=0,d=[],c=0;c<this.tabArr.length;c++)if(this.tabArr[c].render){var u=WebSquare.style.getSize(this.tabArr[c].render,"width");d.push(u),h=Math.max(u,h)}else d.push(-1);i.style.width=h+"px",i.style.left="0px",e.style.height=a+"px",e.style.left=h+"px",e.style.width="auto",e.style.right="0px";for(c=0;c<d.length;c++)d[c]<h&&(this.tabArr[c].render.style.left=h-d[c]+"px");break;case"right":for(h=0,c=0;c<this.tabArr.length;c++)this.tabArr[c].render&&(h=Math.max(WebSquare.style.getSize(this.tabArr[c].render,"width"),h));i.style.width=h+"px",i.style.right="0px",e.style.height=a+"px",e.style.left="0px",e.style.width="auto",e.style.right=h+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setClosable=function(t,e){try{if(t=parseInt(t,10),e=e||!1,t<0||t>=this.tabArr.length)return!1;this.tabArr[t].closable=e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setActiveTab=async function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;if(this.tabArr[t].disabled||this.tabArr[t].hidden)return(l=this.tabArr[t]).render=document.getElementById(l.tabID),this.removeClass(l.render,l.activeTabClass),!1;this.changeTabhostAccessibility(t);for(var e=0;e<this.tabArr.length;e++){if((l=this.tabArr[e]).render=document.getElementById(l.tabID),e!=t){if(this.removeClass(l.render,l.activeTabClass),l.selectedClass&&this.removeClass(l.render,l.selectedClass),l.defaultClass&&this.addClass(l.render,l.defaultClass),l.contentsRender.style.display="none",l.contentsRender.style.visibility="hidden",l.contentsRender.setAttribute("aria-hidden","true"),this.addClass(l.contentsRender," "),"image"==l.tabType)(s=l.render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=l.defaultImage||s.style[WebSquare.style.camelize("background-image")];try{var i=this.getChild(l.contentsID+"_body");if(null!=i&&i.removeClass("w2tabcontrol_contents_wrapper_selected"),this.options.useTabKeyOnly)null!=(u=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[e]+"_helper"):document.getElementById(this.bridgeIdArr[e]))&&this.removeClass(u,"w2tabcontrol_contents_bridge_selected")
;null!=i&&"active"===i.activeStatus&&"iframe"===i.options.pluginName&&i.getWindow()&&i.getWindow().WebSquare&&i.getWindow().WebSquare.getBody()&&i.getWindow().WebSquare.getBody().getLayerListener().hideAll()}catch(t){r.w.printStackTrace(t,null,this)}}if(0==this.options.useTabKeyOnly){var o="image"==l.tabType?l.render.getElementsByTagName("div")[0]:l.render.getElementsByTagName("a")[0];e!=t?"a"==o.nodeName.toLowerCase()&&""==o.innerHTML?o.parentNode.setAttribute("tabIndex","-1"):o.setAttribute("tabIndex","-1"):"a"==o.nodeName.toLowerCase()&&""==o.innerHTML?o.parentNode.setAttribute("tabIndex","0"):o.setAttribute("tabIndex","0")}}var s,l=this.tabArr[t],h=this.contentsArr[t];if(this.addClass(l.render,l.activeTabClass),l.defaultClass&&this.removeClass(l.render,l.defaultClass),l.selectedClass&&this.addClass(l.render,l.selectedClass),"image"==l.tabType)(s=l.render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=l.selectedImage||s.style[WebSquare.style.camelize("background-image")];h.render.style.display="block",h.render.style.visibility="visible",h.render.setAttribute("aria-hidden","false"),this.addClass(h.render," ");var c=this.getChild(l.contentsID+"_body");if(this.options.useTabKeyOnly)null!=(u=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[t]+"_helper"):document.getElementById(this.bridgeIdArr[t]))&&this.addClass(u,"w2tabcontrol_contents_bridge_selected");var u,p=WebSquare.BootLoader.fullViewed||!1,g=n.D.fullViewed||!1,m=this.selectedIndex;if(this.selectedIndex=t,this.focusedIndex=t,0==h.alwaysDraw&&c.reuseFrame&&!c.loaded&&(c.loaded=!0,this._addTabEvent({uuid:c.uuid,tabID:l.tabID,idx:t,userTabID:l.userTabID}),c.setSrc(h.src,h.forceReload)),0!=h.alwaysDraw||c.reuseFrame){if(1==h.alwaysDraw){if(!this.options.useTabKeyOnly&&1==this.options.useMoveNextTabFocus&&t<this.tabArr.length-1){var f=!1;for(e=0;e<h.render.firstChild.childNodes.length;e++)if("dummyDivForNextTabFocus"==h.render.firstChild.childNodes[e].id){f=!0;break}0==f&&(h.render.firstChild.innerHTML+="<div id='dummyDivForNextTabFocus' tabIndex=0></div>")}p||g||c.refreshAdaptive(),"wframe"===c.options.pluginName&&t!==this.selectedIndex&&a.B.fireEvent(c,"onsetsize")}}else c.render?p||g||c.refreshAdaptive():(await d.D.initAsync(),null===c.render&&await this._setActiveTabAsync(t));if("iframe"==h.frameMode&&"src"in h&&""!=h.src&&1==h.alwaysDraw){var b=c.render.getAttribute("src");("about:blank"==b||WebSquare.net.isSSLBlankPage(b))&&(this._addTabEvent({uuid:c.uuid,tabID:l.tabID,idx:t,userTabID:l.userTabID}),c.setSrc(h.src,h.forceReload),n.D.isIEAllVersion()&&n.D.setInterval(this.checkLoadEvent,{key:c.id+"_checkLoadEvent",caller:this,args:[c],delay:70}))}if(c.addClass("w2tabcontrol_contents_wrapper_selected"),m!=t&&a.B.fireEvent(this,"onchange",l.tabID,t,l.userTabID),this.options.useTabKeyOnly)(u=document.getElementById(this.bridgeIdArr[t]))&&this.activeFirstTime&&this.options.focusOnStart&&u.focus();if(1!=this.activeFirstTime&&(this.activeFirstTime=!0),this.options.tabScroll)if(this.visibleTabIndex>this.selectedIndex)this.scrollTab(this.selectedIndex);else this.getVisibleTab()[this.selectedIndex]||this.scrollTab(this.selectedIndex,"right");return WebSquare.getBody().getLayerListener().hideAll(),!0}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._setActiveTabAsync=async function(t){try{var e,i=this.tabArr[t],o=this.contentsArr[t],s=this.getChild(i.contentsID+"_body");if(this.options.useTabKeyOnly)e=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[t]+"_helper"):document.getElementById(this.bridgeIdArr[t]),o.render.innerHTML=e.outerHTML+s.toHTML();else if(o.render.innerHTML=s.toHTML(),1==this.options.useMoveNextTabFocus&&t<this.tabArr.length-1){for(var n=!1,l=0;l<o.render.firstChild.childNodes.length;l++)if("dummyDivForNextTabFocus"==o.render.firstChild.childNodes[l].id){n=!0;break}0==n&&(o.render.firstChild.innerHTML+="<div id='dummyDivForNextTabFocus' tabIndex=0></div>")}
var h="wframe"===o.frameMode||"wframePreload"===o.frameMode||"iframe"===o.frameMode;h&&this._addTabEvent({uuid:s.uuid,tabID:i.tabID,idx:t,userTabID:i.userTabID}),s.render&&null==s.render.parentNode&&(s.render=document.getElementById(s.id)),s.activate(),o.render.clientHeight>s.render.clientHeight&&(s.render.style.height=o.render.clientHeight+"px"),s.onComplete(),"iframe"===o.frameMode?s.setSrc(o.src,o.forceReload):"wframe"===o.frameMode&&await s.setSrc(o.src,o.forceReload),h||(a.B.fireEvent(this,"ondrawcomplete",i.tabID,t,i.userTabID),a.B.fireEvent(this,"ontabload",i.tabID,t,i.userTabID))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.activateTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;if(this.tabArr[t].disabled)return!1;var e=this.tabArr[t],i=this.contentsArr[t],o=this.getChild(e.contentsID+"_body");0==i.alwaysDraw&&o.reuseFrame&&!o.loaded&&(o.loaded=!0,o.setSrc(i.src,i.forceReload));var s=Promise.resolve();if(0==i.alwaysDraw&&!o.reuseFrame&&!o.render){var a=this.uuid;d.D._awaitObj.key.length>0||d.D._asyncList.length>0?s=d.D.initAsync().then((function(e,i){WebSquare.idCache[a]._activateTabAsync(t)})):this._activateTabAsync(t)}return s}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._activateTabAsync=function(t){try{var e,i=this.tabArr[t],o=this.contentsArr[t],s=this.getChild(i.contentsID+"_body");if(this.options.useTabKeyOnly)e=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[t]+"_helper"):document.getElementById(this.bridgeIdArr[t]),o.render.innerHTML=e.outerHTML+s.toHTML();else o.render.innerHTML=s.toHTML();s.activate(),s.onComplete(),"wframePreload"===o.frameMode||"wframe"!==o.frameMode&&"iframe"!==o.frameMode||!o.src||s.setSrc(o.src,o.forceReload)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.scrollTab=function(t,e,i){try{if(!this.options.tabScroll||t>=this.tabArr.length||t<0)return;if(e=void 0===e?"left":e,t=parseInt(t,10),"btn_scrollLeft"==i){for(;this.tabArr[t].render&&"none"==this.tabArr[t].render.style.display;)if(--t<0)return}else if("btn_scrollRight"==i)for(;this.tabArr[t].render&&"none"==this.tabArr[t].render.style.display;)t++;if("right"==e){var o=document.getElementById(this.id+"_mask"),s=WebSquare.style._getSize(o,"innerWidth"),a=WebSquare.style._getSize(this.tabArr[t].render,"outerMarginWidth");do{var n=t-1;if(n<0)break;if("none"!=this.tabArr[t].render.style.display&&(a+=WebSquare.style._getSize(this.tabArr[n].render,"outerMarginWidth")),a>s)break}while(t-- >0)}for(var l=document.getElementById(this.id+"_scroll"),h=0,d=0;d<t;d++)"none"!=this.tabArr[d].render.style.display&&(h-=WebSquare.style._getSize(this.tabArr[d].render,"outerMarginWidth"));WebSquare.style.setStyle(l,"left",h+"px"),this.visibleTabIndex=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.changeActiveTab=async function(t){try{if(!this.options.tabScroll)return;var e=this.selectedIndex;if("btn_scrollLeft"==t&&e>0){for(e--;e>0&&this.tabArr[e].render&&("none"==this.tabArr[e].render.style.display||this.tabArr[e].disabled);)if(--e<0)return}else if("btn_scrollRight"==t&&e<this.tabArr.length-1)for(e++;e<this.tabArr.length-1&&this.tabArr[e].render&&("none"==this.tabArr[e].render.style.display||this.tabArr[e].disabled);)if(e++,this.tabArr.length-1<e)return;e!=this.selectedIndex&&(!0===this.options.changeActiveTabBeforeselect?await this.setSelectedTabIndex(e):await this.setActiveTab(e))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getVisibleTab=function(){try{var t={};if(this.options.tabScroll)for(var e=document.getElementById(this.id+"_mask"),i=WebSquare.style.getSize(e,"innerWidth"),o=0,s=this.visibleTabIndex;s<this.tabArr.length;s++)(o+=WebSquare.style.getSize(this.tabArr[s].render,"outerMarginWidth"))<=i&&(t[s]=!0);return t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getRealTabIndex=function(t){try{
for(var e=0,i=0,o=0;o<this.tabArr.length;o++)if(!this.tabArr[o].hidden&&"none"!=this.tabArr[o].render.style.display&&"hidden"!=this.tabArr[o].render.style.visibility){if(e>=t){i=o;break}e++}return i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setFocusedTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;var e=this.tabArr[t];if(e.disabled)return!1;e.render=document.getElementById(e.tabID);var i="image"==e.tabType?e.render.getElementsByTagName("div")[0]:e.render.getElementsByTagName("a")[0];"a"==i.nodeName.toLowerCase()&&""==i.innerHTML?i.parentNode.focus():i.focus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkScrollBtnVisibility=function(){try{if(this.options.tabScroll){for(var t=document.getElementById(this.id+"_control"),e=document.getElementById(this.id+"_mask"),i=document.getElementById(this.id+"_btn_scrollLeft"),o=document.getElementById(this.id+"_btn_scrollRight"),s=document.getElementById(this.id+"_btn_submenu"),a=document.getElementById(this.id+"_scroll"),n=WebSquare.style.getSize(t,"innerWidth"),l=0,h=0;h<this.tabArr.length;h++)if((l+=WebSquare.style.getSize(this.tabArr[h].render,"outerMarginWidth"))>n)return void(this.hasClass(e,"mask")||(this.addClass(e,"mask"),i.style.display="",o.style.display="",s.style.display="",i.style.visibility="",o.style.visibility="",s.style.visibility=""));this.hasClass(e,"mask")&&(WebSquare.style.setStyle(a,"left","0px"),this.removeClass(e,"mask"),i.style.display="none",o.style.display="none",s.style.display="none",i.style.visibility="hidden",o.style.visibility="hidden",s.style.visibility="hidden",this.visibleTabIndex=0)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleTabClickEvent=function(t){try{for(var e,i=this.event.getTargetIterator(t,this.render,this._eventBubbling),o="none";i.next();){var s=i.getElement(),l="w2tabcontrol_tab_close",h="w2tabcontrol_tab_close2",d=n.D.getBoolean(this.options.useATagBtn);if(d&&(l="w2tabcontrol_tab_close_atag",h="w2tabcontrol_tab_close2_atag"),this.__hasClass(s,l)||this.__hasClass(s,h)){o="ontabclose",e=(d?s.parentNode.parentNode.getElementsByTagName("a").length>1?s.parentNode.parentNode.getElementsByTagName("a")[0]:s.parentNode.parentNode.getElementsByTagName("div")[0]:s.parentNode.parentNode.getElementsByTagName("a").length>0?s.parentNode.parentNode.getElementsByTagName("a")[0]:s.parentNode.parentNode.getElementsByTagName("div")[0]).getAttribute("aria-controls");break}if(i.match("w2tabcontrol_li",null,null,this.id+"_tab_")){o="ontabclick",e=(d?s.getElementsByTagName("a").length>1?s.getElementsByTagName("a")[0]:s.getElementsByTagName("div")[0]:s.getElementsByTagName("a").length>0?s.getElementsByTagName("a")[0]:s.getElementsByTagName("div")[0]).getAttribute("aria-controls");break}if(i.match("btn_scrollLeft",null,null,this.id+"_btn_scrollLeft")){this._eventBubbling||a.B.stopPropagation(t),this.options.changeActiveTab?this.changeActiveTab("btn_scrollLeft"):this.scrollTab(this.visibleTabIndex-1,null,"btn_scrollLeft"),a.B.fireEvent(this,"onscrollleftbtnclick");break}if(i.match("btn_scrollRight",null,null,this.id+"_btn_scrollRight")){if(this._eventBubbling||a.B.stopPropagation(t),this.options.changeActiveTab)this.changeActiveTab("btn_scrollRight");else{for(var c=document.getElementById(this.id+"_mask"),u=WebSquare.style.getSize(c,"outerMarginWidth"),p=0,g=this.visibleTabIndex;g<this.tabArr.length;g++)"none"!=this.tabArr[g].render.style.display&&(p+=WebSquare.style.getSize(this.tabArr[g].render,"outerMarginWidth"));if(p>u){this.scrollTab(this.visibleTabIndex+1,null,"btn_scrollRight"),a.B.fireEvent(this,"onscrollrightbtnclick");break}}a.B.fireEvent(this,"onscrollrightbtnclick")}else{if(i.match("btn_submenu",null,null,this.id+"_btn_submenu")){this._eventBubbling||a.B.stopPropagation(t),this.toggle(),a.B.fireEvent(this,"onsubmenubtnclick");break}
if(this.hasClass("w2tab_adaptive_layout")&&(this.__hasClass(s,"w2tabcontrol_contents_bridge_helper")||this.options.useH3Bridge&&this.__hasClass(s,"w2tabcontrol_contents_bridge_h3"))){o="ontabclick",e=this.options.useH3Bridge||this.options.removeBridge&&"layout"===this.options.adaptive&&this.hasClass("w2tab_adaptive_layout")?s.parentNode.id:s.parentNode.parentNode.id;break}if(i.match("btn_close_all",null,null,this.id)){this._eventBubbling||a.B.stopPropagation(t),this.deleteAllTabs();break}}}if(i=null,"none"==o)return;this.senseReaderMode&&"focusin"===this.lastEventType||this.hasClass("w2tab_adaptive_layout")||(this._eventBubbling&&"ontabclick"==o?a.B.preventDefault(t):a.B.stopEvent(t));var m,f=-1;for(g=0;g<this.tabArr.length;g++)if((m=this.tabArr[g]).contentsID==e){f=g;break}if("ontabclick"==o){if(f>=0&&(1!=this.tabArr[f].disabled||1!=this.options.preventTabClickEvent)){var b=Promise.resolve();this.selectedIndex==f&&1!=this.options.useTabKeyOnly||(b=this.setSelectedTabIndex(f)),b.then(function(t,e,i,o){return function(s,r){WebSquare.util.isMobile()||1!=t.options.removeBridge||t.tabArr[o].contentsRender.focus(),a.B.fireEvent(t,e,i,o)}}(this,o,m.tabID,f))}}else this.deleteTab(f)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{var e,i,o=this.event.getTargetIterator(t,this.render);if(n.D.isMobile()&&"mouseover"!==t.type&&(i=this.iScroll.bTouchMove,this._initializeIScroll(),!0===i))return;for(;o.next();){if(o.match("w2tabcontrol_li")){for(var s=o.getElement(),a=0;a<this.tabArr.length;a++)if(this.tabArr[a].render)if(this.tabArr[a].render!=s)this.removeClass(this.tabArr[a].render,this.options.overTabClass),this.tabArr[a].hoverClass&&this.removeClass(this.tabArr[a].render,this.tabArr[a].hoverClass),this.tabArr[a].closeBtn&&!this.options.alwaysShowCloseBtn&&(this.tabArr[a].closeBtn.style.display="none"),"image"==this.tabArr[a].tabType&&((e=this.tabArr[a].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==a?this.tabArr[a].selectedImage:this.tabArr[a].defaultImage)||e.style[WebSquare.style.camelize("background-image")]);else{if(this.tabArr[a].disabled)continue;this.addClass(s,this.options.overTabClass),this.tabArr[a].hoverClass&&this.addClass(this.tabArr[a].render,this.tabArr[a].hoverClass),this.tabArr[a].closable&&this.tabArr[a].closeBtn&&(this.tabArr[a].closeBtn.style.display="block"),"image"==this.tabArr[a].tabType&&((e=this.tabArr[a].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=this.tabArr[a].hoverImage||this.tabArr[a].selectedImage||e.style[WebSquare.style.camelize("background-image")])}return void(n.D.isMobile()&&"mouseover"!==t.type&&this.handleTabClickEvent(t))}if(o.match("btn_scrollLeft"))this._showTabTooltip(o.getElement(),WebSquare.language.getMessage("TabControl_previous_tab")),this.addClass(o.getElement(),"btn_scrollLeft_over");else if(o.match("btn_scrollRight"))this._showTabTooltip(o.getElement(),WebSquare.language.getMessage("TabControl_next_tab")),this.addClass(o.getElement(),"btn_scrollRight_over");else if(o.match("btn_submenu"))this._showTabTooltip(o.getElement(),WebSquare.language.getMessage("TabControl_tab_list")),this.addClass(o.getElement(),"btn_submenu_over");else if(o.match("btn_close_all"))this.addClass(o.getElement(),"btn_close_all_over");else if(o.match("w2tabcontrol_tab_center")||o.match("w2tabcontrol_tab_center2")){var l=o.getElement(),h=this.tabArr,d="";for(a=0;a<h.length;a++)h[a].tabID==l.parentElement.id&&(d=h[a]);d&&this._showTabTooltip(l,d.title)}else(o.match("w2tabcontrol_tab_right")||o.match("w2tabcontrol_tab_right2"))&&this._showTabTooltip(o.getElement(),"close")}for(a=0;a<this.tabArr.length;a++)this.tabArr[a].render&&(this.removeClass(this.tabArr[a].render,this.options.overTabClass),this.tabArr[a].hoverClass&&this.removeClass(this.tabArr[a].render,this.tabArr[a].hoverClass),
this.tabArr[a].closeBtn&&!this.options.alwaysShowCloseBtn&&(this.tabArr[a].closeBtn.style.display="none"),"image"==this.tabArr[a].tabType&&((e=this.tabArr[a].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==a?this.tabArr[a].selectedImage:this.tabArr[a].defaultImage)||e.style[WebSquare.style.camelize("background-image")]));o=null,n.D.isMobile()&&"mouseover"!==t.type&&this.handleTabClickEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2tabcontrol_li")){for(var i=e.getElement(),o=-1,s=0;s<this.tabArr.length;s++)if(this.tabArr[s].render===i){o=s;break}if(null==this.tabArr[o])break;if(this.removeClass(this.tabArr[o].render,this.options.overTabClass),this.tabArr[o].hoverClass&&this.removeClass(this.tabArr[o].render,this.tabArr[o].hoverClass),this.options.alwaysShowCloseBtn||(this.tabArr[o].closeBtn.style.display="none"),"image"==this.tabArr[o].tabType){var n=this.tabArr[o].render.getElementsByTagName("div")[0];n.style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==o?this.tabArr[o].selectedImage:this.tabArr[o].defaultImage)||n.style[WebSquare.style.camelize("background-image")]}break}if(e.match("btn_scrollLeft")){this.removeClass(e.getElement(),"btn_scrollLeft_over"),this._hideTooltip();break}if(e.match("btn_scrollRight")){this.removeClass(e.getElement(),"btn_scrollRight_over"),this._hideTooltip();break}if(e.match("btn_submenu")){this.removeClass(e.getElement(),"btn_submenu_over"),this._hideTooltip();break}if(e.match("btn_close_all")){this.removeClass(e.getElement(),"btn_close_all_over");break}(e.match("w2tabcontrol_tab_center")||e.match("w2tabcontrol_tab_right")||e.match("w2tabcontrol_tab_center2")||e.match("w2tabcontrol_tab_right2"))&&this._hideTooltip()}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleResizeEvent=function(t){try{if(this.options.tabScroll){var e=document.getElementById(this.id+"_control"),i=document.getElementById(this.id+"_mask"),o=document.getElementById(this.id+"_btn_scrollLeft"),s=document.getElementById(this.id+"_btn_scrollRight"),a=document.getElementById(this.id+"_btn_submenu"),n=WebSquare.style.getSize(e,"innerWidth")-WebSquare.style.getSize(o,"outerMarginWidth")-WebSquare.style.getSize(s,"outerMarginWidth")-WebSquare.style.getSize(a,"outerMarginWidth"),l=parseInt(WebSquare.style.getStyleProperty(i,"padding-left"))+parseInt(WebSquare.style.getStyleProperty(i,"margin-left"))+parseInt(WebSquare.style.getStyleProperty(i,"padding-right"))+parseInt(WebSquare.style.getStyleProperty(i,"margin-right"));WebSquare.style.setStyle(i,"width",n-l+"px")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getTabHostAndContainer(),o=this.event.getTargetIterator(t,this.render);if(13!=e&&37!=e&&38!=e&&39!=e&&40!=e&&46!=e)return;if(46==e&&t.altKey)return void this.deleteTab(this.getSelectedTabIndex());for(;o.next();)if((n=o.getElement())==i.container){if((37==e||38==e)&&t.ctrlKey){var s=this.tabArr[this.selectedIndex];if(1==(n="image"==s.tabType?s.render.getElementsByTagName("div")[0]:s.render.getElementsByTagName("a")[0]).nodeType)return n.focus(),void a.B.stopEvent(t)}return}switch(e){case 13:return void this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0);case 37:case 38:this.focusedIndex=this.focusedIndex>0?this.focusedIndex-1:0,"a"==(n="image"==this.tabArr[this.focusedIndex].tabType?this.tabArr[this.focusedIndex].render.getElementsByTagName("div")[0]:this.tabArr[this.focusedIndex].render.getElementsByTagName("a")[0]).nodeName.toLowerCase()&&""==n.innerHTML?n.parentNode.focus():n.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0);break;case 39:case 40:var n;this.focusedIndex=this.focusedIndex+1<this.tabArr.length?this.focusedIndex+1:this.focusedIndex,
"a"==(n="image"==this.tabArr[this.focusedIndex].tabType?this.tabArr[this.focusedIndex].render.getElementsByTagName("div")[0]:this.tabArr[this.focusedIndex].render.getElementsByTagName("a")[0]).nodeName.toLowerCase()&&""==n.innerHTML?n.parentNode.focus():n.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0)}o=null,a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusInEvent=function(t){try{var e=this.event.getTargetIterator(t,this.render);for(this.lastEventType=t.type;e.next();)if(e.match(null,"dummyDivForNextTabFocus")){var i=this.tabArr[this.focusedIndex+1],o="image"==i.tabType?i.render.getElementsByTagName("div")[0]:i.render.getElementsByTagName("a")[0];if(1==o.nodeType)return this.focusedIndex++,o.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0),e=null,void a.B.stopEvent(t)}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleTabMove=function(t){try{if(n.D.isMobile()){var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;(e||i)&&(this.iScroll.prevTouches={x:e?t.touches[0].clientX:t.clientX,y:e?t.touches[0].clientY:t.clientY})}if(!this.options.tabMove&&!this.options.tabSplit)return;a.B.stopEvent(t);var o=this.event.getTargetIterator(t,this.render),s=-1,l=this.uuid;for(this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;o.next();)if(o.match("w2tabcontrol_li")){var h=o.getElement();if(!h)return;for(var d=0;d<this.tabArr.length;d++)if(this.tabArr[d].render===h){s=d;break}if(isNaN(s)||s<0)return;WebSquare.dragdrop.gDragManager.activate(t,h,{id:this.id+"_ghostLayer_tabMove",className:"w2tabcontrol_drag_tabMove",dragoverClass:"w2tabcontrol_li",dropClass:"w2tabcontrol_li",delay:15,makeGhostLayer:function(t){return t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t},handleStart:function(t){var e=s,i=WebSquare.idCache[l];if(!i.options.tabSplit){var o=$(i.tabArr[e].render);this.isVertical="left"===i.options.tabPosition||"right"===i.options.tabPosition,this.isVertical?this.tabMove_top=o.css("top"):this.tabMove_left=o.css("left"),this.dragOverTab={},this.dropIndex=-1,this.tabMove_zIndex=o.css("zIndex");var r=Number(this.tabMove_zIndex);if(this.tabMove_zIndex_Array=[],isNaN(r)||r<=0)for(var a=0;a<i.tabArr.length;a++){var n=$(i.tabArr[a].render);this.tabMove_zIndex_Array.push(n.css("zIndex")),a===e?n.css("zIndex",0):n.css("zIndex",1)}else o.css("zIndex",r-1)}},onDrop:function(t,e,i,o,r,n,h){var d=s,c=WebSquare.idCache[l];if(c.options.tabSplit)a.B.fireEvent(c,"ontabsplit",d);else{var u=$(c.tabArr[d].render);if(this.isVertical?u.css("top",this.tabMove_top):u.css("left",this.tabMove_left),this.tabMove_zIndex_Array.length>0)for(var p=0;p<c.tabArr.length;p++)$(c.tabArr[p].render).css("zIndex",this.tabMove_zIndex_Array[p]);else u.css("zIndex",this.tabMove_zIndex);for(var g in this.dragOverTab)this.isVertical?$(c.tabArr[g].render).css("top",this.dragOverTab[g]):$(c.tabArr[g].render).css("left",this.dragOverTab[g]);c.options.tabMove&&c.moveTab(d,this.dropIndex),this.tabMove_left="",this.tabMove_zIndex="",this.dragOverTab={},this.tabMove_zIndex_Array=[]}},onDragover:function(t,e,i,o,r,a,n){var h=s,d=-1,c=WebSquare.idCache[l];if(!c.options.tabSplit){for(var u=0;u<c.tabArr.length;u++)if(c.tabArr[u].render===e){d=u;break}var p=$(c.tabArr[h].render);if(this.isVertical?p.css("top",a/c._zoomLevel):p.css("left",r/c._zoomLevel),null!=c.tabArr[d]&&d!==h){var g=$(c.tabArr[d].render);null==this.dragOverTab[d]?(this.isVertical?(this.dragOverTab[d]=g.css("top"),h>d?g.css("top",p.height()):g.css("top",-1*p.height())):(this.dragOverTab[d]=g.css("left"),h>d?g.css("left",p.width()):g.css("left",-1*p.width())),this.dropIndex=d):(this.isVertical?g.css("top",this.dragOverTab[d]):g.css("left",this.dragOverTab[d]),this.dragOverTab[d]=null,delete this.dragOverTab[d],this.dropIndex=h>d?d+1:d-1)}}}}),o.stop()}o=null}catch(t){
r.w.printStackTrace(t,null,this)}},c.prototype.handleTouchMove=function(t){try{var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;if(e||i){var o={x:e?t.touches[0].clientX:t.clientX,y:e?t.touches[0].clientY:t.clientY},s=this.iScroll.prevTouches.x-o.x,a=this.iScroll.prevTouches.y-o.y;(Math.abs(s)>this.iScroll.epsilon||Math.abs(a)>this.iScroll.epsilon)&&(this.iScroll.bTouchMove=!0)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getWindow=function(t){try{var e,i=void 0!==t?t:this.selectedIndex;if(i=this._getTabIndex(i),!this._isValidTabIndex(i))return e;for(var o=0;o<this.contentsArr.length;o++){var s=this.getChild(this.contentsArr[o].contentsID+"_body");if(o==i){e="iframe"===s.getPluginName()||"wframe"===s.getPluginName()?s.getWindow():window;break}}return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setContentsHeight=function(t){try{var e=this.getTabHostAndContainer(),i=e.container,o=e.tabhost;t=parseInt(t,10),i.style.height=t+"px";parseInt(n.D.getStyleProperty(o,"height"),10),parseInt(n.D.getStyleProperty(o,"border-top-width"),10),parseInt(n.D.getStyleProperty(o,"border-bottom-width"),10),parseInt(n.D.getStyleProperty(o,"margin-top"),10),parseInt(n.D.getStyleProperty(o,"margin-bottom"),10)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedTabID=function(){try{return this.selectedIndex<this.tabArr.length&&this.selectedIndex>=0?this.tabArr[this.selectedIndex].userTabID:null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getSelectedTabIndex=function(){try{return this.selectedIndex<this.tabArr.length&&this.selectedIndex>=0?this.selectedIndex:-1}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getTabIndex=function(t){var e=null;try{for(var i=0;i<this.tabArr.length;i++)if(t==this.tabArr[i].userTabID){e=i;break}return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getTabIndex=function(t){try{var e=t;if("string"==typeof t&&null==(e=this.getTabIndex(t))&&(e=Number(t),isNaN(e)))return;return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getTabID=function(t){var e="";try{for(var i=0;i<this.tabArr.length;i++)if(t==i){e=this.tabArr[i].userTabID;break}return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedTabIndex=async function(t){try{var e=0;if("string"==typeof t){for(var i=!0,o=0;o<this.tabArr.length;o++)if(this.tabArr[o].userTabID==t){e=o,i=!1;break}i&&(e=t)}else e=t;if(0==a.B.fireEvent(this,"onbeforeselect",this.getSelectedTabIndex(),e))return;await this.setActiveTab(e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getTabCount=function(t){try{var e=this.tabArr.length,i=0;if(!1===(t||{}).hiddenTab){for(var o=0,s=this.tabArr.length;o<s;o++)this.tabArr[o].hidden&&i++;e-=i}return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.deleteTab=async function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;var e=(m=this.tabArr[t]).tabID,i=m.userTabID;if(!1===a.B.fireEvent(this,"onbeforetabclose",e,t))return;if(this.selectedIndex==t){for(var o=t+1;o<this.tabArr.length&&0==await this.setActiveTab(o);)o++;if(o>=this.tabArr.length)for(o=t-1;o>=0&&0==await this.setActiveTab(o);)o--;this.selectedIndex>t&&this.selectedIndex--}var s=this.contentsArr[t],n=this.getChild(this.tabArr[t].contentsID+"_body"),l="iframe"==s.frameMode&&n.render&&this.storedFrame.length<this.options.spaIframeMaxSize,h="wframe"===s.frameMode||"wframePreload"===s.frameMode||"iframe"===s.frameMode;n&&(l?(n.loaded=!1,this.removeControl(n),this.storedFrame.push(n.id),n.setSrc(WebSquare.net.getBlankXML())):n.remove());var d,c,u=m.render.parentNode,p=s.render.parentNode;if(u.removeChild(m.render),l){for(o=0;o<s.render.childNodes.length;o++)s.render.childNodes[o]!=n.render&&s.render.removeChild(s.render.childNodes[o]);s.render.style.display="none",s.render.style.visibility="hidden",s.render.setAttribute("aria-hidden","true"),this.addClass(s.render," ")}else p.removeChild(s.render);for(var g in n=null,
this.tabArr[t])this.tabArr[t][g]=null;for(var g in this.contentsArr[t])this.contentsArr[t][g]=null;m=null,s=null,this.tabArr.splice(t,1),this.contentsArr.splice(t,1),this.bridgeIdArr.splice(t,1),this.backbridgeIdArr.splice(t,1);for(o=t;o<this.tabArr.length;o++){var m=this.tabArr[o];d=o+2,c=o+1,this.__removeClass(m.render,"w2tabcontrol_li_"+d),this.__addClass(m.render,"w2tabcontrol_li_"+c)}t<this.selectedIndex?await this.setActiveTab(this.selectedIndex-1):t==this.selectedIndex?this.tabArr[this.selectedIndex]?await this.setActiveTab(this.selectedIndex):await this.setActiveTab(this.selectedIndex-1):t>this.selectedIndex&&await this.setActiveTab(this.selectedIndex),this.options.tabScrollAuto&&this.scrollTab(Math.max(this.visibleTabIndex-1,0)),this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility(),a.B.fireEvent(this,"ontabclose",e,t,i),h||(a.B.fireEvent(this,"ondrawcomplete",e,t,i),a.B.fireEvent(this,"ontabload",e,t,i))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.deleteAllTabs=function(){try{if(this.tabArr.length<=0)return;for(var t=this.getTabHostAndContainer(),e=this.tabArr.length-1;e>=0;e--){var i=this.getChild(this.tabArr[e].contentsID+"_body");i&&i.remove();var o=this.tabArr[e];t.tabhost.removeChild(o.render);var s=this.contentsArr[e];t.container.removeChild(s.render)}this.tabArr=[],this.contentsArr=[],this.bridgeIdArr=[],this.backbridgeIdArr=[],this._makeIframeBackground()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getFrame=function(t){if(t=this._getTabIndex(t),this._isValidTabIndex(t)){var e=this.contentsArr[t],i=this.getChild(e.contentsID+"_body");return null!=i?i:void 0}},c.prototype._getCurrentFrame=function(){var t=this.contentsArr[this.selectedIndex],e=this.getChild(t.contentsID+"_body");if(null!=e)return e},c.prototype.isLoaded=function(t){if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;var e=this.contentsArr[t];return this.getChild(e.contentsID+"_body").completed},c.prototype.addTab=async function(t,e,i){try{var a=t||"";if(void 0===e)return;for(var l=!1,h=0;h<this.tabArr.length;h++)if(""==a||this.tabArr[h].userTabID==a){l=!0;break}var c=e.openAction;if(l){if(!c&&this.options.useConfirmMessage){var u=this.options.confirmMessage;if(e.useLocale&&this.options.confirmMessageLocaleRef){var p=this.getLocaleValue(this.options.confirmMessageLocaleRef);p&&(u=p)}else u.indexOf("#title")>-1&&(u=u.replace("#title",e.label));c=confirm(u)?this.options.confirmTrueAction:this.options.confirmFalseAction}if("exist"===c){var g,m=this.getTabIndex(a),f=this.contentsArr[m];if("active"!=(C=this.getChild(this.tabArr[m].contentsID+"_body")).activeStatus)f.src=i.src||"about:blank";else if("iframe"===C.options.pluginName)C.setSrc(i.src||"about:blank",f.forceReload);else i.dataObject?g={dataObject:i.dataObject}:f.dataObject&&(g={dataObject:f.dataObject}),C.setSrc(i.src||"",g);return await this.setSelectedTabIndex(m),a}if("new"!==c){if("select"===c)return await this.setSelectedTabIndex(this.getTabIndex(a)),a;if("last"===c){m=this.getTabIndex(a);return $("#"+this.id+"_tabhost").children().last().after($("#"+this.id+"_tab_"+a)),await this.setSelectedTabIndex(m),a}return a}a=a+"_"+this.increaseKey++}if(-1!=this.options.windowMaxNum&&this.getTabCount()>=this.options.windowMaxNum)return void alert(WebSquare.language.getMessage("TabControl_maxNum_warning",this.options.windowMaxNum));var b=this.id+"_tab_"+a,y={tabID:b,userTabID:a,contentsID:"",tabLabel:e.label||"",disabled:e.disabled||!1,render:null,tabWidth:parseInt(e.tabWidth,10)>0?parseInt(e.tabWidth,10):this.options.tabWidth,tabHeight:parseInt(e.tabHeight,10)>0?parseInt(e.tabHeight,10):this.options.tabHeight,tabClass:e.class||this.options.tabClass,tabStyle:e.style||this.options.tabStyle,activeTabClass:e.activeTabClass||this.options.activeTabClass,disabledTabClass:e.disabledTabClass||this.options.disabledTabClass,selectedClass:e.selectedClass||this.options.selectedClass,selectedImage:e.selectedImage?"url("+e.selectedImage+")":"",
defaultImage:e.defaultImage?"url("+e.defaultImage+")":"",hoverImage:e.hoverImage?"url("+e.hoverImage+")":"",tabType:"image"==e.tabType?"image":"text",defaultClass:e.defaultClass||"",hoverClass:e.hoverClass||"",closable:null!=e.closable?n.D.getBoolean(e.closable):this.options.closable,closeBtn:null,label:e.label||"",value:b,title:e.title||e.label,tabHTML:e.tabHTML||"",useLocale:e.useLocale||this.options.useLocale,useATagBtn:null!=e.useATagBtn?n.D.getBoolean(e.useATagBtn):this.options.useATagBtn};"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||"string"==typeof y.tabStyle&&y.tabStyle.indexOf("width")<0&&(y.tabStyle="width:"+15*y.label.length+"px;"+y.tabStyle);var v=o.x.extendKeepingType({},WebSquare.uiplugin.content.prototype.defaultOptions),w=o.x.extendKeepingType(v,i);!1===i.processMsgFrame&&(w.processMsgFrame=!1),!1===i.delegateProcessMsg&&(w.delegateProcessMsg=!1),!1===i.frameModal&&(w.frameModal=!1);var S=this.id+"_contents_"+a;y.contentsID=S,(f=o.x.extend({contentsID:S,contentsClass:i.contentsClass||this.options.contentsClass,render:null,xml:null,name:w.name||"",scope:w.scope,msaName:w.msaName},w||{})).src&&(w.frameMode||(f.frameMode=w.wframe?"wframe":"iframe")),e.addTabIndex>=0?(this.tabArr.splice(e.addTabIndex,0,y),this.contentsArr.splice(e.addTabIndex,0,f)):(this.tabArr.push(y),this.contentsArr.push(f));var C,_=this.getTabHostAndContainer(),x=_.container,I=_.tabhost;if(e.addTabIndex<=this.selectedIndex&&this.selectedIndex++,this.storedFrame.length>0&&"iframe"===f.frameMode){var T,k=S+"_body",D=!1;for(h=0;h<this.storedFrame.length;h++)if(this.storedFrame[h]==k){T=this.storedFrame.splice(h,1),D=!0;break}D||(T=this.storedFrame.shift()),(C=n.D.getComponentById(T)).reuseFrame=!0,D||s.v.setId(k,C),w.name&&C.setAttribute("name",w.name)}else C=this.initContents(f);"wframePreload"===f.frameMode&&await d.D.initAsync(),this.addControl(C);var L="make"+y.tabType.capitalize()+"TabHTML";if(e.addTabIndex>=0){var W=document.createElement("div");W.innerHTML=this[L](y,this.tabArr.length,!0),I.insertBefore(W.childNodes[0],I.childNodes[e.addTabIndex]||null)}else I.innerHTML+=this[L](y,this.tabArr.length,!0);if(("top"===this.options.tabPosition||"bottom"===this.options.tabPosition)&&!y.tabWidth&&y.tabStyle.indexOf("width")<0){var A;A=e.addTabIndex>=0?I.childNodes[e.addTabIndex]:I.lastChild;var M=0;null!=A&&(A.style.overflow="visible",null!=A.firstChild&&(A.firstChild.style.overflow="visible"),A.childNodes.length>1&&(M+=A.childNodes[1].offsetWidth),A.childNodes.length>2&&(M+=A.childNodes[2].offsetWidth)),A.style.width=A.scrollWidth+M+"px"}var E=document.createElement("div");E.innerHTML=this.makeContentsHTML(f,y.tabLabel,C&&C.reuseFrame,e.addTabIndex);var q=E.removeChild(E.firstChild);if(C&&C.reuseFrame&&C.render&&C.render.parentNode){var R,N=C.render.parentNode;if(this.options.useTabKeyOnly)null!=(R=document.getElementById("bridgeId"))&&N.removeChild(R),N.insertBefore(q.firstChild,C.render);if(this.options.useBackbridge)null!=(R=document.getElementById("bridgeId"))&&N.removeChild(R),N.appendChild(q.lastChild,C.render);N.setAttribute("id",f.contentsID),N.setAttribute("class",f.contentsClass),n.D.getBoolean(this.options.removeAriaLabelledby)||N.setAttribute("aria-labelledby",y.tabLabel)}else x.appendChild(q);E=null,q=null,f.alwaysDraw&&("iframe"!==f.frameMode&&"wframe"!==f.frameMode&&"wframePreload"!==f.frameMode||this._addTabEvent({uuid:C.uuid,tabID:y.tabID,idx:e.addTabIndex>=0?e.addTabIndex:this.tabArr.length-1,userTabID:y.userTabID}),C.reuseFrame||(C.activate(),C.onComplete()),"iframe"!==f.frameMode&&"wframe"!==f.frameMode||C.setSrc(f.src,f.forceReload),n.D.isIEAllVersion()&&"iframe"===f.frameMode&&n.D.setInterval(this.checkLoadEvent,{key:C.id+"_checkLoadEvent",caller:this,args:[C],delay:70}));var F=n.D.getDataPrefix("index");for(h=0;h<this.tabArr.length;h++)(y=this.tabArr[h]).render=document.getElementById(y.tabID),y.closeBtn=document.getElementById(y.tabID+"_close"),
y.contentsRender=document.getElementById(y.contentsID),this.contentsArr[h].render=y.contentsRender,e.addTabIndex>=0&&y.render.setAttribute(F,h+1),y.tabHTML&&this.setTabHTML(y.userTabID,y.tabHTML);var O=e.addTabIndex>=0?e.addTabIndex:this.tabArr.length-1;return this.tabArr[O].contentsRender.style.display="none",1==this.tabArr.length&&(await this.setActiveTab(0),"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||this.adjustContentsHeight()),this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility(),this.options.spaAuto&&s.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),a}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.disableTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;var e=this.tabArr[t];if(1==e.disabled)return;var i=this.contentsArr[t];this.removeClass(e.render,e.activeTabClass),this.addClass(e.render,e.disabledTabClass),n.D.isIE(8)&&(e.render.style.zIndex=0);var o=e.render.getElementsByTagName("a")[0];null!=o&&(o.removeAttribute("href"),o=null),e.disabled=!0;var s=this.getChild(i.contentsID+"_body");"stop"!=s.activeStatus&&(this.disabledComponents[t]=n.D.setDisabled({componentId:s.id,disabled:!0}).skipComponents);for(var a=0;a<this.disabledTabStack.length;a++)if(this.disabledTabStack[a].tabID===e.tabID){this.disabledTabStack.splice(a,1);break}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.enableTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;var e=this.tabArr[t];if(0==e.disabled)return;var i=this.contentsArr[t];this.removeClass(e.render,e.disabledTabClass),this.selectedIndex>=0&&t==this.selectedIndex&&this.addClass(e.render,e.activeTabClass),e.disabled=!1,n.D.isIE(8)&&(e.render.style.zIndex="");var o=e.render.getElementsByTagName("a")[0];null!=o&&(o.setAttribute("href","#"+e.contentsID+"_bridge"),o=null);var s=this.getChild(i.contentsID+"_body");if("stop"!=s.activeStatus){var a={componentId:s.id,disabled:!1};null!=this.disabledComponents[t]&&0==this.options.forceChildCompEnabled&&(a.excludeIdList=this.disabledComponents[t]),n.D.setDisabled(a),null!=this.disabledComponents[t]&&delete this.disabledComponents[t]}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hideTab=async function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;if(0==a.B.fireEvent(this,"onbeforehide",this.getSelectedTabIndex(),t))return;if(t==this.selectedIndex){for(var e=t+1;e<this.tabArr.length&&0==await this.setActiveTab(e);)e++;if(e>=this.tabArr.length)for(e=t-1;e>=0&&0==await this.setActiveTab(e);)e--;t==this.selectedIndex&&(this.selectedIndex=-1)}var i=this.tabArr[t],o=this.contentsArr[t];if(n.D.isIE(8)&&(i.render.style.zIndex=0),i.render.style.visibility="hidden",i.render.style.display="none",i.hidden=!0,o.render.style.display="none",o.render.style.visibility="hidden",o.render.setAttribute("aria-hidden","true"),this.options.tabScrollAuto&&this.options.tabScroll){var s=this.visibleTabIndex,l=this.getVisibleTab(),h=s+Object.keys(l).length-1;(this.visibleTabIndex==t||h==t||this.visibleTabIndex<t&&h>t)&&(s-=1),this.scrollTab(Math.max(s,0))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showTab=async function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;if(0==a.B.fireEvent(this,"onbeforeshow",this.getSelectedTabIndex(),t))return;var e=this.tabArr[t];e.render.style.visibility="visible",e.render.style.display="",e.hidden=!1,-1==this.selectedIndex?await this.setActiveTab(t):this.options.tabScrollAuto&&this.options.tabScroll&&this.visibleTabIndex>t&&this.scrollTab(this.visibleTabIndex),n.D.isIE(8)&&(e.render.style.zIndex="")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getLabelText=function(t){try{return(t=parseInt(t,10))<0||t>=this.tabArr.length?null:this.tabArr[t].tabLabel}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setLabelText=function(t,e){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return
;1==this.options.tabScroll&&(this.tabArr[t].label=e);for(var i,o=this.tabArr[t],s=0;s<o.render.childNodes.length;s++)if(1==(i=o.render.childNodes[s]).nodeType&&"div"==i.nodeName.toLowerCase())for(var a=0;a<i.childNodes.length;a++){var n=i.childNodes[a];if(1==n.nodeType&&"a"==n.nodeName.toLowerCase())return o.tabLabel=e,void(n.innerHTML=e);if(1==n.nodeType&&"div"==n.nodeName.toLowerCase())return o.tabLabel=e,void n.setAttribute("title",e)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t,e){try{t=n.D.getBoolean(t);if(h.s.prototype.setDisabled.call(this,t),e||this.options.keepDisabledTab)if(t)for(var i=0;i<this.tabArr.length;i++)this.tabArr[i].disabled||this.disabledTabStack.push(this.tabArr[i].tabID),this.disableTab(i);else{for(i=0;i<this.disabledTabStack.length;i++)for(var o=0;o<this.tabArr.length;o++)if(this.tabArr[o].tabID===this.disabledTabStack[i]){this.enableTab(o);break}this.disabledTabStack=[]}else{for(i=0;i<this.tabArr.length;i++)t?this.disableTab(i):this.enableTab(i);this.disabledTabStack=[]}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSize=function(t,e){try{h.s.prototype.setSize.call(this,t,e)}catch(t){r.w.printStackTrace(t)}},c.prototype.setSubLayer=function(){try{if(null==this.itemTable){this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:"auto",style:"position:absolute;",defaultStyle:"",className:"w2table ",w2table:"w2table_tabControl",w2table_main:"w2table_tabControl_main",w2table_row:"w2table_tabControl_row",w2table_col:"w2table_tabControl_col",w2table_col_over:"w2table_tabControl_col_over",escape:!0,useAccessibilityMenu:this.options.useAccessibilityMenu,tableRender:this.options.tableRender,wheelRows:this.options.wheelRows,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate();var t=this;this.itemTable.addClickEventListener((async function(e,i){await t.setSelectedTabIndex(t.getRealTabIndex(i)),t.closeSubLayer()})),this.itemTable.addKeyDownEventListener((async function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i||32==i)await t.setSelectedTabIndex(t.getRealTabIndex(this.getSelectedIndex())),t.focus(),t.closeSubLayer();else if(27==i){document.getElementById(t.id+"_btn_submenu").focus(),t.closeSubLayer()}else if(t.itemTable.endReached){t.itemTable.endReached=!1,document.getElementById(t.id+"_btn_submenu").focus(),t.closeSubLayer()}}))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectOptions=function(){try{if(null!=this.itemTable){for(var t=[],e=0;e<this.tabArr.length;e++)this.tabArr[e].hidden||"none"==this.tabArr[e].render.style.display||"hidden"==this.tabArr[e].render.style.visibility||t.push(this.tabArr[e]);this.itemTable.setItemArr(t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setItemTable=function(){try{for(var t=document.getElementById(this.id+"_btn_submenu"),e=WebSquare.style.getSize(t,"outerMarginHeight"),i=WebSquare.style.getAbsoluteLeft(this.render)+this.render.offsetWidth,o=WebSquare.style.getAbsoluteTop(t)+e,s=0,a=0;a<this.tabArr.length;a++){var n=WebSquare.style.getSize(this.tabArr[a].render,"outerMarginWidth");n>s&&(s=n)}if(null===this.itemTableTdMargin){var l=document.getElementById(this.id+"_itemTable_0");l?this.options.useAccessibilityMenu?this.itemTableTdMargin=parseInt(WebSquare.style.getStyleProperty(l.parentNode,"margin-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(l.parentNode,"padding-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(l.parentNode,"padding-right"),10)||0+parseInt(WebSquare.style.getStyleProperty(l.parentNode,"margin-right"),10)||0:this.itemTableTdMargin=parseInt(WebSquare.style.getStyleProperty(l,"margin-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(l,"padding-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(l,"padding-right"),10)||0+parseInt(WebSquare.style.getStyleProperty(l,"margin-right"),10)||0:this.itemTableTdMargin=0}
s+=this.itemTableTdMargin;var h=document.getElementById(this.itemTable.id+"_main");WebSquare.style.setStyle(h,"width",s+"px"),WebSquare.style.setStyle(this.itemTable.render,"width",s+"px"),i-=s;var d=document.body.scrollTop;d<document.documentElement.scrollTop&&(d=document.documentElement.scrollTop);var c=o-d;document.documentElement.clientHeight-c<this.itemTable.render.offsetHeight&&(o=o-this.itemTable.render.offsetHeight-e),this.itemTable.setPosition(i,o),WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._openSubLayer=function(){try{this.setSubLayer(),this.isOpen||(this.itemTable.show(),this.itemTable.render.setAttribute("aria-expanded","true"),this.setSelectOptions(),this.setItemTable(),this.itemTable.focus(),this.itemTable.setSelectedIndex(this.selectedIndex),this.isOpen=!0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.closeSubLayer=function(t){try{var e={documentClick:t};WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._closeSubLayer=function(t){try{this.isOpen&&null!=this.itemTable&&(this.itemTable.hide(),this.itemTable.render.setAttribute("aria-expanded","true"),this.isOpen=!1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=n.D.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkLoadEvent=function(t){try{if(t&&t.render&&t.render.contentWindow){var e=t.render.contentWindow;e.WebSquare&&e.WebSquare.scriptSectionExcuteFlag&&"executed"===e.WebSquare.scriptSectionExcuteFlag&&(n.D.clearInterval(t.id+"_checkLoadEvent"),n.D.fullViewed&&n.D.zoomed(e.document.body,"1")),e.WebSquare||n.D.clearInterval(t.id+"_checkLoadEvent")}}catch(e){t&&n.D.clearInterval(t.id+"_checkLoadEvent"),r.w.printStackTrace(e,null,this)}},c.prototype.moveTab=function(t,e){try{if(t===e||t<0||e<0)return;var i=this.tabArr[this.selectedIndex],o=this.tabArr[t].userTabID,s=this.tabArr[e].userTabID;if(!1===a.B.fireEvent(this,"onbeforetabmove",{startTabID:o,startTabIndex:t,endTabID:s,endTabIndex:e}))return;var n=this.getTabHostAndContainer().tabhost,l=t>e?0:1;e<this.getTabCount()-1?n.insertBefore(this.tabArr[t].render,this.tabArr[e+l].render):n.appendChild(this.tabArr[t].render);var h=function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])};h(this.tabArr,t,e),h(this.contentsArr,t,e),h(this.bridgeIdArr,t,e),this.backbridgeIdArr&&this.backbridgeIdArr.length>0&&h(this.backbridgeIdArr,t,e);for(var d=0;d<this.tabArr.length;d++)if(this.tabArr[d]===i){this.selectedIndex=d;break}a.B.fireEvent(this,"onaftertabmove",{startTabID:o,startTabIndex:t,endTabID:s,endTabIndex:e})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getTabInfo=function(){try{for(var t=[],e=this.getTabCount(),i=n.D.getDataPrefix("index"),o=0;o<e;o++)t.push({id:this.tabArr[o].userTabID,label:this.tabArr[o].label,defaultTabIndex:Number(this.tabArr[o].render.getAttribute(i))-1,currentTabIndex:o,src:this.contentsArr[o].src,alwaysDraw:this.contentsArr[o].alwaysDraw});return t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setTabOrder=function(t){try{var e=this.getTabCount();if(t.length!==e)return void l.k.printLog("WARNING !!! : setTabOrder argument array length must be "+e+"["+this.id+"]");for(var i=[],o=0;o<e;o++){var s=this.getTabIndex(t[o]);null==s&&(s=t[o]),i.push(s)}var a=this.getTabHostAndContainer().tabhost;for(o=0;o<e;o++)a.appendChild(this.tabArr[i[o]].render);var n=function(t,e){for(var i=t.splice(0,t.length),o=0;o<i.length;o++)t.push(i[e[o]])}
;n(this.tabArr,i),n(this.contentsArr,i),n(this.bridgeIdArr,i),this.backbridgeIdArr&&this.backbridgeIdArr.length>0&&n(this.backbridgeIdArr,i),this.selectedIndex=i[this.selectedIndex]}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setTabHTML=function(t,e){try{var i=this._getTabIndex(t);if(!this._isValidTabIndex(i))return;var o=this.tabArr[i];if(e&&o){var s=e;try{var a=n.D.getGlobalFunction(e,this.scope_id);s="function"==typeof a?a(o.label):a}catch(t){s=e}var l=document.getElementById(o.tabID+"_tabHTML");l&&(l.innerHTML=s,this.options.tabHTML=s)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setWidth=function(t){try{if(t=parseInt(t,10),!isNaN(t)){this.render.style.width=t+"px",this.getTabHostAndContainer().container.style.width=t+"px";for(var e=0;e<this.tabArr.length;e++){var i=this.tabArr[e],o=this.contentsArr[e],s=this.getChild(o.contentsID+"_body");i.contentsRender=document.getElementById(i.contentsID),i.contentsRender.style.width=t+"px",s&&s.render&&(s.render.style.width=t+"px")}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setHeight=function(t){try{if(t=parseInt(t,10),!isNaN(t)){this.render.style.height=t+"px";var e=this.getTabHostAndContainer(),i=e.container;t-=e.tabhost.clientHeight,i.style.height=t+"px";for(var o=0;o<this.tabArr.length;o++){var s=this.tabArr[o],a=this.contentsArr[o],n=this.getChild(a.contentsID+"_body");s.contentsRender=document.getElementById(s.contentsID),s.contentsRender.style.height=t+"px",n&&n.render&&(n.render.style.height=t+"px")}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.changeTabhostAccessibility=function(t,e){try{if(null==t||null==t||t<0||t>=this.getTabCount())return;if(0==e||e||(e=this.selectedIndex),t==e)return;var i,o,s=this.getTabHostAndContainer().tabhost,a=s.childNodes[t],n=s.childNodes[e];return"image"==this.tabArr[t].tabType?a&&a.firstChild&&(i=a.firstChild):a&&a.firstChild&&a.firstChild.firstChild&&(i=a.firstChild.firstChild),this.tabArr[e]&&"image"==this.tabArr[e].tabType?n&&n.firstChild&&(o=n.firstChild):n&&n.firstChild&&n.firstChild.firstChild&&(o=n.firstChild.firstChild),o&&o.setAttribute("aria-selected","false"),void(i&&i.setAttribute("aria-selected","true"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._addTabEvent=function(t){try{var e=WebSquare.idCache[t.uuid],i=this.uuid,o=t.tabID,s=t.userTabID,n="on"+e.options.pluginName+"load";e.bind(n,(function(){var t=WebSquare.idCache[i];if(t){var e=t.getTabIndex(s);a.B.fireEvent(t,"ondrawcomplete",o,e,s),a.B.fireEvent(t,"ontabload",o,e,s)}}));var l="on"+e.options.pluginName+"unload";e.bind(l,(function(){var t=WebSquare.idCache[i];if(t){var e=t.getTabIndex(s);a.B.fireEvent(t,"ontabunload",o,e,s)}}))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._isValidTabIndex=function(t){try{return!(isNaN(t)||t<0||t>=this.tabArr.length)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._initializeIScroll=function(){try{n.D.isMobile()&&(this.iScroll={epsilon:30})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._hideTooltip=function(){try{this.tooltip&&this.tooltip.setStyle("display","none")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._showTooltip=function(t,e,i){try{if(!this.tooltip){try{var o=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(o){var a=n.D.getGlobalFunction(o,this.scope_id),l=!0;if("function"==typeof a&&(l=a(this)),!l)return}}catch(t){r.w.printStackTrace(t)}this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2tabcontrol_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")}this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),
i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._showTabTooltip=function(t,e){try{if(!0===this.options.useTitleTooltip){if(!t)return;var i=t,o=i.offsetWidth,s=i.offsetHeight,a=20,n=s+3;try{this.options.tooltipPositionX&&(a=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(o,s)),this.options.tooltipPositionY&&(n=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(o,s))}catch(t){l.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}var h=WebSquare.style.getAbsoluteLeft(i)+a,d=WebSquare.style.getAbsoluteTop(i)+n;""!=e&&this._showTooltip(h,d,e,n)}}catch(t){r.w.printStackTrace(t,null,this)}}},4246:(t,e,i)=>{i.r(e),i.d(e,{textarea:()=>d});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=i(1577),d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),o.x.extend(d.prototype,h.z.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.textarea",pluginName:"textarea",userEvents:["oneditend","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull"],systemEvents:["onclick","ondblclick","onkeydown","onfocus","onbeforeeditfocus","onfocusin","onblur","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",wrap:"",readOnlyClass:"w2textarea_readonly",focusRemember:!1,placeholder:"",showPlaceHolderOnReadOnly:!1,name:"",refSyncKeyup:!1,preventCopyPaste:!1,nextTabByEnter:!1},d.prototype.initialize=function(t){try{this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.refreshStop=!1,this.caretPosition={start:-1,end:-1},this.rememberCaretPosition=this.options.focusRemember&&s.v.browserCheck.ie&&parseInt(s.v.browserVersion(),10)<10,this._focusStatus="init",this.realValue="",this.supportPlaceholder=!1,this.options.placeholder&&WebSquare.uiplugin.textarea.placeholder&&(this.supportPlaceholder=!0),this.beforeEditValue=""}catch(t){r.w.printStackTrace(t,null,this)}},d.placeholder="string"==typeof document.createElement("textarea").placeholder,d.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'",o=""==this.options.title?"":"title='"+this.options.title+"'",s=""==this.options.wrap?"":"wrap='"+this.options.wrap+"'",a=""==this.supportPlaceholder?"":" placeholder='"+this.options.placeholder+"'",n=""==this.options.name?"":"name='"+this.options.name+"'";return t.push("<textarea id='"+this.id+"' "+e+" class='w2textarea "+this.options.className+"' "+o+" "+s+" "+i+" "+a+" "+n+">"),t.push("</textarea>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){try{this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.addEvent("oneditend",(function(){if(!this.options.placeholder||this.supportPlaceholder||0!=this.realValue.length||!this.render.className.match("w2textarea_placeholder")){var t=this.getValue(),e=t;-1!=this.options.maxByteLength&&(t=n.D.getStringByByteSize(t,this.options.maxByteLength)),t=this.validator.validateString(t),this.options.focusRemember&&e==t||this.setValueNM(t)}})),this.options.maxlength>0&&this.render.setAttribute("maxlength",this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),(n.D.isIEAllVersion()||n.D.isSpartan())&&(this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent)),
this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent))),this.options.preventCopyPaste&&(n.D.isOpera()&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t),this.focus()}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){t.ctrlKey&&(88!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode||a.B.stopEvent(t))})))),this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)})))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.rememberCaretPosition&&this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2textarea_placeholder")),this.refresh()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setValueNM=function(t){try{if(n.D.isNull(t)||this.refreshStop)return;t=t.toString(),this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2textarea_placeholder")||this.addClass("w2textarea_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2textarea_placeholder"),this.render.value=t):this.render.value=t,this.realValue=t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getValue=function(){try{return this.refreshStop?this.refreshStopValue:this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2textarea_placeholder")?"":this.render.value}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setInitValue=function(t){try{var e=this.getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":
1==e?this.addClass(this.render,"w2textarea_disabled"):this.removeClass(this.render,"w2textarea_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":1==e?this.addClass(this.render,"w2textarea_mandatory"):this.removeClass(this.render,"w2textarea_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},d.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t)}},d.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},d.prototype.handleFocusEvent=function(t){try{this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2textarea_placeholder")),this.rememberCaretPosition&&(this.caretPosition=WebSquare.text.getSelection(this.render));var e=this;WebSquare.historyManager.set(this.options.pluginName,this.id,{value:this.getValue()},{onRestore:function(t){e.refreshStop=!0,e.refreshStopValue=t.value;var i=e.refreshStopValue;if(!n.D.isNull(i)){var o=e.render.value;e.setValueNM(i),e.modelControl.setData(i),o!=i&&a.B.fireEvent(e,"onchange",{oldValue:o,newValue:i}),e.refreshStop=!1,e.refreshStopValue=""}}}),this._focusStatus="done"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleBlurEvent=function(t){try{if(a.B.fireEvent(this,"oneditend"),this.options.focusRemember){var e=this.getValue();if(n.D.isNull(e))return;this.modelControl.setData(e)}else this.setValue(this.getValue());var i=WebSquare.historyManager.get(this.options.pluginName,this.id);i.value!=this.getValue()&&(a.B.fireEvent(this,"onchange",{oldValue:i.value,newValue:this.getValue()}),a.B.fireEvent(this,"onviewchange",{oldValue:i.value,newValue:this.getValue()})),this._focusStatus="init"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleKeydownEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode,o=!0;if(13==i&&(this._handleDownKey=!0),9!=i&&13!=i||(o=a.B.fireEvent(this,"oneditenter",t)),9==i||13==i&&!0===this.options.nextTabByEnter)if(!1!==o)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.B.preventDefault(t),e=n.D.getPreTabbableComp(this.id))return void e.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.B.preventDefault(t),e=n.D.getNextTabbableComp(this.id))return void e.focus();this.beforeEditValue=this.getValue()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleKeypressEvent=function(t){try{13!=(t.charCode?t.charCode:t.keyCode)||this._handleDownKey||a.B.stopEvent(t),this.validator.validateKeyPress(this.render,this.getValue(),t)||a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=!1,i=t.charCode?t.charCode:t.keyCode;if(37==i);else if(38==i);else if(39==i);else if(40==i);else if(33==i);else if(34==i);else if(35==i);else if(36==i);else if(13==i&&(this._handleDownKey=!1),this.options.maxlength>-1)if(n.D.isIE()){var o=WebSquare.text.getSelection(this.render);0!=t.charCode&&o.start==o.end&&this.render.value.length+1>this.options.maxlength&&(e=!0)}else this.render.value.length>this.options.maxlength&&(e=!0);if(-1!=this.options.maxByteLength)(s=this.render.value)!=n.D.getStringByByteSize(s,this.options.maxByteLength)&&(e=!0);if(this.rememberCaretPosition&&(this.caretPosition=WebSquare.text.getSelection(this.render)),e&&(this.render.blur(),
this.rememberCaretPosition?WebSquare.text.setSelection(this.render,this.caretPosition):this.render.focus()),-1!=this.options.maxByteLength){var s=this.render.value,l=n.D.getByteLength(s)===this.options.maxByteLength&&!0!==n.D.isKorean(s.charAt(s.length-1)),h=n.D.getByteLength(s)>this.options.maxByteLength;if(l||h){var d={value:this.getValue(),keyCode:i};a.B.fireEvent(this,"oneditfull",d)}}d={oldValue:this.beforeEditValue,newValue:this.getValue(),keyCode:i};a.B.fireEvent(this,"oneditkeyup",d,t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.focus=function(){this.rememberCaretPosition?WebSquare.text.setSelection(this.render,this.caretPosition):l.s.prototype.focus.call(this)},d.prototype.handleMouseupEvent=function(t){this.caretPosition=WebSquare.text.getSelection(this.render)},d.prototype.handleFocusinEvent=function(t){this._focusStatus="focusin"},d.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},d.prototype.setPlaceholder=function(t){try{if(n.D.isNull(t))return;if(this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.render.disabled||this.render.readOnly?this.options.placeholder="":this.hasClass("w2textarea_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2textarea_placeholder")))}catch(t){r.w.printStackTrace(t)}},d.prototype.setDisabled=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t)}else this.options.disabled=t,this.setProperty("disabled",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t)}return t},d.prototype.setReadOnly=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t)}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t,null,this)}return t},d.prototype.commit=function(){try{this.setValue(this.getValue())}catch(t){r.w.printStackTrace(t,null,this)}}},8072:(t,e,i)=>{i.r(e),i.d(e,{textbox:()=>d});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=function(t,e,i){if(h.s.call(this,t,e,i),i){var o=WebSquare.Elem.api.getLocalName(i);"textbox"!=o&&(this.options.tagname=o)}""!=this.options.for&&(this.options.tagname="label")};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.textbox",pluginName:"textbox",serializable:!0,parseAttributes:!0,userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onmouseover","onmouseout"],useConfig:!0,label:"",escape:!0,escapeFormatter:"",for:"",tagname:"div",localeRef:"",useLocale:!1,ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",initStyle:!1,tooltipClass:"",tooltipTime:1,tooltipDisplay:!1,tooltipPositionX:"",tooltipPositionY:"",tooltipShowAlways:!1},
d.prototype.htmlStr=["<",""," id='","","' ",""," class='w2textbox ","","' ","",">","","</","",">"],d.prototype.htmlClosingStr=["<",""," id='","","' ",""," class='w2textbox ","","'",""," />"],d.prototype.initialize=function(t){if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.useEscapeFormatter=!1,this.tooltipPositionParse=!1},d.prototype.toHTML=function(){if(null!=this.scope_obj&&this.scope_obj.id&&this.options.for){var t=n.D.getComponentById(this.options.for,this.scope_obj.id);null!=t&&(this.options.for=t.id)}var e=s.v.getEmptyTag(),i="",o="";if(""!=this.options.for&&(o=" for='"+this.options["_for".slice(1)]+"'"),e[this.options.tagname.toLowerCase()])(i=this.htmlClosingStr)[1]=this.options.tagname,i[3]=this.id,i[5]=""==this.options.style?"":" style='"+this.options.style+"'",i[5]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",i[7]=this.options.className,i[9]=("label"==this.options.tagname?o:"")+this.getAttributesString();else{(i=this.htmlStr)[1]=this.options.tagname,i[3]=this.id,i[5]=""==this.options.style?"":"style='"+this.options.style+"'",i[5]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",i[7]=this.options.className,i[9]=("label"==this.options.tagname?o:"")+this.getAttributesString();var r="";r=1==this.options.useLocale&&""!=this.options.localeRef?this.getLocaleValue(this.options.localeRef):this.options.escapeFormatter?this.setEscapeFormatter():this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label)):this.formatter.format(this.options.label),i[11]=r,i[13]=this.options.tagname}return i.join("")},d.prototype.setEscapeFormatter=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=n.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id);this.options.escapeFormatter=t,"function"==typeof t&&(this.useEscapeFormatter=!0)}}catch(t){l.k.printLog("cannot find function : "+this.options.escapeFormatter+"["+this.id+"]")}var e=this.options.label;return this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onComplete=function(){this.options.escapeFormatter&&!this.useEscapeFormatter&&(this.render.innerHTML=this.setEscapeFormatter()),h.s.prototype.onComplete.call(this)},d.prototype.setAction=function(){try{if(this.options.initStyle){
var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.refresh(),this.options.tooltipDisplay&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent))),"label"!=this.options.tagname||""==this.options.for)return;var i=n.D.getComponentById(this.options.for)||null;if(null==i)return;var o="function"==typeof i.getAccessibiltyId?i.getAccessibiltyId():this.options.for;this.render.setAttribute("for",o)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t),this.options.label=t}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getLabel=function(){try{return this.getValue()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setValue=function(t){try{this.options.label=t;var e=this.options.label;this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e),this.modelControl.setData(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getValue=function(){try{return this.options.escape?WebSquare.xml._decode(this.options.label+""):this.options.label}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getFormatValue=function(){try{return this.options.escape?this.formatter.format(WebSquare.xml._decode(this.options.label+"")):this.formatter.format(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setDisplayFormatter=function(t){try{this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t)}},d.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.w.printStackTrace(t)}},d.prototype.addClass=function(){try{h.s.prototype.addClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.removeClass=function(){try{h.s.prototype.removeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.changeClass=function(){try{h.s.prototype.changeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.toggleClass=function(){try{h.s.prototype.toggleClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getAttributeNode=function(t){try{return h.s.attributes.getAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},d.prototype.setAttributeNode=function(t,e){try{h.s.attributes.setAttributeNode.call(this,t,e)}catch(t){r.w.printStackTrace(t)}},d.prototype.removeAttributeNode=function(t){try{h.s.attributes.removeAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},d.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),
this.refresh()}catch(t){r.w.printStackTrace(t)}},d.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t)}},d.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},d.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var a=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(a){var l=n.D.getGlobalFunction(a,o.scope_id),h=!0;if("function"==typeof l&&(h=l(o)),!h)return}}catch(t){r.w.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2textbox_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i})),100*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.serialize=function(){return{value:this.getValue()}},d.prototype.restore=function(t){try{this.setValue(t.value)}catch(t){return r.w.printStackTrace(t,null,this),!1}return!0},d.prototype.handleMouseoverEvent=function(t){try{var e=a.B.getTarget(t);if(e){var i=e,o=WebSquare.style.getStyle(e,"text-overflow"),s=e.offsetWidth,h=e.offsetHeight,d=20,c=h+3;try{this.options.tooltipPositionX&&(d=this.options.tooltipPositionX.indexOf("cellWidth")>-1||this.options.tooltipPositionX.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(s,h):new Function("width","height","return "+this.options.tooltipPositionX)(s,h)),this.options.tooltipPositionY&&(c=this.options.tooltipPositionY.indexOf("cellWidth")>-1||this.options.tooltipPositionY.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(s,h):new Function("width","height","return "+this.options.tooltipPositionY)(s,h))}catch(t){l.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}var u=WebSquare.style.getAbsoluteLeft(e)+d,p=WebSquare.style.getAbsoluteTop(e)+c,g=i.innerText.wq_trim();if(this.options.tooltipFormatter)try{var m=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);"function"==typeof m&&(g=m(this.id,g))}catch(t){r.w.printStackTrace(t,null,this)}if(this.options.tooltipItemLabel&&(g=this.options.tooltipItemLabel),!0===this.options.tooltipShowAlways)this.showTooltip(u,p,g);else if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=i.className,this.toolTipRuler.innerHTML=i.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(i,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(i,"font-family"),
this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(i,"font-weight");var f=this.toolTipRuler.offsetWidth,b=e.clientWidth;if(3!=i.nodeType){var y=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),v=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");f-=parseInt(y||"0",10),f-=parseInt(v||"0",10),b-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),b-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}document.body.removeChild(this.toolTipRuler),b<f&&this.showTooltip(u,p,g)}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),this.hideTooltip()}catch(t){r.w.printStackTrace(t,null,this)}}},1213:(t,e,i)=>{i.r(e),i.d(e,{treeview:()=>u});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=function(){this.index=-1,this.id="",this.label="",this.orgLabel="",this.value="",this.element=null,this.depth=-1,this.parentNode=null,this.childNodes=[],this._isRoot=null,this._hasChild=null,this._isLastChild=null,this.image="",this.selectedImage="",this.expandedImage="",this.checked=!1,this.folder=!1};d.prototype.appendChild=function(t){if(!t)return!1;var e=this;do{if(t==e)return!1;e=e.parentNode}while(e);return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this,this.childNodes.push(t),!0},d.prototype.removeChild=function(t){if(t){for(var e=[],i=0;i<this.childNodes.length;i++){var o=this.childNodes[i];o!=t&&e.push(o)}this.childNodes=e}},d.prototype.isRoot=function(){return this._isRoot=null,this._isRoot=null==this.parentNode,this._isRoot},d.prototype.hasChild=function(){return this._hasChild=null,this.folder?this.folder:(this._hasChild=0!=this.childNodes.length,this._hasChild)},d.prototype.isLeaf=function(){return!this.hasChild()},d.prototype.isFirstChild=function(){var t=!1;return this.parentNode?(this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},d.prototype.isLastChild=function(){if(this._isLastChild=null,!this.parentNode)return!0;var t=this.parentNode.childNodes;return t[t.length-1]==this&&(this._isLastChild=!0),1!=this._isLastChild&&(this._isLastChild=!1),this._isLastChild},d.prototype.isFirstChildByRoot=function(){var t=!1;return this.parentNode?(0!=this.parentNode.depth||this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},(d.nodeIterator=function(t,e){this.node=t,this.status=0,this.options=o.x.extend({type:"dfs",pruning:null},o.x.extend({},e)),this.stack=[]}).prototype.next=function(){return!!this.node&&(0==this.status?(this.status=1,!0):("dfs"==this.options.type?(this.stack=this.node.childNodes.concat(this.stack),this.node=this.stack.shift()):"bfs"==this.options.type&&(this.stack=this.stack.concat(this.node.childNodes),this.node=this.stack.shift()),!!this.node))},d.nodeIterator.prototype.stop=function(){this.status=2},d.nodeIterator.prototype.getNode=function(){return this.node};var c=function(){this.nodeCount=0,this.rootNode=null,this.hash_index_node={},this.useXPath=!1,this.useCheckbox=!1,this.useImage=!1;this.xpath={nodeset:"",label:"w2:label",value:"w2:value",depth:"w2:depth",nodeName:"w2:node",checkbox:"",folder:"w2:folder"},this.dataPath={},this.imageXPath={image:"",iconImage:"",leafImage:"",selectedImage:"",expandedImage:""},this.checkbox={xpath:"",trueValue:"",falseValue:"",checkboxDisabled:"",checkboxDisabledTrueValue:"",checkboxDisabledFalseValue:"",checkboxDisabledAll:""},this.valueAttribute="",this.displayMode="0",this.delimiter="\t",this.customFormatter="",this.treeView="",this.isInstance=!1};c.prototype.getNodeset=function(){if(""!=this.xpath.nodeset)return this.xpath.nodeset},c.prototype.setXPath=function(t,e,i,o,s,r,a){""!=t&&(this.useXPath=!0,this.xpath.nodeset=t,this.xpath.label=e,this.xpath.value=i,this.xpath.depth=o,this.xpath.nodeName=s,this.xpath.folder=r,this.xpath.auth=a)},c.prototype.setDataPath=function(t,e,i,o,s,r){this.dataPath.label=t,this.dataPath.value=e,this.dataPath.depth=i,this.dataPath.nodeName=o,this.dataPath.folder=s,
this.dataPath.checkbox=r},c.prototype.setCheckbox=function(t,e,i,o,s,r,a,n,l,h,d){""!=t&&(this.useCheckbox=!0,this.checkbox.xpath=t,this.checkbox.trueValue=e,this.checkbox.falseValue=i,this.checkbox.checkboxDisabled=o,this.checkbox.checkboxDisabledTrueValue=s,this.checkbox.checkboxDisabledFalseValue=r,this.checkbox.checkboxDisabledAll=a,this.checkbox.refreshCheckboxModel=n,this.checkbox.refreshCheckboxDisableModel=l,this.checkbox.hierarchy=h,this.checkbox.colID=d)},c.prototype.setDisplayMode=function(t,e){this.displayMode=t,this.delimiter=e},c.prototype.setImage=function(t,e,i,o,s,r){this.useImage=!0,this.imageXPath.image=t||"",this.imageXPath.iconImage=e||"",this.imageXPath.leafImage=i||"",this.imageXPath.selectedImage=o||"",this.imageXPath.expandedImage=s||"",this.imageXPath.imageTitle=r||""},c.prototype.setXML=function(t){t&&(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},1==this.isInstance?(this.rootNode=this.parseNodeInstance(t,0,0),1==this.useImage&&this.parseImageInstance(this.rootNode)):(this.rootNode=this.parseNode(t,0,0),1==this.useImage&&this.parseImage(this.rootNode)))},c.prototype.appendXML=function(t,e){if(t){var i=this.findNodeByIndex(e),o=i.element,s=1;if(1==this.isInstance){for(var r=t.firstChild;null!=r;r=t.firstChild)1==r.nodeType&&r.tagName==this.xpath.nodeName&&i.appendChild(this.parseNodeInstance(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImageInstance(i)}else{for(var a=t.getChildNodes(),n=0;n<a.length;n++)1==(r=a[n]).nodeType&&r.getTagName()==this.xpath.nodeName&&i.appendChild(this.parseNode(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImage(i)}return i}},c.prototype.parseNodeInstance=function(t,e,i,o){if(!t)return null;var s=WebSquare.xml.getValue(t,this.xpath.label).wq_trim(),r=!1,a=this.xpath.auth&&WebSquare.xml.getValue(t,this.xpath.auth).wq_trim();if(this.xpath.folder){var n=WebSquare.xml.getValue(t,this.xpath.folder).wq_trim();this.treeview&&this.treeview.options&&this.treeview.options.trueValue&&(r=n==this.treeview.options.trueValue),"true"!=n.toLowerCase()&&"false"!=n.toLowerCase()||(r="true"==n)}for(var l="",h=this.xpath.value.split(" "),c=0;c<h.length;c++)0!=c&&(l+="$$"),l+=WebSquare.xml.getValue(t,h[c]).wq_trim();var u=new d;switch(u.index=this.nodeCount++,u.depthIndex=i,this.displayMode){case"0":u.label=s;break;case"1":u.label=l+this.delimiter+s;break;case"2":u.label=s+this.delimiter+l;break;default:u.label=s}if(u.orgLabel=u.label,u.value=l,u.element=t,u.depth=e,u.folder=r,u.auth=a,1==e?this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?u.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+u.value+"']":u.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.xml.getValue(t,this.checkbox.xpath).wq_trim();if(u.checkboxXPath=u.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(u.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.trueValue)):(u.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){u.checkboxDisableXPath=u.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.xml.getValue(t,this.checkbox.checkboxDisabled).wq_trim();1==this.checkbox.checkboxDisabledAll?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(u.checkboxDisabled=!0,
1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}for(var m=1,f=t.firstChild;null!=f;f=f.nextSibling)1==f.nodeType&&f.tagName==this.xpath.nodeName&&u.appendChild(this.parseNodeInstance(f,e+1,m++,u));if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(c=0;c<u.childNodes.length;c++){var v=u.childNodes[c];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<u.childNodes.length?u.partial=!0:b>0&&b==u.childNodes.length?(u.checked=!0,u.checkboxDom||(u.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+u.index)),u.checkboxDom&&(u.checkboxDom.checked=!0)):u.partial=!1}if(this.hash_index_node[u.index]=u,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(u),C=w.call(this.treeview,u.orgLabel,u.label,S)||u.label;u.label=C}return u},c.prototype.parseNode=function(t,e,i,o){if(!t)return null;var s=WebSquare.jsonUtil.getValue(t._element,this.xpath.label,this.valueAttribute),r=!1,a=this.xpath.auth&&WebSquare.jsonUtil.getValue(t._element,this.xpath.auth,this.valueAttribute);if(this.xpath.folder){var n=WebSquare.jsonUtil.getValue(t._element,this.xpath.folder,this.valueAttribute);this.treeview&&this.treeview.options&&this.treeview.options.trueValue&&(r=n==this.treeview.options.trueValue),"true"!=n.toLowerCase()&&"false"!=n.toLowerCase()||(r="true"==n)}for(var l="",h=this.xpath.value.split(" "),c=0;c<h.length;c++)0!=c&&(l+="$$"),l+=WebSquare.jsonUtil.getValue(t._element,h[c],this.valueAttribute);var u=new d;switch(u.index=this.nodeCount++,u.depthIndex=i,this.displayMode){case"0":u.label=s;break;case"1":u.label=l+this.delimiter+s;break;case"2":u.label=s+this.delimiter+l;break;default:u.label=s}if(u.orgLabel=u.label,u.value=l,u.element=t,u.depth=e,u.folder=r,u.auth=a,1==e?this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?u.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+u.value+"']":u.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.jsonUtil.getValue(t._element,this.checkbox.xpath,this.valueAttribute);if(u.checkboxXPath=u.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(u.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.trueValue)):(u.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){u.checkboxDisableXPath=u.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.jsonUtil.getValue(t._element,this.checkbox.checkboxDisabled,this.valueAttribute);1==this.checkbox.checkboxDisabledAll?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}var m=1,f=t.getChildNodes();for(c=0;c<f.length;c++){var b=f[c]
;1==b.nodeType&&b.getTagName()==this.xpath.nodeName&&u.appendChild(this.parseNode(b,e+1,m++,u))}if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var y=0,v=!1;for(c=0;c<u.childNodes.length;c++){var w=u.childNodes[c];1==w.checked?y++:1==w.partial&&(v=!0)}1==v||0<y&&y<u.childNodes.length?u.partial=!0:y>0&&y==u.childNodes.length?(u.checked=!0,u.checkboxDom||(u.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+u.index)),u.checkboxDom&&(u.checkboxDom.checked=!0)):u.partial=!1}if(this.hash_index_node[u.index]=u,"function"==typeof this.customFormatter){var S=this.customFormatter,C=this.getCloneNode(u),_=S.call(this.treeview,u.orgLabel,u.label,C)||u.label;u.label=_}return u},c.prototype.parseNodeByNode=function(t,e,i,o){if(!t)return null;var s=new d;s.index=this.nodeCount++,s.depthIndex=i,s.label=t.label,s.orgLabel=s.label,s.value=t.value,s.element=t.element.cloneNode(!0),s.depth=e,s.folder=t.folder,s.xpath="",s.checkboxXPath="",s.imageTitle=t.imageTitle,s.labelStyle=t.labelStyle,void 0!==t.checked&&(s.checked=t.checked),s.checkboxDisableXPath="",void 0!==t.checkboxDisabled&&(s.checkboxDisabled=t.checkboxDisabled);for(var r=1,a=0;a<t.childNodes.length;a++)s.appendChild(this.parseNodeByNode(t.childNodes[a],e+1,r++,s));return this.hash_index_node[s.index]=s,s},c.prototype.parseImage=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.image,this.valueAttribute)),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.iconImage,this.valueAttribute)),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.selectedImage,this.valueAttribute)),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.expandedImage,this.valueAttribute)),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.leafImage,this.valueAttribute)),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==s&&(s=e),this.treeview&&this.treeview.getURL,t.image=""==e?"":this.treeview.getURL(e),t.selectedImage=""==o?"":this.treeview.getURL(o),t.expandedImage=""==s?"":this.treeview.getURL(s),t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle);for(var n=0;n<t.childNodes.length;n++)this.parseImage(t.childNodes[n])},c.prototype.parseImageInstance=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.xml.getValue(t.element,this.imageXPath.image).wq_trim()||""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.xml.getValue(t.element,this.imageXPath.iconImage).wq_trim()||""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.xml.getValue(t.element,this.imageXPath.selectedImage).wq_trim()||""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.xml.getValue(t.element,this.imageXPath.expandedImage).wq_trim()||""),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.xml.getValue(t.element,this.imageXPath.leafImage).wq_trim()||""),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),this.treeview&&this.treeview.getURL,t.image=""==e?"":this.treeview.getURL(e),t.selectedImage=""==o?"":this.treeview.getURL(o),
t.expandedImage=""==s?"":this.treeview.getURL(s),t.imageTitle=this.imageXPath.imageTitle&&WebSquare.xml.getValue(t.element,this.imageXPath.imageTitle);for(var n=0;n<t.childNodes.length;n++)this.parseImageInstance(t.childNodes[n])},c.prototype.parseListToTree=function(t){for(var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=WebSquare.xmljs.xml2json(e).E[0],o=0;o<t.length;o++)t[o]._element.parent=i;var s=i,r=0;this.dataType="list";for(o=0;o<t.length;o++){s=new WebSquare.Elem(s);var a=t[o],n=parseInt(WebSquare.jsonUtil.getValue(a._element,this.xpath.depth,this.valueAttribute))||0;r=parseInt(WebSquare.jsonUtil.getValue(s._element,this.xpath.depth,this.valueAttribute))||0;if(0===n&&0!==r&&(a.setNodeValue(this.xpath.depth,r),n=r),r<n)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n&&0==o)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n){a._element.parent=s.getParentNode()._element,a=s.getParentNode().appendChild(a._element)}else if(r>n){s=s.getParentNode();for(var l=0;l<r-n;l++)null!=s._element.parent&&(s=s.getParentNode());s.element&&(s=s._element),a._element.parent=s._element,a=s.appendChild(a._element)}s=a}return new WebSquare.Elem(i)},c.prototype.parseListToTreeInstance=function(t){var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=e.documentElement,o=0;this.dataType="list";for(var s=0;s<t.length;s++){var r=t[s].cloneNode(!0),a=parseInt(WebSquare.xml.getValue(r,this.xpath.depth))||0;o=parseInt(WebSquare.xml.getValue(i,this.xpath.depth))||0;if(0===a&&0!==o&&(WebSquare.xml.setValue(r,this.xpath.depth,o),a=o),o<a)r=WebSquare.xml.appendChild(i,r);else if(o==a&&0==s)r=WebSquare.xml.appendChild(i,r);else if(o==a){var n=i.parentNode;r=WebSquare.xml.appendChild(n,r)}else if(o>a){i=i.parentNode;for(var l=0;l<o-a;l++)null!=i.parentNode&&(i=i.parentNode);i.documentElement&&(i=i.documentElement),r=WebSquare.xml.appendChild(i,r)}i=r}return e.documentElement},c.prototype.parseRecursiveToTree=function(t){this.dataType="recursive";var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0);if(t[0]instanceof WebSquare.Elem){for(var i=new WebSquare.Elem(WebSquare.xmljs.xml2json(e).E[0]),o=0;o<t.length;o++){var s=null;s=t[o],i.appendChild(s._element)}return i}for(o=0;o<t.length;o++){s=null;s=n.D.isOpera()?WebSquare.xml.parse(t[o]).firstChild:t[o].cloneNode(!0),WebSquare.xml.appendChild(e.documentElement,s)}return e.documentElement},c.prototype.parseTreeToList=function(){var t=this.xpath.nodeset;if(t.indexOf("/")>-1){var e=t.split("/");t=e[e.length-2]}t&&""!=t||(t="Treeview");var i=WebSquare.xml.parse("<"+t+' xmlns:w2="http://www.inswave.com/websquare" />',!0),o=i.documentElement,s=this.getNodeIterator({type:"dfs"});for(s.next();s.next();){var r=s.getNode();o.appendChild(r.element)}return i.documentElement},c.prototype.getNodeIterator=function(t){return t=o.x.extend({rootNode:null},t||{}),new d.nodeIterator(t.rootNode||this.rootNode,t)},c.prototype.size=function(){return this.nodeCount},c.prototype.findNodeByValue=function(t){for(var e=null,i=this.getNodeIterator();i.next();)if(i.getNode().value==t){e=i.getNode();break}return i=null,e},c.prototype.findNodeByIndex=function(t){var e=this.hash_index_node[t];return e||null},c.prototype.setRender=function(t,e){t.rendered=e;for(var i=0;i<t.childNodes.length;i++)this.setRender(t.childNodes[i],e)},c.prototype.getCloneNode=function(t){var e={};return e.checkboxDisabled=t.checkboxDisabled,e.checked=t.checked,e.folder=t.folder,e.image=t.image,e.imageTitle=t.imageTitle,e.rendered=t.rendered,e.id=t.id,e.index=t.index,e.value=t.value,e.label=t.label,e.labelStyle=t.labelStyle,e},c.prototype.clearNode=function(t){t.element=null,t.parentNode=null,t.childNodes=[],delete this.hash_index_node[t.index]},c.prototype.changeNodeIndex=function(t,e){var i=this.hash_index_node[t];i.index=e,delete this.hash_index_node[t],this.hash_index_node[e]=i,
this.changeDomIndex("node",t,e,!0),this.changeDomIndex("group",t,e,!0),this.changeDomIndex("checkbox",t,e),this.changeDomIndex("label",t,e),this.changeDomIndex("guideline",t,e),this.changeDomIndex("child",t,e),this.changeDomIndex("col_icon_navi",t,e),i.checkboxDom&&(i.checkboxDom=null,delete i.checkboxDom)},c.prototype.changeDomIndex=function(t,e,i,o){var s=document.getElementById(this.treeview.id+"_"+t+"_"+e);if(null!=s&&(s.setAttribute("id",this.treeview.id+"_"+t+"_"+i),o)){var r=n.D.getDataPrefix("index");s.setAttribute(r,i)}},c.prototype.getLastChildIndex=function(t){var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.size();for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i};var u=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(u.prototype,h.s.prototype),u.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.treeview",pluginName:"treeview",userEvents:["onclick","ondblclick","onchange","onrightbuttonclick","ondrop","oncheckboxclick","onlabelclick","ontoggleclick","onviewchange","oneditend","onlabelover","ontooltipshow","ontooltiphide"],repeatNode:"",useDrag:!1,dataType:"recursive",lineShow:!0,alwaysDraw:!1,imgclass:"",labelclass:"",labelonClickClass:"w2treeview_select_node",defaultImage:"",iconImage:"",selectedImage:"",expandedImage:"",leafImage:"",showTreeDepth:1e3,showCheckbox:!1,trueValue:"true",falseValue:"false",checkAllChildNodes:!1,checkboxDisabled:"",checkboxDisabledTrueValue:"true",checkboxDisabledFalseValue:"false",checkboxDisabledAll:!1,rowHeight:-1,toggleEvent:"ondblclick",tooltipDisplay:!1,tooltipShowAlways:!1,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,hierarchy:!1,refreshCheckboxModel:!1,refreshCheckboxDisableModel:!1,accessibility:void 0,title:"",accordion:!1,dynamicAppend:!1,displayMode:"0",delimiter:"\t",folderOpenToggleImage:o.x._resourceURI+"uiplugin/treeview/images/plus.gif",folderCloseToggleImage:o.x._resourceURI+"uiplugin/treeview/images/minus.gif",leafToggleImage:o.x._resourceURI+"uiplugin/treeview/images/middle.gif",lastToggleImage:o.x._resourceURI+"uiplugin/treeview/images/last.gif",middleToggleImage:o.x._resourceURI+"uiplugin/treeview/images/middle.gif",escape:!0,toggleButtonEvent:"onclick",scrollFix:!1,animation:"",renderType:"table",noFocusOnIconLabelClick:!1,useHirarchySelect:!1,forceRefresh:!1,moveSibling:!1,useXML:!1},u.prototype.initialize=function(t){try{switch(this.inlineElement=!1,1==this.options.hierarchy&&(this.options.checkAllChildNodes=!0),this.tree=new c,this.tree.treeview=this,this.selectedInfo={groupDom:null,dom:null,node:null},this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.openedNodes={},this.originalBackgroundColor="",this.originalColor="",this.originalIconImage="",this.options.animation=this.options.animation?this.options.animation:"",this.options.accessibility=!!t&&n.D.getBoolean(t.getAttribute("accessibility")),this.options.accessibility&&(this.options.lineShow=!1),1==this.options.accordion&&(this.options.showTreeDepth=0),this.useDataCollection=!1,this.successBinding=!1,this.beforeSetRowData={},this.editModeComp=null,this.options.displayMode){case"0":case"1":case"2":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;default:this.options.displayMode="0"}if(this.tree.setDisplayMode(this.options.displayMode,this.options.delimiter),this.options.customFormatter&&(this.tree.customFormatter=n.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),this.resizeObj={width:0,height:0},t){var e=WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(e.nodeset,e.label,e.value),0==this.options.modelBinding&&(this.options.refreshCheckboxModel=!1,this.options.refreshCheckboxDisableModel=!1)
;var i=null,o=WebSquare.Elem.api.getElementsByTagName(t,"itemset",s.v._XML_NAMESPACE.W2)[0];if(o){var a=WebSquare.Elem.api.getValue(o,"@nodeset"),l=null;this.useDataCollection=a.match("data:");if(this.useDataCollection){this.modelControl.getDataCollectionItemsetData(this.modelControl.id);var h=this.modelControl.getDataComp();if(null!=h){var d=0===h.filterManager.filterArr.length?h.getAllXML():h.getAllFilteredXML(),u=WebSquare.xmljs.xml2json(d).E[0];l=new WebSquare.Elem(u).getChildNodes(),a=h.options.baseNode+"/"+h.options.repeatNode;var p=h.options.repeatNode.split("/");if(0!=p.length&&p.length>1){for(var g=[],m=0;m<l.length;m++)g.push(l[m].getChildNodes()[0]);l=g}h.options.valueAttribute&&(this.tree.valueAttribute=h.options.valueAttribute),this.successBinding=!0}}else{l=WebSquare.ModelUtil.findInstanceNodes(a,null,this.scope_id);this.tree.isInstance=!0}var f=a.replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);f&&(f=f[0]);var b=WebSquare.Elem.api.getElementsByTagName(o,"label",s.v._XML_NAMESPACE.W2)[0],y=WebSquare.Elem.api.getElementsByTagName(o,"value",s.v._XML_NAMESPACE.W2)[0],v=WebSquare.Elem.api.getElementsByTagName(o,"depth",s.v._XML_NAMESPACE.W2)[0],w=WebSquare.Elem.api.getElementsByTagName(o,"folder",s.v._XML_NAMESPACE.W2)[0],S=b?WebSquare.Elem.api.getValue(b,"@ref"):"",C=y?WebSquare.Elem.api.getValue(y,"@ref"):"",_=v?WebSquare.Elem.api.getValue(v,"@ref"):"",x=w?WebSquare.Elem.api.getValue(w,"@ref"):"",I=WebSquare.Elem.api.getElementsByTagName(o,"image",s.v._XML_NAMESPACE.W2)[0],T=WebSquare.Elem.api.getElementsByTagName(o,"iconImage",s.v._XML_NAMESPACE.W2)[0],k=WebSquare.Elem.api.getElementsByTagName(o,"selectedImage",s.v._XML_NAMESPACE.W2)[0],D=WebSquare.Elem.api.getElementsByTagName(o,"expandedImage",s.v._XML_NAMESPACE.W2)[0],L=WebSquare.Elem.api.getElementsByTagName(o,"leafImage",s.v._XML_NAMESPACE.W2)[0],W=WebSquare.Elem.api.getElementsByTagName(o,"checkboxDisabled",s.v._XML_NAMESPACE.W2)[0],A=WebSquare.Elem.api.getElementsByTagName(o,"checkbox",s.v._XML_NAMESPACE.W2)[0],M=WebSquare.Elem.api.getElementsByTagName(o,"imageTitle",s.v._XML_NAMESPACE.W2)[0],E=I?WebSquare.Elem.api.getValue(I,"@ref"):"",q=T?WebSquare.Elem.api.getValue(T,"@ref"):"",R=k?WebSquare.Elem.api.getValue(k,"@ref"):"",N=D?WebSquare.Elem.api.getValue(D,"@ref"):"",F=L?WebSquare.Elem.api.getValue(L,"@ref"):"",O=W?WebSquare.Elem.api.getValue(W,"@ref"):"",B=M?WebSquare.Elem.api.getValue(M,"@ref"):"",V=A?WebSquare.Elem.api.getValue(A,"@ref"):"",P=V;this.useDataCollection&&this.tree.setDataPath(S,C,_,f,x,P),""!=this.options.defaultImage&&(E=this.options.defaultImage),""!=this.options.iconImage&&(q=this.options.iconImage),""!=this.options.selectedImage&&(R=this.options.selectedImage),""!=this.options.expandedImage&&(N=this.options.expandedImage),""!=this.options.leafImage&&(F=this.options.leafImage),""!=this.options.checkboxDisabled&&(O=this.options.checkboxDisabled),this.tree.setXPath(a,S,C,_,f,x),this.tree.setCheckbox(P,this.options.trueValue,this.options.falseValue,O,this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy,V),this.tree.setImage(E,q,F,R,N,B),null!=l&&("recursive"==this.options.dataType?i=this.tree.parseRecursiveToTree(l):"listed"==this.options.dataType&&(i=1==this.tree.isInstance?this.tree.parseListToTreeInstance(l):this.tree.parseListToTree(l)))}else{this.inlineElement=!0,i=t;E="w2:image",q="w2:iconImage",R="w2:selectedImage",N="w2:expandedImage",F="w2:leafImage";""!=this.options.defaultImage&&(E=this.options.defaultImage),""!=this.options.iconImage&&(q=this.options.iconImage),""!=this.options.selectedImage&&(R=this.options.selectedImage),""!=this.options.expandedImage&&(N=this.options.expandedImage),""!=this.options.leafImage&&(F=this.options.leafImage),this.tree.setImage(E,q,F,R,N,"w2:imageTitle"),
this.tree.setCheckbox("w2:checkbox",this.options.trueValue,this.options.falseValue,"w2:checkboxDisabled",this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy)}i&&this.tree.setXML(i)}this.options=WebSquare.cssManager.styleToClass(this.id,this.options),1==this.options.showCheckbox&&(1==n.D.isOpera()?this.checkboxStyle="left:-1px;top:-1px":this.checkboxStyle="left:0px;top:0px"),this.isFireTooltipEvent=!1,this.options.useHirarchySelect&&(this.selectedInfoStack=[])}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.appendData=function(t,e,i){try{if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),void 0===t||null==t||!e)return;i=void 0!==i&&i;var o=this.tree.findNodeByIndex(t);if(!i&&o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered)return;var s=null;if(1==this.tree.isInstance)var a=e;else if(e[0]){var n=e[0].parentNode;a=new WebSquare.Elem(WebSquare.xmljs.xml2json(n)).getChildNodes()}"recursive"==this.options.dataType?s=this.tree.parseRecursiveToTree(a):"listed"==this.options.dataType&&(s=1==this.tree.isInstance?this.tree.parseListToTreeInstance(a):this.tree.parseListToTree(a)),this.tree.appendXML(s,t),0==t?(o.hasChild(),this.drawContents()):(this.refreshNaviIcon(o),o.childNodes.length>0&&(o.childNodes[0].rendered=!1,this.toggleChild(null,o.index,!0)))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=n.D.getDataPrefix("index"),e=[],i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'",s=""==this.options.title?"":"title='"+this.options.title+"'";return e.push("<div "+o+" id='"+this.id+"' "+t+"='0' "+i+" class='w2treeview "+this.options.className+"' "+s+">"),e.push("</div>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(!this.useDataCollection||this.successBinding)if(this.tree.rootNode&&this.drawContents(),"none"!=this.options.toggleEvent&&this.event.addListener(this.render,this.options.toggleEvent,this.event.bindAsEventListener(this,this.handleToggleEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),n.D.isMobile()||(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent))),this.event.addListener(this.render,"onselectstart",(function(t){a.B.stopEvent(t)})),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,this.handleContextmenuEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.activateDrag)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.refreshStop=!1,this.useDataCollection)this.modelControl.getDataComp().bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded()&&!this.refreshStop){this.refreshStop=!0;var e=null,i=this.tree.getNodeset(),o=null,s=!1;if(this.useDataCollection){if(null!=(m=this.modelControl.getDataComp())){this.tree.isInstance=!1;var a="";if(m.options&&"string"==typeof m.options.repeatNode){var n=(a=m.options.repeatNode).lastIndexOf("/");n>=0&&(a=a.slice(n+1))}var l=0===m.filterManager.filterArr.length?m.getAllXML({repeatNode:a}):m.getAllFilteredXML({repeatNode:a}),h=WebSquare.xmljs.xml2json(l).E[0];if(o=new WebSquare.Elem(h).getChildNodes(),!this.successBinding){
var d=(i=m.options.baseNode+"/"+m.options.repeatNode).replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);d&&(d=d[0]),m.options.valueAttribute&&(this.tree.valueAttribute=m.options.valueAttribute);var c=this.tree.xpath.label,u=this.tree.xpath.value,p=this.tree.xpath.depth,g=this.tree.xpath.folder;this.tree.setXPath(i,c,u,p,d,g),this.successBinding=!0,s=!0}}}else o=WebSquare.ModelUtil.findInstanceNodes(i,null,this.scope_id);null!=o&&("recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=1==this.tree.isInstance?this.tree.parseListToTreeInstance(o):this.tree.parseListToTree(o))),this.tree.setXML(e);var m,f=this.selectedInfo.node;if(s)if(t&&!0===t.setNodeSet){if(this.drawContents(),this.useDataCollection)(m=this.modelControl.getDataComp()).bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}else this.setAction(),this.refreshStop=!0;else this.drawContents();if(this.useDataCollection&&null!=f)null!=(m=this.modelControl.getDataComp())&&null!=m.getRowPosition()&&this.selectNode2(f);this.refreshStop=!1}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshItemArr=function(){this.refreshItemset()},u.prototype.drawContents=function(){try{this.selectedInfo={dom:null,node:null},this.initRenderStatus();for(var t=[],e=0;e<this.tree.rootNode.childNodes.length;e++)t.push(this.nodeToHTML(this.tree.rootNode.childNodes[e]));this.render.innerHTML=t.join(""),this.tree.rootNode.childNodes.length>0&&(this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.selectNode=function(t,e,i,o){try{i=void 0===i||i;var s=n.D.getBoolean(this.options.useHirarchySelect),l=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,h=null;if(null!=t?h=this.tree.findNodeByValue(t):null!=e&&(h=this.tree.findNodeByIndex(e)),this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),this.selectedInfo.node){var d=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);d&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(d.style.backgroundImage=this.originalIconImage)}if(s&&this.selectedInfoStack.length>0){for(var c=0;c<this.selectedInfoStack.length;c++){var u=this.selectedInfoStack[c];u.dom&&(this.removeClass(u.dom,this.options.labelonClickClass),u.dom.style.backgroundColor=u.org.background,u.dom.style.color=u.org.color),u.icon&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(u.icon.style.backgroundImage=u.org.iconImage)}this.selectedInfoStack=[]}if(null!=l&&null!=h?l.index!=h.index&&a.B.fireEvent(this,"onchange",l,h):(null==l&&null!=h||null!=l&&null==h)&&a.B.fireEvent(this,"onchange",l,h),this.selectedInfo.node=h,null!=this.selectedInfo.node&&i){for(var p=this.selectedInfo.node.parentNode,g=[];p;){e=p.index;g.push(e),p=p.parentNode}for(var c in g.reverse(),g)this.toggleChild(null,g[c],!0)}this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.options.accessibility?this.selectedInfo.groupDom=document.getElementById(this.id+"_node_"+this.selectedInfo.node.index):this.selectedInfo.groupDom=document.getElementById(this.id+"_group_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color;var m=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);if(m&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(this.originalIconImage=m.style.backgroundImage),s){for(p=this.selectedInfo.node;p;){var f=document.getElementById(this.id+"_label_"+p.index),b=document.getElementById(this.id+"_icon_"+p.index)
;this.selectedInfoStack.push({node:p,groupDom:document.getElementById(this.id+"_group_"+p.index),dom:f,org:{background:f?f.style.backgroundColor:null,color:f?f.style.color:null,iconImage:b?b.style.backgroundImage:null},icon:b}),this.selectedInfoStack[this.selectedInfoStack.length-1].dom&&(this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].dom,this.options.labelonClickClass),this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.backgroundColor="",this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.color=""),this.selectedInfoStack[this.selectedInfoStack.length-1].iconv&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfoStack[this.selectedInfoStack.length-1].node.selectedImage&&(this.selectedInfoStack[this.selectedInfoStack.length-1].icon.style.backgroundImage="url('"+this.selectedInfoStack[this.selectedInfoStack.length-1].node.selectedImage+"')"),p=p.parentNode}this.selectedInfoStack.reverse()}if(m&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(m.style.backgroundImage="url('"+this.selectedInfo.node.selectedImage+"')"),this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color="",!0!==o&&(this.options.scrollFix||(this.selectedInfo.groupDom.setAttribute("tabindex",0),this.selectedInfo.groupDom.focus(),this.selectedInfo.groupDom.setAttribute("tabindex",-1)),this.useDataCollection&&this.successBinding)){var y=this.modelControl.getDataComp();if(null!=this.selectedInfo.node){for(var v in y.refCompHash){var w=y.refCompHash[v];null!=w&&WebSquare.idCache[w.uuid]&&"input"==w.options.pluginName&&w.setValue(w.getValue())}y.setRowPosition(this.selectedInfo.node.index-1)}else y.setRowPosition(null)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.selectNode1=function(t,e,i,o){try{if(null!=this.selectedInfo.node){var s=this.tree.getCloneNode(this.selectedInfo.node),n=s.index;if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node)if(n!=this.selectedInfo.node.index){var l={oldNode:s,newNode:this.tree.getCloneNode(this.selectedInfo.node)};a.B.fireEvent(this,"onviewchange",l)}}else if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node){l={oldNode:{},newNode:this.tree.getCloneNode(this.selectedInfo.node)};a.B.fireEvent(this,"onviewchange",l)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.selectNode2=function(t){try{this.selectedInfo.node=t,this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.selectedInfo.groupDom=document.getElementById(this.id+"_group_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom?(this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color=""):(this.originalBackgroundColor="",this.originalColor="")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.findNode=function(t,e){try{if(void 0===e&&(e=!0),!0===e){this.selectNode(t,null);var i=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),o=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return o<i&&(this.render.scrollTop=i-o+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return this.tree.findNodeByValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.findNodeByValue=function(t,e){try{var i=this.tree.findNodeByValue(t);if(!0===e&&i){this.selectNode(t,null);var o=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return s<o&&(this.render.scrollTop=o-s+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.findNodeByIndex=function(t,e){try{var i=this.tree.findNodeByIndex(t);if(!0===e&&i){this.selectNode(null,t)
;var o=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return s<o&&(this.render.scrollTop=o-s+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.isOpen=function(t){try{if(t>=this.tree.size()||t<1)return;var e=document.getElementById(this.id+"_node_"+t),i=!1;if(e){var o=n.D.getDataPrefix("opened");i=n.D.getBoolean(e.getAttribute(o))}return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedNode=function(){try{return this.selectedInfo?this.selectedInfo.node:null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedDom=function(){try{return this.selectedInfo?this.selectedInfo.dom:null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedLabel=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.label:""}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedValue=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.value:""}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.index:""}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedElement=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.element:null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.isLeaf=function(){try{return!this.selectedInfo||!this.selectedInfo.node||!this.selectedInfo.node.hasChild()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setLabelStyle=function(t,e,i,o){var s;"object"==typeof t&&"number"==typeof t.index?s=t:"number"==typeof t?s=this.tree.findNodeByIndex(t):"string"==typeof t&&(s=this.tree.findNodeByValue(t)),this._setLabelStyle(s,e,i,o)},u.prototype.setCustomFormatter=function(t){if("function"==typeof t){for(var e=this.tree.getNodeIterator();e.next();){var i=e.getNode();if(!i.isRoot()){var o=this.tree.getCloneNode(i),s=t.call(this,i.orgLabel,i.label,o)||i.label;if(i.label=s,i.rendered)document.getElementById(this.id+"_label_"+i.index).firstChild.nodeValue=i.label}}e=null,this.options.customFormatter=t,this.tree.customFormatter=t}},u.prototype._setLabelStyle=function(t,e,i,o){if(null!=t){if(null==t.labelStyle&&(t.labelStyle={}),t.labelStyle[e]=i,this.originalBackgroundColor=t.labelStyle["background-color"]||this.originalBackgroundColor,this.originalColor=t.labelStyle.color||this.originalColor,t.rendered){var s=document.getElementById(this.id+"_label_"+t.index);if(s){for(var r="",a=0;a<e.length;a++)"-"===e.charAt(a)?(r+=e.charAt(a+1).capitalize(),a++):r+=e.charAt(a);s.style[r]=i}}if(!0===o)for(a=0;a<t.childNodes.length;a++){var n=t.childNodes[a];this._setLabelStyle(n,e,i,o)}}},u.prototype.checkNode=function(t,e,i,o,s){try{var a=this.tree.findNodeByIndex(t);if(a.checked=e,a.checkboxDom||(a.checkboxDom=document.getElementById(this.id+"_checkbox_"+t)),a.checkboxDom&&(a.checkboxDom.checked=e),1==this.options.refreshCheckboxModel){if(this.stopRefresh(!0),this.useDataCollection&&this.tree.checkbox.colID){var n=this.modelControl.getDataComp(),l=e?this.options.trueValue:this.options.falseValue;null!=n&&n.setCellData(t-1,this.tree.checkbox.colID,l,null,s),a.element.setAttribute(n.options.valueAttribute,l)}else 1==e?a.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(a.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(a.checkboxXPath,this.options.trueValue,null,this.scope_id):a.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(a.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(a.checkboxXPath,this.options.falseValue,null,this.scope_id);this.stopRefresh(!1)}if(!1!==i&&(1==i||1==this.options.hierarchy||1==this.options.checkAllChildNodes))for(var h=0;h<a.childNodes.length;h++){var d=a.childNodes[h];this.checkNode(d.index,e,!0,!1)}if(1==this.options.hierarchy&&this.partialSelection(a),
!1!==o&&a.parentNode.parentNode&&1==this.options.hierarchy){var c=!0;for(h=0;h<a.parentNode.childNodes.length;h++){if(1!=(d=a.parentNode.childNodes[h]).checked){c=!1;break}}1==c?this.checkNode(a.parentNode.index,!0,!1):this.checkNode(a.parentNode.index,!1,!1)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.partialSelection=function(t){try{var e=0,i=!1;if(0==t.childNodes.length)return;for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];1==s.checked?e++:1==s.partial&&(i=!0)}1==i||0<e&&e<t.childNodes.length?(t.partial=!0,t.checkboxDom&&(this.addClass(t.checkboxDom,"w2treeview_partialselect"),t.checkboxDom.checked=!0)):(t.partial=!1,t.checkboxDom&&(this.removeClass(t.checkboxDom,"w2treeview_partialselect"),1==t.checked?t.checkboxDom.checked=!0:t.checkboxDom.checked=!1))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.disableCheckboxByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);this.disableCheckbox(o,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setLabelByIndex=function(t,e,i){this.setLabel(this.tree.findNodeByIndex(t),e,i)},u.prototype.setLabelByValue=function(t,e,i){this.setLabel(this.tree.findNodeByValue(t),e,i)},u.prototype.setLabel=function(t,e,i){try{if(t){var o=this.refreshStop;this.refreshStop=!0;var s=this.tree.valueAttribute,a=this.tree.xpath.label;if(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.label,e),1==this.tree.isInstance)WebSquare.xml.setValue(t.element,"label",e);else if(s){t.element.getElementsByTagName(a)[0].setAttribute(s,e)}else{var l=t.element.getValue(a).getChildNodes();1==l.length&&l[0].setNodeValue(e)}if(this.options.customFormatter&&(this.tree.customFormatter=n.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var h=this.tree.getCloneNode(t);e=this.tree.customFormatter.call(this,e,e,h)}if(t.label=e,t.orgLabel=e,t.rendered)document.getElementById(this.id+"_label_"+t.index).innerHTML=e;if(this.useDataCollection){var d=this.modelControl.getDataComp();null!=d&&d.setCellData(t.index-1,this.tree.dataPath.label,e,null,i)}this.refreshStop=o}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t,e,i){try{if(t){var o=this.refreshStop;this.refreshStop=!0;var s=this.tree.valueAttribute,a=this.tree.xpath.value;if(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.value,e),1==this.tree.isInstance)WebSquare.xml.setValue(t.element,a,e),t.value=e;else{if(s){t.element.getElementsByTagName(a)[0].setAttribute(s,e)}else{var n=t.element.getValue(a).getChildNodes();1==n.length&&n[0].setNodeValue(e)}t.value=e}if(this.refreshStop=o,this.useDataCollection){var l=this.modelControl.getDataComp();null!=l&&l.setCellData(t.index-1,this.tree.dataPath.value,e,null,i)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValueByIndex=function(t,e,i){this.setValue(this.tree.findNodeByIndex(t),e,i)},u.prototype.disableCheckbox=function(t,e,i){try{if(e=n.D.getBoolean(e),t.checkboxDom||(t.checkboxDom=document.getElementById(this.id+"_checkbox_"+t.index)),t.checkboxDom&&(t.checkboxDom.disabled=e,t.checkboxDisabled=e),1==this.options.refreshCheckboxDisableModel&&(this.stopRefresh(!0),1==e?null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath,null,this.scope_id)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledTrueValue):null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath,null,this.scope_id)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledFalseValue),this.stopRefresh(!1)),!0===i||!1===i)for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];this.disableCheckbox(s,e,i)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.checkByIndex=function(t,e,i){try{var o=this.tree.findNodeByIndex(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.checkByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getParentValue=function(t){try{var e="",i=this.tree.findNodeByValue(t);return i&&i.parentNode&&(e=i.parentNode.value),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getChildData=function(t,e){try{for(var i=this.tree.findNodeByValue(t),o=[],s=0;s<i.childNodes.length;s++){if(1==this.options.dynamicAppend||this.useDataCollection){var a=this._getNodeXML(i.childNodes[s],!0);if(a instanceof WebSquare.Elem){var n=WebSquare.xmljs.json2xml(a._element);if(n){var l=WebSquare.xml.parse(n);l&&l.documentElement&&(a=l.documentElement)}}o.push(a)}else o.push(WebSquare.ModelUtil.findInstanceNode(i.childNodes[s].xpath,null,this.scope_id));1==e&&(o=o.concat(this.getChildData(i.childNodes[s].value,!0)))}return o}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getChildNodes=function(t,e){try{for(var i=this.tree.findNodeByValue(t),o=[],s=0;s<i.childNodes.length;s++)o.push(i.childNodes[s]),1==e&&(o=o.concat(this.getChildNodes(i.childNodes[s].value,!0)));return o}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getXPathByValue=function(t){try{return this.tree.findNodeByValue(t).xpath}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.nodeToHTML=function(t){try{if(!t)return"";t.rendered=!0;var e,i,o=[],s=this.options.accessibility;if(this.options.customFormatter&&(this.tree.customFormatter=n.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var a=this.tree.getCloneNode(t),l=this.tree.customFormatter.call(this,t.orgLabel,t.label,a)||t.label;e=this.options.escape?WebSquare.xml._encode(t.label):l,i=this.options.escape?WebSquare.xml._encode(t.value):t.value}else e=this.options.escape?WebSquare.xml._encode(t.label):t.label,i=this.options.escape?WebSquare.xml._encode(t.value):t.value;var h=n.D.getDataPrefix("index"),d=n.D.getDataPrefix("treeNodeValue");s?o.push("<ol tabindex='-1' id='"+this.id+"_group_"+t.index+"' class='w2treeview_group' aria-expanded='true' "+h+"='"+t.index+"' label='"+e+"'>"):o.push("<div tabindex='-1' id='"+this.id+"_group_"+t.index+"' class='w2treeview_group' "+h+"='"+t.index+"' label='"+e+"'>"),o.push("<table id='"+this.id+"_node_"+t.index+"' "+d+"='"+i+"' "+h+"='"+t.index+"'");var c="";if(t.isLastChild()?c=" w2treeview_last_sibling":t.isFirstChild()&&(c=" w2treeview_first_sibling"),t.hasChild()?t.depth>this.options.showTreeDepth||t.folder?o.push("class='w2treeview_node w2treeview_table_node w2treeview_notleaf w2treeview_close_child"+c+"'>"):o.push("class='w2treeview_node w2treeview_table_node w2treeview_notleaf w2treeview_open_child"+c+"' opened='true'>"):t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?o.push("class='w2treeview_node w2treeview_table_node w2treeview_root_single_leaf w2treeview_open_child"+c+"'>"):o.push("class='w2treeview_node w2treeview_table_node w2treeview_root_multi_leaf w2treeview_open_child"+c+"'>"):t.isLastChild()?o.push("class='w2treeview_node w2treeview_table_node w2treeview_leaf w2treeview_last_leaf w2treeview_open_child"+c+"'>"):o.push("class='w2treeview_node w2treeview_table_node w2treeview_leaf w2treeview_open_child"+c+"'>"),o.push("<tr class='w2treeview_row_parent w2treeview_row_depth"+t.depth+"'>"),
1==this.options.lineShow?o.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_navi'></div></td>"):t.isLeaf()?s?o.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'></td>"):o.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_none'></div></td>"):s?t.depth>this.options.showTreeDepth?o.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><img id='"+this.id+"_toggle_"+t.index+"' src='"+this.options.folderOpenToggleImage+"' class='w2treeview_icon_navi_img' /></td>"):o.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><img id='"+this.id+"_toggle_"+t.index+"' src='"+this.options.folderCloseToggleImage+"' class='w2treeview_icon_navi_img' /></td>"):o.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_navi'></div></td>"),""!=t.image){var u=t.image;1==t.hasChild()&&t.depth<=this.options.showTreeDepth&&(u=t.expandedImage);var p=t.imageTitle?"title='"+t.imageTitle+"'":"";o.push("<td class='w2treeview_col_icon_label'>"),o.push("<div id='"+this.id+"_icon_"+t.index+"' class='w2treeview_icon_label'"+p+" style='background-image:url("+u+")'></div>"),o.push("</td>")}else o.push("<td class='w2treeview_none'></td>");1==this.options.showCheckbox&&(o.push("<td class='w2treeview_col w2treeview_col_icon_checkbox'>"),n.D.isIE()?o.push("<div style='left:0px;top:-1px;' class='w2treeview_partialdiv'>"):o.push("<div style='left:4px;top:-1px;' class='w2treeview_partialdiv'>"),1==t.checked?1==t.checkboxDisabled?o.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"):o.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"):1==t.checkboxDisabled?1==t.partial?o.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox w2treeview_partialselect' />"):o.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' /></div>"):1==t.partial?o.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox w2treeview_partialselect' />"):o.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"),o.push("          </div>"),o.push("      </td>"));var g="";if("object"==typeof t.labelStyle){var m="";for(var f in t.labelStyle)m+=f+":"+t.labelStyle[f]+";";g=" style='"+m+"'"}if(-1!=this.options.rowHeight?o.push("<td class='w2treeview_col_label' style='height:"+this.options.rowHeight+"px;'><span id='"+this.id+"_label_"+t.index+"' class='w2treeview_label "+this.options.labelclass+"'"+g+">"+e+"</span></td>"):o.push("<td class='w2treeview_col_label'><span id='"+this.id+"_label_"+t.index+"' class='w2treeview_label "+this.options.labelclass+"'"+g+">"+e+"</span></td>"),o.push("</tr>"),t.hasChild()||1==this.options.dynamicAppend){if(o.push("<tr class='w2treeview_row_child'>"),0==this.options.lineShow||t.isLastChild()?o.push("<td id='"+this.id+"_guideline_"+t.index+"' class='w2treeview_noguideline w2treeview_col_depth"+t.depth+"'></td>"):o.push("<td id='"+this.id+"_guideline_"+t.index+"' class='w2treeview_guideline w2treeview_row_depth"+t.depth+"'></td>"),1==this.options.showCheckbox?o.push("<td colspan='3'>"):o.push("<td colspan='2'>"),
t.depth>this.options.showTreeDepth?o.push("<div id='"+this.id+"_child_"+t.index+"' class='w2treeview_child w2treeview_none'>"):o.push("<div id='"+this.id+"_child_"+t.index+"' class='w2treeview_child'>"),!t.folder&&(1==this.options.alwaysDraw||t.depth<=this.options.showTreeDepth))for(var b=0;b<t.childNodes.length;b++)o.push(this.nodeToHTML(t.childNodes[b]));o.push("</div>"),o.push("</td>"),o.push("</tr>")}return o.push("</table>"),s?o.push("</ol>"):o.push("</div>"),o.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toggleChild=function(t,e,i){try{if(null==e&&(e=-1),null!=t)(o=this.tree.findNodeByValue(t))&&(e=o.index);var o=this.tree.findNodeByIndex(e),s=n.D.getDataPrefix("opened");if(o&&o.depth>0&&o.hasChild()){var a=document.getElementById(this.id+"_node_"+e),l=document.getElementById(this.id+"_child_"+e),h=document.getElementById(this.id+"_icon_"+e);if(a&&l){if(!!!(o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered)||this.options.accessibility){for(var d=[],c=0;c<o.childNodes.length;c++)d.push(this.nodeToHTML(o.childNodes[c]));l.innerHTML=d.join("")}var u=n.D.getBoolean(a.getAttribute(s));if(void 0!==i&&null!=i||(i=0==u),o.folder=!i,this.tree.dataPath.folder){var p=i?this.options.falseValue:this.options.trueValue,g=this.modelControl.getDataComp();g&&g.setCellData(o.index-1,this.tree.dataPath.folder,p)}if(1==i){if(1==this.options.accordion){for(var m={},f=o;f.parentNode;)m[(f=f.parentNode).index]=f.depth;for(var c in this.openedNodes)this.openedNodes[c]==o||m[this.openedNodes[c].index]||this.openedNodes[c].depth<=o.depth&&this.toggleChild(null,c,!1);this.openedNodes[e]=o}if(a.setAttribute(s,"true"),l.style.display="block",this.changeClass(a,"w2treeview_close_child","w2treeview_open_child"),h&&(h.style.backgroundImage="url("+o.expandedImage+")"),this.options.accessibility)(b=document.getElementById(this.id+"_toggle_"+e))&&(b.src=this.options.folderCloseToggleImage);"show"==this.options.animation.toLowerCase()?$("#"+l.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+l.id).hide().fadeIn("fast"):"slidedown"==this.options.animation.toLowerCase()&&$("#"+l.id).hide().slideDown("fast")}else if(0==i){var b;if(a.setAttribute(s,"false"),this.openedNodes[e]&&delete this.openedNodes[e],""!=this.options.animation?"fadein"==this.options.animation.toLowerCase()?$("#"+l.id).fadeOut("fast"):"slidedown"==this.options.animation.toLowerCase()?$("#"+l.id).slideUp("fast"):l.style.display="none":l.style.display="none",this.changeClass(a,"w2treeview_open_child","w2treeview_close_child"),h&&(h.style.backgroundImage="url("+o.image+")"),this.options.accessibility)(b=document.getElementById(this.id+"_toggle_"+e))&&(b.src=this.options.folderOpenToggleImage),WebSquare.removeChildren(l)}}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.spanAll=function(t){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanAll API를 지원하지 않습니다.["+this.id+"]");if(1==t)for(var e=0;e<this.tree.size();e++)this.toggleChild(null,e,t);else if(0==t)for(e=this.tree.size()-1;e>=0;e--)this.toggleChild(null,e,t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.spanNode=function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this._spanNode(arguments[0]):2===arguments.length&&"object"==typeof arguments[0]&&"boolean"==typeof arguments[1]?this._spanNode(arguments[0],arguments[1]):this._spanNode({index:t,applyChildNodes:i},e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._spanNode=function(t,e){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanNode API를 지원하지 않습니다.["+this.id+"]");var i=t.index,o=t.depth,s=t.applyChildNodes;if(0==i||i){var a=(d=this.findNodeByIndex(i)).childNodes;if(1==e){if(1==s)for(var n=0;n<a.length;n++)a[n].childNodes.length>0&&this.spanNode(a[n].index,e,s)}else if(0==e&&1==s)for(n=a.length-1;n>=0;n--)a[n].childNodes.length>0&&this.spanNode(a[n].index,e,s);this.toggleChild(null,i,e)
}else if(0==o||o)for(var l=0,h=this.tree.nodeCount;l<h;l++){var d;if((d=this.tree.hash_index_node[l]).depth===o){if("boolean"==typeof s)for(var c=d.childNodes,u=(n=0,c.length);n<u;n++)c[n].childNodes.length>0&&this.spanNode(c[n].index,e,s);this.toggleChild(null,d.index,e)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var l=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(l){var h=n.D.getGlobalFunction(l,o.scope_id),d=!0;if("function"==typeof h&&(d=h(o)),!d)return}}catch(t){r.w.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2treeview_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i,this.isFireTooltipEvent||(this.isFireTooltipEvent=!0,a.B.fireEvent(this,"ontooltipshow"))})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&(this.tooltip.setStyle("display","none"),a.B.fireEvent(this,"ontooltiphide"),this.isFireTooltipEvent=!1)})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setXML=function(t){try{var e=null;if(1==this.tree.isInstance){var i=this.tree.getNodeset(),o=WebSquare.xml.findNodes(t,i);"recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=this.tree.parseListToTreeInstance(o))}else{var s=WebSquare.xmljs.xml2json(t).E[0];o=new WebSquare.Elem(s).getChildNodes();"recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=this.tree.parseListToTree(o))}this.tree.setXML(e),this.drawContents()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.activateDrag=function(t){try{a.B.stopEvent(t),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll();var e=this,i=this.event.getTargetIterator(t,this.render);if(i.element.id===this.id)return;for(var o=!1,s=!1,l=!1,h=!1,d=n.D.getDataPrefix("index"),c=n.D.getDataPrefix("tdIndex");i.next();)if(i.match("w2treeview_label")&&(h=!0),(i.match("w2treeview_icon_navi")||i.match("w2treeview_icon_navi_img"))&&(o=!0),i.match("w2treeview_icon_label")&&(s=!0),i.match("w2treeview_checkbox")&&(l=!0),i.match("w2treeview_node")){var u=i.getElement().getAttribute(d);if(null==u){i.stop();break}if("onmousedown"==this.options.toggleButtonEvent){var p=this.tree.findNodeByIndex(u);if(o&&!p.isLeaf()){this.toggleChild(null,u);var g=!!(p.childNodes&&p.childNodes[0]&&p.childNodes[0].rendered);this.inlineElement?a.B.fireEvent(this,"ontoggleclick",null,u,g):a.B.fireEvent(this,"ontoggleclick",p.element,u,g)}}if((h||l||s||o)&&this.selectNode1(null,u,!1,!0),1==this.options.useDrag){var m=this.getSelectedLabel();WebSquare.dragdrop.gDragManager.activate(t,i.getElement(),{id:this.id+"_drag",className:"w2treeview_drag",contents:m,delay:15,dropClass:"w2treeview_node",dragoverClass:"w2treeview_label",applyMousePosition:!0,onDrop:function(t,i,o,s,r,l,h){if(t){var u=null,p={},g=null,m=null,f=null;for(p=i?new WebSquare.targetIterator(i,e.render):e.event.getTargetIterator(h);p.next();){if(p.match("w2treeview")){var b=p.getElement().id;n.D.getComponentById(b)&&(u=n.D.getComponentById(b)),p.stop()}
if(p.match("w2grid")&&(g=p.getElement().id,p.stop()),!m&&p.match(null,null,"td")){var y=p.getElement();m=parseInt(y.getAttribute(c),10)}}if(p=null,u&&!i&&(i=document.getElementById(u.id+"_node_0")),t&&i&&u){var v=t.getAttribute(d),w=i.getAttribute(d),S=e.tree.findNodeByIndex(v),C=u.tree.findNodeByIndex(w);a.B.fireEvent(u,"ondrop",S,C,e,u,h)}if(null!=g&&(f=(g=n.D.getComponentById(g)).getDataLength(),null!=m&&(f=g.rowIndex+parseInt(m/(g.oneRowDataLength+g.defaultColCnt)))),t&&g){v=parseInt(t.getAttribute(d),10)-1;if(e.useDataCollection)var _=e.modelControl.getDataComp();S=e.tree.findNodeByIndex(v+1);a.B.fireEvent(g,"ondropfromtree",{dataListId:_.id,fromRowIndex:v,toRowIndex:f,dragNode:S})}}},onDragover:function(t,i,o,s,r,l,h){if(t)if(i){for(var c=null,u=new WebSquare.targetIterator(i,e.render);u.next();)if(u.match("w2treeview")){var p=u.getElement().id;n.D.getComponentById(p)&&(c=n.D.getComponentById(p)),u.stop()}if(u=null,c){var g=t.getAttribute(d),m=i.getAttribute("id"),f=m.substring(m.lastIndexOf("_")+1,m.length),b=e.tree.findNodeByIndex(g),y=c.tree.findNodeByIndex(f);a.B.fireEvent(c,"ondragover",b,y,e,c,h)}}else a.B.fireEvent(e,"ondragleave",h)}})}i.stop()}i=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.appendXmlNodes=function(t,e){try{this.appendData(t.index,e,!0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.appendNode=function(t,e){try{if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),1==this.options.dynamicAppend){var i=t.childNodes?t.childNodes.length+1:1;t.appendChild(this.tree.parseNodeByNode(e,t.depth+1,i,t));for(var o=0;o<t.childNodes.length;o++)this.tree.setRender(t.childNodes[o],!1);this.refreshNaviIcon(t),t.childNodes.length>0&&(t.childNodes[0].rendered=!1,this.toggleChild(null,t.index,!0))}else t.appendChild(e),this.drawContents()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshNaviIcon=function(t){try{if(!t)return;var e=t.index,i=document.getElementById(this.id+"_node_"+e),o=document.getElementById(this.id+"_col_icon_navi_"+e);t.childNodes.length>0?this.options.accessibility?o&&(o.innerHTML="<img id='"+this.id+"_toggle_"+e+"' src='"+this.options.folderOpenToggleImage+"' class='w2treeview_icon_navi_img' />"):(i&&this.removeClass(i,"w2treeview_leaf"),i&&this.removeClass(i,"w2treeview_last_leaf"),i&&this.removeClass(i,"w2treeview_root_single_leaf"),i&&this.removeClass(i,"w2treeview_root_multi_leaf"),t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?o&&this.changeClass(o,"w2treeview_first_leaf","w2treeview_icon_navi"):o&&this.changeClass(o,"w2treeview_root_multi_leaf","w2treeview_icon_navi"):t.isLastChild()?o&&this.changeClass(o,"w2treeview_last_leaf","w2treeview_icon_navi"):o&&this.changeClass(o,"w2treeview_leaf","w2treeview_icon_navi")):this.options.accessibility?o&&(o.innerHTML="<img id='"+this.id+"_toggle_"+e+"' src='"+this.options.leafToggleImage+"' class='w2treeview_icon_navi_img' />"):i&&this.changeClass(i,"w2treeview_notleaf","w2treeview_leaf")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.removeNode=function(t){try{if(!t)return;var e=t.parentNode;if(e){var i=e.index;if(e.removeChild(t),1==this.options.dynamicAppend){var o=t.index,s=document.getElementById(this.id+"_group_"+o);s&&WebSquare.removeChildren(s),0==i?(e._hasChild=e.folder?null:0!=e.childNodes.length,this.drawContents()):this.refreshNaviIcon(e)}else this.drawContents()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.removeNodeList=function(t){try{for(var e=0;e<t.length;e++)if(t[e]){var i=t[e].parentNode;i&&i.removeChild(t[e])}this.drawContents()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.initRenderStatus=function(){try{this.tree.setRender(this.tree.rootNode,!1)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getCheckedNodeByType=function(t,e){try{"object"==typeof t&&null!=t||(t={});for(var i=[],o=this.tree.getNodeIterator({type:"bfs"});o.next();){var s=o.getNode()
;(1==s.checked||t.hierarchy&&1==s.partial&&!s.isRoot())&&(t.excludeRoot&&!s.isRoot()||!t.excludeRoot)&&i.push(s[e])}return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getCheckedValues=function(t){return this.getCheckedNodeByType(t,"value")},u.prototype.getCheckedLabels=function(t){return this.getCheckedNodeByType(t,"label")},u.prototype.getCheckedIndexes=function(t){return this.getCheckedNodeByType(t,"index")},u.prototype.getCheckedNodes=function(t){return this.getCheckedNodeByType(t,"element")},u.prototype.expandNode=function(t,e){try{if("number"==typeof t?this.toggleChild(null,t,!0):this.toggleChild(t,null,!0),e){var i=null;i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t);for(var o=0;o<i.childNodes.length;o++)this.expandNode(i.childNodes[o].index,e)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.collapseNode=function(t,e){try{if(e){var i=null;i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t);for(var o=0;o<i.childNodes.length;o++)this.collapseNode(i.childNodes[o].index,e)}"number"==typeof t?this.toggleChild(null,t,!1):this.toggleChild(t,null,!1)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getAllXML=function(){try{var t=null;return"recursive"==this.options.dataType?t=this.tree.rootNode.element:"listed"==this.options.dataType&&(t=this.tree.parseTreeToList()),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.stopRefresh=function(t){try{this.refreshStop=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getNextNode=function(t){for(var e=t.index,i=t.depth,o=document.getElementById(this.id+"_node_"+e),s=n.D.getDataPrefix("opened"),r=n.D.getBoolean(o.getAttribute(s)),a=this.tree.getNodeIterator({type:"dfs"}),l=!1;a.next();){var h=a.getNode();if(l){if(r)break;if(h.depth<=i)break}else h.index==e&&(l=!0)}return a.getNode()},u.prototype.getPreviousNode=function(t){for(var e=null,i=t.index,o=this.tree.getNodeIterator({type:"dfs"}),s={};o.next();){var r=o.getNode();if(r.index==i)return e;if(this.options.accessibility)document.getElementById(this.id+"_group_"+r.index)&&(e=r);else{var a=document.getElementById(this.id+"_node_"+r.index),l=n.D.getDataPrefix("opened"),h=!!a&&n.D.getBoolean(a.getAttribute(l));s[r.parentNode?r.parentNode.depth:0]||0==r.depth?(0==r.depth&&(h=!0),s[r.depth]=h,e=r):s[r.depth]=!1}}return e},u.prototype.handleToggleEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2treeview_label")&&(e=!0),e&&i.match("w2treeview_node")){var o=n.D.getDataPrefix("index"),s=i.getElement().getAttribute(o);this.toggleChild(null,s),i.stop()}i=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleDblclickEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)i.match("w2treeview_label")&&(e=!0),e&&i.match("w2treeview_node")&&(a.B.fireEvent(this,"ondblclick"),i.stop());i=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleClickEvent=function(t){try{for(var e=!1,i=!1,o=!1,l=!1,h=n.D.getDataPrefix("index"),d=n.D.getDataPrefix("treeNodeValue"),c=this.event.getTargetIterator(t,this.render);c.next();)if(c.match("w2treeview_label")&&(l=!0),(c.match("w2treeview_icon_navi")||c.match("w2treeview_icon_navi_img"))&&(e=!0),c.match("w2treeview_icon_label")&&(i=!0),c.match("w2treeview_checkbox")&&(o=!0),c.match("w2treeview_node")){var u=c.getElement().getAttribute(d),p=c.getElement().getAttribute(h),g=this.tree.findNodeByIndex(p),m=this._getNodeXML(g);if(e&&!g.isLeaf()&&"onmousedown"!=this.options.toggleButtonEvent){this.toggleChild(null,p);var f=!!(g.childNodes&&g.childNodes[0]&&g.childNodes[0].rendered);this.inlineElement?a.B.fireEvent(this,"ontoggleclick",null,p,f):a.B.fireEvent(this,"ontoggleclick",m,p,f)}if(o&&!g.checkboxDisabled){var b=!g.checked;this.checkNode(p,b),
this.inlineElement?a.B.fireEvent(this,"oncheckboxclick",u,null,p):1==this.options.dynamicAppend||this.useDataCollection?a.B.fireEvent(this,"oncheckboxclick",u,m,p):a.B.fireEvent(this,"oncheckboxclick",u,WebSquare.ModelUtil.findInstanceNode(g.xpath,null,this.scope_id),p)}l&&(this.inlineElement?a.B.fireEvent(this,"onlabelclick",u,null,p):a.B.fireEvent(this,"onlabelclick",u,m,p)),i&&(this.inlineElement?a.B.fireEvent(this,"onImageclick",u,null,p):a.B.fireEvent(this,"onImageclick",u,m,p));var y=s.v.getConfiguration("/WebSquare/treeview/useClickEventToggleButton/@value");(l||o||i||e&&"false"!=y)&&(this.selectNode1(null,p,!1,this.options.noFocusOnIconLabelClick),a.B.fireEvent(this,"onclick")),c.stop()}c=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{a.B.stopEvent(t);for(var e=n.D.getDataPrefix("index"),i=n.D.getDataPrefix("treeNodeValue"),o=this.event.getTargetIterator(t,this.render);o.next();)if(o.match("w2treeview_label")){if(this.addClass(o.getElement(),"w2treeview_over"),this.options.tooltipDisplay||this.options.tooltipShowAlways){var s=o.getElement(),l=WebSquare.style.getAbsoluteLeft(s),h=WebSquare.style.getAbsoluteTop(s),d=s.innerHTML,c=WebSquare.style.getAbsoluteLeft(this.render),u=!1;if(this.options.tooltipDisplay)if(l+s.offsetWidth>c+this.render.clientWidth+this.render.scrollLeft)u=!0;else if(n.D.isIEAllVersion()&&!n.D.isIE(6)&&!n.D.isIE(7)){var p=s.style.display;s.style.display="block",s.clientWidth<s.scrollWidth&&(u=!0),s.style.display=p}if(u||this.options.tooltipShowAlways){var g=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);if("function"==typeof g){for(var m=new WebSquare.targetIterator(s,this.render),f=-1;m.next();)m.match("w2treeview_node")&&(f=m.getElement().getAttribute(e),m.stop());m=null;try{d=g(d,f,!!u||s.offsetWidth<s.scrollWidth)}catch(t){r.w.printStackTrace(t,null,this)}}""!=d&&this.showTooltip(l,h,d)}}m=new WebSquare.targetIterator(o.getElement(),this.render),f=-1;for(var b="",y=null;m.next();)m.match("w2treeview_node")&&(f=m.getElement().getAttribute(e),b=m.getElement().getAttribute(i),y=this.tree.findNodeByIndex(f),m.stop());m=null,a.B.fireEvent(this,"onlabelover",f,this._getNodeXML(y),b)}o=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2treeview_label")&&this.removeClass(e.getElement(),"w2treeview_over");e=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleContextmenuEvent=function(t){try{a.B.stopEvent(t);for(var e=!1,i=!1,o=!1,s=!1,l=n.D.getDataPrefix("index"),h=this.event.getTargetIterator(t,this.render);h.next();){if(h.match("w2treeview_label")&&(s=!0),h.match("w2treeview_icon_navi")&&(e=!0),h.match("w2treeview_icon_label")&&(i=!0),h.match("w2treeview_checkbox")&&(o=!0),h.match("w2treeview_node")){var d=h.getElement().getAttribute(l);if(e&&this.toggleChild(null,d),o){var c=document.getElementById(this.id+"_checkbox_"+d).checked;this.checkNode(d,c)}(s||o||i)&&(this.selectNode1(null,d),a.B.fireEvent(this,"onrightbuttonclick",this.findNodeByIndex(d),a.B.getMouseX(t),a.B.getMouseY(t))),h.stop()}h.match("w2treeview")&&this.tree.nodeCount<=1&&(a.B.fireEvent(this,"onrightbuttonclick",null,a.B.getMouseX(t),a.B.getMouseY(t)),h.stop())}h=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=0,o=null,s=n.D.getDataPrefix("index");this.selectedInfo.node?(o=this.selectedInfo.groupDom,i=this.selectedInfo.node.index):i=(o=t.srcElement||t.target).getAttribute(s);var l=this.tree.findNodeByIndex(i);if(37===e||39===e||13===e){var h=37!==e;13===e?this.toggleChild(null,i,null):this.toggleChild(null,i,h);var d=!!(l.childNodes&&l.childNodes[0]&&l.childNodes[0].rendered)
;this.inlineElement?a.B.fireEvent(this,"ontoggleclick",null,i,d):a.B.fireEvent(this,"ontoggleclick",l.element,i,d),a.B.stopEvent(t)}else if(38===e){var c=null;if(0==i?(i=1,c=this.tree.findNodeByIndex(i)):o.id.indexOf("_group_")>-1&&(c=this.getPreviousNode(l)),c){var u=c.index;document.getElementById(this.id+"_group_"+u)&&this.selectNode1(null,u,!1),a.B.stopEvent(t)}}else if(40===e){c=null;if(0==i?(i=1,c=this.tree.findNodeByIndex(i)):o.id.indexOf("_group_")>-1&&(c=this.getNextNode(l)),c){u=c.index;document.getElementById(this.id+"_group_"+u)&&this.selectNode1(null,u,!1),a.B.stopEvent(t)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":this.options.disabled=e,e?this.addClass(this.render,"w2treeview_disabled"):this.removeClass(this.render,"w2treeview_disabled")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){t=n.D.getBoolean(t);var e=h.s.prototype.setDisabled.call(this,t);return this.disableCheckbox(this.tree.rootNode,t,!0),e},u.prototype.setEditMode=function(t,e){var i=document.getElementById(this.id+"_label_"+t);if(null==this.editModeComp||null==this.editModeComp.render){if(!e){this.editModeComp=new WebSquare.uiplugin.input(this.id+"_input"),this.editModeComp.writeTo(i.parentNode),this.editModeComp.activate();var o=this.uuid;this.editModeComp.bind("onblur",(function(){var t=WebSquare.idCache[o],e=t.modelControl.getDataComp(),i=this._oldValue,s=this.getValue();e.setCellData(this._index-1,t.tree.dataPath.label,s),t.appendChild(this),this.hide();var r=document.getElementById(t.id+"_label_"+this._index);WebSquare.style.show(r),this.setValueNM(""),a.B.fireEvent(t,"oneditend",{oldValue:i,newValue:s,index:this._index})})),this.editModeComp.bind("onkeydown",(function(t){a.B.stopPropagation(t)})),this.editModeComp.bind("onmousedown",(function(t){a.B.stopPropagation(t)})),this.editModeComp.bind("onselectstart",(function(t){a.B.stopPropagation(t)}))}}else this.editModeComp.show(),i.parentNode.appendChild(this.editModeComp.render);this.editModeComp._index=t,WebSquare.style.hide(i),this.editModeComp.setVerticalAlign=function(){};var s=this.findNodeByIndex(t);s&&""!=s.label&&(this.editModeComp.setValueNM(s.label),this.editModeComp._oldValue=s.label),this.editModeComp.focus()},u.prototype.finalize=function(){h.s.removeCheckResize(this.uuid),null!=this.editModeComp&&WebSquare.idCache[this.editModeComp.uuid]&&this.editModeComp.remove()},u.prototype.notifyValidCheck=function(t){try{if(t.colID===this.tree.dataPath.depth){var e=this.findNodeByIndex(t.rowIndex+1);if(t.newValue<1)throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be greater than 0."};if(t.oldValue&&t.newValue>t.oldValue&&e.isFirstChild())throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be less than "+(t.oldValue+1)}}else if(t.colID===this.tree.dataPath.value){e=this.findNodeByIndex(t.rowIndex+1);if(this.findNodeByValue(t.newValue))throw{message:"Invalid value : [value : "+e.value+", newValue : "+t.newValue+"]. The treeValue must be unique."}}return!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype.notifyInvalid=function(){},u.prototype.notifySetCellData=function(t,e,i,o){try{if(this.refreshStop||parseInt(o,10)===parseInt(i,10))return;if(e===this.tree.dataPath.label)this.setLabelByIndex(t+1,i,!0);else if(e===this.tree.dataPath.checkbox)i==this.options.trueValue?this.checkNode(t+1,!0):i==this.options.falseValue&&this.checkNode(t+1,!1);else if(e===this.tree.dataPath.depth){if(Math.abs(i-o)>1)return void this.refreshItemset();this.stopRefresh(!0),this.notifyDepthChanged(t+1,i,o),this.stopRefresh(!1);var s=this.findNodeByIndex(t+1);s.parentNode===this.tree.rootNode?this.drawContents():(this.refreshNaviIcon(s),this.toggleChild(null,s.parentNode.index,!0))}else e===this.tree.dataPath.value&&this.setValueByIndex(t+1,i,!0)}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.notifyDepthChanged=function(t,e,i){try{var o=this.findNodeByIndex(t),s=this.modelControl.getDataComp();if(e>i){var a=(d=o.parentNode).childNodes[o.depthIndex-2],n=o.childNodes.splice(0,o.childNodes.length);d.childNodes.splice(o.depthIndex-1,1),o.parentNode=a,a.childNodes.push(o),o.depthIndex=a.childNodes.length,a.rendered=!1,o.rendered=!1;for(var l=0;l<n.length;l++)n[l].parentNode=a,a.childNodes.push(n[l]),n[l].depthIndex=a.childNodes.length,n[l].rendered=!1;d.childNodes[0].rendered=!1}else{if(o.hasChild())for(l=o.childNodes.length-1;l>=0;l--){var h=o.childNodes[l];s.setCellData(h.index-1,this.tree.dataPath.depth,h.depth-1),this.notifyDepthChanged(h.index,h.depth-1,h.depth)}var d,c=(d=o.parentNode).parentNode;if(o.depthIndex<d.childNodes.length){var u=d.childNodes.splice(o.depthIndex,d.childNodes.length-o.depthIndex);for(l=0;l<u.length;l++)u[l].parentNode=o,o.childNodes.push(u[l]),u[l].depthIndex=o.childNodes.length,u[l].rendered=!1}d.childNodes.splice(d.childNodes.length-1,1),o.parentNode=c,c.childNodes.splice(d.depthIndex,0,o);for(l=d.depthIndex;l<c.childNodes.length;l++)c.childNodes[l].depthIndex=l+1;c.childNodes[0].rendered=!1}o.depth=e,o.element.setAttribute(s.options.valueAttribute,e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.notifyInsertRow=function(t){try{if(this.refreshStop)return;var e=this.modelControl.getDataComp(),i=this.findNodeByIndex(t),o=new d;o.index=t+1,o.depthIndex=1,o.depth=i.depth+1,o.rendered=!1,o.parentNode=i;for(var s=e.getRowCount();s>=t+2;s--)this.tree.changeNodeIndex(s-1,s);this.tree.hash_index_node[t+1]=o,e.setCellData(t,this.tree.dataPath.depth,i.depth+1,null,!0);var a=e.getRowJSON(t),n={T:1,N:"data",A:{index:""+t},E:[]};for(var l in a){var h={T:1,N:l,A:{},parent:n};""!=a[l]&&(h.E=[],h.E.push({T:3,text:""+a[l]})),n.E.push(h)}o.element=new WebSquare.Elem(n),i.childNodes.unshift(o);for(s=1;s<i.childNodes.length;s++)i.childNodes[s].depthIndex=s+1;this.refreshNaviIcon(i),this.toggleChild(null,t,!0),this.tree.nodeCount=e.getRowCount()+1}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.notifyBeforeSetRowData=function(t,e){try{if(this.refreshStop)return;var i=this.modelControl.getDataComp();this.beforeSetRowData=e?{depth:i.getCellData(t,this.tree.dataPath.depth),label:i.getCellData(t,this.tree.dataPath.label),checkbox:i.getCellData(t,this.tree.dataPath.checkbox),value:i.getCellData(t,this.tree.dataPath.value),overwrite:e}:{depth:Number(i.getCellData(t-1,this.tree.dataPath.depth))+1,label:"",checkbox:"",value:i.getCellData(t,this.tree.dataPath.value),overwrite:e}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.notifySetRowData=function(t){try{if(this.refreshStop)return;var e,i=(e=this.modelControl.getDataComp()).getCellData(t,this.tree.dataPath.depth),o=e.getCellData(t,this.tree.dataPath.label),s=e.getCellData(t,this.tree.dataPath.checkbox),a=e.getCellData(t,this.tree.dataPath.value);if(i!=this.beforeSetRowData.depth)if(this.notifyValidCheck({colID:this.tree.dataPath.depth,oldValue:this.beforeSetRowData.depth,newValue:i,rowIndex:t}))this.notifySetCellData(t,this.tree.dataPath.depth,i,this.beforeSetRowData.depth);else(e=this.modelControl.getDataComp()).setCellData(t,this.tree.dataPath.depth,this.beforeSetRowData.depth);if(o!=this.beforeSetRowData.label&&this.notifySetCellData(t,this.tree.dataPath.label,o,this.beforeSetRowData.label),a!=this.beforeSetRowData.value)this.notifyValidCheck({colID:this.tree.dataPath.value,oldValue:this.beforeSetRowData.value,newValue:a,rowIndex:t})&&this.notifySetCellData(t,this.tree.dataPath.value,a,this.beforeSetRowData.value);s!=this.beforeSetRowData.checkbox&&this.notifySetCellData(t,this.tree.dataPath.checkbox,s,this.beforeSetRowData.checkbox),this.beforeSetRowData={},this.tree.nodeCount=e.getRowCount()+1}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.notifyRemoveRow=function(t){try{if(this.options.forceRefresh)return this.stopRefresh(!1),void this.refreshItemset();if(this.refreshStop)return
;var e=this.findNodeByIndex(t+1),i=e.parentNode,o=document.getElementById(this.id+"_group_"+e.index);if(o&&WebSquare.removeNode(o),this.stopRefresh(!0),this.notifyRemoveRow_allChildren(t),this.stopRefresh(!1),0==i.index)i._hasChild=i.folder?null:0!=i.childNodes.length,this.drawContents();else{this.refreshNaviIcon(i);var s=this.findNodeByIndex(t);if(s&&!s.isRoot()){if(s.isLastChild()){var a=document.getElementById(this.id+"_node_"+s.index);this.addClass(a,"w2treeview_last_sibling"),this.removeClass(a,"w2treeview_first_sibling"),s.isLeaf()&&this.addClass(a,"w2treeview_last_leaf")}else if(s.isFirstChild()){a=document.getElementById(this.id+"_node_"+s.index);this.addClass(a,"w2treeview_first_sibling")}if(s.parentNode.isLastChild()){var n=document.getElementById(this.id+"_guideline_"+s.parentNode.index);this.removeClass(n,"w2treeview_guideline"),this.addClass(n,"w2treeview_noguideline")}}}var l=this.modelControl.getDataComp();this.tree.nodeCount=l?l.getRowCount()+1:this.tree.nodeCount}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.notifyRemoveRow_allChildren=function(t){try{var e=this.findNodeByIndex(t+1),i=e.parentNode,o=this.modelControl.getDataComp(),s=t,a=o.getRowCount()+1,n=1;if(e.hasChild()){s=a-1;for(var l=e;!l.isRoot()&&l.depthIndex==l.parentNode.childNodes.length;)l=l.parentNode;l.isRoot()||l.depthIndex==l.parentNode.childNodes.length||(s=l.parentNode.childNodes[l.depthIndex].index-2);for(var h=[],d=t;d<s;d++)h.push(d),this.tree.clearNode(this.tree.findNodeByIndex(d+2)),n++;o.removeRows(h)}i.childNodes.splice(e.depthIndex-1,1);for(d=e.depthIndex-1;d<i.childNodes.length;d++)i.childNodes[d].depthIndex=d+1;this.tree.clearNode(e),this.selectedInfo={dom:null,node:null};for(d=s+2;d<=a;d++)this.tree.changeNodeIndex(d,d-n);this.tree.nodeCount=o.getRowCount()+1}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.notifyDataChanged=function(t){try{this.stopRefresh(!1),this.refreshItemset()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionItemsetBinded){var t={};return t.id=this.modelControl.dataCollectionItemsetInfo.dataComp.id,t.nodeset=this.modelControl.itemsetObj.nodeset,t.label=this.modelControl.itemsetObj.label,t.value=this.modelControl.itemsetObj.value,t}return null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getLastChildIndex=function(t){try{var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.tree.nodeCount-1;for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.moveNode=function(t,e,i){try{if(!this.useDataCollection)return!1;if(t==e)return!1;if(t<e&&this.getLastChildIndex(t)>=e)return l.k.printLog("treeview moveNode : Invalid argument. [destIndex] must not be child of [srcIndex].["+this.id+"]"),!1;if(1==this.options.moveSibling&&!i)return this._bAppendMoveNode(t,e);for(var o=this.modelControl.getDataComp(),s=t-1,a=e-1,n=this.findNodeByIndex(t),h=this.findNodeByIndex(e),d=this.getLastChildIndex(s+1)-1,c=[],u=this.tree.dataPath.depth,p=0,g=s;g<=d;g++){var m=o.getRowJSON(g);m[u]=i?Number(m[u])+(h.depth-n.depth+1):Number(m[u])+(h.depth-n.depth),"number"!==o.getColumnInfo(u).dataType&&(m[u]=m[u]+""),c.push(m),p++}this.stopRefresh(!0),o.removeRange(s,d),s<a&&(a+=s-d-1);var f=0;if(!i){var b=this.getLastChildIndex(e);f=b-e,e<=s&&b>=d&&(f-=p)}return o.insertJSON(a+1+f,c),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,a+2+f),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype._bAppendMoveNode=function(t,e){try{for(var i=this.modelControl.getDataComp(),o=t-1,s=e-1,a=this.findNodeByIndex(t),n=this.findNodeByIndex(e),l=this.getLastChildIndex(o+1)-1,h=[],d={},c=this.tree.dataPath.depth,u=o;u<=l;u++){var p=i.getRowJSON(u);p[c]=Number(p[c])+(n.depth-a.depth),
"number"!==i.getColumnInfo(c).dataType&&(p[c]=p[c]+""),h.push(p),d[u]=p}var g=0;if(o>s){var m=[];if((f=this.getLastChildIndex(e)-1)>=o)for(u=s;u<=f;u++)d[u]||m.push(i.getRowJSON(u));else{for(u=s;u<=o-1;u++)m.push(i.getRowJSON(u));g=l-o}}else{m=[];var f=this.getLastChildIndex(e)-1;for(u=l+1;u<=f;u++)m.push(i.getRowJSON(u))}this.stopRefresh(!0);var b=o<s?o:s,y=f<o?o+g:f+g;i.removeRange(b,y);var v=[];if(o>s){v=h.concat(m);var w=s+1}else{v=m.concat(h);w=t+m.length}return i.insertJSON(b,v),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,w),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype.setNodeSet=function(t,e){try{var i=e||{},o=t;if(t.indexOf("data:")>=0&&(o=t.replaceAll("data:","")),this.modelControl.getDataComp(o)){for(var s in this.useDataCollection=t.match("data:"),this.modelControl.unbindItemset(),this.modelControl.setItemset("data:"+o,i.label,i.value),this.modelControl.dataCollectionBindItemset(),this.modelControl.getDataCollectionItemsetData(this.modelControl.id),e)"string"===e[s]&&e[s],this.tree.xpath[s]=e[s],this.tree.dataPath[s]=e[s],"checkbox"===s&&(this.tree.checkbox.colID=e[s],this.tree.checkbox.xpath=e[s]);this.successBinding=!1,this.tree.valueAttribute="",this.refreshItemset({setNodeSet:!0})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.deselectNode=function(){try{if(this.selectedInfo&&this.selectedInfo.node){var t=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,e=n.D.getBoolean(this.options.useHirarchySelect);if(this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),this.selectedInfo.node){var i=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);i&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(i.style.backgroundImage=this.originalIconImage)}if(e&&this.selectedInfoStack.length>0){for(var o=0;o<this.selectedInfoStack.length;o++){var s=this.selectedInfoStack[o];s.dom&&(this.removeClass(s.dom,this.options.labelonClickClass),s.dom.style.backgroundColor=s.org.background,s.dom.style.color=s.org.color),s.icon&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(s.icon.style.backgroundImage=s.org.iconImage)}this.selectedInfoStack=[]}a.B.fireEvent(this,"onchange",t,null),this.selectedInfo={groupDom:null,dom:null,node:null}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setShowCheckBox=function(t){try{this.options.showCheckbox!=t&&(this.options.showCheckbox=t,this.drawContents())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.checkResize=function(){try{if(this.render){var t=this.render.offsetWidth,e=this.render.offsetHeight;if(this.resizeObj&&t>0&&e>0){var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.refreshItemset()}this.resizeObj={width:t,height:e}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getNodeXML=function(t,e){try{var i;if(!1===e||!0!==e&&!0!==this.options.useXML)i=t;else if(!this.inlineElement&&(i=t.element)instanceof WebSquare.Elem){var o=WebSquare.xmljs.json2xml(i._element);if(o){var s=WebSquare.xml.parse(o);s&&s.documentElement&&(i=s.documentElement)}}return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getDepth1ParentNode=function(t){try{for(var e=null,i=t.index,o=(t.depth,this.tree.getNodeIterator({type:"dfs"}));o.next();){var s,a=o.getNode();if(1==a.depth&&(!0,s=a),a.index==i){e=s;break}}return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getBrotherNextNode=function(t){try{for(var e=null,i=t.index,o=t.depth,s=this.tree.getNodeIterator({type:"dfs"}),a=!1;s.next();){var n=s.getNode();if(a){if(n.depth==o){(1==o||this._getDepth1ParentNode(t)==this._getDepth1ParentNode(n))&&(e=n);break}}else n.index==i&&(a=!0)}return e}catch(t){r.w.printStackTrace(t,null,this)}}},4672:(t,e,i)=>{i.r(e),i.d(e,{treeview_virtual:()=>u})
;var o=i(2981),s=i(3082),r=i(7275),a=function(){this.index=0,this.depthIndex=0,this.id="",this.label="",this.orgLabel="",this.value="",this.element=null,this.depth=-1,this.parentNode=null,this.childNodes=[],this._isRoot=null,this._hasChild=null,this._isLastChild=null,this.image="",this.selectedImage="",this.expandedImage="",this.checked=!1,this.folder=null,this.expandedNodes=[],this._isExpanded=!1,this._ancestor=0};a.prototype.appendChild=function(t){if(t){var e=this;do{if(t==e)return!1;e=e.parentNode}while(e);if(t.parentNode){for(var i=0;i<t.parentNode.expandedNodes.length;i++){if(t==t.parentNode.expandedNodes[i]){t.parentNode.expandedNodes.splice(i,1);break}}t.parentNode.removeChild(t)}return t.parentNode=this,this.depth>=1&&(t._ancestor=this._ancestor),this.childNodes.push(t),!0}},a.prototype.removeChild=function(t){if(t){for(var e=[],i=0;i<this.childNodes.length;i++){var o=this.childNodes[i];o!=t&&e.push(o)}this.childNodes=e}},a.prototype.isRoot=function(){return this._isRoot=null,this._isRoot=null==this.parentNode,this._isRoot},a.prototype.hasChild=function(){return this._hasChild=null,this.folder?this.folder:(this._hasChild=0!=this.childNodes.length,this._hasChild=0!=this.childNodes.length,this._hasChild)},a.prototype.isLeaf=function(){return!this.hasChild()},a.prototype.isFirstChild=function(){var t=!1;return this.parentNode?(this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},a.prototype.isLastChild=function(){if(this._isLastChild=null,!this.parentNode)return!0;var t=this.parentNode.childNodes;return t[t.length-1]==this&&(this._isLastChild=!0),1!=this._isLastChild&&(this._isLastChild=!1),this._isLastChild},a.prototype.hasSibling=function(){return this._isLastChild=null,!!this.parentNode&&1!=this.parentNode.childNodes.length},a.prototype.isExpanded=function(){if(this._isExpanded=!1,this.hasChild()){for(var t=0;t<this.parentNode.expandedNodes.length;t++)if(this.index==this.parentNode.expandedNodes[t].index){this._isExpanded=!0;break}return this._isExpanded}return!1},a.prototype.isFirstChildByRoot=function(){var t=!1;return this.parentNode?(0!=this.parentNode.depth||this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},(a.nodeIterator=function(t,e){this.node=t,this.status=0,this.options=o.x.extend({type:"dfs",pruning:null},o.x.extend({},e)),this.stack=[]}).prototype.next=function(){return!!this.node&&(0==this.status?(this.status=1,!0):("dfs"==this.options.type?(this.stack=this.node.childNodes.concat(this.stack),this.node=this.stack.shift()):"bfs"==this.options.type&&(this.stack=this.stack.concat(this.node.childNodes),this.node=this.stack.shift()),!!this.node))},a.nodeIterator.prototype.stop=function(){this.status=2},a.nodeIterator.prototype.getNode=function(){return this.node};var n=function(){this.nodeCount=0,this.rootNode=null,this.hash_index_node={},this.useXPath=!1,this.useCheckbox=!1,this.useImage=!1;this.xpath={nodeset:"",label:"w2:label",value:"w2:value",depth:"w2:depth",nodeName:"w2:node",checkbox:"",folder:"w2:folder"},this.dataPath={},this.imageXPath={image:"",iconImage:"",leafImage:"",selectedImage:"",expandedImage:""},this.checkbox={xpath:"",trueValue:"",falseValue:"",checkboxDisabled:"",checkboxDisabledTrueValue:"",checkboxDisabledFalseValue:"",checkboxDisabledAll:""},this.valueAttribute="",this.displayMode="0",this.delimiter="\t",this.customFormatter="",this.treeView="",this.maxDepth=-1,this.isInstance=!1};n.prototype.getNodeset=function(){if(""!=this.xpath.nodeset)return this.xpath.nodeset},n.prototype.setXPath=function(t,e,i,o,s,r,a){""!=t&&(this.useXPath=!0,this.xpath.nodeset=t,this.xpath.label=e,this.xpath.value=i,this.xpath.depth=o,this.xpath.nodeName=s,this.xpath.folder=r,this.xpath.auth=a)},n.prototype.setDataPath=function(t,e,i,o,s,r){this.dataPath.label=t,this.dataPath.value=e,this.dataPath.depth=i,this.dataPath.nodeName=o,this.dataPath.folder=s,this.dataPath.checkbox=r},n.prototype.setCheckbox=function(t,e,i,o,s,r,a,n,l,h,d){
""!=t&&(this.useCheckbox=!0,this.checkbox.xpath=t,this.checkbox.trueValue=e,this.checkbox.falseValue=i,this.checkbox.checkboxDisabled=o,this.checkbox.checkboxDisabledTrueValue=s,this.checkbox.checkboxDisabledFalseValue=r,this.checkbox.checkboxDisabledAll=a,this.checkbox.refreshCheckboxModel=n,this.checkbox.refreshCheckboxDisableModel=l,this.checkbox.hierarchy=h,this.checkbox.colID=d)},n.prototype.setDisplayMode=function(t,e){this.displayMode=t,this.delimiter=e},n.prototype.setImage=function(t,e,i,o,s,r){this.useImage=!0,this.imageXPath.image=t||"",this.imageXPath.iconImage=e||"",this.imageXPath.leafImage=i||"",this.imageXPath.selectedImage=o||"",this.imageXPath.expandedImage=s||"",this.imageXPath.imageTitle=r||""},n.prototype.setXML=function(t){t&&(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},1==this.isInstance?(this.rootNode=this.parseNodeInstance(t,0,0),1==this.useImage&&this.parseImageInstance(this.rootNode)):(this.rootNode=this.parseNode(t,0,0),1==this.useImage&&this.parseImage(this.rootNode)))},n.prototype.setDataList=function(t){var e=s.D.getComponentById(t);if(e){this.rootNode=new a,this.nodeCount=0,this.hash_index_node[this.rootNode.index]=this.rootNode,this.dataType="list";for(var i=e.getAllFilteredJSON(),o=this.rootNode,n=0;n<i.length;n++){var l=i[n],h=parseInt(l[this.dataPath.depth],10)||0,d=o.depth,c=new a;c.index=++this.nodeCount,c.depth=h,c.element=l,c.orgLabel=l[this.dataPath.label],c.label=l[this.dataPath.label],c.value=l[this.dataPath.value],c.folder=l[this.dataPath.folder];var u=c.label;switch(this.displayMode){case"0":c.label=u;break;case"1":c.label=c.value+this.delimiter+u;break;case"2":c.label=u+this.delimiter+c.value;break;default:c.label=u}if(1==this.useCheckbox&&l[this.dataPath.checkbox])if(l[this.dataPath.checkbox].wq_trim()==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&e.setCellData(n,this.dataPath.checkbox,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&e.setCellData(n,this.dataPath.checkbox,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){var p=l[this.checkbox.checkboxDisabled].wq_trim();1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(n,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(n,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledFalseValue)),p==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(n,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledTrueValue)):p==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(n,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledFalseValue))}if("function"==typeof this.customFormatter){var g=this.customFormatter,m=this.getCloneNode(c);c.label=g.call(this.treeview,c.orgLabel,c.label,m)||c.label}if(h<=0?r.k.printLog("["+t+"] depth 값은 양의정수여야 합니다. (1 이상)"):1==h&&(c._ancestor=c.index),d<h)o.appendChild(c);else if(d==h)o.parentNode.appendChild(c);else if(d>h){o=o.parentNode;for(var f=0;f<d-h&&null!=o.parentNode;f++)o=o.parentNode;o.appendChild(c)}o=c}var b=function(t,e,i){if(i){i.depthIndex=e,i.depth=t,t>this.maxDepth&&(this.maxDepth=t);for(var o=0,s=0;s<i.childNodes.length;s++)b.call(this,t+1,o++,i.childNodes[s]);this.hash_index_node[i.index]=i}};b.call(this,0,0,this.rootNode),1==this.useImage&&this.parseDataListImage(this.rootNode)}},n.prototype.setData=function(t){if(t&&null!=t.data)switch(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},t.type){case"dataList":this.setDataList(t.data);break;case"xmlInstance":case"inlineXML":this.setXML(t.data)}},n.prototype.appendXML=function(t,e){if(t){var i=this.findNodeByIndex(e),o=i.element,s=1;if(1==this.isInstance){
for(var r=t.firstChild;null!=r;r=t.firstChild)1==r.nodeType&&r.tagName==this.xpath.nodeName&&i.appendChild(this.parseNodeInstance(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImageInstance(i)}else{for(var a=t.getChildNodes(),n=0;n<a.length;n++)1==(r=a[n]).nodeType&&r.getTagName()==this.xpath.nodeName&&i.appendChild(this.parseNode(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImage(i)}return i}},n.prototype.parseNode=function(t,e,i,o){if(!t)return null;var s=WebSquare.jsonUtil.getValue(t._element,this.xpath.label,this.valueAttribute),r=null,n=this.xpath.auth&&WebSquare.jsonUtil.getValue(t._element,this.xpath.auth,this.valueAttribute);if(this.xpath.folder)r=WebSquare.jsonUtil.getValue(t._element,this.xpath.folder,this.valueAttribute);for(var l="",h=this.xpath.value.split(" "),d=0;d<h.length;d++)0!=d&&(l+="$$"),l+=WebSquare.jsonUtil.getValue(t._element,h[d],this.valueAttribute);var c=new a;switch(c.index=this.nodeCount++,c.depthIndex=i,this.displayMode){case"0":c.label=s;break;case"1":c.label=l+this.delimiter+s;break;case"2":c.label=s+this.delimiter+l;break;default:c.label=s}if(c.orgLabel=c.label,c.value=l,c.element=t,c.depth=e,c.folder=r,c.auth=n,o&&(c._ancestor=o._ancestor),e>this.maxDepth&&(this.maxDepth=e),1==e?(this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset,c._ancestor=c.index):e>1&&("recursive"==this.dataType?this.xpath.value?c.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+c.value+"']":c.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset),1==this.useCheckbox){var u=WebSquare.jsonUtil.getValue(t._element,this.checkbox.xpath,this.valueAttribute);if(c.checkboxXPath=c.xpath+"/"+this.checkbox.xpath,u==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){c.checkboxDisableXPath=c.xpath+"/"+this.checkbox.checkboxDisabled;var p=WebSquare.jsonUtil.getValue(t._element,this.checkbox.checkboxDisabled,this.valueAttribute);1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),p==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):p==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}var g=0,m=t.getChildNodes();for(d=0;d<m.length;d++){var f=m[d];1==f.nodeType&&f.getTagName()==this.xpath.nodeName&&c.appendChild(this.parseNode(f,e+1,g++,c))}if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(d=0;d<c.childNodes.length;d++){var v=c.childNodes[d];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<c.childNodes.length?c.partial=!0:b>0&&b==c.childNodes.length?(c.checked=!0,c.checkboxDom||(c.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+c.index)),c.checkboxDom&&(c.checkboxDom.checked=!0)):c.partial=!1}if(this.hash_index_node[c.index]=c,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(c),C=w.call(this.treeview,c.orgLabel,c.label,S)||c.label;c.label=C}return c},n.prototype.parseNodeInstance=function(t,e,i,o){if(!t)return null
;var r=WebSquare.xml.getValue(t,this.xpath.label).wq_trim(),n=null,l=this.xpath.auth&&WebSquare.xml.getValue(t,this.xpath.auth).wq_trim();this.xpath.folder&&(n=s.D.getBoolean(WebSquare.xml.getValue(t,this.xpath.folder).wq_trim()));for(var h="",d=this.xpath.value.split(" "),c=0;c<d.length;c++)0!=c&&(h+="$$"),h+=WebSquare.xml.getValue(t,d[c]).wq_trim();var u=new a;switch(u.index=this.nodeCount++,u.depthIndex=i,this.displayMode){case"0":u.label=r;break;case"1":u.label=h+this.delimiter+r;break;case"2":u.label=r+this.delimiter+h;break;default:u.label=r}if(u.orgLabel=u.label,u.value=h,u.element=t,u.depth=e,u.folder=n,u.auth=l,o&&(u._ancestor=o._ancestor),e>this.maxDepth&&(this.maxDepth=e),1==e?(this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset,u._ancestor=u.index):e>1&&("recursive"==this.dataType?this.xpath.value?u.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+u.value+"']":u.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.xml.getValue(t,this.checkbox.xpath).wq_trim();if(u.checkboxXPath=u.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(u.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.trueValue)):(u.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){u.checkboxDisableXPath=u.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.xml.getValue(t,this.checkbox.checkboxDisabled).wq_trim();1==this.checkbox.checkboxDisabledAll?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}for(var m=0,f=t.firstChild;null!=f;f=f.nextSibling)1==f.nodeType&&f.tagName==this.xpath.nodeName&&u.appendChild(this.parseNodeInstance(f,e+1,m++,u));if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(c=0;c<u.childNodes.length;c++){var v=u.childNodes[c];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<u.childNodes.length?u.partial=!0:b>0&&b==u.childNodes.length?(u.checked=!0,u.checkboxDom||(u.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+u.index)),u.checkboxDom&&(u.checkboxDom.checked=!0)):u.partial=!1}if(this.hash_index_node[u.index]=u,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(u),C=w.call(this.treeview,u.orgLabel,u.label,S)||u.label;u.label=C}return u},n.prototype.parseNodeByNode=function(t,e,i,o){if(!t)return null;var s=new a;s.index=t.index,s.depthIndex=i,s.parentNode=o,s.label=t.label,s.orgLabel=s.label,s.value=t.value,s.element=t.element.cloneNode(!0),s.depth=e,s.folder=t.folder,s.xpath="",s.checkboxXPath="",s.selectedImage=t.selectedImage,s.expandedImage=t.expandedImage,s.image=t.image,s.imageTitle=t.imageTitle,s.labelStyle=t.labelStyle,s.expandedNodes=t.expandedNodes.splice(0),void 0!==t.checked&&(s.checked=t.checked),s.checkboxDisableXPath="",void 0!==t.checkboxDisabled&&(s.checkboxDisabled=t.checkboxDisabled);for(var r=0,n=0;n<t.childNodes.length;n++)s.appendChild(this.parseNodeByNode(t.childNodes[n],e+1,r++,s,o));return this.hash_index_node[s.index]=s,s},
n.prototype.parseImage=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.image,this.valueAttribute)),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.iconImage,this.valueAttribute)),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.selectedImage,this.valueAttribute)),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.expandedImage,this.valueAttribute)),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.leafImage,this.valueAttribute)),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle,this.valueAttribute);for(var n=0;n<t.childNodes.length;n++)this.parseImage(t.childNodes[n])},n.prototype.parseImageInstance=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.xml.getValue(t.element,this.imageXPath.image).wq_trim()||""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.xml.getValue(t.element,this.imageXPath.iconImage).wq_trim()||""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.xml.getValue(t.element,this.imageXPath.selectedImage).wq_trim()||""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.xml.getValue(t.element,this.imageXPath.expandedImage).wq_trim()||""),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.xml.getValue(t.element,this.imageXPath.leafImage).wq_trim()||""),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.xml.getValue(t.element,this.imageXPath.imageTitle);for(var n=0;n<t.childNodes.length;n++)this.parseImageInstance(t.childNodes[n])},n.prototype.parseDataListImage=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:t.element?t.element[this.imageXPath.image].wq_trim():""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:t.element?t.element[this.imageXPath.iconImage].wq_trim():""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:t.element?t.element[this.imageXPath.selectedImage].wq_trim():""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:t.element?t.element[this.imageXPath.expandedImage].wq_trim():""),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:t.element?t.element[this.imageXPath.leafImage].wq_trim():""),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle,this.valueAttribute);for(var n=0;n<t.childNodes.length;n++)this.parseDataListImage(t.childNodes[n])},n.prototype.parseListToTree=function(t){
for(var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=WebSquare.xmljs.xml2json(e).E[0],o=0;o<t.length;o++)t[o]._element.parent=i;var s=i,r=0;this.dataType="list";for(o=0;o<t.length;o++){s=new WebSquare.Elem(s);var a=t[o],n=parseInt(WebSquare.jsonUtil.getValue(a._element,this.xpath.depth,this.valueAttribute))||0;r=parseInt(WebSquare.jsonUtil.getValue(s._element,this.xpath.depth,this.valueAttribute))||0;if(0===n&&0!==r&&(a.setNodeValue(this.xpath.depth,r),n=r),r<n)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n&&0==o)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n){a._element.parent=s.getParentNode()._element,a=s.getParentNode().appendChild(a._element)}else if(r>n){s=s.getParentNode();for(var l=0;l<r-n;l++)null!=s._element.parent&&(s=s.getParentNode());s.element&&(s=s._element),a._element.parent=s._element,a=s.appendChild(a._element)}s=a}return new WebSquare.Elem(i)},n.prototype.parseListToTreeInstance=function(t){var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=e.documentElement,o=0;this.dataType="list";for(var s=0;s<t.length;s++){var r=t[s].cloneNode(!0),a=parseInt(WebSquare.xml.getValue(r,this.xpath.depth))||0;o=parseInt(WebSquare.xml.getValue(i,this.xpath.depth))||0;if(0===a&&0!==o&&(WebSquare.xml.setValue(r,this.xpath.depth,o),a=o),o<a)r=WebSquare.xml.appendChild(i,r),o=a;else if(o==a&&0==s)r=WebSquare.xml.appendChild(i,r);else if(o==a){var n=i.parentNode;r=WebSquare.xml.appendChild(n,r)}else if(o>a){i=i.parentNode;for(var l=0;l<o-a;l++)null!=i.parentNode&&(i=i.parentNode);i.documentElement&&(i=i.documentElement),r=WebSquare.xml.appendChild(i,r)}i=r}return e.documentElement},n.prototype.parseRecursiveToTree=function(t){this.dataType="recursive";var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0);if(t[0]instanceof WebSquare.Elem){for(var i=new WebSquare.Elem(WebSquare.xmljs.xml2json(e).E[0]),o=0;o<t.length;o++){var r=null;r=t[o],i.appendChild(r._element)}return i}for(o=0;o<t.length;o++){r=null;r=s.D.isOpera()?WebSquare.xml.parse(t[o]).firstChild:t[o].cloneNode(!0),WebSquare.xml.appendChild(e.documentElement,r)}return e.documentElement},n.prototype.parseTreeToList=function(){var t=this.xpath.nodeset;if(t.indexOf("/")>-1){var e=t.split("/");t=e[e.length-2]}t&&""!=t||(t="Treeview");var i=WebSquare.xml.parse("<"+t+' xmlns:w2="http://www.inswave.com/websquare" />',!0),o=i.documentElement,s=this.getNodeIterator({type:"dfs"});for(s.next();s.next();){var r=s.getNode();o.appendChild(r.element)}return i.documentElement},n.prototype.getNodeIterator=function(t){return t=o.x.extend({rootNode:null},t||{}),new a.nodeIterator(t.rootNode||this.rootNode,t)},n.prototype.size=function(){return this.nodeCount},n.prototype.findNodeByValue=function(t){for(var e=null,i=this.getNodeIterator(),o=0;i.next();){var s=i.getNode();if(!s.parentNode||1!=s.depth&&!0!==s.parentNode._isExpanded||o++,s.value==t){e=s;break}}return e&&(e._nodePosition=o),i=null,e},n.prototype.findNodeByIndex=function(t){var e=this.hash_index_node[t];return e||null},n.prototype.IterateFindNodeByIndex=function(t){for(var e=null,i=this.getNodeIterator(),o=0;i.next();){var s=i.getNode();if(!s.parentNode||1!=s.depth&&!0!==s.parentNode._isExpanded||o++,s.index==t){e=s;break}}return e&&(e._nodePosition=o),i=null,e},n.prototype.setRender=function(t,e){t.rendered=e;for(var i=0;i<t.childNodes.length;i++)this.setRender(t.childNodes[i],e)},n.prototype.getCloneNode=function(t){var e={};return e.checkboxDisabled=t.checkboxDisabled,e.checked=t.checked,e.folder=t.folder,e.image=t.image,e.imageTitle=t.imageTitle,e.rendered=t.rendered,e.id=t.id,e.index=t.index,e.value=t.value,e.label=t.label,e.labelStyle=t.labelStyle,e},n.prototype.clearNode=function(t){t.element=null,t.parentNode=null,t.childNodes=[],delete this.hash_index_node[t.index]},n.prototype.changeNodeIndex=function(t,e){var i=this.hash_index_node[t];i.index=e,
delete this.hash_index_node[t],this.hash_index_node[e]=i,this.changeDomIndex("node",t,e,!0),this.changeDomIndex("checkbox",t,e),this.changeDomIndex("label",t,e),i.checkboxDom&&(i.checkboxDom=null,delete i.checkboxDom)},n.prototype.changeDomIndex=function(t,e,i,o){var r=document.getElementById(this.treeview.id+"_"+t+"_"+e);if(null!=r&&(r.setAttribute("id",this.treeview.id+"_"+t+"_"+i),o)){var a=s.D.getDataPrefix("index");r.setAttribute(a,i)}},n.prototype.getLastChildIndex=function(t){var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.size();for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i};var l=i(1656),h=i(2085),d=i(1960),c=i(6615),u=function(t,e,i){c.s.call(this,t,e,i)};o.x.extend(u.prototype,c.s.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.treeview",pluginName:"treeview",renderType:"virtual",userEvents:["onclick","ondblclick","onchange","onrightbuttonclick","ondrop","oncheckboxclick","onlabelclick","onlabelover","ontoggleclick","onviewchange","oneditend"],toggleEvent:"ondblclick",useConfig:!0,hierarchy:!1,refreshCheckboxModel:!1,refreshCheckboxDisableModel:!1,displayMode:"0",delimiter:"\t",folderOpenToggleImage:o.x._resourceURI+"uiplugin/treeview/images/plus.png",folderCloseToggleImage:o.x._resourceURI+"uiplugin/treeview/images/minus.png",leafToggleImage:o.x._resourceURI+"uiplugin/treeview/images/middle.gif",lastToggleImage:o.x._resourceURI+"uiplugin/treeview/images/last.gif",middleToggleImage:o.x._resourceURI+"uiplugin/treeview/images/middle.gif",labelclass:"",labelonClickClass:"treeview_select_node",labelForCheckbox:!1,title:"",escape:!0,rowHeight:20,useDrag:!1,accordion:!1,dynamicAppend:!1,dataType:"recursive",lineShow:!0,alwaysDraw:!1,showTreeDepth:0,showCheckbox:!1,trueValue:"true",falseValue:"false",checkAllChildNodes:!1,checkboxDisabled:"",checkboxDisabledTrueValue:"true",checkboxDisabledFalseValue:"false",checkboxDisabledAll:!1,scrollFix:!1,tooltipDisplay:!1,tooltipShowAlways:!1,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,redrawInterval:3,useHirarchySelect:!1},u.prototype.initialize=function(t){try{switch(this.inlineElement=!1,this.useDataCollection=!1,this.successBinding=!1,this.nativeScrollWidth=18,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.tree=new n,this.tree.treeview=this,this.selectedInfo={groupDom:null,dom:null,node:null},this.resizeObj={width:0,height:0},this.tree.setData(this._getDataObj(t)),this._request=null,this._expandedNodes=[this.tree.rootNode],this._items=[],1==this.options.accordion&&(this.options.showTreeDepth=0),this._setExpandedLevel(),this._arrowDownPressed=!1,this._arrowUpPressed=!1,this._forceRedraw=!1,this.isMobile=s.D.isMobile(),this.touchDelta={x:0,y:0},this.options.checkAllChildNodes=this.options.hierarchy,this.options.displayMode){case"0":case"1":case"2":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;default:this.options.displayMode="0"}this.tree.setDisplayMode(this.options.displayMode,this.options.delimiter),this.editModeComp=null,this.options=WebSquare.cssManager.styleToClass(this.id,this.options),1==this.options.showCheckbox&&(1==s.D.isOpera()?this.checkboxStyle="left:-1px;top:-1px":this.checkboxStyle="left:0px;top:0px"),this.options.useHirarchySelect&&(this.selectedInfoStack=[])}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.finalize=function(){null!=this.editModeComp&&WebSquare.idCache[this.editModeComp.uuid]&&this.editModeComp.remove(),this._request=null;for(var t=0,e=this._items.length;t<e;t++)this._items[t]=null;this._items=null;for(t=0,e=this.dom.length;t<e;t++)this.dom[t]=null;for(var i in this.dom=null,this.selectedInfo)this.selectedInfo.hasOwnProperty(i)&&(this.selectedInfo[i]=null)
;this.selectedInfo=null;for(t=0,e=this.tree.size();t<e;t++)this.tree.hash_index_node[t]=null;for(var i in this.tree)this.tree.hasOwnProperty(i)&&(this.tree[i]=null);this.tree=null,c.s.removeCheckResize(this.uuid),c.s.prototype.finalize.call(this)},u.prototype._getData=function(t,e,i){try{for(var o=[],s=0,r=t.length;s<r;s++){var a=[];a=this.tree.hash_index_node[t[s].parent].childNodes.slice(0),o.push({parent:t[s].parent,items:a.splice(t[s].offset,t[s].limit)})}this._setData(e,i,o)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._setData=function(t,e,i){for(var o=[],s=0,r=i.length;s<r;s++){for(var a=i[s],n=-1,l=0,h=o.length;l<h;l++)if(o[l].index===a.parent){n=l;break}o=n>-1?o.slice(0,n+1).concat(a.items).concat(o.slice(n+1)):a.items.concat(o)}this._items=o,this._redraw(o,t,e)},u.prototype._expandNode=function(t){t.expandedNodes||(t.expandedNodes=[]);var e=t.parentNode;e&&!t.isExpanded()&&(e.expandedNodes.push(t),e._isExpanded=!0)},u.prototype._collapseNode=function(t){var e=t.parentNode;if(e&&t.isExpanded()){for(var i=-1,o=0,s=e.expandedNodes.length;o<s;o++){var r=e.expandedNodes[o];if(t.index===r.index){i=o;break}}e.expandedNodes.splice(i,1),e._isExpanded=!1}},u.prototype.redraw=function(t,e){var i=this.render.clientHeight||parseInt(this.render.style.height,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"height"),10),o=Math.floor(i/this.options.rowHeight),s=Math.ceil(this.getElementById(this.id+"_scrollY_div").scrollTop/this.options.rowHeight);this._request=this._buildTree(s,o),this._getData(this._request,t,e),this._items.length>0&&(this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight})},u.prototype._buildTree=function(t,e){var i=[];this._sortAllExpandedNodes(this._expandedNodes),this._calculateExpandedNodes(this._expandedNodes,-1);var o=function(s,r){for(var a=0,n=s.length;a<n;a++){var l=s[a];if(g=t,m=t+e,f=l._start,b=l._end,f<g&&b<g||f>m&&b>m)t>l._end&&r&&(r.offset-=l._end-l._start+1);else{var h=Math.max(t,l._start),d=Math.min(t+e-1,l._end),c=Math.max(0,Math.min(d-h+1,e));if(r&&(r.limit-=c,t>l._start)){var u=l._end-l._start+1-c;u>0&&(r.offset-=u)}var p={parent:l.index,offset:t>l._start?t-l._start:0,limit:Math.min(c,e)};i.push(p),o(l.expandedNodes,p)}}var g,m,f,b};return o(this._expandedNodes),i},u.prototype._iterateAllExpandedNodes=function(t,e){try{for(var i=0,o=t.length;i<o;i++)e(t[i]),this._iterateAllExpandedNodes(t[i].expandedNodes,e)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._findExpandedNodeByIndex=function(t){var e=null;return this._iterateAllExpandedNodes(this._expandedNodes,(function(i){i.index===t&&(e=i)})),e},u.prototype._sortAllExpandedNodes=function(t){try{t.sort((function(t,e){return t.depthIndex-e.depthIndex}));for(var e=0;e<t.length;e++)this._sortAllExpandedNodes(t[e].expandedNodes)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._calculateExpandedNodes=function(t,e){try{for(var i=0;i<t.length;i++){var o,s=t[i],r=t[i-1];o=r?r._end+1+(s.depthIndex-r.depthIndex):e+s.depthIndex+1,s._start=o;var a=s.childNodes.length;this._iterateAllExpandedNodes(s.expandedNodes,(function(t){a+=t.childNodes.length})),s._end=s._start+a-1,this._calculateExpandedNodes(s.expandedNodes,s._start)}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._setExpandedLevel=function(){try{var t=0,e=null;if(1==this.options.alwaysDraw)for(t=0;t<this.tree.size();t++)e=this.tree.hash_index_node[t],this._expandNode(e);else for(t=0;t<this.tree.size();t++)(e=this.tree.hash_index_node[t]).depth<this.options.showTreeDepth&&this._expandNode(e)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=[],e=this.nativeScrollWidth+"px",i=""==this.options.style?"":"style='"+this.options.style+"'",o="style='right:"+e+";'",s="style='right:"+e+"; height:"+e+";'",r="style='width:"+e+";'";return t.push("<div id='"+this.id+"' tabindex='0'"+i+" class='w2treeview_virtual "+this.options.className+"'>"),
t.push("  <div id='"+this.id+"_main_div' "+o+" class='w2treeview_virtual_main_div' >"),t.push("  </div>"),t.push("  <div id='"+this.id+"_scrollX_div' "+s+" class='w2treeview_virtual_scrollX_div'>"),t.push("      <div id='"+this.id+"_scrollX_scrollbar' style='width:1px; height:1px; visibility:hidden;'></div>"),t.push("  </div>"),t.push("  <div id='"+this.id+"_scrollY_div' "+r+" class='w2treeview_virtual_scrollY_div' >"),t.push("      <div id='"+this.id+"_scrollY_scrollbar' style='width:1px; height:1px; visibility:hidden;'></div>"),t.push("  </div>"),t.push("</div>"),t.join("")}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.dom[this.id+"_main_div"]=document.getElementById(this.id+"_main_div"),this.dom[this.id+"_scrollX_div"]=document.getElementById(this.id+"_scrollX_div"),this.dom[this.id+"_scrollX_scrollbar"]=document.getElementById(this.id+"_scrollX_scrollbar"),this.dom[this.id+"_scrollY_div"]=document.getElementById(this.id+"_scrollY_div"),this.dom[this.id+"_scrollY_scrollbar"]=document.getElementById(this.id+"_scrollY_scrollbar"),this.tree.rootNode?this.redraw(!0):this._updateScroll(),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.isMobile||(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener2(this.dom[this.id+"_main_div"],"onmousewheel",this.handleMouseWheelEvent,this)),this.event.addListener(this.render,"onselectstart",(function(t){d.B.stopEvent(t)})),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,this.handleContextmenuEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.activateDrag)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener2(this.dom[this.id+"_scrollX_div"],"onscroll",this.handleScrollXEvent,this),this.event.addListener2(this.dom[this.id+"_scrollY_div"],"onscroll",this.handleScrollYEvent,this),this.refreshStop=!1,this.useDataCollection)this.modelControl.getDataComp().bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck));c.s.addCheckResize(this.uuid,"checkResize")}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._redraw=function(t,e,i){try{for(var o=[],s=0,r=t.length;s<r;s++)o.push(this.nodeToHTML(t[s]));if(document.getElementById(this.id+"_main_div").innerHTML=o.join(""),1==e){var a=0;this._forceRedraw=!0,this._iterateAllExpandedNodes(this._expandedNodes,(function(t){a+=t.childNodes.length})),this._updateScroll(a)}i&&i.call(this)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._getNativeScrollWidth=function(){var t=document.createElement("div");t.style="overflow-y:scroll; visibility:hidden; width:100px;",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=100-e.offsetWidth;return document.body.removeChild(t),i},u.prototype._updateScroll=function(t){var e=this.getElementById(this.id+"_main_div"),i=this.getElementById(this.id+"_scrollY_div"),o=this.getElementById(this.id+"_scrollX_div"),s=this.getElementById(this.id+"_scrollY_scrollbar"),r=this.getElementById(this.id+"_scrollX_scrollbar"),a=e.clientWidth,n=e.scrollWidth,l=t>=Math.floor(e.offsetHeight/this.options.rowHeight),h=a<n;i.style.visibility=l?"visible":"hidden",e.style.right=l?this.nativeScrollWidth+"px":0,o.style.visibility=h?"visible":"hidden",o.style.right=l?this.nativeScrollWidth+"px":0;var d=h?t*this.options.rowHeight+this.nativeScrollWidth:t*this.options.rowHeight,c=l?n+this.nativeScrollWidth:n;s.style.height=d+"px",r.style.width=c+"px"},u.prototype.expandNode=function(t,e){try{var i=null
;if(i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t),this._expandNode(i),e)for(var o=0,s=i.childNodes.length;o<s;o++)this.expandNode(i.childNodes[o].index,e);this.redraw(!0)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.collapseNode=function(t,e){try{var i=null;if(i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t),this._collapseNode(i),e)for(var o=0,s=i.childNodes.length;o<s;o++)this.collapseNode(i.childNodes[o].index,e);this.redraw(!0)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.findNodeByValue=function(t,e){try{var i=this.tree.findNodeByValue(t);if(!0===e&&i){var o=i._nodePosition*this.options.rowHeight,s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,r=this.dom[this.id+"_scrollY_div"].scrollTop;return s<o?(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=o-s+parseInt(this.render.offsetHeight/2)):(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=0),this.selectNode(t,null),this.getSelectedNode()}return i}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.findNodeByIndex=function(t,e){try{if(!0===e){if(!this.tree.findNodeByIndex(t))return;var i=this.tree.IterateFindNodeByIndex(t)._nodePosition*this.options.rowHeight,o=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,s=this.dom[this.id+"_scrollY_div"].scrollTop;return o<i?(s+o<i||s>=i)&&(this.dom[this.id+"_scrollY_div"].scrollTop=i-o+parseInt(this.render.offsetHeight/2)):(s+o<i||s>=i)&&(this.dom[this.id+"_scrollY_div"].scrollTop=0),this.selectNode(null,t),this.getSelectedNode()}return this.tree.findNodeByIndex(t)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.toggleChild=function(t,e,i){try{var o;if(null==e&&(e=-1),null!=t&&(o=this.tree.findNodeByValue(t))&&(e=o.index),o=this.tree.findNodeByIndex(e),1==this.options.accordion)for(var s=o._ancestor,r=1,a=this.tree.size();r<a;r++)this.tree.hash_index_node[r]._ancestor!=s&&this._collapseNode(this.tree.hash_index_node[r]);switch(i){case!0:this._expandNode(o);break;case!1:this._collapseNode(o);break;default:o.isExpanded()?this._collapseNode(o):this._expandNode(o)}this.redraw(!0)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.appendData=function(t,e,i){try{if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),void 0===t||null==t||!e)return;i=void 0!==i&&i;var o=this.tree.findNodeByIndex(t);if(!i&&o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered)return;var s=null;"recursive"==this.options.dataType?s=this.tree.parseRecursiveToTree(e):"listed"==this.options.dataType&&(s=this.tree.parseListToTree(e)),this.tree.appendXML(s,t),0==t?(o.hasChild(),this.redraw()):o.childNodes.length>0&&(o.childNodes[0].rendered=!1,this.toggleChild(null,o.index,!0))}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.spanAll=function(t){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanAll API를 지원하지 않습니다.["+this.id+"]");var e=this.tree.size();if(1==t)for(var i=0;i<e;i++)this._expandNode(this.tree.hash_index_node[i]);else if(0==t)for(i=e-1;i>=0;i--)this.tree.hash_index_node[i].expandedNodes=[];this.redraw(!0)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.spanNode=function(t,e,i){try{return null==t&&null==e&&null==i?void 0:null==e&&null==i&&"object"==typeof t?this._spanNode(t):null==i&&"object"==typeof t&&"boolean"==typeof e?this._spanNode(t,e):this._spanNode({index:t,applyChildNodes:i},e)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._spanNode=function(t,e){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanNode API를 지원하지 않습니다.["+this.id+"]");var i=t.index,o=t.depth,s=t.applyChildNodes;if(0==i||i){var r=(d=this.findNodeByIndex(i)).childNodes;if(1==e){if(1==s)for(var a=0;a<r.length;a++)r[a].childNodes.length>0&&this.spanNode(r[a].index,e,s)}else if(0==e&&1==s)for(a=r.length-1;a>=0;a--)r[a].childNodes.length>0&&this.spanNode(r[a].index,e,s)
;this.toggleChild(null,i,e)}else if(0==o||o)for(var n=0,l=this.tree.nodeCount;n<l;n++){var d;if((d=this.tree.hash_index_node[n]).depth===o){if("boolean"==typeof s)for(var c=d.childNodes,u=(a=0,c.length);a<u;a++)c[a].childNodes.length>0&&this.spanNode(c[a].index,e,s);this.toggleChild(null,d.index,e)}}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.selectNode=function(t,e,i,o){try{i=void 0===i||i;var r=s.D.getBoolean(this.options.useHirarchySelect),a=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,n=null;if(null!=t?n=this.tree.findNodeByValue(t):null!=e&&(n=this.tree.findNodeByIndex(e)),this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor,""!=this.selectedInfo.node.image)){var l=this.selectedInfo.node,c=document.getElementById(this.id+"_icon_"+l.index),u=l.isExpanded()?l.expandedImage:l.image;c&&(c.style="background-image:url("+u+")")}if(r&&this.selectedInfoStack.length>0){for(var p=0;p<this.selectedInfoStack.length;p++){var g=this.selectedInfoStack[p];g.dom&&(this.removeClass(g.dom,this.options.labelonClickClass),g.dom.style.backgroundColor=g.org.background,g.dom.style.color=g.org.color)}this.selectedInfoStack=[]}if(null!=a&&null!=n?a.index!=n.index&&d.B.fireEvent(this,"onchange",a,n):(null==a&&null!=n||null!=a&&null==n)&&d.B.fireEvent(this,"onchange",a,n),this.selectedInfo.node=n,null!=this.selectedInfo.node&&i){for(var m=this.selectedInfo.node.parentNode,f=[];m;){e=m.index;f.push(e),m=m.parentNode}for(var p in f.reverse(),f)this._expandNode(this.findNodeByIndex(f[p]));this.redraw(!0)}if(this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.selectedInfo.groupDom=document.getElementById(this.id+"_node_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),""!=this.selectedInfo.node.image&&""!=this.selectedInfo.node.selectedImage){c=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);this.originalIconImage=c.style,c.style="background-image:url("+this.selectedInfo.node.selectedImage+")"}if(this.selectedInfo.dom){if(this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,r){for(m=this.selectedInfo.node;m;){var b=document.getElementById(this.id+"_label_"+m.index);this.selectedInfoStack.push({node:m,groupDom:document.getElementById(this.id+"_node_"+m.index),dom:b,org:{background:b?b.style.backgroundColor:null,color:b?b.style.color:null}}),this.selectedInfoStack[this.selectedInfoStack.length-1].dom&&(this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].dom,this.options.labelonClickClass),this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.backgroundColor="",this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.color=""),m=m.parentNode}this.selectedInfoStack.reverse()}this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color=""}if(!0!==o&&(this.options.scrollFix?this.render.focus():this.selectedInfo.groupDom&&(this.selectedInfo.groupDom.setAttribute("tabindex",0),this.selectedInfo.groupDom.focus(),this.selectedInfo.groupDom.setAttribute("tabindex",-1)),this.useDataCollection&&this.successBinding)){var y=this.modelControl.getDataComp();if(null!=this.selectedInfo.node){for(var v in y.refCompHash){var w=y.refCompHash[v];null!=w&&WebSquare.idCache[w.uuid]&&"input"==w.options.pluginName&&w.setValue(w.getValue())}y.setRowPosition(this.selectedInfo.node.index-1)}else y.setRowPosition(null)}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.selectNode1=function(t,e,i,o){try{if(null!=this.selectedInfo.node){var s=this.tree.getCloneNode(this.selectedInfo.node),r=s.index;if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node)if(r!=this.selectedInfo.node.index){var a={oldNode:s,
newNode:this.tree.getCloneNode(this.selectedInfo.node)};d.B.fireEvent(this,"onviewchange",a)}}else if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node){a={oldNode:{},newNode:this.tree.getCloneNode(this.selectedInfo.node)};d.B.fireEvent(this,"onviewchange",a)}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.isOpen=function(t){try{if(t>=this.tree.size()||t<1)return;return this.findNodeByIndex(t).isExpanded()}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getSelectedNode=function(){try{return this.selectedInfo?this.selectedInfo.node:null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getSelectedDom=function(){try{return this.selectedInfo?this.selectedInfo.dom:null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getSelectedLabel=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.label:""}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getSelectedValue=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.value:""}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.index:""}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getSelectedElement=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.element:null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.setLabelStyle=function(t,e,i,o){var s;"object"==typeof t&&"number"==typeof t.index?s=t:"number"==typeof t?s=this.tree.findNodeByIndex(t):"string"==typeof t&&(s=this.tree.findNodeByValue(t)),this._setLabelStyle(s,e,i,o)},u.prototype._setLabelStyle=function(t,e,i,o){if(null!=t){for(e in null==t.labelStyle&&(t.labelStyle={}),t.labelStyleStr="",t.labelStyle[e]=i,this.originalBackgroundColor=t.labelStyle["background-color"]||this.originalBackgroundColor,this.originalColor=t.labelStyle.color||this.originalColor,t.labelStyle)t.labelStyleStr+=e+":"+t.labelStyle[e]+";";if(t.rendered){var s=document.getElementById(this.id+"_label_"+t.index);if(s){for(var r="",a=0,n=e.length;a<n;a++)"-"===e.charAt(a)?(r+=e.charAt(a+1).capitalize(),a++):r+=e.charAt(a);s.style[r]=i}}if(!0===o)for(a=0,n=t.childNodes.length;a<n;a++){var l=t.childNodes[a];this._setLabelStyle(l,e,i,o)}}},u.prototype.disableCheckboxByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);o&&this.disableCheckbox(o,e,i)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.setLabelByIndex=function(t,e,i){this.setLabel(this.tree.findNodeByIndex(t),e,i)},u.prototype.setLabelByValue=function(t,e,i){this.setLabel(this.tree.findNodeByValue(t),e,i)},u.prototype.setLabel=function(t,e,i){try{if(t){var o=this.refreshStop;if(this.refreshStop=!0,this.useDataCollection||(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.label,e),WebSquare.xml.setValue(t.element,"label",e)),"function"==typeof this.tree.customFormatter){var s=this.tree.getCloneNode(t);e=this.tree.customFormatter.call(this,e,e,s)}if(t.label=e,t.orgLabel=e,t.rendered){var r=document.getElementById(this.id+"_label_"+t.index);r&&(r.innerHTML=e)}if(this.refreshStop=o,this.useDataCollection){var a=this.modelControl.getDataComp();null!=a&&a.setCellData(t.index-1,this.tree.dataPath.label,e,null,i)}}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.checkNode=function(t,e,i,o,s){try{var r=this.tree.findNodeByIndex(t);if(r.checked=e,1==this.options.refreshCheckboxModel){if(this.stopRefresh(!0),this.useDataCollection&&this.tree.checkbox.colID){var a=this.modelControl.getDataComp(),n=e?this.options.trueValue:this.options.falseValue;null!=a&&a.setCellData(t-1,this.tree.checkbox.colID,n,null,s)
}else 1==e?r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.trueValue):r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.falseValue);this.stopRefresh(!1)}if(!1!==i&&(1==i||1==this.options.hierarchy||1==this.options.checkAllChildNodes))for(var l=0,d=r.childNodes.length;l<d;l++){var c=r.childNodes[l];this.checkNode(c.index,e,!0,!1)}if(1==this.options.hierarchy&&this.partialSelection(r),!1!==o&&r.parentNode.parentNode&&1==this.options.hierarchy){var u=!0;for(l=0,d=r.parentNode.childNodes.length;l<d;l++){if(1!=(c=r.parentNode.childNodes[l]).checked){u=!1;break}}1==u?this.checkNode(r.parentNode.index,!0,!1):this.checkNode(r.parentNode.index,!1,!1)}this.redraw(!1)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.checkByIndex=function(t,e,i){try{var o=this.tree.findNodeByIndex(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.checkByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getCheckedNodeByType=function(t,e){try{"object"==typeof t&&null!=t||(t={});for(var i=[],o=this.tree.getNodeIterator({type:"bfs"});o.next();){var s=o.getNode();(1==s.checked||t.hierarchy&&1==s.partial&&!s.isRoot())&&(t.excludeRoot&&!s.isRoot()||!t.excludeRoot)&&i.push(s[e])}return i}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getCheckedValues=function(t){return this.getCheckedNodeByType(t,"value")},u.prototype.getCheckedLabels=function(t){return this.getCheckedNodeByType(t,"label")},u.prototype.getCheckedIndexes=function(t){return this.getCheckedNodeByType(t,"index")},u.prototype.getCheckedNodes=function(t){return this.getCheckedNodeByType(t,"element")},u.prototype.disableCheckbox=function(t,e,i){try{if(e=s.D.getBoolean(e),t.checkboxDisabled=e,1==this.options.refreshCheckboxDisableModel&&(this.stopRefresh(!0),1==e?null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledTrueValue):null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledFalseValue),this.stopRefresh(!1)),!0===i||!1===i)for(var o=0,r=t.childNodes.length;o<r;o++){var a=t.childNodes[o];this.disableCheckbox(a,e,i)}this.redraw(!1)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.partialSelection=function(t){try{var e=0,i=!1;if(0==t.childNodes.length)return;for(var o=0,s=t.childNodes.length;o<s;o++){var r=t.childNodes[o];1==r.checked?e++:1==r.partial&&(i=!0)}1==i||0<e&&e<t.childNodes.length?(t.partial=!0,this.addClass(t.checkboxDom,"treeview_partialselect")):(t.partial=!1,this.removeClass(t.checkboxDom,"treeview_partialselect"))}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getParentValue=function(t){try{var e="",i=this.tree.findNodeByValue(t);return i&&i.parentNode&&(e=i.parentNode.value),e}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getChildData=function(t){try{for(var e=this.tree.findNodeByValue(t),i=[],o=0,s=e.childNodes.length;o<s;o++)1==this.options.dynamicAppend||this.useDataCollection?i.push(e.childNodes[o].element):i.push(WebSquare.ModelUtil.findInstanceNode(e.childNodes[o].xpath));return i}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.setCustomFormatter=function(t){if("function"==typeof t){for(var e=this.tree.getNodeIterator();e.next();){var i=e.getNode();if(!i.isRoot()){var o=this.tree.getCloneNode(i),s=t.call(this,i.orgLabel,i.label,o)||i.label;if(i.label=s,i.rendered){var r=document.getElementById(this.id+"_label_"+i.index);r&&(r.firstChild.nodeValue=i.label)}}}e=null,this.tree.customFormatter=t}},u.prototype.appendNode=function(t,e){try{
if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),1==this.options.dynamicAppend){var i=t.childNodes?t.childNodes.length:0,o=e.parentNode,s=this.tree.parseNodeByNode(e,t.depth+1,i,t);t.appendChild(s),o.removeChild(e);for(var r=0,a=o.expandedNodes.length;r<a;r++){var n=o.expandedNodes[r];if(e.index===n.index){o.expandedNodes.splice(r,1);break}}for(r=0,a=t.childNodes.length;r<a;r++)this.tree.setRender(t.childNodes[r],!1);t.childNodes.length>0&&(t.childNodes[0].rendered=!1,t.expandedNodes.push(s),this.toggleChild(null,t.index,!0))}else t.appendChild(e),t.expandedNodes.push(e),this.toggleChild(null,t.index,!0)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.removeNode=function(t){try{if(!t)return;var e=t.parentNode;e&&(t.isExpanded()&&this._collapseNode(t),e.removeChild(t),this.redraw(!0))}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.removeNodeList=function(t){try{for(var e=0;e<t.length;e++)if(t[e]){var i=t[e].parentNode;i&&i.removeChild(t[e])}this.drawContents()}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.moveNode=function(t,e,i){try{if(!this.useDataCollection)return!1;if(t==e)return!1;if(t<e&&this.getLastChildIndex(t)>=e)return r.k.printLog("treeview moveNode : Invalid argument. [destIndex] must not be child of [srcIndex].["+this.id+"]"),!1;for(var o=this.modelControl.getDataComp(),s=t-1,a=e-1,n=this.findNodeByIndex(t),l=this.findNodeByIndex(e),d=this.getLastChildIndex(s+1)-1,c=[],u=this.tree.dataPath.depth,p=0,g=s;g<=d;g++){var m=o.getRowJSON(g);m[u]=i?Number(m[u])+(l.depth-n.depth+1):Number(m[u])+(l.depth-n.depth),"number"!==o.getColumnInfo(u).dataType&&(m[u]=m[u]+""),c.push(m),p++}this.stopRefresh(!0),o.removeRange(s,d),s<a&&(a+=s-d-1);var f=0;if(!i){var b=this.getLastChildIndex(e);f=b-e,e<=s&&b>=d&&(f-=p)}return o.insertJSON(a+1+f,c),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,a+2+f),!0}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.prototype.getLastChildIndex=function(t){try{var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.tree.nodeCount-1;for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.activateDrag=function(t){try{d.B.stopEvent(t);var e=s.D.getDataPrefix("index"),i=s.D.getDataPrefix("tdIndex");1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll();var o=this,r=this.event.getTargetIterator(t,this.render);if(r.element.id===this.id)return;for(var a=!1;r.next();)if((r.match("treeview_icon_open")||r.match("treeview_icon_close"))&&!0,r.match("treeview_virtual_label")&&!0,(r.match("treeview_icon_navi")||r.match("w2treeview_icon_navi_img"))&&(a=!0),r.match("treeview_virtual_node")){var n=r.getElement().getAttribute(e);if(null==n){r.stop();break}if("onmousedown"==this.options.toggleButtonEvent){var l=this.tree.findNodeByIndex(n);if(a&&!l.isLeaf()){this.toggleChild(null,n);var c=!!(l.childNodes&&l.childNodes[0]&&l.childNodes[0].rendered);this.inlineElement?d.B.fireEvent(this,"ontoggleclick",null,n,c):d.B.fireEvent(this,"ontoggleclick",l.element,n,c)}}if(1==this.options.useDrag){var u=this.tree.hash_index_node[n].label;WebSquare.dragdrop.gDragManager.activate(t,r.getElement(),{id:this.id+"_drag",className:"w2treeview_drag",contents:u,delay:15,dropClass:"treeview_virtual_node",dragoverClass:"treeview_label",applyMousePosition:!0,onDrop:function(t,r,a,n,l,h,c){if(t){var u=null,p={},g=null,m=null,f=null;for(p=r?new WebSquare.targetIterator(r,o.render):o.event.getTargetIterator(c);p.next();){if(p.match("w2treeview_virtual")){var b=p.getElement().id;s.D.getComponentById(b)&&(u=s.D.getComponentById(b)),p.stop()}if(p.match("w2grid")&&(g=p.getElement().id,p.stop()),!m&&p.match(null,null,"td")){var y=p.getElement();m=parseInt(y.getAttribute(i),10)}}
if(p=null,u&&!r&&(r=document.getElementById(u.id+"_node_0")),t&&r&&u){var v=t.getAttribute(e),w=r.getAttribute(e),S=o.tree.findNodeByIndex(v),C=u.tree.findNodeByIndex(w);d.B.fireEvent(u,"ondrop",S,C,o,u,c)}if(null!=g&&(f=(g=s.D.getComponentById(g)).getDataLength(),null!=m&&(f=g.rowIndex+parseInt(m/(g.oneRowDataLength+g.defaultColCnt)))),t&&g){v=parseInt(t.getAttribute(e),10)-1;if(o.useDataCollection)var _=o.modelControl.getDataComp();S=o.tree.findNodeByIndex(v+1);d.B.fireEvent(g,"ondropfromtree",{dataListId:_.id,fromRowIndex:v,toRowIndex:f,dragNode:S})}}},onDragover:function(t,i,r,a,n,l,h){if(t)if(i){for(var c=null,u=new WebSquare.targetIterator(i,o.render);u.next();)if(u.match("w2treeview")){var p=u.getElement().id;s.D.getComponentById(p)&&(c=s.D.getComponentById(p)),u.stop()}if(u=null,c){var g=t.getAttribute(e),m=i.getAttribute("id"),f=m.substring(m.lastIndexOf("_")+1,m.length),b=o.tree.findNodeByIndex(g),y=c.tree.findNodeByIndex(f);d.B.fireEvent(c,"ondragover",b,y,o,c,h)}}else d.B.fireEvent(o,"ondragleave",h)}})}r.stop()}r=null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getNextNode=function(t){for(var e=null,i=t.index,o=0,s=this._items.length;o<s;o++)if(this._items[o].index==i){e=this._items[o+1];break}return e},u.prototype.getPreviousNode=function(t){for(var e=null,i=t.index,o=0,s=this._items.length;o<s;o++)if(this._items[o].index==i){e=this._items[o-1];break}return e},u.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var r=l.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(r){var a=s.D.getGlobalFunction(r,o.scope_id),n=!0;if("function"==typeof a&&(n=a(o)),!n)return}}catch(t){h.w.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2treeview_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i})),1e3*this.options.tooltipTime)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":this.options.disabled=e,e?this.addClass(this.render,"w2treeview_disabled"):this.removeClass(this.render,"w2treeview_disabled")}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){t=s.D.getBoolean(t);var e=c.s.prototype.setDisabled.call(this,t);return this.disableCheckbox(this.tree.rootNode,t,!0),e},u.prototype.setEditMode=function(t,e){if(this.useDataCollection){var i=document.getElementById(this.id+"_label_"+t);if(null==this.editModeComp||null==this.editModeComp.render){if(!e){this.editModeComp=new WebSquare.uiplugin.input(this.id+"_input"),i.textContent="",this.editModeComp.writeTo(i),this.editModeComp.activate();var o=this.uuid;this.editModeComp.bind("onclick",(function(t){d.B.stopPropagation(t)})),this.editModeComp.bind("onblur",(function(){var t=WebSquare.idCache[o],e=t.modelControl.getDataComp(),i=this._oldValue,s=this.getValue();e.setCellData(this._index-1,t.tree.dataPath.label,s),t.appendChild(this),this.hide(),this.setValueNM(""),d.B.fireEvent(t,"oneditend",{oldValue:i,newValue:s,index:this._index})})),this.editModeComp.bind("onkeydown",(function(t){d.B.stopPropagation(t)}))}}else i.textContent="",this.editModeComp.show(),
i.appendChild(this.editModeComp.render);this.editModeComp._index=t,this.editModeComp.setVerticalAlign=function(){};var s=this.findNodeByIndex(t);s&&""!=s.label&&(this.editModeComp.setValueNM(s.label),this.editModeComp._oldValue=s.label),this.editModeComp.focus()}},u.prototype.handleClickEvent=function(t){try{for(var e=!1,i=!1,o=!1,r=s.D.getDataPrefix("index"),a=s.D.getDataPrefix("value"),n=this.event.getTargetIterator(t,this.render);n.next();)if((n.match("treeview_icon_open")||n.match("treeview_icon_close"))&&(e=!0),n.match("treeview_checkbox")&&(o=!0),n.match("treeview_label")&&(i=!0),n.match("treeview_virtual_node")){var c=n.getElement().getAttribute(r),u=n.getElement().getAttribute(a),p=this.tree.findNodeByIndex(c);if(e&&"onmousedown"!==this.options.toggleButtonEvent){this.toggleChild(null,c);var g=p.childNodes&&p.childNodes[0]&&p.childNodes[0].rendered;this.inlineElement?d.B.fireEvent(this,"ontoggleclick",null,c,g):d.B.fireEvent(this,"ontoggleclick",p.element,c,g)}if(o&&!p.checkboxDisabled){var m=!p.checked;this.checkNode(c,m),this.inlineElement?d.B.fireEvent(this,"oncheckboxclick",u,null,c):1==this.options.dynamicAppend||this.useDataCollection?d.B.fireEvent(this,"oncheckboxclick",u,p.element,c):d.B.fireEvent(this,"oncheckboxclick",u,WebSquare.ModelUtil.findInstanceNode(p.xpath),c)}i&&("onclick"===this.options.toggleEvent&&this.toggleChild(null,c),this.inlineElement?d.B.fireEvent(this,"onlabelclick",u,null,c):d.B.fireEvent(this,"onlabelclick",u,p.element,c));var f=l.v.getConfiguration("/WebSquare/treeview/useClickEventToggleButton/@value"),b=s.D.getBoolean(this.options.noFocusOnIconLabelClick||l.v.getConfiguration("/WebSquare/treeview/noFocusOnIconLabelClick/@value"));(i||o||e&&"false"!=f)&&(this.selectNode1(null,c,!1,b),d.B.fireEvent(this,"onclick")),n.stop()}n=null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.handleToggleEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("treeview_label")&&(e=!0),e&&i.match("treeview_virtual_node")){var o=s.D.getDataPrefix("index"),r=i.getElement().getAttribute(o);this.toggleChild(null,r),i.stop()}i=null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.handleScrollXEvent=function(t){var e=this.dom[this.id+"_scrollX_div"].scrollLeft,i=e-this.oldScrollLeft;this.dom[this.id+"_main_div"].scrollLeft+=i,this.oldScrollLeft=e,d.B.stopEvent(t)},u.prototype.handleScrollYEvent=function(t){var e=this,i=function(){if(e._arrowDownPressed){var t=e.getNextNode(e.selectedInfo.node);t||(t=e.selectedInfo.node),e.selectNode1(null,t.index,!1,!1),e._arrowDownPressed=!1,e=null}else if(e._arrowUpPressed){var i=e.getPreviousNode(e.selectedInfo.node);i||(i=e.selectedInfo.node),e.selectNode1(null,i.index,!1,!1),e._arrowUpPressed=!1,e=null}else if(e.selectedInfo.node){for(var o=0;o<e._items.length;o++)if(e._items[o]==e.selectedInfo.node){e.selectNode1(null,e.selectedInfo.node.index,!1,!1);break}e=null}};this.options.redrawInterval>0?(l.v.clearTimer(this.id+"_redraw"),l.v.setTimer((function(){e.redraw(!1,i)}),{key:this.id+"_redraw",caller:this,delay:this.options.redrawInterval})):(0==this.options.redrawInterval||this._forceRedraw)&&(this.redraw(!1,i),this._forceRedraw=!1),d.B.stopEvent(t)},u.prototype.handleMouseWheelEvent=function(t){var e,i=t||window.event,o=i.detail,s=i.wheelDelta,r=1;o=(o=o?s&&(r=s/o)?o/r:-o/1.35:s/120)<1?o<-1?(-Math.pow(o,2)-224)/225:o:(Math.pow(o,2)+224)/225,e=t.deltaY?t.deltaY:-180*Math.min(Math.max(o/2,-1),1),this.dom[this.id+"_scrollY_div"].scrollTop+=e,d.B.stopEvent(t)},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=0,o=s.D.getDataPrefix("index");this.selectedInfo.node?(this.selectedInfo.groupDom,i=this.selectedInfo.node.index):i=(t.srcElement||t.target).getAttribute(o);var r=this.tree.findNodeByIndex(i);if(37===e||39===e||13===e){var a=37!==e;13===e?this.toggleChild(null,i,null):this.toggleChild(null,i,a);var n=this;this.redraw(!1,(function(){
n.selectNode1(null,n.selectedInfo.node.index,!1,!1)}));var l=!!(r.childNodes&&r.childNodes[0]&&r.childNodes[0].rendered);this.inlineElement?d.B.fireEvent(this,"ontoggleclick",null,i,l):d.B.fireEvent(this,"ontoggleclick",r.element,i,l),d.B.stopEvent(t)}else if(38===e){if(this.options.scrollFix)return void(this.dom[this.id+"_scrollY_div"].scrollTop-=1.5*this.options.rowHeight);var c=null;0==i?(i=1,c=this.tree.findNodeByIndex(i)):c=this.getPreviousNode(r),c?c.index&&this.selectNode1(null,c.index,!1):(this.dom[this.id+"_scrollY_div"].scrollTop-=2*this.options.rowHeight,this._arrowUpPressed=!0),d.B.stopEvent(t)}else if(40===e){if(this.options.scrollFix)return void(this.dom[this.id+"_scrollY_div"].scrollTop+=1.5*this.options.rowHeight);c=null;0==i?(i=1,c=this.tree.findNodeByIndex(i)):c=this.getNextNode(r),c?c.index&&this.selectNode1(null,c.index,!1):(this.dom[this.id+"_scrollY_div"].scrollTop+=2*this.options.rowHeight,this._arrowDownPressed=!0),d.B.stopEvent(t)}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.handleDblclickEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("treeview_label")&&(e=!0),e&&i.match("treeview_virtual_node")){var o=s.D.getDataPrefix("index"),r=i.getElement().getAttribute(o);e&&("ondblclick"!==this.options.toggleEvent&&""!==this.options.toggleEvent||this.toggleChild(null,r)),d.B.fireEvent(this,"ondblclick"),i.stop()}i=null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{d.B.stopEvent(t);for(var e=s.D.getDataPrefix("index"),i=s.D.getDataPrefix("value"),o=this.event.getTargetIterator(t,this.render);o.next();)if(o.match("treeview_label")){if(this.addClass(o.getElement(),"treeview_over"),this.options.tooltipDisplay||this.options.tooltipShowAlways){var r=o.getElement(),a=WebSquare.style.getAbsoluteLeft(r),n=WebSquare.style.getAbsoluteTop(r),l=r.firstChild.nodeValue,c=WebSquare.style.getAbsoluteLeft(this.render),u=!1;if(this.options.tooltipDisplay)if(a+r.offsetWidth>c+this.render.clientWidth+this.render.scrollLeft)u=!0;else if(s.D.isIEAllVersion()&&!s.D.isIE(6)&&!s.D.isIE(7)){var p=r.style.display;r.style.display="block",r.clientWidth<r.scrollWidth&&(u=!0),r.style.display=p}if(u||this.options.tooltipShowAlways){var g=s.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);if(g&&"function"==typeof g){for(var m=new WebSquare.targetIterator(r,this.render),f=-1;m.next();)m.match("treeview_virtual_node")&&(f=m.getElement().getAttribute(e),m.stop());m=null;try{l=g(l,f,!!u||r.offsetWidth<r.scrollWidth)}catch(t){h.w.printStackTrace(t,null,this)}}""!=l&&this.showTooltip(a,n,l)}}m=new WebSquare.targetIterator(o.getElement(),this.render),f=-1;for(var b="",y=null;m.next();)m.match("treeview_virtual_node")&&(f=m.getElement().getAttribute(e),b=m.getElement().getAttribute(i),y=this.tree.findNodeByIndex(f),m.stop());m=null,d.B.fireEvent(this,"onlabelover",f,y.element,b)}o=null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{d.B.stopEvent(t),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("treeview_label")&&this.removeClass(e.getElement(),"treeview_over");e=null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.handleContextmenuEvent=function(t){try{d.B.stopEvent(t);for(var e=!1,i=!1,o=!1,r=!1,a=s.D.getDataPrefix("index"),n=this.event.getTargetIterator(t,this.render);n.next();){if(n.match("treeview_label")&&(r=!0),n.match("treeview_icon_navi")&&(e=!0),n.match("treeview_icon_label")&&(i=!0),n.match("treeview_checkbox")&&(o=!0),n.match("treeview_virtual_node")){var l=n.getElement().getAttribute(a);if(e&&this.toggleChild(null,l),o){var c=document.getElementById(this.id+"_checkbox_"+l).checked;this.checkNode(l,c)}(r||o||i)&&(this.selectNode1(null,l),d.B.fireEvent(this,"onrightbuttonclick",this.findNodeByIndex(l),d.B.getMouseX(t),d.B.getMouseY(t))),n.stop()}
n.match("w2treeview_virtual")&&0===this.tree.nodeCount&&(d.B.fireEvent(this,"onrightbuttonclick",null,d.B.getMouseX(t),d.B.getMouseY(t)),n.stop())}n=null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.nodeToHTML=function(t){if(!t)return"";t.rendered=!0;var e=[],i="",o="",r="",a="",n="",l="",h="",d="",c="";if(this.options.customFormatter&&(this.tree.customFormatter=s.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var u=this.tree.getCloneNode(t),p=this.tree.customFormatter.call(this,t.orgLabel,t.label,u)||t.label;d=this.options.escape?WebSquare.xml._encode(t.label):p,c=this.options.escape?WebSquare.xml._encode(t.value):t.value}else d=this.options.escape?WebSquare.xml._encode(t.label):t.label,c=this.options.escape?WebSquare.xml._encode(t.value):t.value;if(t.hasChild()){var g=t.isExpanded();i=g?"opened":"closed",o=g?"treeview_icon_close":"treeview_icon_open",r=g?"background: url("+this.options.folderCloseToggleImage+") no-repeat center center":"background: url("+this.options.folderOpenToggleImage+") no-repeat center center";var m=t.parentNode.childNodes;m&&m[m.length-1]==t&&(i+=" lastParentSibling")}else i="leaf",o=this.options.lineShow?t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?"treeview_root_single_leaf":"treeview_root_multi_leaf":t.isLastChild()?"treeview_last_sibling":"treeview_leaf":"";var f=s.D.getDataPrefix("index"),b=s.D.getDataPrefix("value"),y=s.D.getDataPrefix("depth");i+=" w2tree_depth_"+t.depth,e.push("<div id='"+this.id+"_node_"+t.index+"' tabindex='-1' class='treeview_virtual_node "+i+"' "+f+"='"+t.index+"' "+b+"='"+c+"' "+y+"='"+t.depth+"' style='height:"+this.options.rowHeight+"px;'>");var v=!1,w=[];if(this.options.lineShow)if(t._ancestor){n="treeview_guideline",l="width: 16px;";var S=this.tree.hash_index_node[t._ancestor],C=t;for(v=!0,S.isLastChild()&&w.push(!1);C!=S;)w[C.depth-1]=!C.isLastChild(),C=C.parentNode}else n="treeview_no_guideline",l="width:"+16*(t.depth-1)+"px;";else n="treeview_no_guideline",l="width:"+16*(t.depth-1)+"px;";if(v)for(var _=0;_<t.depth-1;_++)n=0==w[_]?"treeview_no_guideline":"treeview_guideline",e.push("<span class='"+n+"' style='"+l+"'> </span>");else e.push("<span class='"+n+"' style='"+l+"'> </span>");if(e.push("<span class='treeview_icon_navi "+o+"' style='"+r+"'></span>"),""!=t.image){var x=t.isExpanded()?t.expandedImage:t.image,I=t.imageTitle?"title='"+t.imageTitle+"'":"";e.push("<span id='"+this.id+"_icon_"+t.index+"' class='treeview_icon_label'"+I+" style='background-image:url("+x+")'></span>")}if(1==this.options.showCheckbox){var T=t.checked||t.partial?"checked='true' ":"",k=t.checkboxDisabled?"disabled='true' ":"",D=t.partial?"treeview_partialselect":"";!0===this.options.labelForCheckbox&&(h="for='"+this.id+"_checkbox_"+t.index+"'"),e.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' "+T+k+" id='"+this.id+"_checkbox_"+t.index+"' class='treeview_checkbox "+D+"' />")}return t.labelStyleStr&&(a=t.labelStyleStr),e.push("<label "+h+" class='treeview_label "+this.options.labelclass+"' tabindex='-1' style='"+a+"' id='"+this.id+"_label_"+t.index+"'>"+d+"</label>"),e.push("</div>"),e.join("")},u.prototype.isLeaf=function(){try{return!this.selectedInfo||!this.selectedInfo.node||!this.selectedInfo.node.hasChild()}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype._getDataObj=function(t){if(t){var e=WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(e.nodeset,e.label,e.value),0==this.options.modelBinding&&(this.options.refreshCheckboxModel=!1,this.options.refreshCheckboxDisableModel=!1);var i={type:"",data:null},o=null,s=WebSquare.Elem.api.getElementsByTagName(t,"itemset",l.v._XML_NAMESPACE.W2)[0];if(s){var r=WebSquare.Elem.api.getValue(s,"@nodeset");this.useDataCollection=r.match("data:");var a=r.replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);a&&(a=a[0])
;var n=WebSquare.Elem.api.getElementsByTagName(s,"label",l.v._XML_NAMESPACE.W2)[0],h=WebSquare.Elem.api.getElementsByTagName(s,"value",l.v._XML_NAMESPACE.W2)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"depth",l.v._XML_NAMESPACE.W2)[0],c=WebSquare.Elem.api.getElementsByTagName(s,"folder",l.v._XML_NAMESPACE.W2)[0],u=null==n?"":n.getAttribute("ref"),p=null==h?"":h.getAttribute("ref"),g=null==d?"":d.getAttribute("ref"),m=null==c?"":c.getAttribute("ref"),f={image:"image",iconImage:"iconImage",selectedImage:"selectedImage",expandedImage:"expandedImage",leafImage:"leafImage",checkboxDisabled:"checkboxDisabled",imageTitle:"imageTitle",checkbox:"checkbox"};for(var b in f){var y=WebSquare.Elem.api.getElementsByTagName(s,""+b,l.v._XML_NAMESPACE.W2)[0];f[b]=null==y?"":y.getAttribute("ref")}var v=f.checkbox;this.useDataCollection&&this.tree.setDataPath(u,p,g,a,m,v);var w=f.image,S=f.iconImage,C=f.selectedImage,_=f.expandedImage,x=f.leafImage,I=f.checkboxDisabled,T=f.imageTitle;v=f.checkbox;if(w=""!=this.options.defaultImage?this.options.defaultImage:w,S=""!=this.options.iconImage?this.options.iconImage:S,C=""!=this.options.selectedImage?this.options.selectedImage:C,_=""!=this.options.expandedImage?this.options.expandedImage:_,x=""!=this.options.leafImage?this.options.leafImage:x,I=""!=this.options.checkboxDisabled?this.options.checkboxDisabled:I,this.tree.setXPath(r,u,p,g,a,m),this.tree.setCheckbox(v,this.options.trueValue,this.options.falseValue,I,this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy,f.checkbox),this.tree.setImage(w,S,x,C,_,T),this.useDataCollection)this.modelControl.getDataCollectionItemsetData(this.modelControl.id),null!=(o=this.modelControl.getDataComp())&&(i.type="dataList",i.data=o.id,this.successBinding=!0);else{var k=WebSquare.ModelUtil.findInstanceNodes(r,null,this.scope_id),D=null;null!=k&&("recursive"==this.options.dataType?D=this.tree.parseRecursiveToTree(k):"listed"==this.options.dataType&&(D=this.tree.parseListToTreeInstance(k))),i.type="xmlInstance",i.data=D,this.tree.isInstance=!0}}else{this.inlineElement=!0;w="w2:image",S="w2:iconImage",C="w2:selectedImage",_="w2:expandedImage",x="w2:leafImage";w=""!=this.options.defaultImage?this.options.defaultImage:w,S=""!=this.options.iconImage?this.options.iconImage:S,C=""!=this.options.selectedImage?this.options.selectedImage:C,_=""!=this.options.expandedImage?this.options.expandedImage:_,x=""!=this.options.leafImage?this.options.leafImage:x,this.tree.setImage(w,S,x,C,_,"w2:imageTitle"),this.tree.setCheckbox("w2:checkbox",this.options.trueValue,this.options.falseValue,"w2:checkboxDisabled",this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy),i.type="inlineXML",i.data=t}return i}},u.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded()&&!this.refreshStop){this.refreshStop=!0,this._expandedNodes=[];var e=this.tree.getNodeset(),i=!1;if(this.useDataCollection){var o;if(null!=(o=this.modelControl.getDataComp())){if(!this.successBinding){var s=(e=o.options.baseNode+"/"+o.options.repeatNode).replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);s&&(s=s[0]),this.tree.valueAttribute=o.options.valueAttribute?o.options.valueAttribute:"";var r=this.tree.dataPath.label,a=this.tree.dataPath.value,n=this.tree.dataPath.depth,l=this.tree.dataPath.folder,d=this.tree.dataPath.checkbox;this.tree.setDataPath(r,a,n,s,l,d),this.successBinding=!0,i=!0}this.tree.setData({type:"dataList",data:o.id})}}else{var c=WebSquare.ModelUtil.findInstanceNodes(e,null,this.scope_id),u=null
;null!=c&&("recursive"==this.options.dataType?u=this.tree.parseRecursiveToTree(c):"listed"==this.options.dataType&&(u=1==this.tree.isInstance?this.tree.parseListToTreeInstance(c):this.tree.parseListToTree(c))),this.tree.setData({type:"xmlInstance",data:u})}if(this._expandedNodes.push(this.tree.rootNode),this._setExpandedLevel(),i)if(t&&!0===t.setNodeSet){if(this.redraw(!0),this.useDataCollection)(o=this.modelControl.getDataComp()).bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}else this.setAction(),this.refreshStop=!0;else this.redraw(!0);if(this.useDataCollection)null!=(o=this.modelControl.getDataComp())&&o.getRowPosition();this.refreshStop=!1}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.refreshItemArr=function(){},u.prototype.setNodeSet=function(t,e){try{var i=e||{},o=t;if(t.indexOf("data:")>=0&&(o=t.replaceAll("data:","")),this.modelControl.getDataComp(o)){for(var s in this.useDataCollection=t.match("data:"),this.modelControl.unbindItemset(),this.modelControl.setItemset("data:"+o,i.label,i.value),this.modelControl.dataCollectionBindItemset(),this.modelControl.getDataCollectionItemsetData(this.modelControl.id),e)this.tree.dataPath[s]=e[s],"checkbox"===s&&(this.tree.checkbox.colID=e[s]);this.successBinding=!1,this.refreshItemset({setNodeSet:!0})}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.stopRefresh=function(t){try{this.refreshStop=s.D.getBoolean(t)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifyValidCheck=function(t){try{if(t.colID===this.tree.dataPath.depth){var e=this.findNodeByIndex(t.rowIndex+1);if(t.newValue<1)throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be greater than 0."};if(t.oldValue&&t.newValue>t.oldValue&&e.isFirstChild())throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be less than "+(t.oldValue+1)}}return!0}catch(t){return h.w.printStackTrace(t,null,this),!1}},u.prototype.notifyInvalid=function(){},u.prototype.notifySetCellData=function(t,e,i,o){try{if(this.refreshStop||parseInt(o,10)===parseInt(i,10))return;if(e===this.tree.dataPath.label)this.setLabelByIndex(t+1,i,!0);else if(e===this.tree.dataPath.checkbox)i==this.options.trueValue?this.checkNode(t+1,!0):i==this.options.falseValue&&this.checkNode(t+1,!1);else if(e===this.tree.dataPath.depth){if(Math.abs(i-o)>1)return void this.refreshItemset();this.stopRefresh(!0),this.notifyDepthChanged(t+1,i,o),this.stopRefresh(!1);var s=this.findNodeByIndex(t+1);s.parentNode===this.tree.rootNode?this.redraw():this.toggleChild(null,s.parentNode.index,!0)}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifyDepthChanged=function(t,e,i){try{var o=this.findNodeByIndex(t),s=this.modelControl.getDataComp();if(e>i){var r=(d=o.parentNode).childNodes[o.depthIndex-2],a=o.childNodes.splice(0,o.childNodes.length);d.childNodes.splice(o.depthIndex-1,1),o.parentNode=r,r.childNodes.push(o),o.depthIndex=r.childNodes.length,r.rendered=!1,o.rendered=!1;for(var n=0;n<a.length;n++)a[n].parentNode=r,r.childNodes.push(a[n]),a[n].depthIndex=r.childNodes.length,a[n].rendered=!1;d.childNodes[0].rendered=!1}else{if(o.hasChild())for(n=o.childNodes.length-1;n>=0;n--){var l=o.childNodes[n];s.setCellData(l.index-1,this.tree.dataPath.depth,l.depth-1),this.notifyDepthChanged(l.index,l.depth-1,l.depth)}var d,c=(d=o.parentNode).parentNode;if(o.depthIndex<d.childNodes.length){var u=d.childNodes.splice(o.depthIndex,d.childNodes.length-o.depthIndex);for(n=0;n<u.length;n++)u[n].parentNode=o,o.childNodes.push(u[n]),u[n].depthIndex=o.childNodes.length,u[n].rendered=!1}d.childNodes.splice(d.childNodes.length-1,1),o.parentNode=c,c.childNodes.splice(d.depthIndex,0,o);for(n=d.depthIndex;n<c.childNodes.length;n++)c.childNodes[n].depthIndex=n+1;c.childNodes[0].rendered=!1}o.depth=e,o.element.setAttribute(s.options.valueAttribute,e)}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifyInsertRow=function(t){try{
if(this.refreshStop)return;var e=this.modelControl.getDataComp(),i=this.findNodeByIndex(t),o=new a;o.index=t+1,o.depthIndex=1,o.depth=i.depth+1,o.rendered=!1,o.parentNode=i;for(var s=e.getRowCount();s>=t+2;s--)this.tree.changeNodeIndex(s-1,s);this.tree.hash_index_node[t+1]=o,e.setCellData(t,this.tree.dataPath.depth,i.depth+1,null,!0);var r=e.getRowJSON(t),n={T:1,N:"data",A:{index:""+t},E:[]};for(var l in r){var d={T:1,N:l,parent:n};""!=r[l]&&(d.E=[],d.E.push({T:3,text:""+r[l]})),n.E.push(d)}o.element=new WebSquare.Elem(n),i.childNodes.unshift(o);for(s=0;s<i.childNodes.length;s++)i.childNodes[s].depthIndex=s+1;this.toggleChild(null,t,!0),this.tree.nodeCount=e.getRowCount()+1}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifyBeforeSetRowData=function(t,e){try{if(this.refreshStop)return;var i=this.modelControl.getDataComp();this.beforeSetRowData=e?{depth:i.getCellData(t,this.tree.dataPath.depth),label:i.getCellData(t,this.tree.dataPath.label),checkbox:i.getCellData(t,this.tree.dataPath.checkbox),overwrite:e}:{depth:Number(i.getCellData(t-1,this.tree.dataPath.depth))+1,label:"",checkbox:"",overwrite:e}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifySetRowData=function(t){try{if(this.refreshStop)return;var e,i=(e=this.modelControl.getDataComp()).getCellData(t,this.tree.dataPath.depth),o=e.getCellData(t,this.tree.dataPath.label),s=e.getCellData(t,this.tree.dataPath.checkbox);if(i!=this.beforeSetRowData.depth)if(this.notifyValidCheck({colID:this.tree.dataPath.depth,oldValue:this.beforeSetRowData.depth,newValue:i}))this.notifySetCellData(t,this.tree.dataPath.depth,i,this.beforeSetRowData.depth);else(e=this.modelControl.getDataComp()).setCellData(t,this.tree.dataPath.depth,this.beforeSetRowData.depth);o!=this.beforeSetRowData.label&&this.notifySetCellData(t,this.tree.dataPath.label,o,this.beforeSetRowData.label),s!=this.beforeSetRowData.checkbox&&this.notifySetCellData(t,this.tree.dataPath.checkbox,s,this.beforeSetRowData.checkbox),this.beforeSetRowData={},this.tree.nodeCount=e.getRowCount()+1}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifyRemoveRow=function(t){try{if(this.refreshStop)return;var e=this.findNodeByIndex(t+1),i=e.parentNode,o=document.getElementById(this.id+"_group_"+e.index);if(o&&WebSquare.removeNode(o),this.stopRefresh(!0),this.notifyRemoveRow_allChildren(t),this.stopRefresh(!1),0==i.index)i._hasChild=i.folder?null:0!=i.childNodes.length,this.redraw();else{var s=this.findNodeByIndex(t);if(s&&!s.isRoot()){if(s.isLastChild()){var r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_last_sibling"),this.removeClass(r,"w2treeview_first_sibling"),s.isLeaf()&&this.addClass(r,"w2treeview_last_leaf")}else if(s.isFirstChild()){r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_first_sibling")}if(s.parentNode.isLastChild()){var a=document.getElementById(this.id+"_guideline_"+s.parentNode.index);this.removeClass(a,"w2treeview_guideline"),this.addClass(a,"w2treeview_noguideline")}}}var n=this.modelControl.getDataComp();this.tree.nodeCount=n.getRowCount()+1}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifyRemoveRow_allChildren=function(t){try{var e=this.findNodeByIndex(t+1),i=e.parentNode,o=this.modelControl.getDataComp(),s=t,r=o.getRowCount()+1,a=1;if(e.hasChild()){s=r-1;for(var n=e;!n.isRoot()&&n.depthIndex==n.parentNode.childNodes.length;)n=n.parentNode;n.isRoot()||n.depthIndex==n.parentNode.childNodes.length||(s=n.parentNode.childNodes[n.depthIndex].index-2);for(var l=[],d=t;d<s;d++)l.push(d),this.tree.clearNode(this.tree.findNodeByIndex(d+2)),a++;o.removeRows(l)}i.childNodes.splice(e.depthIndex-1,1);for(d=e.depthIndex-1;d<i.childNodes.length;d++)i.childNodes[d].depthIndex=d+1;this.tree.clearNode(e);for(d=s+2;d<=r;d++)this.tree.changeNodeIndex(d,d-a);this.tree.nodeCount=o.getRowCount()+1}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.notifyDataChanged=function(t){try{this.stopRefresh(!1),this.refreshItemset()
}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionItemsetBinded){var t={};return t.id=this.modelControl.dataCollectionItemsetInfo.dataComp.id,t.nodeset=this.modelControl.itemsetObj.nodeset,t.label=this.modelControl.itemsetObj.label,t.value=this.modelControl.itemsetObj.value,t}return null}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.deselectNode=function(){try{if(this.selectedInfo&&this.selectedInfo.node){var t=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,e=s.D.getBoolean(this.options.useHirarchySelect);if(this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),e&&this.selectedInfoStack.length>0){for(var i=0;i<this.selectedInfoStack.length;i++){var o=this.selectedInfoStack[i];o.dom&&(this.removeClass(o.dom,this.options.labelonClickClass),o.dom.style.backgroundColor=o.org.background,o.dom.style.color=o.org.color)}this.selectedInfoStack=[]}d.B.fireEvent(this,"onchange",t,null),this.selectedInfo={groupDom:null,dom:null,node:null}}}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.setShowCheckBox=function(t){try{this.options.showCheckbox!=t&&(this.options.showCheckbox=t,this.redraw(!0))}catch(t){h.w.printStackTrace(t,null,this)}},u.prototype.checkResize=function(){try{if(this.render){var t=this.render.offsetWidth,e=this.render.offsetHeight;if(this.resizeObj&&t>0&&e>0)if(0==this.resizeObj.width&&0==this.resizeObj.height)this.refreshItemset();else{var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.redraw(!0)}this.resizeObj={width:t,height:e}}}catch(t){h.w.printStackTrace(t,null,this)}}},309:(t,e,i)=>{i.r(e),i.d(e,{trigger:()=>l});var o=i(2981),s=i(2085),r=i(1960),a=i(3082),n=i(6615),l=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.trigger",pluginName:"trigger",userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onfocus","onblur","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove","onkeydown","onkeypress","onkeyup"],useConfig:!0,type:"button",leftOnImageClass:"w2trigger_left",centerOnImageClass:"w2trigger_center",rightOnImageClass:"w2trigger_right",leftOffImageClass:"w2trigger_left",centerOffImageClass:"w2trigger_center",rightOffImageClass:"w2trigger_right",singleClassMode:!1,localeRef:"",useLocale:!1,title:"",anchorWithGroupClass:!0,initStyle:!1,target:"",name:"",tooltipPositionX:"",tooltipPositionY:""},l.prototype.initialize=function(t){try{if(this.evented=!1,t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.value=e.value)}if(this.options.useLocale&&this.options.localeRef){var i=this.getLocaleValue(this.options.localeRef);i&&(this.options.value=i)}"w2trigger_left"!=this.options.leftOnImageClass&&"w2trigger_center"==this.options.centerOnImageClass&&"w2trigger_right"==this.options.rightOnImageClass&&(this.options.singleClassMode=!0);var o=this.options.initStyle;this.options=WebSquare.cssManager.styleToClass(this.id,this.options),this.options.initStyle=o||"",this.options.tooltipPositionX=this.options.tooltipShowPositionX||this.options.tooltipPositionX,this.options.tooltipPositionY=this.options.tooltipShowPositionY||this.options.tooltipPositionY}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=[],e=""==this.options.value.wq_replaceAll("'","&#39;")?"":"value ='"+this.options.value.wq_replaceAll("'","&#39;")+"'",i=""==this.options.title?"":"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'",o=""==this.options.style?"":"style='"+this.options.style+"'",r=""==this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'"
;if("button"==this.options.type.toLowerCase())t.push("<input type='button' "+r+" id='"+this.id+"' "+o+" class='w2trigger "+this.options.className+"' "+e+" "+i+"/>");else if("image"==this.options.type.toLowerCase())t.push("<table "+r+" role='button' id='"+this.id+"' "+o+" class='w2trigger w2trigger_table "+this.options.className+"' "+i+" onkeydown='if( event.keyCode == 32 || event.keyCode == 13 ) click();'>"),t.push("<tbody>"),t.push("<tr id='"+this.id+"_row'>"),1==this.options.singleClassMode?(t.push("<td id='"+this.id+"_left' class='w2trigger_col_left "+this.options.leftOffImageClass+"'></td>"),t.push("<td id='"+this.id+"_center' class='w2trigger_col_center w2trigger_label '>"+this.options.value+"</td>"),t.push("<td id='"+this.id+"_right' class='w2trigger_col_right '></td>")):(t.push("<td id='"+this.id+"_left' class='w2trigger_col_left "+this.options.leftOffImageClass+"'></td>"),t.push("<td id='"+this.id+"_center' class='w2trigger_col_center "+this.options.centerOffImageClass+" w2trigger_label '>"+this.options.value+"</td>"),t.push("<td id='"+this.id+"_right' class='w2trigger_col_right "+this.options.rightOffImageClass+"'></td>")),t.push("</tr>"),t.push("</tbody>"),t.push("</table>");else if("anchor"==this.options.type.toLowerCase()){var a=1==this.options.anchorWithGroupClass?"w2group":"",n=this.options.href?this.options.href:"javascript:void(null);",l=this.options.target?" target='"+this.options.target+"'":"",h=this.options.name?" name='"+this.options.name+"'":"";t.push("<a id='"+this.id+"' style='"+this.options.style+"' class='"+a+" w2trigger_anchor "+this.options.className+"' href='"+n+"' "+r+l+h+i+" >"),t.push("<span id='"+this.id+"_span' class='w2textbox '>"+this.options.value+"</span>"),t.push("</a>")}return t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if("image"==this.options.type.toLowerCase())this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent));else if("anchor"==this.options.type.toLowerCase()){this.dom.input=document.getElementById(this.id),document.getElementById(this.id+"_span").style.setProperty("line-height",this.dom.input.clientHeight+"px"),a.D.isIEAllVersion("6 7 8 9 10")&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,(function(t){this.options.href&&""!==this.options.href.wq_trim()||r.B.stopEvent(t)})))}else this.dom.input=document.getElementById(this.id);this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setLabel=function(t){try{if(!this.options.disabled)if(this.options.value=t,"button"==this.options.type.toLowerCase())this.dom.input.value=t;else if("anchor"==this.options.type.toLowerCase())this.dom.input.childNodes[0].innerHTML=t;else{this.getElementById(this.id+"_center").innerHTML=t}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setLabel(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getLabel=function(){try{return this.options.value}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.options.value}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setBackgroundImage=function(t){try{"button"==this.options.type&&((t=t.wq_trim()).startsWith("url")?this.render.style.backgroundImage=this.getURL(t):this.render.style.backgroundImage="url("+this.getURL(t)+")")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getBackgroundImage=function(){try{
return"button"==this.options.type?this.getStyle("background-image"):""}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getType=function(){try{return this.options.type}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onPropertyChange=function(t,e){try{var i="image"==this.options.type?this.getElementById(this.id+"_row"):this.render;switch(t){case"disabled":if(1==e||"disabled"==e)WebSquare.getBody().hideToolTip();"image"==this.options.type?1==e?(this.removeClass(i,"w2trigger_over"),this.addClass(i,"w2trigger_disabled")):this.removeClass(i,"w2trigger_disabled"):"anchor"==this.options.type.toLowerCase()?(i=this.getElementById(this.id+"_span"),1==e?(i.style.setProperty("color","#848684"),this.addClass(i,"w2trigger_disabled")):this.removeClass(i,"w2trigger_disabled")):1==e?this.addClass(i,"w2trigger_disabled"):this.removeClass(i,"w2trigger_disabled");break;case"readOnly":1==e?this.addClass(i,"w2trigger_readOnly"):this.removeClass(i,"w2trigger_readOnly")}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseoverEvent=function(){try{if(1==this.options.disabled)return;var t=this.getElementById(this.id+"_row");this.addClass(t,"w2trigger_over"),"image"==this.options.type&&(0==this.evented&&(this.evented=!0,this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent))),this.changeClass(this.getElementById(this.id+"_left"),this.options.leftOffImageClass,this.options.leftOnImageClass),0==this.options.singleClassMode&&(this.changeClass(this.getElementById(this.id+"_center"),this.options.centerOffImageClass,this.options.centerOnImageClass),this.changeClass(this.getElementById(this.id+"_right"),this.options.rightOffImageClass,this.options.rightOnImageClass)))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseoutEvent=function(){try{if(1==this.options.disabled)return;var t=this.getElementById(this.id+"_row");this.removeClass(t,"w2trigger_over"),this.removeClass(t,"w2trigger_press"),"image"==this.options.type&&(this.changeClass(this.getElementById(this.id+"_left"),this.options.leftOnImageClass,this.options.leftOffImageClass),0==this.options.singleClassMode&&(this.changeClass(this.getElementById(this.id+"_center"),this.options.centerOnImageClass,this.options.centerOffImageClass),this.changeClass(this.getElementById(this.id+"_right"),this.options.rightOnImageClass,this.options.rightOffImageClass)))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMousedownEvent=function(){try{var t=this.getElementById(this.id+"_row");this.addClass(t,"w2trigger_press")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseupEvent=function(){try{var t=this.getElementById(this.id+"_row");this.removeClass(t,"w2trigger_press")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{9==(t.charCode?t.charCode:t.keyCode)&&(this.tabOrderMoveStart=!1,t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=a.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=a.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){s.w.printStackTrace(t,null,this)}}},7003:(t,e,i)=>{i.r(e),i.d(e,{upload:()=>h})
;var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(6615),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={useConfig:!0,userEvents:["ondone","onInputValueChange"],pluginType:"uiplugin.upload",pluginName:"upload",className:"",imageStyle:"",inputStyle:"",imageClass:"",inputClass:"",type:"",action:"",imagewidth:"",imageheight:"",empty:6,subDir:"",subSize:"",title:"",accept:"",targetFrame:"body",useXHR:!1,clickOpenFileDialog:!1},h.prototype.initialize=function(t){try{var e=s.v.getConfiguration("/WebSquare/upload/type/@value");""==this.options.type&&""!=e?this.options.type=e:""==this.options.type&&(this.options.type="image"),this.type=this.options.type,this.style=this.options.style,this.className=this.options.className,this.imageStyle=this.options.imageStyle,this.imageClassName=this.options.imageClass,this.inputStyle=this.options.inputStyle,this.inputClassName=this.options.inputClass,this.imagewidth=this.options.imagewidth,this.imageheight=this.options.imageheight,this.empty=this.options.empty,this.inputClassName=this.options.inputClass,this.options.action?this.action=this.options.action:this.action=WebSquare.baseServletURI+"upload.wq?callbackFunction="+this.id+".callback",t&&(this.xmlEvents=WebSquare.Parser.parseEvent(t)),this.disabled=this.options.disabled,this._targetFrameId=""}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t=[],e=""==this.options.title?"":"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'",i=this.options.style,o=this.options.tabIndex?"tabIndex='"+this.options.tabIndex+"'":"";""!=i&&(i.indexOf("position")<0?i="position:relative;"+i:i.indexOf("position:static")>0&&(i=i.replace("position:static","position:relative"))),i=""==i?"":"style='"+i+"'";var s=""==this.action?"":"action='"+this.action+"'",a=""==this.inputStyle?"":"style='"+this.inputStyle+"'",n="style='"+(""==this.imagewidth?"":"width:"+this.imagewidth+"px;")+(""==this.imageheight?"":"height:"+this.imagewidth+"px;")+this.imageStyle+"'",l=""==this.options.accept?"":"accept='"+this.options.accept+"'";return t.push("<div id='"+this.id+"' "+i+" class='w2upload "+this.options.className+"' "+o+">"),t.push("<form id='"+this.id+"_form' "+s+" enctype='multipart/form-data' name='form1_upload1' method='post' target='__targetFrame__"+this.id+"'><fieldset>"),"image"==this.options.type?(t.push("<input  name='tempFlie' readonly='readonly' id='"+this.id+"_inputFile' class='w2upload_input "+this.options.inputClass+"' "+a+" type='text'/>"),t.push("<span id='"+this.id+"_span' class='w2upload_image "+this.options.imageClass+"' "+n+">"),t.push("<input  class='w2upload_fakeInput' style='margin: 0pt; padding: 0pt; width: "+this.imagewidth+"px; height:"+this.imageheight+"px; opacity: 0.01; filter : alpha(opacity=1);' name='upload' id='"+this.id+"_fakeinput' type='file' "+e+l+"/>"),t.push("</span>")):t.push("<INPUT  id='"+this.id+"_inputFile' name='upload' type='file' _objId='2' class='w2upload_input_type' "+a+" "+e+l+"/>"),t.push("</fieldset><input type='submit' class='w2upload_submit'/></form>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.dom.input=document.getElementById(this.id+"_inputFile"),this.dom.span=document.getElementById(this.id+"_span"),this.dom.form=document.getElementById(this.id+"_form"),this.dom.fakeinput=document.getElementById(this.id+"_fakeinput"),this.styleObj={paddingTop:parseInt(n.D.getStyleProperty(this.dom.input,"padding-top"))||0,paddingBottom:parseInt(n.D.getStyleProperty(this.dom.input,"padding-bottom"))||0,paddingLeft:parseInt(n.D.getStyleProperty(this.dom.input,"padding-left"))||0,paddingRight:parseInt(n.D.getStyleProperty(this.dom.input,"padding-right"))||0,borderTopWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-top-width"))||0,borderBottomWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-bottom-width"))||0,
borderLeftWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-left-width"))||0,borderRightWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-right-width"))||0,height:parseInt(n.D.getStyleProperty(this.dom.input,"height"))||0},"image"==this.options.type){var t=this.dom.span.offsetWidth||parseInt(n.D.getStyleProperty(this.dom.span,"width"))+WebSquare.style.getSize(this.dom.span,"outerMarginWidth");if(!this.dom.input.style.width&&this.render.style.width){var e={marginLeft:parseInt(n.D.getStyleProperty(this.dom.span,"margin-left"))||0,marginRight:parseInt(n.D.getStyleProperty(this.dom.span,"margin-right"))||0},i=parseInt(this.render.style.width)-parseInt(t)-(e.marginLeft+e.marginRight)-(this.styleObj.borderLeftWidth+this.styleObj.borderRightWidth+this.styleObj.paddingLeft+this.styleObj.paddingRight);this.dom.input.style.width=i-this.empty+6+"px"}if(!this.dom.input.style.height&&0==this.styleObj.height){var o=parseInt(this.render.style.height)-(this.styleObj.borderBottomWidth+this.styleObj.borderTopWidth+this.styleObj.paddingBottom+this.styleObj.paddingTop);this.dom.input.style.height=o+"px"}this.dom.fakeinput.style.width=0==t?t+100+"px":t+"px"}var s=document.createElement("div"),l=this.id+"__targetFrame";s.style.width="0",s.style.height="0",s.style.visibility="hidden",s.setAttribute("id",l),this._targetFrameId=l,"body"==this.options.targetFrame?document.body.appendChild(s):"self"==this.options.targetFrame&&this.render.appendChild(s);var h=WebSquare.net.getSSLBlankPage(),d=WebSquare.language.getMessage("Upload_msg1")||"파일 업로드를 위한 임시 프레임";if(s.innerHTML="<iframe frameborder='0' name='__targetFrame__"+this.id+"' scrolling='no' style='width:0; height:0' "+h+" title='"+d+"'></iframe>","image"==this.options.type&&null!=this.dom.fakeinput){var c=this;this.dom.fakeinput.onchange=function(){c.dom.input.value=c.dom.fakeinput.value,a.B.fireEvent(c,"onInputValueChange",c.dom.input.value)},this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent))}else{c=this;this.dom.input.onchange=function(){a.B.fireEvent(c,"onInputValueChange",c.dom.input.value)}}this.options.subDir&&this.addParam("subDir",this.options.subDir),this.options.subSize&&this.addParam("subSize",this.options.subSize),this.options.clickOpenFileDialog&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.form,"onsubmit",this.event.bindAsEventListener(this,this.onSubmitForm))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onSubmitForm=function(t){try{a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onInputValueChange=function(t){try{"image"==this.options.type&&null!=this.dom.fakeinput&&(this.dom.input.value=this.dom.fakeinput.value),a.B.fireEvent(this,"onInputValueChange",this.dom.input.value)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2upload_image")){this.addClass(this.dom.span,"w2upload_image_over");break}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2upload_image")){this.removeClass(this.dom.span,"w2upload_image_over");break}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t);e.next();)if(e.match("w2upload_input")){this.dom.fakeinput&&(this.setEventPause("onclick",!0),this.dom.fakeinput.click(),this.setEventPause("onclick",!1));break}e=null}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},h.prototype.openFileDialog=function(){try{this.dom.fakeinput&&this.dom.fakeinput.click()}catch(t){
WebSquare.exception.printStackTrace(t,null,this)}},h.prototype.setCallback=function(t){try{"function"==typeof t&&(this.callbackFunction=t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.isEmpty=function(){try{var t=this.getValue();return void 0===t||""==t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getByte=function(){try{var t=WebSquare.language.getMessage("Upload_warning1")||"보안상의 문제로 사용할 수 없는 기능입니다.";alert(t);var e=document.getElementById(this.id+"_inputFile");if(e)return new ActiveXObject("Scripting.FileSystemObject").GetFile(e.value).size;$l("input form is not exist")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{var t=document.getElementById(this.id+"_inputFile");if(t)return t.value;$l("input form is not exist")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.reset=function(){try{this.dom.form.reset(),"image"==this.options.type?(this.dom.fakeinput.value="",this.dom.input.value=""):this.dom.input.value="";for(var t=this.dom.form.getElementsByTagName("input"),e=0;e<t.length;e++)"hidden"==t[e].type&&t[e].removeAttribute("value");if(this.options.subDir)for(var i=this.dom.form.firstChild;i;){if("subDir"==i.id){i.value=this.options.subDir;break}i=i.nextSibling}if(this.options.subSize)for(var o=this.dom.form.firstChild;o;){if("subSize"==o.id)return void(o.value=this.options.subSize);o=i.nextSibling}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setSubDir=function(t){try{if(this.options.subDir)for(var e=this.dom.form.firstChild;e;){if("subDir"==e.id)return void(e.value=t);e=e.nextSibling}else this.addParam("subDir",t);this.options.subDir=t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getSubDir=function(){try{for(var t="",e=this.dom.form.firstChild;e;){if("subDir"==e.id){t=e.value;break}e=e.nextSibling}return t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.submit=function(){try{if(WebSquare.domain){var t=this.dom.form.action;t.indexOf("?")>-1?t+="&":t+="?",t+="domain="+WebSquare.text.URLEncoder(WebSquare.domain),this.dom.form.action=t}if(WebSquare.hybridApp||1==this.options.useXHR&&"undefined"!=typeof FormData){var e=document.getElementById(this.dom.input.id);null==e.files&&(e=this.dom.fakeinput);var i=e.files[0],o=new FormData;o.append("upload",i);for(var a=this.dom.form.getElementsByTagName("input"),l=0;l<a.length;l++)"hidden"==a[l].type&&o.append(a[l].id,a[l].value);var h=new XMLHttpRequest,d=this.uuid;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status){var t=WebSquare.idCache[d],e=h.responseText;t.callback(e.substring(e.indexOf("<ret>"),e.indexOf("</ret>")+6))}},h.open("POST",this.dom.form.action,!0);var c=encodeURIComponent(i.name);h.setRequestHeader("X-File-Name",c);var u=s.v.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=u){var p=n.D.getGlobalFunction(u);p&&p(h,"upload")}h.send(o)}else this.dom.form.submit()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getFileInputObject=function(){try{return this.dom.input}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setFAction=function(t){try{this.dom.form.action=t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.changeFormAction=function(t){try{this.dom.form.action=t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.addParam=function(t,e){try{for(var i=!1,o=this.dom.form.firstChild;o;){if(o.id==t){i=!0;break}o=o.nextSibling}if(i)this.dom.form[t].value=e;else{var s=document.createElement("input");s.type="hidden",s.value=e,s.id=t,s.name=t,this.dom.form.appendChild(s)}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getDefaultStyle=function(){try{return" border:0px solid blue "}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.callback=function(t){try{this.callbackFunction?this.callbackFunction.apply(this,new Array(WebSquare.xml.parse(t))):a.B.fireEvent(this,"ondone",WebSquare.xml.parse(t))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getActionUrl=function(){try{
return this.options.action?this.options.action:this.action}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getAccessibiltyId=function(){try{return"image"==this.options.type?this.id+"_fakeinput":this.id+"_inputFile"}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":e?this.addClass(this.render,"w2upload_disabled"):this.removeClass(this.render,"w2upload_disabled")}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setDisabled=function(t){try{var e;t=n.D.getBoolean(t);var i=this.render.getElementsByTagName("fieldset")[0];e="image"==this.options.type?document.getElementById(this.id+"_fakeinput"):document.getElementById(this.id+"_inputFile"),t?(e.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled")):(e.removeAttribute("disabled"),i.removeAttribute("disabled")),l.s.prototype.setDisabled.call(this,t)}catch(t){r.w.printStackTrace(t)}return t},h.prototype.finalize=function(){try{l.s.prototype.finalize.call(this),s.v.setTimer((function(t){if(t){var e=document.getElementById(t);e&&e.parentNode&&(e.parentNode.removeChild(e),e=null)}}),{key:this.id+"_removeTargetFrame",delay:6e4,args:[this._targetFrameId]})}catch(t){r.w.printStackTrace(t)}}},453:(t,e,i)=>{i.r(e),i.d(e,{wframe:()=>d});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.wframe",pluginName:"wframe",userEvents:["onload","onwframeload","onwframeunload","onbeforewframeunload"],useConfig:!0,src:"",tagname:"div",mode:"async",scope:!1,initScript:"",postScript:"",scopeVariable:"",cloneVariable:"",linkVariable:"",scopeFunction:"$w",scopeExternal:!1,scopeValue:"",isWidget:!1,params:"",popupParam:"",initStyle:!1,preload:!1,strictFrame:!1,processMsgFrame:!1,frameModal:!1,udc2Name:"",popupAutoClose:!1,msaName:""},d.prototype.initialize=function(t){this.options.mode="async",this.createFlag=!1,(t&&"w2:wframe"===t.getTagName()||!0===this.options.preload)&&(this.createFlag=!0),this.frameDoc=null,this.wframeScript=[],this.lazyImportsArr=[],this.childAllControlList=[],this.userComponentList=[],this.userPluginList=[],this.scope={},this.scopeLazyList=[],this.scopeVariable={},"true"===this.options.initScript&&"true"===s.v.getConfiguration("/WebSquare/wframe/initScript/@value")&&(this.options.initScript=s.v.getConfigurationJSON("/WebSquare/wframe/initScript",{type:"json"}),this.options.initScript["#cdata"]&&(this.options.initScript=this.options.initScript["#cdata"],"function"==typeof this.options.initScript&&(this.options.initScript="("+this.options.initScript.toString()+")()"))),"true"===this.options.postScript&&"true"===s.v.getConfiguration("/WebSquare/wframe/postScript/@value")&&(this.options.postScript=s.v.getConfigurationJSON("/WebSquare/wframe/postScript",{type:"json"}),this.options.postScript["#cdata"]&&(this.options.postScript=this.options.postScript["#cdata"],"function"==typeof this.options.postScript&&(this.options.postScript="("+this.options.postScript.toString()+")()"))),this.options.scope&&(""==this.options.scopeVariable&&(this.options.scopeVariable=s.v.getConfiguration("/WebSquare/spa/variable/@value")||""),""==this.options.cloneVariable&&(this.options.cloneVariable=s.v.getConfiguration("/WebSquare/spa/variable/@clone")||""),""==this.options.linkVariable&&(this.options.linkVariable=s.v.getConfiguration("/WebSquare/spa/variable/@link")||""),this.options.initScript&&(this.options.initScript=n.D.scopingFuncBody(this.options.initScript,this.id,!0)),this.options.postScript&&(this.options.postScript=n.D.scopingFuncBody(this.options.postScript,this.id,!0))),this.makeScopeVariable(),this.options.params&&this.parseParameter(),this.options.dataObject&&this.setDataObject(this.options.dataObject),this._isWframePopup=!1,this._scriptLazy=!1,this._clearExecuteStatus(),this._processMsgComp=null,this._processMsgModal=null,this._processMsgQueue=[],
this._wframePopupModal=null,this._wframeModelStack=[],this._processMsgAjaxCnt=0,this.udc2Parent=null,this._isUDC2=!1,this._bSkipAsync=!1,this._pCount=0},d.prototype.toHTML=function(){try{var t={footer:"div",header:"div",nav:"div",section:"div"},e=[],i=this.options.tagname,o=""==this.options.style?"":"style='"+this.options.style+"'",a=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";if(s.v.browserCheck.ie){var n=s.v.browserVersion();"6"!=n&&"7"!=n&&"8"!=n||t[i]&&(i=t[i])}if(e.push("<"+i+" id='"+this.id+"' "+o+" class='w2wframe "+this.options.className+"' "+a+">"),this.createFlag)for(var l=this.getChildren(),h=0;h<l.length;h++)e.push(l[h].toHTML());return e.push("</"+i+">"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setChildAction=function(t){try{t=t||{};var e=this.childControlList[0];if(!e)return void this._markEnd();!0!==(t&&!0===t.skipPreActivate)&&"stop"===e.activeStatus&&e.preActivate();var i=[];for(var o in WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp){var n=WebSquare.DataCollection.comp[o];n&&n.parentFrame===this.uuid&&(n.activate(),i.push(n.uuid))}WebSquare.uiplugin.wframe._increasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePreorder(this.uuid),e.activate(),WebSquare.uiplugin.wframe._decreasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePostorder(this.uuid),e.render=null,e.onComplete();for(var l=0;l<i.length;l++)WebSquare.idCache[i[l]].completed||WebSquare.idCache[i[l]].onComplete();var h=this.getSrc(),d=!0===this._scriptLazy&&!0!==s.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;if("executed"===WebSquare.scriptSectionExcuteFlag||d){if(!0===s.v.scriptPrecedence)WebSquare.uiplugin.wframe._execute("script"),t._isProcessMsgFrame?WebSquare.uiplugin.wframe._execute("onpageload",t):WebSquare.uiplugin.wframe._execute("onpageload"),WebSquare.uiplugin.wframe._execute("postscript",{order:"postorder"}),WebSquare.uiplugin.wframe._execute("onwframeload");else{var c=t&&!0===t.preExecuted,u=!0===this._scriptLazy&&this.parentControl&&this.parentControl.parentControl&&this.parentControl.parentControl.options&&"wframe"===this.parentControl.parentControl.options.pluginName,p={order:"postorder",reverse:!0};if(d&&(p.preExecuted=!0),u||!0===this.options.preload||!0===c)WebSquare.uiplugin.wframe._execute("script",p),WebSquare.uiplugin.wframe._execute("onpageload",{order:"postorder"});else{if(this.frameDoc&&"string"==typeof this.frameDoc.scriptSection&&this.frameDoc.scriptSection){var g=WebSquare.scriptIdentifier+this.getURL(this.getSrc())+'";';g+=this.frameDoc.scriptSection,WebSquare.BootLoader.globalEval(g),this.frameDoc.scriptSection=""}for(l=0;l<this.childControlList.length;l++)a.B.fireEvent(this.childControlList[l],"onpageload",h);this._executeStatus.onpageload=!0}}WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}else if(!0!==s.v.scriptPrecedence){var m=t&&!0===t.preExecuted&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;m&&WebSquare.uiplugin.wframe._execute("script",{order:"postorder",reverse:!0,preExecuted:!0});for(l=0;l<this.childControlList.length;l++)a.B.fireEvent(this.childControlList[l],"onpageload",h);m&&(WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending())}a.B.fireEvent(e,"onwframeload",h),a.B.fireEvent(e,"oncreated",e.options),a.B.fireEvent(this,"onload",h),!0!==s.v.scriptPrecedence&&a.B.fireEvent(this,"onwframeload",h),this._markEnd()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){try{if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.isWidget)return;if(this.createFlag){
if(("preExecuted"===WebSquare.scriptSectionExcuteFlag||"executed"===WebSquare.scriptSectionExcuteFlag)&&WebSquare.externalScriptArr&&WebSquare.externalScriptArr.length>0){for(var i=0;i<WebSquare.externalScriptArr.length;i++)WebSquare.BootLoader.globalEval(s.v.load(WebSquare.externalScriptArr[i]));WebSquare.externalScriptArr=[]}this._markStart(),this._isProcessMsgFrame?this.setChildAction({_isProcessMsgFrame:!0,_processMsgCompId:this.uuid}):this.setChildAction()}else{var o;this._dataObject&&(o={dataObject:this._dataObject}),this.setSrc(this.options.src,o)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setSrc=async function(t,e){try{e=e||{};var i=this.getSrc();if(!t||""==t)return!1;if(this.options.src=t,t=this.getSrc(),this._bSkipAsync=!0,"active"!==this.activeStatus&&!this.createFlag)return;this._markStart();var o=await WebSquare.jsLoader._loadObj(this.getURL(t,e),{msaName:e.msaName||this._getMsaName()});if(o){for(var l=0;l<this.childControlList.length;l++)a.B.fireEvent(this.childControlList[l],"onwframeunload",i);var h;if(n.D.emptySelection(),e.removeAll&&(e.appendModel="replace"),"replace"==e.appendModel)this.removeFrame_old();else(""==i||!i||i===t&&!0===e.reload)&&(e.reload=!1,h={keepDataObject:!0}),this.finalize(i,h);"object"==typeof e.dataObject&&this.setDataObject(e.dataObject),this.makeScopeVariable();var d=WebSquare.jsLoader.getPageType(t);this.frameDoc=WebSquare.jsLoader.getPageInfo(o,d),this.frameDoc.renderStartTime=new Date,this.makeParameter(),await this.frameDoc.parsingUDC(!0,this),await this.frameDoc.parsingWFrame(!0,this),null==e.appendModel&&(this.options.scope?e.appendModel="scope":e.appendModel=!0),this.appendModels(this.frameDoc.models,null,e);var c=WebSquare.uiplugin.wframe._clearPending({keepStatus:!0});return await this.renderBody(!0),"executed"===WebSquare.scriptSectionExcuteFlag||!0!==s.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag||(c.pendingWframePreOrderList=c.pendingWframePreOrderList.concat(WebSquare.uiplugin.wframe.__pendingWframePreOrderList),c.pendingWframePostOrderList=WebSquare.uiplugin.wframe.__pendingWframePostOrderList.concat(c.pendingWframePostOrderList)),WebSquare.uiplugin.wframe._setPending(c),!0}return!1}catch(t){return r.w.printStackTrace(t,null,this),!1}},d.prototype.msaLoad=async function(t,e,i,o){try{return(i=i||{}).msaName=e||this._getMsaName(),this.options.msaName=i.msaName,await this.setSrc(t,i)}catch(t){return r.w.printStackTrace(t,null,this),!1}},d.prototype.makeFrame=async function(t,e){try{if(this.options.strictFrame)return;var i,o;if(this._markStart(),e&&null!=s.v.udcObj[e])i=s.v.udcObj[e];else{var a=this.getSrc();a&&(i=await WebSquare.jsLoader._loadObj(this.getURL(a),{msaName:this._getMsaName()}))}if(i)a&&(o=WebSquare.jsLoader.getPageType(a)),this.frameDoc=WebSquare.jsLoader.getPageInfo(i,o),this.frameDoc.renderStartTime=new Date,this.makeParameter(),await this.frameDoc.parsingUDC(!0,this),await this.frameDoc.parsingWFrame(!0,this),this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),await this.renderBody(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.initAsync=async function(){if(!0!==this._bSkipAsync)return await this.makeFrame()},d.prototype.makeFrameUDC2=async function(t){try{this.udc2Parent=t,await this.makeFrame(null,this.options.udc2Name),this._udc2Mapping()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makeFrameSync=function(t,e,i){try{if(this.options.strictFrame)return;var o,a;if(this._markStart(),"string"==typeof e&&null!=s.v.udcObj[e])o=s.v.udcObj[e];else if(e&&e.constructor===WebSquare.pageInfo)o=e.getPageInfo();else{var n=this.getSrc();n&&(o=WebSquare.jsLoader._loadObj(this.getURL(n),{msaName:this._getMsaName()}))}if(o)n&&(a=WebSquare.jsLoader.getPageType(n)),this.frameDoc=WebSquare.jsLoader.getPageInfo(o,a),this.frameDoc.renderStartTime=new Date,this.makeParameter(),this.frameDoc.parsingUDC(!0,this),this.frameDoc.parsingWFrame(!0,this,!0),
this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),this.renderBody(t,i)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makeFrameUDC2Sync=function(t,e,i){try{this.udc2Parent=t,this.makeFrameSync(e,this.options.udc2Name,i),this._udc2Mapping()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getSrc=function(){try{return this._getMsaSrc()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getMsaSrc=function(t){try{t=t||{};var e=this.options.src;if(""==e)return"";var i=s.v.getPageURL(e,{skipURL:!0,skipUri:!0,msaName:t.msaName||this._getMsaName()});if(!0===t.msaSrc)"string"!=typeof i||i.startsWith("/")||i.startsWith("\\")||i.indexOf("://")>=0||(i=this._getMsaHome()+i);return i}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getMsaSrc=function(t,e){try{return(e=e||{}).msaSrc=!0,t&&(e.msaName=t),this._getMsaSrc(e)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getMsaName=function(){try{if(this.options.msaName)return this.options.msaName;if(this.scope_obj)return this.scope_obj._getMsaName()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getMsaHome=function(){try{var t=this.options.src;if("string"!=typeof t)return"/";if(this.options.msaName){var e=t.lastIndexOf("/");return e>=0?t.slice(0,e)+"/":"/"}if(this.scope_obj)return this.scope_obj._getMsaHome()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.appendModels=function(t,e,i){try{if("replace"==(i=i||{}).appendModel)return void this.replaceModels(t);if("scope"==i.appendModel)return void this.scopeModels(t,e,i);var o=WebSquare.ModelUtil.getModelByID(e);if(o)for(var s=0;s<t.length;s++){if(i.appendModel)for(var a=o.instances[0].document,n=t[s].instances[0].document.childNodes,l=0;l<n.length;l++)a.appendChild(n[l].cloneNode(!0));o.binds=o.binds.concat(t[s].binds);for(var h=0;h<t[s].submissions.length;h++){var d=t[s].submissions[h];d.parentElement=o.element,o.submissions.push(d)}for(var c=0;c<t[s].workflows.length;c++){var u=t[s].workflows[c];u.parentElement=o.element,o.workflows.push(u)}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.replaceModels=function(t){try{WebSquare.WebSquaredoc.models.splice(0,WebSquare.WebSquaredoc.models.length),WebSquare.WebSquaredoc.models=WebSquare.WebSquaredoc.models.concat(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.scopeModels=function(t,e,i){try{var o=WebSquare.ModelUtil.getModelByID(e);if(o&&"scope"==i.appendModel)for(var s=0;s<t.length;s++){if(t[s].instances&&t[s].instances.length>0){var a;o.instances&&o.instances.length>0&&(a=o.instances[0].xmlNode.parentNode);for(var n=t[s].instances,l=0,h=n.length;l<h;l++){for(var d=n[l].xmlNode.cloneNode(!0),c=d.firstChild;null!=c&&1!=c.nodeType;c=c.nextSibling);var u=new WebSquare.Model.Instance(d,c,null);u.scope_id=this.id;var p=u.xmlNode;p.setAttribute("scopeId",this.id),o.instances.push(u),a&&a.appendChild(p)}}o.binds=o.binds.concat(t[s].binds);for(var g=0;g<t[s].submissions.length;g++){var m=t[s].submissions[g];m.parentElement=o.element,o.submissions.push(m)}for(var f=0;f<t[s].workflows.length;f++){var b=t[s].workflows[f];b.parentElement=o.element,o.workflows.push(b)}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.remove=function(){try{if(!0===this._removed)return;if(this.options.strictFrame){for(var t in window[this.id]&&(window[this.id]=null),this)delete this[t];return}for(var e in this.finalize(),this.activeStatus="finalize",null!=this.render&&WebSquare.removeNode(this.render),this.parentControl&&this.parentControl.removeControl(this),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[e]==this&&WebSquare.getBody().childControlList.splice(e,1);this.destroy(),n.D.emptySelection()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.finalize=function(t,e){try{var i=new Date;if(!0!==s.v.scriptPrecedence)for(var o=0;o<this.childControlList.length;o++)a.B.fireEvent(this.childControlList[o],"onpageunload")
;for(o=0;o<this.childControlList.length;o++)a.B.fireEvent(this.childControlList[o],"onbeforepageunload");if(t?a.B.fireEvent(this,"onbeforewframeunload",t):a.B.fireEvent(this,"onbeforewframeunload",this.getSrc()),this.popupList){o=0;for(var h=this.popupList.length;o<h;o++){var d=this.popupList[o];if(d){var c=WebSquare.getBody();if(this._parentFrameUUID)c=WebSquare.idCache[this._parentFrameUUID];var u=d.id;if(null!=c.stackComponents)for(var p in c.stackComponents){var g=c.stackComponents[p];if(u)for(var m=c.stackComponents[p].length-1;m>=0;m--)if(g[m].id===u){g.splice(m,1),c.modalStack.pop();break}}c.modalStack.pop(),d.close(),WebSquare.uiplugin.popup.removeFromPopupList(u)}}}this.hideProcessMessage(),null!=this._processMsgComp&&(this._processMsgComp.remove(),this._processMsgComp=null),null!=this._processMsgModal&&(this._processMsgModal.remove(),this._processMsgModal=null),null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null);for(var f=[];this.childAllControlList.length>0;){var b;if(b=!0===s.v.scriptPrecedence?this.childAllControlList.shift():this.childAllControlList.pop(),(T=WebSquare.idCache[b])&&(!0!==T._isWframePopup||!0===this.options.popupAutoClose||this.options.frameModal))if(null==WebSquare.DataCollection.comp[T.id]){WebSquare.isPrintLog=!1,"function"==typeof T.finalize&&T.finalize(),WebSquare.isPrintLog=!0,"function"==typeof T.unbind&&T.unbind(),T.event&&T.event.clearCache(),T.modelControl&&(T.modelControl.unbindRef(),T.modelControl.unbindItemset()),WebSquare.getBody().getLayerListener().remove(T.id),T.childControlList=[];if(T.options){var y={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[T.options.pluginName]||T.options.pluginName;delete(WebSquare.componentsCache[y]||WebSquare.componentsCache[T._wTagName]||{})[T.uuid],s.v.memoryLeakComponent[y]&&(s.v.memoryLeakComponentCount+=s.v.memoryLeakComponent[y])}if(window[WebSquare.noConflict].comp[T.id]=null,delete window[WebSquare.noConflict].comp[T.id],window[WebSquare.noConflict].data[T.id]=null,delete window[WebSquare.noConflict].data[T.id],window[T.id])try{window[T.id]=null,(!n.D.isIE()||parseInt(s.v.browserVersion(),10)>8)&&delete window[T.id]}catch(t){window[T.id]=null}if(null!=T.render){if(T._closed&&T.frame&&T._isWframePopup){var v=T.frame.paramObj.popupID;v&&WebSquare.uiplugin.popup.removeFromPopupList(v);var w=T._targetFrameObjUUID,S=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(T.options.frameModal&&w&&w!==S){var C=WebSquare.idCache[w];C&&C.hideFrameModal(v)}}WebSquare.removeNode(T.render)}WebSquare.idToUUID[T.id]=null,delete WebSquare.idToUUID[T.id];for(var _=Object.keys(T),x=_.length,I=0;I<x;I++)try{"function"==typeof T[_[I]]?T[_[I]]=function(){}:delete T[_[I]]}catch(t){delete T[_[I]]}T._removed=!0,T.remove=function(){},T.destroy=function(){},T.finalize=function(){},T=null,WebSquare.idCache[b]=null,delete WebSquare.idCache[b]}else f.push(b)}for(o=f.length-1;o>=0;o--){var T;null!=(T=WebSquare.idCache[f[o]])&&WebSquare.DataCollection.api.remove(T.id,{uuid:T.uuid})}this.childAllControlList=[];for(o=0;o<this.childControlList.length;o++){var k=this.childControlList[o];for(!0===s.v.scriptPrecedence&&a.B.fireEvent(k,"onpageunload");k.childControlList&&k.childControlList.length>0;){var D=k.childControlList.pop();null!=D.uuid&&D.remove()}k.render=null,k.remove()}for(var L in this.childControlList=[],this.scopeVariable)null!=window[this.id+"_"+L]&&(window[this.id+"_"+L]=null,!n.D.isIE()||parseInt(s.v.browserVersion(),10)>8?delete window[this.id+"_"+L]:window[this.id+"_"+L]=null);this.scope={},this.scopeVariable={},this.scopeLazyList=[];for(o=0;o<this.userComponentList.length;o++)n.D.loadedUserComponent[this.userComponentList[o]]=null,delete n.D.loadedUserComponent[this.userComponentList[o]];this.userComponentList=[];for(o=0;o<this.userPluginList.length;o++)n.D.loadedUserComponentPluginName[this.userPluginList[o]]=null,
delete n.D.loadedUserComponentPluginName[this.userPluginList[o]];this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(e);var W=new Date;l.k.printLog("Wframe unloading["+this.id+"]. Time:"+(W-i)+"ms"),null==t?a.B.fireEvent(this,"onwframeunload",this.getSrc()):""!=t&&a.B.fireEvent(this,"onwframeunload",t),WebSquare.uiplugin.dateHelper&&null!=WebSquare.uiplugin.dateHelper._currentDate&&delete WebSquare.uiplugin.dateHelper._currentDate[this.id],this.wframeSubPopup&&(this.wframeSubPopup=[]),this.stackComponents={},this.modalStack=[]}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.removeFrame=function(){try{this.finalize()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.removeFrame_old=function(){try{l.k.printLog("Wframe unloading start.["+this.id+"]");for(var t=0;t<this.childControlList.length;t++)a.B.fireEvent(this.childControlList[t],"onpageunload");WebSquare.DataCollection.stopBroadCast=!0,WebSquare.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var e=WebSquare.getBody();for(var i in WebSquare.idCache){var o=WebSquare.idCache[i];o!==e&&o!==this&&("function"!=typeof o.remove||o.remove==h.s.prototype.remove||o.options&&("wframe"==o.options.pluginName||"pageInherit"==o.options.pluginName)?(WebSquare.isPrintLog=!1,"function"==typeof o.finalize&&o.finalize(),WebSquare.isPrintLog=!0,"function"==typeof o.unbind&&o.unbind(),o.event&&o.event.clearCache(),WebSquare.useVisibleHelper&&o.render&&o.render.parentNode&&o!=WebSquare.body&&o.render.parentNode.removeChild(o.render),o.childControlList=[],window[o.id]&&(window[o.id]=null)):o.remove())}e.getLayerListener().removeAll(),WebSquare.idCache={},WebSquare.idCache[e.uuid]=e,WebSquare.idCache[this.uuid]=this,window[WebSquare.noConflict].comp={},window[WebSquare.noConflict].comp[this.id]=this,WebSquare.idToUUID={},WebSquare.idToUUID[e.id]=e.uuid,WebSquare.idToUUID[this.id]=this.uuid,WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.componentsCache={},WebSquare.componentsCache[e.options.pluginName]={},WebSquare.componentsCache[e.options.pluginName][e.uuid]=!0,WebSquare.componentsCache[this.options.pluginName]={},WebSquare.componentsCache[this.options.pluginName][this.uuid]=!0,this.childAllControlList=[],this.childControlList=[],this.scope={},this.scopeVariable={},this.userComponentList=[],this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(),s.v.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),WebSquare.strictModeFrame=null),l.k.printLog("Wframe unloading finished.["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.removeCommon=function(t){try{if(void 0!==t&&null!=t||(t={}),this.wframeScript=[],null!=this.frameDoc){for(var e=document.getElementsByTagName("head")[0],i=0;i<this.frameDoc.cssList.length;i++){var o=this.frameDoc.cssList[i]&&this.frameDoc.cssList[i].href&&this.frameDoc.cssList[i].href.toString();for(var a in o=o||"",WebSquare.skin.skinTag)if(n.D._getAbsolutePath(o)==WebSquare.skin.skinTag[a]){WebSquare.skin.skinTag.splice(a,1);break}e.removeChild(this.frameDoc.cssList[i]),this.frameDoc.cssList[i]=null}if(e=null,this.frameDoc.models&&this.frameDoc.models.length>0){var l=this.frameDoc.models[0].submissions,h=WebSquare.WebSquaredoc.models[0].submissions;for(i=0;i<l.length;i++){for(var d=0;d<WebSquare.layer.submissionIDQueue.length;d++)WebSquare.layer.submissionIDQueue[d]==l[i].id&&(WebSquare.layer.submissionIDQueue.splice(d,1),WebSquare.layer.submissionMessageQueue.splice(d,1));for(var c=0;c<h.length;c++)if(l[i].id===h[c].id&&l[i].ref===h[c].ref){h[c].dead=!0,s.v.useSubmissionGlobal&&(window[h[c].id]=null),h[c].parentElement=null,h.splice(c,1);break}}var u=this.frameDoc.models[0].workflows;for(h=WebSquare.WebSquaredoc.models[0].workflows,i=0;i<u.length;i++)for(c=0;c<h.length;c++)if(u[i].id===h[c].id&&u[i].ref===h[c].ref){h[c].promiseStatus="REJECT",
s.v.useWorkflowGlobal&&(window[h[c].id]=null),h[c].parentElement=null,h.splice(c,1);break}}for(var p in this.frameDoc)this.frameDoc[p]=null,delete this.frameDoc[p]}!0!==t.keepDataObject&&this._removeDataObject(),this.frameDoc=null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":for(var i=0;i<this.childControlList.length;i++){var o={componentId:this.childControlList[i].id,disabled:e};n.D.setDisabled(o)}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onComplete=function(){try{if(null!=this.frame_dc_list){for(var t=0;t<this.frame_dc_list.length;t++)WebSquare.idCache[this.frame_dc_list[t]].completed||WebSquare.idCache[this.frame_dc_list[t]].onComplete();delete this.frame_dc_list}h.s.prototype.onComplete.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getObj=function(t){try{return this.scope[t]}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getObjList=function(){try{var t=[];for(var e in this.scope)t.push(e);return t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getWindow=function(){try{return this.options.scope?this.scope:window}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makeScopeVariable=function(){try{var t=0;if(this.options.scope&&this.options.scopeVariable)for(var e=this.options.scopeVariable.split(","),i=0;i<e.length;i++){var o=e[i].wq_trim(),s=t>0?String(t):"";t++,this._makeScopeVariable(o,WebSquare.noConflictFunction+s)}if(this.options.scope&&this.options.cloneVariable)for(e=this.options.cloneVariable.split(","),i=0;i<e.length;i++){var a=e[i].wq_trim();s=t>0?String(t):"";t++,this._makeCloneVariable(a)}if(this.options.scope&&this.options.linkVariable)for(e=this.options.linkVariable.split(","),i=0;i<e.length;i++){var n=e[i].wq_trim();s=t>0?String(t):"";t++,this._makeLinkVariable(n)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._makeScopeVariable=function(t,e,i){try{if(this.scopeVariable[t]={},this.scope[t]=this.scopeVariable[t],window[this.id+"_"+t]=this.scopeVariable[t],this.options.scopeFunction){this.scopeVariable[t][this.options.scopeFunction]=new WebSquare.uiplugin.wframe.scope(this.uuid);var s=this.scopeVariable[t][this.options.scopeFunction];for(var a in WebSquare.api)"data"!==a&&"comp"!==a&&null==s[a]&&(s[a]=WebSquare.api[a]);for(var n in s.data=new WebSquare.uiplugin.wframe.scope.data(this.id),s.model=new WebSquare.uiplugin.wframe.scope.model(this.id),s.bigDecimal=new WebSquare.uiplugin.wframe.scope.bigDecimal(this.id),s.bigDecimal._scopeId=this.id,s.id=this.id+"_",WebSquare.api.data)null==s.data[n]&&"function"==typeof WebSquare.api.data&&(s.data[n]=WebSquare.api.data[n]);this.options.scopeFunction!==WebSquare.noConflict&&null!=window[t]&&null==window[t][this.options.scopeFunction]&&o.x.extend(window[t][this.options.scopeFunction],WebSquare.api),e&&(this.scope[e]=this.scopeVariable[t][this.options.scopeFunction])}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._makeCloneVariable=function(t){try{this.scopeVariable[t]={},"object"==typeof window[t]&&null!=window[t]&&(this._isUDC2,this.scopeVariable[t]=s.v._copyCommon(t,this)),this.scope[t]=this.scopeVariable[t],window[this.id+"_"+t]=this.scopeVariable[t]}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._makeLinkVariable=function(t){try{if("object"!=typeof window[t]||null==window[t])return;this.scopeVariable[t]=WebSquare.jsonUtil.cloneNode(window[t],!0,[],[],0,!0),this.scope[t]=this.scopeVariable[t],window[this.id+"_"+t]=this.scopeVariable[t]}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makeLazyScopeVariable=function(){try{if(this.options.scope&&this.options.scopeVariable){var t=this.options.scopeVariable;this.options.cloneVariable&&(t+=","+this.options.cloneVariable);for(var e=t.split(","),i=0;i<e.length;i++)for(var o=e[i].wq_trim(),s=i>0?String(i):"",a=WebSquare.noConflictFunction+s,n=0;n<this.scopeLazyList.length;n++)WebSquare.idCache[this.scopeLazyList[n]].scope[o]=this.scopeVariable[o],
WebSquare.idCache[this.scopeLazyList[n]].scope[a]=this.scopeVariable[o][this.options.scopeFunction]}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._addScopeVariable=function(t){try{if(this.options.scope&&this.options.scopeVariable){var e=this.options.scopeVariable;this.options.cloneVariable&&(e+=","+this.options.cloneVariable);for(var i=e.split(","),o=0;o<i.length;o++){var s=i[o].wq_trim(),a=o>0?String(o):"",n=WebSquare.noConflictFunction+a;WebSquare.idCache[t].scope[s]=this.scopeVariable[s],WebSquare.idCache[t].scope[n]=this.scopeVariable[s][this.options.scopeFunction]}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._udc2Mapping=function(){try{var t=this.udc2Parent;if(!t)return;var e={};for(var i in t._reservedName)for(var o=0;o<t._reservedName[i].length;o++)e[t._reservedName[i][o]]=!0;var a=this.options.cloneVariable.split(","),n={};for(o=0;o<a.length;o++)n[a[o]]=!0;var l,h=WebSquare.Elem.api.getElementsByTagName(this.frameDoc.getPageInfo(),"publicInfo",s.v._XML_NAMESPACE.W2)[0];if(h){var d=WebSquare.Parser.parseAttribute(h);for(var i in l={method:{},submission:{},component:{}},d){var c=d[i].split(",");for(o=0;o<c.length;o++)l[i][c[o].wq_trim()]=!0}}for(var i in this.scopeVariable)if(!0!==n[i]){var u=this.scopeVariable[i];for(var p in u)p!==this.options.scopeFunction&&!0!==e[p]&&(l&&!0!==l.method[i+"."+p]||(t[p]=u[p]))}for(var i in this.scope){var g=this.scope[i];null!=g&&(l?(!0===l.component[i]&&g.uuid&&WebSquare.idCache[g.uuid]===g&&g.id!==g.uuid&&g.org_id!==g.uuid||!0===l.submission[i]&&"submission"===g._pluginName)&&(t[i]=g):t[i]=g)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setMode=function(t){try{this.options.mode=t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.start=function(t){},d.prototype.renderBody=async function(t,e){var i,o,r=[],a=this.frameDoc.getType();return"json"===a?(r=WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"),i=WebSquare.jsonUtil.getAttribute(r[0],"class")):i=(r=WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",s.v._XML_NAMESPACE.XHTML))[0].getAttribute("class"),i&&(this.options.className=i,this.addClass(i)),WebSquare.cssManager.startCache(),o="json"===a?WebSquare.controlFactory.createByJSON(null,null,r[0],this.options.scope?this:null,this.uuid):WebSquare.controlFactory.create(null,null,r[0],this.options.scope?this:null,this.uuid),WebSquare.cssManager.endCache(),!0!==e&&await WebSquare.controlFactory.initAsync(),this.childControlList.push(o),this.render&&(o.domStatus="new"),o&&(o.parentControl=this,o.options&&o.options.firstTabID&&!this.options.firstTabID&&(this.options.firstTabID=o.options.firstTabID)),this.options.scope&&(this.makeScope(this),this.makeLazyScopeVariable()),o&&t?this._lazyActivation():!0===WebSquare._async?(s.v.executePointScript(4),"stop"===this.activeStatus&&this._markEnd()):"stop"===this.activeStatus&&this._markEnd(),!!o},d.prototype.lazyActivation=function(){try{if(!this.render)return;var t=this.childControlList[0];this.render.innerHTML=t.toHTML(),"sync"===this.options.mode?this.setChildAction({preExecuted:!0}):(t.preActivate(),n.D.setTimeout(this.setChildAction,{key:this.id+"_setChildAction",caller:this,delay:1,args:[{preExecuted:!0,skipPreActivate:!0}]}))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._lazyActivation=function(){try{if(s.v.executePointScript(4),WebSquare.externalScriptArr.length>0)if("sync"!==this.options.mode){var t=this.uuid;WebSquare.externalScriptArr.push((function(){try{WebSquare.idCache[t].lazyActivation()}catch(t){r.w.printStackTrace(t)}})),n.D.js.apply(null,WebSquare.externalScriptArr)}else{for(var e=0;e<WebSquare.externalScriptArr.length;e++)WebSquare.BootLoader.globalEval(s.v.load(WebSquare.externalScriptArr[e]));this.lazyActivation()}else this.lazyActivation();WebSquare.externalScriptArr=[]}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.parseParameter=function(){try{if(!this.options.params||"string"!=typeof this.options.params)return
;for(var t in this.paramObj=JSON.parse(this.options.params),this.paramObj){var e=this.paramObj[t].charAt(0),i=this.paramObj[t].slice(1);switch(e){case"j":this.paramObj[t]=JSON.parse(i);break;case"x":this.paramObj[t]=WebSquare.xml.parse(i);break;case"a":this.paramObj[t]=JSON.parse(i);break;default:this.paramObj[t]=i}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makeParameter=function(){try{if("object"!=typeof this.paramObj&&(this.paramObj={}),this.options.isWidget){var t=this.parentControl.getParams();"object"==typeof t&&(this.paramObj.params=t)}var e=this.getSrc();if(!e)return;for(var i=e.substring(e.indexOf("?")+1).split("&"),o=0;o<i.length;o++){2==(s=i[o].split("=")).length&&(this.paramObj[s[0].wq_trim()]=s[1].wq_trim())}if(location.hash.length>0)for(i=e.substring(e.indexOf("#")+1).split(/[\&\?\#]/),o=0;o<i.length;o++){var s;2==(s=i[o].split("=")).length&&(this.paramObj[s[0].wq_trim()]=s[1].wq_trim())}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setDataObject=function(t){try{if("string"==typeof t&&(t=JSON.parse(t)),null==t||"string"!=typeof t.name||0===t.name.length)return;var e=t.type||"string";e=e.toLowerCase();var i,o=t.data,s=t.name;switch(e){case"string":i=o;break;case"json":i="string"==typeof o?JSON.parse(o):n.D.cloneObject(o,{scope:this.scope_id,skipFunction:!0});break;case"xml":i="string"==typeof o?WebSquare.xml.parse(o):WebSquare.xml.parse(WebSquare.xml.serialize(o));break;case"array":i="string"==typeof o?JSON.parse(o):o.slice(0)}this._dataObject={type:e,name:s,data:i}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getDataObject=function(t){try{var e;return this._dataObject&&"string"==typeof this._dataObject.name&&this._dataObject.name.length>0&&this._dataObject.data&&(e=null==t?this._dataObject:this._dataObject[t]),e}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._removeDataObject=function(){try{this._dataObject&&(delete this._dataObject.data,this._dataObject=null,delete this._dataObject)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setFirstTabID=function(t){try{if(null!=t&&t!==this.options.firstTabID&&null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var e=WebSquare.tabOrder[this.id].preTabID,i=WebSquare.tabOrder[e].nextTabID,o=n.D.getComponentById(t,this.id).id,s=WebSquare.tabOrder[e].nextTabID;WebSquare.tabOrder[e].nextTabID=o,WebSquare.tabOrder[o]={},WebSquare.tabOrder[o].preTabID=e,s!==this.id&&delete WebSquare.tabOrder[i],this.options.firstTabID=t}}catch(t){r.w.printStackTrace(t)}},d.prototype.getParentFrame=function(){try{return this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getRenderedParentFrame=function(){try{return this.scope_obj&&WebSquare.strictModeFrame.id!==this.scope_obj.id&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.reload=function(t){try{var e;if(this.options.strictFrame)n.D.reinitialize(t);else this._dataObject&&(e={dataObject:this._dataObject,reload:!0}),this.setSrc(this.getSrc(),e)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._clearExecuteStatus=function(){try{this._executeStatus={script:!1,onpageload:!1,postscript:!1,lazyscript:!1,onwframeload:!1}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getVersion=function(){try{var t=s.v.getConfiguration("/WebSquare/wframe/version/@value");return t||(t=WebSquare.strictMode?3:"sync"===this.options.mode?2:1),Number(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getURL=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"string"!=typeof t||t.indexOf("://")>-1||!0===e.skipFullUrl)return t;if(this.options.msaName&&(e.msaName=this.options.msaName),e.msaName)return s.v.getURL(t,e);var i=this._getMsaName();if(i)return t=this.getMsaSrc(t),e.msaName=i,s.v.getURL(t,e);var o="",a=this.getParentFrame();if(a){var n,l=a.getSrc(),h=l.indexOf("://")
;if(h>=0)o=(n=t.startsWith("/")||t.startsWith("\\")?l.indexOf("/",h+3):l.lastIndexOf("/"))>0?l.slice(0,n)+"/":l.slice(0)+"/"}return o?o+t:s.v.getURL(t,{tempHome:this.getUdcRoot()})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.showProcessMessage=async function(t,e){try{return d._showProcessMessage(this,t,e)}catch(t){r.w.printStackTrace(t,null,this),this.hideProcessMessage()}},d.prototype.hideProcessMessage=function(){try{return d._hideProcessMessage(this)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._handleProcessEvent=function(t){try{a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this),this.hideProcessMessage()}},d.prototype.addSubmissionMessage=async function(t,e){try{await this.showProcessMessage(e,{submissionId:t})}catch(t){r.w.printStackTrace(t,null,this),this.hideProcessMessage()}},d.prototype.deleteSubmissionMessage=function(t){try{for(var e=this._processMsgQueue.length-1;e>=0;e--)if(this._processMsgQueue[e].id==t){if(null!=this._processMsgComp&&e>0){var i=this._processMsgComp.getObj("text_msg");i&&i.setValue(this._processMsgQueue[e-1].msg)}this._processMsgQueue.splice(e,1)}if(t){var o=WebSquare.ModelUtil.getSubmission(t);if(0===this._processMsgQueue.length&&!1!==o.hideProcessMsg)if(this.parentFrame&&!0===n.D.getBoolean(this.options.delegateProcessMsg)){for(var s=this.getParentFrame();s&&s.parentFrame&&!0===n.D.getBoolean(s.options.delegateProcessMsg);){var a=s._getRenderedParentFrame();if(!a)break;s=a}null!=s?s.hideProcessMessage():this.hideProcessMessage()}else this.hideProcessMessage()}}catch(t){r.w.printStackTrace(t,null,this),this.hideProcessMessage()}},d.prototype.deleteAjaxMessage=function(){try{this._processMsgAjaxCnt--,this._processMsgAjaxCnt<=0&&this.hideProcessMessage()}catch(t){r.w.printStackTrace(t,null,this),this.hideProcessMessage()}},d.prototype.showFrameModal=function(t){try{var e=t.className||"",i=(t.popupComponents,t.stackComponents||void 0),o=t.popupModal||!1;if(null==this.modalStack&&(this.modalStack=[]),null==this._wframePopupModal){var s=WebSquare.controlFactory.create(this.id+"_wq_frameModal",{className:"w2_wframe_modal",pluginName:"group",parseChild:!1},null,this,this,!0);s.writeTo(this),s.activate(),s.render.style.width="100%",s.render.style.height="100%",this.addControl(s),this._wframePopupModal=s}else this._wframePopupModal.render.style.height=this.render.scrollHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px";if(e?(this.modalStack[this.modalStack.length]=e,!0===o&&(this._wframePopupModal.className=e)):(this.modalStack[this.modalStack.length]="w2modal",!0===o&&(this._wframePopupModal.className="w2modal")),i)for(var a in null==this.stackComponents&&(this.stackComponents={}),i)if(null==this.stackComponents[a])this.stackComponents[a]=[i[a]];else{var l=this.stackComponents[a].length-1;if(l>=0)for(var h=l;h>=0;h--){var d=WebSquare.idCache[this.stackComponents[a][h].id];if(!d&&this.stackComponents[a][h].id){var c=n.D.getPopup(this.stackComponents[a][h].id);c&&(d=c.popupWin)}if(d&&d.render&&!0===o){var u=parseInt(d.getStyleProperty("z-index"),10),p=parseInt(n.D.getStyleProperty(this._wframePopupModal.render,"z-index"),10)-1;if(u==p)break;d.zIndex=u,d.setStyle("z-index",p)}}this.stackComponents[a].push(i[a])}!0===o&&this._wframePopupModal.show()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.hideFrameModal=function(t){try{if(null!=this._wframePopupModal){var e=!1,i=!1;if(null!=this.stackComponents)for(var o in this.stackComponents){var s=this.stackComponents[o];if(t){for(var a=this.stackComponents[o].length-1;a>=0;a--)if(s[a].id===t){s.splice(a,1),i=!0;break}}else s.pop(),i=!0;for(a=s.length-1;a>=0;a--){0!=a||0!==s.length&&!1!==s[a].modal||(e=!0);var l=WebSquare.idCache[s[a].id];if(l||(l=n.D.getComponentById(s[a].id)),l&&l.render){var h=l.zIndex;isNaN(h)&&(h=""),l.zIndex=void 0;var d=WebSquare.getBody();d.modal&&"block"===d.modal.style.display?(l.zIndex=n.D.getStyleProperty(d.modal,"z-index")-2,
l.setStyle("z-index",l.zIndex)):l.setStyle("z-index",h)}if("popup"!=o||!0===s[a].modal)break}}if(i&&this.modalStack.pop(),0==this.modalStack.length)this._modal=!1,null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null);else if(!0===e)this._modal=!1,this._wframePopupModal.hide();else{var c=this.modalStack[this.modalStack.length-1];this._wframePopupModal.className=c}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.modalEvent=function(t){try{this._wframePopupModal&&t&&(a.B.addListener(this._wframePopupModal.render,"onclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})),a.B.addListener(this._wframePopupModal.render,"ondblclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._cloneRecursive=function(t){try{if(!t)return;var e=this._clone(t);return e.initAsync=async function(){},e.makeFrameSync(!0,this.frameDoc,!0),e}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getPerfStr=function(t){try{return t+"."+this.id+"@"+this._pCount}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._markStart=function(){try{this._pCount++,WebSquare._performance.mark(this._getPerfStr("wframe.start"))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._markEnd=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.end")),WebSquare._performance.measure(this._getPerfStr("wframe"),this._getPerfStr("wframe.start"))}catch(t){r.w.printStackTrace(t,null,this)}},d._increasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount<0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0),WebSquare.uiplugin.wframe.__pendingWframeCount++}catch(t){r.w.printStackTrace(t,null,this)}},d._decreasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount--,WebSquare.uiplugin.wframe.__pendingWframeCount<=0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0)}catch(t){r.w.printStackTrace(t,null,this)}},d._isPending=function(){return WebSquare.uiplugin.wframe.__pendingWframeCount>0},d._addWframePreorder=function(t){try{WebSquare.uiplugin.wframe.__pendingWframePreOrderList.push(t)}catch(t){r.w.printStackTrace(t,null,this)}},d._addWframePostorder=function(t){try{WebSquare.uiplugin.wframe.__pendingWframePostOrderList.push(t)}catch(t){r.w.printStackTrace(t,null,this)}},d._execute=function(t,e){try{if(void 0!==e&&null!=e||(e={}),WebSquare.uiplugin.wframe._isPending())return;var i="postorder"===e.order?WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0):WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0);if(i.length<=0)return;switch(!0===e.reverse&&i.reverse(),t){case"script":for(var o="",s=0;s<i.length;s++){!0!==(d=WebSquare.idCache[i[s]])._executeStatus.script&&(d._executeStatus.script=!0,d.frameDoc&&"string"==typeof d.frameDoc.scriptSection&&d.frameDoc.scriptSection&&(o+=WebSquare.scriptIdentifier+d.getURL(d.getSrc())+'";',o+=d.frameDoc.scriptSection))}"executed"===WebSquare.scriptSectionExcuteFlag||!0===e.preExecuted?WebSquare.BootLoader.globalEval(o):WebSquare.scriptSection+=o;break;case"onpageload":for(s=0;s<i.length;s++){if(!0!==(d=WebSquare.idCache[i[s]])._executeStatus.onpageload&&(!e._isProcessMsgFrame||d.uuid===e._processMsgCompId)){d._executeStatus.onpageload=!0;for(var l=0;l<d.childControlList.length;l++)a.B.fireEvent(d.childControlList[l],"onpageload",d.getSrc())}}break;case"postscript":for(o="",s=0;s<i.length;s++){!0!==(d=WebSquare.idCache[i[s]])._executeStatus.postscript&&(d._executeStatus.postscript=!0,d.frameDoc&&"string"==typeof d.options.postScript&&d.options.postScript&&(o+=WebSquare.scriptIdentifier+d.getURL(d.getSrc())+'";',o+=d.options.postScript))}WebSquare.BootLoader.globalEval(o);break;case"lazyscript":var h=[];for(s=0;s<i.length;s++){!0!==(d=WebSquare.idCache[i[s]])._executeStatus.lazyscript&&(d._executeStatus.lazyscript=!0,
d.frameDoc&&d.lazyImportsArr&&d.lazyImportsArr.length>0&&(h=h.concat(d.lazyImportsArr),d.lazyImportsArr=[]))}h.length>0&&"executed"===WebSquare.scriptSectionExcuteFlag&&n.D.js.apply(null,h);break;case"onwframeload":for(s=0;s<i.length;s++){var d;!0!==(d=WebSquare.idCache[i[s]])._executeStatus.onwframeload&&(d._executeStatus.onwframeload=!0,a.B.fireEvent(d,"onwframeload",d.getSrc()))}}}catch(t){r.w.printStackTrace(t,null,this)}},d._clearPending=function(t){try{void 0!==t&&null!=t||(t={});for(var e={pendingWframeCount:WebSquare.uiplugin.wframe.__pendingWframeCount,pendingWframePreOrderList:WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0),pendingWframePostOrderList:WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0)};WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>0;){(i=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePreOrderList.pop()])&&!0!==t.keepStatus&&i._clearExecuteStatus()}for(;WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>0;){var i;(i=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePostOrderList.pop()])&&!0!==t.keepStatus&&i._clearExecuteStatus()}return WebSquare.uiplugin.wframe.__pendingWframeCount=0,e}catch(t){r.w.printStackTrace(t,null,this)}},d._setPending=function(t){try{WebSquare.uiplugin.wframe.__pendingWframeCount=t.pendingWframeCount,WebSquare.uiplugin.wframe.__pendingWframePreOrderList=t.pendingWframePreOrderList.slice(0),WebSquare.uiplugin.wframe.__pendingWframePostOrderList=t.pendingWframePostOrderList.slice(0)}catch(t){r.w.printStackTrace(t,null,this)}},d._showProcessMessage=async function(t,e,i){try{if("$blank"==e||!e||!t)return;var a=s.v.getConfiguration("processMsgFrameURL");if(a||(a=o.x._resourceURI+"message/processMsg.js"),null==t._processMsgComp){var l,h=t;!t.scope_obj||t.options&&"wframe"===t.options.pluginName||(h=t.scope_obj),h&&(l=h.uuid);var c=WebSquare.controlFactory.create(t.id+"_wq_processMsgComp",{src:a,className:"w2_proc",scope:!0,pluginName:"wframe",preload:!0},null,h,l,!0);await WebSquare.controlFactory.initAsync(),t._processMsgComp=c,c.writeTo(t),c._isProcessMsgFrame=!0,c.activate(),t.addControl(c)}t._processMsgComp.show();var u=t._processMsgComp.getObj("btn_hide");u&&u.hide();var p=t._processMsgComp.getObj("btn_cancel");p&&p.hide();var g=t._processMsgComp.getObj("text_msg");g&&g.setValue(e);var m=WebSquare.style.getStyle(t.render,"position"),f=0,b=0,y="";if("static"==m){y="static";for(var v=t.render.parentElement;v&&"BODY"!=v.tagName;){var w=WebSquare.style.getStyle(v,"position");if("relative"==w||"absolute"==w){y=w;break}v=v.parentElement}}var S=t.render.offsetLeft,C=t.render.offsetTop,_=t.render.offsetHeight,x=t.render.offsetWidth,I=t.render.scrollLeft,T=t.render.scrollTop;"relative"==m?(f=I,b=T):("absolute"==m||"static"==m&&"absolute"!=y)&&(f=S,b=C);var k,D,L=f+(t.getSize("outerWidth")-t._processMsgComp.getSize("outerWidth"))/2,W=b+(t.getSize("outerheight")-t._processMsgComp.getSize("outerheight"))/2;if(t._processMsgComp.setPosition(L,W),t.bind("onkeydown",t._handleProcessEvent),null==t._processMsgModal){var A=WebSquare.controlFactory.create(t.id+"_wq_proessMsgModal",{className:"w2_proc_modal",pluginName:"group",parseChild:!1},null,t,t,!0);A.writeTo(t),A.activate(),t.addControl(A),t._processMsgModal=A}if(t._processMsgModal.render.style.height=_+"px",t._processMsgModal.render.style.width=x+"px",t._processMsgModal.setPosition(f,b),t._processMsgModal.show(),i&&i.submissionId)"string"==typeof i.submissionId?(k=i.submissionId,D=WebSquare.ModelUtil.getSubmission(k)):k=(D=i.submissionId).id,D.abortTrigger&&p&&p.show(),D.hideTrigger&&u&&u.show(),!1!==D.hideProcessMsg&&t._processMsgQueue.push({scope_id:D.scope_id,org_id:D.org_id,id:k,msg:e});i&&!0===i.ajax&&t._processMsgAjaxCnt++,n.D.isMobile()||t.addClass("w2modalopened_wframe")}catch(e){r.w.printStackTrace(e,null,t),d._hideProcessMessage(t)}},d._hideProcessMessage=function(t){try{null!=t._processMsgComp&&(t._processMsgComp.hide(),
t.unbind("onkeydown",t._handleProcessEvent)),null!=t._processMsgModal&&t._processMsgModal.hide(),t._processMsgQueue=[],t._processMsgAjaxCnt=0,t.removeClass("w2modalopened_wframe")}catch(e){r.w.printStackTrace(e,null,t)}},d.__pendingWframeCount=0,d.__pendingWframePreOrderList=[],d.__pendingWframePostOrderList=[],d.scope=function(t){this._parent_uuid=t,this._identifier="wframe_scope"},d.scope.prototype.getRuntimeId=function(t,e){try{for(var i=this._parent_uuid,o="",s=WebSquare.idCache[this._parent_uuid].options.scopeVariable.split(","),a={},n=0;n<s.length;n++)a[s[n].wq_trim()]=!0;if("string"==typeof e){var l=e.split("parent").length-1;for(n=0;n<l&&null!=i&&null!=WebSquare.idCache[i];n++)i=WebSquare.idCache[i].parentFrame}return!0===a[t]?o=null!=i?WebSquare.idCache[i].id+"_"+t:t:null!=i&&null!=WebSquare.idCache[i].scope[t]?o=WebSquare.idCache[i].scope[t].id||"":WebSquare.idToUUID[t]&&WebSquare.idCache[WebSquare.idToUUID[t]]&&(o=WebSquare.strictMode&&null!=WebSquare.idCache[i]&&WebSquare.idCache[WebSquare.idToUUID[t]].scope_id!==WebSquare.idCache[i].id?"":t),o}catch(t){return r.w.printStackTrace(t,null,this),""}},d.scope.prototype.getSubmission=function(t,e){try{for(var i=WebSquare.ModelUtil.getModelByID(e),o=null,s=WebSquare.idCache[this._parent_uuid].id,a=WebSquare.idCache[this._parent_uuid].scope[t],n=0;n<i.submissions.length;n++){var l=i.submissions[n];if(a===l||l.scope_id===s&&l.id===t){o=l;break}}return o}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.executeSubmission=function(t,e,i,o,s){try{var a;if("string"==typeof t)a=this.getSubmission(t);else if(a=t,WebSquare.strictMode&&a.scope_id!==WebSquare.idCache[this._parent_uuid].id)return;return WebSquare.ModelUtil.executeSubmission(a,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.createSubmission=function(t,e){try{var i,o=t.id,s=this.getFrame(),a=s.id,n=a+"_";return t.id=n+o,t.scope_id=a,i=WebSquare.ModelUtil.createSubmission(t,e),s.scope[o]=WebSquare.ModelUtil.getSubmission(t.id,null,{scope_id:a}),null!=s.frameDoc&&s.frameDoc.models[0].submissions.push(s.scope[o]),i}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.deleteSubmission=function(t,e){try{var i=this.getSubmission(t),o=WebSquare.ModelUtil.deleteSubmission(i.id,e,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[t],o}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.createWorkflow=function(t,e){try{var i,o=t.id,s=this.getFrame(),a=s.id,n=a+"_";return t.id=n+o,t.scope_id=a,i=WebSquare.ModelUtil.createWorkflow(t,e),s.scope[o]=WebSquare.ModelUtil.getWorkflow(t.id,null,{scope_id:a}),i}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.deleteWorkflow=function(t,e){try{var i=this.getWorkflow(t),o=WebSquare.ModelUtil.deleteWorkflow(i.id,e,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[t],o}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getWorkflow=function(t,e){try{for(var i=WebSquare.ModelUtil.getModelByID(e),o=null,s=WebSquare.idCache[this._parent_uuid].id,a=WebSquare.idCache[this._parent_uuid].scope[t],n=0;n<i.workflows.length;n++){var l=i.workflows[n];if(a===l||l.scope_id===s&&l.id===t){o=l;break}}return o}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getRunningWorkflow=function(t,e){try{var i=null;if(t)null!=(n=this.getWorkflow(t,e))&&n.promiseStatus&&""!=n.promiseStatus&&(i=n);else for(var o=WebSquare.idCache[this._parent_uuid].id,s=WebSquare.ModelUtil.getModelByID(e),a=0;a<s.workflows.length;a++){var n;if((n=s.workflows[a]).scope_id===o&&n.promiseStatus&&""!=n.promiseStatus){i=n;break}}return i}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.isRunningWorkflow=function(t,e){try{return null!=this.getRunningWorkflow(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getRunningWorkflowID=function(t){try{var e=this.getRunningWorkflow(null,t),i=null;return null!=e&&(i=e.id),i}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.rejectWorkflow=function(t,e,i){try{var o=this.getRunningWorkflow(e,i),s=null
;return null!=o&&(o.promiseStatus="REJECT",o.promiseValue=t||"REJECT",s=o),s}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.executeWorkflow=function(t){try{return WebSquare.ModelUtil.executeWorkflow(t,{scope_function:this})}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.executeSerial=function(t,e,i,o,s){try{return WebSquare.ModelUtil.executeSerial(t,e,i,o,s,{scope_function:this})}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.executeWhilst=function(t,e,i,o,s,a,n){try{return WebSquare.ModelUtil.executeWhilst(t,e,i,o,s,a,n,{scope_id:this.getFrameId()})}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.ajax=function(t){try{if(t){var e=this.getFrame();e&&(t.scope=e.id),WebSquare.net.ajax(t)}}catch(t){r.w.printStackTrace(t),this.hideProcessMessage()}},d.scope.prototype.dynamicCreate=function(t,e,i,o,s,a){try{return n.D.dynamicCreate(t,e,i,o,s,a,this.getFrame())}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getFrameId=function(){try{return WebSquare.idCache[this._parent_uuid]&&WebSquare.idCache[this._parent_uuid].id||null}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getFrame=function(){try{return WebSquare.idCache[this._parent_uuid]}catch(t){r.w.printStackTrace(t)}},d.scope.prototype._getProcessMsgTargetFrame=function(){try{for(var t=WebSquare.idCache[this._parent_uuid].parentControl;t&&t.parentFrame&&"true"===n.D.getBoolean(t.options.delegateProcessMsg);){var e=t._getRenderedParentFrame();if(!e)break;t=e}return t}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getParentWindow=function(){try{var t=WebSquare.idCache[this._parent_uuid].getParentFrame();return null==t?this.getFrame().options.strictFrame?n.D.getParentWindow():window:t.scope}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getTopWindow=function(){try{return top}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.top=function(){try{return n.D.getTopWindow()}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.parent=function(){try{return this.getParentWindow()}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.main=function(){try{return n.D.getMainFrame()}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.self=function(){try{return this.getFrame().scope}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getComponentById=function(t){try{return n.D.getComponentById(t,this.getFrameId())}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getPopupParam=function(t){try{void 0!==t&&null!=t||(t={});var e="",i=WebSquare.idCache[this._parent_uuid],o=null!=i._dataObject&&""!=i.options.popupParam&&i._dataObject.name===i.options.popupParam.slice(1);o=o||!0===t.dataObject;var s=null!=i.paramObj&&""!=i.options.popupParam;if(o||s){var a=o?i._dataObject.type.charAt(0):i.options.popupParam.charAt(0),l=o?i._dataObject.data:i.paramObj[i.options.popupParam.slice(1)];switch(a){case"j":e=JSON.stringify(l);break;case"x":e=WebSquare.xml.serialize(l);break;case"a":e=n.D.parseArray(l);break;default:e=l}}return e}catch(t){return r.w.printStackTrace(t),""}},d.scope.prototype.getParameter=function(t){try{var e,i=this.getFrame();if(i._dataObject&&i._dataObject.name===t)e=i._dataObject.data;else{var o=WebSquare.idCache[this._parent_uuid].paramObj;null!=o&&(e=o[t]),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=e||(e=WebSquare.net.getParameter(t))}return e}catch(t){return r.w.printStackTrace(t),""}},d.scope.prototype.getAllParameter=function(){try{var t=JSON.parse(WebSquare.idCache[this._parent_uuid].options.params||null);for(var e in t)t[e]=t[e].slice(1);var i=this.getFrame(),o=i._getDataObject();return null!=o&&(null==t&&(t={}),i._getVersion()>=3?t[o.name]=o.data:t[o.name]=this.getPopupParam({dataObject:!0})),t}catch(t){return r.w.printStackTrace(t),null}},d.scope.prototype.getOptions=function(t){try{var e,i=this.getFrame(),a=s.v._getParentObj();if(i.options.strictFrame){if(WebSquare.isWebSquarePopup&&null!=a&&null!=a.WebSquare){var n=WebSquare.net.getParameter("popupID");e=a.WebSquare.dataObject[n].data}}else e=i._getDataObject("data")
;return o.x.extend(t||{},e)||{}}catch(t){return r.w.printStackTrace(t),""}},d.scope.prototype.setPopupParam=function(t,e){},d.scope.prototype.getPopupUrl=function(){try{var t=null;if(this.isWFramePopup()||this.getFrame()._getVersion()<3){var e=WebSquare.idCache[this._parent_uuid].getSrc();t=WebSquare.idCache[this._parent_uuid].getURL(e)}return t}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getPopupId=function(){try{var t=null;return this.isWFramePopup()&&(t=WebSquare.idCache[this._parent_uuid].paramObj.popupID),t}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.isWFramePopup=function(t,e){try{if(!t)return WebSquare.idCache[this._parent_uuid]._isWframePopup;for(var i=WebSquare.idCache[this._parent_uuid];i;){if(i.options.strictFrame)return!!e&&n.D.isPopup();if(i._isWframePopup)return i._isWframePopup;i=i.getParentFrame()}}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.isPopup=function(t){try{return this.getFrame().options.strictFrame?n.D.isPopup():this.isWFramePopup(t,!0)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getPopup=function(t){try{return n.D.getPopup(t,this._parent_uuid)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getPopupList=function(t){try{return n.D.getPopupList(t,this._parent_uuid)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getPopupWindow=function(t){try{return n.D.getPopupWindow(t,this._parent_uuid)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getPopupWindowList=function(t){try{return n.D.getPopupWindowList(t,this._parent_uuid)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.openPopup=function(t,e,i,o){try{void 0!==e&&null!=e||(e={}),e.scope_uuid||(e.scope_uuid=this._parent_uuid),n.D.openPopup(t,e,i,o)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.closePopup=function(t,e){try{var i=t;void 0===t&&(i=this.getParameter("popupID"));var o=this.getPopup(i);if(o){var s=o.id;o.close(i,e),WebSquare.uiplugin.popup.startChkModalClosed(),!0===o.useWindowPopup()&&WebSquare.uiplugin.popup.removeFromPopupList(s)}else this.getFrame().options.strictFrame&&n.D.closePopup(i,e)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.reinitialize=function(t){try{this.getFrame().reload(t)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.getMetaValue=function(t){try{if(this.getFrame().options.strictFrame)return n.D.getMetaValue(t);var e="",i=WebSquare.Elem.api.getElementsByTagName(this.getFrame().frameDoc.getPageInfo(),"head")[0];return i&&(e=WebSquare.Elem.api.getAttribute(i,t)),e}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.multipleExcelUpload=function(t){try{t.scopeId=this.id,n.D.multipleExcelUpload(t)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.multipleExcelDownload=function(t){try{t.scopeId=this.id,n.D.multipleExcelDownload(t)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.$=function(t){try{for(var e,i=t.split("#"),o=0;o<i.length;o++){var s=i[o].search(/[\W]/);if(0!==s){var a,l="";s<0?a=i[o]:(a=i[o].slice(0,s),l=i[o].slice(s));var h=this.getComponentById(a);null!=h&&(i[o]=h.id+l)}}e=i.join("#");var d="";return this.getFrame().options.strictFrame||(d="#"+this.getFrameId()+" "),n.D.jQuerySelector(d+e)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.watermark=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.getFrame(),o=i.id;e.canvasId||(e.canvasId=o+"_watermarkCanvas"),e.target||(e.target=i),n.D.watermark(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.emit=function(t){try{var e=[].slice.apply(arguments,[0]);return e.shift(),this.getFrame().trigger(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.updateSuffix=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getFrame().id;t.scopeId=e,n.D.updateSuffix(t)}catch(t){r.w.printStackTrace(t)}},d.scope.bigDecimal=function(t){try{var e=function(t){return WebSquare.bigDecimal(t)};return e.calc=(i=t,function(t,e){return WebSquare.bigDecimal.calc(t,e,i)}),e}catch(t){r.w.printStackTrace(t)}var i},d.scope.data=function(t){this._parent_id=t,this._identifier="wframe_scope_data"},
d.scope.data.prototype.get=function(t,e,i){try{return i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.get(t,e,i)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.set=function(t,e,i,o){try{return o||(o={}),o.scope_obj||(o.scope_obj=this._parent_id),WebSquare.DataCollection.api.set(t,e,i,o)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.create=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.create(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.remove=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.remove(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.bindPath=function(t){try{var e=t.split("."),i={};return i.collectionId=e[0].replace(/^data:/,""),e>1&&(i.columnId=e[1]),i}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.getAllDataCollection=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getAllDataCollection(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.getBroadcast=function(t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getBroadcast(t)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.getInfo=function(t,e,i,o){try{return void 0!==o&&null!=o||(o={}),o.scope_obj||(o.scope_obj=this._parent_id),WebSquare.DataCollection.api.getInfo(t,e,i,o)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.getOption=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getOption(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.setBroadcast=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.setBroadcast(t,e)}catch(t){r.w.printStackTrace(t)}},d.scope.data.prototype.setOption=function(t,e,i){try{return void 0!==i&&null!=i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.setOption(t,e,i)}catch(t){r.w.printStackTrace(t)}},d.scope.model=function(t){this.scope_id=t},d.scope.model.prototype.setInstanceValue=function(t,e,i){return WebSquare.ModelUtil.setInstanceValue(t,e,i,this.scope_id)},d.scope.model.prototype.getInstanceValue=function(t,e){return WebSquare.ModelUtil.getInstanceValue(t,e,this.scope_id)},d.scope.model.prototype.findInstanceNode=function(t,e){return WebSquare.ModelUtil.findInstanceNode(t,e,this.scope_id)},d.scope.model.prototype.findInstanceNodes=function(t,e){return WebSquare.ModelUtil.findInstanceNodes(t,e,this.scope_id)},d.scope.model.prototype.findSerializedNode=function(t,e){return WebSquare.ModelUtil.findSerializedNode(t,e,this.scope_id)},d.scope.model.prototype.removeInstanceNode=function(t){return WebSquare.ModelUtil.removeInstanceNode(t,this.scope_id)},d.scope.model.prototype.removeInstanceNodes=function(t){return WebSquare.ModelUtil.removeInstanceNodes(t,this.scope_id)},d.scope.model.prototype.removeChildNodes=function(t){return WebSquare.ModelUtil.removeChildNodes(t,this.scope_id)},d.scope.model.prototype.copyNode=function(t,e,i,o){return WebSquare.ModelUtil.copyNode(t,e,i,o,this.scope_id)},d.scope.prototype.updateSuffix=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getFrame().id;t.scopeId=e,n.D.updateSuffix(t)}catch(t){r.w.printStackTrace(t)}},d.scope.prototype.hideProcessMessage=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.idCache[this._parent_uuid].id;return t.scope||(t.scope=e),WebSquare.layer.hideProcessMessage(t)}catch(t){r.w.printStackTrace(t)}}},3043:(t,e,i)=>{i.r(e),i.d(e,{widgetContainer:()=>l,widget:()=>h});var o=i(2981),s=i(2085),r=i(1960),a=i(3082),n=i(6615),l=function(t,e,i){WebSquare.uiplugin.widgetContainer.isImported||(WebSquare.uiplugin.widgetContainer.isImported=!0),n.s.call(this,t,e,i)}
;o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.widgetContainer",pluginName:"widgetContainer",useConfig:!0,userEvents:["onload","onwidgetload","onwidgetmove","onwidgetresize","onwidgetopen","onwidgetfix","onwidgetmaximize","onwidgetminimize","onbeforewidgetclose","onafterwidgetclose","onwidgetrestore","onclickcustombtn"],mode:"pushpull",threshold:null,cols:1,unitHeightPixel:25,verticalMargin:0,horizontalMargin:0,minUnitWidth:1,minUnitHeight:1,maxUnitWidth:null,maxUnitHeight:null,widgetMove:!0,widgetResize:!0,forceMinMax:!1,popupEvent:"",async:!1,processMsgFrame:!1,preventMaximizeByTitle:!1},l.prototype.initialize=function(t){this.widgetIdCount=0,this.widgetLoadedCount=0,this.widgets=[],this.dirtyArr=[],this.changingWidget=null,this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize,this.preventMaximizeByTitle=this.options.preventMaximizeByTitle},l.prototype.toHTML=function(){var t=[],e=""===this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2widgetContainer "+this.options.className+"'>"),t.push("<div id='"+this.id+"_content'  class='w2widgetContainer_content'>"),t.push("</div>"),t.push("</div>"),t.join("")},l.prototype.setAction=function(){this.unitWidth=100/this.options.cols,this.unitHeightPixel=this.options.unitHeightPixel,this.contentRender=this.getElementById(this.id+"_content"),this.redraw(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.handleResizeEvent)),this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onMSPointerDown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent))},l.prototype.checkResize=function(t){this.handleResizeEvent()},l.prototype.handleResizeEvent=function(){this.redraw()},l.prototype._changeWidget=function(t,e,i,o,s,r){return r||(r={}),!(t.isFixed()&&!r.force)&&(!0===t.dirty?(a="number"==typeof e?e:t.x,n="number"==typeof i?i:t.y,l="number"==typeof o?o:t.unitWidth,h="number"==typeof s?s:t.unitHeight):(a="number"==typeof e?e:t.oriX,n="number"==typeof i?i:t.oriY,l="number"==typeof o?o:t.oriUnitWidth,h="number"==typeof s?s:t.oriUnitHeight,t.dirty=!0,this.dirtyArr.push(t)),!!this.isValidPos(a,n,l,h)&&(t.x=a,t.y=n,t.unitWidth=l,t.unitHeight=h,!0));var a,n,l,h},l.prototype._commit=function(){for(var t,e=0;e<this.dirtyArr.length;e++)(t=this.dirtyArr[e])&&(t.oriX=t.x,t.oriY=t.y,t.oriUnitWidth=t.unitWidth,t.oriUnitHeight=t.unitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},l.prototype._rollback=function(){for(var t,e=0;e<this.dirtyArr.length;e++)(t=this.dirtyArr[e])&&(t.x=t.oriX,t.y=t.oriY,t.unitWidth=t.oriUnitWidth,t.unitHeight=t.oriUnitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},l.prototype._getMaxRect=function(t){var e=t.getMaximizeConfig(),i=t.getRect(),o=e.left<0?0:i.x-e.left,s=e.right<0?this.options.cols-i.x:i.unitWidth+e.right;o<=0?(s=s+i.x-o,o=0):s+=e.left,o+s>this.options.cols&&(o<s-this.options.cols?(o=0,s=this.options.cols):o=this.options.cols-s);var r=e.top<0?0:i.y-e.top,a=i.unitHeight+e.bottom;return r<=0?(a=a+i.y-r,r=0):a+=e.top,e.bottom<0&&(a=1/0),{x:o,y:r,unitWidth:s,unitHeight:a}},l.prototype._getMarginedWidth=function(t){return"number"==typeof t?t-this.verticalMargin:parseInt(t,10)-this.verticalMargin},l.prototype._getMarginedHeight=function(t){return"number"==typeof t?t-this.horizontalMargin:parseInt(t,10)-this.horizontalMargin},l.prototype._getMarginedLeft=function(t){return"number"==typeof t?t+this.verticalMargin/2:parseInt(t,10)+this.verticalMargin/2},l.prototype._getMarginedTop=function(t){return"number"==typeof t?t+this.horizontalMargin/2:parseInt(t,10)+this.horizontalMargin/2},l.prototype._recalcSize=function(){if(this.render){
this.fullWidth=Math.max(this.render.scrollWidth,this.render.clientWidth),this.fullWidth<=0&&(this.fullWidth=parseInt(this.render.style.width,10)),this.verticalMargin=this.options.verticalMargin/this.fullWidth*100,this.horizontalMargin=this.options.horizontalMargin;for(var t=0,e=0;e<this.widgets.length;e++){var i=this.widgets[e],o=i.isMaximized()?this._getMaxRect(i):i.getRect();o&&o.unitHeight!==1/0&&t<o.y+o.unitHeight&&(t=o.y+o.unitHeight)}var s=t*this.unitHeightPixel;this.fullHeight=Math.max(this.render.scrollHeight,this.render.clientHeight,s),WebSquare.BootLoader.fullViewRatio&&(this.zoomLevel=WebSquare.BootLoader.fullViewRatio),this.options.threshold&&this.options.threshold>this.fullWidth?(this.oneColumn=!0,this.widgetMove=!1,this.widgetResize=!1):(this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize)}},l.prototype._renderWithRect=function(t,e,i){if(null!=i){if(t||"object"!=typeof i||i.appendTo(this),!i.parentControl)return void(i.render=void 0);t=i.render}"number"==typeof e.unitWidth?t.style.width=this._getMarginedWidth(e.unitWidth*this.unitWidth)+"%":t.style.width=this._getMarginedWidth(e.unitWidth)+"%","number"==typeof e.unitHeight?t.style.height=this._getMarginedHeight(e.unitHeight*this.unitHeightPixel)+"px":t.style.height=this._getMarginedHeight(e.unitHeight)+"px","number"==typeof e.x?t.style.left=this._getMarginedLeft(e.x*this.unitWidth)+"%":t.style.left=this._getMarginedLeft(e.x)+"%","number"==typeof e.y?t.style.top=this._getMarginedTop(e.y*this.unitHeightPixel)+"px":t.style.top=this._getMarginedTop(e.y)+"px"},l.prototype.redraw=function(){if(this._recalcSize(),this.oneColumn){var t=0;this.widgets.sort((function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y}))}for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e],o=i.getRect();if(this.oneColumn){if(o.x=0,o.unitWidth=this.options.cols,o.y=t,t+=o.unitHeight,this.options.forceMinMax){if(i.isMaximized()){(s=this._getMaxRect(i)).x=o.x,s.unitWidth=o.unitWidth,s.unitHeight=s.unitHeight===1/0?this.fullHeight+"px":s.unitHeight,this._renderWithRect(i.render,s,i);continue}if(i.isMinimized()){r=this.getElementById(i.id+"_title"),a=parseInt(r.offsetHeight||WebSquare.style.getStyle(r,"height"),10);o.unitHeight=a+this.horizontalMargin+"px",this._renderWithRect(i.render,o,i)}}}else{if(i.isMaximized()){var s;(s=this._getMaxRect(i)).unitHeight=s.unitHeight===1/0?this.fullHeight+"px":s.unitHeight,this._renderWithRect(i.render,s,i);continue}if(i.isMinimized()){var r=this.getElementById(i.id+"_title"),a=parseInt(r.offsetHeight||WebSquare.style.getStyle(r,"height"),10);o.unitHeight=a+this.horizontalMargin+"px",this._renderWithRect(i.render,o,i)}}this.ghost&&i.id===this.dragDropElem.id?this._renderWithRect(this.ghost,o,null):(this._renderWithRect(i.render,o,i),i._setTitleEllipsis())}},l.prototype.setCols=function(t){var e=this.unitWidth,i=this.options.cols,o=!0;this.unitWidth=100/t,this.options.cols=t;for(var s=0;s<this.widgets.length;s++)if(!this.isValidPos(this.widgets[s].x,this.widgets[s].y,this.widgets[s].unitWidth,this.widgets[s].unitHeight)){o=!1;break}o?this.redraw():(this.unitWidth=e,this.options.cols=i,$l(WebSquare.language.getMessage("WidgetContainer_setCols_warning")))},l.prototype.isValidPos=function(t,e,i,o){if(t!==parseInt(t,10)||e!==parseInt(e,10)||i!==parseInt(i,10)||o!==parseInt(o,10))return!1;var s=t>=0&&t+i<=this.options.cols,r=e>=0,a=i>=(this.options.minUnitWidth||1),n=o>=(this.options.minUnitHeight||1);return s&&r&&a&&n},l.prototype._checkInclusion=function(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.unitWidth>=e.x+e.unitWidth&&t.y+t.unitHeight>=e.y+e.unitHeight},l.prototype._checkCollision=function(t,e){return t.x+t.unitWidth>e.x&&t.x<e.x+e.unitWidth&&t.y+t.unitHeight>e.y&&t.y<e.y+e.unitHeight},l.prototype._checkSwitchable=function(t,e){var i=t._getOriRect();if(!this._checkInclusion(i,e)||this._checkCollision(t,e))return!1;for(var o=0;o<this.widgets.length;o++){var s=this.widgets[o],r=s._getOriRect()
;if(s.id!==t.id&&s.id!==e.id&&this._checkCollision(e,r))return!1}return!0},l.prototype._getColArr=function(t){for(var e=[],i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o&&o.id!==t.id){var s=this._getMaxRect(o);if(o.isMaximized()&&(!s||this._checkCollision(t,s)))return!1;if(this._checkCollision(t,o)){if(o.isFixed()&&this.changingWidget===t)return!1;e.push(o)}}}return e},l.prototype._pushWidgets=function(t){var e=[],i=this._getColArr(t);if(!1===i)return!1;i.sort((function(t,e){return e.y-t.y}));for(var o=0;o<i.length;o++){var s=i[o];if(s&&s.id!==t.id)if(s.isFixed())e.push(s);else if(this._changeWidget(s,null,t.y+t.unitHeight,null,null),!this._pushWidgets(s))return!1}for(var r=0;r<e.length;r++)this._pushWidgets(e[r]);return!0},l.prototype._pullWidgets=function(){if("pushpull"===this.options.mode){this.widgets.sort((function(t,e){return t.y-e.y}));for(var t=0;t<this.widgets.length;t++){var e=0,i=this.widgets[t];if(!i.isFixed()){for(var o=0;o<t;o++){var s=this.widgets[o];if(i.x+i.unitWidth>s.x&&i.x<s.x+s.unitWidth){if(s.isFixed()&&e+i.unitHeight<=s.y){var r=this.widgets.splice(t,1)[0];this.widgets.splice(o,0,r);break}s.y+s.unitHeight>e&&(e=s.y+s.unitHeight)}}i.y!==e&&this._changeWidget(i,null,e,null,null)}}}},l.prototype._calcSwitchPos=function(t,e,i,o,s){var r,a,n=t._getOriRect();if(this._checkCollision(t,n)){var l=0,h=0;t.oriX>t.x&&t.x+t.unitWidth>t.oriX&&(l=t.x+t.unitWidth-t.oriX),t.oriY>t.y&&t.y+t.unitHeight>t.oriY&&(h=t.y+t.unitHeight-t.oriY);for(var d=i[0],c=i[0],u=1;u<i.length;u++)d=o(d,i[u]),c=s(c,i[u]);d=d.oriX,c=c.oriY,r=t.oriX+l+(e.oriX-d),a=t.oriY+h+(e.oriY-c)}else r=t.oriX+(e.oriX-t.x),a=t.oriY+(e.oriY-t.y);return{newX:r,newY:a}},l.prototype._resolveCollision=function(t){try{if("pushpull"===this.options.mode){if(!1===this._pushWidgets(t))return!1;this._pullWidgets()}else{if("switch"!==this.options.mode)return!1;var e=this._getColArr(t);if(!1===e)return!1;for(var i=function(t,e){return t.oriX<=e.oriX?t:e},o=function(t,e){return t.oriY<=e.oriY?t:e},r=0;r<e.length;r++){var a=e[r];if(!a||a.isFixed())return!1;var n=this._calcSwitchPos(t,a,e,i,o),l=n.newX,h=n.newY;if(!this.isValidPos(l,h,a.unitWidth,a.unitHeight))return!1;if(this._changeWidget(a,l,h,null,null),!this._checkSwitchable(t,a))return!1}}return!0}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getWidgetById=function(t){for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e];if(i.id===t||i.id===this.id+"_"+t)return i}return null},l.prototype.getWidgetByTitle=function(t){for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e];if(i.title===t)return i}return null},l.prototype.importWidgets=function(t,e){try{return e&&this._removeWidgets(this.widgets),this.addWidgets(t||[])}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.importWidget=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if((o.id===t||o.id===this.id+"_"+t)&&(e.id=t,this.removeWidgets([o.id])&&this.addWidgets(e)))return!0}return!1}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.exportWidgets=function(){try{for(var t=[],e=0;e<this.widgets.length;e++){var i=this.widgets[e];t.push(i.getWidgetInfo())}return t}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setTitleClass=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){var r=this.getElementById(o.id+"_title");o.titleClass=e,this.addClass(r,e)}}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.removeTitleClass=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){var r=this.getElementById(o.id+"_title");this.removeClass(r,e)}}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.exportWidget=function(t){try{for(var e=null,i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){e=o.getWidgetInfo();break}}return e}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.addWidgets=function(t){try{a.D.isArray(t)||(t=[t])
;for(var e=null,i=[],o=!0,n=0;n<t.length;n++){if((e=t[n]).x=parseInt(e.x,10)||0,e.y=parseInt(e.y,10)||0,e.unitWidth=parseInt(e.unitWidth,10),e.unitHeight=parseInt(e.unitHeight,10),!this.isValidPos(e.x,e.y,e.unitWidth,e.unitHeight)){o=!1;break}if(e.id){if(null!==this.getWidgetById(e.id))return void $l("["+this.id+"] 중복된 widget id를 사용했습니다.");e.org_id=e.id,e.id=this.id+"_"+e.id}else{for(var l="widget"+this.widgetIdCount++;null!==this.getWidgetById(l);)l="widget"+this.widgetIdCount++;e.id=this.id+"_"+l,e.org_id=l}void 0===e.processMsgFrame&&!0===this.options.processMsgFrame&&(e.processMsgFrame=!0);var h=new WebSquare.uiplugin.widget(e.id,e);if(h.appendTo(this,this.parentFrame),this.widgets.push(h),i.push(h),!this._resolveCollision(h)){o=!1;break}}if(o){for(var d=0;d<i.length;d++){i[d].activate()}this._commit()}else $l("["+this.id+"] 해당 위치에 widget을 추가할 수 없습니다."),this.widgetIdCount--,this._rollback(),this._removeWidgets(i),i=null;return this.redraw(),r.B.fireEvent(this,"onload"),i}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.removeWidgets=function(t){try{a.D.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var o=t[i];"object"==typeof o&&null!==o&&(o=o.id);var r=this.getWidgetById(o);if(!r)return null;e.push(r)}return this._removeWidgets(e)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype._removeWidgets=function(t){try{a.D.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++)e.push(t[i].id);for(i=0;i<e.length;i++)for(var o=0;o<this.widgets.length;o++)if(this.widgets[o].id===e[i]){this.widgets.splice(o,1)[0].remove();break}return this._commit(),this._pullWidgets(),this.redraw(),e}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.removeWidgetsAll=function(){try{for(var t=this.widgets.length,e=0;e<t;e++)this.widgets[e].remove();return void(this.widgets=[])}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.moveWidget=function(t,e,i){try{if(!this.widgetMove)return!1;var o=this.getWidgetById(t);if(o.isFixed())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,e,i,null,null))return!1;var a=this._resolveCollision(o);if(a){var n=o._getOriRect();this._commit(),r.B.fireEvent(this,"onwidgetmove",t,o.getRect(),n)}else this._rollback();return this.redraw(),this.changingWidget=null,a}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype._moveWidget=function(t,e,i){try{if(!this.widgetMove)return!1;var o=this.getWidgetById(t);if(o.isFixed())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,e,i,null,null))return!1;var r=this._resolveCollision(o);return r||this._rollback(),this.redraw(),this.changingWidget=null,r}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.resizeWidget=function(t,e,i,o){try{if(o||(o={}),!this.widgetResize&&!o.force)return!1;var a=this.getWidgetById(t);if(a.isFixed()&&!a.options.minimizeonfixed)return!1;if(this.changingWidget=a,this._rollback(),!this._changeWidget(a,null,null,e,i,o))return!1;var n=this._resolveCollision(a);if(n){var l=a._getOriRect();this._commit(),r.B.fireEvent(this,"onwidgetresize",t,a.getRect(),l)}else this._rollback();return this.redraw(),this.changingWidget=null,n}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype._resizeWidget=function(t,e,i){try{if(!this.widgetResize)return!1;var o=this.getWidgetById(t);if(o.isFixed()||o.isMinimized())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,null,null,e,i))return!1;var r=this._resolveCollision(o);return r||this._rollback(),this.redraw(),this.changingWidget=null,r}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype._getClickPos=function(t){var e,i;return t.touches&&1==t.touches.length?(e=t.touches[0].pageX,i=t.touches[0].pageY):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(e=t.pageX,i=t.pageY):(e=r.B.getMouseX(t),i=r.B.getMouseY(t)),this.zoomLevel&&(e/=this.zoomLevel,i/=this.zoomLevel),{posX:e,posY:i}},l.prototype._makeGhost=function(t){this.ghost=document.createElement("div"),this.contentRender.appendChild(this.ghost),
this.ghost.style.left=this.dragDropElem.style.left,this.ghost.style.top=this.dragDropElem.style.top,this.ghost.style.width=this.dragDropElem.style.width,this.ghost.style.height=this.dragDropElem.style.height,this.ghost.className="w2widget_ghost";var e=this._getClickPos(t);this.ghost.oriX=e.posX-this.dragDropElem.offsetLeft,this.ghost.oriY=e.posY-this.dragDropElem.offsetTop},l.prototype.enableWidgetTitle=function(t){if("boolean"==typeof t)for(var e=0,i=this.widgets.length;e<i;e++)this.widgets[e].showTitle(t)},l.prototype.enableWidgetMove=function(t){"boolean"==typeof t&&(this.options.widgetMove=t,this.widgetMove=t)},l.prototype.enableWidgetResize=function(t){if("boolean"==typeof t){this.options.widgetResize=t,this.widgetResize=t;for(var e=0,i=this.widgets.length;e<i;e++)this.widgets[e].setResizable(t)}},l.prototype.handleMousedownEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2widget_title_buttons")&&(this.dragDropElem=null,e.stop()),e.match("w2widget_btnResize"))this.options.widgetResize?(this.dragDropElem=e.getElement().parentNode,this.isResizing=!0):(this.dragDropElem=null,this.isResizing=!1),e.stop();else if(e.match("w2widget_title"))this.options.widgetMove?(this.dragDropElem=e.getElement().parentNode,this.isMoving=!0):(this.dragDropElem=null,this.isMoving=!1),e.stop();else if(e.match("w2widget_btnMinimize")){e.element.className.indexOf("w2widget_btnMinimizeOn")>-1?WebSquare.style.removeClass(e.element,"w2widget_btnMinimizeOn"):WebSquare.style.addClass(e.element,"w2widget_btnMinimizeOn")}else if(e.match("w2widget_btnMaximize")){e.element.className.indexOf("w2widget_btnMaximizeOn")>-1?WebSquare.style.removeClass(e.element,"w2widget_btnMaximizeOn"):WebSquare.style.addClass(e.element,"w2widget_btnMaximizeOn")}e=null;var i=function(){var t=this;t.dragDropElem=null,t.isResizing=!1,t.isMoving=!1};if(this.dragDropElem){r.B.stopEvent(t);var o=this.getWidgetById(this.dragDropElem.id);(this.isResizing||this.isMoving)&&(!this.isResizing||this.widgetResize&&o.isResizable())&&(!this.isMoving||this.widgetMove&&o.isMovable())?(o.addClass("w2widget_changing"),t.touches&&1==t.touches.length?(this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.PointerEvent?(this.event.addListener(this.render,"onpointermove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onpointerleave",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(this.event.addListener(this.render,"onMSPointerMove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onMSPointerUp",this.event.bindAsEventListener(this,this.handleMouseupEvent))):(this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseupEvent)))):i.call(this)}else i.call(this)},l.prototype.handleMousemoveEvent=function(t){if(this.dragDropElem){this.ghost||this._makeGhost(t);var e=this._getClickPos(t),i=e.posX,o=e.posY;if(!0===this.isResizing){this.getWidgetById(this.dragDropElem.id)._setTitleEllipsis(),i-=WebSquare.style.getAbsoluteLeft(this.contentRender),o-=WebSquare.style.getAbsoluteTop(this.contentRender);var s=parseFloat(this.ghost.style.left),a=100*(i/this.fullWidth-s/100)+this.verticalMargin,n=o-parseInt(this.ghost.style.top,10)+this.horizontalMargin;a=(a=a<this.unitWidth?this.unitWidth:a)+s>100?100-s:a,n=n<this.unitHeightPixel?this.unitHeightPixel:n,
this.dragDropElem.style.width=a-this.verticalMargin+"%",this.dragDropElem.style.height=n-this.horizontalMargin+"px",a=Math.round(a/this.unitWidth),n=Math.round(n/this.unitHeightPixel),this.ghost.oldWidth===a&&this.ghost.oldHeight===n||(this.ghost.oldWidth=a,this.ghost.oldHeight=n,this.relocResult=this._resizeWidget(this.dragDropElem.id,a,n))}else if(!0===this.isMoving){i-=this.ghost.oriX,o-=this.ghost.oriY,this.dragDropElem.style.left=i+"px",this.dragDropElem.style.top=o+"px";var l=Math.round((i/this.fullWidth*100-this.verticalMargin/2)/this.unitWidth),h=Math.round((o-this.horizontalMargin/2)/this.unitHeightPixel),d=Math.round(parseFloat(this.ghost.style.width)/this.unitWidth);l=(l=l<0?0:l)+d>this.options.cols?this.options.cols-d:l,h=h<0?0:h,this.ghost.oldX===l&&this.ghost.oldY===h||(this.ghost.oldX=l,this.ghost.oldY=h,this.relocResult=this._moveWidget(this.dragDropElem.id,l,h))}r.B.preventDefault(t)}},l.prototype.handleMouseupEvent=function(){if(this.dragDropElem){this.ghost&&(this.dragDropElem.parentNode.removeChild(this.ghost),this.ghost=null);var t=this.getWidgetById(this.dragDropElem.id);if(t.removeClass("w2widget_changing"),this.dragDropElem=null,this.relocResult){var e=t._getOriRect();this._commit(),this.isMoving?r.B.fireEvent(this,"onwidgetmove",t.id,t.getRect(),e):this.isResizing&&r.B.fireEvent(this,"onwidgetresize",t.id,t.getRect(),e)}this.isResizing=!1,this.isMoving=!1,this.redraw()}},l.prototype.refreshAdaptive=function(){try{this.redraw();for(var t=0;t<this.childControlList.length;t++)this.childControlList[t].refreshAdaptive&&this.childControlList[t].refreshAdaptive()}catch(t){s.w.printStackTrace(t)}};var h=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(h.prototype,n.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.widget",pluginName:"widget",title:"",titleClass:"",hasTitleBar:!0,src:"",x:0,y:0,unitWidth:1,unitHeight:1,scope:!1,params:void 0,fixed:!1,minimizeonfixed:!1,maximizeonfixed:!1,oriFixed:!1,minimized:!1,maximized:!1,resized:!1,maxConfig:{left:-1,right:-1,top:-1,bottom:-1},buttons:[{useAPI:"toggleFixed",id:"btnFix",className:"w2widget_btnFix",isCustom:!1},{useAPI:"toggleMinimized",id:"btnMinimize",className:"w2widget_btnMinimize",isCustom:!1},{useAPI:"toggleMaximized",id:"btnMaximize",className:"w2widget_btnMaximize",isCustom:!1},{useAPI:"closeWidget",id:"btnClose",className:"w2widget_btnClose",isCustom:!1}],maximizeFormatter:null,buttonFormatter:null},h.prototype.initialize=function(t){this.src=this.options.src,this.scope=this.options.scope,this.params=this.options.params,this.minimized=this.options.minimized,this.maximized=this.options.maximized,this.x=this.options.x,this.y=this.options.y,this.unitWidth=this.options.unitWidth,this.unitHeight=this.options.unitHeight,this.fixed=this.options.fixed,this.oriFixed=this.options.oriFixed,this.oriX=this.x,this.oriY=this.y,this.oriUnitWidth=this.unitWidth,this.oriUnitHeight=this.unitHeight,this.dirty=!1,this.title=this.options.title,this.resized=this.options.resized,this.savedUnitHeight=null,this.buttons=this.options.buttons,this.maxConfig=this.options.maxConfig,this.maximizeFormatter=this.options.maximizeFormatter,this.buttonFormatter=this.options.buttonFormatter,this.titleClass=this.options.titleClass,this.maximizeFormatter&&this.setMaximizeFormatter(this.maximizeFormatter),this.buttonFormatter&&this.setButtonFormatter(this.buttonFormatter)},h.prototype.toHTML=function(){var t=[],e=""===this.options.style?"":"style='"+this.options.style+"'";if(this.isFixed())var i="w2widget w2widget_fixed";else i="w2widget";if(this.options.className&&(i+=" "+this.options.className),t.push("<div id='"+this.id+"' "+e+" class='"+i+"'>"),this.options.hasTitleBar){t.push("<div id='"+this.id+"_title' class='w2widget_title "+this.options.titleClass+"'>"),t.push("<div id='"+this.id+"_title_icon' class='w2widget_icon'></div>"),t.push("<span id='"+this.id+"_title_text' class='w2widget_title_text'>"+this.options.title+"</span>"),
t.push("<div id='"+this.id+"_title_buttons' class='w2widget_title_buttons'>");for(var o=0;o<this.buttons.length;o++){var s=this.buttons[o];t.push("<div id='"+this.id+"_title_"+s.id+"' class='"+s.className+"'></div>")}t.push("</div>"),t.push("</div>")}return t.push("<div id='"+this.id+"_btnResize' class='w2widget_btnResize'></div>"),t.push("</div>"),t.join("")},h.prototype.setAction=function(){var t=this.parentControl.options&&this.parentControl.options.async,e=new WebSquare.uiplugin.wframe(this.id+"_content",{className:this.options.hasTitleBar?"w2widget_content":"w2widget_content_notitlebar",src:this.options.src,scope:this.options.scope,mode:t?"async":"sync",processMsgFrame:this.options.processMsgFrame,isWidget:!0});try{var i=this.options.org_id,o=this.parentControl.id,n=this.parentControl.uuid;if(e.options.scope&&e.options.scopeFunction)for(var l=e.options.scopeVariable.split(","),h=0;h<l.length;h++){var d=l[h];e.scopeVariable[d]&&e.scopeVariable[d][e.options.scopeFunction]&&(e.scopeVariable[d][e.options.scopeFunction].widget={},e.scopeVariable[d][e.options.scopeFunction].widget.getWidgetId=function(){return i},e.scopeVariable[d][e.options.scopeFunction].widget.getWidgetContainerId=function(){return o},e.scopeVariable[d][e.options.scopeFunction].widget.getWidgetContainer=function(){return WebSquare.idCache[n]})}}catch(t){s.w.printStackTrace(t,null,this)}e.appendTo(this,this.parentFrame),e.makeFrame(!0),e.activeStatus="active",r.B.fireEvent(this.parentControl,"onwidgetload",this.options.id,this.options.org_id),this.resized=this.parentControl.widgetResize,this.isResizable()&&!1!==this.parentControl.widgetResize||this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),!1===t&&a.D.isIEAllVersion("6 7")&&this.parentControl.redraw()},h.prototype.handleTitleClick=function(t){if(this.parentControl&&void 0!==WebSquare.idCache[this.parentControl.uuid]){for(var e=this.event.getTargetIterator(t,this.render);e.next();)for(var i=0;i<this.buttons.length;i++){var o=this.buttons[i];if(e.match(null,this.id+"_title_"+o.id)||e.match(null,o.id)){o.isCustom&&r.B.fireEvent(this.parentControl,"onclickcustombtn",this.id,o.id),o.useAPI&&"function"==typeof this[o.useAPI]&&this[o.useAPI](),e.stop();break}}e=null}},h.prototype.handleDblClickEvent=function(t){for(var e=this.parentControl.options.preventMaximizeByTitle,i=this.event.getTargetIterator(t,this.render);i.next();)i.match("w2widget_title")&&!e&&this.toggleMaximized();i=null},h.prototype.isFixed=function(){return this.fixed},h.prototype.toggleFixed=function(){this.isFixed()?this.unsetFixed():this.setFixed()},h.prototype.setFixed=function(){return!this.isFixed()&&(this.fixed=!0,this.addClass("w2widget_fixed"),this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),r.B.fireEvent(this.parentControl,"onwidgetfix",this.id),!0)},h.prototype.unsetFixed=function(){return!(!this.isFixed()||this.isMaximized())&&(this.fixed=!1,this.removeClass("w2widget_fixed"),this.isResizable()&&this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),!0)},h.prototype.isMaximized=function(){return this.maximized},h.prototype.setMaximized=function(){return!(this.isMaximized()||this.isFixed()&&!this.options.maximizeonfixed)&&(this.maximized=!0,this.addClass("w2widget_maximized"),this.isFixed()?this.oriFixed=!0:this.setFixed(),r.B.fireEvent(this.parentControl,"onwidgetmaximize",this.id),this.parentControl.redraw(),!0)},h.prototype.unsetMaximized=function(){return!!this.isMaximized()&&(this.maximized=!1,this.removeClass("w2widget_maximized"),this.oriFixed?this.oriFixed=!1:this.unsetFixed(),
r.B.fireEvent(this.parentControl,"onwidgetrestore",this.id),this.parentControl.redraw(),!0)},h.prototype.toggleMaximized=function(){return this.isMaximized()?this.unsetMaximized():this.setMaximized()},h.prototype.isMinimized=function(){return this.minimized},h.prototype._calcMinimizedUnitHeight=function(){for(var t=this.getElementById(this.id+"_title"),e=parseInt(WebSquare.style.getStyle(t,"height"),10),i=0,o=this.parentControl.unitHeightPixel,s=this.parentControl._getMarginedHeight;s.call(this.parentControl,i*o)<e;)i+=1;return i},h.prototype.setMinimized=function(){if(this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1;this.savedUnitHeight=this.unitHeight;var t=this.parentControl.resizeWidget(this.id,this.width,this._calcMinimizedUnitHeight(),{force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t?(this.minimized=!0,this.addClass("w2widget_minimized"),this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),r.B.fireEvent(this.parentControl,"onwidgetminimize",this.id)):this.savedUnitHeight=null,t},h.prototype.unsetMinimized=function(){if(!this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1;var t=this.parentControl.resizeWidget(this.id,this.width,this.savedUnitHeight,{force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t&&(this.savedUnitHeight=null,this.minimized=!1,this.removeClass("w2widget_minimized"),this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),r.B.fireEvent(this.parentControl,"onwidgetrestore",this.id)),t},h.prototype.toggleMinimized=function(){var t=!1;return(t=this.isMinimized()?this.unsetMinimized():this.setMinimized())&&this.parentControl.redraw(),t},h.prototype.isMovable=function(){return!this.isFixed()},h.prototype.isResizable=function(){return!this.isFixed()&&!this.isMinimized()&&(!this.parentControl||!1!==this.parentControl.widgetResize)&&this.resized},h.prototype.setTitle=function(t){var e=this.getElementById(this.id+"_title_text");return!!e&&(e["textContent"in e?"textContent":"innerText"]=t+"",this.title=t+"",!0)},h.prototype.getTitle=function(){var t=this.getElementById(this.id+"_title_text");return!!t&&t["textContent"in t?"textContent":"innerText"]},h.prototype.setParams=function(t){var e=this.getChild(this.id+"_content");return this.params=t,"object"!=typeof e.paramObj&&(e.paramObj={}),e.paramObj.params=this.params,!0},h.prototype.getParams=function(){return this.params},h.prototype.closeWidget=function(){var t=this.parentControl,e=this.id;if(!1===r.B.fireEvent(t,"onbeforewidgetclose",e))return!1;var i=this.parentControl._removeWidgets(this);return r.B.fireEvent(t,"onafterwidgetclose",e),i},h.prototype.getWidgetInfo=function(){var t=this.parentControl.id,e={};return e.id=this.id.slice(t.length+1),e.src=this.src,e.scope=this.options.scope,e.minimized=this.minimized,e.maximized=this.maximized,e.x=this.x,e.y=this.y,e.unitWidth=this.unitWidth,e.unitHeight=this.unitHeight,e.fixed=this.fixed,e.oriFixed=this.oriFixed,e.title=this.title,e.className=this.render.className.replace("w2widget ",""),e.maximizeFormatter=this.maximizeFormatter,e.buttonFormatter=this.buttonFormatter,e.params=this.params,e.titleClass=this.titleClass,e.onWidgetLoad=this.onWidgetLoad,e},h.prototype.setSrc=function(t){return!!this.getChild(this.id+"_content").setSrc(t)&&(this.src=t,!0)},h.prototype.getSrc=function(){return this.getChild(this.id+"_content").getSrc()},h.prototype.getObj=function(t){return this.getChild(this.id+"_content").getObj(t)},h.prototype.getObjList=function(){return this.getChild(this.id+"_content").getObjList()},h.prototype.refresh=function(){if(!this.getChild(this.id+"_content").setSrc(this.src))return!1},h.prototype.getRect=function(){return{x:this.x,y:this.y,unitWidth:this.unitWidth,unitHeight:this.unitHeight}},h.prototype._getOriRect=function(){return{x:this.oriX,y:this.oriY,
unitWidth:this.oriUnitWidth,unitHeight:this.oriUnitHeight}},h.prototype.getRectByPx=function(){return{x:this.render.offsetLeft,y:this.render.offsetTop,width:this.render.clientWidth,height:this.render.clientHeight}},h.prototype.setButtonFormatter=function(t){var e=a.D.getGlobalFunction(t,this.scope_id);if("function"!=typeof e)return!1;for(var i=this.defaultOptions.buttons,o=e(this.id),s=0;s<o.length;s++){var r=o[s];if(r.useDefault)switch(r.useDefault){case"fix":o[s]=i[0];break;case"minimize":o[s]=i[1];break;case"maximize":o[s]=i[2];break;case"close":o[s]=i[3];break;default:return!1}}return this.buttons=o,!0},h.prototype.setMaximizeFormatter=function(t){var e=a.D.getGlobalFunction(t,this.scope_id);if("function"!=typeof e)return!1;var i=e(this.id);if(!i)return!1;for(var o=["left","right","top","bottom"],s=0;s<o.length;s++){var r=o[s];i[r]!==parseInt(i[r],10)&&(i[r]=0)}return this.maxConfig=i,!0},h.prototype.getMaximizeConfig=function(){return this.maxConfig},h.prototype.showTitle=function(t){var e=document.getElementById(this.id+"_title"),i=document.getElementById(this.id+"_content");if(!e){if(!t)return;var o=document.getElementById(this.id+"_btnResize"),s=document.createElement("div"),r=[];r.push("<div id='"+this.id+"_title' class='w2widget_title "+this.options.titleClass+"'>"),r.push("<div id='"+this.id+"_title_icon' class='w2widget_icon'></div>"),r.push("<span id='"+this.id+"_title_text' class='w2widget_title_text'>"+this.options.title+"</span>"),r.push("<div id='"+this.id+"_title_buttons' class='w2widget_title_buttons'>");for(var a=0;a<this.buttons.length;a++){var n=this.buttons[a];r.push("<div id='"+this.id+"_title_"+n.id+"' class='"+n.className+"'></div>")}r.push("</div>"),r.push("</div>"),s.innerHTML=r.join("");var l=s.firstChild;this.render.insertBefore(l,o),e=document.getElementById(this.id+"_title");var h=document.getElementById(this.id+"_title_text");if(!h.style.width){var d=document.getElementById(this.id+"_title_icon"),c=document.getElementById(this.id+"_title_buttons");h.style.width=e.clientWidth-15-d.clientWidth-c.clientWidth+"px"}}t?(e.style.display="block",i.style.top=e.clientHeight+"px",this.addClass(i,"w2widget_content"),this.removeClass(i,"w2widget_content_notitlebar"),this.options.hasTitleBar=!0):(e.style.display="none",i.style.top="0px",this.addClass(i,"w2widget_content_notitlebar"),this.removeClass(i,"w2widget_content"),this.options.hasTitleBar=!1)},h.prototype.setResizable=function(t){if("boolean"==typeof t){var e=document.getElementById(this.id+"_btnResize"),i=t&&0!=this.parentControl.widgetResize;i?this.removeClass(e,"w2widget_btnResize_halt"):this.addClass(e,"w2widget_btnResize_halt"),this.resized=i}},h.prototype._setTitleEllipsis=function(){try{var t=document.getElementById(this.id+"_title");if(!t)return;var e=document.getElementById(this.id+"_title_icon"),i=document.getElementById(this.id+"_title_text"),o=document.getElementById(this.id+"_title_buttons");i.style.width=t.clientWidth-15-e.clientWidth-o.clientWidth+"px"}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getWindow=function(){try{var t,e=this.getChild(this.id+"_content");return e&&(t=e.getWindow()),t}catch(t){s.w.printStackTrace(t,null,this)}}},6210:(t,e,i)=>{i.r(e),i.d(e,{wq_window:()=>c});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=i(6191),c=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(c.prototype,h.s.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.window",pluginName:"window",parseChild:!0,userEvents:["onclose","onminimize","onmaximize","onrestore","ondragstart","ondragend","onwindowkeyup","onwindowmousedown","onpopup","ondrawcomplete","onwindowload","onwindowunload"],defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",windowTitle:"",windowHeaderHTML:"",nameLayerHTML:"",statusMsg:"",customMsg:"",src:"",wmode:!1,useStatusMsg:!0,useCustomMsg:!1,windowTooltipDisplay:!0,
title:"",dragResizable:!0,dragResizableHeader:!1,displayParentWindowScroll:!1,disableCloseButton:!1,spa:!1,noAttatchedEvent:!1,params:"",popupParam:"",spaReplaceHistory:!1,buttonFormatter:"",foldOnMinimized:!1,useATagBtn:!1,windowDragMove:!1,windowMoveType:"restrict",minVisibleWindowPixel:20,frameModal:"",processMsgFrame:!1,msaName:"",fixPosition:!1},c.prototype.initialize=function(t){try{if(this.frame=null,this.modal=null,this.windowInfo={status:this.options.parent?"maximized":"restored",drag:!this.options.parent,top:this.options.defaultTop,left:this.options.defaultLeft,defaultWidth:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",defaultHeight:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",width:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",height:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",minWidth:parseInt(this.options.minimumWidth,10)<150?"150px":this.options.minimumWidth,minHeight:parseInt(this.options.minimumHeight,10)<150?"150px":this.options.minimumHeight,minimized:this.options.minimized||!1,setInfo:function(t){this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height},getInfo:function(t,e){t.style.top=this.top,t.style.left=this.left,t.style.width="restored"===e?this.defaultWidth:this.width,t.style.height="restored"===e?this.defaultHeight:this.height}},"iframe"==this.options.frameMode||this.options.frameMode,"true"===s.v.getConfiguration("/WebSquare/spa/@value")&&(this.options.spa=!0),this.options.parent&&this.options.parent.options.hideTitleOnMaximize&&(this.hideTitleOnMaximize=!0),this.options.parent&&this.options.parent.options.usePopup&&(this.usePopup=!0),this._multiViewUUID="",this._direction=0,this.buttons=[],this.buttonInfo={},this.hasButtons=!1,this.options.buttonFormatter){var e=n.D.getGlobalFunction(this.options.buttonFormatter,this.scope_id);"function"==typeof e&&(this.hasButtons=!0,this.buttonInfo={},this.buttonInfo.buttons=e(),this.buttonInfo.alignment="right",this.buttonInfo.useButtonFormatter=!0)}this.popupIdx=0,this._isWframePopup=!1,this.options.windowDragMove||"true"!==s.v.getConfiguration("/WebSquare/window/windowDragMove/@value")||(this.options.windowDragMove=!0),!0===this.options.fixPosition&&(this.windowInfo.drag=!1)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=""==this.options.disabled?"":"disabled='true'",e=[],i="",o="",s=""==this.options.style?"":"style='"+this.options.style+"'",a="restored"===this.windowInfo.status?"w2window_restored":"w2window_maximized",l="overflow"===this.options.windowMoveType?" w2window_window_move_type":"";this.options.windowTooltipDisplay&&(o="title='"+this.options.windowTitle+"'"),e.push("<div "+t+" id='"+this.id+"' "+s+" class='w2window "+a+" "+this.options.className+l+"' tabindex='0' >"),1==this.options.wmode&&(i=WebSquare.net.getSSLBlankPage(),e.push("<iframe frameBorder='no' title='"+this.options.title+"' class='w2window_wmode' "+i+"></iframe>")),n.D.isMobile()&&this.options.useATagBtn&&e.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2window_popup_start'>"+WebSquare.language.getMessage("Window_popup_start")+"</button>");var h="w2window_header",d="w2window_body";1==this.hideTitleOnMaximize&&"maximized"==this.windowInfo.status&&(h+=" w2window_header_extend",d+=" w2window_body_extend");var c=n.D.getDataPrefix("btn_index");if(""==this.options.windowHeaderHTML){if(e.push("<div id='"+this.id+"_header' class='"+h+"'"+o+">"),
!0===this.options.useHeadingTagTitle?e.push("<span id='"+this.id+"_header_icon' class='w2window_header_icon'></span>"):e.push("<div id='"+this.id+"_header_icon' class='w2window_header_icon'></div>"),!0===this.options.useATagTitle?e.push("<a id='"+this.id+"_header_title' class='w2window_header_title' href='javascript:void(null);' title='"+this.options.windowTitle+"' style='text-decoration:none;'>"+this.options.windowTitle+"</a>"):!0===this.options.useHeadingTagTitle?e.push("<h2 id='"+this.id+"_header_title' class='w2window_header_title_h2'>"+this.options.windowTitle+"</h2>"):e.push("<div id='"+this.id+"_header_title' class='w2window_header_title'>"+this.options.windowTitle+"</div>"),this.hasButtons){e.push("<div id='"+this.id+"_header_buttonArea' class='w2window_header_buttonArea'>");for(var u=0;u<this.buttonInfo.buttons.length;u++){var p=this.buttonInfo.buttons[u].title||"";if(this.buttonInfo.useButtonFormatter){var g=this.buttonInfo.buttons[u].className||"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_custom_button "+g+"' "+c+"='"+u+"' title='"+p+"' ></div>")}else{var m=this.buttonInfo.buttons[u].value?"<span id='"+this.id+"_header_button_"+u+"_value' class='w2window_header_button_value' title='"+p+"' "+c+"='"+u+"' > "+this.buttonInfo.buttons[u].value+" </span>":"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_button w2window_header_button_"+u+"' "+c+"='"+u+"' >"),e.push("<div id='"+this.id+"_header_button_"+u+"_content' class='w2window_header_button_content w2window_header_button_content_"+u+"' "+c+"='"+u+"' >"),e.push(m),e.push("</div>"),e.push("</div>")}}e.push("</div>")}var f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<div id='"+this.id+"_minimize' class='w2window_minimize' title='"+WebSquare.language.getMessage("Window_minimize")+"'></div>"),e.push("<div id='"+this.id+"_restore' class='w2window_restore' title='"+WebSquare.language.getMessage("Window_restore")+"' ></div>");var b=this.options.disableCloseButton?" w2window_close_disabled":"";this.options.useATagBtn?n.D.isMobile()?e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+b+"' href='javascript:void(null);' >"+WebSquare.language.getMessage("Window_close")+"' </a></div>"):e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+b+"' href='javascript:void(null);' title='"+WebSquare.language.getMessage("Window_close")+"'>"+WebSquare.language.getMessage("Window_close")+"</a></div>"):e.push("<div id='"+this.id+"_close' class='w2window_close"+b+"' title='"+WebSquare.language.getMessage("Window_close")+"' ></div>"),1==this.usePopup&&e.push("<div id='"+this.id+"_popup' class='w2window_popup' title='"+WebSquare.language.getMessage("Window_popup")+"' ></div>"),e.push("</div>"),e.push("</div>")}else e.push("<div id='"+this.id+"_header' class='"+h+"'>"+this.options.windowHeaderHTML+"</div>");return this.options.useStatusMsg?e.push("<div id='"+this.id+"_body' class='"+d+"'>"):e.push("<div id='"+this.id+"_body' class='"+d+" w2window_no_status'>"),e.push("<div id='"+this.id+"_content' class='w2window_content'>"),e.push("</div>"),(this.options.useStatusMsg||this.options.useCustomMsg)&&(e.push("<div id='"+this.id+"_status' class='w2window_status'>"),this.options.useStatusMsg&&e.push("<div id='"+this.id+"_msg' class='w2window_msg'>"+this.options.statusMsg+"</div>"),this.options.useCustomMsg&&e.push("<div id='"+this.id+"_custom_msg' class='w2window_custom_msg'>"+this.options.customMsg+"</div>"),e.push("</div>")),e.push("</div>"),this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize1' class='w2window_resize_right'></div>"),e.push("<div id='"+this.id+"_resize2' class='w2window_resize'></div>"),e.push("<div id='"+this.id+"_resize3' class='w2window_resize_bottom'></div>"),
e.push("<div id='"+this.id+"_resize4' class='w2window_resize_bottomLeft'></div>"),e.push("<div id='"+this.id+"_resize5' class='w2window_resize_left'></div>"),this.options.dragResizableHeader&&(e.push("<div id='"+this.id+"_resize6' class='w2window_resize_upLeft'></div>"),e.push("<div id='"+this.id+"_resize7' class='w2window_resize_up'></div>"),e.push("<div id='"+this.id+"_resize8' class='w2window_resize_upRight'></div>"))),e.push("</div>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{this.dom.header=document.getElementById(this.id+"_header"),this.dom.statusMsg=document.getElementById(this.id+"_msg"),this.dom.customMsg=document.getElementById(this.id+"_custom_msg"),this.dom.body=document.getElementById(this.id+"_body"),void 0!==this.options.useMaximize&&this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStartEvent)),n.D.isMobile()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),n.D.getBoolean(s.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent))),this.options.useATagBtn&&WebSquare.BootLoader.browserCheck.android&&this.event.addListener(document.getElementById(this.id+"_close"),"onclick",this.event.bindAsEventListener(this,this.close))):(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent))),this.drawFrame(this.options.src);n.D.getDataPrefix("btn_index");if(this.hasButtons){for(var t=0;t<this.buttonInfo.buttons.length;t++){if(!this.buttonInfo.useButtonFormatter){var e=document.getElementById(this.id+"_header_button_"+t+"_content");e.style.marginTop=-e.offsetHeight/2+"px",e.style.marginLeft=-e.offsetWidth/2+"px"}if(this.buttonInfo.buttons[t].value){var i=document.getElementById(this.id+"_header_button_"+t+"_value");i.style.marginTop=-i.offsetHeight/2+"px",i.style.marginLeft=-i.offsetWidth/2+"px"}this.buttons.push({dataBtn_index:t,disable:!1,hidden:!1,contentDom:e,valueDom:i})}if("right"==this.buttonInfo.alignment){var o=document.getElementById(this.id+"_header_control"),a=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(a,"float","right"),WebSquare.style.setStyle(a,"left","-"+o.offsetWidth+"px")}if(1==this.buttonInfo.useButtonFormatter){a=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(a,"height",a.offsetHeight-5+"px"),WebSquare.style.setStyle(a,"padding-top","5px")}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.drawFrame=function(t,e){try{if(this.frame&&(this.removeControl(this.frame),this.frame.remove(),this.frame=null),this.options.src=t||"","iframe"==this.options.frameMode){if(!WebSquare.uiplugin.iframe)return void(o=requires("uiplugin.iframe")).then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));this.frame=new WebSquare.uiplugin.iframe(this.id+"_iframe",{className:"w2window_iframe",src:this.options.src||"",spa:this.options.spa,title:this.options.title,params:this.options.params,popupParam:this.options.popupParam,spaReplaceHistory:this.options.spaReplaceHistory,msaName:this.options.msaName})}else if("wframe"==this.options.frameMode){
var i=this.org_id||this.id;this.frame=d.D.create(i+"_wframe",{className:"w2window_wframe",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"wframe",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;var o=d.D.initAsync(),s=this.uuid;o.then((function(t,e){WebSquare.idCache[s]._activateFrame()}))}e&&e.dataObject?this.setDataObject(e.dataObject):this._dataObject&&this.setDataObject(this._dataObject);var r=this.uuid;this.frame.bind("onload",(function(){a.B.fireEvent(WebSquare.idCache[r],"ondrawcomplete")}));var h="on"+this.frame.options.pluginName+"load";this.frame.bind(h,(function(){a.B.fireEvent(WebSquare.idCache[r],"onwindowload")}));var c="on"+this.frame.options.pluginName+"unload";if(this.frame.bind(c,(function(){null!=WebSquare.idCache[r]&&a.B.fireEvent(WebSquare.idCache[r],"onwindowunload")})),"iframe"==this.options.frameMode){this._activateFrame();try{if(1!=this.options.noAttatchedEvent){s=this.uuid;this.temp_cnt=0,n.D.setInterval((function(t){try{var e=WebSquare.idCache[s];if(!e)return void n.D.clearInterval(t);e.temp_cnt++,"about:blank"!==e.frame.render.contentWindow.location.href&&e.frame.render.contentWindow.location.href!==WebSquare.net.getSSLBlankPage(!0)?(document.addEventListener&&!n.D.isIE()?(e.frame.render.contentWindow.document.addEventListener("mousedown",(function(){self.WebSquare.idCache[s].handleFrameMouseDownEvent({})})),e.frame.render.contentWindow.document.addEventListener("keyup",(function(t){self.WebSquare.idCache[s].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))):document.attachEvent&&(e.frame.render.contentWindow.document.attachEvent("onmousedown",(function(){self.WebSquare.idCache[s].handleFrameMouseDownEvent({})})),e.frame.render.contentWindow.document.attachEvent("onkeyup",(function(t){self.WebSquare.idCache[s].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))),n.D.clearInterval(e.id+"_drawframe")):e.temp_cnt>1200&&(n.D.clearInterval(e.id+"_drawframe"),l.k.printLog("["+e.id+"] addListener fail 1"))}catch(t){e&&e.temp_cnt>750&&n.D.clearInterval(e.id+"_drawframe")}}),{key:this.id+"_drawframe",delay:80,args:[this.id+"_drawframe"]})}}catch(t){l.k.printLog("["+this.id+"] addListener fail 3")}}else"wframe"==this.options.frameMode&&(this.frame.popupParam=this.popupParam,this.frame.popupId=this.popupId)}catch(t){l.k.printLog("error : window.drawFrame["+this.id+"]")}},c.prototype._activateFrame=function(){try{var t=this.getElementById(this.id+"_content");this.frame.writeTo(t),this.frame.activate(),this.addControl(this.frame)}catch(t){l.k.printLog("error : window.drawFrame["+this.id+"]")}},c.prototype.resizeForIE6=function(t,e,i){try{if(n.D.isIE(6)){i||(i="windowContainer"),t=parseInt(t,10),e=parseInt(e,10);var o=this.options.useStatusMsg?0:20;"windowContainer"==i&&this.setSize(t-3,e-2),this.dom.windowBody=document.getElementById(this.id+"_body"),this.dom.windowContent=document.getElementById(this.id+"_content"),this.dom.windowStatus=document.getElementById(this.id+"_status"),this.dom.header.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("height",e-27+"px"),this.dom.windowContent.style.setAttribute("width",t-11+"px"),"popup"==i?this.dom.windowContent.style.setAttribute("height",e-31+o+"px"):this.dom.windowContent.style.setAttribute("height",e-50+o+"px"),"popup"==i?this.frame.setSize(t-11,e-31+o):this.frame.setSize(t-11,e-50+o),this.options.useStatusMsg&&this.dom.windowStatus.style.setAttribute("width",t-11+"px")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.resizeParentGroup=function(){try{
if(this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))return{width:WebSquare.style.getSize(this.parentControl.parentControl.render,"width"),height:this.parentControl.parentControl.options.nameLayerMenu?WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(document.getElementById(this.parentControl.parentControl.id+"_nameContainer"),"height"):WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(this.parentControl.parentControl.dom.toolBar,"height")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.close=function(t){try{if(!0===this._closed)return;this._closed=!0;try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){r.w.printStackTrace(t,null,this)}if(t&&"object"==typeof t||(t={}),this.options.closeAction){var e=n.D.getGlobalFunction(this.options.closeAction,this.scope_id);if("function"==typeof e)if(!0!==e.call(this,this.options.title,t))return this._closed=!1,!1}return!0===t.sync?this._close(!0===t.skipRemove):n.D.setTimeout(this._close,{key:this.id+"_onwindowclosed",caller:this,delay:100,args:[{skipRemove:!0===t.skipRemove}]}),!0}catch(t){r.w.printStackTrace(t,null,this),this._closed=!1}},c.prototype.forceClose=function(){try{var t=this;setTimeout((function(){"iframe"==t.options.frameMode&&t.frame.setSrc("about:blank");var e={src:t.options.src,title:t.options.windowTitle};a.B.fireEvent(t,"onclose",e),t.remove()}),100)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toggleMinimize=function(){if(!0===this.options.foldOnMinimized){var t=this.windowInfo.status;if(!this.windowInfo.minimized)switch(t){case"restored":this.windowInfo.setInfo(this.render);break;case"maximized":this.restore(!0),this.windowInfo.setInfo(this.render)}this.fold()}else this.minimize()},c.prototype.minimize=function(t,e){try{!0===t||0==this.windowInfo.minimized&&!1!==t?(this.setStyle("display","none"),this.windowInfo.minimized=!0):(this.setStyle("display","block"),this.windowInfo.minimized=!1),e||a.B.fireEvent(this,"onminimize")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.fold=function(){try{if(0==this.windowInfo.minimized){var t=this.options.foldSize&&this.options.foldSize.width?this.options.foldSize.width:this.dom.clientWidth;this.setStyle("height",this.dom.header.clientHeight+"px"),this.dom.body.style.display="none",this.setStyle("width",t+"px"),this.windowInfo.minimized=!0}else{var e=this.render.offsetLeft,i=this.render.offsetTop,o=this.render.clientWidth,s=this.render.clientHeight,n=this.getMaxSize(),l=n.width,h=n.height,d=parseInt(this.windowInfo.width,10)-o,c=parseInt(this.windowInfo.height,10)-s,u=e,p=i,g=0,m=0;if(this.parentControl&&(g=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft),e+d<0&&(u=0),e+d>l+m?u=o<=l?l-(o+d)+m:0:m>u&&(u=m),i+c<0&&(p=0),i+c>h){if(s<=h){if((p=h-(s+c))<g)return p=g,this.setStyle("height",h-g+"px"),this.setPosition(u,p),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else if(p=0+g,s>h)return h-=g,this.setStyle("height",h+"px"),this.setPosition(u,p),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else g>p&&(p=g);this.setPosition(u,p),this.setStyle("width",this.windowInfo.width),this.setStyle("height",this.windowInfo.height),this.dom.body.style.display="block",this.windowInfo.minimized=!1}a.B.fireEvent(this,"onminimize")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.popup=function(){try{a.B.fireEvent(this,"onpopup")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.maximize=function(){try{if(this.removeClass(this.render,"w2window_restored"),this.addClass(this.render,"w2window_maximized"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header w2window_header_extend"
;var t="w2window_body w2window_body_extend";this.options.useStatusMsg||(t+=" w2window_no_status"),this.dom.body.className=t}this.dom.body.style.display="block",this.windowInfo.status="maximized",this.windowInfo.drag=!1,this.windowInfo.minimized||this.windowInfo.setInfo(this.render),this.windowInfo.minimized=!1;var e=this.getMaxSize();if(this.parentControl){var i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;this.render.style.left=o+"px",this.render.style.top=i+"px",this.render.style.height=e.height-i+"px",this.render.style.width=o>0?e.width+"px":""}else this.render.style.left="0px",this.render.style.top="0px",this.render.style.width="",this.render.style.height="";a.B.fireEvent(this,"onmaximize")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.restore=function(t){try{if(this.removeClass(this.render,"w2window_maximized"),this.addClass(this.render,"w2window_restored"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header";var e="w2window_body";this.options.useStatusMsg||(e+=" w2window_no_status"),this.dom.body.className=e}"none"==this.getStyle("display")&&this.setStyle("display","block"),this.dom.body.style.display="block",this.windowInfo.status="restored",!0!==this.options.fixPosition&&(this.windowInfo.drag=!0),this.windowInfo.minimized=!1,this.options.useRestoreDefaultSize?this.windowInfo.getInfo(this.render,"restored"):this.windowInfo.getInfo(this.render),t||a.B.fireEvent(this,"onrestore")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.toggleResize=function(){try{"restored"==this.windowInfo.status?this.maximize():this.restore()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setStatusMsg=function(t){try{this.options.useStatusMsg&&(this.dom.statusMsg.innerHTML=t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setCustomMsg=function(t){try{this.options.useCustomMsg&&(this.dom.customMsg.innerHTML=t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSrc=function(t,e){try{if(null!=this.frame)if("iframe"==this.options.frameMode)requires("uiplugin.iframe").then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));else"wframe"==this.options.frameMode&&this.frame.setSrc(t,e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.movable=function(t){try{t=n.D.getBoolean(t),this.windowInfo.drag=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.showModal=function(t){try{if(a.B.fireEvent(this,"ondragstart"),!this.modal){if(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",n.D.isIE(6)){this.resizeParentGroup();var e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}t&&!0===t.transparent&&(this.modal.style.backgroundColor="transparent"),this.render.appendChild(this.modal),WebSquare.style.setOpacity(this.modal,.3)}if(this.modal){if(this.modal.style.display="block",n.D.isIE(6)){this.resizeParentGroup();e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}!n.D.isMobile()&&this.options.frameModal&&this.addClass(document.documentElement,"w2modalopened_ghost")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.hideModal=function(){try{a.B.fireEvent(this,"ondragend"),this.modal&&(this.modal.style.display="none",!n.D.isMobile()&&this.options.frameModal&&this.removeClass(document.documentElement,"w2modalopened_ghost"))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setFocus=function(){try{
n.D.isMobile()&&this.options.useAtagButton?document.getElementById(this.id+"_start").focus():"iframe"==this.options.frameMode?this.frame.render.contentWindow&&this.frame.render.contentWindow.focus():"wframe"==this.options.frameMode&&this.frame.focus()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._focus=function(){try{n.D.isMobile()&&this.options.useATagBtn?document.getElementById(this.id+"_start").focus():(this.render.setAttribute("tabindex",0),this.render.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getMaxSize=function(){var t,e;(this.parentControl?(t=WebSquare.style.getSize(this.parentControl.render,"width"),e=WebSquare.style.getSize(this.parentControl.render,"height")+(document.documentElement.scrollTop||document.body.scrollTop)):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(n.D.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(n.D.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},c.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(n.D.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(n.D.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},c.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_close")&&!0!==this.options.disableCloseButton&&(n.D.getBoolean(s.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&a.B.stopEvent(t),this.close({isCloseButtonClick:!0}),this.options&&this.options.frameModal&&a.B.stopPropagation(t)),e.match("w2window_minimize")&&(a.B.stopEvent(t),this.toggleMinimize(),this.options.frameModal&&a.B.stopPropagation(t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){var i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};a.B.fireEvent(this.parentControl.parentControl,"onminimizebtnclick",i)}if(e.match("w2window_restore")&&(n.D.getBoolean(s.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&a.B.stopEvent(t),this.toggleResize(),this.options.frameModal&&a.B.stopPropagation(t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};a.B.fireEvent(this.parentControl.parentControl,"onrestorebtnclick",i)}e.match("w2window_popup")&&(a.B.stopEvent(t),this.popup())}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFrameMouseDownEvent=function(t){try{a.B.fireEvent(this,"onwindowmousedown",t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleDblclickEvent=function(t){try{if(!1===this.options.useMaximize)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header_button"))return
;e.match("w2window_header")&&this.toggleResize()}e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{for(var e=n.D.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.addClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.addClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.addClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.addClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.addClass(o,"w2window_header_button_content_on")}i=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t);for(var e=n.D.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.removeClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.removeClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.removeClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.removeClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.removeClass(o,"w2window_header_button_content_on")}i=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMousedownEvent=function(t){try{this.resizeParentGroup();for(var e=n.D.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2window_header")&&(!0!==this.options.enableHeaderSelect&&a.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){var o=a.B.getTarget(t);if(!o||o.id==this.id+"_minimize"||o.id==this.id+"_restore"||o.id==this.id+"_close"||o.id==this.id+"_popup")return;var s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:5,mode:"move",windowDragMove:this.options.windowDragMove,makeGhostLayer:!0===this.options.windowDragMove?null:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.show(),t.setSize(r,a),t.setPosition(e,i),t.hide(),t},handleStart:function(){!0===s.options.windowDragMove?(s.showModal.call(s,{transparent:!0}),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()):(s.showModal.call(s),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll())},handleUpdate:function(t,e,i,o,r){s.render.offsetLeft;var a,l,h=s.render.offsetTop,d=(s.render.clientWidth,s.render.clientHeight,(S=s.getMaxSize()).width),c=S.height,u=0,p=0;if(s.parentControl&&(u=document.documentElement.scrollTop||document.body.scrollTop,p=document.documentElement.scrollLeft||document.body.scrollLeft,a=WebSquare.style.getAbsoluteLeft(s.parentControl.render),l=WebSquare.style.getAbsoluteTop(s.parentControl.render),s.frame&&"wframe"===s.frame.getPluginName()&&(a-=p,l-=u)),!0!==s.options.windowDragMove){if(1==s.options.displayParentWindowScroll&&!s.options.frameModal)try{var g=n.D.getStyleProperty(document.documentElement,"overflow");if(("auto"==g||"scroll"==g)&&!s.modal)return}catch(r){}
s.frame&&"iframe"===s.frame.getPluginName()?(r.clientX<a+40||r.clientX>d+a-40||h+o+1-u<0||r.clientY+20+u>l+c-20)&&WebSquare.dragdrop.gDragManager.finish(r):"overflow"===s.options.windowMoveType?(r.clientX<a+20&&i<0||r.clientX>d+a-20&&i>0||r.clientY+1<l||r.clientY>l+c-20&&o>0)&&WebSquare.dragdrop.gDragManager.finish(r):(r.clientX<a+20||r.clientX>d+a-20||r.clientY+1<l||r.clientY>l+c-20)&&WebSquare.dragdrop.gDragManager.finish(r)}else{var m=0,f=0;try{m=WebSquare.style.getAbsoluteLeft(s.render.parentNode),f=WebSquare.style.getAbsoluteTop(s.render.parentNode)}catch(r){}var b=Math.max(t+i-m,0),y=Math.max(e+o-f,0),v=0,w=0;if(!s.parentControl.parentControl||"tabControl"!=s.parentControl.parentControl.options.pluginName&&"tabControl"!=s.parentControl.parentControl.options.inheritFrom){var S=s.getMaxSize(),C=(u=s.parentControl?document.documentElement.scrollTop||document.body.scrollTop:0,s.render.offsetWidth),_=s.render.offsetHeight;"overflow"===s.options.windowMoveType&&(C=s.options.minVisibleWindowPixel,_=s.options.minVisibleWindowPixel);var x=S.width-C,I=S.height-_-u;b=Math.min(b,x),y=Math.min(y,I)}else v=s.parentControl?s.parentControl.render.scrollLeft:0,w=s.parentControl?s.parentControl.render.scrollTop:0;s.setPosition(b+v,y+w)}},handleFinish:function(t,e,i,o){if(s.hideModal.call(s),!0!==s.options.windowDragMove){var r=s.render.offsetLeft,a=s.render.offsetTop,l=s.render.clientWidth,h=s.render.clientHeight,d=s.getMaxSize(),c=d.width,u=d.height,p=r+i,g=a+o,m=0,f=0,b=0,y=0,v=0,w=0;if(s.parentControl&&(m=document.documentElement.scrollTop||document.body.scrollTop,f=document.documentElement.scrollLeft||document.body.scrollLeft,s.options.frameModal&&(v=parseInt(s.parentControl.getStyle("border-top-width"))||0,w=parseInt(s.parentControl.getStyle("border-left-width"))||0,c=s.parentControl.render.offsetWidth-w,u=s.parentControl.render.offsetHeight-v,l=s.render.offsetWidth,h=s.render.offsetHeight,s.render.offsetParent!==s.parentControl.render&&(a-=b=s.parentControl.render.offsetTop,r-=y=s.parentControl.render.offsetLeft))),1==s.options.displayParentWindowScroll&&!s.options.frameModal||"overflow"===s.options.windowMoveType)try{var S=n.D.getStyleProperty(document.documentElement,"overflow");"auto"!=S&&"scroll"!=S&&"overflow"!==s.options.windowMoveType||(c=Math.max(c,l,r+l+i),u=Math.max(u,h,a+h+o))}catch(t){}"overflow"!==s.options.windowMoveType&&r+i<0&&(p=y+w),r+l+i>c+f?p=l<=c?c-l+f+y:y:"overflow"!==s.options.windowMoveType&&f>p&&(p=f),a+o<0&&(g=b+v),a+h+o>u?h<=u?(g=u-h+b)<m&&(g=m,s.render.style.height=u-m+"px"):(g=0+m,h>u&&(u-=m,s.render.style.height=u+"px")):m>g&&(g=m),s.setPosition(p,g)}}})}if(i.match("w2window_header_button")){a.B.stopEvent(t);var l=i.getElement().getAttribute(e);if(!(c=this.buttons[Number(l)]).disable)try{var h=this.buttonInfo.buttons[l].clickAction;switch(typeof h){case"function":h.apply(this,this);break;case"string":default:var d=n.D.getGlobalFunction(h,this.scope_id);"function"==typeof d&&d(this)}}catch(t){r.w.printStackTrace(t,null,this)}return}if(i.match("w2window_header_custom_button")){a.B.stopEvent(t);l=i.getElement().getAttribute(e);var c=this.buttons[parseInt(l,10)],u={uniqueId:this.id,btnId:this.id+"_header_button_"+c[e],btnIdx:c[e],disable:c.disable,hidden:c.hidden};return void(c.disable||this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom)&&a.B.fireEvent(this.parentControl.parentControl,"onclickcustombtn",u))}var p=i.match("w2window_resize"),g=i.match("w2window_resize_bottomLeft");if((p||g)&&(a.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:p?"resize":"resize_bottomLeft",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){
var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){s.showModal.call(s)},handleFinish:function(t,e,i,o,r){s.hideModal.call(s);var a="resize"===this.mode?1:-1,n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=s.render.offsetTop,d=s.render.offsetLeft,c=n+i*a,u=l+o;c<parseInt(s.windowInfo.minWidth,10)&&(c=parseInt(s.windowInfo.minWidth,10),1===a?i+=n-c:i=n-c),u<parseInt(s.windowInfo.minHeight,10)&&(u=parseInt(s.windowInfo.minHeight,10));var p,g=s.getMaxSize(),m=g.height-h;if((p=1===a?g.width-d:Math.min(d+n,g.width))<s.render.clientWidth+i*a&&(c=p),m<s.render.clientHeight+o&&(u=m),s.setSize(c,u),-1===a){var f=Math.max(d+i,0);s.setPosition(f,null)}}})}var m=i.match("w2window_resize_right"),f=i.match("w2window_resize_left");if((m||f)&&(a.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1!==this._direction))){s=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:m?"resize_right":"resize_left",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[s._multiViewUUID]||s.showModal.call(s)},handleFinish:function(t,e,i,o,r){var a="resize_right"===this.mode?1:-1;s.hideModal.call(s);var n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=n+i*a;h<parseInt(s.windowInfo.minWidth,10)&&(h=parseInt(s.windowInfo.minWidth,10),1===a?i+=n-h:i=n-h);var d=s.getMaxSize().width;if("resize_right"===this.mode&&(d-=s.render.offsetLeft),d<s.render.clientWidth+i*a&&(h=d),WebSquare.idCache[s._multiViewUUID]&&1!==s._direction){var c=WebSquare.idCache[s._multiViewUUID],u=parseInt(c.windowInfo.minWidth,10);h>d-u&&(h=d-u),c.setSize(parseInt(c.getStyle("width"),10)-h+n,null),c.setPosition(c.getPosition("left")+h-n,null)}if(s.setSize(h,l),s.frame&&s.frame._processMsgModal&&"block"===s.frame._processMsgModal.render.style.display&&s.frame._processMsgModal.setSize(h,l),-1===a){var p=s.getPosition("left")+i;p+h>d&&(p=d-h),p=Math.max(p,0),s.setPosition(p,null)}}})}var b=i.match("w2window_resize_bottom"),y=i.match("w2window_resize_up");if((b||y&&this.options.dragResizableHeader)&&(a.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1===this._direction))){s=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:b?"resize_bottom":"resize_up",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),
a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[s._multiViewUUID]||s.showModal.call(s)},handleFinish:function(t,e,i,o,r){var a="resize_bottom"===this.mode?1:-1;s.hideModal.call(s);var n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=parseInt(s.getStyle("left"),10),d=parseInt(s.getStyle("top"),10),c=l+o*a;c<parseInt(s.windowInfo.minHeight,10)&&(c=parseInt(s.windowInfo.minHeight,10));var u=s.getMaxSize(),p=u.height;a||(p=d+l),1==a?p-=s.render.offsetTop:p=Math.min(d+l,u.height);var g=s.render.clientHeight+o*a;if(p<c&&(c=p,1===a&&(o+=g-c)),WebSquare.idCache[s._multiViewUUID]&&1===s._direction){var m=WebSquare.idCache[s._multiViewUUID],f=parseInt(m.windowInfo.minHeight,10);c>p-f&&(c=p-f),m.setSize(null,parseInt(m.getStyle("height"),10)-c+l),m.setPosition(null,m.getPosition("top")+c-l)}else if("resize_up"===this.mode){var b=d-o*a;b<0&&(b=0),b+c>p&&(b=p-c),s.setPosition(h,b)}s.setSize(n,c)}})}if(this.options.dragResizableHeader){var v=i.match("w2window_resize_upRight"),w=i.match("w2window_resize_upLeft");if((v||w)&&(a.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:v?"resize_upRight":"resize_upLeft",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){s.showModal.call(s)},handleFinish:function(t,e,i,o,r){s.hideModal.call(s);var a="resize_upRight"===this.mode?1:-1,n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=s.render.offsetTop,d=s.render.offsetLeft,c=n+i*a,u=l-o;c<parseInt(s.windowInfo.minWidth,10)&&(c=parseInt(s.windowInfo.minWidth,10),1===a?i+=n-c:i=n-c),u<parseInt(s.windowInfo.minHeight,10)&&(o=l-(u=parseInt(s.windowInfo.minHeight,10)));var p,g,m=s.getMaxSize();1===a?(p=m.width-d,g=h+l):(p=Math.min(d+n,m.width),g=Math.min(h+l,m.height));var f=l-o;p<n+i*a&&(c=p),g<f&&(u=g,1===a&&(o+=f-u)),s.setSize(c,u);var b=h+o,y=d;-1===a&&(b=Math.max(b,0),y=Math.max(d+i,0)),b+u>=m.height&&(b=m.height-u),s.setPosition(y,b)}})}}}i=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleMouseupEvent=function(t){try{a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFrameKeyupEvent=function(t){try{a.B.fireEvent(this,"onwindowkeyup",t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkLoadEvent=function(){try{if(this.frame&&this.frame.render){var t=this.frame.render.contentWindow;t.WebSquare&&t.WebSquare.scriptSectionExcuteFlag&&"executed"===t.WebSquare.scriptSectionExcuteFlag&&(n.D.clearInterval(this.id+"_checkLoadEvent"),n.D.fullViewed&&n.D.zoomed(t.document.body,"1"))}}catch(t){}},c.prototype.handleSelectStartEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)(!0!==this.options.enableHeaderSelect&&e.match("w2window_header")||e.match("w2window_status"))&&a.B.preventDefault(t);e=null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setWindowTitle=function(t){try{var e=document.getElementById(this.id+"_header_title");if(e){if(e.innerHTML=t,this.options.windowTitle=t,this.options.windowTooltipDisplay&&this.render)document.getElementById(this.id+"_header").setAttribute("title",t);!0===this.options.useATagTitle&&e.setAttribute("title",t)}}catch(t){
r.w.printStackTrace(t,null,this)}},c.prototype.setWindowHeaderHTML=function(t){try{if(t){try{var e=n.D.getGlobalFunction(t,this.scope_id);"function"==typeof e?e():e}catch(e){t}var i=this.getElementById(this.id+"_header");i&&(i.innerHTML=t,this.options.windowHeaderHTML=t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setButtonCondition=function(t,e,i){try{var o=this.buttons[Number(e)];if(o){var s=o.contentDom;i=n.D.getBoolean(i);switch(t){case"hidden":o.visisble=i,s.parentNode.style.display=i?"none":"inline-block";break;case"disabled":o.disable=i,i?this.addClass(s,"w2window_header_button_disabled"):this.removeClass(s,"w2window_header_button_disabled")}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setCloseButtonStatus=function(t){try{this.options.disableCloseButton=!n.D.getBoolean(t);var e=document.getElementById(this.id+"_close");this.options.disableCloseButton?this.addClass(e,"w2window_close_disabled"):this.removeClass(e,"w2window_close_disabled")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDataObject=function(t){try{this.frame?(this.frame.setDataObject(t),this._dataObject&&delete this._dataObject):this._dataObject=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getDataObject=function(){try{return this.frame?this.frame._getDataObject():this._dataObject}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{h.s.prototype.finalize.call(this),!0!==this._closed&&this.close({sync:!0,skipRemove:!0})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._close=function(t){try{if(!this.options)return;var e={src:this.options.src,title:this.options.windowTitle,id:this.id};a.B.fireEvent(this,"onbeforeclose",e);var i=this.options.parent&&this.options.parent.options.spaIframeMaxSize>this.options.parent.storedFrame.length;if("iframe"==this.options.frameMode)if(i)this.frame.setSrc(WebSquare.net.getBlankXML());else{try{var o=s.v.getConfiguration("/WebSquare/clearMemory/@value");n.D.isIEAllVersion()&&"true"==o||this.frame.getWindow().WebSquare&&this.frame.getWindow().WebSquare.clearMemory()}catch(t){}this.frame.setSrc("about:blank")}if(a.B.fireEvent(this,"onclose",e),i){this.render&&(this.render.style.display="none");for(var l=!1,h=0;h<this.options.parent.storedFrame.length;h++)if(this.options.parent.storedFrame[h]==this.id){l=!0;break}l||this.options.parent.storedFrame.push(this.id)}else this.remove&&!0!==t&&("wframe"===this.options.frameMode&&a.B.fireEvent(this,"onwindowunload"),this.remove())}catch(t){r.w.printStackTrace(t,null,this),this._closed=!1}}},9271:(t,e,i)=>{i.r(e),i.d(e,{windowContainer:()=>d});var o=i(2981),s=i(1656),r=i(2085),a=i(1960),n=i(3082),l=i(7275),h=i(6615),d=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.windowContainer",pluginName:"windowContainer",userEvents:["onCloseWindow","onwindowkeyup","onwindowchange","onwindowtabclick","onbeforecloseall","onbeforenamelayermove","onafternamelayermove","onmenuclick","onwindowload","onwindowunload","oncustomcontrolclick","onminimizebtnclick","onrestorebtnclick"],useConfirmMessage:!0,confirmTrueAction:"existWindow",confirmFalseAction:"newWindow",windowMaxNum:5,confirmMessage:"#title 화면이 존재합니다. 기존의 창을 사용하시려면 '확인'을 새로운 창을 사용하시려면 '취소'를 선택하세요",lineBreakNum:4,useNameScroll:!1,useCloseButton:!1,useFixButton:!1,useNameContainer:!1,controlIconPosition:"left",fixArrangeFullScreen:!1,verticalArrangeNum:2,horizontalArrangeNum:2,sequentialArrangeRowNum:2,sequentialArrangeColNum:2,windowAutoResize:!1,toolbarWidth:0,toolbarPosition:"bottom",positionX:"none",positionY:"none",windowMaximizeAll:!1,stopMinimizeOnNameLayer:!1,stopToggleOnLast:!1,defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",hideTitleOnMaximize:!1,usePopup:!1,closeWindowOnPopup:!1,tooltipDisplay:!0,
tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,windowTooltipDisplay:!0,useLocale:!1,confirmMessageLocaleRef:"",wmode:!1,selectedIndex:-1,useStatusMsg:!0,useCustomMsg:!1,statusMsg:"",customMsg:"",nameScrollMode:"",useControlIconTitle:!1,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,spaReplaceHistory:!1,nameLayerMenu:!1,windowHeaderHTML:"",enableHeaderSelect:!1,useDrag:!1,skipZIndex:!1,noAttatchedEvent:!1,closeType:"all",nameLayerMove:!1,nameLayerMoveGap:110,keepSelectedWindow:!1,swapZIndex:!1,controlIcons:[{id:"vertical",className:"w2windowContainer_controlIcon_vertical",useTitle:!1,isCustom:!1},{id:"horizontal",className:"w2windowContainer_controlIcon_horizontal",useTitle:!1,isCustom:!1},{id:"cascade",className:"w2windowContainer_controlIcon_cascade",useTitle:!1,isCustom:!1},{id:"sequential",className:"w2windowContainer_controlIcon_sequential",useTitle:!1,isCustom:!1},{id:"closeAll",className:"w2windowContainer_controlIcon_closeAll",useTitle:!1,isCustom:!1}],buttonFormatter:"",controlIconFormatter:null,restoreWinSize:!1,spaAuto:!1,spaAutoDelay:3e3,windowDragMove:!1,windowMoveType:"restrict",frameModal:!1,useWindowId:!1,processMsgFrame:!1,useWindowScrollButton:!1,windowScrollVisibleRowNum:5,autoArrange:!1,escape:!0,changeActiveWindow:!1,nameLayerRearrange:!1,msaName:""},d.prototype.initialize=function(t){try{this.windows=[],this.fixedWindowArr=[],this.beforeWindow=null,this.nowWindow=null,this.selectedWindowHistory=[],this.selectedIndex=-1,this.windowIdx=0,this.maxZIndex=0,this.currentWindowNum=0,this.tooltip=null,this.timeShowTooltip=null,this.useControlIconFormatter=!1,this.options.useLocale&&null!=this.options.confirmMessageLocaleRef&&""!=this.options.confirmMessageLocaleRef&&(this.options.confirmMessage=this.getLocaleValue(this.options.confirmMessageLocaleRef));var e="w2windowContainer_window";"top"==this.options.toolbarPosition&&(e+="_top");var i=new WebSquare.uiplugin.group(this.id+"_window",{className:e,style:"background-color : transparent"});this.addControl(i),this.options=WebSquare.cssManager.styleToClass(this.id,this.options),t&&"$blank"==t.getAttribute("statusMsg")?this.defaultStatusMsg="":this.defaultStatusMsg=this.options.statusMsg||WebSquare.language.getMessage("Window_statusMsg"),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==s.v.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),this.storedFrame=[],this.options.nameLayerMenu&&(this.options.useNameContainer=!0),this.windowHeaderHTML="",this.nameLayerHTML="",this.multiViewIdArr=[],this.options.useDrag,"wframe"===this.options.frameMode&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!1),this.zIndexFlagInfo={},this.options.useNameContainer||(this.options.controlIconPosition="left")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.toHTML=function(){try{var t=[],e={vertical:"",horizontal:"",cascade:"",sequential:"",closeAll:"",maximize:"",closeOthers:""},i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";function r(t){return" title='"+t+"'"}this.options.useControlIconTitle&&(e.maximize=r(WebSquare.language.getMessage("WindowContainer_controlIcon_maximize")),e.vertical=r(WebSquare.language.getMessage("WindowContainer_controlIcon_vertical")),e.horizontal=r(WebSquare.language.getMessage("WindowContainer_controlIcon_horizontal")),e.cascade=r(WebSquare.language.getMessage("WindowContainer_controlIcon_cascade")),
e.sequential=r(WebSquare.language.getMessage("WindowContainer_controlIcon_sequential")),e.closeAll=r(WebSquare.language.getMessage("WindowContainer_controlIcon_closeAll")));var s="w2windowContainer_windowToolbar";"top"==this.options.toolbarPosition&&(s+="_top");var a="",n="";!this.options.useNameContainer||"right"!=this.options.controlIconPosition&&"allright"!=this.options.controlIconPosition||(a=" w2windowContainer_controlIconLayer_right",n=this.options.hideTitleOnMaximize?" w2windowContainer_nameContainer_right_maximizeBtn":" w2windowContainer_nameContainer_right");var l="w2windowContainer_controlIconLayer",h="w2windowContainer_scrollLeftBtn";return this.options.hideTitleOnMaximize&&(l+=" w2windowContainer_controlIconLayer_extend",h+=" w2windowContainer_scrollLeftBtn_extend"),t.push("<div id='"+this.id+"' "+i+" class='w2windowContainer "+this.options.className+"' "+o+">"),t.push(this.getChild(this.id+"_window").toHTML()),this.options.nameLayerMenu||(t.push("<div id='"+this.id+"_toolbar' class='"+s+"'>"),t.push("<div id='"+this.id+"_controlIcon' class='"+l+a+"'>"),"allright"==this.options.controlIconPosition&&(t.push("<div id='"+this.id+"_controlBtnDiv'>"),t.push("<div id='"+this.id+"_left' style='display:none;' class='"+h+"'></div>"),t.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),t.push("</div>"),t.push("<div id='"+this.id+"_controlIconDiv'>")),t.push("<span id='"+this.id+"_vertical' class='w2windowContainer_controlIcon_vertical'"+e.vertical+"></span>"),t.push("<span id='"+this.id+"_horizontal' class='w2windowContainer_controlIcon_horizontal'"+e.horizontal+"></span>"),t.push("<span id='"+this.id+"_cascade' class='w2windowContainer_controlIcon_cascade'"+e.cascade+"></span>"),t.push("<span id='"+this.id+"_sequential' class='w2windowContainer_controlIcon_sequential'"+e.sequential+"></span>"),t.push("<span id='"+this.id+"_closeAll' class='w2windowContainer_controlIcon_closeAll'"+e.closeAll+"></span>"),this.options.useWindowScrollButton&&(this.options.useControlIconTitle&&(e.windowList=r(WebSquare.language.getMessage("WindowContainer_controlIcon_windowList"))),t.push("<span id='"+this.id+"_windowList' class='w2windowContainer_controlIcon_windowList'></span>")),this.options.hideTitleOnMaximize&&t.push("<span id='"+this.id+"_maximize' class='w2windowContainer_controlIcon_maximize'"+e.maximize+"></span>"),"allright"==this.options.controlIconPosition&&t.push("</div>"),t.push("</div>")),this.options.useNameContainer&&t.push("<div id='"+this.id+"_nameContainer' class='w2windowContainer_nameContainer"+(this.options.nameLayerMenu?" w2windowContainer_nameLayerMenu":"")+n+"'>"),"allright"!==this.options.controlIconPosition&&t.push("<div id='"+this.id+"_left' style='display:none;' class='"+h+"'></div>"),t.push("<div id='"+this.id+"_name' class='w2windowContainer_name'></div>"),"allright"!==this.options.controlIconPosition&&t.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),this.options.useNameContainer&&t.push("</div>"),t.push("</div>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setPreAction=function(){try{this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.nameBar=this.getElementById(this.id+"_name"),this.dom.window=this.getElementById(this.id+"_window"),this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.nameContainer=this.getElementById(this.id+"_nameContainer"),this.dom.leftScrollBtn=this.getElementById(this.id+"_left"),this.dom.rightScrollBtn=this.getElementById(this.id+"_right"),this.options.nameLayerMenu?this.createMenu():(this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.iconVertical=this.getElementById(this.id+"_vertical"),this.dom.iconHorizontal=this.getElementById(this.id+"_horizontal"),this.dom.iconCascade=this.getElementById(this.id+"_cascade"),
this.dom.iconSequential=this.getElementById(this.id+"_sequential"),this.dom.iconCloseAll=this.getElementById(this.id+"_closeAll"),this.dom.iconWindowList=this.getElementById(this.id+"_windowList")),this.options.hideTitleOnMaximize&&(this.dom.iconMaximize=this.getElementById(this.id+"_maximize")),this.dom.nameScrollLeft=this.getElementById(this.id+"_left"),this.dom.nameScrollRight=this.getElementById(this.id+"_right")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){try{if(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),n.D.isMobile()?this.event.addListener(this.dom.nameBar,"ontouchstart",this.event.bindAsEventListener(this,this.handleNameLayerMove)):this.event.addListener(this.dom.nameBar,"onmousedown",this.event.bindAsEventListener(this,this.handleNameLayerMove)),h.s.addCheckResize(this.uuid,"checkResize"),!this.options.nameLayerMenu&&this.options.useWindowScrollButton){var t=this.dom.toolBar.offsetWidth,e=this.dom.control.offsetWidth;WebSquare.style.setStyle(this.dom.iconWindowList,"left",e+"px"),e+=this.dom.iconWindowList.offsetWidth,WebSquare.style.setStyle(this.dom.control,"width",e+"px"),this.options.useNameContainer?("right"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"right",e+"px"):WebSquare.style.setStyle(this.dom.nameContainer,"width",t-e+"px"),"left"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"left",e+"px"):"allright"===this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","-50px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"right",this.dom.control.offsetWidth+"px"))):WebSquare.style.setStyle(this.dom.leftScrollBtn,"left",e+"px")}else"allright"==this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.control,"width","180px"),WebSquare.style.setStyle(this.dom.nameContainer,"right","180px"),WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","0px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right","130px"),WebSquare.style.setStyle(this.dom.iconVertical,"left","50px"),WebSquare.style.setStyle(this.dom.iconHorizontal,"left","75px"),WebSquare.style.setStyle(this.dom.iconCascade,"left","100px"),WebSquare.style.setStyle(this.dom.iconSequential,"left","125px"),WebSquare.style.setStyle(this.dom.iconCloseAll,"left","150px"));"overflow"==this.options.windowMoveType&&WebSquare.style.setStyle(this.dom.window,"overflow","auto")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onComplete=function(){try{this.setControlIconFormatter(),s.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&s.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),h.s.prototype.onComplete.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makeIframe=function(){if("iframe"===this.options.frameMode){var t=this.storedFrame.length;if(this.options.spaIframeMinSize>t+this.windows.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id),s.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50})}}},d.prototype.createFrame=function(t){try{if("iframe"!==this.options.frameMode)return;if(this.options.windowMaxNum<=this.windows.length+this.storedFrame.length)return void l.k.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")");if(void 0!==t&&null!=t||(t={}),isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length){
var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.createWindow=function(t,e,i,o,s,a,n,l,h,d,c,u,p,g,m,f){try{return"object"==typeof t&&null!=t?this.__createWindowByObj(t):this.__createWindow(t,e,i,o,s,a,n,l,h,d,c,u,p,g,m,f)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.__createWindow=function(t,e,i,o,s,a,l,h,d,c,u,p,g,m,f,b){try{if(""===this.windowHeaderHTML&&""!==this.options.windowHeaderHTML){var y="";try{y=n.D.getGlobalFunction(this.options.windowHeaderHTML,this.scope_id);this.windowHeaderHTML="function"==typeof y?y():y}catch(t){this.windowHeaderHTML=this.options.windowHeaderHTML}}t=t&&this.options.escape?WebSquare.xml._encode(t):t,o=(o=o&&this.options.escape?WebSquare.xml._encode(o):o)||t,s=s||t;for(var v=null,w=c||{},S=0;S<this.windows.length;S++){var C=this.windows[S];s==C.windowId&&(v=C)}if(null!=v)if(null!=a&&""!=a)this.performAction(a,v,t,e,i,o,s,h,d,l,w,u,p,g,m,f,b);else{for(var _=this.options.confirmMessage;-1!=_.indexOf("#title");)_=_.replace("#title",t);var x=!0;1==this.options.useConfirmMessage&&(x=confirm(_)),x?this.performAction(this.options.confirmTrueAction,v,t,e,i,o,s,h,d,l,w,u,p,g,m,f,b):this.performAction(this.options.confirmFalseAction,v,t,e,i,o,s,h,d,l,w,u,p,g,m,f,b)}else this._createWindow(t,e,i,o,s,l,h,d,w,u,p,g,m,f,b)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.__createWindowByObj=function(t){try{if(!(t&&t.title&&t.src))return void $l("["+this.id+" : createWindow ] 인자를 확인해주세요.");var e=t.title||"",i=t.iconUrl||null,o=t.src||"",s=t.windowTitle||null,a=t.windowId||null,n=t.openAction||null,l=t.closeAction||null,h=t.windowTooltip||null,d=t.windowHeaderHTML||null,c=t.useNameLayer||!0,u=t.nameLayerHTML||null,p=t.userIconClass||null,g=t.userIconPosition||null,m={fixed:t.fixed||!1,useNameLayer:c,defaultWidth:t.defaultWidth||"",defaultHeight:t.defaultHeight||"",defaultTop:t.defaultTop||"",defaultLeft:t.defaulLeft||"",useRestoreDefaultSize:t.useRestoreDefaultSize||!1},f=t.frameMode||this.options.frameMode,b=t.msaName||"";return this.__createWindow(e,i,o,s,a,n,l,h,d,m,f,t.dataObject,u,p,g,b)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.performAction=function(t,e,i,o,s,a,n,l,h,d,c,u,p,g,m,f,b){try{if("selectWindow"==t)this.selectNameLayer(e.id),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id);else if("existWindow"==t){if(e.isFix){e.isFix=!1;for(var y=0;y<this.fixedWindowArr.length;y++)if(this.fixedWindowArr[y].id==e.id){this.fixedWindowArr.splice(y,1);break}}var v;this.selectNameLayer(e.id),e.window.setStatusMsg(this.defaultStatusMsg),p&&(v={dataObject:p}),e.window.setSrc(s,v),e.window.options.closeAction=d,e.window.options.title=i;l=l||a;this.setWindowLabel(n,"toolbar",i),this.setWindowLabel(n,"window",a),this.setWindowLabel(n,"tooltip",l),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id)}else"newWindow"==t&&this._createWindow(i,o,s,a,n,d,l,h,c,u,p,g,m,f,b)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._createWindow=function(t,e,i,o,l,h,d,c,u,p,g,m,f,b,y){try{var v=o.wq_replaceAll("&nbsp;","");u=u||{};if(y&&(u.msaName=y),-1!=this.options.windowMaxNum&&this.currentWindowNum>this.options.windowMaxNum-1)return void alert(WebSquare.language.getMessage("WindowContainer_maxNum_warning",this.options.windowMaxNum));var w,S=null,C=this.storedFrame.length>0&&(!p||"iframe"===p);if(C)(S=n.D.getComponentById(this.storedFrame.shift()))._closed=!1,S.options.closeAction=h,S.options.title=t,c?S.setWindowHeaderHTML(c):S.setWindowTitle(o),g&&(w={dataObject:g}),S.frame.setSrc(i,w),S.render&&(S.render.style.display="");else S=this._createSubWindow(t,e,i,v,l,h,d,c,p,g,!0,m,f,b,u);var _=S.id;this.currentWindowNum++;var x={};if(x.id=_,x.window=S,x.title=t,x.iconUrl=e,x.src=i,x.windowTitle=o,x.windowId=l,x.closeAction=h,x.tooltip=d||o,x.windowHeaderHTML=c,x.buttonFormatter=this.options.buttonFormatter,x.isFix=u.fixed||!1,
x.nameLayerHTML=m,x.userIconClass=f,x.userIconPosition=b,x.useNameLayer=!u.useNameLayer||n.D.getBoolean(u.useNameLayer),0==x.useNameLayer?this.windows.splice(0,0,x):this.windows.push(x),this.createNameLayer(),this.beforeWindow=this.nowWindow,this.nowWindow=_,this.selectWindow(),C||(S.activate(),S.onComplete()),this.options.restoreWinSize&&this.restoreWindowSize(l),this.beforeWindow!=this.nowWindow){var I=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,T=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",I,T)}this.options.spaAuto&&s.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._createSubWindow=function(t,e,i,o,l,h,d,c,u,p,g,m,f,b,y){y=y||{};var v=this.org_id||this.id,w=v+"_subWindow"+this.windowIdx++;this.options.useWindowId&&(w=v+"_subWindow_"+l+"_"+this.windowIdx++);u=u||this.options.frameMode;var S=y.defaultWidth||this.options.defaultWidth,C=y.defaultHeight||this.options.defaultHeight,_=y.defaultTop||this.options.defaultTop,x=y.defaultLeft||this.options.defaultLeft,I=y.useRestoreDefaultSize||this.options.useRestoreDefaultSize,T=WebSquare.controlFactory.create(w,{pluginName:"window",parseChild:!1,windowTitle:o,windowHeaderHTML:c||this.windowHeaderHTML,nameLayerHTML:m||this.nameLayerHTML,enableHeaderSelect:this.options.enableHeaderSelect,src:i,userIconClass:f,userIconPosition:b,useStatusMsg:this.options.useStatusMsg,useCustomMsg:this.options.useCustomMsg,statusMsg:""==this.defaultStatusMsg?"":this.defaultStatusMsg,customMsg:this.options.customMsg,defaultTop:_,defaultLeft:x,defaultWidth:S,defaultHeight:C,useRestoreDefaultSize:I,minimumWidth:this.options.minimumWidth,minimumHeight:this.options.minimumHeight,frameMode:u,wmode:this.options.wmode,width:this.render.offsetWidth,height:this.render.offsetHeight-25,closeAction:h,title:t,parent:this,windowTooltipDisplay:this.options.windowTooltipDisplay,noAttatchedEvent:this.options.noAttatchedEvent,spa:this.options.spa,spaReplaceHistory:this.options.spaReplaceHistory,buttonFormatter:this.options.buttonFormatter,windowDragMove:this.options.windowDragMove,frameModal:this.options.frameModal,windowMoveType:this.options.windowMoveType,minVisibleWindowPixel:this.options.minVisibleWindowPixel,processMsgFrame:this.options.processMsgFrame,dragResizableHeader:this.options.dragResizableHeader,delegateProcessMsg:n.D.getBoolean(this.options.delegateProcessMsg),msaName:y.msaName},null,this.scope_obj,this.parentFrame,!0);p&&T.setDataObject(p),T._windowId=l;var k=this,D=!0===s.v.scriptPrecedence?"onwindowload":"ondrawcomplete";return T.options.xmlEvents=[{name:"onclose",action:"script",param:{handler:function(t){try{a.B.fireEvent(k,"onCloseWindow",t),k.removeNameLayer(this.id);for(var e=0;e<k.fixedWindowArr.length;e++)if(k.fixedWindowArr[e].id==this.id){k.fixedWindowArr.splice(e,1);break}k.createNameLayer(),k.selectWindow();var i=k.nowWindow?k.getWinInfoObj(k.nowWindow).windowId:null;if(a.B.fireEvent(k,"onwindowchange",k.closedWindowId,i),k.setFocus(k.getSelectedIndex()),k.options.autoArrange)if(k.options.useFixButton){var o=k.options.verticalArrangeNum,s=k.options.horizontalArrangeNum;"vertical"==k.arrangeHistory&&k.windows.length<o?k.options.verticalArrangeNum=k.windows.length:"horizontal"==k.arrangeHistory&&k.windows.length<s&&(k.options.horizontalArrangeNum=k.windows.length),"sequential"==k.arrangeHistory&&k.windows.length<=k.options.sequentialArrangeColNum?(k.options.verticalArrangeNum=k.windows.length,k.setArrangeWindows("vertical"),k.arrangeHistory="sequential"):k.setArrangeWindows(k.arrangeHistory),k.options.verticalArrangeNum=o,k.options.horizontalArrangeNum=s}else k.setArrangeWindows(k.arrangeHistory);0==k.windows.length&&(k.options.spaAuto?"wframe"===k.options.frameMode&&(k.windowIdx=0):k.windowIdx=k.options.spaInitCount)}catch(t){r.w.printStackTrace(t,null,k)}}}},{name:"onwindowkeyup",action:"script",param:{
handler:function(t){try{a.B.fireEvent(k,"onwindowkeyup",t)}catch(t){r.w.printStackTrace(t,null,k)}}}},{name:"onwindowmousedown",action:"script",param:{handler:function(t){try{k.selectNameLayer(this.id)}catch(t){r.w.printStackTrace(t,null,k)}}}},{name:"onminimize",action:"script",param:{handler:function(t){k._onminimize(this.id)}}},{name:"onmaximize",action:"script",param:{handler:function(t){k._onmaximize(this.id)}}},{name:"ondragstart",action:"script",param:{handler:function(t){k.selectNameLayer(this.id),k.handleDragStartEvent()}}},{name:"ondragend",action:"script",param:{handler:function(t){k.handleDragEndEvent()}}},{name:"onpopup",action:"script",param:{handler:function(t){k._onpopup(this.id)}}},{name:D,action:"script",param:{handler:function(t){a.B.fireEvent(k,"onwindowload",this._windowId)}}},{name:"onwindowunload",action:"script",param:{handler:function(){a.B.fireEvent(k,"onwindowunload",this._windowId)}}}],this.options.nameLayerMenu&&T.options.xmlEvents.push({name:"onwindowmousedown",action:"script",param:{handler:function(t){try{k.hideContextMenu()}catch(t){r.w.printStackTrace(t,null,k)}}}}),T.writeTo(this.getChild(this.id+"_window")),!0!==g&&(T.activate(),T.onComplete()),T},d.prototype.setWindowLabel=function(t,e,i){try{if(!t||!e||!i)return;for(var o,s=this.windows.length-1;s>=0;s--)if(this.windows[s].windowId===t){o=this.windows[s];break}if(!o)return;var a="all"===(e=e.toLowerCase());if("window"===e||a){if(o.windowTitle=i,o.window.options.windowTitle=i,this.options.windowTooltipDisplay){var n=document.getElementById(o.id);n&&n.setAttribute("title",i)}var l=document.getElementById(o.id+"_header_title");l&&(l.innerHTML=i)}if(("tooltip"===e||a)&&(o.tooltip=i),"toolbar"===e||a)document.getElementById(this.id+"_nameLayer_"+o.id).setAttribute("windowTitle",i),o.title=i,this.createNameLayer(),this.selectWindow()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getWindowLabel=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].windowId===t){i=this.windows[o];break}if(!i)return;if("toolbar"===(e=e.toLowerCase()))return i.title;if("window"===e)return i.windowTitle;if("tooltip"===e)return i.tooltip}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.createNameLayer=function(){try{var t=[];this.dom.nameBar.innerHTML="";for(var e=n.D.getDataPrefix("refId"),i=n.D.getDataPrefix("windowtitle"),o="",s="",a="",l=0;l<this.windows.length;l++){(c=this.windows[l]).useNameLayer&&(c.nameLayerHTML?this._setNameLayerHTML(c.id,t):(null!=c.userIconClass&&null==c.userIconPosition&&c.userIconPosition,!0===this.options.useFixButton&&null!=c.userIconClass?("left"==c.userIconPosition?(a="w2windowContainer_nameLayer_firstButtonFromLeft",s="w2windowContainer_nameLayer_secondButtonFromLeft"):(s="w2windowContainer_nameLayer_firstButtonFromLeft",a="w2windowContainer_nameLayer_secondButtonFromLeft"),o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix_withUserIcon"):!0===this.options.useFixButton&&null==c.userIconClass?(s="w2windowContainer_nameLayer_firstButtonFromLeft",o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):!1===this.options.useFixButton&&null!=c.userIconClass?(a="w2windowContainer_nameLayer_firstButtonFromLeft",o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):o="w2windowContainer_nameLayer",t.push("<div id='"+this.id+"_nameLayer_"+c.id+"' class='"+o+"' "+e+"='"+c.id+"' "+i+"='"+c.title+"'>"),this.options.useFixButton&&(s+=" w2windowContainer_nameLayer_fixOff",c.isFix&&(s+=" w2windowContainer_nameLayer_fixOn"),t.push("<div class='"+s+"' "+e+"='"+c.id+"'>"),t.push("</div>")),null!=c.userIconClass&&(a+=" "+c.userIconClass+" w2windowContainer_nameLayer_userIconPosition",t.push("<div class='"+a+"' "+e+"='"+c.id+"'>"),t.push("</div>")),t.push(c.title),this.options.useCloseButton&&(t.push("<div class='w2windowContainer_nameLayer_close' "+e+"='"+c.id+"'>"),t.push("</div>")),
this.options.nameLayerMenu&&(t.push("<div class='w2windowContainer_nameLayer_menu' "+e+"='"+c.id+"'>"),t.push("</div>")),t.push("</div>")))}if(this.dom.nameBar.innerHTML=t.join(""),this.dom.nameBar.style.width="auto",this.windows.length>0){for(var h=0,d=(l=0,0);l<this.windows.length;l++){var c;if((c=this.windows[l]).useNameLayer){var u=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[d],"margin-left"))||0,p=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[d],"margin-right"))||0;h+=this.dom.nameBar.childNodes[d].offsetWidth+u+p,d++}}this.dom.nameBar.style.width=h+2+"px"}else this.dom.nameBar.style.width="0px";var g=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2,m=this.render.offsetWidth,f=0;if(!this.options.nameLayerMenu&&this.options.toolbarWidth)this.dom.toolBar.style.width=this.options.toolbarWidth+"px",m=this.options.toolbarWidth;else if(!this.options.nameLayerMenu){f=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left"));var b=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(f)||(m-=f),isNaN(b)||(m-=b)}m<this.dom.nameBar.scrollWidth+g?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.display="",this.dom.leftScrollBtn.style.display=""):(this.options.useNameScroll=!1,this.options.useNameContainer||this.options.nameLayerMenu?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=g+"px",this.useControlIconFormatter&&(this.options.useNameContainer&&"right"==this.options.controlIconPosition&&!this.options.nameLayerMenu?document.getElementById(this.id+"_nameContainer").style.right=g+"px":this.options.useNameContainer&&"left"==this.options.controlIconPosition&&!this.options.namelayerMenu&&(document.getElementById(this.id+"_nameContainer").style.left=g+"px")),this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none"),1==this.options.useNameScroll&&(this.options.useWindowScrollButton&&"allright"===this.options.controlIconPosition||(this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px"),this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._setNameLayerHTML=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].id===t){i=this.windows[o];break}if(!i)return;var s=n.D.getDataPrefix("windowtitle"),a=n.D.getDataPrefix("refId"),l=i.title,h="",d="",c="",u=e;if(this.options.useFixButton){var p="w2windowContainer_nameLayer_fixOff_custom";i.isFix&&(p+=" w2windowContainer_nameLayer_fixOn"),h="<div class='"+p+"' "+a+"='"+i.id+"'></div>"}this.options.useCloseButton&&(d="<div class='w2windowContainer_nameLayer_close_custom' "+a+"='"+i.id+"'></div>"),this.options.nameLayerMenu&&(c="<div class='w2windowContainer_nameLayer_menu' "+a+"='"+i.id+"'></div>"),e.push("<div id='"+this.id+"_nameLayer_"+i.id+"' class='w2windowContainer_nameLayer' "+a+"='"+i.id+"' "+s+"='"+i.title+"'>");try{var g=n.D.getGlobalFunction(i.nameLayerHTML,this.scope_id);u="function"==typeof g?g(l,h,d,c):g}catch(t){u=i.nameLayerHTML}e.push(u),e.push("</div>")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.removeNameLayer=function(t){try{var e=this.getWinInfoObj(t);if(null==e)return;this.closedWindowId=e.windowId;for(var i=0;i<this.windows.length;i++){this.windows[i].id==t&&this.windows.splice(i,1)}this.addHistory(t),this.closedWindow=this.selectedWindowHistory.pop(),this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-2]||null,this.nowWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1]||null,this.currentWindowNum--}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.clickNameLayer=function(t,e,i){try{var o=t,s=(e=n.D.getBoolean(e),n.D.getBoolean(i.stopToggleOnLast));if(this.nowWindow==o){var l=this.getWinInfoObj(this.nowWindow).windowId;if(a.B.fireEvent(this,"onwindowtabclick",l,l),1==s&&1==this.windows.length)return
;if(1==e||this.options.nameLayerMenu)return;this.minimizeWindow(o)}else{this.beforeWindow=this.nowWindow,this.nowWindow=o,this.selectWindow();var h=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,d=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",h,d),a.B.fireEvent(this,"onwindowtabclick",h,d)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getWinInfoObj=function(t,e){try{null==e&&(e="id");for(var i=0;i<this.windows.length;i++)if(this.windows[i][e]==t)return this.windows[i]}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.fixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!0,this.fixedWindowArr.push(e);var i=n.D.getDataPrefix("refId");if(this.options.useFixButton)for(var o=document.getElementById(this.id+"_nameLayer_"+e.id),s=0;s<o.childNodes.length;s++){var a=o.childNodes[s];if(1===a.nodeType&&a.getAttribute(i)===e.id)return a.className="w2windowContainer_nameLayer_firstButtonFromLeft w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn",!0}return!0}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.unfixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!1;for(var i=0;i<this.fixedWindowArr.length;i++)this.fixedWindowArr[i].id==e.id&&this.fixedWindowArr.splice(i,1);var o=n.D.getDataPrefix("refId");if(this.options.useFixButton){var s=document.getElementById(this.id+"_nameLayer_"+e.id);for(i=0;i<s.childNodes.length;i++){var a=s.childNodes[i];if(1===a.nodeType&&a.getAttribute(o)===e.id)return a.className="w2windowContainer_nameLayer_fixOff",!0}}return!0}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.minimizeWindow=function(t){try{this.getWinInfoObj(t).window.minimize()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._onminimize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.nowWindow==e)this.minimizedWindow=this.selectedWindowHistory.pop(),this.nowWindow=this.selectedWindowHistory.pop()||null,this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1];else for(var i=0;i<this.selectedWindowHistory.length;i++)if(e==this.selectedWindowHistory[i]){this.selectedWindowHistory.splice(i,1);break}if(this.selectWindow(),this.prevWindow==e){var o=this.getWinInfoObj(this.minimizedWindow).windowId,s=this.nowWindow?this.getWinInfoObj(this.nowWindow).windowId:null;a.B.fireEvent(this,"onwindowchange",o,s)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.maximizeWindow=function(t){try{this.getWinInfoObj(t).window.maximize()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._onmaximize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e&&(this.nowWindow=e,this.selectWindow(),this.prevWindow)){var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;a.B.fireEvent(this,"onwindowchange",i,o)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._onpopup=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e){this.nowWindow=e,this.selectWindow();var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;a.B.fireEvent(this,"onwindowchange",i,o)}var s=this.getSelectedIndex();if(s>-1&&s<this.windows.length){var l=this.windows[s],h=(window.screen.availHeight-this.getSize("height"))/2,d=(window.screen.availWidth-this.getSize("width"))/2,c={id:l.id,type:"window",width:this.getSize("width")+"px",height:this.getSize("height")+"px",top:h+"px",left:d+"px",popupName:l.title,modal:!1,useIFrame:!1,style:"",resizable:!0,status:!1,menubar:!1,scrollbars:!0,title:!1,srcData:"",destData:""};n.D.openPopup(l.window.options.src,c),this.options.closeWindowOnPopup&&l.window.forceClose()}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.selectWindow=function(){try{for(var t=0;t<this.windows.length;t++){var e=this.windows[t].id,i=document.getElementById(this.id+"_nameLayer_"+e),o=document.getElementById(e+"_header"),a=document.getElementById(e)
;this.removeClass(i,"w2windowContainer_selectedNameLayer"),this.removeClass(o,"w2window_selected_header"),this.removeClass(a,"w2window_selected")}if(null!=this.nowWindow){var l=this.getWinInfoObj(this.nowWindow);if(l.window.windowInfo.minimized=!1,this.options.skipZIndex)this.zIndexFlagInfo[l.id]?(l.window.setStyle("display","block"),this.increaseZIndex(l.window)):(l.window.setStyle("display","none"),l.window.setStyle("zIndex",0));else l.window.setStyle("display","block"),this.increaseZIndex(l.window),n.D.getBoolean(s.v.getConfiguration("/WebSquare/windowContainer/displayOnlyTopWindow/@value"))&&this.displayOnlyTopWindow();i=document.getElementById(this.id+"_nameLayer_"+this.nowWindow),o=document.getElementById(this.nowWindow+"_header"),a=document.getElementById(this.nowWindow);if(this.addClass(i,"w2windowContainer_selectedNameLayer"),this.addClass(o,"w2window_selected_header"),this.addClass(a,"w2window_selected"),"hide"==this.options.nameScrollMode){var h=0,d=this.dom.nameBar.offsetWidth,c=this.selectedIndex;if(this.addHistory(this.nowWindow),this.refreshSelectedIndex(),c>this.selectedIndex)for(t=c;t>=0;t--){var u=this.windows[t].id;"block"!=(p=document.getElementById(this.id+"_nameLayer_"+u)).style.display&&(p.style.display="block")}for(t=this.selectedIndex;t>=0;t--){var p;u=this.windows[t].id;if("none"!=(p=document.getElementById(this.id+"_nameLayer_"+u)).style.display){var g=WebSquare.style.getStyle(p,"margin-left");g="auto"===g?"0":g;var m=WebSquare.style.getStyle(p,"margin-right");m="auto"===m?"0":m;var f=p.offsetWidth+parseInt(g,10)+parseInt(m,10);h+f>=d?p.style.display="none":h+=f}}}else if(this.options.useNameScroll){if("allright"==this.options.controlIconPosition)var b=this.dom.nameContainer.offsetLeft,y=this.dom.control.offsetLeft,v=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,w=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;else b=this.dom.leftScrollBtn.offsetLeft+this.dom.leftScrollBtn.offsetWidth,y=this.dom.rightScrollBtn.offsetLeft,v=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,w=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;if(v>y||w>y)this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-(w-y)+"px";else if(v<b||w<b){var S=this.options.nameLayerMenu||this.options.useNameContainer&&"right"==this.options.controlIconPosition?0:this.dom.control.offsetWidth;"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft-i.offsetLeft+"px":this.dom.nameBar.style.left=S+this.dom.leftScrollBtn.offsetWidth-i.offsetLeft+"px"}this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.selectedIndex=-1}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.addHistory=function(t){try{for(var e=null,i=0;i<this.selectedWindowHistory.length;i++)this.selectedWindowHistory[i]==t&&(e=i);null!=e&&this.selectedWindowHistory.splice(e,1),this.selectedWindowHistory.push(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.increaseZIndex=function(t){try{if(!this.options.skipZIndex&&this.options.swapZIndex&&t.zIndex>0){var e=t.zIndex;if(e<this.maxZIndex){for(var i=0;i<this.windows.length;i++)if(this.windows[i].id!=t.id){var o=this.windows[i].window.zIndex,s=o-2;e<o&&s>1&&(this.windows[i].window.setStyle("zIndex",s),this.windows[i].window.zIndex=s)}t.setStyle("zIndex",this.maxZIndex),t.zIndex=this.maxZIndex}}else this.maxZIndex+=2,t.setStyle("zIndex",this.maxZIndex),this.options.swapZIndex&&(t.zIndex=this.maxZIndex),this.windowList&&(this.windowList.render.style.zIndex=this.maxZIndex+2),this.options.nameLayerMenu?this.getElementById(this.id+"_nameContainer").style.zIndex=this.maxZIndex:this.dom.toolBar.style.zIndex=this.maxZIndex}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.displayOnlyTopWindow=function(){try{for(var t=this.windows.length,e=this.nowWindow,i=0;i<t;i++){var o=this.windows[i].id,s=this.getWinInfoObj(o)
;o!=e&&"maximized"==s.window.windowInfo.status&&s.window.setStyle("display","none")}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setZIndex=function(t){try{var e=this.windows[t];e&&(e.window.setStyle("display","block"),this.increaseZIndex(e.window),this.zIndexFlagInfo[e.id]=!0)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.selectNameLayer=function(t){try{for(var e=0;e<this.selectedWindowHistory.length;e++)if(this.selectedWindowHistory[e]==t){this.prevWindow=this.nowWindow;var i=t;if(i!=this.nowWindow&&(this.beforeWindow=this.nowWindow,this.nowWindow=i),this.selectWindow(),this.prevWindow!=i){var o=null;this.prevWindow&&(o=this.getWinInfoObj(this.prevWindow).windowId);var s=this.getWinInfoObj(i).windowId;a.B.fireEvent(this,"onwindowchange",o,s)}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doVerticalArrange=function(t){try{var e=0,i=2,o=[],s=[];if(t){for(var a=0;a<t.length;a++)for(var n=0;n<this.windows.length;n++){if((l=this.windows[n]).windowId==t[a]){o.push(l);break}}for(a=0;a<this.windows.length;a++){var l=this.windows[a],h=!0;for(n=0;n<t.length;n++)if(l.windowId==t[n]){h=!1;break}h&&s.push(l)}}else for(a=0;a<this.windows.length;a++){0==(l=this.windows[a]).window.windowInfo.minimized&&o.push(l)}var d=o.length;d<this.options.lineBreakNum?(i=1,e=d):(i=2,e=Math.ceil(d/i));var c,u,p="",g=0,m=0;for(a=0;a<s.length;a++)s[a].window.minimize(!0);for(a=0;a<d;a++){var f=o[a],b=f.window,y=b.resizeParentGroup();c=parseInt(y.width/e,10),u=parseInt(y.height/i,10),b.restore(),b.setSize(c-(b.getSize("outerMarginWidth")-b.getSize("width")),u-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(g*c,m*u),++g==e&&(g=0,m++),p=f.id,this.addHistory(p)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="vertical"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doVerticalFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(f=this.windows[o]).isFix||(f.window.windowInfo.minimized?e(f.id):i[f.id]=f)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var a=s[o];void 0!==i[a]&&e(i[a].id)}var l=n.D.getDataPrefix("refId");for(o=0;o<this.fixedWindowArr.length;o++){if(e((f=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(l)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var d=this.options.verticalArrangeNum,c=this.windows.length;this.options.fixArrangeFullScreen&&(d=d>c?c:d);var u=0,p=0,g=0;if("none"==this.options.positionX)for(o=this.selectedWindowHistory.length;o>0;o--){var m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/d,10),g=parseInt(m.height/1,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,0*g),++u==d&&(u=0)}else if("left"==this.options.positionX)for(o=this.selectedWindowHistory.length;o>0;o--){m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/d,10),g=parseInt(m.height/1,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,0*g),++u==d&&(u=1)}else if("right"==this.options.positionX){u=d-1;for(o=this.selectedWindowHistory.length;o>0;o--){var f,b;m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/d,10),g=parseInt(m.height/1,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,0*g),++u==d&&(u=0),u==d-1&&(u=0)}}this.selectNameLayer(this.selectedWindowHistory[c-1]),
this.arrangeHistory="vertical"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doHorizontalArrange=function(t){try{var e=2,i=0,o=[],s=[];if(t){for(var a=0;a<t.length;a++)for(var n=0;n<this.windows.length;n++){if((h=this.windows[n]).windowId==t[a]){o.push(h);break}}for(a=0;a<this.windows.length;a++){var l=!0,h=this.windows[a];for(n=0;n<t.length;n++)if(h.windowId==t[n]){l=!1;break}l&&s.push(h)}}else for(a=0;a<this.windows.length;a++){0==(h=this.windows[a]).window.windowInfo.minimized&&o.push(h)}var d=o.length;d<this.options.lineBreakNum?(i=d,e=1):(i=Math.ceil(d/e),e=2);var c,u,p="",g=0,m=0;for(a=0;a<s.length;a++)s[a].window.minimize(!0);for(a=0;a<d;a++){var f=o[a],b=f.window,y=b.resizeParentGroup();c=parseInt(y.width/e,10),u=parseInt(y.height/i,10),b.restore(),b.setSize(c-(b.getSize("outerMarginWidth")-b.getSize("width")),u-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(g*c,m*u),++g==e&&(g=0,m++),p=f.id,this.addHistory(p)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="horizontal"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doHorizontalFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(f=this.windows[o]).isFix||(f.window.windowInfo.minimized?e(f.id):i[f.id]=f)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var a=s[o];void 0!==i[a]&&e(i[a].id)}var l=n.D.getDataPrefix("refId");for(o=0;o<this.fixedWindowArr.length;o++){if(e((f=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(l)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var d=this.options.horizontalArrangeNum,c=this.windows.length;this.options.fixArrangeFullScreen&&(d=d>c?c:d);var u=0,p=0,g=0;if("none"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){var m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/1,10),g=parseInt(m.height/d,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(0*p,u*g),++u==d&&(u=0)}else if("top"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/1,10),g=parseInt(m.height/d,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(0*p,u*g),++u==d&&(u=1)}else if("bottom"==this.options.positionY){u=d-1;for(o=this.selectedWindowHistory.length;o>0;o--){var f,b;m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/1,10),g=parseInt(m.height/d,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(0*p,u*g),++u==d&&(u=0),u==d-1&&(u=0)}}this.selectNameLayer(this.selectedWindowHistory[c-1]),this.arrangeHistory="horizontal"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doCascadeArrange=function(){try{for(var t,e,i="",o=[],s=0;s<this.windows.length;s++){var a=this.windows[s];0==a.window.windowInfo.minimized&&o.push(a)}var n=o.length;for(s=0;s<n;s++){var l=o[s],h=l.window;if(0==s){var d=h.resizeParentGroup();t=parseInt(d.width-200,10),e=parseInt(d.height-200,10)}h.restore(),h.setSize(t-(h.getSize("outerMarginWidth")-h.getSize("width")),e-(h.getSize("outerMarginHeight")-h.getSize("height"))),h.setPosition(s%10*20,s%10*20),i=l.id}this.selectNameLayer(i),this.arrangeHistory="cascade"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doCascadeFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow
;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(p=this.windows[o]).isFix||(p.window.windowInfo.minimized?e(p.id):i[p.id]=p)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var a=s[o];void 0!==i[a]&&e(i[a].id)}var l=n.D.getDataPrefix("refId");for(o=0;o<this.fixedWindowArr.length;o++){if(e((p=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(l)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var d=this.windows.length,c=0,u=0;for(o=this.selectedWindowHistory.length;o>0;o--){var p,g=(p=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window;if(o==this.selectedWindowHistory.length){var m=g.resizeParentGroup();c=parseInt(m.width-200,10),u=parseInt(m.height-200,10)}g.restore(),g.setSize(c-(g.getSize("outerMarginWidth")-g.getSize("width")),u-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition((o-1)%10*20,(o-1)%10*20)}this.selectNameLayer(this.selectedWindowHistory[d-1]),this.arrangeHistory="cascade"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doSequentialArrange=function(){try{for(var t=1,e=1,i=!0,o=[],s=0;s<this.windows.length;s++){var a=this.windows[s];0==a.window.windowInfo.minimized&&o.push(a)}for(var n,l,h=o.length;i;)t*e<h?t==e?t++:e++:i=!1;var d="",c=0,u=0;for(s=0;s<h;s++){var p=o[s],g=p.window;if(0==s){var m=g.resizeParentGroup();n=parseInt(m.width/t,10),l=parseInt(m.height/e,10)}g.restore(),g.setSize(n-(g.getSize("outerMarginWidth")-g.getSize("width")),l-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(c*n,u*l),++c==t&&(c=0,u++),d=p.id}!1===this.options.keepSelectedWindow&&this.selectNameLayer(d),this.arrangeHistory="sequential"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doSequentialFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(y=this.windows[o]).isFix||(y.window.windowInfo.minimized?e(y.id):i[y.id]=y)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var a=s[o];void 0!==i[a]&&e(i[a].id)}var l=n.D.getDataPrefix("refId");for(o=0;o<this.fixedWindowArr.length;o++){if(e((y=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(l)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var d=this.options.sequentialArrangeRowNum,c=this.options.sequentialArrangeColNum,u=this.windows.length;this.options.fixArrangeFullScreen&&(d=(c=c>u?u:c)>u?1:d);var p=0,g=0,m=0,f=0;if("none"==this.options.positionX&&"none"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){var b=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(b.width/c,10),f=parseInt(b.height/d,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,g*f),++p==c&&(p=0,++g==d&&(g=0))}else if("left"==this.options.positionX&&"top"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){b=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(b.width/c,10),f=parseInt(b.height/d,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,g*f),++p==c&&(p=0,++g==d&&(p=1,g=0))}else if("right"==this.options.positionX&&"top"==this.options.positionY){p=c-1;for(o=this.selectedWindowHistory.length;o>0;o--){b=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(b.width/c,10),f=parseInt(b.height/d,10),v.restore(),
v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,g*f),p++,0==g&&p==c-1&&(g++,p=0),p==c&&(p=0,0!=g&&++g==d&&(g=0))}}else if("left"==this.options.positionX&&"bottom"==this.options.positionY){g=d-1;for(o=this.selectedWindowHistory.length;o>0;o--){b=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(b.width/c,10),f=parseInt(b.height/d,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,g*f),g==d-1&&0==p?(p=0,g=0):++p==c&&(p=0,++g==d-1?p=1:g==d&&(g=0))}}else if("right"==this.options.positionX&&"bottom"==this.options.positionY){p=c-1,g=d-1;for(o=this.selectedWindowHistory.length;o>0;o--){var y,v;b=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(b.width/c,10),f=parseInt(b.height/d,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,g*f),p++,g!=d-1||p!=c-1&&p!=c||(p=0,g=0),p==c&&(p=0,g++)}}this.selectNameLayer(this.selectedWindowHistory[u-1]),this.arrangeHistory="sequential"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.doCloseAll=function(){if(!1!==a.B.fireEvent(this,"onbeforecloseall")){for(var t=this.windows.length-1;t>=0;t--)this.options.useFixButton?("fixedWindow"==this.options.closeType&&!0===this.windows[t].isFix||"noneFixedWindow"==this.options.closeType&&!1===this.windows[t].isFix||"all"==this.options.closeType)&&(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close()):(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close());this.selectedIndex=-1}},d.prototype.doMaximizeAll=function(){for(var t=[],e=0;e<this.selectedWindowHistory.length;e++)for(var i=0;i<this.selectedWindowHistory.length;i++)if(this.selectedWindowHistory[e]==this.windows[i].id){t.push(this.windows[i]);break}for(e=0;e<t.length;e++)"maximized"!==t[e].window.windowInfo.status&&t[e].window.maximize()},d.prototype.isExistWindow=function(t){try{for(var e=0;e<this.windows.length;e++){if(t==this.windows[e].title)return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setSize=function(t,e){try{parseInt(t)<450&&(t=450),parseInt(e)<150&&(e=150);var i=this.getSize("width"),o=this.getSize("height"),s=t/i,a=e/o;this.setStyle("width",t+"px"),this.setStyle("height",e+"px");for(var n=0;n<this.windows.length;n++){var l=this.windows[n];if(l.window.resizeParentGroup(),this.options.windowAutoResize&&"maximized"!=l.window.windowInfo.status){var h=l.window,d=h.getSize("width"),c=h.getSize("height"),u=parseInt(h.getStyle("left"),10),p=parseInt(h.getStyle("top"),10),g=Math.ceil(d*s),m=Math.ceil(c*a),f=Math.ceil(u*s),b=Math.ceil(p*a);l.window.setSize(g,m),l.window.setStyle("left",f+"px"),l.window.setStyle("top",b+"px")}this.options.useNameScroll&&(this.dom.rightScrollBtn.style.left=parseInt(this.render.offsetWidth)-20+"px")}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.checkResize=function(){try{var t=this.render?this.render.offsetWidth:null;null!=this.bWidth&&t!=this.bWidth&&this.nameLayerResize(),this.bWidth=t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.nameLayerResize=function(t){try{var e=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2;if(!this.options.toolbarWidth){var i=this.render.offsetWidth,o=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left")),s=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(o)||(i-=o),isNaN(s)||(i-=s),i<this.dom.nameBar.scrollWidth+e?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px",this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block",
"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.control.offsetLeft-this.dom.nameBar.offsetWidth+"px":this.dom.nameBar.style.left=this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth+"px"):(this.options.useNameScroll=!1,this.options.useNameContainer?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=e+"px",this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none")}if("hide"==this.options.nameScrollMode)for(var a=0;a<this.windows.length;a++){var n=this.windows[a].id,l=document.getElementById(this.id+"_nameLayer_"+n);"none"==l.style.display&&(l.style.display="block")}this.selectWindow()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.createWindowList=function(t){if(!this.windowList){var e="";e+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' class='w2windowContainer_window_list' labelCheck='true' visibleRowNum='"+this.options.windowScrollVisibleRowNum+"' useCloseButton='"+this.options.useWindowScrollButton+"'>",e+="    <w2:listRow tagName='div' style='' class='w2windowContainer_window_list_listRow' >",e+="        <w2:listColumn id='title' inputType='text' style='' class='w2windowContainer_window_list_listColumn_text'/>",e+="    </w2:listRow>",e+="</w2:list>";var i=WebSquare.xml.parse(e,!0).documentElement;this.windowList=new WebSquare.uiplugin.list(this.id+"_windows_list","",i);var o=this,s=n.D.getDataPrefix("unique_id");this.windowList.options.xmlEvents=[{name:"onrowclick",action:"script",param:{handler:function(t,e){!function(t,e){if(e&&e.target){var i,r=e.target;if(r.className.match("w2list_listColumn_close")){i=r.parentElement.getAttribute(s);for(var a="",n=0;n<o.windows.length;n++)if(o.windows[n].unique_id===i){a=o.windows[n].windowId,o.windowList.removeRow(n);break}a&&(o.windows.length<2?o.hideWindowList():o.showWindowList(!0),o.closeWindow(a))}else{if(r.className.match("w2windowContainer_window_list_listColumn_text"));else if(!r.className.match("w2windowContainer_window_list_listRow"))return void(o.dom.iconWindowList!==r&&this.render!==r&&o.hideWindowList());for(i=r.parentElement.getAttribute(s),a="",n=0;n<o.windows.length;n++)if(o.windows[n].unique_id===i){a=o.windows[n].id;break}if(!a)return void o.hideWindowList();o.listToggle=!1,(e={}).stopToggleOnLast=o.options.stopToggleOnLast,o.clickNameLayer(a,o.options.stopMinimizeOnNameLayer,e),o.hideWindowList()}}}(0,e)}}},{name:"onmousedown",action:"script",param:{handler:function(t){a.B.stopPropagation(t)}}}],this.windowList.writeTo(WebSquare.getBody()),this.windowList.activate(),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showWindowList,fnHide:this._hideWindowList,paramHide:{documentClick:!0},event:{}}),this.windowList.setJSON(this.windows)}},d.prototype.showWindowList=function(t){try{this.windowList||t||this.createWindowList(),t||(this.windowList.setJSON(this.windows),WebSquare.getBody().getLayerListener().show(this.id))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._showWindowList=function(t){try{this.windowList.show(),this.windowList.render.style.zIndex=this.maxZIndex+2,this.windowList.options.rowHeight=this.windowList.render.firstChild.offsetHeight,this.windowList.adjustRender();var e=this.dom.iconWindowList,i=WebSquare.style.getRelativeTop(this.dom.toolBar,this.render.offsetParent),o=WebSquare.style.getAbsoluteLeft(e,this.render),s="top"===this.options.toolbarPosition?i+this.dom.iconWindowList.clientHeight+4:i-this.windowList.render.clientHeight,a=e.clientWidth+WebSquare.style.getAbsoluteLeft(e)-this.windowList.render.offsetWidth,n=!this.options.useNameContainer||"right"!==this.options.controlIconPosition&&"allright"!==this.options.controlIconPosition?o:this.windows.length>this.windowList.options.visibleRowNum?a-18:a;this.windowList.setPosition(n,s),
this.windowList.focus(),this.listToggle=!0}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.hideWindowList=function(){try{this.windowList&&this.windowList.id&&(WebSquare.getBody().getLayerListener().hide(this.id),this.listToggle=!1)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._hideWindowList=function(t){try{(t=t||{}).documentClick;this.windowList&&this.windowList.id&&(this.windowList.hide(),this.listToggle=!1)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.toggle=function(){try{this.listToggle?this.hideWindowList():this.showWindowList()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.showTooltip=function(t,e){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null);var i=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var o=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(o){var a=n.D.getGlobalFunction(o,i.scope_id),l=!0;if("function"==typeof a&&(l=a(i)),!l)return}}catch(t){r.w.printStackTrace(t)}if(this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2windowContainer_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),"block"!=this.tooltip.render.style.display){this.tooltip.setStyle("display","block"),this.tooltip.render.innerHTML=e;var h,d=WebSquare.style.getAbsoluteLeft(t)+t.offsetWidth/2;h="bottom"===this.options.toolbarPosition?WebSquare.style.getAbsoluteTop(t)-this.tooltip.render.offsetHeight:WebSquare.style.getAbsoluteTop(t)+this.tooltip.render.offsetHeight,this.tooltip.setStyle("zIndex",this.maxZIndex),this.tooltip.setStyle("left",d+"px"),this.tooltip.setStyle("top",h+"px")}})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.hideTooltip=function(){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),this.tooltip&&this.tooltip.setStyle("display","none")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setWindowSize=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",s=0;s<this.windows.length;s++){var a=this.windows[s],n=a.window;a.id==this.nowWindow&&(n.windowInfo.width=i,n.windowInfo.height=o,n.restore())}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.restoreWindowSize=function(t){try{for(var e=0;e<this.windows.length;e++){var i=this.windows[e],o=i.window;if(i.windowId==t){o.restore();break}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setWindowPosition=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",s=0;s<this.windows.length;s++){var a=this.windows[s],n=a.window;if(a.id==this.nowWindow){n.windowInfo.left=i,n.windowInfo.top=o,n.windowInfo.status="restored",n.windowInfo.minimized=!1,n.windowInfo.getInfo(n.render);break}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.closeWindow=function(t){try{var e=this.getWinInfoObj(t,"windowId"),i="";i=null==e?this.nowWindow:e.id;for(var o=0;o<this.windows.length;o++){var s=this.windows[o],a=s.window;if(s.id==i){this.multiViewIdArr.length>0&&this.setSingleView(),a.close();break}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.closeOthers=function(t){try{var e,i=this.getWinInfoObj(t)||this.getWinInfoObj(t,"windowId");e=null==i?this.nowWindow:i.id;for(var o=0;o<this.windows.length;o++){var s=this.windows[o],a=s.window;s.id!=e&&a.close()}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setWindowStatusMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],s=o.window;if(e){if(o.title==e){s.setStatusMsg(t);break}}else if(o.id==this.nowWindow){s.setStatusMsg(t);break}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setWindowCustomMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],s=o.window;if(e){if(o.title==e){s.setCustomMsg(t);break}
}else if(o.id==this.nowWindow){s.setCustomMsg(t);break}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAllWindowStatusMsg=function(t){try{for(var e=0;e<this.windows.length;e++){this.windows[e].window.setStatusMsg(t)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getWindow=function(t){try{var e=s.v.getConfiguration("/WebSquare/windowContainer/getWindow/@searchTarget")||"title",i="title"===e;return this.getWindowByTarget(t,e,{focus:i})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getFrame=function(t){try{return this.getWindowByTarget(t,"windowId",{focus:!1,frame:!0})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._getCurrentFrame=function(){return this.getWindowByTarget(this.getSelectedWindowId(),"windowId",{focus:!1,frame:!0})},d.prototype.getWindowByWindowId=function(t,e){try{return this.getWindowByTarget(t,"windowId",{focus:e})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getWindowByTarget=function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=n.D.getBoolean(i.focus),s=0;s<this.windows.length;s++){var l=this.windows[s];if(t==l[e]){if(1==o&&(this.beforeWindow=this.nowWindow,this.nowWindow=l.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var h=this.getWinInfoObj(this.beforeWindow).windowId,d=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",h,d)}return!0===i.frame?l.window.frame:l.window.frame.getWindow()}}return null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getWindowByUniqueId=function(t,e){try{e=n.D.getBoolean(e);for(var i=0;i<this.windows.length;i++){var o=this.windows[i];if(t==o.id){if(1==e&&(this.beforeWindow=this.nowWindow,this.nowWindow=o.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var s=this.getWinInfoObj(this.beforeWindow).windowId,l=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",s,l)}return o.window.frame.getWindow()}}return null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getUniqueIdByTitle=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.title&&e.push(o.id)}return e}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getUniqueIdByWindowId=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.windowId&&e.push(o.id)}return e}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.showModal=function(){try{this.modal||(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",this.render.appendChild(this.modal)),this.modal&&(this.modal.style.display="block",this.modal.style.zIndex=this.maxZIndex-1)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.hideModal=function(){try{this.modal&&(this.modal.style.display="none")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.moveNameLayerScroll=function(t){try{if(this.options.changeActiveWindow){var e=this.selectedIndex;if("right"==t&&e>=0&&e<this.windows.length-1?e++:"left"==t&&e>0&&e<=this.windows.length-1&&e--,e!=this.selectedIndex){var i=this.windows[e].id,o={};o.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(i,this.options.stopMinimizeOnNameLayer,o)}}else if("hide"==this.options.nameScrollMode){for(var s=0,a=0;a<this.windows.length;a++){var n=this.windows[a].id,l=document.getElementById(this.id+"_nameLayer_"+n),h=WebSquare.style.getStyle(l,"margin-left");h="auto"===h?"0":h;var d=WebSquare.style.getStyle(l,"margin-right");d="auto"===d?"0":d;var c=l.offsetWidth+parseInt(h,10)+parseInt(d,10);"none"!=l.style.display&&(s+=c)}if("right"==t){if(this.dom.nameBar.offsetWidth>s)return;for(a=0;a<this.windows.length;a++){n=this.windows[a].id;if("none"!=(l=document.getElementById(this.id+"_nameLayer_"+n)).style.display&&a!=this.windows.length-1){l.style.display="none";break}}}else for(a=this.windows.length-1;a>=0;a--){n=this.windows[a].id;if("none"==(l=document.getElementById(this.id+"_nameLayer_"+n)).style.display){l.style.display="block"
;break}}}else{var u=parseInt(this.options.nameLayerMoveGap,10)||110;if("right"==t){var p="";p="allright"===this.options.controlIconPosition?this.dom.nameContainer.offsetWidth-this.dom.nameBar.offsetWidth:this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth,parseInt(this.dom.nameBar.style.left)-u<p?this.dom.nameBar.style.left=p+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-u+"px"}else if(this.options.useNameContainer)parseInt(this.dom.nameBar.style.left)+u>this.dom.leftScrollBtn.offsetWidth?"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft+"px":this.dom.nameBar.style.left=this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+u+"px";else{var g=this.options.nameLayerMenu?0:this.dom.control.offsetWidth;parseInt(this.dom.nameBar.style.left)+u>g+this.dom.leftScrollBtn.offsetWidth?this.dom.nameBar.style.left=g+this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+u+"px"}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setFocus=function(t){try{var e=t;if("string"==typeof t){for(var i=0;i<this.windows.length;i++)this.windows[i].windowId===t&&this.selectNameLayer(this.windows[i].id);return}if(!this.windows[e])return;this.windows[e].id!==this.nowWindow&&this.selectNameLayer(this.windows[e].id)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getSelectedIndex=function(){return this.selectedIndex},d.prototype.getSelectedWindowId=function(){return this.windows[this.selectedIndex].windowId},d.prototype.refreshSelectedIndex=function(t){try{for(var e=t||this.nowWindow,i=0;i<this.windows.length;i++){this.windows[i].id==e&&(this.selectedIndex=i)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleClickEvent=function(t){try{var e=n.D.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);for(this._hideWindowList();i.next();){if(i.match("w2windowContainer_controlIcon_customIcon"))return void a.B.fireEvent(this,"oncustomcontrolclick",i.getElement().id);if(i.match("w2windowContainer_controlIcon_vertical")&&(this.options.useFixButton&&this.options.verticalArrangeNum>0?this.doVerticalFixArrange():this.doVerticalArrange(),a.B.fireEvent(this,"onverticalarrange")),i.match("w2windowContainer_controlIcon_horizontal")&&(this.options.useFixButton&&this.options.horizontalArrangeNum>0?this.doHorizontalFixArrange():this.doHorizontalArrange(),a.B.fireEvent(this,"onhorizontalarrange")),i.match("w2windowContainer_controlIcon_cascade")&&(this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),a.B.fireEvent(this,"oncascadearrange")),i.match("w2windowContainer_controlIcon_sequential")&&(this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),a.B.fireEvent(this,"onsequentialarrange")),i.match("w2windowContainer_controlIcon_closeAll")&&this.doCloseAll(),i.match("w2windowContainer_controlIcon_maximize")){var o=this.getSelectedIndex();if(o>-1&&o<this.windows.length){var s=this.windows[o];"maximized"==s.window.windowInfo.status?(s.window.toggleResize(),a.B.fireEvent(this,"onselectedrestore")):(a.B.fireEvent(this,"onselectedmaximize"),1==this.options.windowMaximizeAll?this.doMaximizeAll():s.window.toggleResize())}}if(i.match("w2windowContainer_controlIcon_closeOthers")&&this.closeOthers(),i.match("w2windowContainer_controlIcon_windowList")&&this.windows.length>0&&this.toggle(),i.match("w2windowContainer_nameLayer")){var l=i.getElement().getAttribute(e),h={};h.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(l,this.options.stopMinimizeOnNameLayer,h)}if(i.match("w2windowContainer_nameLayer_close")){l=i.getElement().getAttribute(e);return void(c=this.getWinInfoObj(l)).window.close()}if(i.match("w2windowContainer_nameLayer_close_custom")){l=i.getElement().getAttribute(e)
;return void(c=this.getWinInfoObj(l)).window.close()}if(i.match("w2windowContainer_nameLayer_fixOff")){l=i.getElement().getAttribute(e);if((c=this.getWinInfoObj(l)).isFix=!c.isFix,null!==c.userIconClass&&null==c.userIconPosition&&(c.userIconPosition="right"),c.isFix)null==c.userIconClass||null!=c.userIconClass&&"right"==c.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn w2windowContainer_nameLayer_firstButtonFromLeft":null!=c.userIconClass&&"left"==c.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn w2windowContainer_nameLayer_secondButtonFromLeft"),this.fixedWindowArr.push(c);else{null==c.userIconClass||null!=c.userIconClass&&"right"==c.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_firstButtonFromLeft":null!=c.userIconClass&&"left"==c.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_secondButtonFromLeft");for(var d=0;d<this.fixedWindowArr.length;d++)if(this.fixedWindowArr[d].id==c.id){this.fixedWindowArr.splice(d,1);break}}return}if(i.match("w2windowContainer_nameLayer_fixOff_custom")){var c;l=i.getElement().getAttribute(e);if((c=this.getWinInfoObj(l)).isFix=!c.isFix,c.isFix)i.getElement().className="w2windowContainer_nameLayer_fixOff_custom w2windowContainer_nameLayer_fixOn",this.fixedWindowArr.push(c);else{i.getElement().className="w2windowContainer_nameLayer_fixOff_custom";for(d=0;d<this.fixedWindowArr.length;d++)if(this.fixedWindowArr[d].id==c.id){this.fixedWindowArr.splice(d,1);break}}return}if(i.match("w2windowContainer_nameLayer_menu"))return;if(i.match("w2windowContainer_nameLayer_menu_custom"))return;i.match("w2window")&&this.selectNameLayer(i.getElement().id),i.match("w2window_restore")&&1==this.options.windowMaximizeAll&&this.doMaximizeAll(),i.match("w2windowContainer_scrollLeftBtn")&&this.moveNameLayerScroll("left"),i.match("w2windowContainer_scrollRightBtn")&&this.moveNameLayerScroll("right")}i=null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleDblClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2window_header")){var i=this.getSelectedIndex();if(i>-1&&i<this.windows.length){var o=this.windows[i];o.windowTitle==e.element.title&&(1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),"maximized"==o.window.windowInfo.status?(o.window.toggleResize(),a.B.fireEvent(this,"onselectedrestore")):(a.B.fireEvent(this,"onselectedmaximize"),o.window.toggleResize()))}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleMouseOverEvent=function(t){try{a.B.stopEvent(t);for(var e=n.D.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2windowContainer_nameLayer")){for(var o=i.getElement(),s=i.getElement().getAttribute(e),l="",h=0;h<this.windows.length;h++){var d=this.windows[h];if(s==d.id){l=d.tooltip;break}}-1==i.getElement().id.indexOf(this.nowWindow)&&this.addClass(o,"w2windowContainer_selectedNameLayer"),this.options.tooltipDisplay&&this.showTooltip(o,l)}else{if(i.match("w2windowContainer_controlIcon_customIcon"))return void a.B.fireEvent(this,"oncustomcontrolover",i.getElement().id)
;i.match("w2windowContainer_controlIcon_vertical")?this.addClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):i.match("w2windowContainer_controlIcon_horizontal")?this.addClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):i.match("w2windowContainer_controlIcon_cascade")?this.addClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):i.match("w2windowContainer_controlIcon_sequential")?this.addClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):i.match("w2windowContainer_controlIcon_closeAll")?this.addClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):i.match("w2windowContainer_controlIcon_maximize")?this.addClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):i.match("w2windowContainer_controlIcon_closeOthers")?this.addClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):i.match("w2windowContainer_controlIcon_windowList")?this.addClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):i.match("w2windowContainer_scrollLeftBtn")?this.addClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):i.match("w2windowContainer_scrollRightBtn")&&this.addClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}i=null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleMouseOutEvent=function(t){try{a.B.stopEvent(t),this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2windowContainer_nameLayer"))-1==e.getElement().id.indexOf(this.nowWindow)&&this.removeClass(e.getElement(),"w2windowContainer_selectedNameLayer");else{if(e.match("w2windowContainer_controlIcon_customIcon"))return void a.B.fireEvent(this,"oncustomcontrolout",e.getElement().id);e.match("w2windowContainer_controlIcon_vertical")?this.removeClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):e.match("w2windowContainer_controlIcon_horizontal")?this.removeClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):e.match("w2windowContainer_controlIcon_cascade")?this.removeClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):e.match("w2windowContainer_controlIcon_sequential")?this.removeClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):e.match("w2windowContainer_controlIcon_closeAll")?this.removeClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):e.match("w2windowContainer_controlIcon_showWindows")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_showWindows_over"):e.match("w2windowContainer_controlIcon_windowList")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):e.match("w2windowContainer_controlIcon_maximize")?this.removeClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):e.match("w2windowContainer_controlIcon_closeOthers")?this.removeClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):e.match("w2windowContainer_scrollLeftBtn")?this.removeClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):e.match("w2windowContainer_scrollRightBtn")&&this.removeClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}e=null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleDragStartEvent=function(){try{this.showModal()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleDragEndEvent=function(){try{this.hideModal()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.finalize=function(){try{h.s.removeCheckResize(this.uuid);for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=n.D.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.createMenu=function(){try{
"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>","        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>","    </w2:listRow>","</w2:list>";var t=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>    </w2:listRow></w2:list>",!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",t),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate(),WebSquare.getBody().getLayerListener().addListener({component:this.contextMenu,fnShow:this.contextMenu.show,fnHide:this.contextMenu.hide});var e=[];e.push({col1:"화면 닫기"}),e.push({col1:"듀얼 모니터로 보기"}),e.push({col1:"멀티 뷰로 보기"}),e.push({col1:"공유하기"}),this.contextMenu.setJSON(e),WebSquare.getBody().getLayerListener().hide(this.contextMenu.id);var i=this.id;this.contextMenu.bind("onmousedown",(function(t){a.B.stopPropagation(t)})),this.contextMenu.bind("onrowclick",(function(t){var e=n.D.getComponentById(i),o=this.getRowData(t);a.B.fireEvent(e,"onmenuclick",this._refId,o.col1,o),WebSquare.getBody().getLayerListener().hide(this.id),this._refId=""}))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.toggleContextMenu=function(t,e,i){try{var o=this.getWinInfoObj(t);t="";o&&(t=o.windowId,this.contextMenu._refId=t),a.B.fireEvent(this,"onmenuopen",t),this.contextMenu||this.createMenu(),WebSquare.getBody().getLayerListener().isShow(this.contextMenu.id)?WebSquare.getBody().getLayerListener().hide(this.contextMenu.id):WebSquare.getBody().getLayerListener().show(this.contextMenu.id),this.contextMenu.setPosition(e,i-this.contextMenu.getSize("height"))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.hideContextMenu=function(){try{WebSquare.getBody().getLayerListener().hide(this.contextMenu.id)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setMenu=function(t,e){try{this.contextMenu||this.createMenu();for(var i=[],o=0;o<t.length;o++)i.push({col1:t[o]});this.contextMenu.setJSON(i),null!=e&&this.contextMenu.setSize("height",e)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setMultiView=function(t,e){try{var i=this.getWinInfoObj(this.nowWindow),o=this.getWinInfoObj(t,"windowId");if(!i||!o||o.windowId===i.windowId)return;var s=Number(e);isNaN(s)&&(e=0);for(var a=0;a<this.windows.length;a++)this.windows[a].windowId!==t&&this.windows[a].id!==this.nowWindow&&(this.windows[a].window.minimize(!0),WebSquare.style.hide(document.getElementById(this.id+"_nameLayer_"+this.windows[a].id)));this.multiViewIdArr=[o.id,this.nowWindow];var n=o.window,l=i.window;if(n._multiViewUUID=l.uuid,l._multiViewUUID=n.uuid,n._direction=e,l._direction=e,1===e){var h=n.resizeParentGroup(),d=parseInt(h.width,10),c=parseInt(h.height/2,10);n.restore(),n.setSize(d-(n.getSize("outerMarginWidth")-n.getSize("width")),c-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(0,c);h=l.resizeParentGroup();var u=parseInt(h.width,10),p=parseInt(h.height/2,10);l.restore(),l.setSize(u-(l.getSize("outerMarginWidth")-l.getSize("width")),p-(l.getSize("outerMarginHeight")-l.getSize("height"))),l.setPosition(0,0)}else{h=n.resizeParentGroup(),d=parseInt(h.width/2,10),c=parseInt(h.height,10);n.restore(),n.setSize(d-(n.getSize("outerMarginWidth")-n.getSize("width")),c-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(d,0);h=l.resizeParentGroup(),u=parseInt(h.width/2,10),p=parseInt(h.height,10)
;l.restore(),l.setSize(u-(l.getSize("outerMarginWidth")-l.getSize("width")),p-(l.getSize("outerMarginHeight")-l.getSize("height"))),l.setPosition(0,0)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setSingleView=function(t){try{for(var e=0;e<this.windows.length;e++)WebSquare.style.show(document.getElementById(this.id+"_nameLayer_"+this.windows[e].id));this.multiViewIdArr=[];for(e=0;e<this.windows.length;e++)this.windows[e].window.restore(),this.windows[e].window.maximize(),this.windows[e].window.setPosition(0,0),this.windows[e].window._multiViewUUID="",this.windows[e].window._direction=0;var i=this.getWinInfoObj(t,"windowId");i&&this.selectNameLayer(i.id)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.isMultiView=function(){return this.multiViewIdArr.length>0},d.prototype.handleNameLayerMove=function(t){try{if(!this.options.nameLayerMove&&!this.options.nameLayerMenu)return;for(var e=n.D.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();){if(this.options.nameLayerMenu&&i.match("w2windowContainer_nameLayer_menu")){a.B.stopEvent(t);var o=i.getElement(),s=o.getAttribute(e);this.toggleContextMenu(s,WebSquare.style.getAbsoluteLeft(o.parentNode),WebSquare.style.getAbsoluteTop(o.parentNode)),i.stop()}if(this.options.nameLayerMove&&i.match("w2windowContainer_nameLayer")){var l=-1,h=i.getElement();if(!h)return;for(var d=0;d<this.windows.length;d++)if(this.windows[d].id===h.getAttribute(e)){l=d;break}if(isNaN(l)||l<0)return;a.B.preventDefault(t);var c=this.uuid;this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,WebSquare.dragdrop.gDragManager.activate(t,h,{id:this.id+"_ghostLayer_nameLayerMove",className:"w2windowContainer_drag_nameLayerMove",dragoverClass:"w2windowContainer_nameLayer",dropClass:"w2windowContainer_nameLayer",delay:15,makeGhostLayer:function(t){return t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t},handleStart:function(t){var e=l,i=WebSquare.idCache[c],o=$(i.dom.nameBar.childNodes[e]);this.nameLayerMove_left=o.css("left"),this.dragOverNameLayer={},this.dropIndex=-1,this.nameLayerMove_zIndex=o.css("zIndex");var s=Number(this.nameLayerMove_zIndex);if(this.nameLayerMove_zIndex_Array=[],isNaN(s)||s<=0)for(var r=0;r<i.dom.nameBar.childNodes.length;r++){var a=$(i.dom.nameBar.childNodes[r]);this.nameLayerMove_zIndex_Array.push(a.css("zIndex")),r===e?a.css("zIndex",4):a.css("zIndex",5)}else o.css("zIndex",s-1)},onDrop:function(t,e,i,o,s,r,a){var n=l,h=WebSquare.idCache[c],d=$(h.dom.nameBar.childNodes[n]);if(d.css("left",this.nameLayerMove_left),this.nameLayerMove_zIndex_Array.length>0)for(var u=0;u<h.dom.nameBar.childNodes.length;u++)$(h.dom.nameBar.childNodes[u]).css("zIndex",this.nameLayerMove_zIndex_Array[u]);else d.css("zIndex",this.nameLayerMove_zIndex);for(var p in this.dragOverNameLayer)$(h.dom.nameBar.childNodes[p]).css("left",this.dragOverNameLayer[p]);h.moveNameLayer(n,this.dropIndex),this.nameLayerMove_left="",this.nameLayerMove_zIndex="",this.dragOverNameLayer={},this.nameLayerMove_zIndex_Array=[]},onDragover:function(t,e,i,o,s,r,a){for(var n=l,h=-1,d=WebSquare.idCache[c],u=0;u<d.dom.nameBar.childNodes.length;u++)if(d.dom.nameBar.childNodes[u]===e){h=u;break}var p=$(d.dom.nameBar.childNodes[n]);if(p.css("left",s/d._zoomLevel),null!=d.dom.nameBar.childNodes[h]&&h!==n){var g=$(d.dom.nameBar.childNodes[h]);null==this.dragOverNameLayer[h]?(this.dragOverNameLayer[h]=g.css("left"),n>h?g.css("left",p.width()):g.css("left",-1*p.width()),this.dropIndex=h):(g.css("left",this.dragOverNameLayer[h]),this.dragOverNameLayer[h]=null,delete this.dragOverNameLayer[h],this.dropIndex=n>h?h+1:h-1)}}}),i.stop()}}i=null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.moveNameLayer=function(t,e){try{if(t===e||t<0||e<0)return;var i,o;i=this.getRealWindowPosition(t),o=this.getRealWindowPosition(e);var s=this.windows[i].windowId,n=this.windows[o].windowId
;if(!1===a.B.fireEvent(this,"onbeforenamelayermove",{startWindowID:s,startIndex:t,endWindowID:n,endIndex:e}))return;var l=t>e?0:1;e<this.windows.length-1?this.dom.nameBar.insertBefore(this.dom.nameBar.childNodes[t],this.dom.nameBar.childNodes[e+l]):this.dom.nameBar.appendChild(this.dom.nameBar.childNodes[t]);!function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])}(this.windows,i,o);for(var h=0;h<this.windows.length;h++)if(this.nowWindow===this.windows[h].id){this.selectedIndex=h;break}a.B.fireEvent(this,"onafternamelayermove",{startWindowID:s,startIndex:t,endWindowID:n,endIndex:e})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setControlIconFormatter=function(){var t=[],e=n.D.getGlobalFunction(this.options.controlIconFormatter,this.scope_id);if(!this.options.nameLayerMenu&&"function"==typeof e){if(this.controlIconFormatter=e,this.useControlIconFormatter=!0,this.controlIcons=this.controlIconFormatter?this.controlIconFormatter.call(this):this.options.controlIcons,this.options.useControlIconTitle)for(var i=0,o=this.controlIcons.length;i<o;i++){this.controlIcons[i].useTitle=!0}for(i=0,o=this.controlIcons.length;i<o;i++){var s=this.controlIcons[i],r=s.isCustom?s.className+" w2windowContainer_controlIcon_customIcon":s.className,a=s.useTitle?"title='"+WebSquare.language.getMessage("WindowContainer_controlIcon_"+s.id)+"'":"";t.push("<span id='"+this.id+"_"+s.id+"' class='"+r+"'"+a+"></span>")}var l,h=this.dom.control;"allright"===this.options.controlIconPosition?(h=this.getElementById(this.id+"_controlIconDiv")).innerHTML=t.join(""):this.dom.control.innerHTML=t.join("");for(i=0,o=this.controlIcons.length;i<o;i++){var d=this.controlIcons[i],c=document.getElementById(this.id+"_"+d.id),u=d.id.substring(0,1).toUpperCase()+d.id.substring(1,d.id.length);!1===d.isCustom&&(this.dom["icon"+u]=c)}if("allright"===this.options.controlIconPosition){l=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(l,h)+l.offsetWidth+"px";for(var p=50,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25;var m=25*h.childNodes.length+55,f=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right",f+"px")}else if("right"===this.options.controlIconPosition){l=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(l,h)+l.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px");for(p=0,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25}else{l=h.childNodes[this.dom.control.childNodes.length-1],this.dom.control.style.width=WebSquare.style.getRelativeLeft(l,this.dom.control)+l.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"left",m+"px");for(p=0,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25}this.createNameLayer(),this.selectWindow()}},d.prototype.setArrangeWindows=function(t,e){try{switch(t){case"vertical":this.options.useFixButton&&this.options.verticalArrangeNum>0&&!e?this.doVerticalFixArrange():this.doVerticalArrange(e),a.B.fireEvent(this,"onverticalarrange");break;case"horizontal":this.options.useFixButton&&this.options.horizontalArrangeNum>0&&!e?this.doHorizontalFixArrange():this.doHorizontalArrange(e),a.B.fireEvent(this,"onhorizontalarrange");break;case"cascade":this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),a.B.fireEvent(this,"oncascadearrange");break;case"sequential":this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),a.B.fireEvent(this,"onsequentialarrange")}}catch(t){
r.w.printStackTrace(t,null,this)}},d.prototype.getRealWindowPosition=function(t){try{t>=this.dom.nameBar.childNodes.length&&(t=this.dom.nameBar.childNodes.length-1);for(var e=n.D.getDataPrefix("windowtitle"),i=WebSquare.util.getDataPrefix("refId"),o=(this.dom.nameBar.childNodes[t].getAttribute(e),this.dom.nameBar.childNodes[t].getAttribute(i)),s=0;s<this.windows.length;s++)if(o==this.windows[s].id)return s;return}catch(t){r.w.printStackTrace(t,null,this)}}},2981:(t,e,i)=>{i.d(e,{x:()=>o});var o={_xv:"SP5",domain:null,baseURI:"",baseServletURI:"",baseThemeURI:"",sp5ResourcePath:"../websquare/_websquare_",w2xDocumentRoot:"",w2xHome:"/",w2xTheme:"",w2xExtension:"w5",printConsole:!1,remoteConsole:!1,errorConsole:!1,useWeinre:!1,weinreUrl:"http://debug._wg.co.kr/target/target-script-min.js",hybridSubmissionURL:"",isPrintLog:!0,hybridApp:!1,isHoneyComb:!1,userAgentPattern:{serializer:"Android 2.3.5[\\w\\W]+M110|Android 2.3.5[\\w\\W]+M250",XMLParser:"Opera[\\w\\W]+Version[\\w\\W]+1[\\d].[\\d]",URIEncoder:"Chrome[\\w\\W]16[.0-9*]*|Version[\\w\\W]+Safari+",XPathParser:"Edge"},msActiveXFilteringEnabled:!1,externalOption:{},WebSquaredoc:null,UUIDPrefix:"wq_uuid",UUID:0,scriptCachedList:{},moduleList:{},noConflict:"$w",noConflictFunction:"$p",styleSheetEarlyImport:0,styleSheetEarlyImportName:"",styleSheetEarlyImportList:[],_styleSheetEarlyImportListLoaded:!1,externalCSSList:[],externalCSSDOM:[],externalCSSURL:[],externalCSSRemainder:[],pageXMLString:null};if(o.nodeValueDeprecated=document.createAttribute&&null!=document.createAttribute("test").value,o.scriptIdentifier=';\n"wq_Log_$$H',o.targetInfo="",o.skipLog=!1,o.printError=!1,o.pluginCache="default",o.pluginCacheVariable="__WebSquare__pluginCache",o.suffix="",o.spaURLMapping={},o.dataObject={},o.isWebSquarePopup=!1,o.strictMode=!0,o.convertPageXML=!0,o.strictModeFrame=null,o.serverDiff=NaN,o.pageURLPrefix="",o.useLanguagePack=!1,o.nowRendering=!1,o.WebSquareCache=!1,o.WebSquareEngineCache=!1,o.appendChildType=null,o._bEngineReadyBeforeOnload=!1,o._bDocumentReady=!1,o._initImportList=[],o._resourceURI="",o._bInitModule=!1,o.docType="html4.01",o.dataPrefix=!1,o._performance={use:!1},null!=document.doctype&&"html"==document.doctype.name&&""==document.doctype.publicId&&""==document.doctype.systemId&&(o.docType="html5"),window.onload=function(){o._bDocumentReady=!0,!0===o._bEngineReadyBeforeOnload&&(o.initialize(o.w2xPath),o._bEngineReadyBeforeOnload=!1)},"sessionStorage"in window){var s=sessionStorage.getItem("wq_spaURLMapping");null!=s&&(o.spaURLMapping=JSON.parse(s))}try{if("undefined"!=typeof externalValue)for(var r in externalValue)void 0!==o[r]&&(o[r]=externalValue[r])}catch(t){alert("External Option Error! : "+t.toString())}null==window.WebSquareExternal&&(window.WebSquareExternal={}),"string"==typeof window.WebSquareExternal.w2xExtension&&(o.w2xExtension=window.WebSquareExternal.w2xExtension||o.w2xExtension),o.configPath="";var a;if((a=location.toString().indexOf("w2Config"))>=0){var n=location.toString().slice(a+"w2Config=".length);o.configPath=n.slice(0,n.indexOf("config.js")+"config.js".length)}"string"==typeof window.WebSquareExternal.w2Config&&(o.configPath=window.WebSquareExternal.w2Config||o.configPath),o.sp5ResourcePath=window.WebSquareExternal.sp5ResourcePath||o.sp5ResourcePath,o.document=document,o.ver="NS4wXzUuNDg1OEIuMjAyMzAzMjcuMDgzNzA2Xw==MS44",o.logMsgArray=[],o.remoteLogMsgArray=[],o.logTime=0,o.logTotalTime=0,o.buildDate="N/A",o.buildID="",o.uiplugin={},o.logFileName="",o.docTitle="",o.jsString={},o.jsStringOpt={},o.jsStringCore="",o.$integiry={flag:!0,passed:[],failed:[]},o.allPlugin="${allPlugin}",o.allPluginArr=[],o.clientLang=window.WebSquareExternal.clientLang||"",o._async=!0,o.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50},o.timerHash={},o.measureHash={},o.userTimerHash={},o.userIntervalHash={},o.userData={},o.logMsgArrayLength=0,o.logMsgCurrentLength=0,o.logMsgLength=0,o.componentsCache={},o.addListenerCnt=0,
o.elementObjArr=[],o.selectboxCss=!1,o.triggerCss=!1,o.idCache={},o.idToUUID={},o.importsQueue={},o.controlMatchmarks={},o.lazyImportsArr=[],o.externalScriptArr=[],o.executePointScriptArr={},o.pageInheritScriptArr=[],o.pageInheritSubmissionList=[],o.pageInheritWorkflowList=[],o.configCache=[],o.configCacheObj=[],o.configCacheArray=[],o.eventCacheObj={},o.uiplugin={},function(){try{var t=function(t,e){var i=t.indexOf(e);return i>-1&&(o.baseURI=t.substring(0,i),!0)};if(window.WebSquareExternal.baseURI)o.baseURI=window.WebSquareExternal.baseURI,window.WebSquareExternal.baseServletURI?o.baseServletURI=window.WebSquareExternal.baseServletURI:o.baseServletURI=o.baseURI;else{for(var e=0;e<document.getElementsByTagName("script").length;e++){var i=document.getElementsByTagName("script")[e].src;if(t(i,"HybridPluginAll"))break;if(t(i,"bootloader.js"))break;if(!window.WebSquareExternal.baseServletURI){if(t(i,"javascript.wq?q=/bootloader"))break;if(t(i,"javascriptPluginAll.wq?q=/bootloader"))break}}var s;if(""==o.baseURI)if("file:"!=location.protocol)(s=location.pathname.lastIndexOf("/"))>-1?(o.baseURI=location.pathname.substring(0,s+1),"/"!=o.baseURI.charAt(0)&&(o.baseURI="/"+o.baseURI)):(s=location.pathname.lastIndexOf("\\"),o.baseURI=s>-1?location.pathname.substring(0,s+1):"./");else(s=location.pathname.lastIndexOf("/"))>-1?o.baseURI=location.pathname.substring(0,s+1):(s=location.pathname.lastIndexOf("\\"),o.baseURI=s>-1?location.pathname.substring(0,s+1):"./"),o.baseURI="file://"+o.baseURI;else if("file:"!=location.protocol){if(location.pathname.indexOf("/")>-1){if((r=o.baseURI.split("/")).length>0&&(".."==r[0]||"."==r[0])){(a=location.pathname.split("/")).pop();for(e=0;e<r.length;e++)if(".."==r[e])a.pop();else if("."!=r[e]){r=r.slice(e);break}o.baseURI=a.join("/")+"/"+r.join("/"),"/"!=o.baseURI.charAt(0)&&(o.baseURI="/"+o.baseURI)}}else if(location.pathname.indexOf("\\")>-1){if((r=o.baseURI.split("\\")).length>0&&(".."==r[0]||"."==r[0])){(a=location.pathname.split("\\")).pop();for(e=0;e<r.length;e++)if(".."==r[e])a.pop();else if("."!=r[e]){r=r.slice(e);break}o.baseURI=a.join("\\")+"\\"+r.join("\\")}}}else if(location.pathname.indexOf("/")>-1){if((r=o.baseURI.split("/")).length>0&&(".."==r[0]||"."==r[0])){(a=location.pathname.split("/")).pop();for(e=0;e<r.length;e++)if(".."==r[e])a.pop();else if("."!=r[e]){r=r.slice(e);break}o.baseURI="file://"+a.join("/")+"/"+r.join("/")}}else if(location.pathname.indexOf("\\")>-1){var r;if((r=o.baseURI.split("\\")).length>0&&(".."==r[0]||"."==r[0])){var a;(a=location.pathname.split("\\")).pop();for(e=0;e<r.length;e++)if(".."==r[e])a.pop();else if("."!=r[e]){r=r.slice(e);break}o.baseURI=a.join("\\")+"\\"+r.join("\\")}}window.WebSquareExternal.baseServletURI?o.baseServletURI=window.WebSquareExternal.baseServletURI:1==o.hybridApp?o.baseServletURI="":o.baseServletURI=o.baseURI}o._resourceURI=o.baseURI+"_websquare_/"}catch(t){}}(),o.loadErrorHandler=function(t){var e=t.code,i=t.msg;switch(e){case"E_initializer_XMLLoadFailError":case"E_initializer_XMLLoadFailError1":var s=o.core.getConfiguration("/WebSquare/loadErrorHandler/@value");if(null!=s&&""!=s){s=s.replace("()","");var r=o.util.getGlobalFunction(s);"function"==typeof r?r(t):alert(i)}else alert(i)}},o.clearMemory=function(){try{var t;try{for(var e=[self],i=[],s=0;s<1e4&&!(e.length<=0);s++)for(var r=e.length,a=0;a<r;a++)try{var n=e.shift();s>0&&i.push(n);for(var l=0;l<n.window.length;l++)try{void 0!==n.frames[l].WebSquare&&!0!==n.frames[l]._wg.remove&&e.push(n.frames[l])}catch(t){}}catch(t){o.logger.printLog("WebSquare frameClick fail [ "+t.message+" ]")}for(var h=0;h<1e4&&!(i.length<=0);h++)try{(n=i.pop()).WebSquare&&!0!==n._wg.remove&&n._wg.clearMemory()}catch(t){o.logger.printLog("WebSquare frameClick fail [ "+t.message+" ]")}for(a=0;a<e.length;a++)e[a]=null;for(a=0;a<i.length;a++)i[a]=null;e=null,i=null}catch(t){}if(WebSquare&&o.core){o.core.firePageunload||o.core.onurlchange||!o.body||(o.core.firePageunload=!0,
o.event.fireEvent(o.getBody(),"onpageunload"));var d=o.core.getConfiguration("/WebSquare/clearMemory/@userAfterFunction");o.core.clearCommon()}try{"onhashchange"in window?window.onhashchange=null:(clearInterval(o.util._hashTestKey),o.util._hiddenFrame&&(o.removeNode(o.util._hiddenFrame),o.util._hiddenFrame=null))}catch(t){o.logger.printLog("error : clear historyFrame exception"),o.exception.printStackTrace(t,null,this)}for(var a in WebSquare&&o.body&&o.getBody().remove(),WebSquare&&o.strictModeFrame&&(o.strictModeFrame.remove(),o.strictModeFrame=null),WebSquare)WebSquare[a]=null,delete WebSquare[a];void 0!==window.imports&&(window.imports=null),void 0!==window.requires&&(window.requires=null),void 0!==$W._a&&($W._a=null),void 0!==_$W._a&&(_$W._a=null),void 0!==window.$W&&(window.$W=null),void 0!==window._$W&&(window._$W=null),WebSquare=null,window._$W=window.$W=window.WebSquare={logger:{printLog:function(){}},exception:{printStackTrace:function(){}},timerHash:{},remove:!0};try{d&&(t=window[d]())}catch(t){}return t}catch(t){}},o.extend=function(t,e){for(var i in e)t[i]=e[i];return t},o.extendKeepingType=function(t,e){for(var i in e){var o=e[i];switch(typeof t[i]){case"string":if(""==o)continue;"$blank"==o&&(o="");break;case"number":o=o&&o.toString().indexOf(".")>-1?parseFloat(o):parseInt(o,10);break;case"boolean":o=WebSquare.util.getBoolean(o)}t[i]=o}return t},o.setBody=function(t){o.body=t},o.getBody=function(){return o.body},o._discardElement=function(t){var e=document.getElementById("IELeakGarbageBin");e||((e=document.createElement("DIV")).id="IELeakGarbageBin",e.style.display="none",document.documentElement.appendChild(e)),e.appendChild(t),e.innerHTML=""},o.removeChildren=function(t){if(null==t||!t.childNodes)return-1;for(var e=t.childNodes.length;t.hasChildNodes();)o.removeNode(t.firstChild);return e},o.removeNode=function(t){return o.util.isIE()&&parseInt(o.core.browserVersion(),10)<8?(o._discardElement(t),t):t&&t.parentNode?t.parentNode.removeChild(t):void 0},o.initialize=async function(t,e){if(!t){var i=o.util.getUrlHashText();if(!i)return"onhashchange"in window&&null==window.onhashchange&&(window.onhashchange=o.util.onhashchange),!0;t=i}if(o.core._initDataObject(),await o.date._initServerDiff(),o.allValue=o.core.getConfiguration("/WebSquare/allValue/@value")||"all",o.dataPrefix="true"==o.core.getConfiguration("/WebSquare/dataPrefix/@value"),o.tabOrder={},o.initStyle={},o.strictMode&&null==o.strictModeFrame){var s=o.util.getBoolean(o.core.getConfiguration("/WebSquare/initScript/@value"))&&o.w2xPath!==o.net.getBlankXML(),r=o.util.getBoolean(o.core.getConfiguration("/WebSquare/postScript/@value"))&&o.w2xPath!==o.net.getBlankXML(),a="",n="",l=o.core.getConfiguration("/WebSquare/strictMode/@id");s&&(a=o.core.getConfigurationJSON("/WebSquare/initScript",{type:"json"}))["#cdata"]&&"function"==typeof(a=a["#cdata"])&&(a="("+a.toString()+")()",a=o.util.scopingFuncBody(a,l,!0)),r&&(n=o.core.getConfigurationJSON("/WebSquare/postScript",{type:"json"}))["#cdata"]&&"function"==typeof(n=n["#cdata"])&&(n="("+n.toString()+")()",n=o.util.scopingFuncBody(n,l,!0));var h=o.UUIDPrefix,d=o.UUID;o.UUIDPrefix="wq_strict";var c="",u="";if(t.indexOf("://")>=0)for(var p in o.core._msaServerHash){var g=o.core._msaServerHash[p].baseURI;if(t.startsWith(g)){c=p,u=t;break}}o.strictModeFrame=o.controlFactory.create(l,{pluginName:"wframe",scope:!0,scopeExternal:!0,strictFrame:!0,initScript:a,postScript:n,msaName:c,src:u},null,null,null,!0),o.UUIDPrefix=h,o.UUID=d}var m,f="";if(null==o.WebSquaredoc)try{if(o.pageXMLString)m=o.pageXMLString,o.pageXMLString=null;else{var b=o.core.getPageURL(t,{skipURL:!0,skipUri:!0});if(!b)return!0;m=await o.jsLoader._loadObj(b)}if(null!=m&&"loadError"!==m)return await o.jsLoader.start(m,{spa:e}),!0;"false"!=(f=o.core.getConfiguration("/WebSquare/pageFaultMsg/@value"))&&o.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:o.language.getMessage("E_initializer_XMLLoadFailError",o.jsLoader.getUri(t))})}catch(e){
"false"!=f&&o.loadErrorHandler({code:"E_initializer_XMLLoadFailError1",msg:o.language.getMessage("E_initializer_XMLLoadFailError1",t)}),o.exception.printStackTrace(e)}return!1},o.initializeByJSON=async function(t){return await o.jsLoader.start(t,{type:"js"})},o.startPopupApplication=async function(t){return o.startApplication(t)},o.startPopupApplication1=async function(t){return o.startApplication1(t)},o.startPopupApplication2=async function(t){return o.startApplication2(t)},o.startApplication=async function(t,e){o.nowRendering=!0,await o.BootLoader._initImport(),"true"==o.core.getConfiguration("/WebSquare/localStorage/@defer")&&o.createLocalStorage();var i=o.core.getConfiguration("/WebSquare/preProcessor/systemPreProcessor/@value"),s=o.util.getGlobalFunction(i);if("function"==typeof s&&0==s())return;o.setLanguagePack(),o.startApplication1(t,e)},o.initializeComponent=function(t,e){if(null==o.WebSquaredoc){o.nowRendering=!0,"true"==o.core.getConfiguration("/WebSquare/localStorage/@defer")&&o.createLocalStorage(window);var i=o.core.getConfiguration("/WebSquare/preProcessor/systemPreProcessor/@value"),s=o.util.getGlobalFunction(i);if("function"==typeof s)if(0==s())return;o.setLanguagePack(),t?(o.targetInfo=e,o.w2xPath=t):""!=o.net.getParameter("w2xPath")&&(o.w2xPath=o.net.getParameter("w2xPath"));o.w2xPath=o.w2xPath.replace(/[\\]/g,"/");var r=o.w2xPath.lastIndexOf("/"),a="",n="";"object"==typeof WebSquareExternal&&null!=WebSquareExternal&&(a=WebSquareExternal.w2xHome||"",n=WebSquareExternal.w2xDocumentRoot||""),""==a&&""==o.net.getParameter("w2xHome")?o.w2xHome=r>-1?o.w2xPath.substring(0,r+1):"/":o.w2xHome=a||o.net.getParameter("w2xHome"),o.logFileName=r>-1?" "+o.w2xPath.substring(r+1):" "+o.w2xPath;var l=o.core.getConfiguration("/WebSquare/DocumentRoot"),h=n||o.net.getParameter("w2xDocumentRoot");o.w2xDocumentRoot="/"==h||"\\"==h?"":""!=h?h:null!=l&&""!=l?l:"",o.logger.printLog("w2xDocumentRoot["+o.w2xDocumentRoot+"]"),o.logger.printLog("w2xHome        ["+o.w2xHome+"]"),o.logger.printLog("w2xPath        ["+o.w2xPath+"]"),o.logger.printLog("w2xTheme       ["+o.w2xTheme+"]"),o.initialize(o.w2xPath)}else o.initializeComponent_wframe(t,e)},o.initializeComponent_wframe=async function(t,e){try{requires("uiplugin.wframe");var i=new o.uiplugin.wframe(o.UUIDPrefix+"_"+o.UUID++,{src:t});await i.makeFrame(),i.createFlag=!0;var s=i.frameDoc.scriptSection;if(i.wframeScript.length>0)for(var r=0;r<i.wframeScript.length;r++)s+=i.wframeScript[r];o.BootLoader.globalEval(s),i.frameDoc.scriptSection="",i.setAction();for(r=0;r<e.length;r++){var a=e[r],n=o.idToUUID[a.component];if(n&&null!=o.idCache[n]){var l=a.target;"string"==typeof l&&(l=document.getElementById(l));var h=o.idCache[n];l.innerHTML=h.toHTML(),h.activate(),h.onComplete()}}}catch(t){o.exception.printStackTrace(t,null)}},o.startApplication1=async function(t,e){var i="";if(t)o.w2xPath=t;else if(""!=(i=o.net.getParameter("w2xPath")))o.w2xPath=i;else if(""!=(i=o.net.getParameter("wq_spaParam")))try{var s=parent._wg.idCache[i].render.getAttribute("src").slice(0),r=s.lastIndexOf("w2xPath");if(r>=0){var a=s.slice(r),n=(a=a.split(/[\&\?\#]/)[0]).split("=");2==n.length&&(o.w2xPath=n[1].wq_trim())}else o.w2xPath=o.core.getConfiguration("/WebSquare/welcome-file")}catch(t){o.w2xPath=o.core.getConfiguration("/WebSquare/welcome-file")}else o._styleSheetEarlyImportListLoaded=!0,o.w2xPath=o.core.getConfiguration("/WebSquare/welcome-file");o.w2xPath=o.w2xPath.replace(/[\\]/g,"/");var l=o.w2xPath.lastIndexOf("/"),h="",d="";"object"==typeof WebSquareExternal&&null!=WebSquareExternal&&(h=WebSquareExternal.w2xHome||"",d=WebSquareExternal.w2xDocumentRoot||""),""==h&&""==o.net.getParameter("w2xHome")?o.w2xHome=l>-1?o.w2xPath.substring(0,l+1):"/":o.w2xHome=h||o.net.getParameter("w2xHome"),o.logFileName=l>-1?" "+o.w2xPath.substring(l+1):" "+o.w2xPath;var c=o.core.getConfiguration("/WebSquare/DocumentRoot"),u=d||o.net.getParameter("w2xDocumentRoot")
;if(o.w2xDocumentRoot="/"==u||"\\"==u?"":""!=u?u:null!=c&&""!=c?c:"",o.logger.printLog("w2xDocumentRoot["+o.w2xDocumentRoot+"]"),o.logger.printLog("w2xHome        ["+o.w2xHome+"]"),o.logger.printLog("w2xPath        ["+o.w2xPath+"]"),o.logger.printLog("w2xTheme       ["+o.w2xTheme+"]"),o.w2xPath==o.net.getBlankXML())return"onhashchange"in window||(o.util._hiddenFrame?null==document.getElementById(o.util._hiddenFrame.id)&&document.body.appendChild(o.util._hiddenFrame):o.util._makeFrame(),o.util._iframe_wait=!0,o.util._hiddenFrame.contentWindow.location.search=o.w2xPath),void("onhashchange"in window?window.onhashchange=o.util.onhashchange:o.util._wait_for_iframe_reload());!0!==e&&(!0===o._bDocumentReady?o.initialize(o.w2xPath):o._bEngineReadyBeforeOnload=!0)},o.startOnLoad=function(t){o.jsLoader._startCallback2(t)},o.startApplication2=async function(t){try{o.startApplication1(t)}catch(t){o.exception.printStackTrace(t)}},o.setLanguagePack=function(){if(!o.useUserSystemLang)if(o.useLanguagePack=o.core.getConfiguration("/WebSquare/languagePack/@useLanguagePack"),"true"==o.useLanguagePack){var t=o.BootLoader.getBrowserLanguage();o.loagLanguagePack(t),o.systemLanguage=t}else o.WebSquareLang={}},o.loagLanguagePack=function(t){t=o.cookie.getCookie("system_language")||t||"ko";var e=o.core.getConfiguration("/WebSquare/languagePack/url[@lang='"+t+"']/@value");imports(e)},o.addMark=function(t){if(!window._fCoverage)try{parent!=window&&parent._fCoverage?window._fCoverage=parent._fCoverage:void 0!==window.opener&&null!=window.opener&&!window.opener.closed&&window.opener._fCoverage?window._fCoverage=opener._fCoverage:window._fCoverage={}}catch(t){window._fCoverage={}}void 0!==_fCoverage[t]?_fCoverage[t]++:_fCoverage[t]=1},o.ax_logger=function(t){},o._loadCSS=async function(t){var e={};"object"==typeof WebSquareExternal&&null!=WebSquareExternal&&(e=WebSquareExternal);var i=o.document.getElementsByTagName("head")[0],s=t&&t.isSPA,r="",a="";if(o.styleSheetEarlyImport>0){if(2==o.styleSheetEarlyImport){var n=document.createElement("link"),l="";l=1==o.WebSquareEngineCache?o.BootLoader.getEngineCachePostfix(o.styleSheetEarlyImportName):o.BootLoader.getRandomPostfix(o.styleSheetEarlyImportName);var h=o.BootLoader.inquiresPath("skin/");n.href=o.baseThemeURI+h+l,n.type="text/css",n.rel="stylesheet",i.appendChild(n),o.logger.printLog("import core css : "+n.href)}var d=o.net.getParameter("adaptive")||"",c=t&&t.w2xPath||e.w2xPath||o.net.getParameter("w2xPath")||o.w2xPath||o.core.getConfiguration("/WebSquare/welcome-file");if(""==c)return;var u=/[\\]/g;c=c.replace(u,"/");var p="",g=o.core.getPageURL(c,{skipURL:!0,skipUri:!0});if(1==o.hybridApp&&g.indexOf("://")<0&&g.startsWith("/")&&(g=o.util.appendingPathComponent(o.w2xDocumentRoot,g)),!0!==o._async)p=await o.jsLoader.load(g,{useXML:!0,skipError:!0});var m=[];if(p&&"xml"===o.jsLoader.getPageTypeByString(p)){var f=p.indexOf("<html");f<0&&(f=p.indexOf("<HTML"))<0&&(f=p.indexOf("< html"))<0&&(f=p.indexOf("< HTML"));var b="";b=f>=0?p.slice(0,f):p;for(var y=-1;(y=b.indexOf("\x3c!--"))>=0;){var v=b.indexOf("--\x3e");b=v>=0?b.substring(0,y)+b.slice(v+3):b.substring(0,y)}if(!(a=e.w2xHome||o.net.getParameter("w2xHome"))){u=/[\\]/g;var w=(a=(a=e.w2xPath||o.net.getParameter("w2xPath")).replace(u,"/")).lastIndexOf("/");a=w>-1?a.substring(0,w+1):"/"}var S=o.core.getConfiguration("/WebSquare/DocumentRoot"),C=e.w2xDocumentRoot||o.net.getParameter("w2xDocumentRoot");r="/"==C||"\\"==C?"":""!=C?C:null!=S&&""!=S?S:"";for(var _=b.split(/xml-stylesheet/i),x=new RegExp("^\\s\\s*"),I=new RegExp("\\s\\s*$"),T=1;T<_.length;T++){var k=_[T].split('"');k.pop();for(var D={},L=0;L<k.length;L+=2)D[k[L].replace(x,"").replace("=","").replace(I,"")]=k[L+1];null==D.type&&(D.type="text/css"),null==D.rel&&(D.rel="stylesheet"),null!=D.href&&("/"!=D.href.substring(0,1)&&"\\"!=D.href.substring(0,1)&&(D.href=a+D.href),""!=r&&".."!=D.href.substring(0,2)&&(D.href=r+D.href));var W=!1,A=o.util.getAbsolutePath(D.href)
;for(L=0;L<o.styleSheetEarlyImportList.length;L++)if(A==o.util.getAbsolutePath(o.styleSheetEarlyImportList[L])){W=!0;break}for(;o.externalCSSRemainder.length>0;){var M=o.externalCSSRemainder.shift();if(A===o.util._getAbsolutePath(M.href.toString())){W=!0,m.push(A),o.externalCSSDOM.push(M);break}M.parentNode.removeChild(M)}W||(""!=d&&D.adaptive?d==D.adaptive&&o.externalCSSList.push(D):D.adaptive?o.util.isMobile()&&"mobile"==D.adaptive?o.externalCSSList.push(D):o.util.isMobile()||"pc"!=D.adaptive||o.externalCSSList.push(D):o.externalCSSList.push(D))}for(;o.externalCSSRemainder.length>0;){(M=o.externalCSSRemainder.shift()).parentNode.removeChild(M)}}!0!==o._async&&(o.pageXMLString=p||"loadError",p="")}if(s&&o.externalCSSList.length>0||(!s||s&&!1===o._styleSheetEarlyImportListLoaded)&&o.externalCSSList.length+o.styleSheetEarlyImportList.length>0)try{if(!s||s&&!1===o._styleSheetEarlyImportListLoaded){o._styleSheetEarlyImportListLoaded=!0;for(T=0;T<o.styleSheetEarlyImportList.length;T++){var E=o.styleSheetEarlyImportList[T];"/"!=E.substring(0,1)&&"\\"!=E.substring(0,1)&&(E=a+E),""!=r&&".."!=E.substring(0,2)&&(E=r+E);var q=o.BootLoader.getResourcePostfix(E),R=o.util.getAbsolutePath(E);o.styleSheetEarlyImportList[T]=R,(n=document.createElement("link")).href=q,n.type="text/css",n.rel="stylesheet",i.appendChild(n),o.externalCSSURL.push(R),o.logger.printLog("import user css(early_common) : "+E)}}for(T=0;T<o.externalCSSList.length;T++){n=document.createElement("link");var N=o.externalCSSList[T];if(N&&("string"==typeof N||"object"==typeof N)){if("string"==typeof N)N={href:N};"/"!=N.href.substring(0,1)&&"\\"!=N.href.substring(0,1)&&(N.href=a+N.href),""!=r&&".."!=N.href.substring(0,2)&&(N.href=r+N.href);q=o.BootLoader.getResourcePostfix(N.href);n.href=q,n.type=N.type||"text/css",n.rel=N.rel||"stylesheet",i.appendChild(n),o.externalCSSURL.push(o.util._getAbsolutePath(n.href.toString())),o.externalCSSDOM.push(n),o.logger.printLog("import user css(early_xml) : "+N.href)}}}catch(t){}i=null,o.skin.skinTag=o.externalCSSURL.slice(0).concat(m)},o.createLocalStorage=function(){try{null==WebSquare.localStorage&&(WebSquare.localStorage=function(){var t="websquare_localStorage_keyList",e=";";try{if("localStorage"in window&&"unknown"!=typeof window.localStorage&&null!==window.localStorage){var i=window.localStorage;return(l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l}if(o.core.browserCheck.ie&&o.core.browserVersion()<"9"){var s="websquare_localStorage",r="",a={},n=function(){null==document.getElementById(a.id)&&((a=document.createElement("div")).id=s+"_div",a.style.display="none",a.style.position="absolute",a.style.top="-999999px",a.style.behavior='url("#default#userData")',document.body.appendChild(a),a.load(s),r=a.getAttribute(t)||"",l.length=r.split(e).length-1)};return(l={}).length=0,l.key=function(t){n();t=Number(t);return isNaN(t)||t>=this.length||t<0?null:r.split(e)[t]},l.getItem=function(t){return n(),a.getAttribute(t)},l.setItem=function(i,o){n();var l=i.charAt(0);if(!/[a-zA-Z]/.exec(l))return $l("The key name must start with [a-zA-Z]"),null;if(i===t)return $l(t+": This key is reserved.[localStorage]"),null;if(i.search(e)>=0)return $l(";: The key name must not contain colon(;).[localStorage]"),null;a.setAttribute(i,o),r.search(i)<0&&(r+=i+e,this.length++),a.setAttribute(t,r);try{a.save(s)}catch(t){$l(t.name+" : localstorage overflowed[localStorage]")}
},l.removeItem=function(i){n(),a.removeAttribute(i);var o=r;r=o.replace(i+e,""),o!==r&&this.length--,a.setAttribute(t,r),a.save(s)},l.clear=function(){n();for(var i=r.split(e),o=0;o<i.length-1;o++)a.removeAttribute(i[o]);a.removeAttribute(t),r="",this.length=0,a.save(s)},l.getAllItem=function(){n();for(var t={},i=r.split(e),o=0;o<i.length-1;o++){var s=i[o];t[s]=a.getAttribute(s)}return t},l}return $l("localStorage 생성 도중 오류가 발생하여, sessionStorage로 대체합니다."),null===(i=window.sessionStorage)?void $l("_wg.localStorage를 생성할 수 없습니다."):((l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l)}catch(o){var l;return $l("localStorage 생성 도중 오류가 발생하여, sessionStorage로 대체합니다."),null===(i=window.sessionStorage)?void $l("_wg.localStorage를 생성할 수 없습니다."):((l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l)}}()),o.api&&(o.api.local=WebSquare.localStorage)}catch(t){o.exception.printStackTrace(t)}},o._jQuerySupport=async function(){try{if(!window.jQuery){var t=o.core.getConfiguration("/WebSquare/jquerySupport/@src");""!=t?(await o.BootLoader.importAsync(t),window.jQuery||(await inquires("externalJS/jquery/jquery-1.10.2.min.js"),$l("ERROR :  config.xml의 jquerySupport 태그 version 경로를 확인해주세요. 현재 사용하고 있는 버전은 default 버전 "+$.fn.jquery+" 입니다."))):await inquires("externalJS/jquery/jquery-1.10.2.min.js")}window.jQuery&&function(t){t.expr[":"].wq=function(e,i,s){var r=null;return!(!(r="idToUUID"in WebSquare?o.idCache[o.idToUUID[t(e).attr("id")]]:o.componentIdCache[t(e).attr("id")])||r.render!=e)&&(""===s[3]||null==s[3]||"*"==s[3]||r.options.pluginName==s[3].trim())};var e=function(t){return new e.fn.init(t)},i=function(t,i){var o=this;if(this.length>0&&!this[0].getPluginName&&(o=e(this)),t)for(var s=0;s<o.length;s++){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);o[s][t].apply(o[s],r)}return o};function s(e,i){var o,s,a,n=e.nodeName.toLowerCase();return"area"===n?(s=(o=e.parentNode).name,!(!e.href||!s||"map"!==o.nodeName.toLowerCase())&&(!!(a=t("img[usemap='#"+s+"']")[0])&&r(a))):(/^(input|select|textarea|button|object)$/.test(n)?!e.disabled:"a"===n&&e.href||i)&&r(e)}function r(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter((function(){return"hidden"===t.css(this,"visibility")})).length}e.fn=e.prototype={constructor:e,init:function(e){if(!e[0].getPluginName)for(var i=0;i<e.length;i++){var s=null;(s="idToUUID"in WebSquare?o.idCache[o.idToUUID[t(e[i]).attr("id")]]:o.componentIdCache[t(e[i]).attr("id")])&&s.render==e[i]&&this.push(s)}},selector:"",length:0,size:t.fn.size,toArray:t.fn.toArray,pushStack:t.fn.pushStack,push:[].push,sort:[].sort,splice:[].splice,wq:i,jq:function(e,i){if(this[0].getPluginName){for(var o=[],s=0;s<this.length;s++)o.push(this[s].render);this.splice(0,this.length);for(s=0;s<o.length;s++)this.push(o[s])}if(e){
for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);return t(this)[e].apply(t(this),r)}return t(this)},get:function(t,e){for(var i=[],o=1;o<arguments.length;o++)i.push(arguments[o]);return this[0][t].apply(this[0],i)},each:function(t){if("function"==typeof t)for(var e=0;e<this.length;e++)t.call(this[e],e,this[e])},map:function(t,e){if("function"==typeof e){var i=[];if("[object Array]"===Object.prototype.toString.call(t))for(var o=0;o<t.length;o++)i.push(e.call(t,t[o],o));else for(var o in t)i.push(e.call(t,t[o],o));return i}},animate:function(t){return this.jq("animate",t).wq()}},e.fn.init.prototype=e.fn,jQuery.fn.extend({wq:i}),jQuery.fn.extend(t.expr[":"],{focusable:function(e){return s(e,!isNaN(t.attr(e,"tabindex")))},showable:function(t){return r(t)},tabbable:function(e){var i=t.attr(e,"tabindex"),o=isNaN(i);return t(e).hasClass("w2grid")||t(e).hasClass("w2checkbox")||t(e).hasClass("w2anchor")||t(e).hasClass("w2anchor2")||t(e).hasClass("w2radio")||t(e).hasClass("w2radio_input")||t(e).hasClass("w2inputCalendar")||t(e).hasClass("w2inputCalendar_div")||t(e).hasClass("w2searchbox")||t(e).hasClass("w2textarea")||(o||i>=0)&&s(e,!o)}})}(jQuery)}catch(t){o.exception.printStackTrace(t)}},o._XMLSupport=function(){try{o.core.supportDOM&&(o.core.browserCheck.opera||o.document.implementation.hasFeature("XPath","3.0")&&(XMLDocument.prototype.selectNodes=function(t,e){if(t){void 0===e&&(e=this);for(var i=this.createNSResolver(this.documentElement),o=this.evaluate(t,e,i,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),s=[],r=0;r<o.snapshotLength;r++)s[r]=o.snapshotItem(r);return s}},XMLDocument.prototype.selectSingleNode=function(t,e){if(t){void 0===e&&(e=this);var i=this.selectNodes(t,e);return i.length>0?i[0]:null}},Document.prototype.selectNodes=XMLDocument.prototype.selectNodes,Document.prototype.selectSingleNode=XMLDocument.prototype.selectSingleNode,Element.prototype.selectNodes=function(t){if(t){for(var e=this.ownerDocument,i=e.createNSResolver(e.documentElement),o=e.evaluate(t,this,i,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),s=[],r=0;r<o.snapshotLength;r++)s[r]=o.snapshotItem(r);return s}},Element.prototype.selectSingleNode=function(t){if(t){var e=this.selectNodes(t);return e.length>0?e[0]:null}}))}catch(t){o.exception.printStackTrace(t)}},o._initImportFunction=function(){try{window._$W=WebSquare,window.$W=WebSquare,_$W._a=_$W.uiplugin,$W._a=_$W._a,window.WebSquareLang={},window.requires=o.BootLoader.requireAsync,window.imports=o.BootLoader.importAsync,window.inquires=o.BootLoader.inquires,window.$integrity=o.BootLoader.$integrity}catch(t){o.exception.printStackTrace(t)}},o._initWebsquareModule=function(){try{for(var t=0;t<o._initImportList.length;t++){for(var e=o._initImportList[t].split("."),i=o,s=0;s<e.length-1;s++)i=o[e[s]];i[e[e.length-1]]._initImport()}o._initImportList=[]}catch(t){o.exception.printStackTrace(t)}},o._initModule=async function(){o._bInitModule=!0,o._XMLSupport(),await o._jQuerySupport(),await inquires("externalJS/papaparse.js"),window[o.noConflict]=o.api,window[o.noConflict].comp={},window.$l=o.logger.printLog,o._initWebsquareModule()},o._dynamicImport=async function(t,e){try{try{var i=new Function("u","return import(u)");if(i)return await i(t)}catch(i){var s;s=e&&e.altModulePath?e.altModulePath:t;var r=await o.BootLoader.loadAsync(s),a="export default ",n=r.slice(r.indexOf(a)+a.length);return new Function("return { default : "+n+"}")()}}catch(t){o.exception.printStackTrace(t)}},o._dynamicImportAMD=async function(t,e){try{return!0===e?o._dynamicImportFunc(t):(await inquires("externalJS/requirejs/require.js"),new Promise((function(e,i){window.requirejs([t],(function(t){e(t)}),(function(t){o.logger.printLog(t.message),e()}))})).catch((function(e){return o._dynamicImportFunc(t)})))}catch(t){o.exception.printStackTrace(t)}},o._dynamicImportFunc=async function(t){try{return o.BootLoader.loadAsync(t).then((function(t,e){var i=t,o="define(",s=i.slice(i.indexOf(o)+o.length).slice(0,-1)
;return new Function("return "+s)()}))}catch(t){o.exception.printStackTrace(t)}},o._loadModuleDynamic=function(t){var e;switch(t){case"uiplugin.balloonTip":e=Promise.resolve().then(i.bind(i,5175)).then((function(t,e){WebSquare.uiplugin.balloonTip=t.balloonTip}));break;case"uiplugin.group":e=Promise.resolve().then(i.bind(i,477)).then((function(t,e){WebSquare.uiplugin.group=t.group}));break;case"uiplugin.wframe":e=Promise.resolve().then(i.bind(i,453)).then((function(t,e){WebSquare.uiplugin.wframe=t.wframe}));break;case"uiplugin.textbox":e=Promise.resolve().then(i.bind(i,8072)).then((function(t,e){WebSquare.uiplugin.textbox=t.textbox}));break;case"uiplugin.anchor":e=Promise.resolve().then(i.bind(i,2819)).then((function(t,e){WebSquare.uiplugin.anchor=t.anchor}));break;case"uiplugin.selectbox":e=Promise.resolve().then(i.bind(i,1316)).then((function(t,e){WebSquare.uiplugin.selectbox=t.selectbox,WebSquare.uiplugin.selectbox_native=t.selectbox_native}));break;case"uiplugin.input":e=Promise.resolve().then(i.bind(i,8067)).then((function(t,e){WebSquare.uiplugin.input=t.input}));break;case"uiplugin.span":e=Promise.resolve().then(i.bind(i,7534)).then((function(t,e){WebSquare.uiplugin.span=t.span}));break;case"uiplugin.calendar":e=Promise.resolve().then(i.bind(i,1072)).then((function(t,e){WebSquare.uiplugin.calendar=t.calendar}));break;case"uiplugin.inputCalendar":e=Promise.resolve().then(i.bind(i,7121)).then((function(t,e){WebSquare.uiplugin.inputCalendar=t.inputCalendar}));break;case"uiplugin.textarea":e=Promise.resolve().then(i.bind(i,4246)).then((function(t,e){WebSquare.uiplugin.textarea=t.textarea}));break;case"uiplugin.checkcombobox":e=Promise.resolve().then(i.bind(i,4810)).then((function(t,e){WebSquare.uiplugin.checkcombobox=t.checkcombobox}));break;case"uiplugin.autoComplete":e=Promise.resolve().then(i.bind(i,3435)).then((function(t,e){WebSquare.uiplugin.autoComplete=t.autoComplete}));break;case"uiplugin.list":e=Promise.resolve().then(i.bind(i,7967)).then((function(t,e){WebSquare.uiplugin.list=t.list}));break;case"uiplugin.floatingLayer":e=Promise.resolve().then(i.bind(i,5763)).then((function(t,e){WebSquare.uiplugin.floatingLayer=t.floatingLayer}));break;case"uiplugin.radio":e=Promise.resolve().then(i.bind(i,5459)).then((function(t,e){WebSquare.uiplugin.radio=t.radio}));break;case"uiplugin.spinner":e=Promise.resolve().then(i.bind(i,1192)).then((function(t,e){WebSquare.uiplugin.spinner=t.spinner}));break;case"uiplugin.gridView":e=Promise.resolve().then(i.bind(i,4047)).then((function(t,e){WebSquare.uiplugin.gridView=t.gridView,WebSquare.uiplugin.drilldown=t.drilldown,WebSquare.uiplugin.mappingController=t.mappingController,WebSquare.uiplugin.linkedMappingController=t.linkedMappingController,WebSquare.uiplugin.cellInfo=t.cellInfo,WebSquare.uiplugin.headerInfo=t.headerInfo}));break;case"uiplugin.trigger":e=Promise.resolve().then(i.bind(i,309)).then((function(t,e){WebSquare.uiplugin.trigger=t.trigger}));break;case"uiplugin.image":e=Promise.resolve().then(i.bind(i,1553)).then((function(t,e){WebSquare.uiplugin.image=t.image}));break;case"uiplugin.pageList":e=Promise.resolve().then(i.bind(i,9248)).then((function(t,e){WebSquare.uiplugin.pageList=t.pageList}));break;case"uiplugin.tabControl":e=Promise.resolve().then(i.bind(i,325)).then((function(t,e){WebSquare.uiplugin.tabControl=t.tabControl,WebSquare.uiplugin.content=t.content}));break;case"uiplugin.generator":e=Promise.resolve().then(i.bind(i,2592)).then((function(t,e){WebSquare.uiplugin.generator=t.generator}));break;case"uiplugin.upload":e=Promise.resolve().then(i.bind(i,7003)).then((function(t,e){WebSquare.uiplugin.upload=t.upload}));break;case"uiplugin.treeview":e=Promise.resolve().then(i.bind(i,1213)).then((function(t,e){WebSquare.uiplugin.treeview=t.treeview}));break;case"uiplugin.treeview_virtual":e=Promise.resolve().then(i.bind(i,4672)).then((function(t,e){WebSquare.uiplugin.treeview_virtual=t.treeview_virtual}));break;case"uiplugin.checkbox":
e=Promise.resolve().then(i.bind(i,3730)).then((function(t,e){WebSquare.uiplugin.checkbox=t.checkbox}));break;case"uiplugin.output":e=Promise.resolve().then(i.bind(i,3708)).then((function(t,e){WebSquare.uiplugin.output=t.output}));break;case"uiplugin.window":e=Promise.resolve().then(i.bind(i,6210)).then((function(t,e){WebSquare.uiplugin.window=t.wq_window}));break;case"uiplugin.windowContainer":e=Promise.resolve().then(i.bind(i,9271)).then((function(t,e){WebSquare.uiplugin.windowContainer=t.windowContainer}));break;case"uiplugin.accordion":e=Promise.resolve().then(i.bind(i,7719)).then((function(t,e){WebSquare.uiplugin.accordion=t.accordion,WebSquare.uiplugin.panels=t.panels}));break;case"uiplugin.widgetContainer":e=Promise.resolve().then(i.bind(i,3043)).then((function(t,e){WebSquare.uiplugin.widgetContainer=t.widgetContainer,WebSquare.uiplugin.widget=t.widget}));break;case"uiplugin.panelContainer":e=Promise.resolve().then(i.bind(i,5939)).then((function(t,e){WebSquare.uiplugin.panelContainer=t.panelContainer,WebSquare.uiplugin.panel=t.panel}));break;case"uiplugin.mapchart":e=i.e(789).then(i.bind(i,6789)).then((function(t,e){WebSquare.uiplugin.mapchart=t.mapchart}));break;case"uiplugin.gridLayout":e=Promise.resolve().then(i.bind(i,8137)).then((function(t,e){WebSquare.uiplugin.gridLayout=t.gridLayout}));break;case"uiplugin.mapchart":e=i.e(789).then(i.bind(i,6789)).then((function(t,e){WebSquare.uiplugin.mapchart=t.mapchart}));break;case"uiplugin.pivot":e=i.e(505).then(i.bind(i,2505)).then((function(t,e){WebSquare.uiplugin.pivot=t.pivot}));break;case"uiplugin.pivotTable":e=i.e(983).then(i.bind(i,4983)).then((function(t,e){WebSquare.uiplugin.pivotTable=t.pivotTable}));break;case"uiplugin.editor":e=i.e(262).then(i.bind(i,4262)).then((function(t,e){WebSquare.uiplugin.editor=t.editor}));break;case"uiplugin.multiupload":e=i.e(959).then(i.bind(i,6959)).then((function(t,e){WebSquare.uiplugin.multiupload=t.multiupload}));break;case"uiplugin.fusionchart":e=i.e(43).then(i.bind(i,2043)).then((function(t,e){WebSquare.uiplugin.fusionchart=t.fusionchart}));break;case"uiplugin.fwFunnelChart":e=i.e(187).then(i.bind(i,6187)).then((function(t,e){WebSquare.uiplugin.fwFunnelChart=t.fwFunnelChart}));break;case"uiplugin.fwPyramidChart":e=i.e(563).then(i.bind(i,7563)).then((function(t,e){WebSquare.uiplugin.fwPyramidChart=t.fwPyramidChart}));break;case"uiplugin.fwSparkChart":e=i.e(931).then(i.bind(i,5931)).then((function(t,e){WebSquare.uiplugin.fwSparkChart=t.fwSparkChart}));break;case"uiplugin.fwGaugeChart":e=i.e(190).then(i.bind(i,2190)).then((function(t,e){WebSquare.uiplugin.fwGaugeChart=t.fwGaugeChart}));break;case"uiplugin.fwGanttChart":e=i.e(367).then(i.bind(i,367)).then((function(t,e){WebSquare.uiplugin.fwGanttChart=t.fwGanttChart}));break;case"uiplugin.fwRealtimeChart":e=i.e(336).then(i.bind(i,5336)).then((function(t,e){WebSquare.uiplugin.fwRealtimeChart=t.fwRealtimeChart}));break;case"uiplugin.fwBulletChart":e=i.e(691).then(i.bind(i,9691)).then((function(t,e){WebSquare.uiplugin.fwBulletChart=t.fwBulletChart}));break;case"uiplugin.spinPicker":e=i.e(138).then(i.bind(i,1138)).then((function(t,e){WebSquare.uiplugin.spinPicker=t.spinPicker}));break;case"uiplugin.datePicker":e=Promise.all([i.e(138),i.e(5)]).then(i.bind(i,6005)).then((function(t,e){WebSquare.uiplugin.datePicker=t.datePicker}));break;case"uiplugin.slider":e=i.e(987).then(i.bind(i,6987)).then((function(t,e){WebSquare.uiplugin.slider=t.slider,WebSquare.uiplugin.thumb=t.thumb}));break;case"uiplugin.searchbox":e=i.e(547).then(i.bind(i,3547)).then((function(t,e){WebSquare.uiplugin.searchbox=t.searchbox}));break;case"uiplugin.fliptoggle":e=i.e(575).then(i.bind(i,5575)).then((function(t,e){WebSquare.uiplugin.fliptoggle=t.fliptoggle}));break;case"uiplugin.pageControl":e=i.e(362).then(i.bind(i,7362)).then((function(t,e){WebSquare.uiplugin.pageControl=t.pageControl}));break;case"uiplugin.repeat":e=i.e(919).then(i.bind(i,919)).then((function(t,e){WebSquare.uiplugin.repeat=t.repeat,
WebSquare.uiplugin.repeatAPI=t.repeatAPI}));break;case"uiplugin.graphicUtil":e=i.e(225).then(i.bind(i,7225)).then((function(t,e){WebSquare.uiplugin.graphicUtil=t.graphicUtil}));break;case"uiplugin.roundRectangle":e=i.e(935).then(i.bind(i,6935)).then((function(t,e){WebSquare.uiplugin.roundRectangle=t.roundRectangle}));break;case"uiplugin.multiselect":e=i.e(839).then(i.bind(i,9839)).then((function(t,e){WebSquare.uiplugin.multiselect=t.multiselect}));break;case"uiplugin.Switch":e=i.e(955).then(i.bind(i,3955)).then((function(t,e){WebSquare.uiplugin.Switch=t.Switch}));break;case"uiplugin.slideHide":e=i.e(35).then(i.bind(i,5035)).then((function(t,e){WebSquare.uiplugin.slideHide=t.slideHide}));break;case"uiplugin.iframe":e=i.e(633).then(i.bind(i,7633)).then((function(t,e){WebSquare.uiplugin.iframe=t.iframe}));break;case"uiplugin.layer":e=i.e(638).then(i.bind(i,3638)).then((function(t,e){WebSquare.uiplugin.layer=t.layerU}));break;case"uiplugin.grid":e=Promise.resolve().then(i.bind(i,4047)).then((function(t,e){return WebSquare.uiplugin.gridView=t.gridView,WebSquare.uiplugin.drilldown=t.drilldown,WebSquare.uiplugin.mappingController=t.mappingController,WebSquare.uiplugin.linkedMappingController=t.linkedMappingController,WebSquare.uiplugin.cellInfo=t.cellInfo,WebSquare.uiplugin.headerInfo=t.headerInfo,i.e(837).then(i.bind(i,5837)).then((function(t,e){WebSquare.uiplugin.grid=t.grid}))}));break;case"uiplugin.pageInherit":e=i.e(686).then(i.bind(i,7686)).then((function(t,e){WebSquare.uiplugin.pageInherit=t.pageInherit}));break;case"uiplugin.scrollView":e=Promise.resolve().then(i.bind(i,9533)).then((function(t,e){WebSquare.uiplugin.scrollView=t.scrollView}));break;case"uiplugin.scheduleCalendar":e=i.e(585).then(i.bind(i,1585)).then((function(t,e){WebSquare.uiplugin.scheduleCalendar=t.scheduleCalendar}));break;case"uiplugin.progressbar":e=i.e(447).then(i.bind(i,6262)).then((function(t,e){WebSquare.uiplugin.progressbar=t.progressbar}));break;case"uiplugin.gridLayout":e=Promise.resolve().then(i.bind(i,8137)).then((function(t,e){WebSquare.uiplugin.gridLayout=t.gridLayout}));break;case"engine.wUnit":e=i.e(49).then(i.bind(i,7049)).then((function(t,e){WebSquare.wUnit=t.wUnit}));break;default:return}return e.then((function(t,e){!0===o._bInitModule&&o._initWebsquareModule()})),e},o._getModuleSrc=function(t){if("string"!=typeof t)return t;var e=t.indexOf("websquare/externalJS");return e>=0&&t.match(/big|bisCommon|bootstrap|ckfinder|editor|fullCalendar|FusionChart|jquery|mapchart|progressbar|underscore|xmlparser|xpath/)&&"_websquare_/externalJS"!==t.slice(e-12,e+10)&&(t=t.replace("externalJS","_websquare_/externalJS")),t},o._performance._valid=function(){try{var t=o._performance.use;return!0===t||"string"==typeof t&&"true"===t.toLowerCase()}catch(t){window.console&&window.console.error(t)}},o._performance.mark=function(t,e){try{if(o._performance._valid()&&t){performance.mark("wq.mark."+t,e)}}catch(t){window.console&&window.console.error(t)}},o._performance.measure=function(t,e,i){try{if(o._performance._valid()&&t){var s="wq.mark.";e&&(e=s+e),i&&(i=s+i),performance.measure("wq."+t,e,i)}}catch(t){window.console&&window.console.error(t)}}},3166:(module,__webpack_exports__,__webpack_require__)=>{var leftTrimRegExp,rightTrimRegExp,capitalizeStyleHash;__webpack_require__.d(__webpack_exports__,{C:()=>wq_polyfill}),module=__webpack_require__.hmd(module),window.String.prototype.wq_trim=(leftTrimRegExp=new RegExp("^\\s\\s*"),rightTrimRegExp=new RegExp("\\s\\s*$"),function(){return this.replace(leftTrimRegExp,"").replace(rightTrimRegExp,"")}),void 0===window.String.prototype.trim&&(window.String.prototype.trim=window.String.prototype.wq_trim),window.String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.substr(1)},window.String.prototype.wq_replaceAll=function(t,e){return t=t.replace(/(\W)/g,"\\$1"),this.replace(new RegExp(t,"gi"),e)},
void 0===window.String.prototype.replaceAll&&(window.String.prototype.replaceAll=window.String.prototype.wq_replaceAll),window.String.prototype.startsWith=function(t){return this.substring(0,t.length)==t},window.String.prototype.endsWith=function(t){return this.substring(this.length-t.length,this.length)==t},window.String.prototype.capitalizeStyle=(capitalizeStyleHash={},function(){var t=capitalizeStyleHash[this];if(t)return t;if(this.indexOf("-")<0)return this;for(var e=this.split("-");""==e[0];)e.shift();for(var i=e[0].toLowerCase(),o=1,s=e.length;o<s;o++)i+=e[o].toLowerCase().capitalize();return capitalizeStyleHash[this]=i,i}),window.wq_reload=function(t){try{null==this.locationTimerCount&&(this.locationTimerCount=0),this.locationTimerCount++,null==t||location.href===t||this.locationTimerCount>700?(this.locationTimerCount=0,location.reload()):(console&&console.log&&console.log("renewing location href..."),location.replace(t),setTimeout((function(){wq_reload(t)}),5))}catch(t){console&&console.log&&console.log("wq_reload error : "+t.message)}};var wq_polyfill={init:function(global){(function(){function f(t){return t<10?"0"+t:t}var cx,escapable,gap,indent,meta,rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,o,s,r,a=gap,n=e[t];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(t)),"function"==typeof rep&&(n=rep.call(e,t,n)),typeof n){case"string":return quote(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(n)){s=n.length;for(var l=0;l<s;l+=1)r[l]=str(l,n)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep){s=rep.length;for(l=0;l<s;l+=1)"string"==typeof rep[l]&&(o=str(i=rep[l],n))&&r.push(quote(i)+(gap?": ":":")+o)}else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=str(i,n))&&r.push(quote(i)+(gap?": ":":")+o);return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"object"!=typeof window.JSON&&(window.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var isIE=null!=navigator.appName.match(/Explorer/i);("function"!=typeof JSON.stringify||isIE)&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){if(gap="",indent="","number"==typeof i)for(var o=0;o<i;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),("function"!=typeof JSON.parse||isIE)&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){var j;function walk(t,e){var i,o,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(o=walk(s,i))?s[i]=o:delete s[i]);return reviver.call(t,e,s)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),
/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),function(t){var e;e="object"==typeof window&&window?window:void 0,module.exports?module.exports=e.Promise?e.Promise:r:e.Promise||(e.Promise=r);var i=e.setImmediate||function(t){setTimeout(t,1)};function o(t,e){return function(){t.apply(e,arguments)}}var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,o(n,this),o(l,this))}function a(t){var e=this;null!==this._state?i((function(){var i=e._state?t.onFulfilled:t.onRejected;if(null!==i){var o;try{o=i(e._value)}catch(e){return void t.reject(e)}t.resolve(o)}else(e._state?t.resolve:t.reject)(e._value)})):this._deferreds.push(t)}function n(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void c(o(e,t),o(n,this),o(l,this))}this._state=!0,this._value=t,h.call(this)}catch(t){l.call(this,t)}}function l(t){this._state=!1,this._value=t,h.call(this)}function h(){for(var t=0,e=this._deferreds.length;t<e;t++)a.call(this,this._deferreds[t]);this._deferreds=null}function d(t,e,i,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=i,this.reject=o}function c(t,e,i){var o=!1;try{t((function(t){o||(o=!0,e(t))}),(function(t){o||(o=!0,i(t))}))}catch(t){if(o)return;o=!0,i(t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var i=this;return new r((function(o,s){a.call(i,new d(t,e,o,s))}))},r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new r((function(e,i){if(0===t.length)return e([]);var o=t.length;function s(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var n=a.then;if("function"==typeof n)return void n.call(a,(function(t){s(r,t)}),i)}t[r]=a,0==--o&&e(t)}catch(t){i(t)}}for(var r=0;r<t.length;r++)s(r,t[r])}))},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(t){return new r((function(e,i){i(t)}))},r.race=function(t){return new r((function(e,i){for(var o=0,s=t.length;o<s;o++)t[o].then(e,i)}))}}()}}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t](i,i.exports,__webpack_require__),i.loaded=!0,i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,i)=>(__webpack_require__.f[i](t,e),e)),[])),__webpack_require__.u=t=>"wqd_B4858_"+t+".js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),inProgress={},dataWebpackPrefix="webpack_test:",__webpack_require__.l=(t,e,i,o)=>{
if(inProgress[t])inProgress[t].push(e);else{var s,r;if(void 0!==i)for(var a=document.getElementsByTagName("script"),n=0;n<a.length;n++){var l=a[n];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==dataWebpackPrefix+i){s=l;break}}s||(r=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",dataWebpackPrefix+i),s.src=t),inProgress[t]=[e];var h=(e,i)=>{s.onerror=s.onload=null,clearTimeout(d);var o=inProgress[t];if(delete inProgress[t],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((t=>t(i))),e)return e(i)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),r&&document.head.appendChild(s)}},__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t})(),(()=>{var t={179:0};__webpack_require__.f.j=(e,i)=>{var o=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==o)if(o)i.push(o[2]);else{var s=new Promise(((i,s)=>o=t[e]=[i,s]));i.push(o[2]=s);var r=__webpack_require__.p+__webpack_require__.u(e),a=new Error;__webpack_require__.l(r,(i=>{if(__webpack_require__.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,o[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{var o,s,[r,a,n]=i,l=0;for(o in a)__webpack_require__.o(a,o)&&(__webpack_require__.m[o]=a[o]);if(n)n(__webpack_require__);for(e&&e(i);l<r.length;l++)s=r[l],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[r[l]]=0},i=self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var __webpack_exports__={};(()=>{var t,e,i,o,s,r=__webpack_require__(3166),a=__webpack_require__(2981),n=__webpack_require__(6301),l=__webpack_require__(1656),h=__webpack_require__(2085),d=__webpack_require__(7275),c=__webpack_require__(5543),u={errorStr:"\n",nKey:"",stat:"",_oldMode:!1,_isHead:!0,xml2json:function(t,e){try{if("string"==typeof t){this.nKey=e;var i=c.L.parse(t);return this.convertXMLDocument(i)}return this.convertXMLDocument(t)}catch(t){console.log(t)}},parseError:function(t){console.error(t,this.nKey),this.stat="fail"},serialize:function(t){var e=[];return t.setAttribute("xmlns:xf",t.namespaceURI),this._serialize(t,e),e.join("")},_serialize:function(t,e){if(1==t.nodeType){if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(var i=0;i<t.attributes.length;i++){var o=t.attributes.item(i);e.push(" "),e.push(o.name),e.push('="'),e.push(this._encode(o.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var s=t.childNodes,r=0;r<s.length;r++){var a=s.item(r);this._serialize(a,e)}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType)e.push(this._encode(t.nodeValue));else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(9==t.nodeType)for(s=t.childNodes,r=0;r<s.length;r++){a=s.item(r);this._serialize(a,e)}},_encode:(t=/&/g,e=/</g,i=/>/g,o=/"/g,s=/'/g,function(r){return r.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&quot;").replace(s,"&apos;")}),convertXMLDocument:function(t){try{var e,i={},o=[];e=1===t.nodeType?[t]:t.childNodes;for(var s=0;s<e.length;s++){var r
;if(7==(r=e.item?e.item(s):e[s]).nodeType)if(r.nodeName&&"xml"==r.nodeName||r.nodeValue.indexOf("version")>=0){for(var a=/([^=\s]+)=["'](\S+)["']/g,n=null,l={};null!==(n=a.exec(r.nodeValue));){var h=n[1];if("string"==typeof h){var d=n[2];d&&(l[h]=d)}}i.declaration={A:l}}else{var c=r.nodeName;c||(c="xml-stylesheet"),o.push({T:7,N:c,instruction:r.nodeValue})}else if(1==r.nodeType){var u=this.convertElementIterative(r);o.push(u.obj)}else if(10==r.nodeType){var p=r.name+(r.publicId?' PUBLIC "'+r.publicId+'"':"")+(!r.publicId&&r.systemId?" SYSTEM":"")+(r.systemId?' "'+r.systemId+'"':"");o.push({T:10,doctype:p})}}return o.length>0&&(i.E=o),this.stat="success",i}catch(t){console.log(t)}},convertAttributes:function(t){try{for(var e={},i=0;i<t.length;i++){var o=t[i];/(meta_\w*)|(metaev_\w*)/gi.test(o.name)||(e[o.name]=o.nodeValue)}return e}catch(t){console.log(t)}},convertElementIterative:function(t){try{var e={T:1,N:t.nodeName},i=[];t.attributes.length>0&&(e.A=this.convertAttributes(t.attributes));for(var o=[],s=[],r=t.childNodes.length-1;r>=0;r--)o.push(t.childNodes[r]),s.push(e);for(;o.length>0;){var a=o.pop(),n=s.pop();if(1==a.nodeType)if("instance"===a.nodeName.substring(a.nodeName.indexOf(":")+1)){var l=!1;for(r=a.childNodes.length-1;r>=0;r--){if("data"===(d=a.childNodes[r]).nodeName&&1===d.nodeType&&d.childNodes&&d.childNodes.length>0){l=!0;break}"data"!==d.nodeName&&1===d.nodeType&&(l=!0)}if(!l)continue;var h={T:1,N:a.nodeName,_xml:this.serialize(a)};n.E||(n.E=[]),n.E.push(h);for(r=a.childNodes.length-1;r>=0;r--){"data"!==(d=a.childNodes[r]).nodeName&&1===d.nodeType&&(o.push(d),s.push(h))}}else{h={T:1,N:a.nodeName};a.attributes.length>0&&(h.A=this.convertAttributes(a.attributes),h.A.id&&i.push(h.A.id)),n.E||(n.E=[]),n.E.push(h),h.N&&"body"===h.N.toLowerCase()&&!0===this._oldMode&&(h.A||(h.A={}),h.A["ev:onpageload"]="scwin.onpageload");for(r=a.childNodes.length-1;r>=0;r--){var d;3===(d=a.childNodes[r]).nodeType&&""==d.nodeValue.trim()||(o.push(d),s.push(h))}}else if(2==a.nodeType);else if(3==a.nodeType){var c=a.nodeValue.trim();if(""!=c)if(c.startsWith("<![CDATA["))u=(u=c.substring(9,c.length-3)).replace(/\\/gi,"\\$&"),(u=this.cDataToFunc(u,n))&&(n.E||(n.E=[]),n.E.push({T:4,cdata:u}));else n.E||(n.E=[]),n.E.push({T:3,text:a.nodeValue.replace(/\\/gi,"\\$&")})}else if(4==a.nodeType){if(a.nodeValue){n.E||(n.E=[]);var u=a.nodeValue.replace(/\\/gi,"\\$&");u=this.cDataToFunc(u,n),n.E.push({T:4,cdata:u})}}else if(7==a.nodeType){var p=a.nodeName;p||(p="xml-stylesheet"),n.E||(n.E=[]),n.E.push({T:7,N:p,instruction:a.nodeValue.replace(/\\/gi,"\\$&")})}}return{obj:e,id:i}}catch(t){console.log(t)}},cDataToFunc:function(t,e){try{if(!e||"string"!=typeof e.N)return t;var i=t;if("script"===e.N.toLowerCase()){var o="",s=e.A&&e.A["ev:event"],r=s&&s.indexOf("(");r>=0&&(o=","+s.slice(r+1,-1));var a="",n="";!0===this._isHead&&"false"!==e.A.lazy&&(e.A.lazy="false",a="scwin.onpageload = function(){",n="}",this._oldMode=!0),this._isHead=!1;i="function(scopeObj"+o+"){var {"+"#_wq!$!@}=scopeObj;"+a+t+n+"}"}else"w2:env"===e.N.toLowerCase()&&"string"==typeof t&&(i=JSON.parse(t));return i}catch(t){console.log(t)}}};u.json2xml=function(t,e){try{"string"==typeof t&&(t=t.parse(t)),void 0!==e&&null!=e||(e={});for(var i=[t],o=[],s="";i.length>0;){var r=i.pop();if(e.changeKey&&null!=e.changeKey[r.N]&&(r.N=e.changeKey[r.N]),o.length>0&&o[o.length-1].length--,1===r.T){for(var a in s+="<"+r.N,r.A)void 0!==r.A[a]&&(s+=" "+a+'="'+this._encode(r.A[a])+'"');if(r.E){s+=">",o.push({length:r.E.length,name:r.N});for(var n=r.E.length-1;n>=0;n--)i.push(r.E[n])}else s+="/>"}else 3===r.T?s+=r.text:4===r.T&&(s+="<![CDATA["+r.cdata+"]]>");for(;o.length>0&&0===o[o.length-1].length;){s+="</"+o.pop().name+">"}}return s}catch(t){WebSquare.exception.printStackTrace(t,null,this)}};var p=__webpack_require__(6451),g=__webpack_require__(3082),m=__webpack_require__(227),f=__webpack_require__(6043),b={XmlEvent:function(t,e,i,o){try{this.name=t,this.action=e,this.param=i,this.disabled=o||!1
}catch(t){h.w.printStackTrace(t)}}},y=function(){this.cache=!0,this.convertedCSSText=null,this.controlCSSText=null,this.importedCSSText=null,this.internalCSSText=null,this.externalCSSText=null,this.externalCSSLink=null,this.controlCSSLink=null,this.classStyleCache=[],this.excludeList=[],this.excludeList.trigger="1",this.excludeList.submit="1",this.excludeList.inputCalendar="1",this.heightPattern=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/gi,this.widthPattern=/(?:^|;)\s*width\s*:\s*(\d*)px\s*(?:$|;)/gi,this.initialize(),this.startCache()};y.prototype.startCache=function(){this.cache=!0},y.prototype.endCache=function(){this.cache=!1},y.prototype.initialize=function(){this.convertedCSSText=[],this.controlCSSText=[],this.internalCSSText=[],this.externalCSSText=[],this.externalCSSLink=[],this.controlCSSLink=[]},y.prototype.addConvertedCSS=function(t,e){""!=e&&(1==this.cache?this.convertedCSSText.push(t+" {"+e+"} \n"):WebSquare.cssStyleSheet.addRule(t,e))},y.prototype.addControlCSS=function(t){this.controlCSSText.push(t+"\n")},y.prototype.addInternalCSS=function(t){this.internalCSSText.push(t+"\n")},y.prototype.addExternalCSS=function(t){this.externalCSSText.push(t+"\n")},y.prototype.linkControlCSS=function(t){this.controlCSSLink.push(t)},y.prototype.linkExternalCSS=function(t){this.externalCSSLink.push(t)},y.prototype.toCSS=function(){var t=[];return this.controlCSSText&&this.controlCSSText.length>0&&(t=(t=(t=t.concat(["/*controlCSSText*/\n"])).concat(this.controlCSSText)).concat(["\n\n"])),this.convertedCSSText&&this.convertedCSSText.length>0&&(t=(t=(t=t.concat(["/*convertedCSSText*/\n"])).concat(this.convertedCSSText)).concat(["\n\n"])),this.externalCSSText&&this.externalCSSText.length>0&&(t=(t=(t=t.concat(["/*externalCSSText*/\n"])).concat(this.externalCSSText)).concat(["\n\n"])),this.internalCSSText&&this.internalCSSText.length>0&&(t=(t=t.concat(["/*internalCSSText*/\n"])).concat(this.internalCSSText)),t.join("")},y.prototype.executeImport=function(t){try{for(var e=WebSquare.net.getParameter("adaptive")||"",i=[],o=document.getElementsByTagName("head")[0],s=0,r=this.controlCSSLink.length;s<r;s++){var a=document.createElement("link");for(var c in this.controlCSSLink[s])a[c]=this.controlCSSLink[s][c];null!=t?o.insertBefore(a,t):o.appendChild(a),i.push(a),d.k.printLog("import core css : "+a.href)}for(s=0,r=this.externalCSSLink.length;s<r;s++){var u=this.externalCSSLink[s];if(!WebSquare.hybridApp)if(""!=e&&u.adaptive){if(e!=u.adaptive)continue}else{if(g.D.isMobile()&&u.adaptive&&"mobile"!=u.adaptive)continue;if(!g.D.isMobile()&&u.adaptive&&"pc"!=u.adaptive)continue}a=document.createElement("link");for(var c in this.externalCSSLink[s])if(""!=c){var p="";"href"==c?(p=n.d.getResourcePostfix(this.externalCSSLink[s][c]),a[c]=p):a[c]=this.externalCSSLink[s][c]}null!=t?(o.insertBefore(a,t),l.v.browserCheck.ie&&o.insertBefore(t,t)):o.appendChild(a),i.push(a),d.k.printLog("import user css : "+a.href)}this.controlCSSLink=[],this.externalCSSLink=[];var m,f=this.toCSS();if(f)if(l.v.browserCheck.ie)(m=document.createElement("style")).setAttribute("type","text/css"),m.styleSheet.cssText=f,null!=t?o.insertBefore(m,t):o.appendChild(m),i.push(m);else(m=document.createElementNS("http://www.w3.org/1999/xhtml","style")).setAttribute("type","text/css"),m.appendChild(document.createTextNode(f)),null!=t?o.insertBefore(m,t):o.appendChild(m),i.push(m);return this.initialize(),this.endCache(),o=null,i}catch(t){h.w.printStackTrace(t)}},y.prototype.resizeStyle=function(t,e){try{var i=e.style;if(i&&""!=i){var o=this.setResizeStyle(i,e);null!=o&&null!=o.newSizeStyle&&(e.style=i+";"+o.newSizeStyle)}return e}catch(t){h.w.printStackTrace(t)}},y.prototype.styleToClass=function(t,e){try{for(var i in e)if(i.indexOf("Style")>-1){var o=e[i];if(""!=o){var s=i+"Class",r="#"+t+" ."+s;WebSquare.cssManager.addConvertedCSS(r,o),e[i]="";var a=i.replace("Style","Class");e[a]||(e[a]=""),""!=e[a]&&(e[a]+=" "),e[a]+=s}}return e}catch(t){h.w.printStackTrace(t)}},
y.prototype.setResizeStyle=function(t,e){if(null!=this.excludeList[e.pluginName])return null;var i=null,o=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(t);if(o&&2==o.length){var s=parseInt(o[1]);(i=this.getSizeObj(t,e,i)).newSizeStyle=";height:"+(s-(i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth))+"px"}var r=/(?:^|;)\s*width\s*:\s*(\d*)px\s*(?:$|;)/i.exec(t);if(r&&2==r.length){var a=parseInt(r[1]);(i=this.getSizeObj(t,e,i)).newSizeStyle+=";width:"+(a-(i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth))+"px"}return i},y.prototype.getSizeObj=function(t,e,i){if(null!=i)return i;var o={paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,borderTopWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderRightWidth:0,newSizeStyle:""},s=new WebSquare.cssManager.sizeObj(t),r=this.getSizeStyleObj("w2"+e.pluginName),a=this.getSizeStyleObj(e.className);return o=this.inherit(o,r),o=this.inherit(o,a),o=this.inherit(o,s)},y.prototype.inherit=function(t,e){return null==e||(null!=e.paddingTop&&(t.paddingTop=e.paddingTop),null!=e.paddingBottom&&(t.paddingBottom=e.paddingBottom),null!=e.paddingLeft&&(t.paddingLeft=e.paddingLeft),null!=e.paddingRight&&(t.paddingRight=e.paddingRight),null!=e.borderTopWidth&&(t.borderTopWidth=e.borderTopWidth),null!=e.borderBottomWidth&&(t.borderBottomWidth=e.borderBottomWidth),null!=e.borderLeftWidth&&(t.borderLeftWidth=e.borderLeftWidth),null!=e.borderRightWidth&&(t.borderRightWidth=e.borderRightWidth)),t},y.prototype.getSizeStyleObj=function(t){if(null==t||""==t)return null;var e=this.classStyleCache[t];if(null==e){var i=this.toCSS(),o=new RegExp("[.]"+t+"[ \t\n\r]*{([^}]*)}"),s=i.match(o),r="";null!=s&&2==s.length&&(r=s[1]),e=new WebSquare.cssManager.sizeObj(r),this.classStyleCache[t]=e}return e},y.prototype.sizeObj=function(t){this.paddingTop=null,this.paddingBottom=null,this.paddingLeft=null,this.paddingRight=null,this.borderTopWidth=null,this.borderBottomWidth=null,this.borderLeftWidth=null,this.borderRightWidth=null;for(var e=t.split(";"),i=0;i<e.length;i++){var o=e[i].toLowerCase();o.indexOf("padding")>=0?this.setPaddingProperty(o):o.indexOf("border")>=0&&this.setBorderProperty(o)}},y.prototype.sizeObj.prototype.toString=function(){this.paddingTop;this.paddingBottom,this.paddingLeft,this.paddingRight,this.borderTopWidth,this.borderBottomWidth,this.borderLeftWidth,this.borderRightWidth},y.prototype.sizeObj.prototype.setPaddingProperty=function(t){var e=t.split(":"),i=e[0].wq_trim(),o=e[1].wq_trim();if(""!=o)if("padding"==i){var s=o.split(" ");1==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[0]),this.paddingBottom=parseInt(s[0]),this.paddingLeft=parseInt(s[0])):2==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[0]),this.paddingLeft=parseInt(s[1])):3==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[2]),this.paddingLeft=parseInt(s[1])):4==s.length&&(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[2]),this.paddingLeft=parseInt(s[3]))}else i.indexOf("padding-left")>=0?this.paddingLeft=parseInt(o):i.indexOf("padding-top")>=0?this.paddingTop=parseInt(o):i.indexOf("padding-right")>=0?this.paddingRight=parseInt(o):i.indexOf("padding-bottom")>=0&&(this.paddingBottom=parseInt(o))},y.prototype.sizeObj.prototype.setBorderProperty=function(t){for(var e=t.split(":"),i=e[0].wq_trim(),o=e[1].wq_trim().split(" "),s=null,r=0;r<o.length;r++)o[r].indexOf("px")>=0&&(s=parseInt(o[r]));null!=s&&("border"==i||"border-width"==i?(this.borderTopWidth=s,this.borderBottomWidth=s,this.borderLeftWidth=s,this.borderRightWidth=s):i.indexOf("border-left")>=0?this.borderLeftWidth=s:i.indexOf("border-top")>=0?this.borderTopWidth=s:i.indexOf("border-right")>=0?this.borderRightWidth=s:i.indexOf("border-bottom")>=0&&(this.borderBottomWidth=s))},y.prototype.sizeObj.prototype.inherit=function(t){
null!=t&&(this.paddingTop=null!=t.paddingTop?t.paddingTop:this.paddingTop,this.paddingBottom=null!=t.paddingBottom?t.paddingBottom:this.paddingBottom,this.paddingLeft=null!=t.paddingLeft?t.paddingLeft:this.paddingLeft,this.paddingRight=null!=t.paddingRight?t.paddingRight:this.paddingRight,this.borderTopWidth=null!=t.borderTopWidth?t.borderTopWidth:this.borderTopWidth,this.borderBottomWidth=null!=t.borderBottomWidth?t.borderBottomWidth:this.borderBottomWidth,this.borderLeftWidth=null!=t.borderLeftWidth?t.borderLeftWidth:this.borderLeftWidth,this.borderRightWidth=null!=t.borderRightWidth?t.borderRightWidth:this.borderRightWidth)},y.prototype.sizeObj.prototype.nullToZero=function(t){this.paddingTop=this.paddingTop||0,this.paddingBottom=this.paddingBottom||0,this.paddingLeft=this.paddingLeft||0,this.paddingRight=this.paddingRight||0,this.borderTopWidth=this.borderTopWidth||0,this.borderBottomWidth=this.borderBottomWidth||0,this.borderLeftWidth=this.borderLeftWidth||0,this.borderRightWidth=this.borderRightWidth||0},y=new y;var v={ClassStyleCache:{},makeTime:0,_initImport:function(){v.skinTag=a.x.externalCSSURL.slice(0)}};a.x._initImportList.push("skin"),v.addImport=function(t,e){try{if("string"==typeof t){var i={};i.href=g.D.getAbsolutePath(l.v.getURL(t)),i.type="text/css",i.rel="stylesheet",t=i}var o=!1;for(var s in v.skinTag)if(t.href==v.skinTag[s]){o=!0;break}if(o);else if(v.skinTag.push(t.href),"link"==l.v.getConfiguration("/WebSquare/stylesheet/@import"))1==e?y.linkExternalCSS(t):y.linkControlCSS(t);else{var r=t.href,a=l.v.load(r);1==e?y.addExternalCSS(a):y.addControlCSS(a)}}catch(t){h.w.printStackTrace(t)}},v.parseCSS=function(t){try{if(l.v.browserCheck.ie){document.createStyleSheet().cssText=t}else{var e=document.createElementNS("http://www.w3.org/1999/xhtml","style");e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head").item(0).appendChild(e)}}catch(t){h.w.printStackTrace(t)}},v.importCSS=function(t){try{for(var e=c.L.getElementsByTagName(t.documentElement,"style",l.v._XML_NAMESPACE.XHTML),i="",o=0;o<e.length;o++){if(1==(n=e[o]).nodeType)for(var s=n.childNodes,r=0;r<s.length;r++){var a=s[r];4!=a.nodeType&&3!=a.nodeType||(i+=a.nodeValue)}}""!=i.wq_trim()&&y.addInternalCSS(i);for(s=t.childNodes,o=0;o<s.length;o++){var n;if(7==(n=s[o]).nodeType&&"xml-stylesheet"===n.nodeName){var d=n.data.wq_replaceAll("=","").split('"');d.pop();var u={};for(r=0;r<d.length;r+=2)u[d[r].wq_trim()]=d[r+1];u.href&&(u.href=g.D.getAbsolutePath(l.v.getURL(u.href))),null==u.type&&(u.type="text/css"),null==u.rel&&(u.rel="stylesheet"),v.addImport(u,!0)}}}catch(t){h.w.printStackTrace(t)}},v.applyClass=function(t,e){try{t.className=e}catch(t){}},v.makeClassStyle=function(t){var e={};if(void 0===t||null==t||""==t)return e;if(void 0!==v.ClassStyleCache[t]&&null!=v.ClassStyleCache[t])return v.ClassStyleCache[t];try{var i=document.styleSheets;if(l.v.browserCheck.ie)for(var o=i.length-1;o>=0;o--)for(var s=i[o],r=0;r<s.rules.length;r++){if(void 0!==(g=s.rules.item(r)).selectorText){if((f=(m=g.selectorText).lastIndexOf("."))>-1){var a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if(m==t){for(var n=g.style.cssText.split(";"),d=0;d<n.length;d++){if(null!=(b=n[d].split(":"))[1]){if(b[1].indexOf("url")>=0)if(b[1]=b[1].wq_trim(),b[1].startsWith("url"))"("==(y=b[1].substring(3).wq_trim()).charAt(0)&&")"==y.charAt(y.length-1)&&(b[1]="url("+l.v.getImageURL(y.substring(1,y.length-1))+")");e[b[0].wq_trim().capitalizeStyle()]=b[1].wq_trim()}}v.ClassStyleCache[t]=e;break}}}else if(l.v.browserCheck.opera)for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){if(void 0!==(g=s.cssRules[r]).selectorText){if((f=(m=g.selectorText).lastIndexOf("."))>-1){a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if(m==t){for(n=g.style.cssText.split(";"),d=0;d<n.length;d++){var c=n[d].indexOf(":");if(c>-1){var u=n[d].substring(0,c),p=n[d].substring(c+1);e[u.wq_trim().capitalizeStyle()]=p.wq_trim()}}v.ClassStyleCache[t]=e;break}}
}else for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){var g;if(void 0!==(g=s.cssRules[r]).selectorText){var m,f;if((f=(m=g.selectorText).lastIndexOf("."))>-1){a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if((m=m.toLowerCase())==(t=t.toLowerCase())){for(n=g.style.cssText.split(";"),d=0;d<n.length;d++){var b;if(null!=(b=n[d].split(":"))[1]){var y;if(b[1].indexOf("url")>=0)if(b[1]=b[1].wq_trim(),b[1].startsWith("url"))if(b[1].indexOf("http")>=0)for(var w=2;null!=b[w];)b[1]=b[1]+":"+b[w],w++;else"("==(y=b[1].substring(3).wq_trim()).charAt(0)&&")"==y.charAt(y.length-1)&&(b[1]="url("+l.v.getImageURL(y.substring(1,y.length-1))+")");e[b[0].wq_trim().capitalizeStyle()]=b[1].wq_trim()}}v.ClassStyleCache[t]=e;break}}}}catch(t){h.w.printStackTrace(t)}return e},v.makeBackgroundImageUrl=function(t){var e="";if(void 0===t||null==t||""==t)return"";try{var i=document.styleSheets;if(l.v.browserCheck.ie)for(var o=i.length-1;o>=0;o--)for(var s=i[o],r=0;r<s.rules.length;r++){if(void 0!==(b=s.rules.item(r)).selectorText){if((v=(y=b.selectorText).lastIndexOf("."))>-1){var n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if(y==t){for(var d=b.style.cssText.split(";"),c=0;c<d.length;c++){if(null!=(u=d[c].split(":"))[1]&&"BACKGROUND-IMAGE"==u[0].toUpperCase()){if(u[1].indexOf("url")>=0)if(u[1]=u[1].wq_trim(),u[1].startsWith("url"))"("==(w=u[1].substring(3).wq_trim()).charAt(0)&&")"==w.charAt(w.length-1)&&(u[1]=l.v.getImageURL(w.substring(1,w.length-1)));e=u[1].wq_trim()}}break}}}else if(l.v.browserCheck.opera)for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){if(void 0!==(b=s.cssRules[r]).selectorText){if((v=(y=b.selectorText).lastIndexOf("."))>-1){n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if(y==t){for(d=b.style.cssText.split(";"),c=0;c<d.length;c++){var u=d[c].split(":"),p=d[c].indexOf(":");if(p>-1){var g=d[c].substring(0,p),m=d[c].substring(p+1);if("BACKGROUND-IMAGE"==g.toUpperCase().wq_trim()){if(m.indexOf("url")>=0)if((m=m.wq_trim()).startsWith("url"))if("("==(w=(w=m.substring(3).wq_trim()).replace(/"/g,"")).charAt(0)&&")"==w.charAt(w.length-1)){var f=w.lastIndexOf(a.x.baseURI);f+=a.x.baseURI.length,m=l.v.getImageURL(w.substring(f,w.length-1))}e=m}}}break}}}else for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){var b;if(void 0!==(b=s.cssRules[r]).selectorText){var y,v;if((v=(y=b.selectorText).lastIndexOf("."))>-1){n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if((y=y.toLowerCase())==(t=t.toLowerCase())){for(d=b.style.cssText.split(";"),c=0;c<d.length;c++){if(null!=(u=d[c].split(":"))[1]&&"BACKGROUND-IMAGE"==u[0].toUpperCase().wq_trim()){var w;if(u[1].indexOf("url")>=0)if(u[1]=u[1].wq_trim(),u[1].startsWith("url"))if(u[1].indexOf("http")>=0)for(var S=2;null!=u[S];)u[1]=u[1]+":"+u[S],S++;else"("==(w=u[1].substring(3).wq_trim()).charAt(0)&&")"==w.charAt(w.length-1)&&(u[1]=l.v.getImageURL(w.substring(1,w.length-1)));e=u[1].wq_trim()}}break}}}}catch(t){h.w.printStackTrace(t)}return e},v.loadCSS=function(t){try{if(!t||""===t)return;var e=l.v.load(t);if(!e)return;if(l.v.browserCheck.ie){document.createStyleSheet().cssText=e}else{var i=document.createElementNS("http://www.w3.org/1999/xhtml","style");i.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(i)}}catch(t){h.w.printStackTrace(t)}};var w={WebSquareParser:function(){}};w.WebSquareParser.prototype.parse=async function(t,e,i){try{this.preParse(t),this.parseCSS(t,e,i),await this.parseUDC2(t,i),i&&i!==WebSquare.strictModeFrame||(this.parseBuildDate(t.documentElement),this.parseTitle(t.documentElement)),this.parseModels(t.documentElement,i);var o=await this.parseScript(t.documentElement,i);return null!=i?this.parseDataCollections(t.documentElement,i.uuid):this.parseDataCollections(t.documentElement),o}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseMeta=function(t){try{
var e=["meta","Meta","META"],i=document.getElementsByTagName("head")[0],o=i.getElementsByTagName("meta"),s=[],r=c.L.getElementsByTagName(t,"screen",l.v._XML_NAMESPACE.W2);if(r&&r.length>0){var a=document.createElement("meta");a.name="viewport",a.content="width=device-width initial-scale=1.0",i.appendChild(a)}for(var n=0;n<o.length;n++){((g=o[n].getAttribute("http-equiv"))||(g=o[n].getAttribute("name")))&&s.push(g)}for(n=0;n<e.length;n++){var d=c.L.getElementsByTagName(t,e[n],l.v._XML_NAMESPACE.XHTML);if(d&&d.length>0)for(var u=0;u<d.length;u++){for(var p=0;p<d[u].attributes.length;p++){var g;if("http-equiv"==d[u].attributes[p].nodeName)g=d[u].attributes[p].nodeValue;else{if("name"!=d[u].attributes[p].nodeName)continue;g=d[u].attributes[p].nodeValue}for(var m=0;m<s.length;m++)if(s[m]==g){for(var f=0;f<o.length;f++)if(o[f].getAttribute("http-equiv")==g||o[f].getAttribute("name")==g){i.removeChild(o[f]);break}break}break}var b=document.createElement("meta");for(p=0;p<d[u].attributes.length;p++)b.setAttribute(d[u].attributes[p].nodeName,d[u].attributes[p].nodeValue);i.appendChild(b)}}}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parsePageInheritBefore=function(t,e,i){try{this.preParse(t),this.parseMeta(t.documentElement),this.parseModels(t.documentElement,i),null!=i?this.parseDataCollections(t.documentElement,i.uuid):this.parseDataCollections(t.documentElement)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parsePageInheritAfter=async function(t,e,i){try{return this.parseCSS(t,e,i,a.x.WebSquaredoc.cssList[0]),await this.parseScript(t.documentElement,i,!0)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.preParse=function(t,e){try{if(l.v.browserCheck.ieAllVersion&&n.d.useActiveXObject){var i=l.v.getNamespaces(t),o="";for(var s in i)""!=s&&(o+="xmlns:"+s+'="'+i[s]+'" ');t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",o)}!1!==e&&this.parseConfig(t.documentElement)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseCSS=function(t,e,i,o){try{var s=l.v.getConfiguration("/WebSquare/stylesheet/@value");if("false"!=l.v.getConfiguration("/WebSquare/stylesheet/@enable")&&!e&&!i&&!a.x.styleSheetEarlyImport){null!=s&&""!=s||(s="link"==l.v.getConfiguration("/WebSquare/stylesheet/@import")?"stylesheet_ext.css":"stylesheet.css");var r=n.d.inquiresPath("skin/");v.addImport(a.x.baseThemeURI+r+s),WebSquare.cssManager.executeImport()}var d="";if(i&&i.options.cssFunction&&!i.options.strictFrame&&(d=g.D.getGlobalFunction(i.options.cssFunction,i.id)),"function"==typeof d&&WebSquare.cssManager.executeImport(o),i&&!i.options.strictFrame){if("function"==typeof d){for(var c=[],u=0;u<WebSquare.cssManager.externalCSSLink.length;u++)c.push(WebSquare.cssManager.externalCSSLink[u].href);if(!0===d(i.id,c)){for(u=0;u<c.length;u++)for(var p in v.skinTag)if(g.D._getAbsolutePath(c[u])==v.skinTag[p]){v.skinTag.splice(p,1);break}WebSquare.cssManager.externalCSSLink=[]}}i.frameDoc.cssList=i.frameDoc.cssList.concat(WebSquare.cssManager.executeImport(o))}else a.x.WebSquaredoc.cssList=a.x.WebSquaredoc.cssList.concat(WebSquare.cssManager.executeImport(o))}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseConfig=function(t){try{var e=c.L.getElementsByTagName(t,"config",l.v._XML_NAMESPACE.W2);if(1==e.length)for(var i=e[0].firstChild;null!=i;i=i.nextSibling)1==i.nodeType&&c.L.matchNode(i,"WebSquare",l.v._XML_NAMESPACE.XHTML)&&a.x.WebSquaredoc.mergeConfig(i)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseBuildDate=function(t){try{var e=c.L.getElementsByTagName(t,"buildDate",l.v._XML_NAMESPACE.W2);1==e.length&&e[0].firstChild?WebSquare.buildDate=e[0].firstChild.nodeValue:WebSquare.buildDate="N/A"}catch(t){WebSquare.buildDate="N/A",h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseTitle=function(t){try{var e=c.L.getElementsByTagName(t,"title",l.v._XML_NAMESPACE.XHTML);1==e.length&&(WebSquare.docTitle=document.title=e[0].firstChild.nodeValue)
}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseModels=function(t,e){try{for(var i=c.L.getElementsByTagName(t,"model",l.v._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)e?e.frameDoc&&!e.options.strictFrame?e.frameDoc.models.push(this.parseModel(i[o],e)):!0===e.options.strictFrame&&a.x.WebSquaredoc.models.push(this.parseModel(i[o],e)):a.x.WebSquaredoc.models.push(this.parseModel(i[o]))}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseDataCollections=function(t,e){try{for(var i=c.L.getElementsByTagName(t,"model",l.v._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)this.parseDataCollection(i[o],e)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseModel=function(t,e){try{var i=this.parseInstances(t),o=this.parseBinds(t),s=this.parseSubmissions(t,e),r=this.parseWorkflows(t,e);return new WebSquare.Model(t,i,o,s,r)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseDataCollection=function(t,e){try{var i=c.L.getElementsByTagName(t,"dataCollection",l.v._XML_NAMESPACE.W2)[0];if(i){this.parseDataCollectionAttribute(i);for(var o=c.L.getElementsByTagName(i,"dataMap",l.v._XML_NAMESPACE.W2),s=0;s<o.length;s++){var r=o[s];new WebSquare.DataCollection.dataMap(null,null,r,"dataMap",e)}var a=c.L.getElementsByTagName(i,"dataList",l.v._XML_NAMESPACE.W2);for(s=0;s<a.length;s++){var n=a[s];new WebSquare.DataCollection.dataList(null,null,n,"dataList",e)}var d=c.L.getElementsByTagName(i,"linkedDataList",l.v._XML_NAMESPACE.W2);for(s=0;s<d.length;s++){var u=d[s];new WebSquare.DataCollection.linkedDataList(null,null,u,"linkedDataList",e)}var p=c.L.getElementsByTagName(i,"aliasDataList",l.v._XML_NAMESPACE.W2);for(s=0;s<p.length;s++){var g=p[s];new WebSquare.DataCollection.aliasDataList(null,null,g,"aliasDataList",e)}var m=c.L.getElementsByTagName(i,"aliasDataMap",l.v._XML_NAMESPACE.W2);for(s=0;s<m.length;s++){var f=m[s];new WebSquare.DataCollection.aliasDataMap(null,null,f,"aliasDataMap",e)}var b=c.L.getElementsByTagName(i,"aliasLinkedDataList",l.v._XML_NAMESPACE.W2);for(s=0;s<b.length;s++){var y=b[s];new WebSquare.DataCollection.aliasLinkedDataList(null,null,y,"aliasLinkedDataList",e)}}}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseDataCollectionAttribute=function(t){try{if(WebSquare.DataCollection.options.useConfig){var e=l.v.getConfig("dataCollection");WebSquare.DataCollection.options=a.x.extendKeepingType(WebSquare.DataCollection.options,e)}for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];WebSquare.nodeValueDeprecated?WebSquare.DataCollection.api.setOption(o.name,o.value):WebSquare.DataCollection.api.setOption(o.nodeName,o.nodeValue)}}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseInstances=function(t){try{for(var e=c.L.getElementsByTagName(t,"instance",l.v._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;o++)i.push(this.parseInstance(e[o]));return i}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseInstance=function(t,e){try{if(!t)return;if("string"==typeof t){var i='<xf:model xmlns:xf="'+l.v._XML_NAMESPACE.XFORMS+'" xmlns:w2="'+l.v._XML_NAMESPACE.W2+'" xmlns:ev="'+l.v._XML_NAMESPACE.EVENTS+'">',o=c.L.parse(i+t+"</xf:model>",l.v._XML_NAMESPACE.XFORMS);this.preParse(o,!1),t=o.documentElement.firstChild}var s=t.attributes.getNamedItem("src"),r=null;if(e&&t.setAttribute("scope_id",e),null!=s);else{for(var a=null,n=t.firstChild;null!=n;n=n.nextSibling)1==n.nodeType&&(a=n);if(null==a)r=new WebSquare.Model.Instance(t,null,null);else{var d=[];for(n=a.firstChild;null!=n;n=n.nextSibling)if(null!=n.namespaceURI&&""!=n.namespaceURI){d.push("xmlns:"+n.prefix),d.push(n.namespaceURI);break}null!=d[0]&&"xmlns:xml"!=d[0]&&(a.attributes.getNamedItem(d[0])||a.setAttribute(d[0],d[1])),r=new WebSquare.Model.Instance(t,a,null)}}return r}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseBinds=function(t){try{for(var e=c.L.getElementsByTagName(t,"bind",l.v._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;++o)i.push(this.parseBind(e[o]))
;return i}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseBind=function(t){try{var e=t.attributes.getNamedItem("id"),i=t.attributes.getNamedItem("nodeset");return new WebSquare.Model.Bind(t,"nodeset",i.value,null,e.value)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseSubmissions=function(t,e){try{for(var i=c.L.getElementsByTagName(t,"submission",l.v._XML_NAMESPACE.XFORMS),o=[],s=0;s<i.length;s++)o.push(this.parseSubmission(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseSubmission=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"method","")||l.v.getConfiguration("/WebSquare/submission/method/@value")||"POST",r=WebSquare.WebSquareparser.getAttribute(t,"action","")||l.v.getConfiguration("/WebSquare/submission/action/@value"),a=WebSquare.WebSquareparser.getAttribute(t,"mode","")||l.v.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",n=WebSquare.WebSquareparser.getAttribute(t,"mediatype","")||l.v.getConfiguration("/WebSquare/submission/mediatype/@value"),d=WebSquare.WebSquareparser.getAttribute(t,"accept","")||l.v.getConfiguration("/WebSquare/submission/accept/@value"),c=WebSquare.WebSquareparser.getAttribute(t,"encoding","")||l.v.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",u=WebSquare.WebSquareparser.getAttribute(t,"ref"),p=WebSquare.WebSquareparser.getAttribute(t,"target"),g=WebSquare.WebSquareparser.getAttribute(t,"replace"),m=WebSquare.WebSquareparser.getAttribute(t,"instance"),f=WebSquare.WebSquareparser.getAttribute(t,"preSubmitFunction","")||l.v.getConfiguration("/WebSquare/submission/preSubmitFunction/@value")||"",y=WebSquare.WebSquareparser.getAttribute(t,"customHandler"),v=WebSquare.WebSquareparser.getAttribute(t,"errorHandler");""==v&&(v=l.v.getConfiguration("/WebSquare/submission/errorHandler/@value"));var w=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==w&&(w=l.v.getConfiguration("/WebSquare/submission/processMsg/@value"));var S="true"===this.getAttribute(t,"abortTrigger")||"false"!==this.getAttribute(t,"abortTrigger")&&"true"===l.v.getConfiguration("/WebSquare/submission/abortTrigger/@value"),C=WebSquare.WebSquareparser.getAttribute(t,"soapaction",""),_="true"===WebSquare.WebSquareparser.getAttribute(t,"useModal");""==n&&("post"!=s&&"POST"!=s||(n="application/xml"));var x=this.parseEvent(t,i)||[],I=this.getAttribute(t,"timeout","")||l.v.getConfiguration("/WebSquare/submission/timeout/@value"),T=this.getAttribute(t,"singleMode")||!1,k="false"!==this.getAttribute(t,"hideProcessMsg")&&("true"===this.getAttribute(t,"hideProcessMsg")||"false"!==l.v.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),D="true"===this.getAttribute(t,"withCredentials"),L=WebSquare.WebSquareparser.getAttribute(t,"webtopRef",""),W=WebSquare.WebSquareparser.getAttribute(t,"userData1",""),A=WebSquare.WebSquareparser.getAttribute(t,"userData2",""),M=o,E=null,q="";i&&i.options&&i.options.scope&&(o=(q=i.id+"_")+M,E=i.id);var R=WebSquare.WebSquareparser.getAttribute(t,"ev:submit"),N=WebSquare.WebSquareparser.getAttribute(t,"ev:submitdone"),F=WebSquare.WebSquareparser.getAttribute(t,"ev:submiterror"),O=WebSquare.WebSquareparser.getAttribute(t,"ev:submittimeout"),B={};R&&(x.push(new b.XmlEvent("xforms-submit","script",{handler:q+R})),B.submitHandler=R),N&&(x.push(new b.XmlEvent("xforms-submit-done","script",{handler:q+N})),B.submitDoneHandler=N),F&&(x.push(new b.XmlEvent("xforms-submit-error","script",{handler:q+F})),B.submitErrorHandler=F),O&&(x.push(new b.XmlEvent("xforms-submit-timeout","script",{handler:q+O})),B.submitTimeoutHandler=O),B.parentElement=e,B.element=t,B.id=o,B.org_id=M,B.method=s,B.action=r,B.mode=a,B.bind=null,B.mediatype=n,B.accept=d,B.encoding=c,B.ref=u,B.target=p,B.replace=g,B.instance=m,B.customHandler=y,B.errorHandler=v,B.soapaction=C,B.processMsg=w,B.xmlEvents=x,B.timeout=I,B.singleMode=T,B.hideProcessMsg=k,
B.abortTrigger=S,B.preSubmitFunction=f,B.scope_id=E,B.withCredentials=D,B.useModal=_,B.webtopRef=L,B.userData1=W,B.userData2=A,B.msaName=WebSquare.WebSquareparser.getAttribute(t,"msaName");var V=new WebSquare.Model.Submission(B);return i&&i.options&&i.options.scope&&(i.scope[M]=V),l.v.useSubmissionGlobal&&(window[V.id]=V),V}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseScript=async function(t,e,i,o){try{if(!o)if(e?e.options&&e.options.strictFrame?WebSquare.scriptSection="":e.frameDoc&&(e.frameDoc.scriptSection=""):WebSquare.scriptSection="",e){if(e.options&&e.options.initScript){var s=e.options.initScript.toString();e.options.strictFrame?WebSquare.scriptSection+=s:"executed"===WebSquare.scriptSectionExcuteFlag&&(e.frameDoc.scriptSection+=s)}}else"true"==l.v.getConfiguration("/WebSquare/initScript/@value")&&WebSquare.w2xPath!==WebSquare.net.getBlankXML()&&(WebSquare.scriptSection+=l.v.getConfiguration("/WebSquare/initScript"));var r=e&&e.options.src?e.getSrc():WebSquare.w2xPath,a=c.L.getElementsByTagName(t,"head",l.v._XML_NAMESPACE.XHTML);if(1!=a.length)return alert(WebSquare.language.getMessage("E_Parser_MoreThanOneHeadError",a.length)),!1;e&&e._isUDC2;for(var n=a[0].firstChild;null!=n;n=n.nextSibling)if(1==n.nodeType&&c.L.matchNode(n,"script",l.v._XML_NAMESPACE.XHTML)){var d=n.getAttribute("src"),u=g.D.getBoolean(n.getAttribute("scopeExternal"))||e&&e.options.scopeExternal,p=n.getAttribute("scopeVariable")||"";if(null!=d&&""!=d){var m=n.getAttribute("cache"),f=n.getAttribute("defer"),b=n.getAttribute(n,"msaName");await WebSquare.Parser.parseExternalScript({uri:d,cache:m,lazy:f,frameObj:e,pageInherit:i,scopeExternal:u,scopeVariable:p,msaName:b})}else{if(o)continue;var y=n.getAttribute("loadAt"),v=-1;if("string"==typeof y&&""!=y)switch(y=y.wq_trim().toUpperCase()){case"WEBSQUARE_START":case"START":v=1;break;case"ENGINE_LOAD":case"ENGINE":v=2;break;case"RESOURCE_LOAD":case"RESOURCE":v=3;break;case"CREATE_COMPONENT":case"CREATE":v=4;break;case"RENDER_DOM":case"RENDER":v=5;break;case"ADJUST_COMPONENT":case"ADJUST":v=6;break;case"BIND_EVENT":case"EVENT":v=7;break;case"EXECUTE_SCRIPT":case"EXECUTE":default:v=8}if(v=3,"executed"===WebSquare.scriptSectionExcuteFlag){var w=l.v.scriptPrecedence;if(l.v.scriptPrecedence=g.D.getBoolean(l.v.getConfiguration("/WebSquare/scriptPrecedence/@value")),w!==l.v.scriptPrecedence){var S=e&&e.options?e.getSrc():WebSquare.w2xPath;WebSquare.logger.printLog('parser : "scriptPrecedence" turned on. ['+S+"]")}}for(var C=v>2&&v<8,_=n.firstChild;null!=_;_=_.nextSibling)if(4==_.nodeType||3==_.nodeType){var x=_.nodeValue;e?(e.options&&e.options.initScript&&"executed"!==WebSquare.scriptSectionExcuteFlag&&!e.options.strictFrame&&(C?e.frameDoc.scriptSection+=e.options.initScript:x=e.options.initScript+x),!0!==l.v.scriptPrecedence&&e.options&&e.options.postScript&&!C&&!e.options.strictFrame&&(x+=e.options.postScript),x=e.options&&e.options.scope?g.D.scopingFuncBody(x,e.id,!0):g.D.scopingFuncBody(x,null,!0),C?(null==WebSquare.executePointScriptArr[v]&&(WebSquare.executePointScriptArr[v]=[]),WebSquare.executePointScriptArr[v].push({script:x,path:r,scope:e&&e.id}),!0===l.v.scriptPrecedence||e.options.strictFrame||(e.frameDoc.scriptSection+=e.options.postScript)):e.options&&e.options.strictFrame?WebSquare.scriptSection+=x:(e.frameDoc.scriptSection+=x,e._scriptLazy=!0)):(x=g.D.scopingFuncBody(x,null,!0),v>2&&v<8?(null==WebSquare.executePointScriptArr[v]&&(WebSquare.executePointScriptArr[v]=[]),WebSquare.executePointScriptArr[v].push({script:x,path:r,scope:e&&e.id})):WebSquare.scriptSection+=x)}}}else if(1==n.nodeType&&c.L.matchNode(n,"env",l.v._XML_NAMESPACE.XHTML))for(_=n.firstChild;null!=_;_=_.nextSibling)if(4==_.nodeType||3==_.nodeType){"string"==typeof(x=_.nodeValue)&&(x=JSON.parse(x));var I=WebSquare.WebSquareparser.getAttribute(n,"variable")||"env";for(var T in e.scope)e.scope[T][I]=x}o||l.v.executePointScript(3)}catch(t){h.w.printStackTrace(t)}return!0},
w.WebSquareParser.prototype.parseBody=function(t){try{var e=c.L.getElementsByTagName(t,"body",l.v._XML_NAMESPACE.XHTML);if(1==e.length){var i=e[0].getAttribute("style");null!=i&&(a.x.WebSquaredoc.bodyStyle=i.value),a.x.WebSquaredoc.body=e[0]}else alert(WebSquare.language.getMessage("E_Parser_MoreThanOneBodyError",e.length))}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseActions=function(t){},w.WebSquareParser.prototype.findBindElement=function(t){try{return null==t.attributes?null:null!=t.attributes.getNamedItem("bind")?WebSquare.ModelUtil.getBind(t.attributes.getNamedItem("bind").value):null}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseLabel=function(t){t instanceof f.D&&(t=t._element);var e=c.L.getElementsByTagName(t,"label",l.v._XML_NAMESPACE.XFORMS);if(null==e[0])return null;var i=e[0],o=this.findBindElement(i),s="",r=i.firstChild;if(i.childNodes.length>1)for(var a=0;a<i.childNodes.length;a++)if(""!=i.childNodes[a].nodeValue.wq_trim()){r=i.childNodes[a];break}s=void 0!==r&&null!=r?r.nodeValue:"";var n={};return n.value=null!=o?WebSquare.ModelUtil.getInstanceValue(o.xpath):s,n},w.WebSquareParser.prototype.parseChoices=function(t,e){var i=[];if(e=e||"xf",t){t instanceof f.D&&(t=t._element);try{var o=t.nodeName;o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s="xf"==e?l.v._XML_NAMESPACE.XFORMS:l.v._XML_NAMESPACE.W2,r=c.L.findNode(t,".//*['choices'=local-name()]['"+s+"'=namespace-uri()]");if(r){var a=c.L.findNodes(r,".//*['item'=local-name()]['"+s+"'=namespace-uri()]");if(a)for(var n=0;n<a.length;++n){var h=a[n],d="",u=c.L.findNode(h,"./*['label'=local-name()]['"+s+"'=namespace-uri()]");u&&(d=c.L.getValue(u,"text()"));var p="",g=c.L.findNode(h,"./*['value'=local-name()]['"+s+"'=namespace-uri()]");g&&(p=c.L.getValue(g,"text()")),i.push({label:d,value:p})}}}return i},w.WebSquareParser.prototype.parseItemset=function(t,e){var i={nodeset:"",label:"",value:""};try{if(t){t instanceof f.D&&(t=t._element),e=e||"xf";try{var o=t.nodeName;o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s,r="xf"==e?l.v._XML_NAMESPACE.XFORMS:l.v._XML_NAMESPACE.W2,a=c.L.findNode(t,"*['choices'=local-name()]['"+r+"'=namespace-uri()]");if(a){if(s=c.L.findNode(a,"*['itemset'=local-name()]['"+r+"'=namespace-uri()]")){var n=c.L.getValue(s,"@nodeset"),d=c.L.findNode(s,"*['label'=local-name()]['"+r+"'=namespace-uri()]"),u=c.L.findNode(s,"*['value'=local-name()]['"+r+"'=namespace-uri()]"),p=c.L.getValue(d,"@ref"),g=c.L.getValue(u,"@ref");i.nodeset=n,i.label=p,i.value=g}}else if(s=c.L.findNode(t,"*['itemset'=local-name()]['"+r+"'=namespace-uri()]")){n=c.L.getValue(s,"@nodeset"),d=c.L.findNode(s,"*['label'=local-name()]['"+r+"'=namespace-uri()]"),u=c.L.findNode(s,"*['value'=local-name()]['"+r+"'=namespace-uri()]"),p=c.L.getValue(d,"@ref"),g=c.L.getValue(u,"@ref");i.nodeset=n,i.label=p,i.value=g}}}catch(t){h.w.printStackTrace(t)}return i},w.WebSquareParser.prototype.parseAttribute=function(t){try{return WebSquare.Parser.parseAttribute(t)}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseEventAttributes=function(t){for(var e={},i=t.attributes,o=0;o<i.length;o++)if(c.L.matchNode(i[o],"event",l.v._XML_NAMESPACE.EVENTS)){var s=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue;(r=s.indexOf("("))>-1&&(s=s.substring(0,r)),e.eventName=s.toLowerCase()}else{var r;(r=i[o].nodeName.indexOf(":"))>-1?e[i[o].nodeName.substring(r+1)]=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue:e[i[o].nodeName]=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue}for(var a=t.firstChild;null!=a;a=a.nextSibling)if(4==a.nodeType||3==a.nodeType){e._text=a.nodeValue;break}return e},w.WebSquareParser.prototype.getAttribute=function(t,e,i){var o=t.getAttribute(e);return null==o||""==o?void 0!==i?i:"":o},w.WebSquareParser.prototype.attributesItem=function(t){this.name=t.name,this.ref=t.ref,this.value=t.value},w.WebSquareParser.prototype.attributesItem.prototype.setValue=function(t){this.value=t},
w.WebSquareParser.prototype.attributesItem.prototype.getValue=function(){return this.value},w.WebSquareParser.prototype.parseWorkflows=function(t,e){try{for(var i=c.L.getElementsByTagName(t,"workflow",l.v._XML_NAMESPACE.W2),o=[],s=0;s<i.length;s++)o.push(this.parseWorkflow(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseWorkflow=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"resolveCallback",""),r=WebSquare.WebSquareparser.getAttribute(t,"rejectCallback",""),a=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==a&&(a=l.v.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var n=c.L.getElementsByTagName(t,"step",l.v._XML_NAMESPACE.W2),d=[],u=0;u<n.length;u++){for(var p=n[u],g={},m=0;m<p.attributes.length;m++)WebSquare.nodeValueDeprecated?g[p.attributes[m].name]=p.attributes[m].value:g[p.attributes[m].nodeName]=p.attributes[m].nodeValue;d.push(g)}var f=o,b=null;i&&i.options&&i.options.scope&&(o=i.id+"_"+f,b=i.id);var y=new WebSquare.Model.Workflow(e,t,o,s,r,a,d,b);return i&&i.options&&i.options.scope&&(i.scope[f]=y),l.v.useWorkflowGlobal&&(window[y.id]=y),y}catch(t){h.w.printStackTrace(t)}},w.WebSquareParser.prototype.parseUDC2=async function(t,e){try{for(var i=c.L.getElementsByTagName(t,"head")[0],o=c.L.getElementsByTagName(i,"require",l.v._XML_NAMESPACE.W2),s=0;s<o.length;s++){var r=o[s],a=r.getAttribute("as")||r.getAttribute("componentName");if(a&&"page"===r.getAttribute("type")&&null==l.v.udcObj[a]){var n=r.getAttribute("src"),d={msaName:r.getAttribute("msaName"),frameObj:e},u=l.v._getMsaSrc(n,d);u=l.v.getPageURL(u,{skipURL:!0,skipUri:!0}),l.v.udcObj[a]=await c.L.load(u),l.v.udcMsa[a]=d.msaName}}}catch(t){h.w.printStackTrace(t)}},w.parseExternalScript=async function(t){try{var e=t.uri;if(!e)return;var i=t.cache,o=t.frameObj,s=t.pageInherit,r=t.lazy,a=!1;null!=i&&""!==i||(i=l.v.getConfiguration("/WebSquare/spa/scriptCache/@value")),t.scopeVariable&&o&&o.options.scope&&(o.scope[t.scopeVariable]={},i="false");var d={frameObj:o,msaName:t.msaName},c=WebSquare.core._getMsaSrc(e,d),u=c;if(t.scopeExternal&&(u+="_scope_"+o.id),null==i||"false"!=i.toLowerCase()?(void 0!==WebSquare.scriptCachedList[u]&&null!==WebSquare.scriptCachedList[u]||("false"===l.v.getConfiguration("/WebSquare/spa/scriptCache/@value")?WebSquare.scriptCachedList[u]=0:WebSquare.scriptCachedList[u]=1),WebSquare.scriptCachedList[u]>1?(a=!0,WebSquare.scriptCachedList[u]++):"true"==i.toLowerCase()&&WebSquare.scriptCachedList[u]++):WebSquare.scriptCachedList[u]=0,!a)if(o)if(t.scopeExternal)try{var p=await l.v.loadAsync(c);p&&(p=o.options.scope?g.D.scopingFuncBody(p,o.id,!0):g.D.scopingFuncBody(p,null,!0),n.d.globalEval(p))}catch(t){h.w.printStackTrace(t)}else"defer"==r?"executed"==WebSquare.scriptSectionExcuteFlag?o.lazyImportsArr.push(c):WebSquare.lazyImportsArr.push(c):s?WebSquare.pageInheritScriptArr.push(c):WebSquare.externalScriptArr.push(c);else"defer"==r?WebSquare.lazyImportsArr.push(c):s?WebSquare.pageInheritScriptArr.push(c):WebSquare.externalScriptArr.push(c)}catch(t){h.w.printStackTrace(t)}},w.parseAttribute=function(t){try{var e,i={};e=t instanceof f.D?t._element:t;var o,s=!1;if(e.T===f.D.type.element&&(s=!0),o=null==e.A?s||e.nodeType!==f.D.type.document?e.attributes:e.documentElement.attributes:s||e.nodeType!==f.D.type.document?e.A:e.documentElement.attributes,s){for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];"class"===r?i.className=a:"string"==typeof a&&""===a.wq_trim()||(i[r]=a)}}else for(var n=0,l=o.length;n<l;n++){var d=o[n],c=d.name;a=d.value;"class"==c?i.className=a:"string"==typeof a&&""===a.wq_trim()||(i[c]=a)}return i}catch(t){h.w.printStackTrace(t)}},w.parseEvent=function(t,e){try{var i,o=[];if(t instanceof f.D?(i=t._elementType,t=t._element):i=l.v.isXML(t)?"xml":"json","json"===i){o=[];var s=m.h.getAttribute(t,"id"),r=t.N,a=null;null==s||""==s?(a="",s=""):(a=s,s+=".")
;for(var n=m.h.getChildNodes(t),d=0;d<n.length;d++){var u=n[d],p="";if("script"===u.N){var y={};if(!(p=(x=u.A)["ev:event"]))continue;var v=x.disabled,w=0,S=f.D.api.getCDataNodeValue(u),C="( e )";(D=p.indexOf("("))>-1&&(C=p.substring(D),p=p.substring(0,D)),"function"==typeof S?(y.handler=S,y.scope=e&&e.id,y._old=!0):(S=e&&e.options.scope?g.D.scopingFuncBody(S,e.id,!0):g.D.scopingFuncBody(S,null,!0),y.handler="function"+C+'{ try {["'+s+p.toLowerCase()+'"]; function '+a+"_"+w+++"() {}; "+S+' } catch(eee) {eee.componentID =  "'+a+'"; eee.eventName = "'+p.toLowerCase()+'"; eee.componentName = "'+r+'"; exception.printStackTrace(eee);} }'),o.push(new b.XmlEvent(p.toLowerCase(),"script",y,v))}}}else{s=t.getAttribute("id"),r=t.nodeName,a=null;null==s||""==s?(a="",s=""):(a=s,s+=".");for(u=t.firstChild;null!=u;u=u.nextSibling){p="";var _=c.L.nodeInfoObj(u).nodeName;if(1==u.nodeType&&"script"==_){y={};for(var x=u.attributes,I=0;I<x.length;I++){var T=x[I];if(c.L.matchNode(T,"event",l.v._XML_NAMESPACE.EVENTS)){p=WebSquare.nodeValueDeprecated?T.value:T.nodeValue;break}}v=u.getAttribute("disabled"),w=0;for(var k=u.firstChild;null!=k;k=k.nextSibling)if(4==k.nodeType){var D;C="( e )";(D=p.indexOf("("))>-1&&(C=p.substring(D),p=p.substring(0,D)),"function"==typeof(S=k.nodeValue)?(y.handler=S,y.scope=e&&e.id):(S=e&&e.options.scope?g.D.scopingFuncBody(S,e.id,!0):g.D.scopingFuncBody(S,null,!0),y.handler="function"+C+'{ try {["'+s+p.toLowerCase()+'"]; function '+a+"_"+w+++"() {}; "+S+' } catch(eee) {eee.componentID =  "'+a+'"; eee.eventName = "'+p.toLowerCase()+'"; eee.componentName = "'+r+'"; exception.printStackTrace(eee);} }'),o.push(new b.XmlEvent(p.toLowerCase(),"script",y,v));break}}}}return 0==o.length?null:o}catch(t){h.w.printStackTrace(t)}},w.parseAttributesNode=function(t){try{var e;t instanceof f.D?(e=t._elementType,t=t._element):e=l.v.isXML(t)?"xml":"json";var i=null,o=[];if("json"===e){for(var s=m.h.getChildNodes(t),r=0;r<s.length;r++)if("w2:attributes"===s[r].N){i=s[r];break}if(i){var a=m.h.getChildNodes(i);for(r=0;r<a.length;r++)if(1===a[r].T){var n={name:d=m.h.dropNS(a[r].N),ref:m.h.getAttribute(a[r],"ref"),value:m.h.getTextNodeValue(a[r])};o.push(n),o[d]=n}}}else{for(r=0;r<t.childNodes.length;r++)if("w2:attributes"==t.childNodes[r].nodeName){i=t.childNodes[r];break}if(i)for(a=i.childNodes,r=0;r<a.length;r++)if(1===a[r].T){var d;n={name:d=c.L.getLocalName(a[r]),ref:a[r].getAttribute("ref"),value:c.L.getTextNodeValue(a[r])};o.push(n),o[d]=n}}return o}catch(t){h.w.printStackTrace(t)}};var S=function(t,e,i,o,s){try{this.xmlNode=t,this.instances=e,this.binds=i,this.submissions=o,this.element=t,this.workflows=s}catch(t){h.w.printStackTrace(t)}};S.prototype.rebuild=function(t,e){try{var i=WebSquare.ModelUtil.getInstanceByXPath(e);if(WebSquare.xml.hasChildElement(i.xmlNode))if("string"==typeof t){var o=WebSquare.xml.getFirstChildElement(i.xmlNode);""==(e=WebSquare.ModelUtil.filterInstanceFunction(e))&&(e=".");var s=(a=WebSquare.xml.createNode(o,e)).ownerDocument.createTextNode(t);WebSquare.xml.appendChild(a,s),WebSquare.WebSquaredoc.unrender(e,null,i.id)}else{var r=t.documentElement.nodeName;o=WebSquare.xml.getFirstChildElement(i.xmlNode);""==(e=WebSquare.ModelUtil.filterInstanceFunction(e))?e=".":r=e+"/"+r;for(var a,n=(a=WebSquare.xml.createNode(o,e)).firstChild;null!=n;n=n.nextSibling)if(n.nodeName==t.documentElement.nodeName){a.removeChild(n);break}WebSquare.xml.appendChild(a,t.documentElement),WebSquare.WebSquaredoc.unrender(r,null,i.id)}else alert(WebSquare.language.getMessage("E_Model_NoChildNodeOfInstance"))}catch(t){h.w.printStackTrace(t)}},S.prototype.refresh=function(t,e){try{for(var i=0;i<WebSquare.WebSquaredoc.boundElement.length;i++){var o=WebSquare.WebSquaredoc.boundElement[i].id,s=WebSquare.core.getComponentById(o);void 0!==s&&(void 0!==s.hasbeenrendered&&null!=s.hasbeenrendered&&0==s.hasbeenrendered&&(!s.modelControl.useRef&&s.modelControl.ref,s.hasbeenrendered=!0,s.refresh()))}
for(var r in WebSquare.WebSquaredoc.itemsetElement){var a=WebSquare.WebSquaredoc.itemsetElement[r].id,n=WebSquare.core.getComponentById(a);if(void 0!==n&&(void 0!==n.itemsetrendered&&null!=n.itemsetrendered&&0==n.itemsetrendered)){!n.modelControl.useRef&&n.modelControl.ref;var l=!0;if(e&&n.modelControl.useItemset){var d=n.modelControl.itemsetObj.nodeset;e!==d&&!1===WebSquare.ModelUtil.isPartialMatchedXPath(e,d)&&(l=!1)}!0===l&&(n.itemsetrendered=!0,n.refreshItemset(t))}}for(var c in WebSquare.WebSquaredoc.refElement){var u=WebSquare.WebSquaredoc.refElement[c].id,p=WebSquare.core.getComponentById(u);void 0!==p&&(void 0!==p.hasbeenrendered&&null!=p.hasbeenrendered&&0==p.hasbeenrendered&&(!p.modelControl.useRef&&p.modelControl.ref,p.hasbeenrendered=!0,p.refresh()))}}catch(t){h.w.printStackTrace(t)}},S.Instance=function(t,e,i){try{this.xmlNode=t,this.document=e,this.source=i,this.id=t.getAttribute("id"),this.scope_id=t.getAttribute("scope_id")}catch(t){h.w.printStackTrace(t)}},S.Bind=function(t,e,i,o,s){try{this.xmlNode=t,this.type=e,this.xpath=i,this.properties=null!=o?o:{},this.id=s}catch(t){h.w.printStackTrace(t)}},S.Submission=function(t){try{this.xmlNode=t.element,this._pluginName="submission",this.parentElement=t.parentElement,this.id=t.id,this.org_id=t.org_id,this.bind=t.bind,this.action=t.action,this.mode=t.mode,this.method=t.method,this.mediatype=t.mediatype,this.accept=t.accept,this.encoding=t.encoding,this.ref=t.ref,this.target=t.target,this.replace=t.replace,this.instance=t.instance,this.customHandler=t.customHandler,this.errorHandler=t.errorHandler,this.processMsg=t.processMsg,this.soapaction=t.soapaction,this.startTime=null,this.endTime=null,this.processStatus=0,this.singleMode=t.singleMode,this.hideProcessMsg=t.hideProcessMsg,this.abortTrigger=t.abortTrigger,this.scope_id=t.scope_id,this.withCredentials=t.withCredentials,this.useModal=t.useModal,this.preSubmitFunction=t.preSubmitFunction,this.linkedObj=[],this.requestHeader={},this.webtopRef=t.webtopRef,this.userData1=t.userData1,this.userData2=t.userData2,this.msaName=t.msaName,t.submitHandler&&(this.submitHandler=t.submitHandler),t.submitDoneHandler&&(this.submitDoneHandler=t.submitDoneHandler),t.submitErrorHandler&&(this.submitErrorHandler=t.submitErrorHandler),t.submitTimeoutHandler&&(this.submitTimeoutHandler=t.submitTimeoutHandler),null!=t.xmlEvents&&t.xmlEvents.length>0&&WebSquare.event.addUserEvents(this,t.xmlEvents),this.timeout=t.timeout,this.setRequestData=function(t){this.requestData=t},this.setRequestHeader=function(t){this.requestHeader=t},this.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return h.w.printStackTrace(t,null,this),null}},this.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return h.w.printStackTrace(t,null,this),window}},this._getMsaOption=function(){return{frameObj:this.getScope(),msaName:this.msaName}},WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===this.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync",this.id))}catch(t){h.w.printStackTrace(t)}},S.Workflow=function(t,e,i,o,s,r,a,n){try{this.xmlNode=e,this.parentElement=t,this.id=i,this.scope_id=n,this.resolveCallback=o||null,this.rejectCallback=s||null,this.processMsg=r,this.step=a,this.promiseStatus=null,this.promiseValue=null,this.conditionStatus=!0,this.reject=function(t){this.promiseStatus="REJECT",this.promiseValue=t||"REJECT"},this.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return h.w.printStackTrace(t,null,this),null}},this.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return h.w.printStackTrace(t,null,this),window}}}catch(t){h.w.printStackTrace(t)}};var C=__webpack_require__(9532),_={
DefaultXML2JSONString:function(t,e){var i=[];return WebSquare.xml.isDocumentString(t)&&(t=WebSquare.xml.parse(t)),WebSquare.xml.isDocument(t)&&WebSquare.json.XMLparseForJSON(t.documentElement,i,!1),i.join("")},XML2JSONString:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/xml2jsonFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.XML2JSONString=o),WebSquare.json.XML2JSONString?WebSquare.logger.printLog("XML2JSON conversion rule exists in config.xml. [/WebSquare/json/@xml2jsonFunction]"):WebSquare.json.XML2JSONString=WebSquare.json.DefaultXML2JSONString}else WebSquare.json.XML2JSONString=WebSquare.json.DefaultXML2JSONString;return WebSquare.json.XML2JSONString(t,e)},parseType:function(t){if(t&&t.childNodes&&t.childNodes.length>0){for(var e={},i=0,o=0;o<t.childNodes.length;o++)if(1==t.childNodes[o].nodeType){if(1==e[t.childNodes[o].nodeName])return"array";e[t.childNodes[o].nodeName]=!0,i++}return 0==i?"string":"object"}return"string"},XMLparseForJSON:function(t,e,i){var o=t.getAttribute("type");if(o||(o=WebSquare.json.parseType(t)),i&&(e.push('"'),e.push(t.nodeName),e.push('" : ')),"object"===o){var s=!0;e.push("{");for(var r=0;r<t.childNodes.length;r++)1==t.childNodes[r].nodeType&&(s?s=!1:e.push(", "),e.push(WebSquare.json.XMLparseForJSON(t.childNodes[r],e,!0)));e.push("}")}else if("array"===o){s=!0;e.push("[");for(r=0;r<t.childNodes.length;r++)1==t.childNodes[r].nodeType&&(s?s=!1:e.push(", "),e.push(WebSquare.json.XMLparseForJSON(t.childNodes[r],e,!1)));e.push("]")}else"number"===o?t.childNodes&&t.childNodes[0].nodeValue&&e.push(t.childNodes[0].nodeValue):"true"===o?e.push("true"):"false"===o?e.push("false"):"null"===o?e.push("null"):(e.push('"'),t.childNodes&&t.childNodes[0]&&e.push(WebSquare.xml.decode(t.childNodes[0].nodeValue).wq_replaceAll("\\","\\\\").wq_replaceAll('"','\\"').wq_replaceAll("\n","\\n")),e.push('"'))},DefaultJSON2XML:function(t,e){var i;i=t.constructor===String?JSON.parse(t):t;var o=[],s=-1;for(var r in i.constructor===Array?(s=1,o.push('<array type="array">')):"object"==typeof i&&(s=2,o.push('<object type="object">')),i)WebSquare.json._recursiveJSON2XML(o,i[r],r,s);i.constructor===Array?o.push("</array>"):"object"==typeof i&&o.push("</object>");var a=o.join("");return WebSquare.xml.parse(a)},DefaultJSON2XMLString:function(t,e){var i;i=t.constructor===String?JSON.parse(t):t;var o=[],s=-1;for(var r in i.constructor===Array?(s=1,o.push('<array type="array">')):"object"==typeof i&&(s=2,o.push('<object type="object">')),i)WebSquare.json._recursiveJSON2XML(o,i[r],r,s);return i.constructor===Array?o.push("</array>"):"object"==typeof i&&o.push("</object>"),o.join("")},JSON2XML:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/json2xmlFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.JSON2XML=o),WebSquare.json.JSON2XML?WebSquare.logger.printLog("JSON2XML conversion rule exists in config.xml. [/WebSquare/json/@json2xmlFunction]"):WebSquare.json.JSON2XML=WebSquare.json.DefaultJSON2XML}else WebSquare.json.JSON2XML=WebSquare.json.DefaultJSON2XML;return WebSquare.json.JSON2XML(t,e)},JSON2XMLString:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/json2xmlFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.JSON2XMLString=o),WebSquare.json.JSON2XMLString?WebSquare.logger.printLog("JSON2XMLString conversion rule exists in config.xml. [/WebSquare/json/@json2xmlFunction]"):WebSquare.json.JSON2XMLString=WebSquare.json.DefaultJSON2XMLString}else WebSquare.json.JSON2XMLString=WebSquare.json.DefaultJSON2XMLString;return WebSquare.json.JSON2XMLString(t,e)},JSONExtend:function(){for(var t={},e=0,i=arguments.length,o=function(e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(e[i])?t[i]=WebSquare.json.JSONExtend(t[i],e[i]):t[i]=e[i])};e<i;e++){
var s=arguments[e];o(s)}return t},_recursiveJSON2XML:function(t,e,i,o){var s='<object type="object">',r='<array type="array">',a="</object>",n="</array>";if(null==e)t.push("<"+i+' type="'+e+'"/>');else if("string"==typeof e)1==o?t.push("<value>"+WebSquare.xml.encode(e)+"</value>"):2==o&&t.push("<"+i+">"+WebSquare.xml.encode(e)+"</"+i+">");else if("number"==typeof e)1==o?t.push('<value type="number">'+e+"</value>"):2==o&&t.push("<"+i+' type="number">'+e+"</"+i+">");else if("boolean"==typeof e)1==o?t.push('<value type="'+e+'"/>'):2==o&&t.push("<"+i+' type="'+e+'"/>');else if(e.constructor===Array){for(var l in isNaN(parseInt(i))?(o=1,t.push("<"+i+' type="array">')):e.constructor!==Array&&"object"==typeof e?(o=2,t.push(s)):(o=1,t.push(r)),e)WebSquare.json._recursiveJSON2XML(t,e[l],l,o);isNaN(parseInt(i))?(o=1,t.push("</"+i+">")):e.constructor!==Array&&"object"==typeof e?t.push(a):t.push(n)}else if("object"==typeof e){for(var l in e.constructor===Array&&isNaN(parseInt(i))?(o=1,t.push("<"+i+' type="array">')):e.constructor===Array?(o=1,t.push(r)):isNaN(parseInt(i))?(o=2,t.push("<"+i+' type="object">')):(o=2,t.push(s)),e)WebSquare.json._recursiveJSON2XML(t,e[l],l,o);e.constructor===Array&&isNaN(parseInt(i))?t.push("</"+i+">"):e.constructor===Array?t.push(n):isNaN(parseInt(i))?t.push("</"+i+">"):t.push(a)}}},x={api:{},comp:{},attributeMapInfo:{},childToParentRelation:{},parentToChildRelation:{},childToParentRef:{},parentToChildRef:{},options:{useConfig:"true",baseNode:"map",attributeMap:""},activated:!1,stopBroadCast:!1,stopBroadCastComp:[]};x.stopBroadCastComp._wq_add=function(t){for(var e=!1,i=0;i<this.length;i++)if(this[i]===t){e=!0;break}e||this.push(t)},x.api.create=function(t,e){try{var i,o,s;if(void 0!==e&&null!=e||(e={}),"string"==typeof t){if(null==t.match("xmlns:w2=")&&(t=t.replace(">"," xmlns:w2='http://www.inswave.com/websquare'>")),!(t=c.L.parse(t,!0)))return;i=(t=t.documentElement).tagName.replace("w2:","")}else{var r=l.v.isXML(t);i=r?t.tagName.replace("w2:",""):t.type,t.elementType=r?"XML":"JSON"}if(e.scope_obj){var a=g.D.getComponentById(e.scope_obj);a&&(s=a.uuid)}switch(i){case"dataList":o=new x.dataList(null,null,t,i,s);break;case"dataMap":o=new x.dataMap(null,null,t,i,s);break;case"linkedDataList":o=new x.linkedDataList(null,null,t,i,s);break;case"aliasDataList":o=new x.aliasDataList(null,null,t,i,s);break;case"aliasDataMap":o=new x.aliasDataMap(null,null,t,i,s);break;case"aliasLinkedDataList":o=new x.aliasLinkedDataList(null,null,t,i,s)}if(o){x.api.addChild(o);var n=x.parentToChildRef[o.id];if(n)for(var d in n)if(n[d]){var u=g.D.getComponentById(d);u&&u.modelControl&&u.modelControl.dataCollectionBinding(u.options.ref)}}}catch(t){h.w.printStackTrace(t)}},x.api.createObjects=function(t){try{for(var e=0;e<t.length;e++)x.api.create(t[e])}catch(t){h.w.printStackTrace(t)}},x.api.remove=function(t,e){try{if(void 0!==e&&null!=e||(e={}),e.scope_obj){var i=g.D.getComponentById(e.scope_obj);if(!i)return void d.k.printLog("[$p.data.remove error] cannot find wframe["+i.id+"]");try{t=i.getObj(t).id}catch(e){return void d.k.printLog("[$p.data.remove error] cannot find ["+t+"] in wframe["+i.id+"]")}}var o;if(null==(o=e.uuid&&a.x.idCache[e.uuid]?a.x.idCache[e.uuid]:x.comp[t])){if(!(t.indexOf("??")>=0&&a.x.idCache[a.x.idToUUID[t]]))return;o=a.x.idCache[a.x.idToUUID[t]]}if("function"==typeof o.finalize)try{o.finalize()}catch(t){d.k.printLog("[ERROR] : dataCollection.api.remove - finalize : "+o.id)}if(o.scope_obj&&o.scope_obj.scope&&o.scope_obj.scope[o.org_id]&&delete o.scope_obj.scope[o.org_id],window[a.x.noConflict].comp[o.id]=null,window[a.x.noConflict].data[o.id]=null,delete window[a.x.noConflict].comp[o.id],delete window[a.x.noConflict].data[o.id],a.x.idToUUID[o.id]=null,delete a.x.idToUUID[o.id],a.x.idCache[o.uuid]=null,delete a.x.idCache[o.uuid],window[o.id]&&(window[o.id]=null),o.options){var s=o.getOption("pluginName");delete(a.x.componentsCache[s]||a.x.componentsCache[o._wTagName]||{})[o.uuid]}
for(var r in o.event&&o.event.clearCache(),o)try{"function"==typeof o[r]?o[r]=function(){}:delete o[r]}catch(t){delete o[r]}o._removed=!0,delete x.comp[t],delete x.parentToChildRelation[t],delete x.parentToChildRef[t]}catch(t){h.w.printStackTrace(t)}},x.api.addChild=function(t){try{x.comp[t.id]=t}catch(t){h.w.printStackTrace(t)}},x.api.addRelation=function(t,e){try{x.childToParentRelation[t]=e,x.parentToChildRelation[e]||(x.parentToChildRelation[e]={}),x.parentToChildRelation[e][t]||(x.parentToChildRelation[e][t]=!0,x.comp[e]&&x.comp[e]._addRelation(t))}catch(t){h.w.printStackTrace(t)}},x.api.addRefRelation=function(t,e){try{x.childToParentRef[t]=e,x.parentToChildRef[e]||(x.parentToChildRef[e]={}),x.parentToChildRef[e][t]||(x.parentToChildRef[e][t]=!0,x.comp[e]&&x.comp[e]._addRefRelation(t))}catch(t){h.w.printStackTrace(t)}},x.api.setRefValue=function(t,e,i){try{var o=x.api.getObj(t.dataComp);if(o)switch(o.initializeType){case"linkedDataList":case"dataList":"number"==typeof o.rowPosition&&o.setCellData(o.rowPosition,t.colID,e,i);break;case"dataMap":!o.firstSetting[t.key]&&o.options.firstSet&&""==o.get(t.key)&&o.setOriginal(t.key,o.get(t.key)),o.set(t.key,e)}}catch(t){h.w.printStackTrace(t)}},x.api.getRefValue=function(t){try{var e=x.api.getObj(t.dataComp);if(e)switch(e.initializeType){case"linkedDataList":case"dataList":return e.getCellData(e.rowPosition,t.colID);case"dataMap":return e.get(t.key)}}catch(t){h.w.printStackTrace(t)}},x.api.get=function(t,e,i){try{if(void 0!==i&&null!=i||(i={}),"string"==typeof e&&e){e=JSON.parse(e);for(var o=0;o<e.length;o++){var s=e[o];s.initializeType&&(e[o]=s.id)}}switch(t.toUpperCase()){case"JSON":return x.api._getJSON(e,i);case"ARRAY":return x.api._getARRAY(e,i);case"XML":return x.api._getXML(e,i)}}catch(t){h.w.printStackTrace(t)}},x.api._getJSON=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null,o={};if(t&&1==t.length&&e&&e.singleMode){var s=t[0],r={};if("string"==typeof s){if(null!=i)null!=(u=g.D.getComponentById(i).scope[s])&&(s=u.id);if(f=x.comp[s]){var n=f.getOption("JSONPath"),l=f.id;switch(null!=i&&(l=f.org_id||f.id),n=n?n+"."+l:l,f.initializeType){case"dataMap":r=f.getRefJSON(e);break;case"dataList":case"linkedDataList":r=f.getRefAllJSON(e);break;case"default":r=x.api.JSONPathEvaluator(r,n)}}}else{if(null!=i)null!=(u=g.D.getComponentById(i).scope[s.id])&&(s.id=u.id);if(f=x.comp[s.id]){var d=a.x.extend({},e);"object"==typeof s.includeColumns&&null!=s.includeColumns&&s.includeColumns.constructor===Array&&(d.includeColumns=s.includeColumns);n=f.getOption("JSONPath"),l=f.id;switch(null!=i&&(l=f.org_id||f.id),n=n?n+"."+(s.key||l):s.key||l,f.initializeType){case"dataMap":r=x.api._getMapByOption("JSON",s,d);break;case"dataList":case"linkedDataList":r=x.api._getListByOption("JSON",s,d);break;case"default":r=x.api.JSONPathEvaluator(r,n)}}}return r}if(t)for(var c=0;c<t.length;c++){r={};if("string"==typeof(s=t[c])){if(null!=i)null!=(u=g.D.getComponentById(i).scope[s])&&(s=u.id);if(f=x.comp[s]){n=f.getOption("JSONPath"),l=f.id;switch(null!=i&&(l=f.org_id||f.id),n=n?n+"."+l:l,r=x.api.JSONPathEvaluator(r,n),f.initializeType){case"dataMap":m.h.setJSONByPath(r,n,f.getRefJSON(e));break;case"dataList":case"linkedDataList":m.h.setJSONByPath(r,n,f.getRefAllJSON(e))}}}else if("object"==typeof s){var u;if(null!=i)null!=(u=g.D.getComponentById(i).scope[s.id])&&(s.id=u.id);if(f=x.comp[s.id]){d=a.x.extend({},e);"object"==typeof s.includeColumns&&null!=s.includeColumns&&s.includeColumns.constructor===Array&&(d.includeColumns=s.includeColumns);n=f.getOption("JSONPath"),l=f.id;switch(null!=i&&(l=f.org_id||f.id),n=n?n+"."+(s.key||l):s.key||l,r=x.api.JSONPathEvaluator(r,n),f.initializeType){case"dataMap":m.h.setJSONByPath(r,n,x.api._getMapByOption("JSON",s,d));break;case"dataList":case"linkedDataList":m.h.setJSONByPath(r,n,x.api._getListByOption("JSON",s,d))}}}o=_.JSONExtend(o,r)}else for(var p in x.comp){var f=x.comp[p];if(null!=i){if(!f.scope_obj)continue;if(f.scope_obj.id!==i)continue
}else if(!0===e.skipWFrame&&f.scope_obj&&a.x.idCache[f.scope_obj.uuid]===f.scope_obj)continue;n=f.getOption("JSONPath"),l=f.id;switch(null!=i&&(l=f.org_id||f.id),n=n?n+"."+l:l,o=x.api.JSONPathEvaluator(o,n),f.initializeType){case"dataMap":m.h.setJSONByPath(o,n,f.getRefJSON(e));break;case"dataList":case"linkedDataList":m.h.setJSONByPath(o,n,f.getRefAllJSON(e))}}return o}catch(t){h.w.printStackTrace(t)}},x.api._getARRAY=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null;if(t&&1==t.length&&e&&e.singleMode){var o=t[0],s=null;if("string"==typeof o){if(null!=i)null!=(d=g.D.getComponentById(i).scope[o])&&(o=d.id);s=x.comp[o]}else{if(null!=i)null!=(d=g.D.getComponentById(i).scope[o.id])&&(o.id=d.id);s=x.comp[o.id],"object"==typeof o.includeColumns&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(e.includeColumns=o.includeColumns)}if("dataMap"==s.initializeType)return s.getJSON(e);if("dataList"==s.initializeType||"linkedDataList"==s.initializeType)return s.getAllArray(e)}var r={};if(t)for(var n=0;n<t.length;n++){if("string"==typeof(o=t[n])){if(null!=i)null!=(d=g.D.getComponentById(i).scope[o])&&(o=d.id);if(s=x.comp[o]){var l=s.id;switch(null!=i&&(l=s.org_id||s.id),s.initializeType){case"dataMap":r[l]=s.getJSON(e);break;case"dataList":case"linkedDataList":r[l]=s.getAllArray(e)}}}else if("object"==typeof o){var d;if(null!=i)null!=(d=g.D.getComponentById(i).scope[o.id])&&(o.id=d.id);s=x.comp[o.id];var c,u=!1;if(s){o.key?"string"==typeof(c=o.key)&&c.indexOf(".")>=0&&(r=x.api.JSONPathEvaluator(r,c),u=!0):(c=s.id,null!=i&&(c=s.org_id||s.id));var p=a.x.extend({},e);switch("object"==typeof o.includeColumns&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(p.includeColumns=o.includeColumns),s.initializeType){case"dataMap":u?m.h.setJSONByPath(r,c,x.api._getMapByOption("ARRAY",o,p)):r[c]=x.api._getMapByOption("ARRAY",o,p);break;case"dataList":case"linkedDataList":u?m.h.setJSONByPath(r,c,x.api._getListByOption("ARRAY",o,p)):r[c]=x.api._getListByOption("ARRAY",o,p)}}}}else for(var f in x.comp){s=x.comp[f];if(null!=i){if(!s.scope_obj)continue;if(s.scope_obj.id!==i)continue}else if(!0===e.skipWFrame&&s.scope_obj&&a.x.idCache[s.scope_obj.uuid]===s.scope_obj)continue;switch(s.initializeType){case"dataMap":r[s.id]=s.getJSON(e);break;case"dataList":case"linkedDataList":r[s.id]=s.getAllArray(e)}}return r}catch(t){h.w.printStackTrace(t)}},x.api._getXML=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null;if(t&&1==t.length&&e&&e.singleMode){var o=t[0];if(null!=i)null!=(p=g.D.getComponentById(i).scope[o])&&(o=p.id);if("dataMap"==(y=x.comp[o]).initializeType)return y.getXML(e);if("dataList"==y.initializeType||"linkedDataList"==y.initializeType)return y.getAllXML(e)}var s=function(t){for(var e="",i=0;i<t.length;i++)e+="<"+t[i]+">";for(i=t.length-1;i>=0;i--)e+="</"+t[i]+">";return e}(x.options.baseNode.split("/")),r=c.L.parse(s),n=r.documentElement,l=g.D.getComponentById(x.options.attributeMap);if(l)for(var d=0;d<l.getCount();d++)n.setAttribute(l.getKey(d),l.get(d));if(t)for(d=0;d<t.length;d++){var u;if("string"==typeof(o=t[d])){if(null!=i)null!=(p=g.D.getComponentById(i).scope[o])&&(o=p.id);if(y=x.comp[o])switch(u=y.id,null!=i&&(u=y.org_id||y.id),y.initializeType){case"dataMap":b=y.getXML(e);break;case"dataList":case"linkedDataList":b=y.getAllXML(e)}}else if("object"==typeof o){var p;if(null!=i)null!=(p=g.D.getComponentById(i).scope[o.id])&&(o.id=p.id);if(y=x.comp[o.id]){o.key?u=o.key:(u=y.id,null!=i&&(u=y.org_id||y.id));var m=a.x.extend({},e);switch("object"==typeof o.includeColumns&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(m.includeColumns=o.includeColumns),y.initializeType){case"dataMap":b=x.api._getMapByOption("XML",o,m);break;case"dataList":case"linkedDataList":b=x.api._getListByOption("XML",o,m)}}}if(b=b.documentElement?b.documentElement:b,y&&y.getOption("keyNode"))w=(w=y.getOption("keyNode")).wq_replaceAll("${key}",u),b=x.api.makeKeyNodeChildXML(y,w,b,u)
;c.L.appendChild(n,b)}else for(var f in x.comp){var b,y,v=(y=x.comp[f]).id;if(null!=e.scope_obj){if(!y.scope_obj)continue;if(y.scope_obj.id!==i)continue;v=y.org_id||y.id}else if(!0===e.skipWFrame&&y.scope_obj&&a.x.idCache[y.scope_obj.uuid]===y.scope_obj)continue;switch(e.id=v,y.initializeType){case"dataMap":b=y.getXML(e);break;case"dataList":case"linkedDataList":b=y.getAllXML(e)}if(b=b.documentElement?b.documentElement:b,y.getOption("keyNode")){var w=y.getOption("keyNode"),S=y.id;null!=i&&(S=y.org_id||y.id),w=w.wq_replaceAll("${key}",S),b=x.api.makeKeyNodeChildXML(y,w,b)}c.L.appendChild(n,b)}return r}catch(t){h.w.printStackTrace(t)}},x.api._getListByOption=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o,s=i.scope_obj||null,r=x.comp[e.id];if(r){e.key?o=e.key:(o=r.id,null!=s&&(o=r.org_id||r.id));var a=e.action,n=e.matchedColumn,l=e.matchedData;if("JSON"==t)switch(a){case"all":return r.getRefAllJSON(i);case"modified":return r.getRefModifiedJSON(i);case"inserted":return r.getRefInsertedJSON(i);case"deleted":return r.getRefDeletedJSON(!1,i);case"updated":return r.getRefUpdatedJSON(i);case"matched":if(n&&l)return r.getMatchedJSON(n,l,i);case"unmatched":if(n&&l)return r.getUnmatchedJSON(n,l,i);default:return r.getRefAllJSON(i)}else if("ARRAY"==t)switch(a){case"all":return r.getAllArray(i);case"modified":return r.getModifiedArray(i);case"inserted":return r.getInsertedArray(i);case"deleted":return r.getDeletedArray(!1,i);case"updated":return r.getUpdatedArray(i);case"matched":if(n&&l)return r.getMatchedArray(n,l,i);case"unmatched":if(n&&l)return r.getUnmatchedArray(n,l,i);default:return r.getAllArray(i)}else if("XML"==t)switch(i.id=o,a){case"all":return r.getAllXML(i);case"modified":return r.getModifiedXML(i);case"inserted":return r.getInsertedXML(i);case"deleted":return r.getDeletedXML(!1,i);case"updated":return r.getUpdatedXML(i);case"matched":if(n&&l)return r.getMatchedXML(n,l,!1,!1,!1,i);case"unmatched":if(n&&l)return r.getUnmatchedXML(n,l,!1,!1,!1,i);default:return r.getAllXML(i)}}}catch(t){h.w.printStackTrace(t)}},x.api._getMapByOption=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o,s=i.scope_obj||null,r=x.comp[e.id];if(r){if(e.key?o=e.key:(o=r.id,null!=s&&(o=r.org_id||r.id)),"JSON"==t)return r.getRefJSON(i);if("ARRAY"==t)return r.getArray(i);if("XML"==t)return i.id=o,r.getXML(i)}}catch(t){h.w.printStackTrace(t)}},x.api._getArrayEvalString=function(){try{var t="{",e=[],i=0;for(var o in x.comp)e.push(o),"linkedDataList"===x.comp[o].initializeType&&i++;for(var s=0;s<e.length;s++){var r=x.comp[e[s]];switch(r.initializeType){case"dataMap":t+='"'+r.id+'":'+r._dataList.getAllArrayEvalString(),s<e.length-1-i&&(t+=",");break;case"dataList":t+='"'+r.id+'":'+r.getAllArrayEvalString(),s<e.length-1-i&&(t+=",")}}return t+="}"}catch(t){return h.w.printStackTrace(t),{}}},x.api.getOption=function(t){try{var e=t in x.options,i=x.options.attributeMap;if(e)return x.options[t];if(i){var o=g.D.getComponentById(i);if(o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},x.api.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e="");var i=t in x.options,o=x.options.attributeMap;if(i)x.options[t]="baseNode"==t?e||"map":e;else if(o){var s=g.D.getComponentById(o);s.hasKey(t)&&s.set(t,e)}}catch(t){h.w.printStackTrace(t)}},x.api.set=function(t,e,i,o){try{if(void 0!==o&&null!=o||(o={}),"string"==typeof i&&i){try{i=JSON.parse(i)}catch(t){i=new Function("return "+i)()}for(var s=0;s<i.length;s++){var r=i[s];r.initializeType&&(i[s]=r.id)}}switch(t.toUpperCase()){case"JSON":return x.api._setJSON(e,i,o);case"ARRAY":return x.api._setARRAY(e,i,o);case"XML":return x.api._setXML(e,i,o)}}catch(t){h.w.printStackTrace(t)}},x.api._setJSON=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o=i.scope_obj||null;if(e)for(var s=0;s<e.length;s++){var r=e[s];if("string"==typeof r){var a=r;if(null!=o)null!=(d=g.D.getComponentById(o).scope[r])&&(r=d.id,a=d.org_id||a);var n=x.comp[r],l=1==e.length&&i.singleMode?t:t[a]
;if(n)switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(l)}}else if("object"==typeof r){var d;if(null!=o)null!=(d=g.D.getComponentById(o).scope[r.id])&&(r.id=d.id);n=x.comp[r.id];r.key?a=r.key:(a=n.id,null!=o&&(a=n.org_id||n.id));t=t;if(1==e.length&&i.singleMode?l=t:a.indexOf(".")>-1?(l=m.h.getJSONByPath(t,a),"dataMap"===n.initializeType&&"object"==typeof l&&null!=l&&l.constructor===Array&&(l=l[0])):l=t[a],n){var c="append"===r.action;switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(l,c,r.includeColumns)}}}}else for(var u in t){var p=u;if(null!=o&&(p=o+"_"+u),n=x.comp[p])switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(t[u])}}}catch(t){h.w.printStackTrace(t)}},x.api._setARRAY=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o=i.scope_obj||null;if(e)for(var s=0;s<e.length;s++){var r=e[s];if("string"==typeof r){var a=r;if(null!=o)null!=(d=g.D.getComponentById(o).scope[r])&&(r=d.id,a=d.org_id||a);var n=x.comp[r],l=1==e.length&&i.singleMode?t:t[a];if(n)switch(n.initializeType){case"dataMap":case"dataList":n.setArray(l)}}else if("object"==typeof r){var d;if(null!=o)null!=(d=g.D.getComponentById(o).scope[r.id])&&(r.id=d.id);n=x.comp[r.id];r.key?a=r.key:(a=n.id,null!=o&&(a=n.org_id||n.id));l=1==e.length&&i.singleMode?t:t[a];if(n){var c="append"===r.action;switch(n.initializeType){case"dataMap":case"dataList":n.setArray(l,c,r.includeColumns)}}}}else for(var u in t){var p=u;if(null!=o&&(p=o+"_"+u),n=x.comp[p])switch(n.initializeType){case"dataMap":case"dataList":n.setArray(t[u])}}}catch(t){h.w.printStackTrace(t)}},x.api._setXML=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o=i.scope_obj||null;function h(t){return"string"==typeof t?t:t.id}if(t=t.documentElement?t.documentElement:t,e&&1==e.length&&"vector"==t.nodeName){var s=h(e[0]);if(null!=o)null!=(p=g.D.getComponentById(o).scope[s])&&(s=p.id);return void((l=x.comp[s])&&l.setXML(t))}if(e&&1==e.length&&"hastable"==t.nodeName&&!t.getAttribute("hashKey")){s=h(e[0]);if(null!=o)null!=(p=g.D.getComponentById(o).scope[s])&&(s=p.id);return void((l=x.comp[s])&&l.setXML(t))}if(e&&1==e.length&&i.singleMode){s=h(e[0]);if(null!=o)null!=(p=g.D.getComponentById(o).scope[s])&&(s=p.id);return void((l=x.comp[s])&&l.setXML(t))}if(!e)for(var r in e=[],x.comp){if(null!=i.scope_obj){if(!(l=x.comp[r]).scope_obj)continue;if(l.scope_obj.id!==o)continue}e.push(r)}for(var a=0;a<e.length;a++){var n,l,d=e[a],u=!1;if("string"==typeof d){if(n=d,s=d,null!=o)null!=(p=g.D.getComponentById(o).scope[d])&&(s=p.id);l=x.comp[s],null!=o&&(n=l.org_id||l.id)}else{var p;if(s=d.id,null!=o)null!=(p=g.D.getComponentById(o).scope[d.id])&&(s=p.id);l=x.comp[s],d.key?n=d.key:(n=l.id,null!=o&&(n=l.org_id||l.id)),u="append"==d.action}if(l){var m,f=l.getOption("keyNode");m=f?(f=f.wq_replaceAll("${key}",n))+"/"+l.getOption("baseNode").split("/")[0]:l.getOption("baseNode").split("/")[0];for(var b=c.L.findNodes(t,m),y=l.getOption("idAttribute")?l.getOption("idAttribute"):"id",v=0;v<b.length;v++){var w,S=b[v],C=S.parentNode.nodeName;if("dataMap"===l.initializeType&&(C=S.nodeName),f)(w=S.parentNode.getAttribute(y))&&(C=w);else(w=S.getAttribute(y))&&(C=w);if(C===n){switch(l.initializeType){case"dataMap":case"dataList":l.setXML(S,u,d.includeColumns)}break}}}}}catch(t){h.w.printStackTrace(t)}},x.api._setArrayEvalString=function(t){try{var e=JSON.parse(t);for(var i in e){var o=x.comp[i];switch(o.initializeType){case"dataMap":o.setArray(e[i]);break;case"dataList":o.setData(e[i])}}}catch(t){h.w.printStackTrace(t)}},x.api.syncWithAttributeMap=function(){try{if(x.options.attributeMap){var t=x.comp[this.options.attributeMap];if(t)for(var e=t.getCount(),i=0;i<e;i++){var o=t.getKey(i),s=t.get(i);x.options[o]=s}}}catch(t){h.w.printStackTrace(t)}},x.api.makeKeyNodeChildXML=function(t,e,i,o){try{var s=t.getOption("idAttribute")?t.getOption("idAttribute"):"id",r=function(t,e,i){for(var o="",s=0;s<t.length;s++)o+="<"+t[s]+" "+e+"='"+i+"'>";for(s=t.length-1;s>=0;s--)o+="</"+t[s]+">";return o
}(e.split("/"),s,o||t.id),a=c.L.parse(r).documentElement,n=c.L.findNode(a,"/"+e);return c.L.appendChild(n,i),a}catch(t){h.w.printStackTrace(t)}},x.api.broadcast=function(t){try{for(var e in x.comp){var i=x.comp[e];i[t.all[0]].apply(i,t.all[1]||[])}}catch(t){h.w.printStackTrace(t)}},x.api.JSONPathEvaluator=function(t,e){try{for(var i=e.split("."),o=0;o<i.length;o++){var s=i.slice(0,o+1).join(".");"object"!=typeof m.h.getJSONByPath(t,s)&&m.h.setJSONByPath(t,s,{})}return t}catch(t){h.w.printStackTrace(t)}},x.api.getInfo=function(t,e,i){var o={};if("object"==typeof t&&null!=t)if(t.constructor===Array)for(var s=0;s<t.length;s++){(a=x.comp[t[s]])&&"function"==typeof a.getInfo&&(o[a.id]=a.getInfo(e,i))}else for(var r in t){(a=x.comp[r])&&"function"==typeof a.getInfo&&(o[a.id]=a.getInfo(e,i))}else for(var r in x.comp){var a;(a=x.comp[r])&&"function"==typeof a.getInfo&&(o[a.id]=a.getInfo(e,i))}return o},x.api.getAllDataCollection=function(t){try{var e=[];for(var i in x.comp)"object"===t?e.push(x.comp[i]):e.push(x.comp[i].id);return e}catch(t){h.w.printStackTrace(t)}},x.api.setBroadcast=function(t){try{var e=!g.D.getBoolean(t);if(!!x.stopBroadCast!==e&&(x.stopBroadCast=e,!1===e)){for(var i=0;i<x.stopBroadCastComp.length;i++){var o=a.x.idCache[x.stopBroadCastComp[i]];o&&o.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged",[{refreshInstance:!0,refreshScroll:!0}]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"})}x.stopBroadCastComp=[],x.stopBroadCastComp._wq_add=function(t){for(var e=!1,i=0;i<this.length;i++)if(this[i]===t){e=!0;break}e||this.push(t)}}}catch(t){h.w.printStackTrace(t)}},x.api.getBroadcast=function(){try{return!x.stopBroadCast}catch(t){h.w.printStackTrace(t)}},x.api.onComplete=function(){try{for(var t in x.comp){var e=x.comp[t];e&&"function"==typeof e.onComplete&&!e.completed&&e.onComplete()}}catch(t){h.w.printStackTrace(t)}},x.api.isAliasDataCollection=function(t){try{var e=!1;return null!=t&&t.options&&!0==={aliasDataList:!0,aliasDataMap:!0,aliasLinkedDataList:!0}[t.options.pluginName]&&(e=!0),e}catch(t){h.w.printStackTrace(t)}},x.api.getObj=function(t){try{return!0===x.api.isAliasDataCollection(t)?t.getObj():t}catch(t){h.w.printStackTrace(t)}},x.api.bindPath=function(t){try{var e=t.split("."),i={};return i.collectionId=e[0].replace(/^data:/,""),e.length>1&&(i.columnId=e[1]),i}catch(t){h.w.printStackTrace(t)}};var I={paramObj:null,asyncCount:0,showWindowParam:{},showIFrameName:{},getParameter:function(t){var e="",i=t;try{if(WebSquare.util.isEncodeParameter()&&(t=WebSquare.util.encodeParameter(t)),"w2xPath"==i&&WebSquare.util.getEncodeParameterOption("pathName")&&(t=WebSquare.util.getEncodeParameterOption("pathName")),null==WebSquare.net.paramObj){WebSquare.net.paramObj=new Object;for(var o=decodeURIComponent(location.search).slice(1).split("&"),s=0;s<o.length;s++){2==(a=o[s].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}if(location.hash.length>0)for(o=location.hash.substring(1).split(/[\&\?\#]/),s=0;s<o.length;s++){2==(a=o[s].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}}else if("w2xPath"==t){if((r=location.toString().lastIndexOf("w2xPath"))<0)WebSquare.net.paramObj[t]=null;else 2==(a=location.toString().slice(r).split(/[\&\?\#]/)[0].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}else if(WebSquare.util.getEncodeParameterOption("pathName")&&t==WebSquare.util.getEncodeParameterOption("pathName")){var r,a;if((r=location.toString().lastIndexOf(WebSquare.util.getEncodeParameterOption("pathName")))<0)WebSquare.net.paramObj[t]=WebSquare.net.paramObj.w2xPath;else 2==(a=location.toString().slice(r).split(/[\&\?\#]/)[0].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())
}else if(null!=WebSquare.userData[i])return WebSquare.userData[i];e=WebSquare.net.paramObj[t],WebSquare.util.isEncodeParameter()?!e&&WebSquare.util.getEncodeParameterOption("fallback")?e=WebSquare.net.paramObj[i]:WebSquare.util.getEncodeParameterOption("onlyParam")||(e=WebSquare.util.decodeParameter(e)):!e&&WebSquare.util.getEncodeParameterOption("fallback")&&(e=WebSquare.net.paramObj[i])}catch(t){t.detail="WebSquare.net.getParameter 에러",h.w.printStackTrace(t)}(null!=e&&void 0!==e||(e=""),"w2xPath"===t)?e=e.replace(/%2F/g,"/"):e="native"==WebSquare.core.getConfiguration("/WebSquare/parameterEncode/@value")?decodeURIComponent(e):WebSquare.text.URLDecoder(e);return e},_setParameter:function(t){try{if(WebSquare.net.paramObj)if(WebSquare.util.isEncodeParameter())if(WebSquare.util.getEncodeParameterOption("onlyParam"))for(var e in t)WebSquare.net.paramObj[WebSquare.util.encodeParameter(e)]=t[e];else for(var e in t)WebSquare.net.paramObj[WebSquare.util.encodeParameter(e)]=WebSquare.util.encodeParameter(t[e]);else for(var e in t)WebSquare.net.paramObj[e]=t[e]}catch(t){t.detail="WebSquare.net._setParameter 에러",h.w.printStackTrace(t)}},getAllParameter:function(){var t={},e={};try{for(var i in WebSquare.net.paramObj)t[i]=WebSquare.text.URLDecoder(WebSquare.net.paramObj[i]),WebSquare.util.isEncodeParameter()&&(WebSquare.util.getEncodeParameterOption("onlyParam")?e[WebSquare.util.decodeParameter(i)]=t[i]:e[WebSquare.util.decodeParameter(i)]=WebSquare.util.decodeParameter(t[i]))}catch(t){h.w.printStackTrace(t)}return WebSquare.util.isEncodeParameter()?t.w2xPath&&t.w2xPath.length>0?t:e:t},getBASE64Parameter:function(t){var e="";try{if(null==WebSquare.net.paramObj){WebSquare.net.paramObj=new Object;for(var i=location.search.substring(1).split("&"),o=0;o<i.length;o++){var s=i[o].split("=");2==s.length&&(WebSquare.net.paramObj[s[0].wq_trim()]=s[1].wq_trim())}}e=WebSquare.net.paramObj[t]}catch(t){t.detail="WebSquare.net.getBASE64Parameter 에러",h.w.printStackTrace(t)}return null!=e&&void 0!==e||(e=""),WebSquare.text.BASE64URLDecoder(e)},getAllBASE64Parameter:function(){var t={};try{for(var e in WebSquare.net.paramObj)t[e]=WebSquare.text.BASE64URLDecoder(WebSquare.net.paramObj[e])}catch(t){h.w.printStackTrace(t)}return t},showWindow:function(t,e,i,o,s){if(void 0===i||null==i)i="channelmode=no,directories=no,fullscreen=no,top=200,height=350,left=250,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no'";else{var r=0,a=0,n="false",l=i.split(";");if(l.length>1){i="";for(var h=0;h<l.length;h++){var d=l[h].split(":");2==d.length&&("dialogHeight"==d[0].wq_trim()?(r=parseInt(d[1].wq_trim(),10),i+="height="+d[1]+","):"dialogWidth"==d[0].wq_trim()?(a=parseInt(d[1].wq_trim(),10),i+="width="+d[1]+","):"center"==d[0].wq_trim()?n=d[1].toLowerCase().wq_trim():i+=d[0]+"="+d[1]+",")}}if("true"==n||"yes"==n){if(0!=r)i="top="+(740-r)/2+"px,"+i;if(0!=a)i="left="+(1e3-a)/2+"px,"+i}}var c="idx10_"+(new Date).getTime()+1e4*Math.random();WebSquare.net.showWindowParam[c]=void 0===e?null:e,t=t.indexOf("?")>-1?t+"&modalParamIdx="+c:t+"?modalParamIdx="+c;var u=null;return null==(u=void 0===o?window.open(t,"_blank",i):window.open(t,o,i))&&alert(WebSquare.language.getMessage("E_net_PopupBlocked")),u},getPopupParam:function(){try{var t=WebSquare.net.getParameter("modalParamIdx");return opener.WebSquare.net._getParam(t)}catch(t){return""}},_getParam:function(t){return WebSquare.net.showWindowParam[t]},isPopup:function(){try{return void 0!==window.opener&&!window.opener.closed}catch(t){return!1}},Obj2XML:function(t){var e="<obj>";for(var i in t)e=e+"<"+i+" value='"+WebSquare.xml.encode(t[i])+"'/>";return e+="</obj>"},XML2Obj:function(t){var e=new Object;try{var i=null;if("string"==typeof t)i=WebSquare.xml.parse(t);else{if(!WebSquare.xml.isDocument(t))return"";i=t}var o=i.documentElement;if("vector"==o.nodeName||"hashtable"==o.nodeName)return"";for(var s=o.childNodes,r=0;r<s.length;r++){var a=s.item(r);if(1==a.nodeType){
var n=a.nodeName,l=a.getAttribute("value");null==l&&(l=""),e[n]=l}}}catch(t){h.w.printStackTrace(t)}return e},showIFrame:function(t,e,i,o){var s=0,r=0,a=t;if(void 0===i||null==i)i="height=370,width=320";else{var n=i.split(";");if(n.length>1){i="";for(var l=0;l<n.length;l++){var d=n[l].split(":");2==d.length&&("dialogHeight"==d[0].wq_trim()?(s=parseInt(d[1].wq_trim(),10),i+="height="+d[1]+","):"dialogWidth"==d[0].wq_trim()?(r=parseInt(d[1].wq_trim(),10),i+="width="+d[1]+","):"center"==d[0].wq_trim()?d[1].toLowerCase().wq_trim():i+=d[0]+"="+d[1]+",")}}}var c="idx11_"+(new Date).getTime()+1e4*Math.random();if(WebSquare.net.showWindowParam[c]=void 0===e?null:e,a){a=a.indexOf("?")>-1?a+"&modalParamIdx="+c:a+"?modalParamIdx="+c,void 0===o&&(o="___iframeLayer"),WebSquare.net.showIFrameName[c]=o,(isNaN(s)||0==s)&&(s=370),(isNaN(r)||0==r)&&(r=320);try{if(void 0===document.all[o]||null==document.all[o]){var u=document.createElement("div");u.id=o,u.style.position="absolute",u.style.overflow="hidden",u.style.zIndex=1e4,u.style.visibility="visible",u.style.height=s+"px",u.style.width=r+"px",u.style.setExpression("top","document.body.scrollTop+document.body.clientHeight/2-"+s+"/2"),u.style.setExpression("left","document.body.scrollLeft+document.body.clientWidth/2-"+r+"/2"),document.body.appendChild(u),u.innerHTML="<iframe frameborder='0' name='iframe"+o+"' scrolling='no' style='width:100%; height:100%'></iframe>",document.frames["iframe"+o].location.replace(a)}else{var p=document.body.scrollTop+document.body.clientHeight/2-parseInt(document.all[o].style.height)/2,g=document.body.scrollLeft+document.body.clientWidth/2-parseInt(document.all[o].style.width)/2;document.all[o].style.top=p,document.all[o].style.left=g,document.all[o].visibility="visible",document.all[o].style.zIndex=1e4,document.all[o].innerHTML="<iframe frameborder='0' scrolling='no' src='"+a+"' style='width:100%; height:100%;'></iframe>"}}catch(s){i="channelmode=no,directories=no,fullscreen=no,top=200,height=350,left=250,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no",WebSquare.net.showWindow(t,e,i,o),h.w.printStackTrace(s)}}},hideIFrame:function(){try{if(parent.WebSquare){var t=WebSquare.net.getParameter("modalParamIdx");parent.WebSquare.net._hideIFrame(t)}}catch(t){h.w.printStackTrace(t)}},_hideIFrame:function(t){var e=WebSquare.net.showIFrameName[t];void 0!==document.all[e]&&null!=document.all[e]&&(document.all[e].innerHTML="",document.all[e].style.zIndex=1,document.all[e].visibility="hidden",document.body.removeChild(document.all[e]))},getIFrameParam:function(){try{if(parent.WebSquare){var t=WebSquare.net.getParameter("modalParamIdx");return parent.WebSquare.net._getParam(t)}return""}catch(t){return h.w.printStackTrace(t),""}},hasParentFrame:function(){try{if(WebSquare.core.browserCheck.ieAllVersion){var t=WebSquare.core.browserVersion();return"5"==t.charAt(0)&&window.parent!=window||(("6"==t||"7"==t)&&window.parent!=window&&window.parent==window.frameElement.ownerDocument.parentWindow||window.parent!=window)}if(WebSquare.core.browserCheck.moz||WebSquare.core.browserCheck.opera)return window.parent!=window}catch(t){h.w.printStackTrace(t)}return!1},openWebsquareUrl:function(t,e,i,o){if(i||(i=window),i&&i.location){if(o=o||"true"==WebSquare.core.getConfiguration("/WebSquare/spa/@value"))return void WebSquare.util.url(t,{spa:!0});(e=a.x.extend(WebSquare.net.getAllParameter(),e)).w2xPath=WebSquare.core.getURL(t),t.startsWith("/")&&(e.w2xHome="");var s,r=[];for(var n in e)r.push(n+"="+e[n]);s="?"+r.join("&"),t=i.location.href.replace(/\?.*/,s),i.location.assign(t)}},openUrl:function(t,e){if(e||(e=window),e&&e.location){var i=e.location.protocol+"//";t.startsWith(i)||(t=i+t),e.location.assign(t)}},getSSLBlankPage:function(t){var e="";return WebSquare.core.browserCheck.ie&&"https:"==location.protocol&&(e=1==t?a.x._resourceURI+"blank.html":"src='"+a.x._resourceURI+"blank.html'"),e},getBlankXML:function(){
return a.x._resourceURI+"blank.xml"},isSSLBlankPage:function(t){var e=!1;return t==a.x._resourceURI+"blank.html"&&(e=!0),e},ajax:function(t){try{var e,i;if(WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===t.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync","$p.ajax")),t.beforeAjax&&void 0!==(e=t.beforeAjax(t))&&0==e)return void $l("ajax beforeAjax에서 result가 false이므로 처리를 중단");if(""!=t.processMsg)if(t.scope)WebSquare.layer.showProcessMessage(t.processMsg,{scope:t.scope,ajax:!0});else{var o=document.getElementById("___processbar2"),s=document.getElementById("___processbar2_i");(void 0!==o&&null!=o||void 0!==s&&null!=s)&&("none"!=o.style.display||"none"!=s.style.display)||WebSquare.layer.showProcessMessage(t.processMsg)}var r,a=WebSquare.core.getXMLHTTPObject();if(t.scope){var n=WebSquare.idToUUID[t.scope];n&&(r=WebSquare.idCache[n])}var l,d={frameObj:r,msaName:t.msaName},c=WebSquare.util.getSubmissionURL(t.action,d),u="synchronous"!=t.mode,p=t.mediatype||"application/xml",g=t.accept||p,m=t.method||"post",f=t.timeout;u&&!t.scope&&WebSquare.net.asyncCount++,$l(c),a.open(m,c,u);try{t.withCredentials&&"asynchronous"==t.mode&&(a.withCredentials=t.withCredentials)}catch(t){h.w.printStackTrace(t)}"none"!==g&&a.setRequestHeader("Accept",g),a.setRequestHeader("Content-Type",p);try{if(t.requestHeader)for(var b in t.requestHeader)a.setRequestHeader(b,t.requestHeader[b])}catch(t){h.w.printStackTrace(t)}u&&(f&&(l=window.setTimeout((function(){a.onreadystatechange=function(){},a.abort(),i={errorType:"timeout-error",resourceUri:c,time:f},t.scope||WebSquare.net.asyncCount--,t.scope?WebSquare.layer.hideProcessMessage({scope:t.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==t.hideProcessMsg&&WebSquare.layer.hideProcessMessage(),$l("ajax timeout"),window.clearTimeout(l),t.error&&t.error(i)}),f)),a.onreadystatechange=function(){WebSquare.net.defaultcallback(a,t,l)});var y=WebSquare.core.getConfiguration("/WebSquare/ajax/externalHandler/@value")||"";if(void 0!==t.externalHandler&&(y=t.externalHandler),""==y||"default"==y);else if(y)if("function"==typeof y)t.requestData=y(t);else{var v=WebSquare.util.getGlobalFunction(y);"function"==typeof v&&(t.requestData=v(t))}a.send(t.requestData),u||WebSquare.net.commonHandler(a,t)}catch(e){h.w.printStackTrace(e),t&&t.scope?WebSquare.layer.hideProcessMessage({scope:t.scope}):(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0)}},commonHandler:function(t,e){var i,o="synchronous"!=e.mode;o&&!e.scope&&WebSquare.net.asyncCount--;var s=WebSquare.core.getURL(e.action),r=t.getResponseHeader("Content-Type")||"";if(r.indexOf("xml")>-1)i=WebSquare.BootLoader.useWebSquareXMLParser?WebSquare.xml.parse(t.responseText):t.responseXML;else if(r.indexOf("json")>-1)try{i=JSON.parse(t.responseText)}catch(e){i=t.responseText}else i=t.responseText;if(t&&(200>t.status||300<=t.status)){var a={errorType:"resource-error",resourceUri:s,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(t),responseStatusCode:t.status,responseReasonPhrase:t.statusText,requestBody:e.requestData,responseBody:t.responseText};return $l("ajax error(E01). Status["+t.status+"] "),e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==e.hideProcessMsg&&(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0),e.error&&e.error(a),t.onreadystatechange=function(){},void(t=null)}var n,l={resourceUri:s,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(t),responseStatusCode:t.status,responseReasonPhrase:t.statusText,requestBody:e.requestData,responseText:t.responseText};n=l,r.indexOf("json")>-1?n.responseJSON=i:r.indexOf("xml")>-1&&(n.responseBody=i),$l("ajax complete. Status["+t.status+"] async["+o+"] url["+s+"]"),e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==e.hideProcessMsg&&(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0),
e.success&&e.success(l),t.onreadystatechange=function(){},t=null},defaultcallback:function(t,e,i){try{4==t.readyState&&(i&&(window.clearTimeout(i),i=null),WebSquare.net.commonHandler(t,e))}catch(t){h.w.printStackTrace(t),e&&e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope}):(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0)}},download:function(t,e,i,o){WebSquare.hybridApp&&(t=WebSquare.util.getSubmissionURL(t)),null!=o&&void 0!==o||(o=!1),WebSquare.core.download(t,e,i,o)}},T={sessionData:{}};T.sessionType=new Object,T._handleAttribute=function(t){if(null!=t&&t.mode&&t.key){for(var e=self,i=0;i<1e3;i++)try{if(null==e.opener&&e.parent===e)break;if(null!=e.opener&&e.opener.WebSquare&&e.opener.WebSquare.session)e=e.opener;else{if(e.parent===e||!e.parent.WebSquare||!e.parent.WebSquare.session)break;e=e.parent}}catch(t){break}var o,s=e.WebSquare.session,r=t.key;if("get"===t.mode||"remove"===t.mode){o=s.sessionData[r];var a=s.sessionType[r];void 0===o||null==o?o=null:"xml"===a&&(o=WebSquare.xml.parse(o)),"remove"===t.mode&&(delete s.sessionData[r],delete s.sessionType[r])}else if("set"===t.mode){var n=t.value,l="object";"string"==typeof n?l="string":WebSquare.xml.isDocument(n)?(n=WebSquare.xml.serialize(n),l="xml"):"object"==typeof n&&("function"==typeof n.serialize&&void 0!==n.classType?(l=n.classType,n=n.serialize()):l="object"),s.sessionData[r]=n,s.sessionType[r]=l}else"removeSession"===t.mode&&(s.sessionData={},s.sessionType={});return o}},T.getAttribute=function(t){return WebSquare.session._handleAttribute({key:t,mode:"get"})},T.removeAttribute=function(t){return WebSquare.session._handleAttribute({key:t,mode:"remove"})},T.removeSession=function(){return WebSquare.session._handleAttribute({key:"_",mode:"removeSession"})},T.setAttribute=function(t,e){return WebSquare.session._handleAttribute({key:t,mode:"set",value:e})},T._getAttributeData=function(t){var e=WebSquare.session.sessionData[t];return void 0===e||null==e?null:e},T._getAttributeType=function(t){var e=WebSquare.session.sessionType[t];return void 0===e||null==e?null:e},T._removeAttributeData=function(t){var e=WebSquare.session.sessionData[t];return WebSquare.session.sessionData[t]=null,delete WebSquare.session.sessionData[t],void 0===e||null==e?null:e},T._removeAttributeType=function(t){var e=WebSquare.session.sessionType[t];return WebSquare.session.sessionType[t]=null,delete WebSquare.session.sessionType[t],void 0===e||null==e?null:e},T._removeSession=function(){WebSquare.session.sessionData={},WebSquare.session.sessionType={}},T._setAttribute=function(t,e,i){WebSquare.session.sessionData[t]=e,WebSquare.session.sessionType[t]=i};var k=__webpack_require__(8449),D=__webpack_require__(701),L={cache:{},processMsg:"",disabledList:[],submissionIDQueue:[],submissionMessageQueue:[],saveLayer:function(t,e){try{var i=document.getElementById(t);void 0!==i&&null!=i&&(WebSquare.layer.cache[t+e]=i.innerHTML)}catch(t){h.w.printStackTrace(t)}},loadLayer:function(t,e){try{if(void 0!==WebSquare.layer.cache[t+e]&&""!=WebSquare.layer.cache[t+e].wq_trim()){var i=document.getElementById(t);return void 0!==i&&null!=i&&(i.innerHTML=WebSquare.layer.cache[t+e],!0)}return!1}catch(t){h.w.printStackTrace(t)}},clearLayer:function(){try{WebSquare.layer.cache=new Object}catch(t){h.w.printStackTrace(t)}},showProcessMessage:function(t,e){try{if("$blank"==t||!t)return;if(e&&e.scope){var i=WebSquare.layer._getMessageFrame(e.scope);if(null!=i)return i.showProcessMessage(t,e)}if($l("WebSquare.layer.showProcessMessage ["+t+"]"),"wframe"===WebSquare.core.getConfiguration("processMsgType")&&WebSquare.uiplugin&&WebSquare.uiplugin.wframe)return WebSquare.uiplugin.wframe._showProcessMessage(WebSquare.getBody(),t,e);var o=t.wq_trim(),s=o.match(/^javascript\s*:\s*(.*)/i);null==s||void 0===s||(t=WebSquare.jsonUtil.getJSONByPath(window,s[1]))===window&&(t="")
;var r=e&&"pasteMsg"==e.type?document.getElementById("___processbar2_paste"):document.getElementById("___processbar2"),n=e&&"pasteMsg"==e.type?document.getElementById("___processbar2_i_paste"):document.getElementById("___processbar2_i"),l=WebSquare.core.getConfiguration("processMsgURL"),d=WebSquare.core.getConfiguration("processMsgHeight"),c=WebSquare.core.getConfiguration("processMsgWidth"),u=WebSquare.core.getConfiguration("processMsgBackground"),p=WebSquare.core.getConfiguration("/WebSquare/processMsgBackground/@backgroundColor"),g=WebSquare.core.getConfiguration("processMsgTitle")||"process Message";if(""==p&&(p="#112233"),""==l&&(l=e&&"pasteMsg"==e.type?a.x.baseURI+WebSquare.BootLoader.inquiresPath("message/pasteMsg.html"):a.x.baseURI+WebSquare.BootLoader.inquiresPath("message/processMsg.html")),l=0==WebSquare.WebSquareCache?WebSquare.BootLoader.getRandomPostfix(l+"?param="+WebSquare.text.URLEncoder(t)):WebSquare.BootLoader.getResourceCachePostfix(l+"?param="+WebSquare.text.URLEncoder(t)),delete WebSquare.layer.hideTrigger,e&&e.hideTrigger&&(WebSquare.layer.hideTrigger="true"),delete WebSquare.layer.abortTrigger,e&&e.abortTrigger&&(WebSquare.layer.abortTrigger="true"),WebSquare.layer.processMsg=t,""!=d&&""!=c||(d="81",c="295"),r)r.tabIndex=1,r.style.zIndex=1e4,r.style.display="block",r.style.top="0px",r.style.left="0px";else{var m=document.createElement("div");m.id=e&&"pasteMsg"==e.type?"___processbar2_paste":"___processbar2",m.className="w2modal",m.style.backgroundColor=p,m.tabIndex=1,m.style.visibility="true"==u?"visible":"hidden",WebSquare.getBody().appendChild(m),m.style.zIndex=1e4}var f=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,b=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,y=document.documentElement.clientWidth!=document.body.clientWidth?document.body.clientWidth:document.documentElement.clientWidth||document.body.clientWidth||0,v=document.documentElement.clientHeight!=document.body.clientHeight?document.body.clientHeight:document.documentElement.clientHeight||document.body.clientHeight||0;if(n){w=f+v/2-parseInt(d)/2,S=b+y/2-parseInt(c)/2;n.style.top=parseInt(w)+"px",n.style.left=parseInt(S)+"px",n.style.zIndex=10001,frames.__processbarIFrame.contentWindow&&null!=frames.__processbarIFrame.contentWindow.onload?frames.__processbarIFrame.contentWindow.onload():null!=frames.__processbarIFrame.init&&frames.__processbarIFrame.init(),n.style.display="block"}else{var w=f+v/2-parseInt(d)/2,S=b+y/2-parseInt(c)/2,C=document.createElement("div");C.id=e&&"pasteMsg"==e.type?"___processbar2_i_paste":"___processbar2_i",C.style.position="absolute",C.style.top=parseInt(w)+"px",C.style.left=parseInt(S)+"px",C.style.overflow="hidden",C.style.zIndex=10001,C.style.visibility="visible",C.style.height=d+"px",C.style.width=c+"px",WebSquare.getBody().appendChild(C);var _="";WebSquare.util.isIEAllVersion()&&(_="frameborder='0'"),C.innerHTML="<iframe "+_+" scrolling='no' allowtransparency='true' id='__processbarIFrame' style='position:absolute; width:"+c+"px; height:"+d+"px; top:0px; left:0px; border:0px' src='"+l+"' title='"+g+"'></iframe>"}WebSquare.event.addListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){h.w.printStackTrace(t)}},setProcessMsgColor:function(){try{var t=WebSquare.layer.colorArr.shift();WebSquare.layer.colorArr.push(t),document.getElementById("processMsgLayer").style.color=t}catch(t){h.w.printStackTrace(t)}},hideProcessMessage:function(t){try{if(t&&t.scope){var e=WebSquare.layer._getMessageFrame(t.scope);if(null!=e)return!0===t.ajax?e.deleteAjaxMessage():e.hideProcessMessage()}var i=t&&"pasteMsg"==t.type?document.getElementById("___processbar2_paste"):document.getElementById("___processbar2"),o=t&&"pasteMsg"==t.type?document.getElementById("___processbar2_i_paste"):document.getElementById("___processbar2_i");void 0!==i&&null!=i&&(i.style.zIndex=-1,i.style.display="none",i.tabIndex="-1",i.innerHTML=""),
void 0!==o&&null!=o&&(o.style.zIndex=-1,o.style.display="none");try{var s;if(frames.__processbarIFrame)null!=(s=WebSquare.util.isIEAllVersion()?frames.__processbarIFrame:frames.__processbarIFrame.contentWindow)&&s.processKey&&s.clearInterval(s.processKey)}catch(t){}WebSquare.event.removeListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){h.w.printStackTrace(t);try{WebSquare.event.removeListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){}}},_getMessageFrame:function(t){try{for(var e,i=WebSquare.idCache[WebSquare.idToUUID[t]];null!=i&&i!==WebSquare.strictModeFrame;i=WebSquare.idCache[i.parentFrame])if(i.options&&!0===i.options.processMsgFrame){e=i;break}return e}catch(t){h.w.printStackTrace(t)}},addSubmissionMessage:function(t,e){try{var i,o;if("string"==typeof t?(o=t,i=WebSquare.ModelUtil.getSubmission(t)):o=(i=t).id,i&&i.scope_id){for(var s=WebSquare.layer._getMessageFrame(i.scope_id);s&&s.parentFrame&&!0===WebSquare.util.getBoolean(s.options.delegateProcessMsg);){var r=s._getRenderedParentFrame();if(!r)break;s=r}if(null!=s)return s.addSubmissionMessage(i,e)}try{var a;if(1==i.useModal&&WebSquare.layer.showModal(),i.abortTrigger&&(a={abortTrigger:i.abortTrigger}),!1===i.hideProcessMsg)return void WebSquare.layer.showProcessMessage(e,a)}catch(t){}WebSquare.layer.submissionIDQueue.push(o),WebSquare.layer.submissionMessageQueue.push(e),(1==WebSquare.layer.submissionIDQueue.length||WebSquare.layer.submissionMessageQueue[WebSquare.layer.submissionMessageQueue.length-2]!=e)&&WebSquare.layer.showProcessMessage(e,a)}catch(t){WebSquare.layer.hideModal(),h.w.printStackTrace(t)}},deleteSubmissionMessage:function(t){try{var e;try{if((e=WebSquare.ModelUtil.getSubmission(t))&&e.scope_id){for(var i=WebSquare.layer._getMessageFrame(e.scope_id);i&&i.parentFrame&&!0===WebSquare.util.getBoolean(i.options.delegateProcessMsg);){var o=i._getRenderedParentFrame();if(!o)break;i=o}if(null!=i)return i.deleteSubmissionMessage(t)}if(!1===e.hideProcessMsg)return void(1==e.useModal&&WebSquare.layer.hideModal())}catch(t){}for(var s=-1,r=0;r<WebSquare.layer.submissionIDQueue.length;r++)WebSquare.layer.submissionIDQueue[r]==t&&(s=r);if(s>=0){WebSquare.layer.submissionIDQueue.splice(s,1);var a=WebSquare.layer.submissionMessageQueue.splice(s,1)[0];s==WebSquare.layer.submissionIDQueue.length&&a!=WebSquare.layer.submissionMessageQueue[s-1]&&WebSquare.layer.showProcessMessage(WebSquare.layer.submissionMessageQueue[s-1])}var n=!0;t&&(!(e=WebSquare.ModelUtil.getSubmission(t))||!1!==e.hideProcessMsg&&"false"!==e.hideProcessMsg||(n=!1)),0==WebSquare.layer.submissionIDQueue.length&&n&&(e&&1==e.useModal&&WebSquare.layer.hideModal(),WebSquare.layer.hideProcessMessage())}catch(t){WebSquare.layer.hideModal(),h.w.printStackTrace(t)}},showModal:function(t){try{if(WebSquare.layer.disabledList.length>0)return void $l("[WebSquare.layer.showModal]현재 showModal상태이므로 처리하지 않습니다.");WebSquare.layer.disabledList.push(WebSquare.util.setDisabled({componentId:"",disabled:!0,excludeIdList:t,skipTab:!0})),WebSquare.getBody().showModal(null,t)}catch(t){h.w.printStackTrace(t)}},hideModal:function(){try{if(WebSquare.layer.disabledList.length>0){var t=WebSquare.layer.disabledList.splice(WebSquare.layer.disabledList.length-1,1)[0];WebSquare.util.setDisabled({componentId:"",disabled:!1,excludeIdList:t.skipComponents,skipTab:!0}),WebSquare.getBody().hideModal()}}catch(t){h.w.printStackTrace(t)}},showMessage:function(t){if(requires("uiplugin/floatingLayer/floatingLayer.js"),!t||void 0!==t.id){var e=t.title||"",i=t.messageBoxType||"info",o=t.messageButtonAlign||"center",s=t.message||"",r=t.contentTitle||"",a=t.id,n=WebSquare.util.getComponentById(a);n&&n.remove();var l=t.height||230,h=t.width||530,d=0,c=0,u=document.body.scrollHeight,p=document.body.scrollWidth;(d=p-(h+(p-h)/2))<0&&(d=0),(c=u-(l+(u-l)/2))<0&&(c=0);var g;g="position:absolute;height:"+l+"px;width:"+h+"px;top:"+c+"px;left:"+d+"px";var m=new WebSquare.uiplugin.floatingLayer(a,{
userEvents:["onclose","onlayermove"],bodyComplex:!0,dragAlwaysView:!1,title:e,contentTitle:r,titleClass:"",useResizeDrag:!1,modal:!0,useModal:!0,useAnchor:!1,messageBoxType:i,messageButtonAlign:o,message:s,style:g,useMessage:!0}),f=WebSquare.getBody();m.writeTo(f),m.activate(),m.show()}},alert:function(t,e,i){var o={id:"__floatingMsg",title:i||"알림",contentTitle:e||"알림",message:t||"",messageBoxType:"info",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},confirm:function(t,e,i){var o={id:"__floatingMsg",title:i||"확인",contentTitle:e||"확인",message:t||"",messageBoxType:"confirm",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},cancel:function(t,e,i){var o={id:"__floatingMsg",title:i||"확인",contentTitle:e||"확인",message:t||"",messageBoxType:"cancel",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},stopEvent:function(t){WebSquare.event.stopEvent(t)}},W={setCookie:function(t,e,i){var o;o="None"===i?t+"="+escape(e)+";SameSite=None;Secure;path=/":"Strict"===i?t+"="+escape(e)+";SameSite=Strict;path=/":t+"="+escape(e)+";path=/",document.cookie=o},setCookieAsync:function(t,e,i){"None"===i?window.setTimeout("document.cookie = '"+t+"="+escape(e)+";SameSite=None;Secure;path=/';",1):"Strict"===i?window.setTimeout("document.cookie = '"+t+"="+escape(e)+";SameSite=Strict;path=/';",1):window.setTimeout("document.cookie = '"+t+"="+escape(e)+";path=/';",1)},getCookie:function(t){try{for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var o=e[i].split("=");if(t==o[0])return 1==o.length?"":unescape(o[1])}}catch(t){h.w.printStackTrace(t)}return null},delCookie:function(t){try{document.cookie=t+"=abc; expires=Fri, 31 Dec 1970 23:59:59 GMT;path=/"}catch(t){h.w.printStackTrace(t)}}},A={effectManager:function(){this.effects=[],this.timeState="stopped";var t=this;this._mouseMoveEvent=function(){t.onDrag.apply(t,arguments)}}};A.effectManager.prototype={add:function(t,e){t.init(e),this.effects.push(t),"stopped"==this.timeState&&(this.timeState="running",this.startTimeout())},remove:function(t){for(var e=[],i=0;i<this.effects.length;i++)this.effects[i]!=t&&e.push(this.effects[i]);this.effects=e,0==this.effects.length&&this.cancelTimeout()},startTimeout:function(){var t=this;this.interval=setInterval((function(){var e=(new Date).getTime();t.notifyLoop(e)}),10)},cancelTimeout:function(){clearInterval(this.interval),this.timeState="stopped"},notifyLoop:function(){for(var t=[],e=0;e<this.effects.length;e++)"finished"!=this.effects[e].state&&t.push(this.effects[e]);this.effects=t;var i=(new Date).getTime();for(e=0;e<this.effects.length;e++)"finished"!=this.effects[e].state&&this.effects[e].loop(i);0==this.effects.length&&this.cancelTimeout()}},A.effectManager=new A.effectManager,A.defaultOptions={transition:function(t){return-Math.cos(t*Math.PI)/2+.5},duration:1,fps:60,from:0,to:1,delay:0},A.resize=function(t,e){try{this.element=t;var i=a.x.extend({width:null,height:null,fromLeft:!0,fromTop:!0,mode:"delta"},e||{});WebSquare.effect.effectManager.add(this,i)}catch(t){h.w.printStackTrace(t)}},A.resize.prototype={position:null,init:function(t){this.options=a.x.extend(a.x.extend({},WebSquare.effect.defaultOptions),t||{}),this.currentFrame=0,this.state="stoped",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration;var e=(new Date).getTime();this.startOn+=e,this.finishOn+=e},loop:function(t){if(t>=this.startOn){if(t>=this.finishOn)return this.render(1),this.finish&&this.finish(),void(this.state="finished");var e=(t-this.startOn)/(this.finishOn-this.startOn),i=Math.round(e*this.options.fps*this.options.duration);i>this.currentFrame&&(this.render(e),this.currentFrame=i)}},render:function(t){"stoped"==this.state&&(this.state="running",this.setup&&this.setup()),"running"==this.state&&(this.options.transition&&(t=this.options.transition(t)),
t=t*(this.options.to-this.options.from)+this.options.from,this.update&&this.update(t))},setup:function(){var t=WebSquare.style.getStyle(this.element,"left");t="auto"===t?"0":t;var e=WebSquare.style.getStyle(this.element,"top");e="auto"===e?"0":e,this.originalLeft=parseFloat(t||0),this.originalTop=parseFloat(e||0),this.originalWidth=parseFloat(WebSquare.style.getSize(this.element,"width")||0),this.originalHeight=parseFloat(WebSquare.style.getSize(this.element,"height")||0),"absolute"==this.options.mode&&(null!=this.options.width&&(this.options.width=this.options.width-this.originalWidth),null!=this.options.height&&(this.options.height=this.options.height-this.originalHeight))},update:function(t){null!=this.options.width&&(this.element.style.width=this.options.width*t+this.originalWidth+"px",this.options.fromLeft||WebSquare.style.setStyle(this.element,{left:-1*this.options.width*t+this.originalLeft+"px"})),null!=this.options.height&&(this.element.style.height=this.options.height*t+this.originalHeight+"px",this.options.fromTop||WebSquare.style.setStyle(this.element,{top:-1*this.options.height*t+this.originalTop+"px"}))},finish:function(){try{this.options.finish&&this.options.finish.call()}catch(t){h.w.printStackTrace(t)}}};var M=function(){};M.prototype.construct=function(t,e){this.status=0,this.element=t,this._eventBubbling=e},M.prototype.next=function(){if(0==this.status)return this.status=1,!0},M.prototype.stop=function(){this.status=2},M.prototype.match=function(t,e,i,o){if(2==this.status)return!1;var s=!0;return t&&(" "+this.element.className+" ").indexOf(" "+t.wq_trim()+" ")<0&&(s=!1),e&&this.element.id!=e&&(s=!1),i&&this.element.tagName.toUpperCase()!=i.toUpperCase()&&(s=!1),this._eventBubbling&&o&&this.element.id.indexOf(o)<0&&(s=!1),s},M.prototype.matchSvg=function(t,e,i){if(2==this.status)return!1;var o=!1;return this.element.className.baseVal&&(o=!0,t&&(" "+this.element.className.baseVal+" ").indexOf(" "+t.wq_trim()+" ")<0&&(o=!1),e&&this.element.id!=e&&(o=!1),i&&this.element.tagName.toUpperCase()!=i.toUpperCase()&&(o=!1)),o},M.prototype.getElement=function(){return this.element};var E=function(t,e){this.construct(t),this.upperBoundElem=e||document.body};a.x.extend(E.prototype,M.prototype),E.prototype.next=function(){return 0==this.status?(this.status=1,!0):2!=this.status&&((this.element!==document.documentElement||this.upperBoundElem!==document.body)&&(!(this.element==this.upperBoundElem||!this.element.parentNode)&&(this.element=this.element.parentNode,!0)))};var q=__webpack_require__(1960),R=__webpack_require__(9304),N={CSSStyleSheet:function(){this.rules=[],this.ruleIndex=[],this.styleElement=document.createElement("style"),this.styleElement.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(this.styleElement),this.sheet=this.styleElement.styleSheet?this.styleElement.styleSheet:this.styleElement.sheet}};N.CSSStyleSheet.addRuleRe1=new RegExp("^\\{?([^\\}])"),N.CSSStyleSheet.addRuleRe2=new RegExp("^\\{[^\\}]*\\}$"),N.CSSStyleSheet.prototype.addRule=function(t,e){try{var i;if(this.sheet)if(this.sheet.addRule){e=e.replace(WebSquare.styleSheet.CSSStyleSheet.addRuleRe1,"$1");var o=this.sheet.rules.length;this.sheet.addRule(t,e),i=this.sheet.rules[o],this.ruleIndex[t]=o,this.rules=this.sheet.rules}else if(this.sheet.insertRule){WebSquare.styleSheet.CSSStyleSheet.addRuleRe2.test(e)||(e="{"+e+"}");o=this.sheet.cssRules.length;this.sheet.insertRule(t+" "+e,o),i=this.sheet.cssRules[o],this.ruleIndex[t]=o,0==this.rules.length&&(this.rules=this.sheet.cssRules)}else alert("Cannot create rule");else{e=e.replace(WebSquare.styleSheet.CSSStyleSheet.addRuleRe1,"$1"),this.ruleIndex[t]||(this.ruleIndex[t]=this.rules.length),this.rules[this.ruleIndex[t]]=e;var s="";for(var r in this.ruleIndex)s=r+" {"+this.rules[this.ruleIndex[r]]+"}";this.styleElement.innerHTML=s}return i}catch(t){h.w.printStackTrace(t,null,this)}},N.CSSStyleSheet.prototype.changeRule=function(t,e,i){try{var o=this.ruleIndex[t]
;if(void 0===o)return void this.addRule(t,e+":"+i);if(this.sheet){if(this.rules[o].style){for(var s=/^([^-]*)-([a-z])(.*)$/.exec(e);s;)e=s[1]+s[2].toUpperCase()+s[3],s=/^([^-]*)-([a-z])(.*)$/.exec(e);var r=this;setTimeout((function(){r.rules[o].style[e]=i}),1)}else if(this.sheet.insertRule){var a=this.rules[o];if(a){d=a.cssText;if(n=new RegExp("^[^\\{]*(\\{.*"+e+"\\s*\\:\\s*)([^};]*)([^}]*})").exec(d))n[4]!=i&&(d=n[1]+i+n[3],this.sheet.deleteRule(o),this.sheet.insertRule(t+" "+d,o));else d="{ "+(n=new RegExp("\\{([^}]*)}").exec(d))[1]+"; "+e+": "+i+" }",this.sheet.deleteRule(o),this.sheet.insertRule(t+" "+d,o)}}}else{if(d=this.rules[o]){var n=new RegExp("^(.*"+e+"\\s*:\\s*)([^;]*)(.*)$").exec(d);for(var l in n?n[4]!=i&&(this.rules[o]=n[1]+i+n[3]):this.rules[o]=d+"; "+e+": "+i+";",d="",this.ruleIndex)d=l+" {"+this.rules[this.ruleIndex[l]]+"}";this.styleElement.innerHTML=d}var d="",d="";for(var l in this.ruleIndex)d=l+" {"+this.rules[this.ruleIndex[l]]+"}"}}catch(t){h.w.printStackTrace(t)}},N.CSSStyleSheet.prototype.getRuleProperty=function(t,e){var i=this.ruleIndex[t];if(void 0!==i)if(this.sheet){if(this.rules[i].style){for(var o=/^([^-]*)-([a-z])(.*)$/.exec(e);o;)e=o[1]+o[2].toUpperCase()+o[3],o=/^([^-]*)-([a-z])(.*)$/.exec(e);return this.rules[i].style[e]}if(this.sheet.insertRule){var s=this.rules[i];if(s)if(a=s.cssText,r=new RegExp("^.*"+e+"\\s*\\:\\s*([^};]*)").exec(a))return r[1]}}else{var r,a=this.rules[i];if(a)if(r=new RegExp("^.*"+e+"s*:s*([^;]*)").exec(a))return r[1]}},N.CSSStyleSheet.prototype.getRule=function(t){var e=this.ruleIndex[t];if(void 0!==e){if(!this.sheet){var i=this.rules[e];return i}if(this.rules[e].style)return this.rules[e].style.cssText;if(this.sheet.insertRule){var o=this.rules[e];if(o)return i=o.cssText}}};var F={styleSheet:null,initialize:function(){null==WebSquare.cssStyleSheet.styleSheet&&(WebSquare.cssStyleSheet.styleSheet=new WebSquare.styleSheet.CSSStyleSheet)},addRule:function(t,e){try{WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.addRule(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},changeRule:function(t,e,i){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.changeRule(t,e,i)},getRuleProperty:function(t,e){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.getRuleProperty(t,e)},getRule:function(t){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.getRule(t)}},O={_initImport:function(){O.gDragManager.init()}};a.x._initImportList.push("dragdrop"),O.gDragManager={},O.gDragManager.init=function(){try{this.dragGhost=null,this.element=null,this.target=null,this.currentFrame=0,this.deltaX=0,this.deltaY=0,this.oldMouseX=-1,this.oldMouseY=-1,this.status="stop",this.options={id:"w2drag",className:"w2drag",contents:"",direction:"x y",resizeDirection:"width height",frameGap:20,delay:0,mode:"move",applyMousePosition:!1,windowDragMove:!1,dropClass:"",onDrop:null,makeGhostLayer:null,useDragLayer:!1,handleStart:null,handleUpdate:null,handleFinish:null,beforeStart:null,afterFinish:null},this.original={position:"",left:0,top:0,width:0,height:0,mouseX:0,mouseY:0},this.event=new WebSquare.eventControl,this.mouseMoveListener=(t=this,function(...e){t.update.apply(t,e)}),this.mouseUpListener=function(t){return function(...e){t.finish.apply(t,e)}}(this)}catch(t){h.w.printStackTrace(t)}var t},O.gDragManager.activate=function(t,e,i){try{if(1==WebSquare.util.isMobile()){var o={};!1===i.passive&&(o.passive=!1),WebSquare.event.addListener(document.documentElement,"ontouchmove",this.mouseMoveListener,o),WebSquare.event.addListener(document.documentElement,"ontouchend",this.mouseUpListener,o)}else WebSquare.event.addListener(document.documentElement,"onmousemove",this.mouseMoveListener),WebSquare.event.addListener(document.documentElement,"onmouseup",this.mouseUpListener);WebSquare.util.isFF()&&WebSquare.event.preventDefault(t),this.options=a.x.extend(this.options,i||{})
;var s=WebSquare.style.getAbsoluteLeft(e,!0),r=WebSquare.style.getAbsoluteTop(e,!0),n=this.getDragGhost(),l=WebSquare.style.getAbsoluteTop(n.render,!0),d=WebSquare.style.getAbsoluteLeft(n.render,!0);"none"==n.render.style.display&&(l=0,d=0),null==n.saveOffsetTop&&(n.saveOffsetTop=l),null==n.saveOffsetLeft&&(n.saveOffsetLeft=d),n.saveLeft=s,n.saveTop=r,this.options.makeGhostLayer&&(n=this.options.makeGhostLayer(n,t),"resize"!=this.options.mode&&"resize_right"!=this.options.mode&&"resize_bottom"!=this.options.mode&&"resize_up"!=this.options.mode&&"resize_upRight"!=this.options.mode&&"resize_upLeft"!=this.options.mode&&"resize_bottomLeft"!=this.options.mode&&"resize_left"!=this.options.mode||n.show()),this.options.contents?n.render.innerHTML=this.options.contents:this.options.showNoData&&(n.render.innerHTML="no data"),this.dragGhostOffsetTop=0,this.dragGhostOffsetLeft=0,this.options.ghostRightTop&&(this.dragGhostOffsetTop=-55,this.dragGhostOffsetLeft=20),n&&(this.dragGhost=n,this.element=e,this.target=this.dragGhost.render,this.original={left:this.dragGhost.saveOffsetLeft+s,top:this.dragGhost.saveOffsetTop+r,width:this.target.offsetWidth,height:this.target.offsetHeight,mouseX:WebSquare.event.getMouseX(t),mouseY:WebSquare.event.getMouseY(t)},this.options.showGhostOnActivate&&(this.options.applyMousePosition?this.drawPosition(this.original.mouseX+this.dragGhostOffsetLeft,this.original.mouseY+this.dragGhostOffsetTop):this.drawPosition(this.original.left+this.dragGhostOffsetLeft,this.original.top+this.dragGhostOffsetTop),n.show())),this.options.windowDragMove&&this.options.mode&&this.target?WebSquare.style.addClass(this.target,"w2drag_resize_window_move"):WebSquare.style.removeClass(this.target,"w2drag_resize_window_move"),WebSquare.getBody().addClass("w2drag_activate")}catch(t){h.w.printStackTrace(t)}},O.gDragManager.drawSize=function(t,e,i){try{this.target&&(this.options.minWidth&&t<parseInt(this.options.minWidth)-10||this.options.minHeight&&e<=parseInt(this.options.minHeight)-10?this.finish(i):(t>=0&&this.options.resizeDirection.indexOf("width")>-1&&(this.target.style.width=t+"px"),e>=0&&this.options.resizeDirection.indexOf("height")>-1&&(this.target.style.height=e+"px")))}catch(i){h.w.printStackTrace(i)}},O.gDragManager.drawPosition=function(t,e){try{this.target&&(this.options.direction.indexOf("x")>-1&&(this.target.style.left=(t-WebSquare.style.getAbsoluteLeft(document.body,!0))/(WebSquare.BootLoader.fullViewRatio||1)+"px"),this.options.direction.indexOf("y")>-1&&(this.target.style.top=(e-WebSquare.style.getAbsoluteTop(document.body,!0))/(WebSquare.BootLoader.fullViewRatio||1)+"px"))}catch(t){h.w.printStackTrace(t)}},O.gDragManager.start=function(t){try{"stop"==this.status&&(this.status="started",this.options.beforeStart&&this.options.beforeStart(t),this.options.handleStart&&this.options.handleStart(t),this.dragGhost.show(),this.dragGhost.setPosition(this.dragGhost.saveLeft,this.dragGhost.saveTop))}catch(t){h.w.printStackTrace(t)}},O.gDragManager.update=function(t){try{var e=!1;if(this.target){WebSquare.event.stopEvent(t);var i=WebSquare.event.getMouseX(t),o=WebSquare.event.getMouseY(t);this.oldMouseX==i&&this.oldMouseY==o||(this.oldMouseX=i,this.oldMouseY=o,e=!0),this.deltaX=i-this.original.mouseX,this.deltaY=o-this.original.mouseY}if(e&&this.target&&Math.abs(this.deltaX)+Math.abs(this.deltaY)>this.options.delay&&this.start(t),e&&this.target&&"started"==this.status){if("move"==this.options.mode){if(this.options.applyMousePosition?this.drawPosition(this.original.mouseX+this.deltaX+this.dragGhostOffsetLeft,this.original.mouseY+this.deltaY+this.dragGhostOffsetTop):this.drawPosition(this.original.left+this.deltaX+this.dragGhostOffsetLeft,this.original.top+this.deltaY+this.dragGhostOffsetTop),this.options.component&&"gridView"===this.options.component.options.pluginName){var s=this.options.component,r=s.getElementById(s.id+"_body_tbody"),a=WebSquare.style.getAbsoluteTop(r);if(s.isMobile){var n=s._checkScrollEnd2()
;r.offsetHeight+a<o&&2!==n?s.moveYScroll(6):a>o&&1!==n&&s.moveYScroll(-6)}else r.offsetHeight+a<o?s.options.dataDragDropOther||(s.getElementById(s.id+"_scrollY_div").scrollTop+=30):a>o&&(s.options.dataDragDropOther||(s.getElementById(s.id+"_scrollY_div").scrollTop-=30))}}else if("resize"==this.options.mode){var l=this.original.width+this.deltaX,d=this.original.height+this.deltaY,c=this.original.left,u=this.original.top;l<0&&(c-=l=Math.abs(l)),d<0&&(u-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_right"==this.options.mode){l=this.original.width+this.deltaX,d=this.original.height,c=this.original.left,u=this.original.top;l<0&&(c-=l=Math.abs(l)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_upLeft"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height-this.deltaY,c=this.original.left+this.deltaX,u=this.original.top+this.deltaY;d<0&&(u+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_upRight"==this.options.mode){l=this.original.width+this.deltaX,d=this.original.height-this.deltaY,c=this.original.left,u=this.original.top+this.deltaY;d<0&&(u+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_up"==this.options.mode){l=this.original.width,d=this.original.height-this.deltaY,c=this.original.left,u=this.original.top+this.deltaY;d<0&&(u+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_bottom"==this.options.mode){l=this.original.width,d=this.original.height+this.deltaY,c=this.original.left,u=this.original.top;d<0&&(u-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_bottomLeft"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height+this.deltaY,c=this.original.left+this.deltaX,u=this.original.top;l<0&&(c-=l=Math.abs(l)),d<0&&(u-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_left"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height,c=this.original.left+this.deltaX,u=this.original.top;l<0&&(c-=l=Math.abs(l)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}if(this.options.handleUpdate&&this.options.handleUpdate(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.options.onDragover){var p=null;if(""!=this.options.dragoverClass){for(var g=this.event.getTargetIterator(t);g.next();)g.match(this.options.dragoverClass)&&(p=g.getElement(),g.stop());g=null}this.options.onDragover(this.element,p,this.original.left,this.original.top,this.deltaX,this.deltaY,t)}}}catch(t){h.w.printStackTrace(t)}},O.gDragManager.finish=function(t){try{if(this.target){if("started"==this.status||"visible"==this.dragGhost.getStyle("visibility")){if(WebSquare.util.isMobile()?(WebSquare.event.removeListener(document.documentElement,"ontouchmove",this.mouseMoveListener),WebSquare.event.removeListener(document.documentElement,"ontouchend",this.mouseUpListener)):(WebSquare.event.removeListener(document.documentElement,"onmousemove",this.mouseMoveListener),WebSquare.event.removeListener(document.documentElement,"onmouseup",this.mouseUpListener)),this.options.onDrop){var e=null;if(""!=this.options.dropClass){
for(var i=this.event.getTargetIterator(t);i.next();)i.match(this.options.dropClass)&&(e=i.getElement(),i.stop());i=null}this.options.onDrop(this.element,e,this.original.left,this.original.top,this.deltaX,this.deltaY,t)}this.options.handleFinish&&this.options.handleFinish(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.options.afterFinish&&this.options.afterFinish(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.dragGhost.hide()}this.init(),WebSquare.getBody().removeClass("w2drag_activate")}}catch(t){h.w.printStackTrace(t)}},O.gDragManager.getDragGhost=function(){try{var t=null,e=WebSquare.getBody();return e&&((t=e.getChild(this.options.id))||(requires("uiplugin/group/group.js"),(t=new WebSquare.uiplugin.group(this.options.id,{className:"w2drag "+this.options.className})).writeTo(e,null,this.parentFrame),t.activate(),t.hide())),t}catch(t){h.w.printStackTrace(t)}},O.gDragManager.remove=function(t){try{this.finish({});var e=WebSquare.getBody();if(e){var i=e.getChild(t);i&&i.remove()}}catch(t){h.w.printStackTrace(t)}};var B={styleHash:new Object,zIndexCorrection:{calendar:100,itemTable:200,toolTip:300},camelize:function(t){var e=t.split("-");if(1==e.length)return e[0];for(var i=0==t.indexOf("-")?e[0].charAt(0).toUpperCase()+e[0].substring(1):e[0],o=1,s=e.length;o<s;o++){var r=e[o];i+=r.charAt(0).toUpperCase()+r.substring(1)}return i},setStyle:function(t,e,i){if("object"==typeof e)for(var o in e)t.style[WebSquare.style.camelize(o)]=e[o];else if("string"==typeof e){if("opacity"==(o=e.capitalizeStyle())){if(void 0===t.style.opacity){var s=parseFloat(i,10);o="filter",i="alpha(opacity="+100*(s=isNaN(s)?1:s)+")"}}else"float"==o&&(void 0!==t.style.cssFloat?t.style.cssFloat=i:void 0!==t.style.styleFloat&&(t.style.styleFloat=i));t.style[o]=i}}};document.documentElement.currentStyle?B.getStyleProperty=function(t,e){e=e.wq_trim().capitalizeStyle();var i=t.currentStyle[e];return e.toLowerCase().indexOf("color")>-1?g.D.toHexColor(i):i}:window.getComputedStyle?B.getStyleProperty=function(t,e){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e);return e.toLowerCase().indexOf("color")>-1?g.D.toHexColor(i):i}:B.getStyleProperty=function(t,e){var i=t.style[e];return e.toLowerCase().indexOf("color")>-1?g.D.toHexColor(i):i},B.getStyle=function(t,e){var i=WebSquare.style.getStyleProperty(t,e);if(!i)if("opacity"==e){var o=(WebSquare.style.getStyleProperty(t,"filter").match(/alpha\(.*\)/gi)||[""])[0].match(/opacity=\d+/gi)||[""];i=parseInt(o[0].substr(8)||"100",10)/100+""}else"float"==e&&(i=WebSquare.style.getStyleProperty(t,"styleFloat"));return i},B.OpacRe1=new RegExp("Gecko"),B.OpacRe2=new RegExp("Konqueror|Safari|KHTML"),B.OpacRe3=new RegExp("MSIE"),B.OpacRe4=new RegExp("alpha\\([^\\)]*\\)","gi"),B.setOpacity=function(t,e){1==e?(WebSquare.style.setStyle(t,{opacity:WebSquare.style.OpacRe1.test(navigator.userAgent)&&!WebSquare.style.OpacRe2.test(navigator.userAgent)?.999999:null}),WebSquare.style.OpacRe3.test(navigator.userAgent)&&WebSquare.style.setStyle(t,{filter:WebSquare.style.getStyle(t,"filter").replace(WebSquare.style.OpacRe4,"")})):(e<1e-5&&(e=0),WebSquare.style.setStyle(t,{opacity:e}),WebSquare.style.OpacRe3.test(navigator.userAgent)&&WebSquare.style.setStyle(t,{filter:WebSquare.style.getStyle(t,"filter").replace(WebSquare.style.OpacRe4,"")+"alpha(opacity="+100*e+")"}))},B.extendStyle=function(t,e){var i=new Object;for(var o in t)i[WebSquare.style.camelize(o)]=t[o];for(var o in e){i[WebSquare.style.camelize(o)]=e[o]}return i},B.setSize=function(t,e,i){try{if(!t)return;e=parseInt(e),i=parseInt(i),null!=e&&!isNaN(e)&&e>=0&&(t.style.width=e+"px"),null!=i&&!isNaN(i)&&i>=0&&(t.style.height=i+"px")}catch(t){h.w.printStackTrace(t)}},B.getSize=function(t,e){try{if(!t)return;if("height"==(e=e.toLowerCase()))return t.clientHeight;if("width"==e)return t.clientWidth;if("innerheight"==e){
var i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;return t.clientHeight+i+o}if("innerwidth"==e){var s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;return t.clientWidth+s+r}if("outerheight"==e){var a=parseInt(WebSquare.style.getStyleProperty(t,"border-top-width"))||0,n=parseInt(WebSquare.style.getStyleProperty(t,"border-bottom-width"))||0;i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;return t.clientHeight+a+n+i+o}if("outerwidth"==e){var l=parseInt(WebSquare.style.getStyleProperty(t,"border-left-width"))||0,c=parseInt(WebSquare.style.getStyleProperty(t,"border-right-width"))||0;s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;return t.clientWidth+l+c+s+r}if("outermarginheight"==e){a=parseInt(WebSquare.style.getStyleProperty(t,"border-top-width"))||0,n=parseInt(WebSquare.style.getStyleProperty(t,"border-bottom-width"))||0,i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;var u=parseInt(WebSquare.style.getStyleProperty(t,"margin-top"))||0,p=parseInt(WebSquare.style.getStyleProperty(t,"margin-bottom"))||0;return t.clientHeight+a+n+i+o+u+p}if("outermarginwidth"==e){l=parseInt(WebSquare.style.getStyleProperty(t,"border-left-width"))||0,c=parseInt(WebSquare.style.getStyleProperty(t,"border-right-width"))||0,s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;var g=parseInt(WebSquare.style.getStyleProperty(t,"margin-left"))||0,m=parseInt(WebSquare.style.getStyleProperty(t,"margin-right"))||0;return t.clientWidth+l+c+s+r+g+m}return void d.k.printLog("getSize : wrong sizeName["+e+"]")}catch(t){h.w.printStackTrace(t)}},B._getSize=function(t,e){try{if(!t)return;if("height"==(e=e.toLowerCase()))return t.clientHeight;if("width"==e)return t.clientWidth;if("innerheight"==e)return t.clientHeight;if("innerwidth"==e)return t.clientWidth;if("outerheight"==e)return t.offsetHeight;if("outerwidth"==e)return t.offsetWidth;if("outermarginheight"==e){var i=parseInt(WebSquare.style.getStyleProperty(t,"margin-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"margin-bottom"))||0;return t.offsetHeight+i+o}if("outermarginwidth"==e){var s=parseInt(WebSquare.style.getStyleProperty(t,"margin-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"margin-right"))||0;return t.offsetWidth+s+r}return void d.k.printLog("getSize : wrong sizeName["+e+"]")}catch(t){h.w.printStackTrace(t)}},B.animate=function(t,e,i){if((i=i||{duration:500}).easing=i.easing||"ease",i.startTime=new Date,i.key=i.key||"WebSquare.style.animate_"+Math.random(),i.delay=15,"object"==typeof e){t&&t.render&&(t=t.render);for(var o=g.D.isArray(t)?t:[t],s=[],r=[],a=0;a<o.length;a++){var n=o[a],h={},d=e;for(var c in d)if(h[c]=WebSquare.style.getStyle(n,c),"string"==typeof h[c]){var u=(d[c]+"").wq_trim();u.startsWith("+=")?d[c]=parseFloat(h[c])+parseFloat(u.substr(2)):u.startsWith("-=")&&(d[c]=parseFloat(h[c])-parseFloat(u.substr(2)))}s.push(h),r.push(d)}e=function(t){for(var e=0;e<o.length;e++){var i=o[e],a=s[e],n=r[e];for(var l in n){var h=parseFloat(a[l]),d=a[l].substr((h+"").length),c=h+t*(n[l]-h);WebSquare.style.setStyle(i,l,c+d)}}}}else!i.caller&&t&&(i.caller=t);var p=function(){var t=(new Date-i.startTime)/i.duration;t>1&&(t=1);var o=WebSquare.style.cubicBezierAtTime(t,i.easing,i.duration);e.call(i.caller,o),o<1?l.v.setTimer(p,i):i.complete&&i.complete.call(i.caller)};return l.v.setTimer(p,i),i.key},B.cubicBezierAtTime=function(t,e,i){if("string"==typeof e)switch(e){case"ease":e=[.25,.1,.25,1];break;case"linear":e=[0,0,1,1];break;case"ease-in":e=[.42,0,1,1];break;case"ease-out":
e=[0,0,.58,1];break;case"ease-in-out":e=[.42,0,.58,1];break;case"deceleration":e=[0,0,0,1];break;case"acceleration":e=[1,0,1,1];break;case"default":default:e=[.25,.1,.25,1]}var o,s,r=e[0],a=e[1],n=e[2],l=e[3],h=0,d=0,c=0,u=0,p=0,g=0;function m(t){return((h*t+d)*t+c)*t}function f(t){return(3*h*t+2*d)*t+c}return h=1-(c=3*r)-(d=3*(n-r)-c),u=1-(g=3*a)-(p=3*(l-a)-g),o=t,s=function(t){return 1/(200*t)}(i),function(t){return((u*t+p)*t+g)*t}(function(t,e){var i,o,s,r,a,n;function l(t){return t>=0?t:0-t}for(s=t,n=0;n<8;n++){if(l(r=m(s)-t)<e)return s;if(l(a=f(s))<1e-6)break;s-=r/a}if(o=1,(s=t)<(i=0))return i;if(s>o)return o;for(;i<o;){if(l((r=m(s))-t)<e)return s;t>r?i=s:o=s,s=.5*(o-i)+i}return s}(o,s))},B.addClass=function(t,e){try{if(!t||!e)return;for(var i=t.className.wq_trim(),o=i.split(" "),s=0;s<o.length;s++){if((" "+o[s].wq_trim()+" ").indexOf(" "+e+" ")>-1&&s==o.length-1)return}o.length>=1&&(i+=" "),i+=e.wq_trim(),t.className=i}catch(t){h.w.printStackTrace(t)}},B.removeClass=function(t,e){try{if(!t||!e)return;for(var i=t.className.split(" "),o=[],s=0;s<i.length;s++){var r=i[s].wq_trim();(" "+r+" ").indexOf(" "+e+" ")>-1||r.length>0&&o.push(r)}t.className=o.join(" ")}catch(t){h.w.printStackTrace(t)}},B.show=function(t,e){try{if(!t)return;void 0===e&&(e="block"),t.style.display=e,t.style.visibility="visible",g.D.isIE(6)&&WebSquare.style.addClass(t," "),t.setAttribute("aria-hidden","false"),WebSquare.layer.disabledList.length>0&&WebSquare.style.addClass(t,"w2modal_popupLayer")}catch(t){h.w.printStackTrace(t)}},B.hide=function(t){try{if(!t)return;t.style.display="none",t.style.visibility="hidden",t.setAttribute("aria-hidden","true"),WebSquare.style.removeClass(t,"w2modal_popupLayer")}catch(t){h.w.printStackTrace(t)}},B.getAbsoluteTop=function(t,e){var i=0;try{if(!t)return 0;if(null!=t.getBoundingClientRect){var o=t.getBoundingClientRect().top,s=t.ownerDocument,r=s.documentElement,a=s.body,n=s.window===s?s:9===s.nodeType?s.defaultView||s.parentWindow:null,l=r.clientTop||a.clientTop||0,h=n.pageYOffset||r.scrollTop;(g.D.isIE(9)||g.D.isIE(10))&&(h=r.scrollTop);var d=a.getBoundingClientRect();i=(o+h-l)/(g.D.isIE("6")||g.D.isIE("7")?(d.bottom-d.top)/a.offsetHeight:1),e||(i/=WebSquare.style.getScale())}else{for(var c=t,u=t,p=0;"BODY"!=u.tagName;){var m=g.D.parseFloat(g.D.getStyleProperty(u,"border-top-width"),0);g.D.isOpera()&&(m=0);o=u.offsetTop;if("fixed"==g.D.getStyleProperty(u,"position")){if(o=g.D.parseFloat(g.D.getStyleProperty(u,"top"),0),!g.D.isIE("6")){p+=o+m-u.scrollTop+m+(window.scrollY||document.documentElement.scrollTop);break}}else"static"!=g.D.getStyleProperty(u,"position")||c==u?p+=o+m-u.scrollTop:p-=u.scrollTop;u=u.parentNode}i=p}}catch(t){}return i},B.getAbsoluteLeft=function(t,e){var i=0;try{if(!t)return 0;if(null!=t.getBoundingClientRect){var o=t.getBoundingClientRect().left,s=t.ownerDocument,r=s.documentElement,a=s.body,n=s.window===s?s:9===s.nodeType?s.defaultView||s.parentWindow:null,l=r.clientLeft||a.clientLeft||0,h=n.pageXOffset||r.scrollLeft;(g.D.isIE(9)||g.D.isIE(10))&&(h=r.scrollLeft);var d=a.getBoundingClientRect();i=(o+h-l)/(g.D.isIE("6")||g.D.isIE("7")?(d.right-d.left)/a.offsetWidth:1),e||(i/=WebSquare.style.getScale())}else{for(var c=0,u=t,p=t;"BODY"!=u.tagName;){var m=g.D.parseFloat(g.D.getStyleProperty(u,"border-left-width"),0);g.D.isOpera()&&(m=0);o=u.offsetLeft;if("fixed"==g.D.getStyleProperty(u,"position")){if("number"==typeof g.D.getStyleProperty(u,"left")&&(o=g.D.parseFloat(g.D.getStyleProperty(u,"left"),0)),!g.D.isIE("6")){c+=o+m-u.scrollLeft+(window.scrollX||document.documentElement.scrollLeft);break}}else"static"!=g.D.getStyleProperty(u,"position")||p==u?c+=o+m-u.scrollLeft:c-=u.scrollLeft;u=u.parentNode}i=c}}catch(t){}return i},B.getRelativeTop=function(t,e){var i=0;try{i=WebSquare.style.getAbsoluteTop(t)-WebSquare.style.getAbsoluteTop(e)}catch(t){}return i},B.getRelativeLeft=function(t,e){var i=0;try{i=WebSquare.style.getAbsoluteLeft(t)-WebSquare.style.getAbsoluteLeft(e)}catch(t){}return i},
B.adjustZIndex=function(t,e,i){try{for(var o=WebSquare.idCache[t],s=WebSquare.idCache[e],r=$(s.render).css("zIndex"),a=$(s.render).css("zIndex"),n=o.render;n&&n!==document.documentElement;n=n.parentNode){var l=$(n).css("zIndex");!isNaN(l)&&a<l&&(a=parseInt(l,10)+this.zIndexCorrection[i])}r!=a&&$(s.render).css("zIndex",a)}catch(t){h.w.printStackTrace(t,null,this)}},B.getComputedStyle=function(t,e){var i=window.getComputedStyle,o=i?i(t):t.currentStyle,s=e?e.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()})):"";return o&&!s?o:o&&(o[s]||window.getPropertyValue&&window.getPropertyValue(s))||""},B.toJSON=function(t){var e=document.createElement("a");e.style.cssText=t;var i=a.x.extend({},e.style);return e=null,i},B.getScale=function(){try{var t=1;if(g.D.isIE("6 7 8"))t=1;else if(null!=WebSquare.BootLoader.fullViewRatio)t=WebSquare.BootLoader.fullViewRatio;else if(document.body.style.transform)try{t=document.body.style.transform.split("scale")[1].slice(1,-1)}catch(e){t=1}else if(document.body.style.msTransform)try{t=document.body.style.msTransform.split("scale")[1].slice(1,-1)}catch(e){t=1}else if(g.D.isIE(9))for(var e=self,i=0;i<1e3;i++)try{if(e.parent===e)break;e.parent.WebSquare,(e=e.parent).document.body.style.msTransform&&(t=e.document.body.style.msTransform.split("scale")[1].slice(1,-1))}catch(e){t=1;break}return parseFloat(t)}catch(t){return h.w.printStackTrace(t,null,this),1}};var V=__webpack_require__(1577),P=function(){};P.prototype.parse=async function(t,e,i){try{this.parseConfig(t),this.parseCSS(t,e,i),await this.parseUDC2(t,i),i||(this.parseBuildDate(t),this.parseTitle(t)),this.parseMeta(t),this.parseModels(t,i);var o=await this.parseScript(t,i);return null!=i?this.parseDataCollections(t,i):this.parseDataCollections(t),this.parseMSA(t,i),o}catch(t){h.w.printStackTrace(t)}},P.prototype.parseDataCollection=function(t,e,i){try{var o={id:WebSquare.jsonUtil.getAttribute(t,"id"),elementType:"JSON",type:e,option:{}},s=WebSquare.jsonUtil.getAttributesObject(t);for(var r in s)s.hasOwnProperty(r)&&(o.option[r]=s[r]);var a="";switch(e){case"dataList":a="column";break;case"dataMap":a="key"}if("dataList"===e||"dataMap"===e){o[a+"Info"]=[];for(var n=WebSquare.jsonUtil.getNodesByTagName(t,a+"Info",WebSquare.core._XML_NAMESPACE.W2),l=0;l<n.length;l++)for(var d=n[l],c=WebSquare.jsonUtil.getNodesByTagName(d,a,WebSquare.core._XML_NAMESPACE.W2),u=0;u<c.length;u++){var p=c[u];o[a+"Info"].push(this.parseDataCollectionInfo(p))}var g=WebSquare.jsonUtil.getNodesByTagName(t,"data",WebSquare.core._XML_NAMESPACE.W2);for(l=0;l<g.length;l++){var m=g[l];if(WebSquare.util.getBoolean(WebSquare.jsonUtil.getAttribute(m,"use"))){if("dataList"===e){S=[];var f=WebSquare.jsonUtil.getNodesByTagName(m,"row",WebSquare.core._XML_NAMESPACE.W2);for(u=0;u<f.length;u++){for(var b=f[u],y={},v=WebSquare.jsonUtil.getChildNodes(b),w=0;w<v.length;w++)null==v[w].E?y[v[w].N]="":y[v[w].N]=null!=v[w].E[0].cdata?v[w].E[0].cdata:v[w].E[0].text.wq_trim();S.push(y)}}else{var S={};for(v=WebSquare.jsonUtil.getChildNodes(m),w=0;w<v.length;w++)null==v[w].E?S[v[w].N]="":S[v[w].N]=null!=v[w].E[0].cdata?v[w].E[0].cdata:v[w].E[0].text.wq_trim()}o.option.useData=!0,o.data=S}}}else if("linkedDataList"===e){var C=WebSquare.jsonUtil.getNodesByTagName(t,"condition",WebSquare.core._XML_NAMESPACE.W2);for(l=0;l<C.length;l++){d=C[l];var _=WebSquare.jsonUtil.getAttribute(d,"type"),x=WebSquare.jsonUtil.getChildNodes(d);if(x.length>0){var I="string"==typeof x[0].cdata?x[0].cdata.wq_trim():"";I&&"filter"===_?o.option.filterCondition=I:I&&"sort"===_&&(o.option.sortCondition=I)}}}o&&o.option&&(o.option.xmlEvents=WebSquare.Parser.parseEvent(t)),new WebSquare.DataCollection[e](null,null,o,e,i)}catch(t){h.w.printStackTrace(t)}},P.prototype.parseDataCollectionInfo=function(t){try{var e={},i=WebSquare.jsonUtil.getAttributesObject(t);for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}catch(t){h.w.printStackTrace(t)}},P.prototype.parseMeta=function(t){
var e=["meta","Meta","META"],i=document.getElementsByTagName("head")[0],o=i.getElementsByTagName("meta"),s=[],r=WebSquare.jsonUtil.getNodesByTagName(t,"screen",WebSquare.core._XML_NAMESPACE.W2);if(r&&r.length>0){var a=document.createElement("meta");a.name="viewport",a.content="width=device-width initial-scale=1.0",i.appendChild(a)}for(var n=0;n<o.length;n++){((u=o[n].getAttribute("http-equiv"))||(u=o[n].getAttribute("name")))&&s.push(u)}for(n=0;n<e.length;n++){var l=WebSquare.jsonUtil.getNodesByTagName(t,e[n],WebSquare.core._XML_NAMESPACE.XHTML);if(null!=l)for(var h=0;h<l.length;h++){for(var d=WebSquare.jsonUtil.getAttributes(l[h]),c=0;c<d.length;c++){var u;if("http-equiv"===d[c])u=WebSquare.jsonUtil.getAttribute(l[h],d[c]);else{if("name"!==d[c])continue;u=WebSquare.jsonUtil.getAttribute(l[h],d[c])}for(var p=0;p<s.length;p++)if(s[p]===u){for(var g=0;g<o.length;g++)if(o[g].getAttribute("http-equiv")==u||o[g].getAttribute("name")==u){i.removeChild(o[g]);break}break}break}for(var m=document.createElement("meta"),f=0;f<d.length;f++)m.setAttribute(d[f],WebSquare.jsonUtil.getAttribute(l[h],d[f]));i.appendChild(m)}}},P.prototype.parsePageInheritBefore=function(t,e,i){try{this.preParse(t),this.parseMeta(t),this.parseModels(t,i),null!=i?this.parseDataCollections(t,i):this.parseDataCollections(t)}catch(t){h.w.printStackTrace(t)}},P.prototype.parsePageInheritAfter=async function(t,e,i){try{return this.parseCSS(t,e,i,WebSquare.WebSquaredoc.cssList[0]),await this.parseScript(t,i,!0)}catch(t){h.w.printStackTrace(t)}},P.prototype.preParse=function(t,e){try{if(WebSquare.core.browserCheck.ieAllVersion&&WebSquare.BootLoader.useActiveXObject){var i=WebSquare.core.getNamespaces(t),o="";for(var s in i)""!=s&&(o+="xmlns:"+s+'="'+i[s]+'" ');t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",o)}!1!==e&&this.parseConfig(t)}catch(t){h.w.printStackTrace(t)}},P.prototype.parseCSS=function(t,e,i,o){try{var s=WebSquare.core.getConfiguration("/WebSquare/stylesheet/@value");if("false"!=WebSquare.core.getConfiguration("/WebSquare/stylesheet/@enable")&&!e&&!i&&!WebSquare.styleSheetEarlyImport){null!=s&&""!=s||(s="link"==WebSquare.core.getConfiguration("/WebSquare/stylesheet/@import")?"stylesheet_ext.css":"stylesheet.css");var r=WebSquare.BootLoader.inquiresPath("skin/");WebSquare.skin.addImport(WebSquare.baseThemeURI+r+s),WebSquare.cssManager.executeImport()}this.importCSS(t,i);var a="";if(i&&i.options.cssFunction&&!i.options.strictFrame&&(a=WebSquare.util.getGlobalFunction(i.options.cssFunction,i.id)),i&&!i.options.strictFrame){if("function"==typeof a){for(var n=[],l=0;l<WebSquare.cssManager.externalCSSLink.length;l++)n.push(WebSquare.cssManager.externalCSSLink[l].href);if(!0===a(i.id,n)){for(l=0;l<n.length;l++)for(var d in WebSquare.skin.skinTag)if(WebSquare.util._getAbsolutePath(n[l])==WebSquare.skin.skinTag[d]){WebSquare.skin.skinTag.splice(d,1);break}WebSquare.cssManager.externalCSSLink=[]}}i.frameDoc.cssList=i.frameDoc.cssList.concat(WebSquare.cssManager.executeImport(o))}else WebSquare.WebSquaredoc.cssList=WebSquare.WebSquaredoc.cssList.concat(WebSquare.cssManager.executeImport(o))}catch(t){h.w.printStackTrace(t)}},P.prototype.importCSS=function(t,e){try{for(var i=WebSquare.jsonUtil.getNodesByTagName(t,"style",WebSquare.core._XML_NAMESPACE.XHTML),o="",s=0;s<i.length;s++){var r=i[s];if(WebSquare.jsonUtil.matchType(r,WebSquare.Elem.type.element))for(var a=WebSquare.jsonUtil.getChildNodes(r),n=0;n<a.length;n++){var l=a[n];(WebSquare.jsonUtil.matchType(l,WebSquare.Elem.type.text)||WebSquare.jsonUtil.matchType(l,WebSquare.Elem.type.cdata))&&(o+=l.text||l.cdata)}}""!=o.wq_trim()&&WebSquare.cssManager.addInternalCSS(o);for(a=WebSquare.jsonUtil.getChildNodes(t),s=0;s<a.length;s++){r=a[s];if(WebSquare.jsonUtil.matchType(r,WebSquare.Elem.type.instruction)&&"xml-stylesheet"===r.N){var d=r.instruction.wq_replaceAll("=","").split('"');d.pop();var c={};for(n=0;n<d.length;n+=2)c[d[n].wq_trim()]=d[n+1];if(c.href){var u={frameObj:e,
msaName:c.msaName},p=WebSquare.core._getMsaSrc(c.href,u);c.href=WebSquare.util.getAbsolutePath(p)}null==c.type&&(c.type="text/css"),null==c.rel&&(c.rel="stylesheet"),WebSquare.skin.addImport(c,!0)}}}catch(t){h.w.printStackTrace(t)}},P.prototype.parseConfig=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(t,"config",WebSquare.core._XML_NAMESPACE.W2);1===e.length&&WebSquare.WebSquaredoc.mergeConfig(e[0])}catch(t){h.w.printStackTrace(t)}},P.prototype.parseBuildDate=function(t){try{var e=WebSquare.jsonUtil.getNodesByTagName(t,"buildDate",WebSquare.core._XML_NAMESPACE.W2);if(1===e.length){var i=WebSquare.jsonUtil.getChildNodes(e[0]);i.length>0&&(WebSquare.buildDate=i[0].text)}else WebSquare.buildDate="N/A"}catch(t){WebSquare.buildDate="N/A",h.w.printStackTrace(t)}},P.prototype.parseTitle=function(t){try{var e=WebSquare.jsonUtil.getNodesByTagName(t,"title",WebSquare.core._XML_NAMESPACE.XHTML);if(1===e.length){var i=WebSquare.jsonUtil.getChildNodes(e[0]);WebSquare.docTitle=document.title=i[0].text}}catch(t){h.w.printStackTrace(t)}},P.prototype.parseModels=function(t,e){try{for(var i=WebSquare.jsonUtil.getNodesByTagName(t,"model",WebSquare.core._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)e?e.frameDoc&&!e.options.strictFrame?e.frameDoc.models.push(this.parseModel(i[o],e)):!0===e.options.strictFrame&&WebSquare.WebSquaredoc.models.push(this.parseModel(i[o],e)):WebSquare.WebSquaredoc.models.push(this.parseModel(i[o]))}catch(t){h.w.printStackTrace(t)}},P.prototype.parseDataCollections=function(t,e){var i=WebSquare.jsonUtil.getNodesByTagName(t,"dataCollection",WebSquare.core._XML_NAMESPACE.W2)[0];if(i){this.parseDataCollectionAttribute(i);for(var o=e?e.uuid:null,s=WebSquare.jsonUtil.getChildNodes(i),r=0;r<s.length;r++){var a=s[r];a.T==WebSquare.Elem.type.element&&this.parseDataCollection(a,WebSquare.jsonUtil.dropNS(a.N),o)}}},P.prototype.parseModel=function(t,e){try{var i=this.parseInstances(t),o=this.parseBinds(t),s=this.parseSubmissions(t,e),r=this.parseWorkflows(t,e);return new WebSquare.Model(t,i,o,s,r)}catch(t){h.w.printStackTrace(t)}},P.prototype.parseDataCollectionAttribute=function(t){try{if(WebSquare.DataCollection.options.useConfig){var e=WebSquare.core.getConfig("dataCollection");WebSquare.DataCollection.options=a.x.extendKeepingType(WebSquare.DataCollection.options,e)}var i=WebSquare.jsonUtil.getAttributesObject(t);for(var o in i)i.hasOwnProperty(o)&&(WebSquare.nodeValueDeprecated,WebSquare.DataCollection.api.setOption(o,i[o]))}catch(t){h.w.printStackTrace(t)}},P.prototype.parseInstances=function(t){try{for(var e=WebSquare.Elem.api.getElementsByTagName(t,"instance",WebSquare.core._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;o++)i.push(this.parseInstance(e[o]._element._xml));return i}catch(t){h.w.printStackTrace(t)}},P.prototype.parseInstance=function(t){try{return WebSquare.Parser.WebSquareParser.prototype.parseInstance.call(this,t)}catch(t){h.w.printStackTrace(t)}},P.prototype.parseBinds=function(t){try{for(var e=WebSquare.Elem.api.getElementsByTagName(t,"bind",WebSquare.core._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;++o)i.push(this.parseBind(e[o]));return i}catch(t){h.w.printStackTrace(t)}},P.prototype.parseBind=function(t){try{return new WebSquare.Model.Bind(t,"nodeset",t.getAttribute("nodeset"),null,t.getAttribute("id"))}catch(t){h.w.printStackTrace(t)}},P.prototype.parseSubmissions=function(t,e){try{for(var i=WebSquare.Elem.api.getElementsByTagName(t,"submission",WebSquare.core._XML_NAMESPACE.XFORMS),o=[],s=0;s<i.length;s++)o.push(this.parseSubmission(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},P.prototype.parseSubmission=function(t,e,i){try{
var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"method","")||WebSquare.core.getConfiguration("/WebSquare/submission/method/@value")||"POST",r=WebSquare.WebSquareparser.getAttribute(t,"action","")||WebSquare.core.getConfiguration("/WebSquare/submission/action/@value"),a=WebSquare.WebSquareparser.getAttribute(t,"mode","")||WebSquare.core.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",n=WebSquare.WebSquareparser.getAttribute(t,"mediatype","")||WebSquare.core.getConfiguration("/WebSquare/submission/mediatype/@value"),l=WebSquare.WebSquareparser.getAttribute(t,"encoding","")||WebSquare.core.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",d=WebSquare.WebSquareparser.getAttribute(t,"ref"),c=WebSquare.WebSquareparser.getAttribute(t,"target"),u=WebSquare.WebSquareparser.getAttribute(t,"replace"),p=WebSquare.WebSquareparser.getAttribute(t,"instance"),g=WebSquare.WebSquareparser.getAttribute(t,"preSubmitFunction","")||WebSquare.core.getConfiguration("/WebSquare/submission/preSubmitFunction/@value")||"",m=WebSquare.WebSquareparser.getAttribute(t,"customHandler"),f=WebSquare.WebSquareparser.getAttribute(t,"errorHandler");""==f&&(f=WebSquare.core.getConfiguration("/WebSquare/submission/errorHandler/@value"));var b=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==b&&(b=WebSquare.core.getConfiguration("/WebSquare/submission/processMsg/@value"));var y="true"===this.getAttribute(t,"abortTrigger")||"false"!==this.getAttribute(t,"abortTrigger")&&"true"===WebSquare.core.getConfiguration("/WebSquare/submission/abortTrigger/@value"),v=WebSquare.WebSquareparser.getAttribute(t,"soapaction",""),w="true"===WebSquare.WebSquareparser.getAttribute(t,"useModal");""==n&&("post"!=s&&"POST"!=s||(n="application/xml"));var S=WebSquare.Parser.parseEvent(t,i)||[],C=this.getAttribute(t,"timeout","")||WebSquare.core.getConfiguration("/WebSquare/submission/timeout/@value"),_=this.getAttribute(t,"singleMode")||!1,x="false"!==this.getAttribute(t,"hideProcessMsg")&&("true"===this.getAttribute(t,"hideProcessMsg")||"false"!==WebSquare.core.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),I="true"===this.getAttribute(t,"withCredentials"),T=WebSquare.WebSquareparser.getAttribute(t,"webtopRef",""),k=WebSquare.WebSquareparser.getAttribute(t,"userData1",""),D=WebSquare.WebSquareparser.getAttribute(t,"userData2",""),L=o,W=null,A="";i&&i.options&&i.options.scope&&(o=(A=i.id+"_")+L,W=i.id);var M=WebSquare.WebSquareparser.getAttribute(t,"ev:submit"),E=WebSquare.WebSquareparser.getAttribute(t,"ev:submitdone"),q=WebSquare.WebSquareparser.getAttribute(t,"ev:submiterror"),R=WebSquare.WebSquareparser.getAttribute(t,"ev:submittimeout"),N={};M&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit","script",{handler:A+M})),N.submitHandler=M),E&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-done","script",{handler:A+E})),N.submitDoneHandler=E),q&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-error","script",{handler:A+q})),N.submitErrorHandler=q),R&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-timeout","script",{handler:A+R})),N.submitTimeoutHandler=R),N.parentElement=e,N.element=t,N.id=o,N.org_id=L,N.method=s,N.action=r,N.mode=a,N.bind=null,N.mediatype=n,N.encoding=l,N.ref=d,N.target=c,N.replace=u,N.instance=p,N.customHandler=m,N.errorHandler=f,N.soapaction=v,N.processMsg=b,N.xmlEvents=S,N.timeout=C,N.singleMode=_,N.hideProcessMsg=x,N.abortTrigger=y,N.preSubmitFunction=g,N.scope_id=W,N.withCredentials=I,N.useModal=w,N.webtopRef=T,N.userData1=k,N.userData2=D,N.msaName=WebSquare.WebSquareparser.getAttribute(t,"msaName");var F=new WebSquare.Model.Submission(N);return i&&i.options&&i.options.scope&&(i.scope[L]=F),WebSquare.core.useSubmissionGlobal&&(window[F.id]=F),F}catch(t){h.w.printStackTrace(t)}},P.prototype.parseScript=async function(t,e,i,o){try{
if(!o)if(e?e.options&&e.options.strictFrame?WebSquare.scriptSection="":e.frameDoc&&(e.frameDoc.scriptSection=""):WebSquare.scriptSection="",e){if(e.options&&e.options.initScript){var s=e.options.initScript.toString();e.options.strictFrame?WebSquare.scriptSection+=s:"executed"===WebSquare.scriptSectionExcuteFlag&&(e.frameDoc.scriptSection+=s)}}else"true"==WebSquare.core.getConfiguration("/WebSquare/initScript/@value")&&WebSquare.w2xPath!==WebSquare.net.getBlankXML()&&(WebSquare.scriptSection+=WebSquare.core.getConfiguration("/WebSquare/initScript"));var r=e&&e.options.src?e.getSrc():WebSquare.w2xPath,a=WebSquare.jsonUtil.getNodesByTagName(t,"head",WebSquare.core._XML_NAMESPACE.XHTML);if(1!==a.length)return alert(WebSquare.language.getMessage("E_Parser_MoreThanOneHeadError",a.length)),!1;for(var n=a[0],l=(e&&e._isUDC2,0);l<n.E.length;l++){var d=n.E[l];if(WebSquare.jsonUtil.matchTagName(d,"script",WebSquare.core._XML_NAMESPACE.XHTML)){var c=WebSquare.jsonUtil.getAttribute(d,"src"),u=WebSquare.util.getBoolean(WebSquare.jsonUtil.getAttribute(d,"scopeExternal"))||e&&e.options.scopeExternal,p=WebSquare.jsonUtil.getAttribute(d,"scopeVariable")||"";if(null!=c&&""!=c){var g=WebSquare.jsonUtil.getAttribute(d,"cache"),m=WebSquare.jsonUtil.getAttribute(d,"defer"),f=WebSquare.jsonUtil.getAttribute(d,"msaName");await WebSquare.Parser.parseExternalScript({uri:c,cache:g,lazy:m,frameObj:e,pageInherit:i,scopeExternal:u,scopeVariable:p,msaName:f})}else{if(o)continue;var b=WebSquare.jsonUtil.getAttribute(d,"loadAt"),y=-1;if("string"==typeof b&&""!=b)switch(b=b.wq_trim().toUpperCase()){case"WEBSQUARE_START":case"START":y=1;break;case"ENGINE_LOAD":case"ENGINE":y=2;break;case"RESOURCE_LOAD":case"RESOURCE":y=3;break;case"CREATE_COMPONENT":case"CREATE":y=4;break;case"RENDER_DOM":case"RENDER":y=5;break;case"ADJUST_COMPONENT":case"ADJUST":y=6;break;case"BIND_EVENT":case"EVENT":y=7;break;case"EXECUTE_SCRIPT":case"EXECUTE":default:y=8}if(y=!0===WebSquare._async?4:3,"executed"===WebSquare.scriptSectionExcuteFlag){var v=WebSquare.core.scriptPrecedence;if(WebSquare.core.scriptPrecedence=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/scriptPrecedence/@value")),v!==WebSquare.core.scriptPrecedence){var w=e&&e.options?e.getSrc():WebSquare.w2xPath;WebSquare.logger.printLog('parser : "scriptPrecedence" turned on. ['+w+"]")}}for(var S=y>2&&y<8,C=WebSquare.jsonUtil.getChildNodes(d),_=0;_<C.length;_++){if((I=C[_]).T===WebSquare.Elem.type.text||I.T===WebSquare.Elem.type.cdata){var x=I.text||I.cdata;e?(e.options&&e.options.initScript&&"executed"!==WebSquare.scriptSectionExcuteFlag&&!e.options.strictFrame&&(S?e.frameDoc.scriptSection+=e.options.initScript:x=e.options.initScript+x),!0!==WebSquare.core.scriptPrecedence&&e.options&&e.options.postScript&&!S&&!e.options.strictFrame&&(x+=e.options.postScript),x=e.options&&e.options.scope?WebSquare.util.scopingFuncBody(x,e.id,!0):WebSquare.util.scopingFuncBody(x,null,!0),S?(null==WebSquare.executePointScriptArr[y]&&(WebSquare.executePointScriptArr[y]=[]),WebSquare.executePointScriptArr[y].push({script:x,path:r,scope:e&&e.id}),!0===WebSquare.core.scriptPrecedence||e.options.strictFrame||(e.frameDoc.scriptSection+=e.options.postScript)):e.options&&e.options.strictFrame?WebSquare.scriptSection+=x:(e.frameDoc.scriptSection+=x,e._scriptLazy=!0)):(x=WebSquare.util.scopingFuncBody(x,null,!0),y>2&&y<8?(null==WebSquare.executePointScriptArr[y]&&(WebSquare.executePointScriptArr[y]=[]),WebSquare.executePointScriptArr[y].push({script:x,path:r,scope:e&&e.id})):WebSquare.scriptSection+=x)}}}}else if(e&&e.scope&&WebSquare.jsonUtil.matchTagName(d,"env",WebSquare.core._XML_NAMESPACE.W2))for(C=WebSquare.jsonUtil.getChildNodes(d),_=0;_<C.length;_++){var I;if((I=C[_]).T===WebSquare.Elem.type.text||I.T===WebSquare.Elem.type.cdata){"string"==typeof(x=I.text||I.cdata)&&(x=JSON.parse(x));var T=WebSquare.jsonUtil.getAttribute(d,"variable")||"env";for(var k in e.scope)e.scope[k][T]=x}}}o||WebSquare.core.executePointScript(3)
}catch(t){h.w.printStackTrace(t)}return!0},P.prototype.findBindElement=function(t){try{return null==t.attributes?null:null!=t.attributes.getNamedItem("bind")?WebSquare.ModelUtil.getBind(t.attributes.getNamedItem("bind").value):null}catch(t){h.w.printStackTrace(t)}},P.prototype.parseLabel=function(t){var e=WebSquare.Elem.api.getElementsByTagName(t,"label",WebSquare.core._XML_NAMESPACE.XFORMS);if(null==e[0])return null;for(var i=e[0].getChildNodes(0),o="",s=0;s<i.length;s++)if(3===i[s].nodeType||4===i[s].nodeType){o=i[s].getNodeValue();break}return{value:o}},P.prototype.parseChoices=function(t,e){var i=[];if(e=e||"xf",t){var o="xf"==(e=t.getNamespace())?WebSquare.core._XML_NAMESPACE.XFORMS:WebSquare.core._XML_NAMESPACE.W2,s=WebSquare.Elem.api.getElementsByTagName(t,"choices",o)[0];if(s){var r=WebSquare.Elem.api.getElementsByTagName(s,"item",o);if(r)for(var a=0;a<r.length;++a){var n=r[a],l="",h=WebSquare.Elem.api.getElementsByTagName(n,"label",o)[0];h&&(l=WebSquare.Elem.api.getValue(h,"@ref")||WebSquare.Elem.api.getCDataNodeValue(h)||WebSquare.Elem.api.getTextNodeValue(h));var d="",c=WebSquare.Elem.api.getElementsByTagName(n,"value",o)[0];c&&(d=WebSquare.Elem.api.getValue(c,"@ref")||WebSquare.Elem.api.getCDataNodeValue(c)||WebSquare.Elem.api.getTextNodeValue(c)),i.push({label:l,value:d})}}}return i},P.prototype.parseItemset=function(t,e){var i={nodeset:"",label:"",value:""};try{if(t){e=e||"xf";try{var o=t.getTagName();o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s,r="xf"==e?WebSquare.core._XML_NAMESPACE.XFORMS:WebSquare.core._XML_NAMESPACE.W2,a=WebSquare.Elem.api.getElementsByTagName(t,"choices",r)[0];if(a){if(s=WebSquare.Elem.api.getElementsByTagName(a,"itemset",r)[0]){var n=WebSquare.Elem.api.getValue(s,"@nodeset"),l=WebSquare.Elem.api.getElementsByTagName(s,"label",r)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"value",r)[0],c=WebSquare.Elem.api.getValue(l,"@ref"),u=WebSquare.Elem.api.getValue(d,"@ref");i.nodeset=n,i.label=c,i.value=u}}else if(s=WebSquare.Elem.api.getElementsByTagName(t,"itemset",r)[0]){n=WebSquare.Elem.api.getValue(s,"@nodeset"),l=WebSquare.Elem.api.getElementsByTagName(s,"label",r)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"value",r)[0],c=WebSquare.Elem.api.getValue(l,"@ref"),u=WebSquare.Elem.api.getValue(d,"@ref");i.nodeset=n,i.label=c,i.value=u}}}catch(t){h.w.printStackTrace(t)}return i},P.prototype.parseAttribute=function(t){try{return WebSquare.Parser.parseAttribute(t)}catch(t){h.w.printStackTrace(t)}},P.prototype.getAttribute=function(t,e,i){var o=t.getAttribute(e);return null==o||""==o?void 0!==i?i:"":o},P.prototype.attributesItem=function(t){this.name=t.name,this.ref=t.ref,this.value=t.value},P.prototype.attributesItem.prototype.setValue=function(t){this.value=t},P.prototype.attributesItem.prototype.getValue=function(){return this.value},P.prototype.parseWorkflows=function(t,e){try{for(var i=WebSquare.Elem.api.getElementsByTagName(t,"workflow",WebSquare.core._XML_NAMESPACE.W2),o=[],s=0;s<i.length;s++)o.push(this.parseWorkflow(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},P.prototype.parseWorkflow=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"resolveCallback",""),r=WebSquare.WebSquareparser.getAttribute(t,"rejectCallback",""),a=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==a&&(a=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var n=WebSquare.Elem.api.getElementsByTagName(t,"step",WebSquare.core._XML_NAMESPACE.W2),l=[],d=0;d<n.length;d++){var c=n[d],u=WebSquare.Parser.parseAttribute(c);l.push(u)}var p=o,g=null;i&&i.options&&i.options.scope&&(o=i.id+"_"+p,g=i.id);var m=new WebSquare.Model.Workflow(e,t,o,s,r,a,l,g);return i&&i.options&&i.options.scope&&(i.scope[p]=m),WebSquare.core.useWorkflowGlobal&&(window[m.id]=m),m}catch(t){h.w.printStackTrace(t)}},P.prototype.parseUDC2=async function(t,e){try{
for(var i=WebSquare.Elem.api.getElementsByTagName(t,"head")[0],o=WebSquare.Elem.api.getElementsByTagName(i,"require",WebSquare.core._XML_NAMESPACE.W2),s=0;s<o.length;s++){var r=o[s],a=r.getAttribute("as")||r.getAttribute("componentName");if(a&&"page"===r.getAttribute("type")&&null==WebSquare.core.udcObj[a]){var n=r.getAttribute("src"),l={msaName:r.getAttribute("msaName"),frameObj:e},d=WebSquare.core._getMsaSrc(n,l);d=WebSquare.core.getPageURL(d,{skipURL:!0,skipUri:!0}),WebSquare.core.udcObj[a]=await WebSquare.jsLoader._loadObj(d,l),WebSquare.core.udcMsa[a]=l.msaName}}}catch(t){h.w.printStackTrace(t)}},P.prototype.parseMSA=function(t,e){var i=WebSquare.jsonUtil.getNodesByTagName(t,"MSA",WebSquare.core._XML_NAMESPACE.W2);(i=i[0])&&(WebSquare.msgBroker||(WebSquare.msgBroker=new WebSquare.MessageBroker),WebSquare.msgBroker.initialize(i,e))};var H=function(t){try{this.data=t,this.data._initParent=!1,this.models=[],this.cssList=[],this.idCollisionList={},this.type="json",this.boundElement=[],this.refElement=[],this.instanceRefElement=[],this.itemsetElement=[],this.boundElementCache={}}catch(t){h.w.printStackTrace(t)}};H.prototype.parsing=function(t){try{if(null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),!WebSquare.WebSquareparser.parse(this.data,t,WebSquare.strictModeFrame))return!1;if(this.parsingUDC(t,WebSquare.strictModeFrame),t?(WebSquare.BootLoader.performanceCheck.mid2=new Date,WebSquare.BootLoader.printLog("[SPA3][RESOURCE] New resource(XML, Skin, CSS) Load Complete. Time:"+(WebSquare.BootLoader.performanceCheck.mid2.getTime()-WebSquare.BootLoader.performanceCheck.mid1.getTime())+"ms")):(WebSquare.BootLoader.performanceCheck.mid2=new Date,WebSquare.BootLoader.printLog("[STEP3][RESOURCE] Resource(XML, Skin, CSS) Load Complete. Time:"+(WebSquare.BootLoader.performanceCheck.mid2.getTime()-WebSquare.BootLoader.performanceCheck.mid1.getTime())+"ms")),WebSquare.util._stopProcess(t))return;return!!this.renderBody(t)}catch(t){h.w.printStackTrace(t)}},H.prototype.renderBody=function(t){var e=this.data.html.body;if(e.length>1)return alert(WebSquare.language.getMessage("E_pageInfo_MoreThanOneBodyError",e.length)),!1;var i=e["-style"];null!=i&&(this.bodyStyle=i),this.body=e,(new WebSquare.controlManager).run2(e,t)},H.prototype.parsingWFrame=async function(t,e,i){try{null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser);var o=WebSquare.WebSquareparser.parse(this.data,t,e);return!0===i&&(WebSquare.controlFactory._awaitObj.promiseObj[e.id]=o,WebSquare.controlFactory._awaitObj.key.push(e.id)),o}catch(t){h.w.printStackTrace(t)}},H.prototype.parsingPageInheritBefore=async function(t,e){try{null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),WebSquare.WebSquareparser.parsePageInheritBefore(this.data,t,e),await this.parsingUDC(t,e)}catch(t){h.w.printStackTrace(t)}},H.prototype.parsingPageInheritAfter=async function(t,e){try{return null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),await WebSquare.WebSquareparser.parsePageInheritAfter(this.data,t,e)}catch(t){h.w.printStackTrace(t)}},H.prototype.parsingUDC=async function(t,e){try{for(var i=WebSquare.Elem.api.getElementsByTagName(this.data,"head")[0],o=WebSquare.Elem.api.getElementsByTagName(i,"require",WebSquare.core._XML_NAMESPACE.W2),s=0;s<o.length;s++)if("page"!==o[s].getAttribute("type")){var r=o[s].getAttribute("src"),a=WebSquare.core.getPageURL(r),n=o[s].getAttribute("id"),l=o[s].getAttribute("pluginName"),d=o[s].getAttribute("cache");r=WebSquare.core.getURL(r),await WebSquare.util.loadUserComponent(a,n,l,e,d,void 0,r)}var c=WebSquare.Elem.api.getElementsByTagName(i,"inherit",WebSquare.core._XML_NAMESPACE.W2);for(s=0;s<c.length;s++){a=WebSquare.core.getPageURL(c[s].getAttribute("src"));await WebSquare.util.loadInheritComponent(a)}}catch(t){h.w.printStackTrace(t)}},H.prototype.getPageInfo=function(){try{return this.data}catch(t){h.w.printStackTrace(t)}},
H.prototype.getType=function(){try{return this.type}catch(t){h.w.printStackTrace(t)}},H.prototype.unrender=function(t,e,i){try{for(var o=0;o<this.boundElement.length;o++){var s=this.boundElement[o];s&&void 0!==s.filteredNodeset&&void 0!==s.instance&&(0==s.filteredNodeset.indexOf(t)&&s.instance.id==i&&(void 0!==e&&null!=e&&e==s.id||(WebSquare.util.getComponentById(s.id).hasbeenrendered=!1)))}for(var r in this.refElement){var a=this.refElement[r];a&&void 0!==a.filteredNodeset&&void 0!==a.instance&&(0==a.filteredNodeset.indexOf(t)&&a.instance.id==i&&(void 0!==e&&null!=e&&e==s.id||(WebSquare.util.getComponentById(a.id).hasbeenrendered=!1)))}for(var n in this.itemsetElement){var l=this.itemsetElement[n];if(void 0!==l.filteredNodeset)if((0==t.indexOf(l.filteredNodeset)||0==l.filteredNodeset.indexOf(t))&&-1==l.filteredNodeset.substr(t.length).search(/^\w/)&&l.instance.id==i)if(l.id!=e)try{WebSquare.util.getComponentById(l.id).itemsetrendered=!1}catch(t){}}}catch(t){h.w.printStackTrace(t)}},H.prototype.detectChange=function(t,e,i,o){try{o=o||{};var s=WebSquare.ModelUtil.getModelByID(i),r=!(!o||!o.scope_id),a=s.instances[0].id;if(r)for(var n=0,l=s.instances.length;n<l;n++){var d=s.instances[n];if(d.scope_id===o.scope_id){a=d.id;break}}if(null!=a&&(t=WebSquare.ModelUtil.concatInstanceFunction(t,a)),void 0!==this.boundElementCache[t]&&null!=this.boundElementCache[t])for(var n in this.boundElementCache[t]){var c=n;if(c!=e){var u=WebSquare.util.getComponentById(c);u.modelControl.ref&&u.modelControl.useRef,u.refresh()}}for(var p in WebSquare.WebSquaredoc.itemsetElement){var g=WebSquare.WebSquaredoc.itemsetElement[p];if(void 0!==g.filteredNodeset&&(0==t.indexOf(g.filteredNodeset)||0==g.filteredNodeset.indexOf(t))){var m=g.id;if(m!=e){var f=WebSquare.util.getComponentById(m);f.modelControl.ref&&f.modelControl.useRef,f.refreshItemset()}}}if(!o.gridNoRefresh||o.gridNoRefresh&&1!=o.gridNoRefresh)for(var b=0;b<WebSquare.WebSquaredoc.instanceRefElement.length;b++){var y=WebSquare.WebSquaredoc.instanceRefElement[b];if((!y.scopeId||o.scope_id===y.scopeId)&&(void 0!==y.xpath&&o&&(y.xpath==o.xpath||("copyLastNodeChildrenNodes"==o.op||"setInstanceLastNodeChildNodes"==o.op||"removeInstanceNodeAll"==o.op)&&WebSquare.ModelUtil.isPartialMatchedXPath(y.xpath,o.xpath)||"setInstanceValue"==o.op&&o.xpath.length>y.xpath.length&&WebSquare.ModelUtil.isPartialMatchedXPath(y.xpath,o.xpath)||y.xpath==o.replacexpath&&"replace"==o.type&&"setInstanceNode"==o.op))){var v=y.id;if(v!=e){var w=WebSquare.util.getComponentById(v);"grid"==w.initializeType&&w.refreshGrid(o)}}}}catch(t){h.w.printStackTrace(t)}},H.prototype.mergeConfig=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(t,"WebSquare")[0];if(!e)return;for(var i={},o=[e._element],s=[i];o.length>0;){var r,a=o.shift(),n=s.shift(),l=a.N;if(l)if(n[l]){if(n[l].constructor===Array)n[l].push({});else{var d=n[l];n[l]=[d],n[l].push({})}r=n[l][n[l].length-1]}else n[l]={},r=n[l];if(a.A&&r)for(var c in a.A)r["@"+c]=a.A[c];for(var u=0;a.E&&u<a.E.length;u++)o.push(a.E[u]),s.push(r||n)}WebSquare.BootLoader.mergeJSON(WebSquare.BootLoader.configurationJSON[0],i),WebSquare.BootLoader.initJSONConfig()}catch(t){h.w.printStackTrace(t)}},H.prototype.initParent=function(){try{if(!1===this.data._initParent){this.data._initParent=!0;for(var t=[this.data];t.length>0;)for(var e=t.pop(),i=0;e.E&&i<e.E.length;i++)e.E[i].parent=e,t.push(e.E[i])}}catch(t){h.w.printStackTrace(t)}};var j=__webpack_require__(6191),z={loadWPackModule:function(t,e){return new Function("return "+t.replace("export default",""))(e)},getPageType:function(t){try{var e=t.slice(t.lastIndexOf(".")),i="js";return".xml"===e&&(i=!0===a.x.convertPageXML?"xmljs":"xml"),i}catch(t){h.w.printStackTrace(t)}},getPageTypeByString:function(t){try{return"/"===t.charAt(0)&&"*"===t.charAt(1)||t.indexOf("export default")>=0?"json":"xml"}catch(t){h.w.printStackTrace(t)}},getPageInfo:function(t){try{return new H(t)}catch(t){h.w.printStackTrace(t)}},getUri:function(t,e){try{
if("string"!=typeof t)return t;var i=l.v.getConfiguration("/WebSquare/wpack/urlFunction/@value");if(i){var o=g.D.getGlobalFunction(i);if("function"==typeof o)return o(t)}if(void 0!==e&&null!=e||(e={}),t.slice(0,a.x._resourceURI.length)===a.x._resourceURI&&-1===t.slice(a.x._resourceURI.length).indexOf("../")){var s=t.lastIndexOf(".xml");return s>=0&&!0===e.parse&&(t=t.slice(0,s)+t.slice(s).replace(".xml",".js")),t}var r=t,n=l.v.getConfiguration("/WebSquare/wpack/contextRoot/@value")||"/",d=r.indexOf("://");if("/"!==r.charAt(0)&&-1===d){r=g.D.getAbsolutePath(r);var c="/"===n.charAt(0)?"":"/";n=location.origin+c+n}"/"===n.charAt(n.length-1)&&(n=n.slice(0,n.length-1));var u,p=!1;if(e.msaName){var m=l.v._msaServerHash[e.msaName];m&&(n=m.baseURI+n)}else if(d>=0)for(var f in l.v._msaServerHash){var b=l.v._msaServerHash[f].baseURI;if(r.startsWith(b)){n=b+n;break}}if(""===n&&(u=r.indexOf("w2xPath="))>=0)n="w2xPath=",p="/"!==r.charAt(u+n.length);else if((u=r.indexOf(n))<0){if((u=r.indexOf(encodeURIComponent(n)))<0)return r;p=!0}var y=l.v.getConfiguration("/WebSquare/wpack/destRoot/@value")||"_wpack_",v=l.v.getConfiguration("/WebSquare/wpack/babelDestRoot/@value")||"_wpackbabel_",w=l.v.getConfiguration("/WebSquare/wpack/loadingMode/@value")||"wpack";"auto"===w&&(w=g.D.isIEAllVersion()?"babel":"wpack"),"babel"===w&&(y=v);var S,C=n+"/"+y;if(p?"w2xPath="===n?(C=n+encodeURIComponent("/"+y),S=n.length):(C=encodeURIComponent(C),S=encodeURIComponent(n).length):S=n.length,r.indexOf(C)>=0)return t;var _=r.slice(0,u)+C+r.slice(u+S),x=_.lastIndexOf(".");if(x<0)return t;var I=l.v.getConfiguration("/WebSquare/wpack/srcExtension/@value")||"xml";if(_.slice(x+1)!==I)return t;var T=l.v.getConfiguration("/WebSquare/wpack/destExtension/@value")||"js";return _.slice(0,x+1)+T}catch(e){return h.w.printStackTrace(e),t}},load:async function(t,e){try{void 0!==e&&null!=e||(e={});var i,o=z.getUri(t,e);z.getPageType(o);o=n.d.getResourcePostfix(o);var s=l.v.getConfiguration("/WebSquare/wpack/moduleLoader/@value")||"amd";if(!0===e.parse)switch(s){case"amd":case"requirejs":var r=g.D.getBoolean(l.v.getConfiguration("/WebSquare/noRequireJS/@value"));i=await a.x._dynamicImportAMD(o,r);break;case"import":case"es6":default:i=(await a.x._dynamicImport(o)).default}else i=await l.v.loadAsync(o,e);return i}catch(t){h.w.printStackTrace(t)}},_loadObj:async function(t,e){try{return void 0!==e&&null!=e||(e={}),e.parse=!0,await z.load(t,e)}catch(t){h.w.printStackTrace(t)}},start:async function(t,e){try{if(void 0!==e&&null!=e||(e={}),"string"==typeof t){if("json"!==z.getPageTypeByString(t))throw new Error("WebSquare page load error");t=z.loadWPackModule(t)}if(a.x.WebSquaredoc=z.getPageInfo(t),a.x.WebSquaredoc.cssList=a.x.externalCSSDOM.slice(0),await l.v._loadProjectCommon(),await l.v._loadMsaCommon(),await a.x.WebSquaredoc.parsingUDC(i,a.x.strictModeFrame),null==a.x.WebSquareParser&&("json"===a.x.WebSquaredoc.getType()?a.x.WebSquareparser=new P:a.x.WebSquareparser=new w.WebSquareParser),!await a.x.WebSquareparser.parse(a.x.WebSquaredoc.getPageInfo(),i,a.x.strictModeFrame))return;var i=!0===e.spa;if(i?(n.d.performanceCheck.mid2=new Date,n.d.printLog("[SPA3][RESOURCE] New resource(XML, Skin, CSS) Load Complete. Time:"+(n.d.performanceCheck.mid2.getTime()-n.d.performanceCheck.mid1.getTime())+"ms")):(n.d.performanceCheck.mid2=new Date,n.d.printLog("[STEP3][RESOURCE] Resource(XML, Skin, CSS) Load Complete. Time:"+(n.d.performanceCheck.mid2.getTime()-n.d.performanceCheck.mid1.getTime())+"ms")),a.x._performance.mark("step3"),a.x._performance.measure("step3","step2"),g.D._stopProcess(i))return;var o,s=[],r=a.x.WebSquaredoc.getType();if(s="json"===r?m.h.getNodesByTagName(a.x.WebSquaredoc.getPageInfo(),"body"):c.L.getElementsByTagName(a.x.WebSquaredoc.getPageInfo(),"body",l.v._XML_NAMESPACE.XHTML),"json"!==r&&1===s.length){var d=s[0].getAttribute("style");null!=d&&(a.x.WebSquaredoc.bodyStyle=d),a.x.WebSquaredoc.body=s[0]
}else if("json"!==r||s.length>1)return void alert(R.d.getMessage("E_WebSquareDocument_MoreThanOneBodyError",s.length));y.startCache(),o="json"===r?j.D.createByJSON(null,null,s[0],a.x.strictModeFrame,a.x.strictModeFrame?a.x.strictModeFrame.uuid:void 0):j.D.create(null,null,s[0],a.x.strictModeFrame,a.x.strictModeFrame?a.x.strictModeFrame.uuid:void 0),await j.D.initAsync(),y.endCache(),i?(n.d.performanceCheck.mid3=new Date,n.d.printLog("[SPA4][CREATE] WebSquare Object Creation & JS Load Complete. Time:"+(n.d.performanceCheck.mid3.getTime()-n.d.performanceCheck.mid2.getTime())+"ms")):(n.d.performanceCheck.mid3=new Date,n.d.printLog("[STEP4][CREATE] WebSquare Object Creation & JS Load Complete. Time:"+(n.d.performanceCheck.mid3.getTime()-n.d.performanceCheck.mid2.getTime())+"ms")),a.x._performance.mark("step4"),a.x._performance.measure("step4","step3"),a.x.setBody(o),l.v._controlInvoker("pageInherit","appendModel",[a.x.pageInheritSubmissionList,"submissions"]),l.v._controlInvoker("pageInherit","appendModel",[a.x.pageInheritWorkflowList,"workflows"]),l.v.executePointScript(4),a.x.pageInheritScriptArr&&(a.x.externalScriptArr=a.x.pageInheritScriptArr.concat(a.x.externalScriptArr),a.x.pageInheritScriptArr=[]),a.x.externalScriptArr.length>0?(a.x.externalScriptArr.push(new Function("WebSquare.jsLoader._startCallback("+i+");")),g.D.js.apply(null,a.x.externalScriptArr),a.x.externalScriptArr=[]):z._startCallback(i)}catch(t){h.w.printStackTrace(t)}},_startCallback:async function(t){try{var e=a.x.body;a.x.WebSquaredoc.cssList=a.x.WebSquaredoc.cssList.concat(y.executeImport());var i=l.v.getConfiguration("/WebSquare/visibleHelper/targetHandler/@value"),o=null,s=!1;if("undefined"!=typeof WebSquareExternal&&WebSquareExternal&&(s=WebSquareExternal.skipRender),s||a.x.targetInfo&&a.x.targetInfo.constructor==Array);else{var r=new Date;o=e.toHTML();var d=new Date;n.d.printLog("html string generation. Time :"+(d-r)+"ms")}if(s);else if(null!=i&&""!=i){var u=g.D.getGlobalFunction(i);"function"==typeof u&&(p=u(o)),null!=p&&("string"==typeof p&&(p=document.getElementById(p)),p.style.cssText=e.options.style),a.x.useVisibleHelper=!0}else if(a.x.targetInfo){var p;if("string"==typeof a.x.targetInfo)(p=document.getElementById(a.x.targetInfo))&&(p.innerHTML=o),p.style.cssText=e.options.style;else if(a.x.targetInfo.constructor==Array){r=new Date;for(var m=0;m<a.x.targetInfo.length;m++){var f=a.x.targetInfo[m],b=a.x.idToUUID[f.component];if(b&&null!=a.x.idCache[b]){var v=f.target;"string"==typeof v&&(v=document.getElementById(v)),v.innerHTML=a.x.idCache[b].toHTML()}}d=new Date;n.d.printLog(" html string generation. Time :"+(d-r)+"ms")}else"object"==typeof a.x.targetInfo&&(a.x.targetInfo.innerHTML=o);a.x.targetInfo=""}else document.body.innerHTML=o,document.body.style.cssText=e.options.style,n.d.fullViewed&&n.d.zoomed(document.body,a.x.style.getScale());!("onhashchange"in window)&&(t||location.hash.lastIndexOf("w2xPath")>=0)&&(g.D._hiddenFrame?null==document.getElementById(g.D._hiddenFrame.id)&&document.body.appendChild(g.D._hiddenFrame):g.D._makeFrame(),g.D._iframe_wait=!0,g.D._hiddenFrame.contentWindow.location.search=a.x.w2xPath),"true"==l.v.getConfiguration("/WebSquare/mobile/hideAddressBar/@value")&&g.D.isMobile()&&(document.body.scrollTop=1);try{var w;if("undefined"!=typeof WebSquareExternal)if(WebSquareExternal.xmlInstance&&(WebSquareExternal.xmlInstance=c.L.parse(WebSquareExternal.xmlInstance)),WebSquareExternal.targetInstance)WebSquareExternal.xmlInstance?w=WebSquareExternal.xmlInstance:WebSquareExternal.jsonInstance&&(w=_.JSON2XML(WebSquareExternal.jsonInstance)),w&&(a.x.WebSquaredoc.models[0].rebuild(w,WebSquareExternal.targetInstance),a.x.WebSquaredoc.models[0].refresh())}catch(t){h.w.printStackTrace(t)}if(t?(n.d.performanceCheck.mid4=new Date,n.d.printLog("[SPA5][RENDER] HTML Rendering Complete. Time:"+(n.d.performanceCheck.mid4.getTime()-n.d.performanceCheck.mid3.getTime())+"ms"),a.x._performance.mark("step5"),
a.x._performance.measure("step5","step4"),e.preActivate(),n.d.performanceCheck.mid5=new Date,n.d.printLog("[SPA6][ADJUST] Pre Event Activation. Time:"+(n.d.performanceCheck.mid5.getTime()-n.d.performanceCheck.mid4.getTime())+"ms"),a.x._performance.mark("step6"),a.x._performance.measure("step6","step5")):(n.d.performanceCheck.mid4=new Date,n.d.printLog("[STEP5][RENDER] HTML Rendering Complete. Time:"+(n.d.performanceCheck.mid4.getTime()-n.d.performanceCheck.mid3.getTime())+"ms"),l.v.executePointScript(5),a.x._performance.mark("step5"),a.x._performance.measure("step5","step4"),e.preActivate(),n.d.performanceCheck.mid5=new Date,n.d.printLog("[STEP6][ADJUST] Pre Event Activation. Time:"+(n.d.performanceCheck.mid5.getTime()-n.d.performanceCheck.mid4.getTime())+"ms"),l.v.executePointScript(6),a.x._performance.mark("step6"),a.x._performance.measure("step6","step5")),l.v._businessPreProcessor(),a.x.isWebSquarePopup&&l.v._initPopupParameter(),"synchronous"===(l.v.getConfiguration("/WebSquare/postDrawMode/@value")||"asynchronous")){if(n.d.printLog("[_wg.actionHelper.execute]postDrawMode : synchronous"),g.D._stopProcess(t))return;for(var S in x.activated=!0,x.comp)x.comp[S].activate();if(e.activate(),await j.D.initAsync(),t?(n.d.performanceCheck.mid6=new Date,n.d.printLog("[SPA7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms")):(n.d.performanceCheck.mid6=new Date,n.d.printLog("[STEP7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms"),l.v.executePointScript(7)),a.x._performance.mark("step7"),a.x._performance.measure("step7","step6"),g.D._stopProcess(t))return;if(z._startCallback2(t),g.D._stopProcess(t))return;"onhashchange"in window?window.onhashchange=g.D.onhashchange:g.D._wait_for_iframe_reload(t),e.onComplete(),x.api.onComplete()}else n.d.printLog("[_wg.actionHelper.execute]postDrawMode : asynchronous"),l.v.setTimer((async function(t){var e=a.x.body;if(!g.D._stopProcess(t)){for(var i in x.activated=!0,x.comp)x.comp[i].activate();e.activate(),await j.D.initAsync(),t?(n.d.performanceCheck.mid6=new Date,n.d.printLog("[SPA7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms")):(n.d.performanceCheck.mid6=new Date,n.d.printLog("[STEP7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms"),l.v.executePointScript(7)),g.D._stopProcess(t)||(z._startCallback2(t),g.D._stopProcess(t)||("onhashchange"in window?window.onhashchange=g.D.onhashchange:g.D._wait_for_iframe_reload(t),e.onComplete(),x.api.onComplete()))}}),{key:"WebSquare_startOnload",caller:this,delay:1,args:[t]})}catch(t){h.w.printStackTrace(t)}},_startCallback2:function(t){try{"true"==l.v.getConfiguration("/WebSquare/clearMemory/@value")&&(window.onbeforeunload=function(){if(a.x.clearMemory){var t,e=!1;try{g.D.isSPA()&&g.D.isIE()&&l.v.browserVersion()<=10&&(l.v.clearJQuery(),e=!0)}catch(t){}if(e||(t=a.x.clearMemory()),!1===t)return t}}),a.x.nowRendering=!1,"function"==typeof a.x.onload&&a.x.onload(),!0!==l.v.scriptPrecedence&&a.x.event.fireEvent(a.x.getBody(),"onpageload");var e=!0,i=WebSquare.core.getConfiguration("/WebSquare/eval/@value")||WebSquare.core.getConfiguration("/WebSquare/executeScript/@value")||"internal";if(a.x.pageInheritScript&&a.x.pageInheritScript.length>0){if(n.d.traceWframe)for(var o=0;o<a.x.pageInheritScript.length;o++)n.d.globalEval(a.x.pageInheritScript[o],i);else a.x.scriptSection=a.x.pageInheritScript.join("")+a.x.scriptSection;a.x.pageInheritScript=[],e=!1}a.x.wframeScript&&a.x.wframeScript.length>0&&(n.d.traceWframe||(a.x.scriptSection+=a.x.wframeScript.reverse().join(""),a.x.wframeScript=[]),e=!1),(e=e&&l.v._isSinglePage())||(a.x.scriptSection=a.x.scriptIdentifier+a.x.w2xPath+'";'+a.x.scriptSection),l.v._businessPreProcessor(),l.v._controlInvoker("pageInherit","_execute",["script",{order:"postorder"}]),
!0===l.v.scriptPrecedence?l.v._controlInvoker("wframe","_execute",["script"]):l.v._controlInvoker("wframe","_execute",["script",{order:"postorder",reverse:!0}]);var s=g.D.getBoolean(l.v.getConfiguration("/WebSquare/postScript/@value"))&&a.x.w2xPath!==a.x.net.getBlankXML();if(s&&!0!==l.v.scriptPrecedence&&!a.x.strictModeFrame&&(a.x.scriptSection+=l.v.getConfiguration("/WebSquare/postScript")),a.x.scriptSectionExcuteFlag="preExecuted",n.d.globalEval(a.x.scriptSection,i),a.x.scriptSection="",n.d.traceWframe&&a.x.wframeScript&&a.x.wframeScript.length>0){for(o=a.x.wframeScript.length-1;o>=0;o--)n.d.globalEval(a.x.wframeScript[o],i);a.x.wframeScript=[]}a.x.scriptSectionExcuteFlag="executed";try{var r=t?"SPA":"STEP";if(n.d.performanceCheck.mid7=new Date,n.d.printLog("["+r+"8][EXECUTE] JS load and Global Script Execution Completed. Time:"+(n.d.performanceCheck.mid7.getTime()-n.d.performanceCheck.mid6.getTime())+"ms"),a.x._performance.mark("step8"),a.x._performance.measure("step8","step7"),t||l.v.executePointScript(8),!0===l.v.scriptPrecedence){for(var d in l.v._projectCommonHash){(c=a.x.idCache[l.v._projectCommonHash[d]])&&a.x.event.fireEvent(c._wqContent.childControlList[0],"onpageload")}for(var d in l.v._msaHash){var c;(c=a.x.idCache[l.v._msaHash[d]])&&a.x.event.fireEvent(c._wqContent.childControlList[0],"onpageload")}a.x.event.fireEvent(a.x.getBody(),"onpageload"),l.v._controlInvoker("pageInherit","_execute",["onpageload",{order:"postorder"}]),l.v._controlInvoker("wframe","_execute",["onpageload"]),n.d.performanceCheck.mid8=new Date,n.d.printLog("["+r+"9][ONPAGELOAD] onpageload Completed. Time:"+(n.d.performanceCheck.mid8.getTime()-n.d.performanceCheck.mid7.getTime())+"ms"),a.x._performance.mark("step9"),a.x._performance.measure("step9","step8"),l.v._controlInvoker("pageInherit","_execute",["postscript",{order:"postorder"}]);var u="";s&&(a.x.strictModeFrame?u+=a.x.strictModeFrame.options.postScript.toString():u+=l.v.getConfiguration("/WebSquare/postScript")),l.v._controlInvoker("wframe","_execute",["postscript",{order:"postorder"}]),u&&n.d.globalEval(u,i),l.v._controlInvoker("wframe","_execute",["onwframeload"]),n.d.performanceCheck.mid9=new Date,n.d.printLog("["+r+"10][POSTSCRIPT] postscript Completed. Time:"+(n.d.performanceCheck.mid9.getTime()-n.d.performanceCheck.mid8.getTime())+"ms"),a.x._performance.mark("step10"),a.x._performance.measure("step10","step9")}}catch(t){h.w.printStackTrace(t)}n.d.performanceCheck.end=new Date;var p="["+r+" SUMMARY] Initial procedures completed. Duration : "+(n.d.performanceCheck.end.getTime()-n.d.performanceCheck.start.getTime())+" 시간 요약 :\t"+(n.d.performanceCheck.mid1.getTime()-n.d.performanceCheck.start.getTime())+"\t"+(n.d.performanceCheck.mid2.getTime()-n.d.performanceCheck.mid1.getTime())+"\t"+(n.d.performanceCheck.mid3.getTime()-n.d.performanceCheck.mid2.getTime())+"\t"+(n.d.performanceCheck.mid4.getTime()-n.d.performanceCheck.mid3.getTime())+"\t"+(n.d.performanceCheck.mid5.getTime()-n.d.performanceCheck.mid4.getTime())+"\t"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"\t"+(n.d.performanceCheck.mid7.getTime()-n.d.performanceCheck.mid6.getTime())+"\t";!0===l.v.scriptPrecedence&&(p+=n.d.performanceCheck.mid8.getTime()-n.d.performanceCheck.mid7.getTime()+"\t"+(n.d.performanceCheck.mid9.getTime()-n.d.performanceCheck.mid8.getTime())+"\t"),p+=n.d.performanceCheck.end.getTime()-n.d.performanceCheck.start.getTime(),n.d.printLog(p);try{a.x.lazyImportsArr.length>0&&(a.x.lazyImportsArr.push((function(){n.d.printLog("defer JavaScript loaded.")})),n.d.printLog("defer JavaScript loading."),g.D.js.apply(null,a.x.lazyImportsArr),a.x.lazyImportsArr=[])}catch(t){h.w.printStackTrace(t)}try{window.$integrity&&window.$integrity()}catch(t){h.w.printStackTrace(t)}l.v._fireParentOnload(),l.v._controlInvoker("wframe","_clearPending"),l.v._controlInvoker("pageInherit","_clearPending")}catch(t){h.w.printStackTrace(t)}}},G={createFormatter:function(t,e,i,o,s,r,a,n){try{var l=null
;if(i)return(l=new WebSquare.format.formatterAdapter(t,e,i,o)).scope_id=a,l.callerId=n,l;if(""!=t)switch(t){case"text":l=new WebSquare.format.textFormatter(t,e,i,o);break;case"bigDecimal":case"number":l=""==e?new WebSquare.format.emptyFormatter(t,e,i,o):new WebSquare.format.numberFormatter(t,e,i,o,s,r);break;case"float":l=new WebSquare.format.floatFormatter(t,e,i,o,s,r);break;case"euro":l=new WebSquare.format.euroFormatter(t,e,i,o,s,r);break;case"rupee":l=new WebSquare.format.rupeeFormatter(t,e,i,o,s,r);break;case"tenge":l=new WebSquare.format.tengeFormatter(t,e,i,o,s,r);break;case"date":l=new WebSquare.format.dateFormatter(t,e,i,o);break;case"time":l=new WebSquare.format.timeFormatter(t,e,i,o);break;case"textMask":l=new WebSquare.format.textMaskFormatter(t,e,i,o);break;case"numberMask":l=new WebSquare.format.numberMaskFormatter(t,e,i,o,s,r);break;case"reverseTextMask":l=new WebSquare.format.reverseTextMaskFormatter(t,e,i,o);break;case"reverseNumberMask":l=new WebSquare.format.reverseNumberMaskFormatter(t,e,i,o,s,r);break;default:l=new WebSquare.format.emptyFormatter(t,e,i,o)}else l=new WebSquare.format.emptyFormatter(t,e,i,o);if(("float"==t||"bigDecimal"==t||"number"==t||"euro"==t||"tenge"==t||"rupee"==t)&&e){r||(r=".");var d=new RegExp("["+r+"]+[#0]+"),c=e.match(d);null!=c&&"0"==(c=c.join(""))[c.length-1]&&(l._noUseHash=!0,l.unformat=function(t){try{if(this._noUseHash){var e=t.split(this.delimiter).join("");if(t){var i=new RegExp("[0-9\\+\\-\\"+this.decimalDelimiter+"]+","g");e=t.match(i)}return e?e.join(""):""}return null!=this.hash_format_to_original[t]?this.hash_format_to_original[t]:t}catch(t){h.w.printStackTrace(t)}})}return l.scope_id=a,l.callerId=n,l}catch(t){h.w.printStackTrace(t)}},formatter:function(t,e,i,o){try{this.type=t||"text",this.masking=e||"",this.userFunc=i||null,this.ioFormat=o||null,this.callerId="",this.count=0,this.hash_format_to_original={}}catch(t){h.w.printStackTrace(t)}}};G.formatter.prototype.setMasking=function(t){this.masking=t},G.formatter.prototype.format=function(t,e){try{if(WebSquare.util.isNull(t))return"";t=t.toString();var i=this.executeFormat(t,e);return this.count>100&&(this.hash_format_to_original={},this.count=0),this.hash_format_to_original[i]=t,this.count++,i}catch(t){h.w.printStackTrace(t)}},G.formatter.prototype.unformat=function(t){try{return null!=this.hash_format_to_original[t]?this.hash_format_to_original[t]:t}catch(t){h.w.printStackTrace(t)}},G.formatter.prototype.executeFormat=function(t){alert("you should override 'executeFormat'")},G.emptyFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(G.emptyFormatter.prototype,G.formatter.prototype),G.emptyFormatter.prototype.executeFormat=function(t){return t},G.textFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(G.textFormatter.prototype,G.formatter.prototype),G.textFormatter.prototype.executeFormat=function(t){try{return t=WebSquare.text.formatText(t,this.masking,this.ioFormat)}catch(t){h.w.printStackTrace(t)}},G.numberFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(G.numberFormatter.prototype,G.formatter.prototype),G.numberFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},G.floatFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s||",",this.decimalDelimiter=r||"."},a.x.extend(G.floatFormatter.prototype,G.formatter.prototype),G.floatFormatter.prototype.executeFormat=function(t,e){try{var i="";t.length>0&&("-"==t[0]||"+"==t[0])&&(i=t[0],t=t.substring(1));var o=t.split(this.decimalDelimiter),s=o[0].split(this.delimiter).join(""),r=o[1]||"";if(1==this.masking.split(this.decimalDelimiter).length)s=WebSquare.text.formatCurrency(s,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter);else{
var a=WebSquare.text.unformatCurrency(this.masking,t);s=(o=WebSquare.text.formatCurrency(a,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter).split(this.decimalDelimiter))[0]||"",r=o[1]||""}return 2===o.length?i+s+"."+r:i+s}catch(t){h.w.printStackTrace(t)}},G.euroFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(G.euroFormatter.prototype,G.formatter.prototype),G.euroFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatEuroCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},G.rupeeFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(G.rupeeFormatter.prototype,G.formatter.prototype),G.rupeeFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatRupeeCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},G.tengeFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(G.tengeFormatter.prototype,G.formatter.prototype),G.tengeFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatTengeCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},G.dateFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(G.dateFormatter.prototype,G.formatter.prototype),G.dateFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatDate(t,this.masking,this.ioFormat,e)}catch(t){h.w.printStackTrace(t)}},G.timeFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(G.timeFormatter.prototype,G.formatter.prototype),G.timeFormatter.prototype.executeFormat=function(t){try{return t=WebSquare.text.formatTime(t,this.masking,this.ioFormat)}catch(t){h.w.printStackTrace(t)}},G.formatterAdapter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o),this.userFunc=i},a.x.extend(G.formatterAdapter.prototype,G.formatter.prototype),G.formatterAdapter.prototype.executeFormat=function(t){try{if("function"!=typeof this.userFunc)try{var e=WebSquare.util.getGlobalFunction(this.userFunc,this.scope_id);"function"==typeof e&&(this.userFunc=e)}catch(t){}return"function"==typeof this.userFunc&&(t=this.userFunc(t)),t}catch(t){h.w.printStackTrace(t)}},G.textMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(G.textMaskFormatter.prototype,G.formatter.prototype),G.textMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatTextMask(t,this.masking,this.allowChar)}catch(t){h.w.printStackTrace(t)}},G.textMaskFormatter.prototype.setAllowChar=function(t){try{this.allowChar=t}catch(t){h.w.printStackTrace(t)}},G.reverseTextMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(G.reverseTextMaskFormatter.prototype,G.formatter.prototype),G.reverseTextMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatReverseTextMask(t,this.masking,this.allowChar)}catch(t){h.w.printStackTrace(t)}},G.reverseTextMaskFormatter.prototype.setAllowChar=function(t){try{this.allowChar=t}catch(t){h.w.printStackTrace(t)}},G.numberMaskFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(G.numberMaskFormatter.prototype,G.formatter.prototype),G.numberMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatNumberMask(t,this.masking,this.delimiter)}catch(t){h.w.printStackTrace(t)}},G.reverseNumberMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(G.reverseNumberMaskFormatter.prototype,G.formatter.prototype),
G.reverseNumberMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatReverseNumberMask(t,this.masking)}catch(t){h.w.printStackTrace(t)}};var U=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function l(t,l,h){l=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var u=0;u<t.length;u++){if(o(t[u])&&(l[c]=t[u],c++),s(t[u])){if("^"!=t[u])for(;!a(d)&&n(t[u])<=n(r(d));)l[c]=r(d),i(d),c++;else for(;!a(d)&&n(t[u])<n(r(d));)l[c]=r(d),i(d),c++;e(d,t[u])}if("("==t[u]&&e(d,t[u]),")"==t[u]){for(;"("!=r(d);)l[c]=i(d),c++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(u=0;u<l.length;u++)p+=l[u];return 0==h?p:l}function d(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){h.w.printStackTrace(t)}}var c=function(t){return new WebSquare.bigDecimalObj(t)};return c.calc=function(t,s,a){var n=l(t);return WebSquare.bigDecimal(function(t,s,a){for(var n,l,h=new Array,c=0;c<t.length;c++)if(o(t[c]))e(h,t[c]);else{var u;if(s&&s[r(h)])n=s[r(h)];else if((u=r(h)).constructor===WebSquare.bigDecimalObj)n=u;else if("string"==typeof u){var p=WebSquare.util.scopingFuncBody(u,a);n=Function(p).call(this)}else n=new Function("return "+u)();n.constructor!=WebSquare.bigDecimalObj&&(n=WebSquare.bigDecimal(n)),i(h),s&&s[r(h)]?l=s[r(h)]:"string"==typeof(u=r(h))?(p=WebSquare.util.scopingFuncBody(u,a),l=Function(p).call(this)):l=new Function("return "+u)(),l.constructor!=WebSquare.bigDecimalObj&&(l=WebSquare.bigDecimal(l));var g=d(l,n,t[c]);i(h),e(h,g)}return r(h)}(n,s,a))},c}(window),X=function(t){try{""===t?(t="0",this.emptyStr=!0):this.emptyStr=!1,this.big=window.Big(t)}catch(t){this.big=NaN}};X.prototype.plus=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"plus")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},X.prototype.minus=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"minus")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},X.prototype.divide=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"div")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},X.prototype.times=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"times")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},X.prototype.pow=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"pow")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},X.prototype.mod=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"mod")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},X.prototype.toString=function(){if(isNaN(this.big))return NaN;var t=this.big.toFixed();return!this.emptyStr||"0"!==t&&0!==t||(t=""),t},X.prototype.compare=function(t,e){try{if(e)var i=1==this.big.lt(t)?this:t;else i=1==this.big.gt(t)?this:t;return i}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},X.handleZero=function(t,e,i){try{var o="";e.emptyStr&&""===e.toString()?o=t.big[i](0):("pow"===i&&(e=parseInt(e.toString(),10)),o=t.big[i](e));var s=WebSquare.bigDecimal(o);return"0"===s.toString()&&t.emptyStr&&e.emptyStr&&(s=""),s}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}};var K={getSubmission:C.z.getSubmission,createSubmission:C.z.createSubmission,deleteSubmission:C.z.deleteSubmission,
executeSubmission:C.z.executeSubmission,getStringByteSize:g.D.getStringByteSize,getRefToReqData:g.D.getRefToReqData,dynamicCreate:g.D.dynamicCreate,createWorkflow:C.z.createWorkflow,deleteWorkflow:C.z.deleteWorkflow,getWorkflow:C.z.getWorkflow,getRunningWorkflow:C.z.getRunningWorkflow,isRunningWorkflow:C.z.isRunningWorkflow,getRunningWorkflowID:C.z.getRunningWorkflowID,rejectWorkflow:C.z.rejectWorkflow,executeWorkflow:C.z.executeWorkflow,executeSerial:C.z.executeSerial,executeParallel:C.z.executeParallel,executeWhilst:C.z.executeWhilst,openPopup:g.D.openPopup,getPopupParam:g.D.getPopupParam,closePopup:g.D.closePopup,getPopup:g.D.getPopup,getPopupList:g.D.getPopupList,getPopupWindow:g.D.getPopupWindow,getPopupWindowList:g.D.getPopupWindowList,getAllPopupList:g.D.getAllPopupList,getAllPopupWindowList:g.D.getAllPopupWindowList,isPopup:g.D.isPopup,setDocumentLang:g.D.setDocumentLang,setDisabled:g.D.setDisabled,setDomain:g.D.setDomain,url:g.D.url,js:g.D.js,reinitialize:g.D.reinitialize,clearPage:g.D.clearPage,setTimeout:g.D.setTimeout,clearTimeout:g.D.clearTimeout,setInterval:g.D.setInterval,clearInterval:g.D.clearInterval,getTimeoutKeys:g.D.getTimeoutKeys,getIntervalKeys:g.D.getIntervalKeys,getIntervalKeyList:g.D.getIntervalKeyList,getTimeoutKeyList:g.D.getTimeoutKeyList,toTimestampString:k.h.toTimestampString,dateDiff:k.h.dateDiff,dateAdd:k.h.dateAdd,getFormattedDate:k.h.getFormattedDate,getCurrentServerDate:k.h.getCurrentServerDate,updateServerTime:k.h.updateServerTime,getMaxMinYear:k.h.getMaxMinYear,parseDate:k.h.parseDate,showModal:L.showModal,hideModal:L.hideModal,hideProcessMessage:L.hideProcessMessage,log:d.k.printLog,enableLog:d.k.enableLog,disableLog:d.k.disableLog,getParameter:I.getParameter,getAllParameter:I.getAllParameter,getBASE64Parameter:I.getBASE64Parameter,getAllBASE64Parameter:I.getAllBASE64Parameter,URLEncoder:D.f.URLEncoder,ajax:I.ajax,download:I.download,data:x.api,setFullView:g.D.setFullView,mirrorView:g.D.mirrorView,watermark:g.D.watermark,createProgressbar:g.D.createProgressBar,getRuntimeId:g.D.getRuntimeId,isWFramePopup:g.D.isWFramePopup,getPopupUrl:g.D.getPopupUrl,getPopupId:g.D.getPopupId,getFrameId:g.D.getFrameId,getFrame:g.D.getFrame,getParentWindow:g.D.getParentWindow,getComponentById:g.D.getComponentById,getEventTarget:g.D.getEventTarget,parent:g.D.getParentWindow,top:g.D.getTopWindow,main:g.D.getMainFrame,debug:d.f,bigDecimal:U,getMetaValue:g.D.getMetaValue,encodeParameter:g.D.encodeParameter,multipleExcelUpload:g.D.multipleExcelUpload,multipleExcelDownload:g.D.multipleExcelDownload,getMediaInfo:g.D.getMediaInfo,updateSuffix:g.D.updateSuffix,$:g.D.jQuerySelector},Y=function(){this.font_cho=new Array("ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"),this.font_jung=new Array("ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"),this.font_jong=new Array("","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ")};Y.prototype={getCho:function(t){return this.font_cho[parseInt((t-44032)/588)]},getJung:function(t){return this.font_jung[parseInt((t-44032)%588/28)]},getJong:function(t){return this.font_jong[parseInt((t-44032)%588%28)]},getChoArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getCho(s)):e.push(t.charAt(o))}return e},getJungArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getJung(s)):e.push("")}return e},getJongArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getJong(s)):e.push("")}return e},matchArr:function(t,e,i){var o=!0;if(t.length!=e.length)o=!1;else for(var s=t.length,r=0;r<s;r++)if((i||""!=e[r])&&t[r]!=e[r]){o=!1;break}return o},containArr:function(t,e,i,o,s){var r=t.length,a=!1,n=function(t,e,i,o){e.length-1>o&&(0===e[o+1]?a=!0:t[i+1]==e[o+1]?n(t,e,i+1,o+1,a):a=!1)};if(i.length>0){for(var l=[],h=0;h<i.length;h++){
if(1==e.length&&""==e[0])return{result:a=!0,matchedArr:i};var d=i[h];if(t[d]==e[0]&&(l.push(d),a=!0,n(t,e,d,0),1==a&&1==s))break}i=l}else{for(var c=0;c<r;c++){if(1==e.length&&""==e[0])return{result:a=!0,matchedArr:i};t[c]==e[0]&&(a=!0,n(t,e,c,0),1==a&&i.push(c))}i.length>0&&(a=!0)}return{result:a,matchedArr:i,first:undefined}},matchStr:function(t,e,i){return!!(this.matchArr(this.getChoArr(t),this.getChoArr(e),i)&&this.matchArr(this.getJungArr(t),this.getJungArr(e),i)&&this.matchArr(this.getJongArr(t),this.getJongArr(e),i))},containStr:function(t,e,i){var o=this.containArr(this.getChoArr(t),this.getChoArr(e),[],!0,!1),s=this.containArr(this.getJungArr(t),this.getJungArr(e),o.matchedArr,!1),r=this.containArr(this.getJongArr(t),this.getJongArr(e),s.matchedArr,!1,!0);return!!(o.result&&s.result&&r.result)},startWith:function(t,e){return!(e.length>t.length)&&this.matchStr(t.substr(0,e.length),e)},containWith:function(t,e){return!(e.length>t.length)&&this.containStr(t,e)}};var J=function(){};J.prototype.initialize=function(t,e){if(WebSquare.BootLoader.configurationJSON[0].WebSquare.projectCommon){var i=WebSquare.msgBroker;i.channels||(i.channels={}),i.subscribers||(i.subscribers={}),i.publishers||(i.publishers={});try{var o=WebSquare.jsonUtil.getNodesByTagName(t,"channels",WebSquare.core._XML_NAMESPACE.W2)[0];if(o&&(o=o.E),o){var s=WebSquare.BootLoader.configurationJSON[0].WebSquare.projectCommon.module;if(!s)return;s.constructor!==Array&&(s=[s]);for(var r="",a=0;a<s.length;a++){var n=s[a];n["@src"]==e.getSrc()&&(r=n["@name"])}for(a=0;a<o.length;a++)if(o[a].A&&o[a].A.id){var l=r?r+"."+o[a].A.id:o[a].A.id;i.channels[l]||(i.channels[l]={})}else WebSquare.exception.printStackTrace(new Error("channelId is not defined"))}var h=WebSquare.jsonUtil.getNodesByTagName(t,"subscribers",WebSquare.core._XML_NAMESPACE.W2)[0];if(h&&(h=h.E),h)for(a=0;a<h.length;a++){var d=h[a];if(d.A&&d.A.id&&d.A.channelId&&d.A.onmessage){var c=d.A.id,u={channelId:g=d.A.channelId,handler:d.A.onmessage,scope_obj:e,org_id:c,url:e.getSrc()};new J.Subscriber(u)}else WebSquare.exception.printStackTrace(new Error("Required property is not defined"))}var p=WebSquare.jsonUtil.getNodesByTagName(t,"publishers",WebSquare.core._XML_NAMESPACE.W2)[0];if(p&&(p=p.E),p)for(a=0;a<p.length;a++){c=p[a].A.id;var g=p[a].A.channelId;new J.Publisher({channelId:g,scope_obj:e,org_id:c})}}catch(t){WebSquare.exception.printStackTrace(t)}}},J.Publisher=function(t){try{if(null!=t.id&&(this.id=t.id,null!=window[WebSquare.noConflict].comp[this.id]))return;this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,this.scope_obj=t.scope_obj,this.channelId=t.channelId,this.org_id=t.org_id,this.scope_obj&&null==this.scope_obj.scope[this.org_id]&&(this.scope_obj.scope[this.org_id]=this),WebSquare.msgBroker.publishers[this.id]=this}catch(t){WebSquare.exception.printStackTrace(t)}},J.prototype.getSubscribers=function(t){for(var e=this._getSubscribers(t),i=[],o=0;o<e.length;o++)i.push(WebSquare.idCache[e[o]]);return i},J.prototype.remove=function(t){if(t instanceof J.Subscriber){var e=t.channelId,i=t.org_id,o=t.uuid,s=t.id;try{if(e.constructor==Array)for(var r=0;r<e.length;r++)e[r],delete WebSquare.msgBroker.channels[e[r]][s];else"string"==typeof e&&delete WebSquare.msgBroker.channels[e][s];delete t.scope_obj.scope[i],delete WebSquare.msgBroker.subscribers[s],delete WebSquare.idToUUID[s],delete WebSquare.idCache[o]}catch(t){WebSquare.exception.printStackTrace(t)}}else if(t instanceof J.Publisher){e=t.channelId,i=t.org_id,o=t.uuid,s=t.id;try{delete WebSquare.msgBroker.publishers[s].scope_obj.scope[i],delete WebSquare.msgBroker.publishers[s],delete WebSquare.idCache[o],delete WebSquare.idToUUID[s]}catch(t){WebSquare.exception.printStackTrace(t)}}},J.prototype.removeAllSubscribers=function(){for(var t in WebSquare.msgBroker.subscribers)this.remove(WebSquare.msgBroker.subscribers[t])},
J.prototype.removeAllPublishers=function(){for(var t in WebSquare.msgBroker.publishers)this.remove(WebSquare.msgBroker.publishers[t])},J.prototype.getAllSubscribers=function(){var t=[],e=WebSquare.msgBroker.subscribers;for(var i in e)t.push(WebSquare.msgBroker.subscribers[i]);return t},J.prototype.getAllPublishers=function(t){var e=[],i=WebSquare.msgBroker.publishers;for(var o in i)e.push(WebSquare.msgBroker.publishers[o]);return e},J.prototype._getSubscribers=function(t){return WebSquare.msgBroker.channels[t]},J.Publisher.prototype.postMessage=function(t){if("string"==typeof t)try{var e=WebSquare.msgBroker.channels[this.channelId];for(var i in e){var o=e[i].handler,s="";e[i].scope_obj&&(s=e[i].scope_obj.id),WebSquare.util.getGlobalFunction(o,s).call(e[i],t)}}catch(t){WebSquare.exception.printStackTrace(t)}},(J.Subscriber=function(t){try{if(null!=t.id&&(this.id=t.id,null!=window[WebSquare.noConflict].comp[this.id]))return;if(this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,this.org_id=t.org_id,this.scope_obj=t.scope_obj,!this.scope_obj)throw"scope_obs is not defined";this.channelId=t.channelId,this.handler=t.handler,null==this.scope_obj.scope[this.org_id]&&(this.scope_obj.scope[this.org_id]=this),this.src=this.scope_obj.getSrc(),WebSquare.msgBroker.channels[this.channelId]||(WebSquare.msgBroker.channels[this.channelId]={}),WebSquare.msgBroker.channels[this.channelId][this.id]=this,WebSquare.msgBroker.subscribers[this.id]=this}catch(t){WebSquare.exception.printStackTrace(t)}}).prototype.subscribe=function(t){if("string"==typeof this.channelId)this.channelId=[this.channelId],this.channelId.push(t);else{if(this.channelId.constructor!=Array)return;this.channelId.push(t)}WebSquare.msgBroker.channels[t]&&(WebSquare.msgBroker.channels[t][this.id]=this)},J.Subscriber.prototype.unsubscribe=function(t){if(WebSquare.msgBroker.channels[t]&&this.channelId.constructor==Array){var e=this.channelId.indexOf(t);e>-1&&(this.channelId.splice(e,1),delete WebSquare.msgBroker.channels[t][this.id])}};var Z=__webpack_require__(4930),Q=__webpack_require__(7716),tt=function(t,e,i,o,s){try{this.id=t,this.model=e,this.ref=i,this.bind=o,this.itemsetObj=null,this.useRef=!1,this.useBind=!1,this.useItemset=!1,this.isDataCollectionRefBinded=!1,this.isDataCollectionItemsetBinded=!1,this.dataCollectionRefInfo={},this.dataCollectionItemsetInfo={},this.scope_uuid=s}catch(t){h.w.printStackTrace(t)}};tt.prototype.setItemset=function(t,e,i){try{this.itemsetObj={nodeset:t||"",label:e||"",value:i||""}}catch(t){h.w.printStackTrace(t)}},tt.prototype.binding=function(){try{this.isDataCollectionItemsetBinded||this.ref&&this.ref.indexOf("data:")>-1?this.dataCollectionBinding(this.ref):(this.bindRef(),this.bindItemset())}catch(t){h.w.printStackTrace(t)}},tt.prototype.checkRef=function(){try{var t=this.ref;if(-1!=t.lastIndexOf("/@")&&t.lastIndexOf("/")==t.lastIndexOf("/@"));else{var e=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id,i=C.z.findInstanceNode(t,null,e);if(i&&i.childNodes.length>1)return!1}return!0}catch(t){h.w.printStackTrace(t)}},tt.prototype.bindRef=function(){try{this.ref&&""!=this.ref&&this.checkRef()&&(WebSquare.WebSquaredoc.refElement.push(new C.z.createRefElement(this.ref,this.id)),C.z.setBindElement(this.ref,this.id),this.useRef=!0)}catch(t){h.w.printStackTrace(t)}},tt.prototype.bindItemset=function(){try{this.itemsetObj&&""!=this.itemsetObj.nodeset&&(WebSquare.WebSquaredoc.itemsetElement.push(new C.z.createItemsetElement(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value,this.id)),this.useItemset=!0)}catch(t){h.w.printStackTrace(t)}},tt.prototype.unbindRef=function(){try{if(this.isDataCollectionRefBinded)this.useRef=!1,this.isDataCollectionRefBinded=!1,this.dataCollectionRefInfo.dataComp&&(this.dataCollectionRefInfo.dataComp.removeChild(this.dataCollectionRefInfo.childComp.id),
this.dataCollectionRefInfo.dataComp.removeRefComp(this.dataCollectionRefInfo.childComp.id)),this.dataCollectionRefInfo={};else if(WebSquare.WebSquaredoc)for(var t in WebSquare.WebSquaredoc.refElement){WebSquare.WebSquaredoc.refElement[t].id==this.id&&(WebSquare.WebSquaredoc.refElement.splice(t,1),this.useRef=!1)}}catch(t){h.w.printStackTrace(t)}},tt.prototype.unbindItemset=function(){try{if(this.isDataCollectionItemsetBinded)this.useItemset=!1,this.isDataCollectionItemsetBinded=!1,this.dataCollectionItemsetInfo.dataComp&&(this.dataCollectionItemsetInfo.dataComp.removeChild(this.dataCollectionItemsetInfo.childComp.id),this.dataCollectionItemsetInfo.dataComp.removeRefComp(this.dataCollectionItemsetInfo.childComp.id)),this.dataCollectionItemsetInfo={};else if(WebSquare.WebSquaredoc)for(var t in WebSquare.WebSquaredoc.itemsetElement){var e=WebSquare.WebSquaredoc.itemsetElement[t].id;try{e==this.id&&(WebSquare.WebSquaredoc.itemsetElement.splice(t,1),this.useItemset=!1)}catch(t){}}}catch(t){h.w.printStackTrace(t)}},tt.prototype.unbinding=function(){},tt.prototype.isBinded=function(){return this.useRef},tt.prototype.isItemsetBinded=function(){return this.useItemset},tt.prototype.setRef=function(t){try{var e=t||"";this.useRef&&"string"==typeof e&&e.length>0&&(this.ref=e,this.binding())}catch(t){h.w.printStackTrace(t)}},tt.prototype.setData=function(t,e,i){try{if(1==this.useRef){void 0!==i&&null!=i||(i={});var o=this.getData();if(o!=t||(0===o&&""===t||""===o&&0===t)||i.orgValue&&o!=i.orgValue)if(this.isDataCollectionRefBinded)e=e||"column",WebSquare.DataCollection.api.setRefValue(this.dataCollectionRefInfo,t,e);else{var s=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id;C.z.setInstanceValue(this.ref,t,this.model,s)}return!0}return!1}catch(t){h.w.printStackTrace(t)}},tt.prototype.getData=function(){try{if(""!=this.ref){if(this.isDataCollectionRefBinded)return WebSquare.DataCollection.api.getRefValue(this.dataCollectionRefInfo);var t=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id;return C.z.getInstanceValue(this.ref,this.model,t)}return""}catch(t){h.w.printStackTrace(t)}},tt.prototype.setItemsetData=function(t){},tt.prototype.getItemsetData=function(){try{var t=[];if(""!=this.itemsetObj.nodeset){for(var e=this.itemsetObj.label,i=this.itemsetObj.value;;){var o=e.lastIndexOf("/");if(o<0)break;e=e.substring(0,o)}for(;;){var s=i.lastIndexOf("/");if(s<0)break;i=i.substring(0,s)}var r=this.itemsetObj.nodeset,a=this.itemsetObj.label,n=this.itemsetObj.value;if(i==e&&""!=i){var l=a.lastIndexOf("/"),d=n.lastIndexOf("/");l>0&&d>0&&(r+="/"+e,a=a.replace(e+"/",""),n=n.replace(i+"/",""))}r.lastIndexOf("/")==r.length-1&&(r=r.substring(0,r.lastIndexOf("/"))),0==a.indexOf("/")&&(a=a.substring(1)),0==n.indexOf("/")&&(n=n.substring(1));var u=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id,p=C.z.findInstanceNodes(r,null,u);if(p)for(var g=0;g<p.length;++g){var m=p[g];e=c.L.getValue(m,a),i=c.L.getValue(m,n);t.push({label:e,value:i,xml:m})}}return t}catch(t){h.w.printStackTrace(t)}},tt.prototype.getDataCollectionItemsetData=function(t,e){try{var i,o,s=this.getDataComp(null,{type:"aliasDataCollection"});if(s)i=s.id;else if(i=this.itemsetObj.nodeset.replace(/^data:/,""),WebSquare.strictMode){var r=WebSquare.idCache[this.scope_uuid]?WebSquare.idCache[this.scope_uuid].id:"";i=(r?r+"_":"")+i}if(t&&(o=l.v.getComponentById(t)),this.isDataCollectionItemsetBinded=!0,o&&WebSquare.DataCollection.api.addRelation(o.id,i),s&&WebSquare.idCache[s.uuid])switch(o?(s.addChild(o),this.dataCollectionItemsetInfo.childComp=o):this.dataCollectionItemsetInfo.childComp={},this.dataCollectionItemsetInfo.dataComp=s,(s=WebSquare.DataCollection.api.getObj(s)).initializeType){case"linkedDataList":case"dataList":var a=[],n={},d=function(t,e,i,o,s){if(!o||!s)return!1;var r=!1,a=t.bodyIdColIndexMap[o];if(!isNaN(a)){var n
;n=!0===i?"dataList"===t.initializeType?t.dataArr[e*t.cellIdList.length+a]:t._dataList.dataArr[t.initialRowIndexArr[e]*t.cellIdList.length+a]:t.getCellData(e,o);for(var l=s.split(","),h=0;h<l.length;h++)if('"'+l[h]+'"'=='"'+n+'"'){r=!0;break}}return r};if(!e||!0!==e.allData&&!0!==e.allColumn)for(c=s.getDataLength(),u=0;u<c;u++){b=s.getCellData(u,this.itemsetObj.label),y=s.getCellData(u,this.itemsetObj.value);if(n[b]!=y){n[b]=y;S={label:b+"",value:y+""};!0===d(s,u,!1,e&&e.visibleColumn,e&&e.visibleColumnFalseValue)&&(S._hidden=!0),!0===d(s,u,!1,e&&e.enableColumn,e&&e.enableColumnFalseValue)&&(S._disabled=!0),e&&e.depthColumn&&(S._depth=s.getCellData(u,e.depthColumn)),a.push(S)}}else for(var c=s.getTotalRow(),u=0;u<c;u++){var p=s.bodyIdColIndexMap[this.itemsetObj.label],g=s.bodyIdColIndexMap[this.itemsetObj.value],m=s.cellInfoHash[this.itemsetObj.label],f=s.cellInfoHash[this.itemsetObj.value],b="",y="";if(b=m&&"expression"==m.options.inputType?m.getExpressionValue(u):"dataList"===s.initializeType?s.dataArr[u*s.cellIdList.length+p]:s._dataList.dataArr[s.initialRowIndexArr[u]*s.cellIdList.length+p],y=f&&"expression"==f.options.inputType?f.getExpressionValue(u):"dataList"===s.initializeType?s.dataArr[u*s.cellIdList.length+g]:s._dataList.dataArr[s.initialRowIndexArr[u]*s.cellIdList.length+g],n[b]!=y)if(n[b]=y,!0===e.allColumn)for(var v=s.getRowData(u),w=0;w<v.length;w++)a.push(v[w]);else{var S={label:b+"",value:y+""};if(!0===d(s,u,!0,e&&e.visibleColumn,e&&e.visibleColumnFalseValue)&&(S._hidden=!0),!0===d(s,u,!0,e&&e.enableColumn,e&&e.enableColumnFalseValue)&&(S._disabled=!0),e&&e.depthColumn){var C,_=s.bodyIdColIndexMap[e.depthColumn];C="dataList"===s.initializeType?s.dataArr[u*s.cellIdList.length+_]:s._dataList.dataArr[s.initialRowIndexArr[u]*s.cellIdList.length+_],S._depth=C}a.push(S)}}return a;case"dataMap":for(a=[],n={},u=0;u<s.getCount();u++){b=s.get(this.itemsetObj.label),y=s.get(this.itemsetObj.value);n[b]!=y&&(n[b]=y,a.push({label:b+"",value:y+""}))}return a}}catch(t){h.w.printStackTrace(t)}},tt.prototype.dataCollectionBinding=function(t){try{this.dataCollectionBindRef(t),this.dataCollectionBindItemset(t)}catch(t){h.w.printStackTrace(t)}},tt.prototype.dataCollectionBindRef=function(t){try{if(this.ref&&""!=this.ref){this.isDataCollectionRefBinded=!0;var e=t.split("."),i=this.getDataComp(e[0].replace(/^data:/,""),{type:"aliasDataCollection"}),o=l.v.getComponentById(this.id);if(i){switch(i.addRefComp(o),this.dataCollectionRefInfo.dataComp=i,this.dataCollectionRefInfo.childComp=o,i.initializeType){case"linkedDataList":case"dataList":this.dataCollectionRefInfo.colID=e[1];break;case"dataMap":this.dataCollectionRefInfo.key=e[1]}WebSquare.DataCollection.api.addRefRelation(o.id,i.id)}else WebSquare.DataCollection.api.addRefRelation(o.id,e[0].replace(/^data:/,""));this.useRef=!0}}catch(t){h.w.printStackTrace(t)}},tt.prototype.dataCollectionBindItemset=function(){try{this.itemsetObj&&""!=this.itemsetObj.nodeset&&(this.useItemset=!0)}catch(t){h.w.printStackTrace(t)}},tt.prototype.getDataComp=function(t,e){try{void 0!==e&&null!=e||(e={});var i=t||this.itemsetObj.nodeset.replace(/^data:/,""),o=null;if(this.scope_uuid&&null!=WebSquare.idCache[this.scope_uuid]){for(var s=WebSquare.idCache[this.scope_uuid];null!=s&&null!=s.scope;s=s.scope_obj){if(null!=s.scope[i]){o=s.scope[i];break}if(s.scope_obj===s||s.options.inheritedCompName){if(!s.parentFrame||void 0===WebSquare.idCache[s.parentFrame])break;if(null!=(s=WebSquare.idCache[s.parentFrame]).scope[i]){o=s.scope[i];break}}if(WebSquare.strictMode)break}null==o&&null!=(o=WebSquare.DataCollection.comp[WebSquare.idCache[this.scope_uuid].id+"_"+i]||null)&&(WebSquare.idCache[this.scope_uuid].scope[i]=o)}return null==o&&(o=WebSquare.DataCollection.comp[i]),"aliasDataCollection"!==e.type&&!0===WebSquare.DataCollection.api.isAliasDataCollection(o)&&(o=o.getObj()),o}catch(t){h.w.printStackTrace(t)}};var et=__webpack_require__(6615),it=function(){this.maxSize=50,this.historyArr=[],this.setKeyEvent()}
;it.prototype.set=function(t,e,i,o){this.historyArr.length>=this.maxSize&&this.historyArr.shift(),this.historyArr.push([t,e,i||{},o||{}])},it.prototype.get=function(t,e){for(var i={},o=this.historyArr.length-1;o>=0;o--){var s=this.historyArr[o];if(s[0]==t&&s[1]==e){i=s[2];break}}return i},it.prototype.clear=function(){for(var t=0;t<this.historyArr.length;t++)this.historyArr[t]=null;this.historyArr=[]},it.prototype.setKeyEvent=function(t){q.B.addListener(document.documentElement,"keydown",q.B.bindAsEventListener(this,this.handlerKeydownEvent))},it.prototype.handlerKeydownEvent=function(t){switch(t.charCode?t.charCode:t.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 27:break;case 90:if(t.ctrlKey&&this.historyArr.length>0){var e=this.historyArr.pop();!0===e[3].stopEvent&&q.B.stopEvent(t),e[3].onRestore&&e[3].onRestore.call(this,e[2])}break;case 68:if(t.ctrlKey)"false"===(l.v.getConfiguration("/WebSquare/enableKey/useCtrlD/@value")||"false")&&q.B.stopEvent(t);break;case 75:if(t.ctrlKey){var i=l.v.getConfiguration("/WebSquare/cloneTab/@value"),o=i;""===i&&(o=l.v.getConfiguration("/WebSquare/enableKey/useCtrlK/@value")||"false"),"false"==o&&q.B.stopEvent(t)}}},it=new it;var ot=__webpack_require__(3729),st=function(){};st.prototype.getRealRowIndex=function(t){return this.filteredRowIndexArr[t]},st.prototype.getFilteredRowIndex=function(t){if(this.filteredRowIndexArr[this.filteredRowIndexMap[t]]!==t){this.filteredRowIndexMap={};for(var e=0;e<this.filteredRowIndexArr.length;e++)this.filteredRowIndexMap[this.filteredRowIndexArr[e]]=e}return this.filteredRowIndexMap[t]},st.prototype.getTotalRow=function(){try{return this.dataArr.length/this.oneRowDataLength}catch(t){h.w.printStackTrace(t)}},st.prototype.getTotalCol=function(){try{return this.oneRowDataLength}catch(t){h.w.printStackTrace(t)}},st.prototype.getRowCount=function(){try{return this.getDataLength()}catch(t){h.w.printStackTrace(t)}},st.prototype._getData=function(t,e){try{e=this.getColumnIndex(e);var i=this.dataArr[t*this.getColumnCount()+e];return null==i&&(i=""),i}catch(t){h.w.printStackTrace(t)}},st.prototype._getCellData=function(t,e,i){try{var o,s;"number"==typeof e?(o=e,s=this.cellIdList[o]):(o=this.bodyIdColIndexMap[e],s=e);i=this.options.depthColumn&&!1!==i||!0===i?t:this.filteredRowIndexArr[t];var r=this.cellInfoHash[s];if(r){if("expression"==r.options.inputType)return r.getExpressionValue(i);var a=this.dataArr[i*this.cellIdList.length+o];return null==a&&(a=""),a}}catch(t){h.w.printStackTrace(t)}},st.prototype.getCellData=function(t,e){try{return this._getCellData(t,e)}catch(t){h.w.printStackTrace(t)}},st.prototype.getCellAllData=function(t,e){try{return this._getCellData(t,e,!0)}catch(t){h.w.printStackTrace(t)}},st.prototype.getOriginalCellData=function(t,e){try{var i;i="number"==typeof e?e:this.bodyIdColIndexMap[e];var o=this.options.depthColumn?t:this.filteredRowIndexArr[t],s=this.originalDataArr[o*this.cellIdList.length+i];return null==s&&(s=""),s}catch(t){h.w.printStackTrace(t)}},st.prototype._getOriginalCellData=function(t,e){try{var i;i="number"==typeof e?e:this.bodyIdColIndexMap[e];var o=this.originalDataArr[t*this.cellIdList.length+i];return null==o&&(o=""),o}catch(t){h.w.printStackTrace(t)}},st.prototype.getDataLength=function(){return this.filteredRowIndexArr.length},st.prototype.getColCnt=function(){try{return this.getTotalCol()}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.getDepth=function(t){var e=-1;return this.options.depthColumn&&(e=parseInt(this._getData(t,this.getColumnID(this.options.depthColumn)))),e},st.prototype.hasChild=function(t){var e=t+1,i=this.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(i=this.getColumnID(this.options.depthColumn));var o=parseInt(this._getData(t,i)),s=parseInt(this._getData(e,i));return o<(s=isNaN(s)?0:s)},st.prototype.getColSum=function(t){try{var e=this.getColData(t);return g.D.sum(e)}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.getColAvg=function(t){
try{var e="",i=this.getColData(t);if(i.length>0){for(var o=0;o<i.length;o++)"string"==typeof i[o]&&""==i[o].replace(/^\s+|\s+$/g,"")&&(i[o]="0");e=g.D.sum(i)}return""==e?"":e/i.length}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.getColMax=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}return e=null==e?"":e,e=g.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.getColMin=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}return e=null==e?"":e,e=g.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.getRealRowIndexArr=function(){return this.filteredRowIndexArr.slice(0)},st.prototype.getColData=function(t,e){try{var i=[],o=this.getColumnIndex(t),s=this.getTotalRow();if("object"==typeof e&&null!=e&&e.length<=s)for(var r=e.length,a=0;a<r;a++)i.push(this._getData(e[a],o));else for(a=0;a<s;a++)i.push(this._getData(a,o));return i}catch(t){h.w.printStackTrace(t)}},st.prototype.getRowData=function(t,e){try{void 0!==e&&null!=e||(e={});var i=[],o=this.options.depthColumn||e.realRowIndex?t:this.filteredRowIndexArr[t],s=this.cellIdList.length;if("object"==typeof e.includeColumns&&null!=e.includeColumns&&e.includeColumns.constructor===Array)for(var r=e.includeColumns.length,a=0;a<r;a++){var n=e.includeColumns[a];if(d=this.cellInfoHash[n])if("expression"==d.options.inputType)c=d.getExpressionValue(o);else{var l=this.bodyIdColIndexMap[n];null==(c=this.dataArr[o*s+l])&&(c="")}i.push(c)}else for(l=0;l<s;l++){var d,c;n=this.cellIdList[l];(d=this.cellInfoHash[n])&&("expression"==d.options.inputType?c=d.getExpressionValue(o):null==(c=this.dataArr[o*s+l])&&(c="")),i.push(c)}return i}catch(t){h.w.printStackTrace(t)}},st.prototype._getRowData=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++)e.push(this._getData(t,i));return e}catch(t){h.w.printStackTrace(t)}},st.prototype.getOriginalRowData=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getOriginalRowData(e)}catch(t){h.w.printStackTrace(t)}},st.prototype._getOriginalRowData=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++)e.push(this._getOriginalCellData(t,i));return e}catch(t){h.w.printStackTrace(t)}},st.prototype.getDataRow=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++){e[this.getColumnID(i)]=this.getCellData(t,i)}return e}catch(t){$l("dataController.getDataRow :"+t.message),h.w.printStackTrace(t,null,this)}},st.prototype.getMatchedData=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={}),this.broadcast({gridView:["_endEdit"]});var a=[],n=this.getMatchedIndex(t,e,i,o,s);this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var l=0;l<n.length;l++)a.push(this.getRowData(n[l],r));return a}catch(t){h.w.printStackTrace(t)}},st.prototype.getUnmatchedData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,i,o,s),l=0;l<n.length;l++)a.push(this.getRowData(n[l],r));return a}catch(t){h.w.printStackTrace(t)}},st.prototype.getMatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a,n=[],l=this.getMatchedIndex(t,e,o,s,r);this.options.getMatchedFromAllData&&(a=!0);for(var d=0;d<l.length;d++)n.push(this._getCellData(l[d],i,a));return n}catch(t){h.w.printStackTrace(t)}},st.prototype.getUnmatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,o,s,r),l=0;l<n.length;l++)a.push(this.getCellData(n[l],i));return a}catch(t){h.w.printStackTrace(t)}},st.prototype.getFilteredColData=function(t){var e=[];t=this.getColumnIndex(t);for(var i=this.getColumnID(t),o=0;o<this.getDataLength();o++){var s=o;this.options.depthColumn&&(s=this.filteredRowIndexArr[o]),e.push(this.getCellData(s,i))}return e},st.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,
0!=(i=g.D.getBoolean(i))&&(i=!0);var r=this.getColumnIndex(t);if(this.options.depthColumn||this.options.getMatchedFromAllData)var a=this.getColData(r);else a=this.getFilteredColData(r);var n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l];if(1==i)(d===e||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase()===e.toLowerCase())&&n.push(l);else{if(d===e){n.push(l);continue}"number"==typeof d&&(d+=""),("string"==typeof d&&d.indexOf(e)>-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(l)}}return n}catch(t){h.w.printStackTrace(t)}},st.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0);var r=this.getColumnIndex(t);if(this.options.depthColumn)var a=this.getColData(r);else a=this.getFilteredColData(r);var n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l];1==i?d!==e&&(this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d?d.toLowerCase()!==e.toLowerCase()&&n.push(l):n.push(l)):(d.indexOf(e)<=-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())<=-1)&&n.push(l)}return n}catch(t){h.w.printStackTrace(t)}},st.prototype.toArray=function(t,e){try{if("string"!=typeof t)return null===t?d.k.printLog("[WebSquare.DataCollection.dataController.toArray] parameter is null.["+this.id+"]"):d.k.printLog("[WebSquare.DataCollection.dataController.toArray] parameter isn't string. ["+typeof t+"]["+this.id+"]"),[];e=null==e?'","':'"'+e+'"';if(null!=t.match(/^\[\s*\]$/g))return new Array;var i=t.split(e);return i[0]=i[0].substr(2),i[i.length-1]=i[i.length-1].substr(0,i[i.length-1].length-2),i}catch(t){h.w.printStackTrace(t)}},st.prototype.getMappingData=function(t,e,i){try{for(var o,s={},r=0,a=this.cellIdList.length,n=e.length,l=t.length/n,c=0;c<n;c++){o=!1;for(var u=0;u<a;u++)if(e[c]===this.cellIdList[u]){o=!0,s[u]=c;break}o||r++}if(r===n)return d.k.printLog("[WebSquare.DataCollection.dataController.setData] not exist all target column in ["+this.id+"]"),[];for(var p,g,m=new Array(l*a),f=0;f<l;f++)for(var b=0;b<a;b++)void 0!==(g=s[b])?(p=t[g+f*n],m[f*a+b]=p):m[f*a+b]="";return t=null,m}catch(t){h.w.printStackTrace(t)}},st.prototype.getRangeData=function(t,e,i,o){try{var s,r=[];if(s=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var a=e;e=t,t=a}t<0&&(t=0),e>s&&(e=s);for(var n=t;n<=e;n++)for(var l=this.getRowData(n,o),d=0;d<l.length;d++)r.push(l[d]);return r}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllData=function(t){try{if(this.broadcast({gridView:["_endEdit"]}),this.getTotalRow()!=this.getDataLength()){for(var e=[],i=this.getTotalRow(),o=0;o<i;o++)for(var s=this._getRowData(o,t),r=0;r<s.length;r++)e.push(s[r]);return e}e=[];var a=this.getDataLength();for(o=0;o<a;o++)for(s=this.getRowData(o,t),r=0;r<s.length;r++)e.push(s[r]);return e}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllArrayEvalString=function(){try{return this.broadcast({gridView:["_endEdit"]}),g.D.parseArray(this.dataArr)}catch(t){h.w.printStackTrace(t)}},st.prototype.getColumnDistinctDataArray=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=[],o={};"string"==typeof t&&(t=this.bodyIdColIndexMap[t]);for(var s=this.getCellInfo(t),r=this.getColData(t),a=0;a<r.length;a++){o[r[a]]=1}for(var n in o)i.push(n);return e&&0==e.sort||("text"==s.options.dataType?i.sort():i.sort(this.comparator)),i}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllFilteredData=function(t){this.broadcast({gridView:["_endEdit"]});for(var e=[],i=0;i<this.getDataLength();i++)for(var o=this.getRowData(i,t),s=0;s<o.length;s++)e.push(o[s]);return e},st.prototype.getChildrenRowArr=function(t){var e=[];if(this.options.depthColumn){
var i=this.getTotalRow(),o=this.options.depthColumn,s=this.getColumnID(o),r=t+1,a=parseInt(this._getData(t,s),10);if(r<i&&this._getData(r,s)>a){e.push(r);var n=parseInt(this._getData(r,s),10),l=!0}if(l)for(r=t+2;r<i&&!(this._getData(r,s)<a+1);r++)this._getData(r,s)<n+1&&(e.push(r),n=parseInt(this._getData(r,s),10))}return e},st.prototype.getRecursiveRowIndex=function(t){try{for(var e=[],i=this.getChildrenRowArr(t),o=0;o<i.length;o++){var s=i[o];e.push(s);for(var r=this.getRecursiveRowIndex(s),a=0;a<r.length;a++)e.push(r[a])}return e}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.getParentRowIndex=function(t){try{if(this.options.depthColumn)for(var e=this.options.depthColumn,i=this.getColumnID(e),o=parseInt(this._getData(t,i)),s=t-1;s>=0;s--)if(this._getData(s,i)<o)return s;return-1}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.getRangeXML=function(t,e,i){try{var o;if(i=i||{},o=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var s=e;e=t,t=s}t<0&&(t=0),e>o&&(e=o);for(var r=[],a=g.D.getBoolean(l.v.getConfiguration("/WebSquare/dataList/decreaseGetRangeXML/@value")),n=t;n<e;n++)r.push(n);return a&&!i.useGetRowXML||r.push(e),this.getArrXML(r,i)}catch(t){h.w.printStackTrace(t)}},st.prototype.getMatchedXML=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={}),this.broadcast({gridView:["_endEdit"]});var a=this.getMatchedIndex(t,e,i,o,s);return this.options.getMatchedFromAllData&&(r.realRowIndex=!0),this.getArrXML(a,r)}catch(t){h.w.printStackTrace(t)}},st.prototype.getUnmatchedXML=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a=this.getUnmatchedIndex(t,e,i,o,s);return this.getArrXML(a,r)}catch(t){h.w.printStackTrace(t)}},st.prototype.getRowXML=function(t,e){try{(e=e||{}).useGetRowXML=!0;var i,o=this.getRangeXML(t,t,e);return i="dataMap"==this.initializeType?this.options.baseNode+"/"+this.options.repeatNode.split("/")[0]:this.options.baseNode+"/"+this.options.repeatNode,o=WebSquare.xml.findNode(o,i),o=WebSquare.xml.parse(WebSquare.xml.serialize(o))}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllXML=function(t){try{return this.broadcast({gridView:["_endEdit"]}),this.getTotalRow()==this.getDataLength()?this.getAllFilteredXML(t):this.getAllArrXML(t)}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllFilteredXML=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=this.getDataLength(),i=[],o=0;o<e;o++)i.push(o);return this.getArrXML(i,t)}catch(t){h.w.printStackTrace(t)}},st.prototype.getRowJSON=function(t,e){try{void 0!==e&&null!=e||(e={});var i={},o=this.options.depthColumn||e.realRowIndex?t:this.filteredRowIndexArr[t],s=this.cellIdList.length,r=!0===e.exceptEmptyValue&&"true"===l.v.getConfiguration("/WebSquare/submission/exceptEmptyValue/@value");if("object"==typeof e.includeColumns&&null!=e.includeColumns&&e.includeColumns.constructor===Array)for(var a=e.includeColumns.length,n=0;n<a;n++){var d=e.includeColumns[n];if(u=this.cellInfoHash[d]){if("expression"==u.options.inputType)p=u.getExpressionValue(o);else{var c=this.bodyIdColIndexMap[d];null==(p=this.dataArr[o*s+c])&&(p="")}(!r||""!==p||"bigDecimal"!==u.options.dataType&&"number"!==u.options.dataType)&&(i[d]=p)}}else for(c=0;c<s;c++){var u,p;d=this.cellIdList[c];if(u=this.cellInfoHash[d])"expression"==u.options.inputType?p=u.getExpressionValue(o):null==(p=this.dataArr[o*s+c])&&(p=""),(!r||""!==p||"bigDecimal"!==u.options.dataType&&"number"!==u.options.dataType)&&(i[d]=p)}var g=this.options.rowStatusNodeName,m=0!=e.rowStatusData||e.rowStatusData;return e.rowStatusNodeName&&(g=e.rowStatusNodeName),"dataList"!=this.initializeType&&"removeManager"!=this.initializeType||(m&&(i[g]=this.rowStatusArr[o]),this.options.rowNumData&&(i.rowNum=t+1)),i}catch(t){h.w.printStackTrace(t)}},st.prototype.getRefRowJSON=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.exceptEmptyValue=!0,this.getRowJSON(t,e)}catch(t){h.w.printStackTrace(t)}},st.prototype.getVirtualRowJSON=function(t,e,i){try{var o={}
;e=this.getColumnID(e);for(var s=0;s<this.getColumnCount();s++){var r=this.getColumnID(s);o[r]=r==e?i:this.getCellData(t,r)}return o}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=[],i=this.getTotalRow(),o=this.getDataLength();if(i!=o){void 0===t||null==t?t={realRowIndex:!0}:t.realRowIndex=!0;for(var s=0;s<i;s++)e.push(this.getRowJSON(s,t))}else for(s=0;s<o;s++)e.push(this.getRowJSON(s,t));if(null!=this.options.customFormatter){var r=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(e=r(this,e))}return e}catch(t){h.w.printStackTrace(t)}},st.prototype.getRefAllJSON=function(t){try{return void 0!==t&&null!=t||(t={}),t.exceptEmptyValue=!0,this.getAllJSON(t)}catch(t){h.w.printStackTrace(t)}},st.prototype.getRangeJSON=function(t,e,i){try{var o,s=[];if(o=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var r=e;e=t,t=r}t<0&&(t=0),e>o&&(e=o);for(var a=t;a<=e;a++)s.push(this.getRowJSON(a,i));if(null!=this.options.customFormatter){var n=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof n&&(s=n(this,s))}return s}catch(t){h.w.printStackTrace(t)}},st.prototype.getMatchedJSON=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a=[],n=this.getMatchedIndex(t,e,i,o,s,r);void 0!==r&&null!=r||(r={}),this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var l=0;l<n.length;l++)a.push(this.getRowJSON(n[l],r));if(null!=this.options.customFormatter){var d=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof d&&(a=d(this,a))}return a}catch(t){h.w.printStackTrace(t)}},st.prototype.getUnmatchedJSON=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,i,o,s,r),l=0;l<n.length;l++)a.push(this.getRowJSON(n[l],r));if(null!=this.options.customFormatter){var d=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof d&&(a=d(this,a))}return a}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllFilteredJSON=function(t){this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getDataLength(),o=0;o<i;o++)e.push(this.getRowJSON(o,t));return e},st.prototype.getFusionChartData=function(t,e,i){try{var o,s={},r=this.getAllArray();if(e||(e=r.columnInfo[0]),i)o=i.wq_replaceAll("'",'"'),o=JSON.parse(o),i=o[0];else{for(var a=new Array,n=1;n<=r.columnInfo.length;n++)"number"==this.getCellInfo(n).options.dataType&&a.push(r.columnInfo[n]);"msstackedcolumn2d"==t.toLowerCase()?((o=[])[0]=new Array(a[0]),o[1]=new Array(a[1])):"msstackedcolumn2dlinedy"==t.toLowerCase()?((o=[])[0]=new Array(a[0]),o[1]=new Array(a[1]),o[2]=new Array(a[2])):i=a}switch(this._singleSerises=function(){for(var t=[],o=this.getAllJSON(),r=0;r<o.length;r++){var a={label:o[r][e],value:o[r][i[0]]};t.push(a)}return s.data=t,s},this._multiSerises=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<i.length;t++){var e=this._getFusionChartSeriesDate(t);e.data.length>0&&s.dataset.push(e)}return 0==s.dataset.length&&(s={}),s},this._msStacked=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<o.length;t++){i=o[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}s.dataset.push(e)}return s},this._msStackedColumn2DLineDY=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<o.length-1;t++){i=o[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}s.dataset.push(e)}s.lineset=[];var n=o.length-1;i=o[n];for(t=0;t<i.length;t++){a=this._getFusionChartSeriesDate(t);s.lineset.push(a)}return s},this._scatter=function(){s.dataset=[];for(var o=this._getUniqueArr(this.getColData(e)),r=0;r<o.length;r++){for(var a={data:[]},n=0;n<this.getRowCount();n++)if(o[r]==this.getCellData(n,e)){var l={};"scatter"==t.toLowerCase()?l={x:this.getCellData(n,i[0]),
y:this.getCellData(n,i[1])}:"bubble"==t.toLowerCase()&&(l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1]),z:this.getCellData(n,i[2])}),a.data.push(l)}a.seriesname=o[r],s.dataset.push(a)}return s},this._zoomLine=function(){if(1==this.getRowCount()){(s={categories:[{category:this.getCellData(0,e)}]}).dataset=[];for(var t=0;t<i.length;t++){var o={};o.seriesname=this.getColumnName(i[t]),o.data=this.getCellData(0,i[t]),s.dataset.push(o)}return s}return this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColData(e),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var e,o={};o.data=[];var s=[];if("string"!=typeof i[t]){for(var r in e=i[t].id,o.seriesname=this.getColumnName(e),i[t])if(i[t].hasOwnProperty(r))if(this.hasColumn(i[t][r])&&"id"!=r.toLowerCase()){var a={};a[r]=i[t][r],s.push(a)}else o[r]=i[t][r]}else e=i[t],o.seriesname=this.getColumnName(e);for(var n=0;n<this.getRowCount();n++){for(var l={value:this.getCellData(n,e)},h=0;h<s.length;h++)for(var d in s[h])l[d]=this.getCellData(n,s[h][d]);o.data.push(l)}return o},this._getUniqueArr=function(t){for(var e={},i=[],o=0;o<t.length;o++)void 0===e[t[o]]&&(e[t[o]]=1);for(var o in e)i.push(o);return i},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line":case"area2d":case"ssgrid":case"funnel":case"pyramid":case"sparkline":case"sparkcolumn":case"sparkwinloss":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedbar2d":case"stackedbar3d":case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn3dline":case"mscombidy2d":case"mscolumn3dlinedy":case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"scrollstackedcolumn2d":case"scrollcombi2d":case"scrollcombidy2d":case"stackedcolumn3dlinedy":case"overlappedcolumn2d":case"overlappedbar2d":return this._multiSerises();case"scatter":case"bubble":return this._scatter();case"zoomline":return this._zoomLine();case"msstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.w.printStackTrace(t)}},st.prototype.getfwGanttChartData=function(t){try{var e={chart:{},categories:[],processes:{}};e.processes.process=[],e.datatable={},e.datatable.datacolumn=[],e.tasks={},e.tasks.task=[],e.legend={},e.legend.item=[];var i=t.monthNames.split(","),o=t.quarterNames.split(","),s=t.dataColumns.split(","),r=this.getColumnDistinctDataArray(t.processNode,{sort:!1}),a=[];if(""!=s)for(var n=0;n<s.length;n++)a[n]=this.getColumnDistinctDataArray(s[n],{sort:!1});var l=this.getColumnDistinctDataArray(t.taskNode,{sort:!1}),d=[];d.push(t.startDateNode),d.push(t.endDateNode);var c,u=[],p={};if(t.processIdNode&&t.taskIdNode){c=this.getColumnDistinctDataArray(t.processIdNode,{sort:!1});for(n=0;n<c.length;n++)p[r[n]]=c[n]}this._getGanttTaskData=function(e,i,o,s,r,a){for(var n=this.getRowCount(),l=this.getMatchedIndex(t.taskNode,e,!0,0,n),h=[],d=0;d<l.length;d++){var c,u={};this.options.getMatchedFromAllData&&(c=!0);var p=this.getCellData(l[d],t.processNode);if(u.label=this.getCellData(l[d],t.taskNode),u.processid=i[p],u.color=a[p],t.taskIdNode?u.id=this._getCellData(l[d],t.taskIdNode,c):u.id=u.processid+"_"+d,g.D.getBoolean(t.multiTasks)){var m=o.length,f=100/m/2/2,b=100/m,y=100/m/2,v=l[d]%m;u.toppadding=b*v+f+"%",u.height=y+"%"}if("object"==typeof s&&("yyyyMMdd"==t.dateformat?(u.start=WebSquare.text.formatDate(this.getCellData(l[d],s[0]),"yyyy/MM/dd","yyyyMMdd"),u.end=WebSquare.text.formatDate(this.getCellData(l[d],s[1]),"yyyy/MM/dd","yyyyMMdd")):(u.start=this.getCellData(l[d],s[0]),u.end=this.getCellData(l[d],s[1]))),h.push(u),"dd/mm/yyyy"==t.dateformat||"dd-mm-yyyy"==t.dateformat){
if(-1!=t.dateformat.indexOf("/")){var w="$2/$1/$3";g.D.isFF()&&(w="$3/$2/$1"),r.push(new Date(u.start.replace(/(\d{2})\/(\d{2})\/(\d{4})/,w))),r.push(new Date(u.end.replace(/(\d{2})\/(\d{2})\/(\d{4})/,w)))}else if(-1!=t.dateformat.indexOf("-")){w="$2-$1-$3";g.D.isFF()&&(w="$3-$2-$1"),g.D.isSafari()?(r.push(new Date(u.start.replace(/(\d{2})-(\d{2})-(\d{4})/,w).wq_replaceAll("-","/"))),r.push(new Date(u.end.replace(/(\d{2})-(\d{2})-(\d{4})/,w).wq_replaceAll("-","/")))):(r.push(new Date(u.start.replace(/(\d{2})-(\d{2})-(\d{4})/,w))),r.push(new Date(u.end.replace(/(\d{2})-(\d{2})-(\d{4})/,w))))}}else r.push(new Date(u.start)),r.push(new Date(u.end))}return h};var m=[],f={},b={},y=0,v=t.plotColor.split(",");for(n=0;n<r.length;n++,y++){var w={};t.processIdNode&&t.taskIdNode?w.id=p[r[n]]:w.id="process_"+n,w.name=r[n],f[r[n]]=w.id,v.length>y||(y=0),b[r[n]]=v[y],m.push(w)}e.processes.process=m;var S=[];if(""!=s)for(n=0;n<a.length;n++){for(y=0;y<a[n].length;y++){(w={}).label=a[n][y],S.push(w)}e.datatable.datacolumn.push({text:S}),S=[]}var C=[];for(n=0;n<l.length;n++){var _=this._getGanttTaskData(l[n],f,l,d,u,b);C=C.concat(_)}if(e.tasks.task=C,e.tasks.showlabels="1",g.D.getBoolean(t.autoCategory)||"3.11"==t.version){u.sort((function(t,e){return t-e}));var x=u[0],I=u[u.length-1];if(this._getMonthOfFirstDay=function(t){return new Date(t.getFullYear(),t.getMonth()+1,1).getDate()},this._getMonthOfLastDay=function(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},"date"==t.timeBase.toLowerCase()){var T=this._getMonthOfFirstDay(x),k=this._getMonthOfLastDay(I),D=x.getFullYear()+"/"+(x.getMonth()+1)+"/"+T,L=I.getFullYear()+"/"+(I.getMonth()+1)+"/"+k,W=new Date(D),A=new Date(L),M=[],E=new Date(W.getTime());for(M.push(new Date(W.getTime()));E.getTime()<A.getTime();)M.push(new Date(E.setDate(this._getMonthOfLastDay(E)))),E=new Date(E.setDate(this._getMonthOfFirstDay(E))),E=new Date(E.setMonth(E.getMonth()+1>12?0:E.getMonth()+1)),M.push(E);var q="dd/mm/yyyy"==t.dateformat||"dd-mm-yyyy"==t.dateformat||"mm/dd/yyyy"==t.dateformat||"mm-dd-yyyy"==t.dateformat||"yyyy-mm-dd"==t.dateformat||"yyyy/mm/dd"==t.dateformat?t.dateformat.wq_replaceAll("mm","MM"):t.dateformat;if("yyyyMMdd"==q&&(q="yyyy/MM/dd"),2==t.categoryDepth){for(var R={category:[]},N={quater1_start:"/01/01",quater1_end:"/03/31",quater2_start:"/04/01",quater2_end:"/06/30",quater3_start:"/07/01",quater3_end:"/09/30",quater4_start:"/10/01",quater4_end:"/12/31"},F=new Date(W.getTime());F.getTime()<A.getTime();){var O={};F.getMonth()+1<=3?(O.start=WebSquare.date.getFormattedDate(F,q),O.end=WebSquare.date.getFormattedDate(new Date(F.getFullYear()+N.quater1_end),q),O.label=o[0],R.category.push(O),F=new Date(F.getFullYear()+N.quater2_start)):F.getMonth()+1<=6?(O.start=WebSquare.date.getFormattedDate(F,q),O.end=WebSquare.date.getFormattedDate(new Date(F.getFullYear()+N.quater2_end),q),O.label=o[1],R.category.push(O),F=new Date(A.getFullYear()+N.quater3_start)):F.getMonth()+1<=9?(O.start=WebSquare.date.getFormattedDate(F,q),O.end=WebSquare.date.getFormattedDate(new Date(F.getFullYear()+N.quater3_end),q),O.label=o[2],R.category.push(O),F=new Date(F.getFullYear()+N.quater4_start)):(O.start=WebSquare.date.getFormattedDate(F,q),O.end=WebSquare.date.getFormattedDate(new Date(F.getFullYear()+N.quater4_end),q),O.label=o[3],R.category.push(O),F<A&&(F=new Date(F.getFullYear()+1+N.quater1_start)))}t.resizeLastMonth&&(R.category[R.category.length-1].end=WebSquare.date.getFormattedDate(A,q)),e.categories.push(R)}var B={category:[]};for(n=0;n<M.length;n+=2){(O={}).start=WebSquare.date.getFormattedDate(M[n],q),O.end=WebSquare.date.getFormattedDate(M[n+1],q),O.label=i[M[n].getMonth()],O.start&&O.end&&B.category.push(O)}e.categories.push(B)}else if("time"==t.timeBase.toLowerCase())if("12"==t.timeGap){M=["00:00:00","11:59:59","12:00:00","23:59:59"];var V=WebSquareLang.fwGanttChart_ampm.split(",");for(B={category:[]},n=0;n<M.length;n+=2){switch((O={}).start=M[n],O.end=M[n+1],n){case 0:O.label=V[0];break
;case 2:O.label=V[1]}B.category.push(O)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(B)}else if("6"==t.timeGap){for(M=["00:00:00","05:59:59","06:00:00","11:59:59","12:00:00","17:59:59","18:00:00","23:59:59"],V=WebSquareLang.fwGanttChart_timeGap6Label.split(","),B={category:[]},n=0;n<M.length;n+=2){switch((O={}).start=M[n],O.end=M[n+1],n){case 0:O.label=V[0];break;case 2:O.label=V[1];break;case 4:O.label=V[2];break;case 6:O.label=V[3]}B.category.push(O)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(B)}else{for(M=["00:00:00","02:59:59","03:00:00","05:59:59","06:00:00","08:59:59","09:00:00","11:59:59","12:00:00","14:59:59","15:00:00","17:59:59","18:00:00","20:59:59","21:00:00","23:59:59"],V=WebSquareLang.fwGanttChart_timeGap3Label.split(","),B={category:[]},n=0;n<M.length;n+=2){switch((O={}).start=M[n],O.end=M[n+1],n){case 0:O.label=V[0];break;case 2:O.label=V[1];break;case 4:O.label=V[2];break;case 6:O.label=V[3];break;case 8:O.label=V[4];break;case 10:O.label=V[5];break;case 12:O.label=V[6];break;case 14:O.label=V[7]}B.category.push(O)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(B)}else if("datetime"==t.timeBase.toLowerCase())if("12"==t.timeGap){D=x.getMonth()+1+"/"+x.getDate()+"/"+x.getFullYear()+" 00:00:00",L=I.getMonth()+1+"/"+I.getDate()+"/"+I.getFullYear()+" 23:59:59",W=new Date(D),A=new Date(L),M=[],E=new Date(W.getTime());for(M.push(E);E<A;)"0"==E.getSeconds()?(E=new Date(E.getTime()+43199e3),M.push(E)):(E=E.getTime()+1e3,E=new Date(E),M.push(E));B={category:[]};if(2==t.categoryDepth){for(R={category:[]},n=0;n<M.length;n+=4){(O={}).start=M[n],O.end=M[n+3],O.label=WebSquare.date.getFormattedDate(M[n],"yyyy/MM/dd"),R.category.push(O)}e.categories.push(R)}for(V=WebSquareLang.fwGanttChart_ampm.split(","),n=0;n<M.length;n+=2){(O={}).start=M[n],O.end=M[n+1],1*M[n+1].getHours()>12?O.label=V[1]:O.label=V[0],B.category.push(O)}e.categories.push(B)}else if("24"==t.timeGap.toLowerCase()){D=x.getMonth()+1+"/"+x.getDate()+"/"+x.getFullYear()+" 00:00:00",L=I.getMonth()+1+"/"+I.getDate()+"/"+I.getFullYear()+" 23:59:59",W=new Date(D),A=new Date(L),M=[],E=new Date(W.getTime());for(M.push(E);E<A;)"0"==E.getSeconds()?(E=new Date(E.getTime()+86399e3),M.push(E)):(E=E.getTime()+1e3,E=new Date(E),M.push(E));if(2==t.categoryDepth){R={category:[]},T=this._getMonthOfFirstDay(x),k=this._getMonthOfLastDay(I),D=x.getFullYear()+"/"+(x.getMonth()+1)+"/"+T,L=I.getFullYear()+"/"+(I.getMonth()+1)+"/"+k,W=new Date(D),A=new Date(L);var P=[];E=new Date(W.getTime());for(P.push(new Date(W.getTime()));E.getTime()<A.getTime();)P.push(new Date(E.setDate(this._getMonthOfLastDay(E)))),E=new Date(E.setDate(this._getMonthOfFirstDay(E))),E=new Date(E.setMonth(E.getMonth()+1>12?0:E.getMonth()+1)),P.push(E);for(n=0;n<P.length;n+=2){(O={}).start=WebSquare.date.getFormattedDate(P[n],t.dateformat),O.end=WebSquare.date.getFormattedDate(P[n+1],t.dateformat),O.label=i[P[n].getMonth()],O.start&&O.end&&R.category.push(O)}e.categories.push(R)}for(B={category:[]},n=0;n<M.length;n+=2){(O={}).start=M[n],O.end=M[n+1],O.label=2==t.categoryDepth?WebSquare.date.getFormattedDate(M[n],"dd")+WebSquareLang.fwGanttChart_dateSuffix:WebSquare.date.getFormattedDate(M[n],"yyyy/MM/dd"),B.category.push(O)}e.chart.outputdateformat="dd/mm/yyyy hh:mn:ss ampm",e.categories.push(B)}}return e}catch(t){h.w.printStackTrace(t)}},st.prototype.getRealtimeData=function(t,e,i,o){var s={},r=this.getAllArray();if(t||(t=r.columnInfo[0]),e||(e=r.columnInfo[1]),!i){for(var a=new Array,n=0;n<r.columnInfo.length;n++)"number"==this.getCellInfo(n).options.dataType&&a.push(r.columnInfo[n]);i=a[0]}return this._multiSerises=function(){(s={}).categories=[{category:[]}],s.dataset=[];for(var t=o.plotColor.split(","),i=this.getColumnDistinctDataArray(e,{sort:!1}),r=0;r<i.length;r++){var a=this._getfwRealtimeChartSeriesDate(i[r]);a.color=t[r],s.dataset.push(a)}return s},this._getfwRealtimeChartSeriesDate=function(t){var e={};return e.seriesname=t,e},this._multiSerises()},
st.prototype.getFusionChartSimpleData=function(t,e,i,o,s){try{var r={},a=this.getAllArray();if(e||(e=a.columnInfo[0]),i||(i=a.columnInfo[1]),!o){for(var n=new Array,l=0;l<a.columnInfo.length;l++)"number"==this.getCellInfo(l).options.dataType&&n.push(a.columnInfo[l]);o=n[0]}switch(this._singleSerises=function(){for(var t=[],i=this.getAllJSON(),a=0;a<i.length;a++){var n={label:i[a][e],value:i[a][o],color:i[a][s]};t.push(n)}return r.data=t,r},this._multiSerises=function(){(r=this._getFusionChartCategory()).dataset=[];for(var t=this.getColumnDistinctDataArray(i,{sort:!1}),e=0;e<t.length;e++){var o=this._getFusionChartSeriesDate(t[e]);r.dataset.push(o)}return 0==r.dataset.length&&(r={}),r},this._combiSerises=function(){return!1},this._msStacked=function(){return!1},this._msStackedColumn2DLineDY=function(){return!1},this._scatter=function(){return!1},this._zoomLine=function(){return 1!=this.getRowCount()&&this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColumnDistinctDataArray(e,{sort:!1}),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var r={data:[]};r.seriesname=t;var a,n=this.getColumnDistinctDataArray(e,{sort:!1}),l=this.getRowCount(),h=this.getMatchedIndex(i,t,!0,0,l);this.options.getMatchedFromAllData&&(a=!0);for(var d=0;d<n.length;d++){for(var c={value:0},u=0;u<h.length;u++)if(n[d]==this._getCellData(h[u],e,a)){var p=this._getCellData(h[u],s,a);c=p?{value:this._getCellData(h[u],o,a),color:p}:{value:this._getCellData(h[u],o,a)}}r.data.push(c)}return r},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line":case"area2d":case"ssgrid":case"funnel":case"pyramid":case"sparkline":case"sparkcolumn":case"sparkwinloss":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedbar2d":case"stackedbar3d":return this._multiSerises();case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn3dline":case"mscombidy2d":case"mscolumn3dlinedy":case"stackedcolumn3dlinedy":return this._combiSerises();case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"overlappedcolumn2d":case"overlappedbar2d":case"scrollstackedcolumn2d":return this._multiSerises();case"scrollcombi2d":case"scrollcombidy2d":return this._combiSerises();case"scatter":case"bubble":return this._scatter();case"zoomline":return this._zoomLine();case"msstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.w.printStackTrace(t)}},st.prototype.getRowArray=function(t){try{var e={};return e.columnInfo=this.cellIdList,e.data=this.getRowData(t),e}catch(t){h.w.printStackTrace(t)}},st.prototype.getAllArray=function(t){try{var e={};return void 0!==t&&null!=t||(t={}),"object"==typeof t.includeColumns&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,e.data=this.getAllData(t),e}catch(t){h.w.printStackTrace(t)}},st.prototype.getRangeArray=function(t,e,i){try{var o={};return o.columnInfo=this.cellIdList,o.data=this.getRangeData(t,e,i),o}catch(t){h.w.printStackTrace(t)}},st.prototype.getMatchedArray=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={});var a={};"object"==typeof r.includeColumns&&null!=r.includeColumns&&r.includeColumns.constructor===Array?a.columnInfo=r.includeColumns:a.columnInfo=this.cellIdList;var n=this.getMatchedIndex(t,e,i,o,s),l=[];this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var d=0;d<n.length;d++)for(var c=this.getRowData(n[d],r),u=0;u<c.length;u++)l.push(c[u]);return a.data=l,a}catch(t){h.w.printStackTrace(t)}},st.prototype.getUnmatchedArray=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={})
;var a={};"object"==typeof r.includeColumns&&null!=r.includeColumns&&r.includeColumns.constructor===Array?a.columnInfo=r.includeColumns:a.columnInfo=this.cellIdList;for(var n=this.getUnmatchedIndex(t,e,i,o,s),l=[],d=0;d<n.length;d++)for(var c=this.getRowData(n[d],r),u=0;u<c.length;u++)l.push(c[u]);return a.data=l,a}catch(t){h.w.printStackTrace(t)}},st.prototype.setCellData=function(t,e,i,o,s){try{"object"==typeof t&&null!=t&&"number"==typeof t.realRowIndex&&(t.filteredRowIndex=t.realRowIndex,t.realRowIndex=!0),this._setCellData.call(this,t,e,i,o,s)}catch(t){h.w.printStackTrace(t)}},st.prototype.setCellAllData=function(t,e,i,o,s){try{"object"==typeof t&&null!=t?(t.realRowIndex=!0,this._setCellData.call(this,t)):this._setCellData.call(this,{filteredRowIndex:t,colID:e,value:i,direction:o,skipBroadCast:s,realRowIndex:!0});var r=this.getRowCount();this.filterManager.executeAllFilter(this.dataArr,this.getTotalRow(),this.getTotalCol()),r!==this.getRowCount()&&this.broadcast({gridView:["notifySettedFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},st.prototype._setCellData=function(t,e,i,o,s,r,a,n){try{var l,d,c=this.options.depthColumn||!1;if("object"==typeof t&&null!=t){e=t.colID,i=t.value,t.direction,s=t.skipBroadCast,r=t.noEvent,a=t.excludeId,d=t.notifyRowIndex,c=this.options.depthColumn&&!1!==t.realRowIndex||!0===t.realRowIndex;var u=t.filteredRowIndex;n=t.skipInstance,l=t.undoRedo||"",t=null,t=u}!1!==s&&(s=s||r||WebSquare.DataCollection.stopBroadCast),null==i&&(i=""),this.broadcast({gridView:["notifyBeforeSettedCellData"]}),e=this.getColumnID(e);var p=this.getColumnIndex(e),m=this.getTotalRow(),f=this.getTotalCol(),b=c?t:this.filteredRowIndexArr[t],y=this.cellIdList.length;if(t>=0&&b<m&&p>=0&&p<f){var v=this.cellInfoHash[e],w="";if(v&&("expression"==v.options.inputType?w=v.getExpressionValue(b):null==(w=this.dataArr[b*y+p])&&(w="")),"bigDecimal"==v.options.dataType&&"string"==typeof i)if(""===i)i="";else{var S=(C=i.split("."))[1]?C[1].length:0;try{i=Big(i).toFixed(S)}catch(t){i=NaN}}else if("bigDecimal"==v.options.dataType)if($l("If dataType is bigDecimal, value must be entered to String.["+this.id+"]"),""===(i+=""))i="";else{var C;S=(C=i.split("."))[1]?C[1].length:0;try{i=Big(i).toFixed(S)}catch(t){i=NaN}}else this.options.keepDataType&&"number"==v.options.dataType&&!isNaN(parseFloat(i))&&isFinite(i)&&(i=Number(i));var _=i.toString().replace(/\r(\n)?/,"\n"),x=w.toString().replace(/\r(\n)?/,"\n");if("dataMap"==this.initializeType&&i.constructor===Array&&0===i.length&&(_=i),_!==x){if("dataList"==this.initializeType&&!r)if(!1===q.B.fireEvent(this,"onbeforecelldatachange",{rowIndex:t,colID:e,oldValue:w,newValue:i}))return void this.broadcast({gridView:["notifyCellChanged",[t,e]],fusionchart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifyInvalid"],generalComp:["rollback"]});this.dataArr[b*y+p]=i,"grid"==this.initializeType&&this.options.ref&&!0!==n&&this._setInstanceValue(b,e,i,!0);var I=!0;if("undo"!=l&&"redo"!=l||(I=!1),I&&this.options.maxHistoryCount>0&&("undo"!=this.undoRedo&&"redo"!=this.undoRedo||this.commandList.splice(this.commandPosition,this.commandList.length-this.commandPosition+1),this.commandList.length>=this.options.maxHistoryCount&&this.commandList.shift(),this.commandList.push({row:t,col:e,oldValue:w,value:i}),this.commandPosition=this.commandList.length-1,this.undoRedo=""),!v.options.ignoreStatus){var T=!1,k=this.originalDataArr[b*y+p];if(g.D.isNull(k)&&(k=""),k===i){for(var D=[],L=0;L<y;L++)!0!==this.ignoreStatusColArr[L]&&D.push(this.originalDataArr[b*y+L]);var W=[];for(L=0;L<y;L++)if(!0!==this.ignoreStatusColArr[L]){var A="";"expression"==v.options.inputType?A=v.getExpressionValue(b):null==(A=this.dataArr[b*y+L])&&(A=""),W.push(A)}for(var M=!1,E=0;E<D.length;E++)if(D[E]!=W[E]){M=!0;break}M||(T=!0)}T?("U"==this.rowStatusArr[b]&&this.modifyRowStatus(t,"R"),
"U"==this.cellStatusArr[b*this.oneRowDataLength+p]&&this.modifyCellStatus(t,p,"R")):(this._updateRowStatus(b,p),this._updateCellStatus(b,p))}if("dataList"==this.initializeType&&(this.fireOnModelChangeEvent({type:"cell",rowIndex:t,colID:e,oldValue:w,newValue:i}),r||q.B.fireEvent(this,"oncelldatachange",{rowIndex:t,colID:e,oldValue:w,newValue:i})),!s){var R=this.getFilteredRowIndex(b);null==R&&(R=t),"number"!=typeof d&&(d=R),this.broadcast({colID:e,gridView:["notifySettedCellData",[d,e,i]],linkedDataList:["notifyCellChanged",[b,e,i]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"cell",refresh:!0,rowIndex:b,colID:e,newValue:i,oldValue:w}]],treeview:["notifySetCellData",[R,e,i,w]],generalComp:"both",excludeId:a,type:"setCellData"})}}}}catch(t){h.w.printStackTrace(t)}},st.prototype._setData=function(t,e,i){try{e=this.getColumnIndex(e);this.dataArr[t*this.getColumnCount()+e]=i}catch(t){h.w.printStackTrace(t)}},st.prototype.setOriginalCellData=function(t,e,i){try{var o=this.getColumnIndex(e),s=this.options.depthColumn?t:this.getRealRowIndex(t);this._setOriginalCellData.call(this,s,o,i)}catch(t){h.w.printStackTrace(t)}},st.prototype._setOriginalCellData=function(t,e,i){try{var o=this.getColumnIndex(e);null==i&&(i="");var s=this.getTotalRow(),r=this.getTotalCol(),a="";if(t>=0&&t<s&&o>=0&&o<r&&(a=this.getOriginalCellData(t,o)),t>=0&&t<s&&o>=0&&o<r)i.toString().replace(/\r(\n)?/,"\n")!==a.toString().replace(/\r(\n)?/,"\n")&&(this.originalDataArr[t*this.getColumnCount()+o]=i)}catch(t){h.w.printStackTrace(t)}},st.prototype.setColumnDefaultValue=function(t,e){try{t=this.getColumnID(t);this.getCellInfo(t).options.defaultValue=e,this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifySetColumnDefaultValue",[t,e]],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.setRowData=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t));var r=this.getColumnCount(),a=!1,n={};if("object"==typeof o&&null!=o&&o.constructor===Array){a=!0;for(var l=0;l<o.length;l++)n[o[l]]=!0}for(var d=0;d<r;d++){var c=this.cellIdList[d],u=this.cellInfoHash[c];if(!a||n[c]){var p=e[d];null==p&&(p=u.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:d,value:p,noEvent:!0})}else"dataMap"!==this.initializeType||s||this._setCellData({filteredRowIndex:t,colID:c,value:u.options.defaultValue,noEvent:!0})}var g=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[g]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},st.prototype.setOriginalDataArr=function(t){try{this.originalDataArr=t}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.resetOriginalDataArr=function(){try{this.originalDataArr=this.dataArr.slice()}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.setDataFile=function(t,e,i,o,s,r){try{s=null==s?1:parseInt(s,10),"string"==typeof t&&(t=r?this.toArray(t,r):this.toArray(t));var a,n=[],d=parseInt(i.length,10),c=l.v.getComponentById(o),u=[];if(c._excelUploadInfo){var p=JSON.parse(c._excelUploadInfo);p.convertIndexArr&&(u=p.convertIndexArr)}for(var g=0;g<d;g++){"expression"==(b=l.v.getComponentById(o).getCellInfo(i[g])).options.inputType&&n.push(g)}a=t.length/d;for(g=0;g<n.length;g++)for(var m=parseInt(n[g],10),f=0;f<a;f++){t[E=f*d+m]=""}for(g=0;g<d;g++){var b,y=(b=l.v.getComponentById(o).getCellInfo(i[g])).options.dataType;if(b.itemsetObj&&""!=b.itemsetObj.nodeset&&b.itemsetObj.nodeset.wq_replaceAll(" ","").indexOf("data:")>=0&&0==this._isInitialzedItemArr(b)){b.itemArr=[];var v=b.itemsetObj.nodeset.replace("data:",""),w=WebSquare.DataCollection.comp[v]
;if(null==w&&b.scope_id&&(w=WebSquare.DataCollection.comp[b.scope_id+"_"+v]||null),w&&WebSquare.idCache[w.uuid])switch(w.initializeType){case"linkedDataList":"select"!==b.options.inputType&&"checkcombobox"!==b.options.inputType&&"autoComplete"!==b.options.inputType||w&&"linkedDataList"===w.initializeType&&null!=w.conditionInfo&&w.conditionInfo.filterInfo.useRef&&(w=w._dataList);case"dataList":for(var S=[],C={},_=0;_<w.getDataLength();_++){var x=w.getCellData(_,b.itemsetObj.label),I=w.getCellData(_,b.itemsetObj.value);C[x]!=I&&(C[x]=I,S.push({label:x,value:I}))}b.itemArr=S;break;case"dataMap":for(S=[],C={},_=0;_<w.getCount();_++){x=w.get(b.itemsetObj.label),I=w.get(b.itemsetObj.value);C[x]!=I&&(C[x]=I,S.push({label:x,value:I}))}b.itemArr=S}}if("select"==b.options.inputType){var T=[];for(f=0;f<b.itemArr.length;f++){var k=b.itemArr[f];if(2!=s){var D=!1;for(_=0;_<u.length;_++)if(u[_]==g.toString()){D=!0;break}if(D)T[k.value]=k.value;else{T[k.label]=k.value;var L=b.getItemText(f);k.label!==L&&(T[L]=k.value)}}else T[k.value]=k.value}for(f=0;f<a;f++){var W=T[t[E=f*d+g]];(!1!==b.options.selectedData||W)&&(t[E]=W)}}else if("checkcombobox"==b.options.inputType){for(T=[],f=0;f<b.itemArr.length;f++){for(D=!1,_=0;_<u.length;_++)if(u[_]==g.toString()){D=!0;break}k=b.itemArr[f];if(D)T[k.value]=k.value;else{T[k.label]=k.value;L=b.getItemText(f);k.label!==L&&(T[L]=k.value)}}for(f=0;f<a;f++){var A=[],M=t[E=f*d+g].split(b.separator);for(_=0;_<M.length;_++)A.push(T[M[_]]);t[E]=A.join(b.separator)}}else if("autoComplete"==b.options.inputType){for(T=[],f=0;f<b.itemArr.length;f++){for(D=!1,_=0;_<u.length;_++)if(u[_]==g.toString()){D=!0;break}k=b.itemArr[f];if(D)T[k.value]=k.value;else{T[k.label]=k.value;L=b.getItemText(f);k.label!==L&&(T[L]=k.value)}}for(f=0;f<a;f++){for(A=[],M=t[E=f*d+g].split(" "),_=0;_<M.length;_++)A.push(T[M[_]]);t[E]=A.join(" ").wq_trim()}}if(""!=b.options.displayFormat)for(f=0;f<a;f++){var E,q,R=t[E=f*d+g],N=b.options.displayFormat;if("number"==y||"bigDecimal"==y||"float"==y)q=WebSquare.text.unformatCurrency(N,R);else if("date"==y)b.options.useMonthYearFormat?(R=R.replace(/\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s/g,""),q=WebSquare.date.getIOUnFormatDate(R,b.options.ioFormat,b.options.calendarValueType)):q=WebSquare.text.unformatDate(N,R);else if("time"==y)q=WebSquare.text.unformatTime(N,R);else if("euro"==y&&b.options.customModelFormatter){var F=new RegExp("["+b.options.delimiter+"]","g"),O=new RegExp("["+b.options.decimalDelimiter+"]","g");q=(R=R.replace(F,"")).replace(O,".")}else q=WebSquare.text.unformatText(N,R);t[E]=q}}this.setData(t,e,i)}catch(t){h.w.printStackTrace(t)}},st.prototype.setData=function(t,e,i,o,s){try{if("string"==typeof t&&(t=s?this.toArray(t,s):this.toArray(t)),i){if(i instanceof Array||"string"!=typeof i||(i=this.toArray(i)),!g.D.isInteger(t.length/i.length))return void d.k.printLog("[WebSquare.DataCollection.dataController.setData] Inconsistent array. Array length["+t.length+"] is not a multiple of column length["+i.length+"].["+this.id+"]");t=this.getMappingData(t,i,e)}if(!g.D.isInteger(t.length/this.oneRowDataLength))return void d.k.printLog("[WebSquare.DataCollection.dataController.setData] Inconsistent array. Array length["+t.length+"] is not a multiple of column length["+this.oneRowDataLength+"].["+this.id+"]");for(var r=[],a=0;a<this.cellIdList.length;a++)r[a]=this.getCellInfo(this.cellIdList[a]);for(var n=t.length/this.oneRowDataLength,l=0;l<r.length;l++)if(r[l].options.setFormatter)for(var c=g.D.getGlobalFunction(r[l].options.setFormatter,this.scope_id),u=0;u<n;u++){for(var p=[],m=0;m<this.oneRowDataLength;m++)p.push(t[u*this.oneRowDataLength+m]);"function"==typeof c&&(t[u*this.oneRowDataLength+l]=c.call(this,p,u,this.cellIdList[l]))}if(null!=o&&o.length>0&&t.length/this.oneRowDataLength===o.length){var f=!!e;this.setGridData(t,e,f),this.setAllRowStatus(o,e)}else this.setGridData(t,e)}catch(t){h.w.printStackTrace(t)}},
st.prototype.setGridData=function(t,e,i){try{this.options.keepFilter&&this.broadcast({gridView:["notifyBeforeKeepFilter"]}),this.broadcast({gridView:["notifySettedData",[e]]}),this.filterManager.clear(),this.filteredRowIndexArr=[];for(var o=this.getTotalRow(),s=0;s<o;s++)this.filteredRowIndexArr.push(s);this.options.keepFilter||this.broadcast({gridView:["clearHeaderSort"]});var r=t.length/this.oneRowDataLength;if(this.options.keepDataType){var a=this.getTotalCol();for(s=0;s<a;s++){if("number"==this.getCellInfo(s).options.dataType)for(var n=0;n<r;n++){var l=t[n*this.oneRowDataLength+s];!isNaN(parseFloat(l))&&isFinite(l)&&(t[n*this.oneRowDataLength+s]=Number(l))}}}e=e||!1;var d=this.getTotalRow();if(e)for(s=0;s<t.length;s++)this.dataArr.push(t[s]),this.originalDataArr.push(t[s]);else d=0,this.dataArr=t,this.filteredRowIndexArr=[],this.originalDataArr=[],this.originalDataArr=this.dataArr.slice(0),this.commandList=[],this.commandPosition=-1,this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedo="","dataList"!=this.initializeType&&"grid"!=this.initializeType||this.removeManager.removeAll();for(s=0;s<r;s++)this.filteredRowIndexArr.push(s+d);if(i||this._initRowStatus(d),i||this._initCellStatus(d),this.options.keepRowPosition&&e&&this.options.keepRowPosition||(this.rowPosition=null),!e&&null!=this.options.initRowPosition){var c=parseInt(this.options.initRowPosition,10);this.setRowPosition(c)}var u={linkedDataList:["notifyDataChanged"],gridView:["notifySettedGridData",[t,e,d]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"};"string"==typeof this.options.refreshMode&&""!=this.options.refreshMode&&(u.refreshMode=this.options.refreshMode),this.broadcast(u),q.B.fireEvent(this,"ondataload"),this.options.keepFilter&&!this.flag_preventLoop&&(this.flag_preventLoop=!0,this.broadcast({gridView:["notifyAfterKeepFilter"]}),this.flag_preventLoop=!1)}catch(t){h.w.printStackTrace(t)}},st.prototype.insertData=function(t,e){try{return this._insertData(t,e)}catch(t){h.w.printStackTrace(t)}},st.prototype._insertData=function(t,e,i){try{if(null==e)return void $l("data is null");var o=this.getColumnCount(),s=e.length/this.getColumnCount();if(e){if(!(e instanceof Array))return;if(!g.D.isInteger(s))return void d.k.printLog("[WebSquare.DataCollection.dataController.getMappingData] Inconsistent array. Array length["+e.length+"] is not a multiple of column length["+o+"].["+this.id+"]")}var r={},a=[],n=s,l=0,c=1;i<0&&(n=1,l=s+1,c=-1);for(var u=this.filteredRowIndexArr[t],p=n;p*c>l*c;p-=c){var m=t+p-1;r[m]=[],a.push(m),this.insertRow(t,{noEvent:!0});for(var f=0;f<o;f++){var b=e[o*(p-1)+f];this._setCellData({filteredRowIndex:t,colID:f,value:b,noEvent:!0}),r[m].push(b)}}this.broadcast({gridView:["notifyDataChanged",[{refreshScroll:!0}]],linkedDataList:["notifyRowInserted",[u,a]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"}),q.B.fireEvent(this,"oninsertrow",{insertedDataObj:r})}catch(t){h.w.printStackTrace(t)}},st.prototype.setRowXML=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");var r;this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t)),r=void 0===e.documentElement?e:e.documentElement;var a=[],n={},l=this.getColumnCount(),d=!1,c={};if("object"==typeof o&&null!=o&&o.constructor===Array){d=!0;for(var u=0;u<o.length;u++)c[o[u]]=!0}for(var p=0;p<l;p++){var m=this.cellIdList[p],f=null,b=this.cellInfoHash[m],y=null;if(!d||c[m])if(b.options.importFormatter)a.push(m);else{if(null!=(y=r.selectSingleNode(m)))if(""==this.options.valueNode||this.allowTextNode){
if(this.allowTextNode)f=null==(v=WebSquare.xml.getCDataNodeValue(y))?this.getTextNodeValue(y):v;else f=this.getTextNodeValue(y);!f&&this.allowTextNode&&(f=""==this.options.valueNode?null:y.getAttribute(this.options.valueNode))}else f=y.getAttribute(this.options.valueNode);else if(null!=(y=WebSquare.xml.getElementsByTagName(r,m)[0]))if(""==this.options.valueNode||this.allowTextNode){var v;if(this.allowTextNode)f=null==(v=WebSquare.xml.getCDataNodeValue(y))?this.getTextNodeValue(y):v;else f=this.getTextNodeValue(y);!f&&this.allowTextNode&&(f=""==this.options.valueNode?null:y?y.getAttribute(this.options.valueNode):null)}else f=y?y.getAttribute(this.options.valueNode):null;null==f&&(f="number"==b.options.dataType&&b.options.defaultValue&&!isNaN(b.options.defaultValue)?parseInt(b.options.defaultValue,10):b.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:p,value:f,noEvent:!0}),n[m]=f}else"dataMap"!==this.initializeType||s||this._setCellData({filteredRowIndex:t,colID:m,value:b.options.defaultValue,noEvent:!0})}for(var w=0;w<a.length;w++){b=this.cellInfoHash[a[w]];try{var S=t,C=g.D.getGlobalFunction(b.options.importFormatter,this.scope_id);"function"==typeof C&&(f=C.call(this,n,S,a[w]))}catch(t){f=b.options.defaultValue,h.w.printStackTrace(t,null,this)}this._setCellData({filteredRowIndex:t,colID:a[w],value:f,noEvent:!0})}var _=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[_]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},st.prototype.setXML=function(t,e,i,o){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setXML] XML is null["+this.id+"]");var s=this.xmlData2ArrData(t,i);if(void 0===s.dataArr)return void d.k.printLog("[WebSquare.DataCollection.dataController.setXML] DataArray which converted from XML is undefined.["+this.id+"]");var r=g.D.getBoolean(o)?s.rowStatusArr:[];this.setData(s.dataArr,e,null,r)}catch(t){h.w.printStackTrace(t)}},st.prototype.insertXML=function(t,e){try{if(null==e)return void $l("data is null");var i;i=void 0===e.documentElement?e:e.documentElement;var o=this.xmlData2ArrData(i);this.insertData(t,o.dataArr)}catch(t){h.w.printStackTrace(t)}},st.prototype.setJSON=function(t,e,i,o){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setJSON] data is null["+this.id+"]");if(null!=this.options.customUnformatter){var s=g.D.getGlobalFunction(this.options.customUnformatter);"function"==typeof s&&(t=s(this,t))}var r=this.jsonData2ArrData(t,i);if(void 0===r.dataArr)return void d.k.printLog("[WebSquare.DataCollection.dataController.setJSON] DataArray which converted from JSON is undefined.["+this.id+"]");var a=g.D.getBoolean(o)?r.rowStatusArr:[];this.setData(r.dataArr,e,null,a)}catch(t){h.w.printStackTrace(t)}},st.prototype.setRowJSON=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t));var r=e,a=!1,n={};if("object"==typeof o&&null!=o&&o.constructor===Array){a=!0;for(var l=0;l<o.length;l++)n[o[l]]=!0}for(var d in e)if(!a||n[d]){m=this.getCellInfo(d);var c=null;if(m.options.importFormatter)try{var u=this.getColumnIndex(d),p=g.D.getGlobalFunction(m.options.importFormatter,this.scope_id);"function"==typeof p&&(c=p.call(this,r,u,d))}catch(t){c=m.options.defaultValue,h.w.printStackTrace(t,null,this)}else c=e[d];null==c&&(c=m.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:d,value:c,noEvent:!0})}else if("dataMap"===this.initializeType&&!s){var m=this.getCellInfo(d);this._setCellData({filteredRowIndex:t,colID:d,value:m.options.defaultValue,noEvent:!0})}var f=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[f]],fusionChart:["refresh"],
fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},st.prototype.insertJSON=function(t,e){try{if(null==e)return void d.k.printLog("[WebSquare.DataCollection.dataController.insertJSON] data is null["+this.id+"]");if(null!=this.options.customUnformatter){var i=g.D.getGlobalFunction(this.options.customUnformatter);"function"==typeof i&&(e=i(this,e))}var o=this.jsonData2ArrData(e);if(void 0===o.dataArr)return void d.k.printLog("[WebSquare.DataCollection.dataController.insertJSON] DataArray which converted from JSON is undefined.["+this.id+"]");this.insertData(t,o.dataArr)}catch(t){h.w.printStackTrace(t)}},st.prototype.setArray=function(t,e,i,o,s){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArray] data is null["+this.id+"]");var r=t.data,a=[];if(a="object"==typeof i&&null!=i&&i.constructor===Array?i:t.columnInfo,void 0===r)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArray] DataArray which converted from jsonArray is undefined.["+this.id+"]");var n=g.D.getBoolean(o)?t.rowStatus:[];this.setData(r,e,a,n,s)}catch(t){h.w.printStackTrace(t)}},st.prototype.setArrayFile=function(t,e,i,o,s){try{if(null==o&&(o=1),null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArrayFile] data is null["+this.id+"]");var r=t.data,a=t.columnInfo;if(void 0===r)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArrayFile] DataArray which converted from jsonArray is undefined.["+this.id+"]");this.setDataFile(r,e,a,i,o,s)}catch(t){h.w.printStackTrace(t)}},st.prototype.setRowArray=function(t,e,i){try{if(null==e)return void d.k.printLog("[WebSquare.DataCollection.dataController.setRowArray] data is null["+this.id+"]");var o;if(0==(o=this.getMappingData(e.data,e.columnInfo)).length)return void d.k.printLog("[WebSquare.DataCollection.dataController.setRowArray] DataArray which converted from jsonArray is undefined.["+this.id+"]");this.setRowData(t,o,i)}catch(t){h.w.printStackTrace(t)}},st.prototype.rowMoveUp=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);if(e>=this.getRowCount()&&(e=this.getRowCount()-1),e<=0)return;this._rowMoveUp(t,e,e-1)}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.rowMoveDown=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);if(e<0&&(e=0),e>=this.getRowCount()-1)return;this._rowMoveDown(t,e,e+1)}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.rowMoveUpFiltered=function(t){try{if(t<=0)return;var e=this.options.depthColumn?t:this.getRealRowIndex(t);e>=this.getRowCount()&&(e=this.getRowCount()-1),this._rowMoveUp(t,e,this.getRealRowIndex(t-1))}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.rowMoveDownFiltered=function(t){try{if(t>=this.getRowCount()-1)return;var e=this.options.depthColumn?t:this.getRealRowIndex(t);e<0&&(e=0),this._rowMoveDown(t,e,this.getRealRowIndex(t+1))}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype._rowMoveUp=function(t,e,i){try{for(var o,s=this.oneRowDataLength,r=0;r<s;r++)o=this.dataArr[s*i+r],this.dataArr[s*i+r]=this.dataArr[s*e+r],this.dataArr[s*e+r]=o,o=this.originalDataArr[s*i+r],this.originalDataArr[s*i+r]=this.originalDataArr[s*e+r],this.originalDataArr[s*e+r]=o;var a=this.getRowStatus(t-1),n=this.getRowStatus(t);this._setRowStatus(i,n),this._setRowStatus(e,a),e=this.filteredRowIndexArr[t],this.broadcast({linkedDataList:["notifyRowMoveUp",[e]],gridView:["notifyRowMoveUp",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype._rowMoveDown=function(t,e,i){try{for(var o,s=this.oneRowDataLength,r=0;r<s;r++)o=this.dataArr[s*i+r],this.dataArr[s*i+r]=this.dataArr[s*e+r],this.dataArr[s*e+r]=o,o=this.originalDataArr[s*i+r],this.originalDataArr[s*i+r]=this.originalDataArr[s*e+r],this.originalDataArr[s*e+r]=o;var a=this.getRowStatus(t+1),n=this.getRowStatus(t)
;this._setRowStatus(i,n),this._setRowStatus(e,a),e=this.filteredRowIndexArr[t],this.broadcast({linkedDataList:["notifyRowMoveDown",[e]],gridView:["notifyRowMoveDown",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.insertRow=function(t,e){try{e=e||{};var i=this.getDataLength(),o=this.getTotalRow();"string"!=typeof t&&null!=t||(t=parseInt(t,10)),isNaN(t)&&(t=i);var s=t;this.filterManager.useFilter()?"true"==e.insertIntoSortedRow&&this.filterManager.onlySortFilter()||(s=o):s>o&&(s=o),!this.options.depthColumn&&t>this.getDataLength()&&(t=this.getDataLength()),this.broadcast({gridView:["notifyBeforeInsertedRow",[t]]});for(var r=this.getTotalCol(),a=[s*r,0],n=[],l=0;l<r;l++){var d=this.getCellInfo(l);if(e.insertData&&e.insertData[l])var c=e.insertData[l];else if("number"==d.options.dataType&&d.options.defaultValue&&!isNaN(d.options.defaultValue))c=parseInt(d.options.defaultValue,10);else c=d.options.defaultValue;a.push(c),n.push(c)}[].splice.apply(this.dataArr,a),[].splice.apply(this.originalDataArr,a),this._createRowStatus(s),this._createCellStatus(s);var u=this.filteredRowIndexArr.length;if(this.options.depthColumn)for(l=0;l<this.filteredRowIndexArr.length;l++)if(1==this.filteredRowIndexArr.length)u=this.filteredRowIndexArr[l]==s?l:l+1;else{if(this.filteredRowIndexArr[l]<=s&&s<this.filteredRowIndexArr[l+1]){u=l;break}if(s==this.filteredRowIndexArr[l+1]){u=l+1;break}}else u=t;for(l=0;l<this.filteredRowIndexArr.length;l++)this.filteredRowIndexArr[l]>=s&&this.filteredRowIndexArr[l]++;this.filteredRowIndexArr.splice(u,0,s);s=this.filteredRowIndexArr[t];if(e.noEvent)this.broadcast({gridView:["notifyAfterInsertedRow",[u,!0]],_bForceBroadcast:!0});else{this.broadcast({linkedDataList:["notifyRowInserted",[s]],treeview:["notifyInsertRow",[u]],generalComp:"both",type:"insertRow"}),this.broadcast({gridView:["notifyAfterInsertedRow",[u,!this._getBroadcastAll()]],_bForceBroadcast:!0});var p={};p[u]=n,q.B.fireEvent(this,"oninsertrow",{insertedDataObj:p})}return t}catch(t){h.w.printStackTrace(t)}},st.prototype.removeRow=function(t,e){try{e=e||{},null==t&&(t=this.getTotalRow()-1),t=parseInt(t,10);var i=this.options.depthColumn?t:this.getRealRowIndex(t),o=this.getTotalCol();if(null==i||i>=this.getTotalRow())return;if(this.options.depthColumn&&!1!==e.removeChildren&&this.hasChild(i)){var s=this.getRecursiveRowIndex(i);return s.push(i),e.noEvent=!0,e.removeChildren=!1,this.removeRows(s,e)}this.broadcast({gridView:["notifyBeforeRemovedRow",[t]]});var r=this.dataArr.splice(i*o,o),a=this.removeRowStatus(t);this.originalDataArr.splice(i*o,o);var n=this.getFilteredRowIndex(i);n>-1&&this.filteredRowIndexArr.splice(n,1);for(var l=0;l<this.filteredRowIndexArr.length;l++)this.filteredRowIndexArr[l]>=i&&this.filteredRowIndexArr[l]--;"dataList"!=this.initializeType&&"grid"!=this.initializeType||this.options.removeDummyRowStatus&&(!this.options.removeDummyRowStatus||"C"==a)||(this.options.removeDummyRowStatus&&"V"==a?this.options.saveRemovedDataDeletedInsertedRow&&this.saveRemovedRow(i,r):this.saveRemovedRow(i,r));var d=r.slice(0);if(e.noEvent)this.broadcast({gridView:["notifyAfterRemovedRow",[n,!0,i,d.join(",")]],_bForceBroadcast:!0});else{this.broadcast({linkedDataList:["notifyRowRemoved",[i]],treeview:["notifyRemoveRow",[t]],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"}),this.broadcast({gridView:["notifyAfterRemovedRow",[n,!this._getBroadcastAll(),i,d.join(",")]],_bForceBroadcast:!0});var c={};c[n]=d,q.B.fireEvent(this,"onremoverow",{removedDataObj:c})}return r}catch(t){h.w.printStackTrace(t)}},st.prototype.removeRows=function(t,e){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.removeRows] rowIndexArr is undefined.["+this.id+"]");if(0==t.length)return void d.k.printLog("[WebSquare.DataCollection.dataController.removeRows] rowIndexArr is empty.["+this.id+"]");function a(t,e){return parseInt(t)<parseInt(e)?1:-1}e=e||{noEvent:!0},t.sort(a)
;for(var i=[],o={},s=0;s<t.length;s++){var r=this.removeRow(t[s],e);o[t[s]]=r.slice(0),i.push(r)}return this.rowPosition=null,this.columnPosition=null,e.skipNotify||(this.broadcast({linkedDataList:["notifyRowRemoved"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"}),this.broadcast({gridView:["notifyRemovedRows",[t.join(","),!this._getBroadcastAll()]],_bForceBroadcast:!0})),q.B.fireEvent(this,"onremoverow",{removedDataObj:o}),i}catch(t){h.w.printStackTrace(t)}},st.prototype.removeAll=function(t){try{if(null!=t&&"true"==t.skipSavingRemovedData||"dataList"==this.initializeType&&this.removeManager.setData(this.getAllData(),!0),!this.dataArr)return;var e=this.dataArr.slice(0);this.dataArr=[],this.originalDataArr=[],this.filteredRowIndexArr=[],this._initRowStatus(0),this.broadcast({linkedDataList:["notifyRemoveAll"],gridView:["notifyRemovedAll",[null==t||!1!==t.clearHistory]],generalComp:"both",pivot:["refreshItemset",[{type:"render",refresh:!0}]]});var i=t&&!0===t.skipEvent,o=!1;if("dataList"==this.initializeType&&this.userEventList&&!i){for(var s=this.userEventList.length-1;s>=0;s--)if("onremoverow"==this.userEventList[s].name){o=!0;break}if(o){var r=e.slice(0),a={},n=r.length/this.oneRowDataLength;for(s=0;s<n;s++)a[s]=r.slice(s*this.oneRowDataLength,(s+1)*this.oneRowDataLength);q.B.fireEvent(this,"onremoverow",{removedDataObj:a})}}return e}catch(t){h.w.printStackTrace(t)}},st.prototype._removeAll_keepFilter=function(t){try{return void 0!==t&&null!=t||(t={}),t.clearHistory=!1,this.removeAll(t)}catch(t){h.w.printStackTrace(t)}},st.prototype.removeRange=function(t,e){try{for(var i=[],o=e;o>=t;o--)i.push(o);return this.removeRows(i)}catch(t){h.w.printStackTrace(t)}},st.prototype.reform=function(){try{this._initRowStatus(),this._initCellStatus(),this.originalDataArr=this.dataArr.slice(0),"dataList"==this.initializeType&&this.removeManager.removeAll(),this.broadcast({linkedDataList:["notifyReformed"],gridView:["notifyReformed"],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},st.prototype.undoRow=function(t){try{if(this.options.depthColumn&&this.hasChild(t)&&this.options.undoRecursiveRow){var e=this.getChildrenRowArr(t);this.undoRows(e)}this._undoRow(t);var i=this.filteredRowIndexArr[t];this.broadcast({linkedDataList:["notifyRowChanged",[i]],gridView:["notifyRowModified",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},st.prototype.undoRows=function(t){try{function s(t,e){return parseInt(t)<parseInt(e)?1:-1}t.sort(s);for(var e=[],i=0;i<t.length;i++){var o=this.undoRow(t[i]);e.push(o)}return e}catch(t){h.w.printStackTrace(t)}},st.prototype._undoRow=function(t){try{for(var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=0;i<this.oneRowDataLength;i++){var o=this.originalDataArr[e*this.oneRowDataLength+i];this._setData(e,i,o)}this._updateRowStatus(e),this._undeleteRowStatus(e)}catch(t){h.w.printStackTrace(t)}},st.prototype.undoAll=function(){try{for(var t=this.getRowIndexByStatus("UDV"),e=0;e<t.length;e++){var i=t[e];this._undoRow(i)}this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged",[{refreshScroll:!0}]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},st.prototype.restore=function(){try{if("undo"==this.undoRedo&&this.commandPosition--,this.commandPosition<0)return void(this.commandPosition=0);var t=this.commandList[this.commandPosition];this._setCellData({filteredRowIndex:t.row,colID:t.col,value:t.oldValue,noEvent:!1,undoRedo:"undo"}),this.undoRedo="undo"}catch(t){h.w.printStackTrace(t)}},st.prototype.redo=function(){try{if("redo"==this.undoRedo&&this.commandPosition++,this.commandList.length-1<this.commandPosition)return void(this.commandPosition=this.commandList.length-1);var t=this.commandList[this.commandPosition];this._setCellData({filteredRowIndex:t.row,colID:t.col,value:t.value,noEvent:!1,undoRedo:"redo"}),this.undoRedo="redo"}catch(t){h.w.printStackTrace(t)}},
st.prototype._undoRedoHistoryClear=function(){try{this.commandList=[],this.commandPosition=-1,this.undoRedo=""}catch(t){h.w.printStackTrace(t)}},st.prototype.undoRedoSave=function(t){try{for("undo"!=this.undoRedoMulti&&"redo"!=this.undoRedoMulti||this.commandListMulti.splice(this.commandPositionMulti,this.commandListMulti.length-this.commandPositionMulti+1),this.commandListMulti.push(t);this.commandListMulti.length>500;)this.commandListMulti.shift();this.commandPositionMulti=this.commandListMulti.length-1,this.undoRedoMulti=""}catch(t){h.w.printStackTrace(t)}},st.prototype._undoRedoMultiHistoryClear=function(){try{this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedoMulti="",this._undoRedoHistoryClear()}catch(t){h.w.printStackTrace(t)}},st.prototype._clearHistory=function(){try{this._undoRedoMultiHistoryClear()}catch(t){h.w.printStackTrace(t,null,this)}},st.prototype.restoreMulti=function(){try{if("undo"==this.undoRedoMulti&&this.commandPositionMulti--,this.commandPositionMulti<0)return void(this.commandPositionMulti=0);for(var t=this.commandListMulti[this.commandPositionMulti].length;t>0;t--)this.restore();this.undoRedoMulti="undo"}catch(t){h.w.printStackTrace(t)}},st.prototype.redoMulti=function(){try{if("redo"==this.undoRedoMulti&&this.commandPositionMulti++,this.commandListMulti.length-1<this.commandPositionMulti)return this.commandPositionMulti=this.commandListMulti.length-1,void(this.undoRedoMulti="");for(var t=this.commandListMulti[this.commandPositionMulti],e=0;e<t.length;e++)this.redo();this.undoRedoMulti="redo"}catch(t){h.w.printStackTrace(t)}},st.prototype.insertColumn=function(t,e){try{if(void 0!==this.bodyIdColIndexMap[t])return void d.k.printLog("[WebSquare.DataCollection.dataController.insertColumn] already exist column in ["+this.id+"]");for(var i=this.getTotalRow(),o=this.getTotalCol(),s=e||{},r=null==s.colIndex?o:parseInt(s.colIndex),n=null==s.defaultValue?"":s.defaultValue,l=[],c=[],u=0;u<i;u++)for(var p=0,g=0;g<o+1;g++)g===r?(l.push(n),c.push(n)):(l.push(this.dataArr[u*o+p]),c.push(this.originalDataArr[u*o+p]),p++);this.dataArr=l,this.originalDataArr=c,this.bodyIdColIndexMap[t]=this.oneRowDataLength;var m=new WebSquare.DataCollection.dataListCellInfo(null,this,this.oneRowDataLength);m.id=t,m.name=s.name||"name"+(this.oneRowDataLength+1),a.x.extendKeepingType(m.options,s),m.options.col_id=t,m.options.id=t,m.options.name=m.name,this.cellInfoHash[t]=m,this.oneRowDataLength++,this.cellIdList.splice(r,0,t);var f=a.x.extend({},m.options);this.structure.rowArr[0].splice(r,0,f),"dataList"===this.initializeType&&this.removeManager.insertColumn(t,e)}catch(t){h.w.printStackTrace(t)}},st.prototype.removeColumn=function(t,e){try{var i=this.getTotalRow(),o=this.getTotalCol(),s=this.getColumnID(t);if(null==s)return!1;for(var r=this.getColumnIndex(s),a=[],n=[],l=0;l<i;l++)for(var d=0;d<o;d++)d!==r&&(a.push(this.dataArr[l*o+d]),n.push(this.originalDataArr[l*o+d]));this.dataArr=a,this.originalDataArr=n,delete this.bodyIdColIndexMap[s],delete this.cellInfoHash[s],this.oneRowDataLength--;var c=-1,u=0;for(l=0;l<this.cellIdList.length;l++)this.cellIdList[l]===s?c=l:(this.bodyIdColIndexMap[this.cellIdList[l]]=u,u++);this.cellIdList.splice(c,1);var p=this.structure.rowArr;for(l=0;l<p.length;l++){var g=p[l];for(d=0;d<g.length;d++)if(g[d].id===s){g.splice(d,1);break}}"dataList"===this.initializeType&&this.removeManager.removeColumn(t,e)}catch(t){h.w.printStackTrace(t)}},st.prototype.setMatchIgnoreCase=function(t){try{this.options.matchIgnoreCase=g.D.getBoolean(t)}catch(t){h.w.printStackTrace(t)}},st.prototype._setInstanceValue=function(t,e,i,o){try{return!("grid"!=this.initializeType||!this.options.ref)&&(WebSquare.ModelUtil._setInstanceValue({xpath:this._getXPath({rowIndex:t,colID:e}),value:i,gridNoRefresh:o,scopeId:this.options.aliasDataCollection||void 0}),!0)}catch(t){h.w.printStackTrace(t)}},st.prototype._getXPath=function(t){try{var e="";if("grid"==this.initializeType&&this.options.ref&&null!=t){
var i=t.rowIndex,o=this.getColumnID(t.colID);e=this.options.ref;for(var s=0;s<this.repeatNodeTagName.length;s++)0==s?null==i||isNaN(i)?e+="/"+this.repeatNodeTagName[0]:e+="/"+this.repeatNodeTagName[0]+"["+(i+1)+"]":e+="/"+this.repeatNodeTagName[s];this.options.valueNode&&!0!==t.skipValueNode?e+="/"+o+"/@value":e+="/"+o}return e}catch(t){h.w.printStackTrace(t)}},st.prototype._isInitialzedItemArr=function(t){try{if(void 0===t.itemArr)return!1;if("select"==t.options.inputType||"checkcombobox"==t.options.inputType||"autoComplete"==t.options.inputType){var e=0;if(1==t.options.chooseOption&&e++,1==t.options.allOption&&e++,t.itemArr.length<e+1)return!1}return!0}catch(t){h.w.printStackTrace(t)}};var rt=function(){};rt.prototype.getRowStatusValue=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getRowStatusValue(e)}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype._getRowStatusValue=function(t){try{switch(this.rowStatusArr[t]){case"R":return 0;case"U":return 1;case"C":return 2;case"D":return 3;case"V":return 4;case"E":return 5}}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype.getRowStatus=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getRowStatus(e)}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype._getRowStatus=function(t){try{return this.rowStatusArr[t]}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype.getCellStatusValue=function(t,e){try{var i=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getCellStatusValue(i,e)}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype._getCellStatusValue=function(t,e){try{var i=this.getColumnIndex(e);switch(this.cellStatusArr[t*this.oneRowDataLength+i]){case"R":return 0;case"U":return 1;case"C":return 2;case"D":return 3;case"V":return 4;case"E":return 5}}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype.getCellStatus=function(t,e){try{var i=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getCellStatus(i,e)}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype._getCellStatus=function(t,e){try{var i=this.getColumnIndex(e);return this.cellStatusArr[t*this.oneRowDataLength+i]}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this.getTotalRow();i++){var o=this.options.depthColumn?i:this.getRealRowIndex(i);t.indexOf(this.rowStatusArr[o])>-1&&e.push(i)}return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){h.w.printStackTrace(t)}},rt.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){h.w.printStackTrace(t)}},rt.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){h.w.printStackTrace(t)}},rt.prototype.getVoidIndex=function(){try{return this.getRowIndexByStatus("V")}catch(t){h.w.printStackTrace(t)}},rt.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){h.w.printStackTrace(t)}},rt.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){h.w.printStackTrace(t)}},rt.prototype.getInsertedData=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getInsertedXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=this.getInsertedIndex();return this.getArrXML(e,t)}catch(t){h.w.printStackTrace(t)}},rt.prototype.getInsertedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRefInsertedJSON=function(t){try{this.broadcast({
gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRefRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getInsertedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"==typeof t.includeColumns&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getInsertedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s],t));return e.data=i,e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getDeletedData=function(t,e){try{void 0!==e&&null!=e||(e={}),!0!==e.noRefresh&&this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s,e));if(null!=this.options.customFormatter){var r=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getDeletedXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getDeletedIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var c=n[d],u=c.indexOf(":");if(u>=0)try{var p=c.substring(0,u),g=l.v.getNamespaces(s);g[p]&&(c=c+" xmlns:"+p+'="'+g[p]+'"')}catch(t){}a=a.appendChild(WebSquare.xml.parse("<"+c+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.w.printStackTrace(t)}},rt.prototype.getDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s,e));return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRefDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRefRowJSON(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRefRowJSON(s,e));return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getDeletedArray=function(t,e){try{void 0!==e&&null!=e||(e={});var i={};"object"==typeof e.includeColumns&&null!=e.includeColumns&&e.includeColumns.constructor===Array?i.columnInfo=e.includeColumns:i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getDeletedIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r],e));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r,e));return i.data=o,i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getVoidData=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getVoidIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s));return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getVoidXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getVoidIndex(),o=this.getArrXML(i,e)
;if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var c=n[d],u=c.indexOf(":");if(u>=0)try{var p=c.substring(0,u),g=l.v.getNamespaces(s);g[p]&&(c=c+" xmlns:"+p+'="'+g[p]+'"')}catch(t){}a=a.appendChild(WebSquare.xml.parse("<"+c+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.w.printStackTrace(t)}},rt.prototype.getVoidJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getVoidIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s));if(null!=this.options.customFormatter){var r=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getVoidArray=function(t,e){try{var i={};i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getVoidIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r]));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r));return i.data=o,i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getOnlyDeletedData=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getOnlyDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s));return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getOnlyDeletedXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getOnlyDeletedIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var c=n[d],u=c.indexOf(":");if(u>=0)try{var p=c.substring(0,u),g=l.v.getNamespaces(s);g[p]&&(c=c+" xmlns:"+p+'="'+g[p]+'"')}catch(t){}a=a.appendChild(WebSquare.xml.parse("<"+c+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.w.printStackTrace(t)}},rt.prototype.getOnlyDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getOnlyDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s));if(null!=this.options.customFormatter){var r=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getOnlyDeletedArray=function(t,e){try{var i={};i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getOnlyDeletedIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r]));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r));return i.data=o,i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getUpdatedData=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getUpdatedXML=function(t){
try{this.broadcast({gridView:["_endEdit"]});var e=this.getUpdatedIndex();return this.getArrXML(e,t)}catch(t){h.w.printStackTrace(t)}},rt.prototype.getUpdatedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRefUpdatedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRefRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getUpdatedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"==typeof t.includeColumns&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getUpdatedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s]));return e.data=i,e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRemovedData=function(t){try{return this.removeManager.getAllData(t)}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRemovedXML=function(t){try{return void 0!==t&&null!=t||(t={}),t.id=this.id,this.removeManager.getAllXML(t)}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRemovedJSON=function(t){try{return this.removeManager.getAllJSON(t)}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRemovedArray=function(t){try{return this.removeManager.getAllArray(t)}catch(t){h.w.printStackTrace(t)}},rt.prototype.getModifiedData=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getModifiedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(o=0;o<this.removeManager.getDataLength();o++)e.push(this.removeManager.getRowData(o,t));return e}catch(t){h.w.printStackTrace(t)}},rt.prototype.getModifiedXML=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});var e=this.getModifiedIndex(),i=this.getArrXML(e,t);if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))if(this.options.removedDataMatch)for(var o=WebSquare.xml.findNode(i,this.options.baseNode),s=0;s<this.removeManager.getDataLength();s++){for(var r=o,a=this.options.repeatNode.split("/"),n=0;n<a.length-1;n++){var d=a[n],c=d.indexOf(":");if(c>=0)try{var u=d.substring(0,c),p=l.v.getNamespaces(o);p[u]&&(d=d+" xmlns:"+u+'="'+p[u]+'"')}catch(t){}r=r.appendChild(WebSquare.xml.parse("<"+d+"/>").documentElement)}r.appendChild(this.removeManager.getRowXML(s,t).documentElement)}else{var g=WebSquare.xml.findNode(i,this.options.baseNode);for(s=0;s<this.removeManager.getDataLength();s++)g.appendChild(this.removeManager.getRowXML(s,t).documentElement)}return i}catch(t){h.w.printStackTrace(t)}},rt.prototype.getModifiedJSON=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=[],o=[],s=this.getModifiedIndex(),r=0;r<s.length;r++)e.push(this.getRowJSON(s[r],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(r=0;r<this.removeManager.getDataLength();r++)i.push(this.removeManager.getRowJSON(r,t));if(o=t&&t.DB?(o=o.concat(i)).concat(e):t&&t.excludeRemovedData?o.concat(e):(o=o.concat(e)).concat(i),null!=this.options.customFormatter){var a=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof a&&(o=a(this,o))}return o}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRefModifiedJSON=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]})
;for(var e=[],i=[],o=[],s=this.getModifiedIndex(),r=0;r<s.length;r++)e.push(this.getRefRowJSON(s[r],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(r=0;r<this.removeManager.getDataLength();r++)i.push(this.removeManager.getRefRowJSON(r,t));if(o=t&&t.DB?(o=o.concat(i)).concat(e):t&&t.excludeRemovedData?o.concat(e):(o=o.concat(e)).concat(i),null!=this.options.customFormatter){var a=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=a&&(o=a(this,o))}return o}catch(t){h.w.printStackTrace(t)}},rt.prototype.getModifiedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"==typeof t.includeColumns&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getModifiedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(s=0;s<this.removeManager.getDataLength();s++)i=i.concat(this.removeManager.getRowData(s,t));return e.data=i,e}catch(t){h.w.printStackTrace(t)}},rt.prototype._setRowStatus=function(t,e){try{var i=this.rowStatusArr[t];return e!=i&&(this.rowStatusArr[t]=e),i}catch(t){h.w.printStackTrace(t)}},rt.prototype.setAllRowStatus=function(t,e){try{e=e||!1,this.rowStatusArr=e?this.rowStatusArr.concat(t):t;for(var i=[],o=0;o<t.legnth;o++)for(var s=0;s<this.oneRowDataLength;s++)i.push(t[o]);this.setAllCellStatus(i,e)}catch(t){h.w.printStackTrace(t)}},rt.prototype._setCellStatus=function(t,e,i){try{var o=this.getColumnIndex(e),s=this.cellStatusArr[t*this.oneRowDataLength+o];return i!=s&&(this.cellStatusArr[t*this.oneRowDataLength+o]=i),s}catch(t){h.w.printStackTrace(t)}},rt.prototype.setAllCellStatus=function(t,e){try{e=e||!1,this.cellStatusArr=e?this.cellStatusArr.concat(t):t}catch(t){h.w.printStackTrace(t)}},rt.prototype._initRowStatus=function(t){try{null!=t&&void 0!==t||(t=0),0==t&&(this.rowStatusArr=[]);for(var e=this.getTotalRow(),i=t;i<e;i++)switch(this.initializeType){case"removeManager":this.rowStatusArr.push("E");break;default:this.rowStatusArr.push("R")}}catch(t){h.w.printStackTrace(t)}},rt.prototype.initRowStatus=function(){try{this._initRowStatus(0),this.broadcast({gridView:["notifyReformed"]})}catch(t){h.w.printStackTrace(t)}},rt.prototype._createRowStatus=function(t){try{this.rowStatusArr=this.rowStatusArr.slice(0,t).concat(["C"]).concat(this.rowStatusArr.slice(t)),this.broadcast({gridView:["notifyCreatedRowStatus",[t]],_bForceBroadcast:!0})}catch(t){h.w.printStackTrace(t)}},rt.prototype._updateRowStatus=function(t){try{var e=this.rowStatusArr[t],i=e;if("C"==e||"D"==e)return;for(var o=!1,s=this.getTotalCol(),r=0;r<s;r++){var a=this.cellInfoHash[this.cellIdList[r]],n=a.options.inputType,l=this._getOriginalCellData(t,a.id),d=this._getData(t,r);if("expression"==n||1==this.ignoreStatusColArr[r]||0!==l&&0!==d){if("expression"!=n&&1!=this.ignoreStatusColArr[r]&&l!=d&&(null!==l||""!==d)){o=!0;break}}else if(0===l&&0!==d&&"0"!==d||0===d&&0!==l&&"0"!==l){o=!0;break}}"R"==e?1==o&&(e="U"):"U"==e&&0==o&&(e="R"),this._setRowStatus(t,e);var c=this.getFilteredRowIndex(t);e!=i&&q.B.fireEvent(this,"onrowstatuschange",[{rowIndex:c,newRowStatus:e,oldRowStatus:i}]),this.broadcast({gridView:["notifyStatusChanged",[{rowIndex:[c]}]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype.removeRowStatus=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.rowStatusArr[e];return this.rowStatusArr.splice(e,1),this.broadcast({gridView:["notifyRemovedRowStatus",[e]],_bForceBroadcast:!0}),i}catch(t){h.w.printStackTrace(t)}},rt.prototype._initCellStatus=function(t){try{null!=t&&void 0!==t||(t=0),0==t&&(this.cellStatusArr=[]);for(var e=this.getTotalRow(),i=this.getTotalCol(),o=t;o<e*i;o++)switch(this.initializeType){case"removeManager":this.cellStatusArr.push("E");break;default:
this.cellStatusArr.push("R")}}catch(t){h.w.printStackTrace(t)}},rt.prototype.initCellStatus=function(){try{this._initCellStatus(0),this.broadcast({gridView:["notifyReformed"]})}catch(t){h.w.printStackTrace(t)}},rt.prototype._createCellStatus=function(t){try{for(var e=[],i=0;i<this.oneRowDataLength;i++)e.push("C");this.cellStatusArr=this.cellStatusArr.slice(0,t*this.oneRowDataLength).concat(e).concat(this.cellStatusArr.slice(t*this.oneRowDataLength))}catch(t){h.w.printStackTrace(t)}},rt.prototype._updateCellStatus=function(t,e){try{var i=this.cellStatusArr[t*this.oneRowDataLength+e];if("C"==i||"D"==i)return;var o=!1,s=(this.getTotalCol(),this.cellInfoHash[this.cellIdList[e]]),r=s.options.inputType,a=this._getOriginalCellData(t,s.id),n=this._getData(t,e);"expression"==r||1==this.ignoreStatusColArr[e]||0!==a&&0!==n?"expression"!=r&&1!=this.ignoreStatusColArr[e]&&a!=n&&(null===a&&""===n||(o=!0)):(0===a&&0!==n&&"0"!==n||0===n&&0!==a&&"0"!==a)&&(o=!0),"R"==i?1==o&&(i="U"):"U"==i&&0==o&&(i="R"),this._setCellStatus(t,e,i);this.getFilteredRowIndex(t)}catch(t){h.w.printStackTrace(t)}},rt.prototype.deleteRow=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.getFilteredRowIndex(e);if(this.options.depthColumn&&this.hasChild(e)){var o=this.getChildrenRowArr(e);this.deleteRows(o)}this._deleteRowStatus(e),this._deleteCellStatus(e),this.broadcast({linkedDataList:["notifyDeleteRow",[e]],gridView:["notifyDeleteRow",[i]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype.deleteRows=function(t){try{function i(t,e){return parseInt(t)<parseInt(e)?1:-1}t.sort(i);for(var e=0;e<t.length;e++)this.deleteRow(t[e]);return this.getDeletedData(!0,{noRefresh:!0})}catch(t){h.w.printStackTrace(t)}},rt.prototype.undeleteRows=function(t){try{function s(t,e){return parseInt(t)<parseInt(e)?1:-1}t.sort(s);for(var e=[],i=0;i<t.length;i++){var o=this.undeleteRow(t[i]);e.push(o)}return e}catch(t){h.w.printStackTrace(t)}},rt.prototype._deleteRowStatus=function(t){try{var e=this.rowStatusArr[t],i="";if(!0===this.options.keepInsertedRowDeleteStatus){if("D"==e||"V"==e)return}else if("D"==i||"V"==i)return;i="C"==e?"V":"D",this._setRowStatus(t,i);var o=this.getFilteredRowIndex(t);i!=e&&q.B.fireEvent(this,"onrowstatuschange",[{rowIndex:o,newRowStatus:i,oldRowStatus:e}]),o>-1&&this.broadcast({gridView:["notifyStatusChanged",[o]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype._deleteCellStatus=function(t){try{for(var e=0;e<this.oneRowDataLength;e++){var i=this.cellStatusArr[t*this.oneRowDataLength+e],o="";if(!0===this.options.keepInsertedRowDeleteStatus){if("D"==i||"V"==i)continue}else if("D"==o||"V"==o)continue;o="C"==i?"V":"D",this._setCellStatus(t,e,o)}}catch(t){h.w.printStackTrace(t)}},rt.prototype.undeleteRow=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);if(this.options.depthColumn&&this.hasChild(e)){var i=this.getChildrenRowArr(e);this.undeleteRows(i)}this._undeleteRowStatus(e),this._undeleteCellStatus(e),this.broadcast({gridView:["notifyUndeleteRow",[t]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype._undeleteRowStatus=function(t){try{var e=this.rowStatusArr[t],i=e;if("D"!=e&&"V"!=e)return;if("V"==e)e="C";else{for(var o=!1,s=this.getTotalCol(),r=0;r<s;r++){var a=this.getCellInfo(r);if("expression"!=a.options.inputType&&1!=this.ignoreStatusColArr[r]&&this._getOriginalCellData(t,a.id)!=this._getData(t,r)){o=!0;break}}e=o?"U":"R"}this._setRowStatus(t,e);var n=this.getFilteredRowIndex(t);e!=i&&q.B.fireEvent(this,"onrowstatuschange",[{rowIndex:n,newRowStatus:e,oldRowStatus:i}]),this.broadcast({gridView:["notifyStatusChanged",[{rowIndex:[n]}]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype._undeleteCellStatus=function(t){try{for(var e=0;e<this.oneRowDataLength;e++){var i=this.cellStatusArr[t*this.oneRowDataLength+e];if("D"!=i&&"V"!=i)return;if("V"==i)i="C";else{var o=!1,s=this.getCellInfo(e);if("expression"!=s.options.inputType&&1!=this.ignoreStatusColArr[e]&&this._getOriginalCellData(t,s.id)!=this._getData(t,e)){
o=!0;continue}i=o?"U":"R"}this._setCellStatus(t,e,i)}}catch(t){h.w.printStackTrace(t)}},rt.prototype.modifyAllStatus=function(t){try{for(var e=[],i=0;i<this.rowStatusArr.length;i++){var o=this._setRowStatus(i,t);t!=o&&e.push({rowIndex:i,newRowStatus:t,oldRowStatus:o});for(var s=0;s<this.oneRowDataLength;s++)this._setCellStatus(i,s,t)}q.B.fireEvent(this,"onrowstatuschange",e),this.broadcast({gridView:["notifyModifyAllStatus",[t]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype.modifyRangeStatus=function(t,e,i){try{var o,s=[];if(o=this.options.depthColumn?this.getTotalRow():this.getDataLength(),0<=t&&e<=o)for(var r=t;r<=e;r++){var a=this.options.depthColumn?r:this.getRealRowIndex(r),n=this._setRowStatus(a,i);i!=n&&s.push({rowIndex:r,newRowStatus:i,oldRowStatus:n})}q.B.fireEvent(this,"onrowstatuschange",s),this.broadcast({gridView:["notifyModifyRangeStatus",[t,e,i]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype.modifyMatchedStatus=function(t,e,i){try{var o,s=[];o=this.options.depthColumn?this.getTotalRow():this.getDataLength();for(var r=0;r<o;r++){var a=this.getColumnID(t);if(this.getCellData(r,a)+""==e+""){var n=this.options.depthColumn?r:this.getRealRowIndex(r),l=this._setRowStatus(n,i);i!=l&&s.push({rowIndex:r,newRowStatus:i,oldRowStatus:l})}}q.B.fireEvent(this,"onrowstatuschange",s),this.broadcast({gridView:["notifyModifyMatchedStatus",[t,e,i]]})}catch(t){h.w.printStackTrace(t)}},rt.prototype.modifyRowStatus=function(t,e){try{var i;if(i=this.options.depthColumn?this.getTotalRow():this.getDataLength(),t>-1&&t<i){var o=this.options.depthColumn?t:this.getRealRowIndex(t),s=this._setRowStatus(o,e);e!=s&&q.B.fireEvent(this,"onrowstatuschange",[{rowIndex:t,newRowStatus:e,oldRowStatus:s}]),this.options.depthColumn&&(t=this.getFilteredRowIndex(o)),this.broadcast({gridView:["notifyModifyRowStatus",[t,e]]})}}catch(t){h.w.printStackTrace(t)}},rt.prototype.modifyCellStatus=function(t,e,i){try{var o;if(o=this.options.depthColumn?this.getTotalRow():this.getDataLength(),t>-1&&t<o){var s=this.options.depthColumn?t:this.getRealRowIndex(t);this._setCellStatus(s,e,i)}}catch(t){h.w.printStackTrace(t)}},rt.prototype.getRowPosition=function(){try{return"number"==typeof this.rowPosition?this.rowPosition:null}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype.setRowPosition=function(t,e){try{t=parseInt(t,10),isNaN(t)&&(t=null);var i=this.rowPosition;if(i!=t){if(!e)if(!1===q.B.fireEvent(this,"onbeforerowpositionchange",{oldRowIndex:i,newRowIndex:t}))return!1;return this.rowPosition=t,e||q.B.fireEvent(this,"onrowpositionchange",{oldRowIndex:i,newRowIndex:t}),this.broadcast({linkedDataList:["notifyRowPositionChanged"],generalComp:"refresh",restartFilter:!1}),!0}}catch(t){h.w.printStackTrace(t)}},rt.prototype.getColumnPosition=function(){try{return this.getColumnID(this.columnPosition)||""}catch(t){h.w.printStackTrace(t,null,this)}},rt.prototype.setColumnPosition=function(t,e){try{var i=this.getColumnIndex(t);if(this.columnPosition!=i){var o=this.getColumnID(this.columnPosition),s=this.getColumnID(t);return!1!==q.B.fireEvent(this,"onbeforecolumnchange",{oldColumnID:o,newColumnID:s})&&(this.columnPosition=i,q.B.fireEvent(this,"oncolumnchange",{oldColumnID:o,newColumnID:s}),!0)}}catch(t){h.w.printStackTrace(t)}},rt.prototype.saveRemovedRow=function(t,e){try{this.removeManager.setRowData(this.removeManager.getDataLength(),e),this.removeManager.modifyAllStatus("E")}catch(t){h.w.printStackTrace(t,null,this)}};var at=function(t){this.parent=t,this.filterArr=[],this.allRowIndexArr=[],this.firstFiltering=!0};at.prototype.useFilter=function(){return 0!=this.filterArr.length},at.prototype.onlySortFilter=function(){for(var t=0;t<this.filterArr.length;t++)if(-1==this.filterArr[t].id.indexOf("sort^@"))return!1;return!0},at.prototype.clear=function(){this.filterArr=[],this.firstFiltering=!0},at.prototype._setAllRowIndexArr=function(t){if(this.allRowIndexArr.length!=t){this.allRowIndexArr=[];for(var e=0;e<t;e++)this.allRowIndexArr.push(e)}},
at.prototype.executeAllFilter=function(t,e,i){this._setAllRowIndexArr(e),this.firstFiltering=!0;for(var o=0;o<this.filterArr.length;o++)this.executeFilter(this.filterArr[o],t,e,i);if(0==this.filterArr.length)for(o=0;o<this.parent.getDataLength();o++)this.parent.filteredRowIndexArr[o]=o},at.prototype.executeFilter=function(t,e,i,o){try{if("and"==t.options.condition)this.firstFiltering?(this.parent.filteredRowIndexArr=this.allRowIndexArr.slice(0),this.parent.filteredRowIndexArr=t.execute(e,i,o,this.allRowIndexArr)):this.parent.filteredRowIndexArr=t.execute(e,i,o,this.parent.filteredRowIndexArr);else if("or"==t.options.condition){var s=t.execute(e,i,o,this.allRowIndexArr);this.firstFiltering?this.parent.filteredRowIndexArr=this.mergeArray(this.allRowIndexArr,s):this.parent.filteredRowIndexArr=this.mergeArray(this.parent.filteredRowIndexArr,s)}else if(">"==t.options.condition||">="==t.options.condition||"<"==t.options.condition||"<="==t.options.condition){if("number"!=t.options.columnDataType)return this.parent.filteredRowIndexArr=this.allRowIndexArr,void(this.firstFiltering=!1);this.firstFiltering?this.parent.filteredRowIndexArr=t.executeCondition(e,i,o,this.allRowIndexArr):this.parent.filteredRowIndexArr=t.executeCondition(e,i,o,this.parent.filteredRowIndexArr)}this.firstFiltering=!1}catch(t){h.w.printStackTrace(t,null,this)}},at.prototype.addFilter=function(t,e,i,o){try{var s=o.fakeExpressionArr?o.fakeExpressionArr:this.parent.dataArr;if(o.sortIndexArr){for(var r=[],a=0;a<o.sortIdArr.length;a++){var n=this.parent.getColumnIndex(o.sortIdArr[a]);o.isExpression?r.push(o.sortIndexArr[a]):r.push(n)}o.sortIndexArr=r}this._setAllRowIndexArr(e);var l=null;if("row"==o.type)l=new WebSquare.DataCollection.dataList.filter.rowFilter(t,o);else if("user"==o.type)l=new WebSquare.DataCollection.dataList.filter.userFilter(t,o);else if("cell"==o.type)l=new WebSquare.DataCollection.dataList.filter.cellFilter(t,o);else if("sort"==o.type){if("string"==typeof(d=o.sortIndex))var d=o.sortIndex.split(" ");var c=this.parent.childCompHash[o.gridId];if(o.isExpression&&c){var u,p=this.parent.getColCnt();o.colIndex=p,o.fakeExpressionArr&&(p++,i++,u=this.parent.getColCnt());for(a=0;a<d.length;a++){var g=c.getCellInfo(o.cellInfoArr[a]);!o.fakeExpressionArr&&o.isExpressionArr[a]&&(u=this.parent.getColumnIndex(d[a]));for(var m=0;m<e;m++){var f=g.getDisplayData(null,m,!0);s[u+p*m]=f+""}}}l=new WebSquare.DataCollection.dataList.filter.sortFilter(t,o),this.deleteFilterById("sort^@",!1)}else"func"==o.type?l=new WebSquare.DataCollection.dataList.filter.funcFilter(t,o):"regExp"==o.type?l=new WebSquare.DataCollection.dataList.filter.regExpFilter(t,o):"direct"===o.type&&(l=new WebSquare.DataCollection.dataList.filter.directFilter(t,o));this.executeFilter(l,s,e,i),this.filterArr.push(l)}catch(t){h.w.printStackTrace(t,null,this)}},at.prototype.deleteFilter=function(t,e,i,o,s,r){void 0===r&&(r=!0);for(var a=!1,n=[],l=0;l<this.filterArr.length;l++)-1==this.filterArr[l].id.indexOf(t)?n.push(this.filterArr[l]):a=!0;if(this.filterArr=n,1==r){this.firstFiltering=!0,this._setAllRowIndexArr(i);for(l=0;l<this.filterArr.length;l++)this.executeFilter(this.filterArr[l],e,i,o);if(0==this.filterArr.length){i=this.parent.getTotalRow();this.parent.filteredRowIndexArr=[];for(l=0;l<i;l++)this.parent.filteredRowIndexArr.push(l)}}return a},at.prototype.mergeArray=function(t,e){for(var i=[],o=[],s=0;s<t.length;s++)i[t[s]]=1;for(s=0;s<e.length;s++)i[e[s]]=1;for(s=0;s<i.length;s++)1==i[s]&&o.push(s);return o},at.prototype.deleteFilterById=function(t,e){void 0===e&&(e=!0);for(var i=[],o=0;o<this.filterArr.length;o++)-1==this.filterArr[o].id.indexOf(t)&&i.push(this.filterArr[o]);this.filterArr=i,1==e||0==this.filterArr.length&&(this.firstFiltering=!0)},at.prototype.getOriginalRowIndex=function(t){return this.filteredRowIndexArr[t]},at.prototype.getDisplayRowIndex=function(t){
if(0!=this.parent._dataList.filteredRowIndexArr.length)for(var e=0;e<this.parent._dataList.filteredRowIndexArr.length;e++)if(t==this.parent._dataList.filteredRowIndexArr[e])return e;return t};var nt={rowFilter:function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and",exactMatch:!1},e||{})}};nt.rowFilter.prototype.execute=function(t,e,i,o){for(var s=[],r=0;r<o.length;r++){var a=o[r],n=g.D.getComponentById(this.options.dataList),l="@rowStatus"==this.options.colIndex?n.rowStatusArr[a]:t[a*i+this.options.colIndex];null==l&&(l=""),this.options.exactMatch?l==this.options.key&&s.push(a):l.indexOf(this.options.key)>-1&&s.push(a)}return s},nt.rowFilter.prototype.executeCondition=function(t,e,i,o){for(var s=[],r=0;r<o.length;r++){var a,n,l=o[r];"number"==this.options.columnDataType&&(a=parseFloat(t[l*i+this.options.colIndex])||0,n=parseFloat(this.options.key)),">"==this.options.condition?a>n&&s.push(l):">="==this.options.condition?a>=n&&s.push(l):"<"==this.options.condition?a<n&&s.push(l):"<="==this.options.condition&&a<=n&&s.push(l)}return s},nt.userFilter=function(t,e){this.id=t,this.options=a.x.extend({key:"",condition:"and"},e||{})},nt.userFilter.prototype.getColumnData=function(t,e,i,o,s){return"string"==typeof s&&(s=this.options.bodyIdColIndexMap[s]),t[o*i+s]},nt.userFilter.prototype.execute=function(t,e,i,o){for(var s=this.options.key.replace(/col[\s]*\(/g,"_this.getColumnData(dataArr, totalRow, totalCol, row, "),r=[],a=0;a<o.length;a++){var n=o[a];new Function("_this","dataArr","totalRow","totalCol","row","return "+s)(this,t,e,i,n)&&r.push(n)}return r},nt.cellFilter=function(t,e){this.id=t,this.options=a.x.extend({key:""},e||{})},nt.cellFilter.prototype.execute=function(t,e,i,o){for(var s=[],r=0;r<o.length;r++)for(var a=o[r],n=0;n<i;n++){var l=t[a*i+n];null==l&&(l=""),l.indexOf(this.options.key)>-1&&s.push(a)}return s},nt.sortFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:"",sortIndex:"",sortOrder:"",dataType:"",sortIndexArr:[],sortOrderArr:[],dataTypeArr:[],sortFuncArr:[],sortIdArr:[]},e||{})},nt.sortFilter.prototype.execute=function(t,e,i,o){for(var s=o.slice(0).sort((function(t,e){return t-e})),r=this.options,a=[],n=0;n<s.length;n++)a[n]=s[n]*i;var l,h,d=[];for(n=0;n<r.sortIndexArr.length;n++)if(d[n]={},r.sortFuncArr[n])for(var c=0;c<a.length;c++)d[n][s[c]]=t[a[c]+r.sortIndexArr[n]];else if("number"==r.dataTypeArr[n])for(c=0;c<a.length;c++){var u=t[a[c]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]?u=(u+="").replace(/[^\+\-\.0-9]/g,""):isNaN(Number(u))&&(u=""),d[n][s[c]]=""===u?"":Number(u)}else if("float"==r.dataTypeArr[n])for(c=0;c<a.length;c++){u=t[a[c]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]&&(u=(u+="").replace(/[^\+\-\.0-9]/g,"")),d[n][s[c]]=""===u?"":parseFloat(u)}else if("bigDecimal"===r.dataTypeArr[n])for(c=0;c<a.length;c++){u=t[a[c]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]&&(u=(u+="").replace(/[^\+\-\.0-9]/g,"")),isNaN(Number(u))&&(u=""),isNaN(WebSquare.bigDecimal("").big)?($l("[sort filter] big.min.js를 로딩해주십시오."),d[n][s[c]]=""===u?"":Number(u)):d[n][s[c]]=""===u?"":WebSquare.bigDecimal(u)}else for(c=0;c<a.length;c++)d[n][s[c]]=t[a[c]+r.sortIndexArr[n]]||"";if(r.sortLabel)for(n=0;n<r.sortIndexArr.length;n++)if(!0===r.sortLabel[n])for(c=0;c<a.length;c++)d[n][c]=this.changeValueToLabel(d[n][c],n,r.isCustomCol[n],c);if(1==d.length)if(r.sortFuncArr[0]){var p=r.sortFuncArr[0];m=d[0];s.sort((function(t,e){return p(m[t],m[e])}))}else{var g=r.sortOrderArr[0],m=d[0];"bigDecimal"!==r.dataType||isNaN(WebSquare.bigDecimal("").big)?"true"==r.ignoreEmptyStringOnSort?s.sort((function(t,e){return m[t]===m[e]?0:""===m[t]?1:""===m[e]?-1:m[t]>m[e]?g:-g})):"true"==r.setEmptyStringFirstOnSort?s.sort((function(t,e){return m[t]==m[e]?0===m[t]&&""===m[e]?g:""===m[t]&&0===m[e]?-g:0:""===m[t]?-g:""===m[e]||m[t]>m[e]?g:-g})):"true"==r.setEmptyStringSortableOnSort?s.sort((function(t,e){return m[t]===m[e]?0:""===m[t]?-g:""===m[e]||m[t]>m[e]?g:-g})):s.sort((function(t,e){
return m[t]==m[e]?0:m[t]>m[e]?g:-g})):"true"==r.ignoreEmptyStringOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:""===m[t]?1:""===m[e]?-1:"0"!==i.compare("0")?g:-g})):"true"==r.setEmptyStringFirstOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?"0"===l.toString()&&""===m[e]?g:""===m[t]&&"0"===h.toString()?-g:0:""===m[t]?-g:""===m[e]||"0"!==i.compare("0")?g:-g})):"true"==r.setEmptyStringSortableOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:""===m[t]?-g:""===m[e]||"0"!==i.compare("0")?g:-g})):s.sort((function(t,e){if(""===m[t]&&""===m[e])return 0;l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:"0"!==i.compare("0")?g:-g}))}else s.sort((function(t,e){for(var i=0;i<d.length;i++){var o,s;if(r.sortFuncArr.constructor==Array?(s=r.sortFuncArr[i],1==r.sortFuncArr.length&&(s=r.sortFuncArr[0])):s=r.sortFuncArr,s)o=s(d[i][t],d[i][e]);else if("bigDecimal"!==r.dataTypeArr[i]||isNaN(WebSquare.bigDecimal("").big))o=d[i][t]==d[i][e]?0:d[i][t]<d[i][e]?-r.sortOrderArr[i]:r.sortOrderArr[i];else{if(""===d[i][t]&&""===d[i][e])return 0;l=""===d[i][t]?WebSquare.bigDecimal(""):d[i][t],h=""===d[i][e]?WebSquare.bigDecimal(""):d[i][e];var a=l.minus(h);o="0"===a.toString()?0:"0"!==a.compare("0")?r.sortOrderArr[i]:-r.sortOrderArr[i]}if(0!=o)return o}return 0}));return s},nt.sortFilter.prototype.changeValueToLabel=function(t,e,i,o){var s,r,a=this.options.sortItemArr,n=this.options.sortItemsetIdObj;if(i){var l=this.options.customCellDataListInfo[o];if(l){a=this.options.customDataListInfoHash[l];var h=this.options.customSortItemsetIdObj;s=h[o].label||"label",r=h[o].value||"value";for(var d=0;d<a.length;d++)if(t==a[d][r])return a[d][s]}}else if(s=n.label||"label",r=n.value||"value",a[e]&&a[e].length>0)for(d=0;d<a[e].length;d++)if(t==a[e][d][r])return a[e][d][s];return t},nt.funcFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{})},nt.funcFilter.prototype.execute=function(t,e,i,o){if("function"!=typeof this.options.key)throw new Error("This key is not a Function.[key:"+this.options.key+"]");for(var s=[],r=0;r<o.length;r++){var a=o[r],n=t[a*i+this.options.colIndex];"number"===this.options.columnDataType&&""!==n&&(n=n.toString().indexOf(".")>-1?parseFloat(n):parseInt(n,10)),this.options.key(n,this.options.param,a)&&s.push(a)}return s},nt.regExpFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{}),this.regExp=this.options.key},nt.regExpFilter.prototype.execute=function(t,e,i,o){if(!g.D.isRegExp(this.regExp))throw new Error("This key is not a regular expression.[key:"+this.regExp+"]");if(g.D.isNullReg(this.regExp))return[];for(var s=[],r=0;r<o.length;r++){var a=o[r];(t[a*i+this.options.colIndex]+"").match(this.regExp)&&s.push(a)}return s},nt.directFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{})},nt.directFilter.prototype.execute=function(){return this.options.key};var lt=function(){};lt.prototype.getCellInfo=function(t){var e="";return"string"==typeof t?e=t:"number"==typeof t&&(e=this.cellIdList[t]),this.cellInfoHash[e]||{options:{}}},lt.prototype.getColumnCount=function(){return this.cellIdList.length},lt.prototype.getColumnID=function(t){if("string"==typeof t)return this.cellInfoHash[t]?t:null;var e=this.cellIdList[t];return e||null},lt.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},lt.prototype.hasColumn=function(t){try{"number"==typeof t&&(t=this.getColumnID(t));var e=!1;return"number"==typeof this.bodyIdColIndexMap[t]&&(e=!0),e}catch(t){h.w.printStackTrace(t,null,this)}},
lt.prototype.getColumnName=function(t){"number"==typeof t&&(t=this.getColumnID(t));var e=this.getCellInfo(t);return e?e.name:""},lt.prototype.setColumnName=function(t,e){"number"==typeof t&&(t=this.getColumnID(t));var i=this.getCellInfo(t);i&&i.name&&(i.name=e),this.broadcast({fusionChart:["refresh"]})};var ht=function(t,e,i){this.options={name:"",id:"",col_id:"",colIndex:"",defaultValue:"",value:"",useFilter:!1,dataType:"text",valueType:"binary",trueValue:null,falseValue:null,ignoreStatus:!1,keepEmptyString:!1},this.mainDataList=e,t&&this.setOptions(t),""!=this.options.value&&""==this.options.defaultValue&&(this.options.defaultValue=this.options.value),""==this.options.value&&""!=this.options.defaultValue&&(this.options.value=this.options.defaultValue),this.id=this.options.col_id,this.options.id=this.options.col_id,this.name=this.options.name||"",this.mainDataList.ignoreStatusColArr[i]=this.options.ignoreStatus};ht.prototype.setOptions=function(t){if("grid"==this.mainDataList.initializeType){var e=t.inputType||"text";this.configOptions=l.v.getConfig("grid/column[@inputType='"+e+"']"),this.options=a.x.extendKeepingType(this.options,this.configOptions)}for(var i in t)if("class"===i)this.options.className=t[i];else{var o=t[i];switch(typeof this.options[i]){case"string":if(""==o)continue;"$blank"==o&&(o="");break;case"number":o=o&&o.toString().indexOf(".")>-1?parseFloat(o):parseInt(o,10);break;case"boolean":o=g.D.getBoolean(o)}this.options[i]=o}this.options.col_id=t.id,this.element=t},ht.prototype.getExpressionValue=function(t){this.rowIndex=t;var e=this.options.expression;return null==this.expressionStr&&(""!=e&&null!=e&&(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[sS][uU][mM][\s]*[(]/g,"_this.colsum(")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.colavg(")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.colmax(")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.colmin(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"_this.colcalc(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"_this.display(")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.getRowIndex(")).replace(/rowStatus[\s]*[(]/gi,"_this.rowStatus(")),this.expressionStr=e),new Function("_this","return "+this.expressionStr)(this)},ht.prototype.rowStatus=function(){switch(this.mainDataList.getRowStatusValue(this.rowIndex)){case 0:return"R";case 1:return"U";case 2:return"C";case 3:return"D";case 4:return"V"}},ht.prototype.colsum=function(){for(var t=0,e=0;e<arguments.length;e++){var i=this.mainDataList.getColumnIndex(arguments[e]),o=this.mainDataList.getColumnOption(this.options.col_id,"dataType");"bigDecimal"===o?t=WebSquare.bigDecimal(t).plus(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,i)))||0:t+=parseFloat(this.mainDataList._getData(this.rowIndex,i))||0}return t},ht.prototype.colavg=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);"bigDecimal"===e?t=WebSquare.bigDecimal(t).plus(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)))||0:t+=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0}return"bigDecimal"===e?t=WebSquare.bigDecimal(t).divide(WebSquare.bigDecimal(arguments.length)).toString():t/=arguments.length,t},ht.prototype.colmax=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);if("bigDecimal"===e)t=WebSquare.bigDecimal(t).compare(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)))||0;else{var s=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0;(0==i||s>t)&&(t=s)}}return t},ht.prototype.colmin=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i])
;if("bigDecimal"===e)t="0"===WebSquare.bigDecimal(t).toString()?WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)):WebSquare.bigDecimal(t),t=WebSquare.bigDecimal(t).compare(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)),!0)||0;else{var s=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0;(0==i||s<t)&&(t=s)}}return t},ht.prototype.colcalc=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function l(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){h.w.printStackTrace(t)}}var d=function(t,l,h){l=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var u=0;u<t.length;u++){if(o(t[u])&&(l[c]=t[u],c++),s(t[u])){if("^"!=t[u])for(;!a(d)&&n(t[u])<=n(r(d));)l[c]=r(d),i(d),c++;else for(;!a(d)&&n(t[u])<n(r(d));)l[c]=r(d),i(d),c++;e(d,t[u])}if("("==t[u]&&e(d,t[u]),")"==t[u]){for(;"("!=r(d);)l[c]=i(d),c++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(u=0;u<l.length;u++)p+=l[u];return 0==h?p:l}(t);for(var c in d){var u=this.mainDataList.getColumnIndex(d[c]);d[c]=null!=u?WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,u)):d[c]}return function(t){for(var s,a,n=new Array,h=0;h<t.length;h++)if(o(t[h]))e(n,t[h]);else{(s=new Function("return "+r(n))()).constructor!=WebSquare.bigDecimalObj&&(s=WebSquare.bigDecimal(s)),i(n),(a=new Function("return "+r(n))()).constructor!=WebSquare.bigDecimalObj&&(a=WebSquare.bigDecimal(a));var d=l(a,s,t[h]);i(n),e(n,d)}return r(n)}(d)},ht.prototype.display=function(){var t=this.mainDataList.getColumnIndex(arguments[0]),e=this.mainDataList.getCellData(this.rowIndex,t);return e},ht.prototype.getRowIndex=function(){return this.mainDataList.getDisplayRowIndex(this.rowIndex)};var dt=function(t){};dt.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},dt.prototype._getBroadcastAll=function(){return!0===this.getBroadcast()&&!0===WebSquare.DataCollection.api.getBroadcast()},dt.prototype.setBroadcast=function(t,e,i){if(!1===t)this._broadCastFlag=t;else if(this._broadCastFlag=!0,!0===e){var o={gridView:[{refreshInstance:!0,refreshScroll:!0}],pivot:[{type:"render",refresh:!0}]};if("object"==typeof i)for(var s in i)"object"==typeof i[s]&&i[s].constructor===Array&&(o[s]=i[s].slice(0));var r={linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset"],generalComp:"both"};for(var s in o)r[s].push(o[s]);this.broadcast(r)}},dt.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),!t)return;if(!0!==t._bForceBroadcast&&(WebSquare.DataCollection.stopBroadCast||!this.getBroadcast()))return;for(var e in this.childCompHash){if(null!=(o=this.childCompHash[e])&&WebSquare.idCache[o.uuid]&&(void 0===o.render||null!=o.render))"linkedDataList"===(o.options.pluginName||o.initializeType)&&t.linkedDataList&&t.linkedDataList&&("notifyCellChanged"===t.linkedDataList[0]?o.restartFilterByCellChanged.apply(o,t.linkedDataList[1]||[]):void 0===t.restartFilter&&o.restartFilter.apply(o,t.linkedDataList[1]||[]))}for(var e in this.childCompHash){var i=null;if(t.excludeId&&t.excludeId[e]){
if(!t.gridView||"notifySettedCellData"!==t.gridView[0])continue;(i=t.gridView[1].slice(0))[3]=!0}if(null!=(o=this.childCompHash[e])&&WebSquare.idCache[o.uuid]&&(void 0===o.render||null!=o.render))switch("stop"==o.activeStatus&&"function"==typeof o.preActivate&&o.preActivate(),o.options.pluginName||o.initializeType){case"linkedDataList":t.linkedDataList&&o[t.linkedDataList[0]].apply(o,t.linkedDataList[1]||[]);break;case"grid":case"gridView":t.gridView&&o[t.gridView[0]].apply(o,i||t.gridView[1]||[]);break;case"fusionchart":t.fusionChart&&o[t.fusionChart[0]].apply(o,t.fusionChart[1]||[]);break;case"mapchart":"refreshItemset"!=t.generalComp&&"both"!=t.generalComp&&"refreshItemArr"!=t.generalComp||o.refreshDataLists(this.id);break;case"pivot":t.pivot&&o[t.pivot[0]].apply(o,t.pivot[1]||[]);break;case"treeview":if(t.treeview){o[t.treeview[0]].apply(o,t.treeview[1]||[]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?o.modelControl.useItemset&&o.refreshItemset(t.refreshMode,t.type):"rollback"==t.generalComp&&o.rollback()}}for(var e in this.refCompHash){var o;if(!t.excludeId||!t.excludeId[e])if(null!=(o=this.refCompHash[e])&&WebSquare.idCache[o.uuid]){if((!o.options.pluginName||o.options.pluginName.indexOf("fw")<0&&"fusionchart"!==o.options.pluginName)&&t.colID&&o.modelControl&&o.modelControl.dataCollectionRefInfo&&o.modelControl.dataCollectionRefInfo.colID!=t.colID)continue;switch("stop"==o.activeStatus&&"function"==typeof o.preActivate&&o.preActivate(),o.options.pluginName){case"fusionchart":t.fusionChart&&o[t.fusionChart[0]].apply(o,t.fusionChart[1]||[]);break;case"fwFunnelChart":t.fwFunnelChart&&o[t.fwFunnelChart[0]].apply(o,t.fwFunnelChart[1]||[]);break;case"fwGanttChart":t.fwGanttChart&&o[t.fwGanttChart[0]].apply(o,t.fwGanttChart[1]||[]);break;case"fwPyramidChart":t.fwPyramidChart&&o[t.fwPyramidChart[0]].apply(o,t.fwPyramidChart[1]||[]);break;case"fwSparkChart":t.fwSparkChart&&o[t.fwSparkChart[0]].apply(o,t.fwSparkChart[1]||[]);break;case"fwRealtimeChart":t.fwRealtimeChart&&o[t.fwRealtimeChart[0]].apply(o,t.fwRealtimeChart[1]||[]);break;case"linkedDataList":t.linkedDataList&&o.refresh();break;default:"refresh"==t.generalComp||"both"==t.generalComp?o.modelControl.useRef&&o.refresh():"binding"==t.generalComp?o.modelControl.binding():"rollback"==t.generalComp&&o.rollback()}}}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=g.D.getComponentById(e));this.broadcast({gridView:["setDataList"],linkedDataList:["setDataList"],generalComp:["refreshItemArr"],restartFilter:!1})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.synchronizeRef=function(){try{var t=WebSquare.DataCollection.parentToChildRef[this.id];if(t)for(var e in t)t[e]&&(this.refCompHash[e]=g.D.getComponentById(e));this.broadcast({gridView:["drawData",[0,0]],generalComp:["refresh"]})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=g.D.getComponentById(t);if(!e)return;if(this.childCompHash[t]===e)return;switch(this.childCompHash[t]=e,"stop"!=e.activeStatus||"function"!=typeof e.preActivate||e.skipPreActivate||e.preActivate(),e.options.pluginName||e.initializeType){case"linkedDataList":case"grid":case"gridView":e.setDataList()}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=g.D.getComponentById(t);if(!e)return;switch(this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.options.pluginName||e.initializeType){case"grid":case"gridView":e.drawData(0,0);break;default:e.modelControl.useRef&&e.refresh()}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.addChild=function(t){try{this.childCompHash&&(this.childCompHash[t.id]=t)}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.removeChild=function(t){try{
this.childCompHash&&delete this.childCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||g.D.getBoolean(l.v.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var r=l.v.getConfig(i);s=a.x.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getStructure=function(){try{switch(this.elementType){case"XML":return this.xml2JSON(this.element);case"JSON":return this.json2Structure()}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.json2Structure=function(){try{var t=this.element,e={attr:{id:this.id},rowArr:[[]]};if(e.attr=a.x.extendKeepingType(e.attr,t.options),t.columnInfo)for(var i=0;i<t.columnInfo.length;i++){var o=t.columnInfo[i];e.rowArr[0].push(o)}return e}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getInitializeType=function(){try{return this.getObjectType()}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.setColumnFilter=function(t,e,i,o){try{var s=this.getColumnIndex(t);this.broadcast({gridView:["notifyBeforeSettedColumnFilter"]});var r=!1;if("object"!=typeof t||g.D.isString(t))q.B.fireEvent(this,"onbeforecolumnfilterchange"),this.setFilter({type:"row",colIndex:s,key:e,condition:i,exactMatch:o});else{if("row"!==t.type&&"func"!==t.type&&"regExp"!==t.type)throw new Error("type does not support.[type:"+t.type+"]");r=t.noRefreshAfter,!1!==t.columnfilterchangeFire&&q.B.fireEvent(this,"onbeforecolumnfilterchange"),this.setFilter({type:t.type,colIndex:"string"==typeof t.colIndex&&"rowstatus()"==t.colIndex.toLowerCase()?"@rowStatus":t.colIndex,key:t.key,condition:t.condition,param:t.param,exactMatch:t.exactMatch,noRefresh:t.noRefresh,keepTop:t.keepTop,internal:t.internal})}!0!==r&&this.broadcast({gridView:["notifyAfterSettedColumnFilter"]}),("object"!=typeof t||g.D.isString(t)||!1!==t.columnfilterchangeFire)&&q.B.fireEvent(this,"onaftercolumnfilterchange")}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.removeColumnFilter=function(t,e){try{var i=this.getColumnID(t);this.broadcast({gridView:["notifyBeforeRemovedColumnFilter"]}),this.removeFilter({type:"row",colIndex:"rowstatus()"==t.toLowerCase()?"@rowStatus":i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"func",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"regExp",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!0),e&&!0===e.noRefreshAfter||this.broadcast({gridView:["notifyAfterRemovedColumnFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.clearSortFilter=function(){try{this.filterManager.deleteFilterById("sort^@",!1),this.filterManager.executeAllFilter(this.dataArr,this.getTotalRow(),this.getColumnCount()),this.sortStatusInfo={},this.sortStatusArr=[],this.broadcast({gridView:["notifyClearSortFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.removeColumnFilterAll=function(){try{this.clearFilter()}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.removeFilter=function(t,e){try{t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",internal:!1,filterId:""},t||{}),e=void 0===e||e,
"@rowStatus"!=t.colIndex&&"string"==typeof t.colIndex&&(t.colIndex=this.getColumnIndex(t.colIndex));var i=JSON.stringify(this.filteredRowIndexArr),o=t.filterId||t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.deleteFilter(o,this.dataArr,this.getTotalRow(),this.getTotalCol(),t,e),!0!==t.noRefresh&&(this.broadcast({gridView:["notifyRemovedFilter",["sort"===t.type]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:i,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.clearFilter=function(t){try{this.filterManager.clear(),this.filteredRowIndexArr=[];for(var e=this.getTotalRow(),i=0;i<e;i++)this.filteredRowIndexArr.push(i);t||this.broadcast({gridView:["notifyClearFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.sort=function(t,e){try{switch(e){case 0:this.setFilter({type:"sort",sortIndex:t,sortOrder:"1",dataType:"text",internal:!0});break;case 1:this.setFilter({type:"sort",sortIndex:t,sortOrder:"-1",dataType:"text",internal:!0});break;case 2:this.clearSortFilter()}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.clearSort=function(){try{this.broadcast({gridView:["notifyBeforeClearSort"]}),this.clearSortFilter(),this.broadcast({gridView:["notifySetFocusedCell"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.multisort=function(t){try{var e,i;void 0!==t&&null!=t||(t={}),t.type="sort",t.sortOrder=t.sortOrder||[];var o=typeof t.sortIndex,s=typeof t.sortOrder;"object"==o?e=t.sortIndex:"string"==o&&(e=t.sortIndex.split(" ")),"object"==s?i=t.sortOrder:"string"==s&&(i=t.sortOrder.split(" "));for(var r=0;r<e.length-i.length;r++)i.push(1);var a=[];for(r=0;r<e.length;r++){var n="number"==this.getCellInfo(this.getColumnID(e[r])).options.dataType?"number":"text";a.push(n)}t.dataType=a.join(" "),t.internal=!0,this.setFilter(t),!0!==t.noRefresh&&this.broadcast({gridView:["notifyMultisort"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.setFilter=function(t){try{t&&t.noRefresh||this.broadcast({gridView:["notifySaveFocusedCell"]}),t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",bodyIdColIndexMap:this.bodyIdColIndexMap,dataList:this.id,internal:!1,filterId:""},t||{});var e="";if("@rowStatus"!=t.colIndex){"string"==typeof t.colIndex&&(t.colIndex=this.bodyIdColIndexMap[t.colIndex]),e=(c=this.getCellInfo(t.colIndex)).options.col_id;var i=c.options.dataType;t.columnDataType=i}var o=!1;if(t.sortIndex){this.sortStatusInfo={},this.sortStatusArr=[];var s=[],r=[],n=[];s="string"==typeof t.sortIndex?t.sortIndex.wq_trim().split(" "):t.sortIndex,t.sortOrder&&"string"==typeof t.sortOrder?r=t.sortOrder.wq_trim().split(" "):"object"==typeof t.sortOrder&&(r=t.sortOrder),t.dataType&&(n=t.dataType.wq_trim().split(" ")),t.sortIndexArr=[],t.sortOrderArr=[],t.dataTypeArr=[],t.sortIdArr=[],t.numberExtractionValueArr=[];for(var l=0;l<s.length;l++){isNaN(s[l])?t.isExpression&&t.fakeExpressionArr?t.sortIndexArr.push(this.getColCnt()):t.sortIndexArr.push(this.bodyIdColIndexMap[s[l]]):t.sortIndexArr.push(parseInt(s[l],10));var d=parseInt(r[l]);isNaN(d)&&(d=1),t.sortOrderArr.push(d),t.dataTypeArr.push(n[l]||"text"),t.isExpression&&t.fakeExpressionArr?t.sortIdArr.push(s[l]):t.sortIdArr.push(this.getColumnID(t.sortIndexArr[l]));var c,u={},p="true"==(c=this.getCellInfo(t.sortIdArr[l])).options.numberExtraction;t.numberExtractionValueArr.push(p);var g="number"==c.options.dataType||"bigDecimal"===c.options.dataType||"float"==c.options.dataType?c.options.dataType:"text";"number"===this.options.sortType||"bigDecimal"===this.options.sortType||"text"===this.options.sortType||"float"===this.options.sortType?(g=this.options.sortType,t.dataType=g,t.dataTypeArr[l]=g):t.dataType!=g&&("numberFirst"===this.options.sortType?"number"===g||"bigDecimal"===g||"float"===g?(t.dataType=g,
t.dataTypeArr[l]=g):"number"!==t.dataType&&"bigDecimal"!==t.dataType&&"float"!==t.dataType||(g=t.dataType):(t.dataType=g,t.dataTypeArr[l]=g)),u.colID=t.sortIdArr[l],u.sortOrder=t.sortOrderArr[l],u.dataType=g,this.sortStatusInfo[u.colID]=u,this.sortStatusArr.push(u),this.sortStatusArr[u.colID]=u}o=!0,e=""}t.numberExtraction=this.options.numberExtraction;var m=JSON.stringify(this.filteredRowIndexArr),f=t.filterId||t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.addFilter(f,this.getTotalRow(),this.getTotalCol(),t),t.noRefresh||(this.broadcast({gridView:["notifySettedFilter",[{isSort:o,keepTop:t.keepTop,fiteredColID:e}]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:m,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getFilterList=function(){try{for(var t=[],e=0;e<this.filterManager.filterArr.length;e++)t.push(this.filterManager.filterArr[e].options);return t}catch(t){h.w.printStackTrace(t)}},dt.prototype.setXMLLayout=function(t,e,i){try{"undefined"!=t&&null!=t&&""!=t?t.endsWith("/")?this.options.baseNode=t.substring(0,t.length-1):this.options.baseNode=t:this.options.baseNode="","undefined"!=e&&null!=e&&(e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),this.options.repeatNode=e),this.options.valueNode="undefined"!=i&&null!=i?i:""}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.xmlData2ArrData=function(t,e){try{if(null==t)return;if(9==t.nodeType)var i=t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);else{if((o=this.options.baseNode).startsWith(t.tagName)){var o=o.replace(t.tagName,".");i=t.selectNodes(o+"/"+this.options.repeatNode)}if(0==i.length)i=(t=WebSquare.xml.parse(WebSquare.xml.serialize(t))).selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode)}for(var s=[],r=[],a={},n=this.options.valueNode,l=null==n||""==n,d=g.D.getTextNodeValue,c=i.length,u=this.cellIdList.length,p=[],m=0;m<u;m++)p[m]=this.getCellInfo(this.cellIdList[m]);var f={},b=!1;if("object"==typeof e&&null!=e&&e.constructor===Array){b=!0;for(var y=0;y<e.length;y++)f[e[y]]=!0}for(m=0;m<c;m++){var v=m,w=(i[m],s.length),S={},C=[],_=i[m].selectSingleNode("rowStatus");null!=_&&r.push(d(_));for(var x=0;x<u;x++){var I=this.cellIdList[x];if(!b||f[I]){if(p[x].options.importExp)try{s[w+x]=new Function("return "+p[x].options.importExp)()}catch(t){s[w+x]=p[x].options.defaultValue,h.w.printStackTrace(t,null,this)}else{if(p[x].options.importFormatter&&!p[x].options.setFormatter){C.push(x);continue}var T=i[m].selectSingleNode(I);s[w+x]=null!=T?l?d(T):T.getAttribute(n):p[x].options.defaultValue}this.options.xmlEncode&&null!=s[w+x]&&(s[w+x]=WebSquare.xml.decode(s[w+x])),S[I]=s[w+x]}else s[w+x]=p[x].options.defaultValue,this.options.xmlEncode&&null!=s[w+x]&&(s[w+x]=WebSquare.xml.decode(s[w+x])),S[I]=s[w+x]}for(var k=0;k<C.length;k++)try{var D=g.D.getGlobalFunction(p[C[k]].options.importFormatter,this.scope_id);"function"==typeof D&&(s[w+C[k]]=D.call(this,S,v,C[k]))}catch(t){s[w+C[k]]=p[C[k]].options.defaultValue,h.w.printStackTrace(t,null,this)}}return a.dataArr=s,a.rowStatusArr=r,a}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.jsonData2ArrData=function(t,e){try{if(null==t)return;for(var i=[],o=[],s={},r=t.length,a=this.cellIdList.length,n=[],l=0;l<a;l++)n[l]=this.getCellInfo(this.cellIdList[l]);var d={},c=!1;if("object"==typeof e&&null!=e&&e.constructor===Array){c=!0;for(var u=0;u<e.length;u++)d[e[u]]=!0}for(l=0;l<r;l++){var p=l,m=t[l],f=i.length;null!=t[l].rowStatus&&o.push(t[l].rowStatus);for(var b=0;b<a;b++){var y=this.cellIdList[b];if(!c||d[y])if(n[b].options.importExp)try{i[f+b]=new Function("return "+n[b].options.importExp)()}catch(t){i[f+b]=n[b].options.defaultValue,h.w.printStackTrace(t,null,this)}else if(n[b].options.importFormatter&&!n[b].options.setFormatter)try{
var v=g.D.getGlobalFunction(n[b].options.importFormatter,this.scope_id);"function"==typeof v&&(i[f+b]=v.call(this,m,p,y))}catch(t){i[f+b]=n[b].options.defaultValue,h.w.printStackTrace(t,null,this)}else{var w=t[l][y];null!=w?i[f+b]=w:"number"==n[b].options.dataType&&n[b].options.defaultValue&&!isNaN(n[b].options.defaultValue)?i[f+b]=parseInt(n[b].options.defaultValue,10):i[f+b]=n[b].options.defaultValue}else i[f+b]=n[b].options.defaultValue}}return s.dataArr=i,s.rowStatusArr=o,s}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.columnValue=function(t,e){if(void 0!==t[e])return t[e];if(void 0!==t.selectSingleNode){var i=t.selectSingleNode(e);if(null!=i){var o=this.options.valueNode;return null==o||""==o?this.getTextNodeValue(i):i.getAttribute(o)}}var s=this.getCellInfo(e);return s&&s.options?s.options.defaultValue:""},dt.prototype.xpathValue=function(t,e){try{var i=WebSquare.xml.findNode(t,e);if(null==i)return"";if(1!=i.nodeType)return i.nodeValue;for(var o=i.firstChild;null!=o;o=o.nextSibling)if(3==o.nodeType)return o.nodeValue}catch(t){$l("xpath exeption"),h.w.printStackTrace(t,null,this)}return""},dt.prototype.rowIndexValue=function(t){return t},dt.prototype.getArrXML=function(t,e){try{var i;switch(void 0!==e&&null!=e||(e={}),this.initializeType){case"grid":for(var o in this.childCompHash)return this.childCompHash[o].getArrXML(t);case"gridView":case"dataList":i=this.id;break;case"dataMap":case"removeManager":case"linkedDataList":i=this.parent.id}e.id?i=e.id:(i=this.id,this.scope_obj&&(i=this.org_id||this.id));var s=e.initializeType?e.initializeType:this.initializeType,r=e.rowStatusNodeName?e.rowStatusNodeName:this.options.rowStatusNodeName,a=e.baseNode||""==e.baseNode?e.baseNode:this.options.baseNode,n=e.repeatNode||""==e.repeatNode?e.repeatNode:this.options.repeatNode,l=e.idAttribute||""==e.idAttribute?e.idAttribute:this.options.idAttribute,d=e.valueAttribute||""==e.valueAttribute?e.valueAttribute:this.options.valueAttribute;if(t instanceof Array){var c=!1;this.tagNmArr=a.replace(/\[[^\]]+\]/g,"").split("/"),l=""==l?"id":l;for(var u=0;u<this.tagNmArr.length;u++)if(null!=this.tagNmArr[u]&&""!=this.tagNmArr[u].wq_trim())if(c){var p=f.createElement(this.tagNmArr[u]);p.setAttribute(l,i),m.push(p),m[u-1].appendChild(m[u])}else{var m=[],f=WebSquare.xml.parse("<"+this.tagNmArr[u]+"/>");f.documentElement.setAttribute(l,i),m.push(f.documentElement),c=!0}switch(this.initializeType){case"dataList":if(this.options.attributeMap)if(_=g.D.getComponentById(this.options.attributeMap))for(u=0;u<m.length;u++)for(var b=0;b<_.getCount();b++)m[u].setAttribute(_.getKey(b),_.get(b))}var y=n.replace(/\[[^\]]+\]/g,"").split("/"),v=null;for(u=0;u<t.length;u++){var w=t[u];v=[];var S=null;for(b=0;b<y.length;b++)if(""!=y[b]){var C=f.createElement(y[b]);v.push(C),0==b?m[m.length-1].appendChild(C):v[b-1].appendChild(v[b])}switch(S=v[y.length-1],this.initializeType){case"dataList":S.setAttribute("index",w);break;case"removeManager":S.setAttribute("index","removed");break;case"dataMap":if(this.parent.options.attributeMap){var _=g.D.getComponentById(this.parent.options.attributeMap);for(u=0;u<v.length;u++)if(v[u].setAttribute(l,this.parent.id),_)for(b=0;b<_.getCount();b++)v[u].setAttribute(_.getKey(b),_.get(b))}else for(u=0;u<v.length;u++)v[u].setAttribute(l,this.parent.id)}var x=this.getColumnCount()+1;x="object"==typeof e.includeColumns&&null!=e.includeColumns&&e.includeColumns.constructor===Array?e.includeColumns.length+1:this.getColumnCount()+1;for(var I=new Array(x),T=0;T<x;T++)if(T==x-1){if("dataList"!=s&&"removeManager"!=s&&"linkedDataList"!=s)continue;var k="";if(null==(k=this.getRowStatus(w))&&(k=""),this.options.xmlEncode&&(k=WebSquare.xml.encode(k)),I[T]=f.createElement(r),""==d){var D=f.createTextNode(k);I[T].appendChild(D)}else I[T].setAttribute(d,k);if(I[T].setAttribute("statusValue",this.getRowStatusValue(w)),S.appendChild(I[T]),this.options.rowNumData){var L=f.createTextNode(w+1);I[T+1]=f.createElement("rowNum"),I[T+1].appendChild(L),
S.appendChild(I[T+1])}}else{var W="";W="object"==typeof e.includeColumns&&null!=e.includeColumns&&e.includeColumns.constructor===Array?e.includeColumns[T]:this.cellIdList[T];var A=this.bodyIdColIndexMap[W],M=this.cellInfoHash[W],E=(k="",this.options.depthColumn||e.realRowIndex?w:this.filteredRowIndexArr[w]);if(M&&(k="expression"==M.options.inputType?M.getExpressionValue(E):this.dataArr[E*this.cellIdList.length+A]),null==k&&(k=""),this.options.xmlEncode&&(k=WebSquare.xml.encode(k)),I[T]=f.createElement(W),""==d){D=f.createTextNode(k);I[T].appendChild(D)}else I[T].setAttribute(d,k);S.appendChild(I[T])}}return f}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getAllArrXML=function(t){try{var e;switch(void 0!==t&&null!=t||(t={}),this.initializeType){case"grid":for(var i in this.childCompHash)return this.childCompHash[i].getAllArrXML();case"dataList":case"gridView":e=this.id;break;case"dataMap":case"removeManager":case"linkedDataList":e=this.parent.id}t.id?e=t.id:(e=this.id,this.scope_obj&&(e=this.org_id||this.id));var o=t.initializeType?t.initializeType:this.initializeType,s=t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName,r=t.baseNode||""==t.baseNode?t.baseNode:this.options.baseNode,a=t.repeatNode||""==t.repeatNode?t.repeatNode:this.options.repeatNode,n=t.idAttribute||""==t.idAttribute?t.idAttribute:this.options.idAttribute,l=t.valueAttribute||""==t.valueAttribute?t.valueAttribute:this.options.valueAttribute,d=!1;this.tagNmArr=r.replace(/\[[^\]]+\]/g,"").split("/");n=""==n?"id":n;for(var c=0;c<this.tagNmArr.length;c++)if(null!=this.tagNmArr[c]&&""!=this.tagNmArr[c].wq_trim())if(d){var u=m.createElement(this.tagNmArr[c]);u.setAttribute(n,e),p.push(u),p[c-1].appendChild(p[c])}else{var p=[],m=WebSquare.xml.parse("<"+this.tagNmArr[c]+"/>");m.documentElement.setAttribute(n,e),p.push(m.documentElement),d=!0}switch(this.initializeType){case"dataList":if(this.options.attributeMap)if(C=g.D.getComponentById(this.options.attributeMap))for(c=0;c<p.length;c++)for(var f=0;f<C.getCount();f++)p[c].setAttribute(C.getKey(f),C.get(f))}var b=a.replace(/\[[^\]]+\]/g,"").split("/"),y=null;for(c=0;c<this.getTotalRow();c++){var v=c;y=[];var w=null;for(f=0;f<b.length;f++)if(""!=b[f]){var S=m.createElement(b[f]);y.push(S),0==f?p[p.length-1].appendChild(S):y[f-1].appendChild(y[f])}switch(w=y[b.length-1],this.initializeType){case"dataList":w.setAttribute("index",v);break;case"removeManager":w.setAttribute("index","removed");break;case"dataMap":if(this.parent.options.attributeMap){var C=g.D.getComponentById(this.parent.options.attributeMap);for(c=0;c<y.length;c++)if(y[c].setAttribute(n,this.parent.id),C)for(f=0;f<C.getCount();f++)y[c].setAttribute(C.getKey(f),C.get(f))}else for(c=0;c<y.length;c++)y[c].setAttribute(n,this.parent.id)}var _=0;_="object"==typeof t.includeColumns&&null!=t.includeColumns&&t.includeColumns.constructor===Array?t.includeColumns.length+1:this.getColumnCount()+1;for(var x=new Array(_),I=0;I<_;I++)if(I==_-1){if("dataList"!=o&&"removeManager"!=o&&"linkedDataList"!=o)continue;var T="";if(null==(T=this._getRowStatus(v))&&(T=""),this.options.xmlEncode&&(T=WebSquare.xml.encode(T)),x[I]=m.createElement(s),""==l){var k=m.createTextNode(T);x[I].appendChild(k)}else x[I].setAttribute(l,T);x[I].setAttribute("statusValue",this._getRowStatusValue(v)),w.appendChild(x[I])}else{var D="";D="object"==typeof t.includeColumns&&null!=t.includeColumns&&t.includeColumns.constructor===Array?t.includeColumns[I]:this.cellIdList[I];var L=this.bodyIdColIndexMap[D];T="";if(T=this._getData(v,L),this.options.xmlEncode&&(T=WebSquare.xml.encode(T)),x[I]=m.createElement(D),""==l){k=m.createTextNode(T);x[I].appendChild(k)}else x[I].setAttribute(l,T);w.appendChild(x[I])}}return m}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.xml2JSON=function(t){for(var e,i,o={attr:{},rowArr:[]
},s=0;s<t.attributes.length;s++)WebSquare.nodeValueDeprecated?o.attr[t.attributes[s].name]=t.attributes[s].value:o.attr[t.attributes[s].nodeName]=t.attributes[s].nodeValue;var r=this.initializeType;switch(this.parent&&"grid"==this.parent.initializeType&&(r="grid"),r){case"removeManager":case"dataList":e="columnInfo",i="column";break;case"dataMap":e="keyInfo",i="key";break;case"grid":e="row",i="column"}var a=WebSquare.xml.getElementsByTagName(t,e,l.v._XML_NAMESPACE.W2);for(s=0;s<a.length;s++){for(var n=WebSquare.xml.getElementsByTagName(a[s],i,l.v._XML_NAMESPACE.W2),h=[],d=0;d<n.length;d++){for(var c=n[d],u={},p=0;p<c.attributes.length;p++)WebSquare.nodeValueDeprecated?u[c.attributes[p].name]=c.attributes[p].value:u[c.attributes[p].nodeName]=c.attributes[p].nodeValue;h.push(u)}o.rowArr.push(h)}return 0===a.length&&o.rowArr.push([]),o},dt.prototype.getTextNodeValue=function(t){for(var e=null,i=t.firstChild;null!=i;i=i.nextSibling)"3"==i.nodeType&&(e=i.nodeValue);return e},dt.prototype.getID=function(){try{return this.id}catch(t){h.w.printStackTrace(t)}},dt.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=g.D.getComponentById(i);if(o&&o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},dt.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e=""),t in this.options&&(this.options[t]=e);var i=this.options.attributeMap;if(i){var o=g.D.getComponentById(i);o&&o.hasKey(t)&&o.set(t,e)}}catch(t){h.w.printStackTrace(t)}},dt.prototype.syncWithAttributeMap=function(t,e){try{if(this.options.attributeMap){var i=g.D.getComponentById(this.options.attributeMap);if(i)for(var o=i.getCount(),s=0;s<o;s++){t=i.getKey(s),e=i.get(s);this.options[t]=e}}}catch(t){h.w.printStackTrace(t)}},dt.prototype.getObjectType=function(){try{var t=this.initializeType;if("dataList"==t)return t}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.reset=function(){try{if("dataList"==this.initializeType){if(this.removeAll(),"XML"==this.elementType){var t=WebSquare.xml.getElementsByTagName(this.element,"data",l.v._XML_NAMESPACE.W2)[0];if(t&&this.useData){this.allowTextNode=!0;for(var e=WebSquare.xml.getElementsByTagName(t,"row",l.v._XML_NAMESPACE.W2),i=0;i<e.length;i++)this.setRowXML(i,e[i]);this.modifyAllStatus("R"),this.allowTextNode=!1}}else"JSON"==this.elementType&&this.useData&&this.element.data&&(this.setJSON(this.element.data),this.modifyAllStatus("R"));this.reform()}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.initDataList=function(){try{this.broadcast({gridView:["notifyBeforeInitDataList"]});var t=this.dataList.removeAll();return this.clearFilter(),this.broadcast({gridView:["notifyAfterInitDataList"]}),t}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getColumnOption=function(t,e){try{return this.getCellInfo(t).options[e]}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.setColumnOption=function(t,e,i){try{this.getCellInfo(t).options[e]=i}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.setRowNumData=function(t){try{g.D.getBoolean(t)?this.options.rowNumData=!0:this.options.rowNumData=!1}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getColumnInfo=function(t,e){try{var i=-1;if("number"==typeof t?(this.cellIdList[t],i=t):(t,i=this.bodyIdColIndexMap[t]),"number"!=typeof e&&(e=0),i>-1&&i<this.structure.rowArr[e].length){var o={};for(var s in this.structure.rowArr[e][i])"@xml"!==s&&(o[s]=this.structure.rowArr[e][i][s]);return o}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getInfo=function(t,e){try{var i={};if("string"!=typeof t&&(t="dataList"===this.initializeType?"dataListInfo":"dataMap"===this.initializeType?"dataMapInfo":"attr"),"string"!=typeof e&&(e="dataList"===this.initializeType?"columnInfo":"dataMap"===this.initializeType?"keyInfo":"col"),i[t]=a.x.extend({},this.structure.attr),i[e]={},this.structure.rowArr.length>1)for(var o=0;o<this.structure.rowArr.length;o++){var s=e+o
;i[e][s]={};for(var r=0;r<this.structure.rowArr[o].length;r++)i[e][s][this.cellIdList[r]]=this.getColumnInfo(r,o)}else if(1===this.structure.rowArr.length)for(o=0;o<this.structure.rowArr[0].length;o++)i[e][this.cellIdList[o]]=this.getColumnInfo(o);return i}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.fireOnModelChangeEvent=function(t){try{if(t){var e={type:t.type,rowIndex:t.rowIndex,colID:t.colID,oldValue:t.oldValue,newValue:t.newValue};q.B.fireEvent(this,"onmodelchange",e)}}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.fireOnBeforeColumnChangeEvent=function(t){try{if(t)return q.B.fireEvent(this,"onbeforecolumnchange",{oldColID:t.oldColumnID,newColID:t.newColumnID})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.fireOnColumnChangeEvent=function(t){try{if(t)return q.B.fireEvent(this,"oncolumnchange",{oldColID:t.oldColumnID,newColID:t.newColumnID})}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.setIgnoreStatus=function(t,e){try{var i=this.getColumnIndex(t);if(null==i||null==e)return;this.ignoreStatusColArr[i]=e,this.getCellInfo(i).options.ignoreStatus=e}catch(t){h.w.printStackTrace(t,null,this)}};var ct=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};a.x.extend(ct.prototype,st.prototype),a.x.extend(ct.prototype,rt.prototype),a.x.extend(ct.prototype,lt.prototype),a.x.extend(ct.prototype,dt.prototype),ct.filter=nt,ct.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.dataList",pluginName:"dataList",userEvents:["onbeforerowpositionchange","onrowpositionchange","oncelldatachange","onbeforecelldatachange","oninsertrow","onremoverow","ondataload","onmodelchange","onbeforecolumnchange","oncolumnchange","onbeforecolumnfilterchange","onaftercolumnfilterchange"],baseNode:"list",repeatNode:"map",valueNode:"",valueAttribute:"",idAttribute:"",rowStatusNodeName:"rowStatus",initRowPosition:null,importFormatter:"",setFormatter:"",JSONPath:"",rowNumData:!1,saveRemovedData:!0,keepInsertedRowDeleteStatus:!1,saveRemovedDataDeletedInsertedRow:!0,removeDummyRowStatus:!1,removedDataMatch:!1,validateAllItemsetData:!1,getMatchedFromAllData:!1,keepRowPosition:!0,syncFilterWithLinkedDataList:!0,keepFilter:!1,undoRecursiveRow:!1,maxHistoryCount:10,sortType:"numberFirst"},ct.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType=o||"dataList",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,this.scope_id=null,i)switch(this.elementType){case"XML":this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),"dataList"==this.initializeType&&(this.options.xmlEvents=WebSquare.Parser.parseEvent(i));break;case"JSON":this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u=WebSquare.componentsCache,p=u.dataList;p||(p=u.dataList={}),p[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){
var g=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"dataList")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 dataList를 삭제하고 새로 생성합니다.";d.k.printLog(g);var m=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=m}catch(t){m=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"dataList"==this.initializeType&&(window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this)),this.event=new Z.U,this.initializeDataList(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},"dataList"==this.initializeType&&this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid)),q.B.fireEvent(this,"onload",null)}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.initializeDataList=function(t){try{switch(this.childCompHash={},this.refCompHash={},this.activated=!1,this.initializeType){case"dataList":this.options.attributeMap&&(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]||(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]=[]),WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap].push(this.id),this.syncWithAttributeMap())}if(this.filterManager=new WebSquare.DataCollection.filterController(this),"dataList"==this.initializeType||"grid"==this.initializeType)"JSON"==this.elementType?this.removeManager=new WebSquare.DataCollection.dataList(this.id+"??removeManager",this.options,this.element,"removeManager"):this.removeManager=new WebSquare.DataCollection.dataList(this.id+"??removeManager",this.options,this.element.cloneNode(!0),"removeManager"),this.removeManager.parent=this;else{var e=this.id.split("??");this.parent=g.D.getComponentById(e[0])}this.columnPosition=null,this.rowPosition=null,this.dataArr=[],this.originalDataArr=[],this.filteredRowIndexArr=[],this.filteredRowIndexMap={},this.oneRowDataLength=0,this.bodyIdColIndexMap={},this.cellInfoHash={},this.cellIdList=[],this.rowStatusArr=[],this.cellStatusArr=[],this.ignoreStatusColArr=[],this.commandList=[],this.commandPosition=-1,this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedo="",this.undoRedo="",this.structure=this.getStructure(),"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute="");var i=""==this.options.valueNode?this.options.valueAttribute:this.options.valueNode;i=""==this.options.valueAttribute?this.options.valueNode:this.options.valueAttribute,this.options.valueNode=i,this.options.valueAttribute=i;for(var o=0,s=this.structure.rowArr,r=0;r<s.length;r++){this.oneRowDataLength+=s[r].length;for(var a=0;a<s[r].length;a++){var n=s[r][a],d=new WebSquare.DataCollection.dataListCellInfo(n,this,o);this.cellIdList.push(n.id),this.bodyIdColIndexMap[d.id]=o,this.cellInfoHash[d.id]=d,o++}}if("dataList"==this.initializeType)if(WebSquare.DataCollection.api.addChild(this),this.synchronize(),this.synchronizeRef(),"XML"==this.elementType){var c=WebSquare.xml.getElementsByTagName(t,"data",l.v._XML_NAMESPACE.W2)[0];if(c&&(this.useData=g.D.getBoolean(c.getAttribute("use")),this.useData)){this.allowTextNode=!0;var u=WebSquare.xml.getElementsByTagName(c,"row",l.v._XML_NAMESPACE.W2),p=WebSquare.DataCollection.stopBroadCast;WebSquare.DataCollection.stopBroadCast=!0;for(r=0;r<u.length;r++)this.setRowXML(r,u[r])
;WebSquare.DataCollection.stopBroadCast=p,this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifySettedGridData",[void 0,void 0,void 0,void 0,void 0,!0]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"}),this.originalDataArr=this.dataArr.slice(0),this.modifyAllStatus("R"),this.allowTextNode=!1}}else"JSON"==this.elementType&&(this.useData=g.D.getBoolean(this.element.option.useData),this.useData&&this.element.data&&(this.setJSON(this.element.data),this.modifyAllStatus("R")))}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.finalize=function(){try{for(var t in this.removeAll({skipSavingRemovedData:"true"}),this.childCompHash){var e=this.childCompHash[t];e?e.constructor==WebSquare.DataCollection.linkedDataList||e.constructor==WebSquare.DataCollection.dataMap||e.constructor==WebSquare.DataCollection.dataList?(WebSquare.DataCollection.stopBroadCast||e.refresh(),WebSquare.DataCollection.api.remove(t)):e.successBinding=!1:delete this.childCompHash[t]}this.activated=!1,this.removeManager&&this.removeManager.id&&WebSquare.DataCollection.api.remove(this.removeManager.id)}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.activate=function(){try{if(!this.activated){for(var t in this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}if(null!=this.options.initRowPosition){var o=parseInt(this.options.initRowPosition,10);this.setRowPosition(o)}this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),this.addEvent(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&q.B.isEventSupported(this.render,t))e&&e.constructor==Array?q.B.fireSystemEvent(this,t,e[0]):q.B.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),q.B.fireEvent.apply(q.B.fireEvent,s),s[0]=null}}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"==typeof this.systemEventList[t]&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"==typeof this.systemEventList[t]&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},ct.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0
;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},ct.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.w.printStackTrace(t,null,this)}};var ut=function(){};ut.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},ut.prototype.setBroadcast=function(t){this._broadCastFlag=!1!==t||t},ut.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),WebSquare.DataCollection.stopBroadCast||!this.getBroadcast())return;for(var e in this.childCompHash){if(null!=(i=this.childCompHash[e])&&WebSquare.idCache[i.uuid]&&(void 0===i.render||null!=i.render))switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.initializeType){case"linkedDataList":if(t.linkedDataList){i[t.linkedDataList[0]](t.linkedDataList[1]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?i.modelControl.useItemset&&i.refreshItemset():"rollback"==t.generalComp&&i.rollback()}}for(var e in this.refCompHash){var i;if(null!=(i=this.refCompHash[e])&&WebSquare.idCache[i.uuid]){var o=i.modelControl?i.modelControl.dataCollectionRefInfo:null;if("searchbox"==i.options.pluginName&&(o=i.input&&i.input.modelControl?i.input.modelControl.dataCollectionRefInfo:null),t.key&&i.modelControl&&o&&o.key!=t.key)continue;switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.initializeType){case"linkedDataList":if(t.linkedDataList){i.refresh();break}default:"refresh"==t.generalComp||"both"==t.generalComp?(i.modelControl.useRef||"searchbox"==i.options.pluginName&&i.input.modelControl.useRef)&&i.refresh():"binding"==t.generalComp?i.modelControl.binding():"rollback"==t.generalComp&&i.rollback()}}}if(WebSquare.DataCollection.attributeMapInfo[this.id])for(var s=0;s<WebSquare.DataCollection.attributeMapInfo[this.id].length;s++){var r=WebSquare.DataCollection.attributeMapInfo[this.id][s];g.D.getComponentById(r).syncWithAttributeMap()}}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=g.D.getComponentById(e))}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.synchronizeRef=function(){try{var t=WebSquare.DataCollection.parentToChildRef[this.id];if(t)for(var e in t)t[e]&&(this.refCompHash[e]=g.D.getComponentById(e));this.broadcast({generalComp:["binding"]})}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=g.D.getComponentById(t);if(!e)return;this.childCompHash[t]=e}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=g.D.getComponentById(t);if(!e)return;this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.modelControl.binding()}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.addChild=function(t){try{this.childCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.syncWithAttributeMap=function(t,e){try{if(this.options.attributeMap&&this.options.attributeMap!=this.id){var i=g.D.getComponentById(this.options.attributeMap);if(i)for(var o=i.getCount(),s=0;s<o;s++){t=i.getKey(s),e=i.get(s);this.options[t]=e}}
}catch(t){h.w.printStackTrace(t)}},ut.prototype.hasKey=function(t){try{return t=this.getKey(t),this._dataList.hasColumn(t)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getID=function(){try{return this.id}catch(t){h.w.printStackTrace(t)}},ut.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=g.D.getComponentById(i);if(o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},ut.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e="");t in this.options&&(this.options[t]=e,this._dataList&&this._dataList.options&&!{bind:!0,id:!0,pluginName:!0,pluginType:!0}[t]&&(this._dataList.options[t]=e));var i=this.options.attributeMap;if(i){var o=g.D.getComponentById(i);o.hasKey(t)&&o.set(t,e)}}catch(t){h.w.printStackTrace(t)}},ut.prototype.getKey=function(t){try{return this._dataList.getColumnID(t)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getIndex=function(t){try{return this._dataList.getColumnIndex(t)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getCount=function(){try{return this._dataList.getTotalCol()}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.get=function(t){try{return t=this.getKey(t),this._dataList.getCellData(0,t)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getOriginal=function(t){try{var e;return(t=this.getKey(t))&&(e=this._dataList.getOriginalCellData(0,t)),e}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getArray=function(t){try{return this._dataList.getRowData(0,t)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getXML=function(t){try{t=t||{};var e=this._dataList.getRowXML(0,t);return t.id&&(null!=e.documentElement?e.documentElement.setAttribute("id",t.id):e.setAttribute("id",t.id)),e}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getJSON=function(t){try{var e=this._dataList.getRowJSON(0,t);if(!0===this.options.jsonArray&&(e=[e]),null!=this.options.customFormatter){var i=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof i&&(e=i(this,e))}return e}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getRefJSON=function(t){try{return void 0!==t&&null!=t||(t={}),t.exceptEmptyValue=!0,this.getJSON(t)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getType=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.options?e.options.dataType:""}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getDefaultValue=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.options?e.options.defaultValue:""}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getName=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.name?e.name:""}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getInitializeType=function(){try{return this.getObjectType()}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.set=function(t,e,i){try{var o;if(null!=(t=this.getKey(t))&&null!=t){var s=this._dataList.getCellData(0,t);if(s!==e){if(!1===q.B.fireEvent(this,"onbeforemodelchange",{key:t,oldValue:s,newValue:e}))return void this.broadcast({key:t,linkedDataList:["refresh"],generalComp:"rollback"});this._dataList.setCellData(0,t,e),!this.firstSetting[t]&&this.options.firstSet?this.setOriginal(t,s):this.setOriginal(t,e);var r=!0;"undo"!=(o=null!=i&&null!=i?i:"")&&"redo"!=o||(r=!1),r&&this.options.maxHistoryCount>0&&("undo"!=this.undoRedo&&"redo"!=this.undoRedo||this.commandList.splice(this.commandPosition,this.commandList.length-this.commandPosition+1),this.commandList.length>=this.options.maxHistoryCount&&this.commandList.shift(),this.commandList.push({key:t,oldValue:s,value:e}),this.commandPosition=this.commandList.length-1,this.undoRedo=""),q.B.fireEvent(this,"onmodelchange",{key:t,oldValue:s,newValue:e})}q.B.fireEvent(this,"onkeyset",{key:t,oldValue:s,newValue:e}),this.broadcast({key:t,linkedDataList:["refresh"],
generalComp:"both"})}}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.setArray=function(t,e){try{this._dataList.setRowData(0,t,!0,e,this.options.keepValue);for(var i=0;i<this.getCount();i++)this.setOriginal(i,this.get(i));this.commandList=[],this.commandPosition=-1,this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.setXML=function(t,e,i){try{e=!1!==e,this._dataList.setRowXML(0,t,e,i,this.options.keepValue),this.options.firstSetSubmission&&(this.firstSetting={});for(var o=0;o<this.getCount();o++)this.setOriginal(o,this.get(o));this.commandList=[],this.commandPosition=-1,q.B.fireEvent(this,"onsetdata"),this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.setJSON=function(t,e,i){try{if(null!=this.options.customUnformatter){var o=g.D.getGlobalFunction(this.options.customUnformatter,this.scope_id);"function"==typeof o&&(t=o(this,t))}!0===this.options.jsonArray&&t&&t.constructor==Array&&1===t.length&&(t=t[0]);var s=this._dataList.getRowCount()>0;this._dataList.setRowJSON(0,t,s,i,this.options.keepValue);var r=this.getCount();this.options.firstSetSubmission&&(this.firstSetting={});for(var a=0;a<r;a++)this.setOriginal(a,this.get(a));this.commandList=[],this.commandPosition=-1,q.B.fireEvent(this,"onsetdata"),this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.setOriginal=function(t,e){try{t=this.getKey(t),this.firstSetting[t]||(this._dataList.setOriginalCellData(0,t,e),this.firstSetting[t]=!0),this.firstSetting[t]&&t&&(this.statusHash[t]=this.getOriginal(t)==this.get(t))}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.addColumn=function(t){try{var e=this.getCount(),i=this._dataList.elementType;this._dataList.elementType="JSON";var o=new WebSquare.DataCollection.dataListCellInfo(t,this._dataList,e);this._dataList.elementType=i,this._dataList.cellIdList.push(t.id),this._dataList.bodyIdColIndexMap[o.id]=e,this._dataList.cellInfoHash[o.id]=o,this._dataList.oneRowDataLength=++e;var s=o.options.defaultValue||"";""!=s&&(this.firstSetting[o.options.id]=!0,this.statusHash[o.options.id]=!0),this._dataList.dataArr.push(s)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.reform=function(){try{for(var t in this._dataList.reform(),this.statusHash)this.statusHash[t]=!0;this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.undo=function(){try{for(var t=this.getCount(),e=0;e<t;e++){var i=this.getKey(e),o=this.getOriginal(i);this.set(i,o)}this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.restore=function(){try{if("undo"==this.undoRedo&&this.commandPosition--,this.commandPosition<0)return void(this.commandPosition=0);var t=this.commandList[this.commandPosition];this.set(t.key,t.oldValue,"undo"),this.undoRedo="undo"}catch(t){h.w.printStackTrace(t)}},ut.prototype.redo=function(){try{if("redo"==this.undoRedo&&this.commandPosition++,this.commandList.length-1<this.commandPosition)return void(this.commandPosition=this.commandList.length-1);var t=this.commandList[this.commandPosition];this.set(t.key,t.value,"redo"),this.undoRedo="redo"}catch(t){h.w.printStackTrace(t)}},ut.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||g.D.getBoolean(l.v.getConfiguration("/WebSquare/DataCollection/"+i+"/useConfig/@value"))){var r=l.v.getConfig(i);s=a.x.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,
values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getModifiedKey=function(){try{var t=[];for(var e in this.statusHash)this.statusHash[e]||t.push(e);return t}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getModifiedIndex=function(){try{var t,e=[];t=this.getModifiedKey();for(var i=0;i<t.length;i++)e.push(this.getIndex(t[i]));return e}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getModifiedData=function(){try{for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.get(e[i]));return t}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getModifiedXML=function(){try{for(var t=this.getModifiedKey(),e=-1,i=function(t){var o=t[++e],s="<"+o+">";return e<t.length-1&&(s+=i(t)),s+="</"+o+">"},o=this.getOption("baseNode").split(),s=i(o),r=WebSquare.xml.parse(s).documentElement,a=0;a<t.length;a++){var n=WebSquare.xml.parse("<"+t[a]+"></"+t[a]+">").documentElement;this.getOption("valueAttribute")?n.setAttribute(this.getOption("valueAttribute"),this.get(t[a])):n=WebSquare.xml.parse("<"+t[a]+">"+this.get(t[a])+"</"+t[a]+">").documentElement,WebSquare.xml.appendChild(r,n)}return r}catch(t){h.w.printStackTrace(t)}},ut.prototype.getModifiedJSON=function(){try{for(var t={},e=this.getModifiedIndex(),i=0;i<e.length;i++){t[this.getKey(e[i])]=this.get(e[i])}if(null!=this.options.customFormatter){var o=g.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof o&&(t=o(this,t))}return t}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getModifiedArray=function(){try{var t={};return t.key=this.getModifiedKey(),t.value=this.getModifiedData(),t}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.initRowStatus=function(){try{for(var t in this.statusHash)this.statusHash[t]||(this.statusHash[t]=!0)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.modifyKeyStatus=function(t,e){try{if(null==e||!this.hasKey(t))return;this.statusHash[t]=!g.D.getBoolean(e)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getObjectType=function(){try{var t=this.initializeType;if("dataMap"==t)return t}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.reset=function(){try{if("dataMap"==this.initializeType){if(this.statusHash={},this.firstSetting={},this._dataList.removeAll(),"XML"==this.elementType){var t=WebSquare.xml.getElementsByTagName(this.element,"data",l.v._XML_NAMESPACE.W2)[0];t&&this.useData?(this._dataList.allowTextNode=!0,this.setXML(t,!1),this._dataList.allowTextNode=!1):(this._dataList.allowTextNode=!0,this.setEmpty(),this._dataList.allowTextNode=!1)}else"JSON"==this.elementType&&this.useData&&this.element.data&&this.setJSON(this.element.data);if(0==this._dataList.getRowCount()){this._dataList.insertRow(0);for(var e=this.getCount(),i=0;i<e;i++){var o=this._dataList.getCellInfo(i);""!=o.options.defaultValue&&(this.firstSetting[o.options.id]=!0,this.statusHash[o.options.id]=!0)}}}}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.setEmpty=function(){try{0==this._dataList.getRowCount()&&this._dataList.insertRow(0);for(var t=this.getCount(),e=0;e<t;e++){var i=this.getKey(e),o=this._dataList.getCellInfo(e).options.defaultValue;this.set(i,o),this.setOriginal(i,o)}this._clearHistory()}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype._clearHistory=function(){try{this._dataList._undoRedoMultiHistoryClear(),this.commandList=[],this.commandPosition=-1,this.undoRedo=""}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.setEmptyValue=function(){try{this.setEmpty()}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getKeyInfo=function(t,e){try{return this._dataList.getColumnInfo(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getInfo=function(t,e){try{return this._dataList.getInfo(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),
!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},ut.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}};var pt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};a.x.extend(pt.prototype,ut.prototype),pt.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.dataMap",pluginName:"dataMap",userEvents:["onmodelchange","onvalidatekey","onsetdata","onkeyset","onbeforemodelchange"],baseNode:"map",repeatNode:"",valueNode:"",valueAttribute:"",idAttribute:"",JSONPath:"",firstSet:!1,firstSetSubmission:!1,keepValue:!1,jsonArray:!1,maxHistoryCount:10},pt.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType="dataMap",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,i)switch(this.elementType){case"XML":this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),this.options.xmlEvents=WebSquare.Parser.parseEvent(i);break;case"JSON":this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u=WebSquare.componentsCache,p=u.dataMap;p||(p=u.dataMap={}),p[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var g=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"dataMap")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 dataMap을 삭제하고 새로 생성합니다.";d.k.printLog(g);var m=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=m}catch(t){m=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.event=new Z.U,this.initializeDataMap(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.initializeDataMap=function(t){try{this.childCompHash={},this.refCompHash={},this.statusHash={},this.firstSetting={},this.activated=!1,this.commandList=[],this.commandPosition=-1,this.options.attributeMap&&this.id!=this.options.attributeMap&&(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]||(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]=[]),WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap].push(this.id),this.syncWithAttributeMap()),"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute="");var e=""==this.options.valueNode?this.options.valueAttribute:this.options.valueNode
;if(e=""==this.options.valueAttribute?this.options.valueNode:this.options.valueAttribute,this.options.valueNode=e,this.options.valueAttribute=e,this.options.repeatNode=this.options.baseNode,this.element=t,"JSON"==this.elementType&&(t.columnInfo=t.keyInfo),this._dataList=new WebSquare.DataCollection.dataList(this.id+"??dataList",this.options,t,"dataMap"),this._dataList.parent=this,"dataMap"==this.initializeType){if(WebSquare.DataCollection.api.addChild(this),this.synchronize(),this.synchronizeRef(),"XML"==this.elementType){var i=WebSquare.xml.getElementsByTagName(t,"data",l.v._XML_NAMESPACE.W2)[0];i&&(this.useData=g.D.getBoolean(i.getAttribute("use")),this.useData&&(this._dataList.allowTextNode=!0,this.setXML(i,!1),this._dataList.allowTextNode=!1))}else"JSON"==this.elementType&&(this.useData=this.element.option.useData,this.useData&&this.element.data&&this.setJSON(this.element.data));if(0==this._dataList.getRowCount()){this._dataList.insertRow(0);for(var o=this.getCount(),s=0;s<o;s++){var r=this._dataList.getCellInfo(s);""!=r.options.defaultValue&&(this.firstSetting[r.options.id]=!0,this.statusHash[r.options.id]=!0)}}}if(WebSquare.DataCollection.attributeMapInfo[this.id])for(s=0;s<WebSquare.DataCollection.attributeMapInfo[this.id].length;s++){var a=WebSquare.DataCollection.attributeMapInfo[this.id][s];g.D.getComponentById(a).syncWithAttributeMap()}}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.finalize=function(){try{this.activated=!1,this._dataList.id&&WebSquare.DataCollection.api.remove(this._dataList.id)}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.activate=function(){try{if(!this.activated){for(var t in this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),this.addEvent(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&q.B.isEventSupported(this.render,t))e&&e.constructor==Array?q.B.fireSystemEvent(this,t,e[0]):q.B.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),q.B.fireEvent.apply(q.B.fireEvent,s),s[0]=null}}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"==typeof this.systemEventList[t]&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"==typeof this.systemEventList[t]&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.onComplete=function(){
this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},pt.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},pt.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.w.printStackTrace(t,null,this)}},pt.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.w.printStackTrace(t,null,this)}};var gt=function(){};gt.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},gt.prototype.setBroadcast=function(t,e,i){if(!1===t)this._broadCastFlag=t;else if(this._broadCastFlag=!0,!0===e){var o={gridView:[{refreshInstance:!0}],pivot:[{type:"render",refresh:!0}]};if("object"==typeof i)for(var s in i)"object"==typeof i[s]&&i[s].constructor===Array&&(o[s]=i[s].slice(0));var r={linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset"],generalComp:"both"};for(var s in o)r[s].push(o[s]);this.broadcast(r)}},gt.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),WebSquare.DataCollection.stopBroadCast||!this.getBroadcast())return;for(var e in this.childCompHash){if(null!=(i=this.childCompHash[e])&&WebSquare.idCache[i.uuid]&&null!=i.render)switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.options.pluginName){case"gridView":t.gridView&&i[t.gridView[0]].apply(i,t.gridView[1]||[]);break;case"fusionchart":t.fusionChart&&i[t.fusionChart[0]].apply(i,t.fusionChart[1]||[]);break;case"checkcombobox":if(t.checkcombobox){i[t.checkcombobox[0]].apply(i,t.checkcombobox[1]||[]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?i.modelControl.useItemset&&i.refreshItemset(t.mode||"keepIndex"):t.generalComp&&i[t.generalComp[0]].apply(i,t.generalComp[1]||[])}}for(var e in this.refCompHash){var i;if(null!=(i=this.refCompHash[e])&&WebSquare.idCache[i.uuid])switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.options.pluginName){case"linkedDataList":if(t.linkedDataList){i.refresh();break}case"fusionchart":t.fusionChart&&i[t.fusionChart[0]].apply(i,t.fusionChart[1]||[]);break;default:"refresh"!=t.generalComp&&"both"!=t.generalComp||i.modelControl.useRef&&i.refresh()}}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=g.D.getComponentById(e));this.broadcast({gridView:["setDataList"],generalComp:["refreshItemArr"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=g.D.getComponentById(t);if(!e)return;switch(this.childCompHash[t]=e,"stop"!=e.activeStatus||"function"!=typeof e.preActivate||e.skipPreActivate||e.preActivate(),e.options.pluginName||e.initializeType){case"linkedDataList":case"grid":case"gridView":e.setDataList()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=g.D.getComponentById(t);if(!e)return;switch(this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.options.pluginName||e.initializeType){case"grid":case"gridView":e.drawData(0,0);break;default:e.modelControl.useRef&&e.refresh()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.syncWithParent=function(){try{if(this._dataList){if(this.conditionInfo.targetInfo={},this.conditionInfo.keyArray=[],
this.conditionInfo.columnArray=[],this.initialRowIndexArr=[],this.initialFilterList=[],this.filteredRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this.filterManager.clear(),this.filterManager.runFilter(this.conditionInfo.filterInfo.condition),this.filterManager.runSort(this.conditionInfo.sortInfo.condition),this.initialRowIndexArr=this.filteredRowIndexArr.slice(0),this.initialFilterList=this.filterManager.filterArr.slice(0),""==this.conditionInfo.sortInfo.condition&&this.sortStatusInfo)for(var t in this.sortStatusInfo)if(this.sortStatusInfo[t]){var e=this.sortStatusInfo[t].colID,i=this.sortStatusInfo[t].sortOrder;1==i?this.sort(e,0):-1==i&&this.sort(e,1)}this.broadcast({generalComp:["refreshItemArr"]})}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.addChild=function(t){try{this.childCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.refresh=function(t){try{this.successBinding&&(this.syncWithParent(),this.broadcast({gridView:["refresh"],generalComp:"both",mode:t}))}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.refreshRef=function(t){try{this.successBinding&&this.conditionInfo.filterInfo.useRef&&(this.syncWithParent(),this.broadcast({gridView:["refresh"],generalComp:"both",mode:t}))}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||g.D.getBoolean(l.v.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var r=l.v.getConfig(i);s=a.x.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=g.D.getComponentById(i);if(o&&o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},gt.prototype.getID=function(){try{return this.id}catch(t){h.w.printStackTrace(t)}},gt.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e=""),t in this.options&&(this.options[t]=e);var i=this.options.attributeMap;if(i){var o=g.D.getComponentById(i);o&&o.hasKey(t)&&o.set(t,e)}}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRealRowIndex=function(t){return this.filteredRowIndexArr[t]},gt.prototype.getLinkedRowIndex=function(t){return this.getRealRowIndex(t)},gt.prototype.getParentRealRowIndex=function(t){return this.initialRowIndexArr[t]},gt.prototype.getLinkedRealRowIndex=function(t){var e=this.filteredRowIndexArr[t];if("number"==typeof e)for(var i=0;i<this.initialRowIndexArr.length;i++)if(this.initialRowIndexArr[i]===e)return i;return null},gt.prototype.getFilteredRowIndex=function(t){if(this.filteredRowIndexArr[this.filteredRowIndexMap[t]]!==t){this.filteredRowIndexMap={};for(var e=0;e<this.filteredRowIndexArr.length;e++)this.filteredRowIndexMap[this.filteredRowIndexArr[e]]=e}return this.filteredRowIndexMap[t]},gt.prototype.getTotalRow=function(){try{return this.initialRowIndexArr.length}catch(t){h.w.printStackTrace(t)}},gt.prototype.getTotalCol=function(){try{return this._dataList.getTotalCol()}catch(t){h.w.printStackTrace(t)}},
gt.prototype.getRowCount=function(){try{return this.getDataLength()}catch(t){h.w.printStackTrace(t)}},gt.prototype.getCellData=function(t,e){try{var i=this.getRealRowIndex(t);return this._dataList.getCellData(i,e)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getOriginalCellData=function(t,e){try{var i=this.getRealRowIndex(t);return this._dataList.getOriginalCellData(i,e)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getDataLength=function(){return this.filteredRowIndexArr.length},gt.prototype.getColCnt=function(){try{return this._dataList.getColCnt()}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getRowPosition=function(){try{return this.getFilteredRowIndex(this._dataList.getRowPosition())}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setRowPosition=function(t){try{return this._dataList.setRowPosition(this.getRealRowIndex(t))}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getColSum=function(t){try{var e=this.getColData(t);return g.D.sum(e)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getColAvg=function(t){try{var e="",i=this.getColData(t);if(i.length>0){for(var o=0;o<i.length;o++)""==i[o].replace(/^\s+|\s+$/g,"")&&(i[o]="0");e=g.D.sum(i)}return""==e?"":e/i.length}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getColMax=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}return e=null==e?"":e,e=g.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getColMin=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}return e=null==e?"":e,e=g.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getRealRowIndexArr=function(){return this.filteredRowIndexArr.slice(0)},gt.prototype.getColData=function(t){try{for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e.push(this.getCellData(i,t));return e}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRowData=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowData(e)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getDataRow=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getDataRow(e)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getMatchedData=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getMatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowData(l))}return r}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUnmatchedData=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getUnmatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowData(l))}return r}catch(t){h.w.printStackTrace(t)}},gt.prototype.getMatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getMatchedIndex(t,e,o,s,r),l=0;l<n.length;l++){var d=this.getFilteredRowIndex(n[l]);a.push(this.getCellData(d,i))}return a}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUnmatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,o,s,r),l=0;l<n.length;l++){var d=this.getFilteredRowIndex(n[l]);a.push(this.getCellData(d,i))}return a}catch(t){h.w.printStackTrace(t)}},gt.prototype.getFilteredColData=function(t){for(var e=[],i=0;i<this.getDataLength();i++)e.push(this.getCellData(i,t));return e},gt.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,0!=(i=g.D.getBoolean(i))&&(i=!0);var r=this._dataList.getColumnIndex(t),a=this.getFilteredColData(r),n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l],c=this.getRealRowIndex(l)
;1==i?(d===e||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase()===e.toLowerCase())&&n.push(c):(d.indexOf(e)>-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(c)}return n}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0);var r=this._dataList.getColumnIndex(t),a=this.getFilteredColData(r),n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l],c=this.getRealRowIndex(l);1==i?d!==e&&(this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d?d.toLowerCase()!==e.toLowerCase()&&n.push(l):n.push(c)):(d.indexOf(e)<=-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())<=-1)&&n.push(c)}return n}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRangeData=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var s=t;s<=e;s++){var r=this.getRealRowIndex(s);i=i.concat(this.getRowData(r))}return i}catch(t){h.w.printStackTrace(t)}},gt.prototype.getAllData=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.initialRowIndexArr.length;i++)e=e.concat(this._dataList.getRowData(this.initialRowIndexArr[i],t));return e}catch(t){h.w.printStackTrace(t)}},gt.prototype.getAllFilteredData=function(t){this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e=e.concat(this._dataList.getRowData(this.filteredRowIndexArr[i],t));return e},gt.prototype.getColumnDistinctDataArray=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=[],i=[];"string"==typeof t&&(t=this._dataList.bodyIdColIndexMap[t]);for(var o=this._dataList.getCellInfo(t),s=this.getColData(t),r=0;r<s.length;r++){i[s[r]]=1}for(var a in i)e.push(a);return"text"==o.options.dataType?e.sort():e.sort(this.comparator),e}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRangeXML=function(t,e){try{if(t>e){var i=e;e=t,t=i}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var o=[],s=t;s<=e;s++){var r=this.getRealRowIndex(s);o.push(r)}return this._dataList.getArrXML(o)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getMatchedXML=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});var r=this.getMatchedIndex(t,e,i,o,s);return this._dataList.getArrXML(r)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUnmatchedXML=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});var r=this.getUnmatchedIndex(t,e,i,o,s);return this._dataList.getArrXML(r)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRowXML=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowXML(e,{rowStatusNodeName:this.options.rowStatusNodeName})}catch(t){h.w.printStackTrace(t)}},gt.prototype.getAllXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e={id:this.id,initializeType:this.initializeType,baseNode:this.options.baseNode,repeatNode:this.options.repeatNode,idAttribute:this.options.idAttribute,valueAttribute:this.options.valueAttribute,rowStatusNodeName:this.options.rowStatusNodeName};return t&&(e={id:t.id||this.id,initializeType:this.initializeType,baseNode:t.baseNode||this.options.baseNode,repeatNode:""==t.repeatNode||t.repeatNode?t.repeatNode:this.options.repeatNode,idAttribute:""==t.idAttribute||t.idAttribute?t.idAttribute:this.options.idAttribute,valueAttribute:""==t.valueAttribute||t.valueAttribute?t.valueAttribute:this.options.valueAttribute,rowStatusNodeName:""==t.rowStatusNodeName||t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName}),this._dataList.getArrXML(this.initialRowIndexArr,e)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getAllFilteredXML=function(t){this.broadcast({
gridView:["_endEdit"]});var e={id:(t=t||{}).id||this.id,initializeType:this.initializeType,baseNode:t.baseNode||this.options.baseNode,repeatNode:""==t.repeatNode||t.repeatNode?t.repeatNode:this.options.repeatNode,idAttribute:""==t.idAttribute||t.idAttribute?t.idAttribute:this.options.idAttribute,valueAttribute:""==t.valueAttribute||t.valueAttribute?t.valueAttribute:this.options.valueAttribute,rowStatusNodeName:""==t.rowStatusNodeName||t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName};return this._dataList.getArrXML(this.filteredRowIndexArr,e)},gt.prototype.getRowJSON=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowJSON(e,{rowStatusNodeName:this.options.rowStatusNodeName})}catch(t){h.w.printStackTrace(t)}},gt.prototype.getAllJSON=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.initialRowIndexArr.length;i++)e.push(this._dataList.getRowJSON(this.initialRowIndexArr[i],t));return e}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRefAllJSON=function(t){try{return void 0!==t&&null!=t||(t={}),t.exceptEmptyValue=!0,this.getAllJSON(t)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getAllFilteredJSON=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e=e.concat(this._dataList.getRowJSON(this.filteredRowIndexArr[i],t));return e}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRangeJSON=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var s=t;s<=e;s++)i.push(this.getRowJSON(s));return i}catch(t){h.w.printStackTrace(t)}},gt.prototype.getMatchedJSON=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getMatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowJSON(l))}return r}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUnmatchedJSON=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getUnmatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowJSON(l))}return r}catch(t){h.w.printStackTrace(t)}},gt.prototype.getFusionChartData=function(t,e,i){try{var o={},s=(e=e,i.wq_replaceAll("'",'"'));i=(s=JSON.parse(s))[0];switch(this._singleSerises=function(){for(var t=[],s=this.getAllJSON(),r=0;r<s.length;r++){var a={label:s[r][e],value:s[r][i]};t.push(a)}return o.data=t,o},this._multiSerises=function(){(o=this._getFusionChartCategory()).dataset=[];for(var t=0;t<i.length;t++){var e=this._getFusionChartSeriesDate(t);o.dataset.push(e)}return o},this._msStacked=function(){(o=this._getFusionChartCategory()).dataset=[];for(var t=0;t<s.length;t++){i=s[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}o.dataset.push(e)}return o},this._msStackedColumn2DLineDY=function(){(o=this._getFusionChartCategory()).dataset=[];for(var t=0;t<s.length-1;t++){i=s[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}o.dataset.push(e)}o.lineset=[];var n=s.length-1;i=s[n];for(t=0;t<i.length;t++){a=this._getFusionChartSeriesDate(t);o.lineset.push(a)}return o},this._scatter=function(){o.dataset=[];for(var s=this._getUniqueArr(this.getColData(e)),r=0;r<s.length;r++){for(var a={data:[]},n=0;n<this.getRowCount();n++)if(s[r]==this.getCellData(n,e)){var l={};"scatter"==t.toLowerCase()?l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1])}:"bubble"==t.toLowerCase()&&(l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1]),z:this.getCellData(n,i[2])}),a.data.push(l)}a.seriesname=this.getColumnName(s[r]),o.dataset.push(a)}return o},this._zoomLine=function(){if(1==this.getRowCount()){(o={categories:[{category:this.getCellData(0,e)}]}).dataset=[];for(var t=0;t<i.length;t++){var s={}
;s.seriesname=this.getColumnName(i[t]),s.data=this.getCellData(0,i[t]),o.dataset.push(s)}return o}return this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColData(e),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var e,o={};o.data=[];var s=[];if("string"!=typeof i[t]){for(var r in e=i[t].id,o.seriesname=this.getColumnName(e),i[t])if(i[t].hasOwnProperty(r))if(this.hasColumn(i[t][r])&&"id"!=r.toLowerCase()){var a={};a[r]=i[t][r],s.push(a)}else o[r]=i[t][r]}else e=i[t],o.seriesname=this.getColumnName(e);for(var n=0;n<this.getRowCount();n++){for(var l={value:this.getCellData(n,e)},h=0;h<s.length;h++)for(var d in s[h])l[d]=this.getCellData(n,s[h][d]);o.data.push(l)}return o},this._getUniqueArr=function(t){for(var e={},i=[],o=0;o<t.length;o++)void 0===e[t[o]]&&(e[t[o]]=1);for(var o in e)i.push(o);return i},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line2d":case"area":case"ssgrid":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":return this._multiSerises();case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedbar2d":case"stackedbar3d":case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn3dline":case"mscombidy2d":case"mscolumn3dlinedy":case"stackedcolumn3dlinedy":return this._multiSerises();case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"scrollstackedcolumn2d":case"scrollcombi2d":case"scrollcombidy2d":case"stackedcolumn3dlinedy":return this._multiSerises();case"scatter":case"bubble":return this._scatter();case"zoomline":return this._zoomLine();case"msstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRowArray=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowArray(e)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getRowStatusValue=function(t){try{var e=this.getRealRowIndex(t);return this._dataList._getRowStatusValue(e)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getRowStatus=function(t){try{var e=this.getRealRowIndex(t);return this._dataList._getRowStatus(e)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this.getDataLength();i++){var o=this.getRealRowIndex(i);t.indexOf(this._dataList.getRowStatus(o))>-1&&e.push(o)}return e}catch(t){h.w.printStackTrace(t)}},gt.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){h.w.printStackTrace(t)}},gt.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){h.w.printStackTrace(t)}},gt.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){h.w.printStackTrace(t)}},gt.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){h.w.printStackTrace(t)}},gt.prototype.getInsertedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getInsertedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.getInsertedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getInsertedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getInsertedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getInsertedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.getDeletedData=function(){try{this.broadcast({gridView:["_endEdit"]})
;for(var t=[],e=this.getDeletedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.getDeletedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getDeletedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getDeletedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getDeletedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUpdatedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUpdatedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getUpdatedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getUpdatedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.getModifiedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.getModifiedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getModifiedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},gt.prototype.getModifiedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.setCondition=function(t,e){try{switch(t.toLowerCase()){case"filter":this.setFilterCondition(e);break;case"sort":this.setSortCondition(e)}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getFilterCondition=function(){try{return this.conditionInfo.filterInfo.orgCondition}catch(t){h.w.printStackTrace(t,null,this)}return""},gt.prototype.setFilterCondition=function(t){try{"string"==typeof t&&(this.conditionInfo.filterInfo.parse=!1,this.conditionInfo.filterInfo.useRef=!1,this.conditionInfo.filterInfo.condition=t,this.conditionInfo.filterInfo.orgCondition=t,this.conditionInfo.filterInfo.checkVal=!0,this.syncWithParent()),this.broadcast({generalComp:"both",mode:"replace"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setSortCondition=function(t){try{"string"==typeof t&&(this.conditionInfo.sortInfo.parse=!1,this.conditionInfo.sortInfo.condition=t,this.conditionInfo.sortInfo.orgCondition=t,this.syncWithParent()),this.broadcast({generalComp:"both",mode:"replace"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getSortCondition=function(){try{return this.conditionInfo.sortInfo.orgCondition}catch(t){h.w.printStackTrace(t,null,this)}return""},gt.prototype.getObjectType=function(){try{var t=this.initializeType;if("linkedDataList"==t)return t}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setColumnFilter=function(t,e,i,o){try{var s=this._dataList.getColumnIndex(t);if(this.broadcast({gridView:["notifyBeforeSettedColumnFilter"]}),"object"!=typeof arguments[0]||g.D.isString(arguments[0]))this.setFilter({type:"row",colIndex:s,key:e,condition:i,exactMatch:o});else{if("row"!==arguments[0].type&&"func"!==arguments[0].type&&"regExp"!==arguments[0].type)throw new Error("type does not support.[type:"+arguments[0].type+"]");this.setFilter({type:arguments[0].type,colIndex:"string"==typeof arguments[0].colIndex&&"rowstatus()"==arguments[0].colIndex.toLowerCase()?"@rowStatus":arguments[0].colIndex,key:arguments[0].key,condition:arguments[0].condition,exactMatch:arguments[0].exactMatch,param:arguments[0].param,noRefresh:arguments[0].noRefresh,keepTop:arguments[0].keepTop,internal:arguments[0].internal})}this.broadcast({gridView:["notifyAfterSettedColumnFilter"]})}catch(t){
h.w.printStackTrace(t,null,this)}},gt.prototype.removeColumnFilter=function(t,e){try{var i=this.getColumnID(t);this.broadcast({gridView:["notifyBeforeRemovedColumnFilter"]}),this.removeFilter({type:"row",colIndex:"rowstatus()"==t.toLowerCase()?"@rowStatus":i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"func",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"regExp",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!0),this.broadcast({gridView:["notifyAfterRemovedColumnFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.clearSortFilter=function(){try{this.sortStatusInfo={},this.sortStatusArr=[],this.setSortCondition("")}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeColumnFilterAll=function(){try{this.clearFilter()}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getAllNoFilteredData=function(){try{return this._dataList.getAllData()}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setFilter=function(t){try{if(t&&t.noRefresh||this.broadcast({gridView:["notifySaveFocusedCell"]}),"@rowStatus"!=(t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",bodyIdColIndexMap:this.bodyIdColIndexMap,internal:!1},t||{})).colIndex){"string"==typeof t.colIndex&&(t.colIndex=this._dataList.bodyIdColIndexMap[t.colIndex]);var e=(d=this._dataList.getCellInfo(t.colIndex)).options.dataType;t.columnDataType=e}var i=!1;if(t.sortIndex){this.sortStatusInfo={},this.sortStatusArr=[];var o=[],s=[],r=[];o="string"==typeof t.sortIndex?t.sortIndex.wq_trim().split(" "):t.sortIndex,t.sortOrder&&"string"==typeof t.sortOrder?s=t.sortOrder.wq_trim().split(" "):"object"==typeof t.sortOrder&&(s=t.sortOrder),t.dataType&&(r=t.dataType.wq_trim().split(" ")),t.sortIndexArr=[],t.sortOrderArr=[],t.dataTypeArr=[],t.sortIdArr=[],t.numberExtractionValueArr=[];for(var n=0;n<o.length;n++){isNaN(o[n])?t.sortIndexArr.push(this._dataList.bodyIdColIndexMap[o[n]]):t.sortIndexArr.push(parseInt(o[n],10));var l=parseInt(s[n]);isNaN(l)&&(l=1),t.sortOrderArr.push(l),t.dataTypeArr.push(r[n]||"text"),t.sortIdArr.push(this._dataList.getColumnID(t.sortIndexArr[n]));var d,c={},u="true"==(d=this._dataList.getCellInfo(t.sortIdArr[n])).options.numberExtraction;t.numberExtractionValueArr.push(u);var p="number"==d.options.dataType?"number":"text";c.colID=t.sortIdArr[n],c.sortOrder=t.sortOrderArr[n],c.dataType=p,t.dataType!=p&&(t.dataType=p,t.dataTypeArr[n]=p),this.sortStatusInfo[c.colID]=c,this.sortStatusArr.push(c),this.sortStatusArr[c.colID]=c}i=!0}t.numberExtraction=this._dataList.options.numberExtraction;var g=JSON.stringify(this.filteredRowIndexArr),m=t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.addFilter(m,t),t.noRefresh||(this.broadcast({gridView:["notifySettedFilter",[{isSort:i}]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:g,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeFilter=function(t,e){try{t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",internal:!1},t||{}),e=void 0===e||e,"@rowStatus"!=t.colIndex&&"string"==typeof t.colIndex&&(t.colIndex=this.getColumnIndex(t.colIndex));var i=JSON.stringify(this.filteredRowIndexArr),o=t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.deleteFilter(o,t,e),this.broadcast({gridView:["notifyRemovedFilter"],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:i,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.clearFilter=function(t){try{this.filterManager.filterArr=this.initialFilterList.slice(0),this.filteredRowIndexArr=this.initialRowIndexArr.slice(0),t||this.broadcast({
gridView:["notifyClearFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.sort=function(t,e){try{switch(e){case 0:this.setFilter({type:"sort",sortIndex:t,sortOrder:"1",dataType:"text",internal:!0});break;case 1:this.setFilter({type:"sort",sortIndex:t,sortOrder:"-1",dataType:"text",internal:!0});break;case 2:this.clearSortFilter()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.clearSort=function(){try{this.broadcast({gridView:["clearHeaderSort"]}),this.clearSortFilter(),this.broadcast({gridView:["notifySetFocusedCell"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.multisort=function(t){try{var e,i;t.type="sort",t.sortOrder=t.sortOrder||[];var o=typeof t.sortIndex,s=typeof t.sortOrder;"object"==o?e=t.sortIndex:"string"==o&&(e=t.sortIndex.split(" ")),"object"==s?i=t.sortOrder:"string"==s&&(i=t.sortOrder.split(" "));for(var r=0;r<e.length-i.length;r++)i.push(1);var a=[];this.sortStatusInfo={},this.sortStatusArr=[];for(r=0;r<e.length;r++){var n,l={};"string"==(o=typeof e[r])?n=this._dataList.getCellInfo(e[r]):"number"==o&&(n=this._dataList.getCellInfo(this.getColumnID(e[r]))),l.colID=e[r],l.sortOrder=parseInt(i[r]),l.dataType="number"!=n.options.dataType?"text":"number",a.push(l.dataType),this.sortStatusInfo[l.colID]=l,this.sortStatusArr.push(l),this.sortStatusArr[l.colID]=l}t.dataType=a.join(" "),t.internal=!0,this.setFilter(t),this.broadcast({gridView:["drawHeaderSortImages"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getCellInfo=function(t){var e="";return"string"==typeof t?e=t:"number"==typeof t&&(e=this.cellIdList[t]),this.cellInfoHash[e]||{options:{}}},gt.prototype.getColumnCount=function(){return this.cellIdList.length},gt.prototype.getColumnID=function(t){if("string"==typeof t)return t;var e=this.cellIdList[t];return e||null},gt.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},gt.prototype.hasColumn=function(t){try{"number"==typeof t&&(t=this.getColumnID(t));var e=!1;return"number"==typeof this.bodyIdColIndexMap[t]&&(e=!0),e}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getColumnName=function(t){"number"==typeof t&&(t=this.getColumnID(t));var e=this.getCellInfo(t);return e?e.name:""},gt.prototype.getParentRowIndex=function(t){try{if(this.options.depthColumn)for(var e=this.options.depthColumn,i=this.getColumnID(e),o=parseInt(this._getData(this.initialRowIndexArr[t],i)),s=this.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.initialRowIndexArr[s];if(this._getData(r,i)<o)return r}return-1}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyDataChanged=function(){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyCellChanged=function(t,e,i){try{for(var o=!1,s=0;s<this.conditionInfo.columnArray.length;s++)if(this.conditionInfo.columnArray[s]===e){o=!0;break}if(o)this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]});else{var r=this.getFilteredRowIndex(t);"number"==typeof r&&this.broadcast({gridView:["notifySettedCellData",[r,e,i]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"})}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyRowChanged=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyRowRemoved=function(t){try{var e="notifySettedFilter";0==this.getRowCount()&&(e="notifyRemovedAll"),this.broadcast({generalComp:"both",gridView:[e]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyRowInserted=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyRowMoveUp=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})
}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyRowMoveDown=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyRemoveAll=function(t){try{this.broadcast({generalComp:"both",gridView:["notifyRemovedAll"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyReformed=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyDeleteRow=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.notifyRowPositionChanged=function(t){try{this.broadcast({linkedDataList:["refresh"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.restartFilter=function(){try{this.filterManager.restartFilter()}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.restartFilterByCellChanged=function(t,e,i){try{for(var o=!1,s=0;s<this.conditionInfo.columnArray.length;s++)if(this.conditionInfo.columnArray[s]===e){o=!0;break}o&&this.filterManager.restartFilter()}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setMatchIgnoreCase=function(t){try{this.options.matchIgnoreCase=g.D.getBoolean(t)}catch(t){h.w.printStackTrace(t)}},gt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}};var mt=function(t){this.parent=t,this.filterArr=[],this.colArr=[];for(var e=0;e<this.parent._dataList.cellIdList.length;e++){var i=this.parent._dataList.cellIdList[e];this.colArr[i]=i}};mt.prototype.runFilter=function(t){try{this.evaluateFilterCondition(t)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.runSort=function(t){try{this.evaluateSortCondition(t)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.evaluateFilterCondition=function(t){try{if("string"!=typeof t||""==t.trim())return void this.parent.broadcast({gridView:["notifySettedFilter",[{isSort:!1}]]});var e;if(this.parent.conditionInfo.filterInfo.parse)e=this.parent.conditionInfo.filterInfo.condition;else{function o(t,e){t[t.length]=e}function s(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function r(t){return!a(t)&&"("!=t&&")"!=t}function a(t){return"&"===t||"|"===t}function n(t){return t[t.length-1]}function l(t){return 0==t.length}function h(t){return"|"==t?4:"&"==t?3:"("==t?2:")"==t?1:void 0}function d(t,e,i){e=new Array;var d=new Array,c=0;t=u(t);for(var p=0;p<t.length;p++){if(r(t[p])&&(e[c]=t[p],c++),a(t[p])){if("^"!=t[p])for(;!l(d)&&h(t[p])<=h(n(d));)e[c]=n(d),s(d),c++;else for(;!l(d)&&h(t[p])<h(n(d));)e[c]=n(d),s(d),c++;o(d,t[p])}if("("==t[p]&&o(d,t[p]),")"==t[p]){for(;"("!=n(d);)e[c]=s(d),c++;s(d)}}for(;!l(d);)"("==n(d)?s(d):e[e.length]=s(d);var g="";for(p=0;p<e.length;p++)g+=e[p];return 0==i?g:e}function c(t){for(var e=new Array,i="",a=0;a<t.length;a++)if(r(t[a]))o(e,t[a]);else{var n=s(e),l="&"===t[a]?"&&":"|"===t[a]?"||":t[a];i+=""===i?s(e)+l+n:l+n}return""===i?s(e):i}function u(t){for(var e=t.split(""),i=new String(""),o=new Array,s=0,n=0;n<e.length;n++)r(e[n])&&(i+=e[n]),(a(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(o[s]=i,s++),i="",o[s]=e[n],s++),n==e.length-1&&""!=i&&(o[s]=i);return o}var i=t;e="_this.executeLinkedFilter({condition:'and'",""!=t&&(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=c(d(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.trim()).replaceAll('"',"'")).replace(/[\s]*[&][&][\s]*/g,"&")).replace(/[\s]*[|][|][\s]*/g,"|")).replace(/[cC][oO][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[vV][aA][lL][\s]*[(].*[)]/g,(function(t){
return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[rR][eE][fF][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"#LIKE#")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"$LIKE$")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,"@rowStatus")))).wq_replaceAll("!_!","(").wq_replaceAll("_!_",")")).wq_replaceAll("#LIKE#"," NOTLIKE ")).wq_replaceAll("$LIKE$"," LIKE ")).replace(/[\s]*[=][=][\s]*/g,",operator:'E', key:")).replace(/[\s]*[!][=][\s]*/g,",operator:'IE', key:")).replace(/[\s]*[>][=][\s]*/g,",operator:'GTE', key:")).replace(/[\s]*[<][=][\s]*/g,",operator:'LTE', key:")).replace(/[\s]*[>][\s]*/g,",operator:'GT', key:")).replace(/[\s]*[<][\s]*/g,",operator:'LT', key:")).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,",operator:'NOTLIKE', key:")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,",operator:'LIKE', key:")).replace(/[cC][oO][lL][\s]*[(]/g,",colID:_this.getColumnID(")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,",colID:'@rowStatus'")).replace(/[\s]*[&][&][\s]*/g," });_this.executeLinkedFilter({condition:'and'")).replace(/[\s]*[|][|][\s]*/g," });_this.executeLinkedFilter({condition:'or'")).replace(/[vV][aA][lL][\s]*[(]/g,"_this.getComponentValue(")).replace(/[rR][eE][fF][\s]*[(]/g,"_this.getRefValue(")),e=e+t+"});"}try{new Function("_this",e)(this),this.parent.conditionInfo.filterInfo.parse=!0,this.parent.conditionInfo.filterInfo.condition=e}catch(t){try{this.deprecatedEvaluateFilterCondition(i)}catch(t){this.parent.conditionInfo.filterInfo.parse=!1,$l(" filter error "),this.parent.broadcast({gridView:["notifySettedFilter",[{isSort:!1}]]})}}}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.deprecatedEvaluateFilterCondition=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"&"===t||"|"===t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"|"==t?4:"&"==t?3:"("==t?2:")"==t?1:void 0}var l="_this.executeLinkedFilter{ 'and', _this.colArr['";""!=t&&(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=function(t){for(var s=new Array,r="",a=0;a<t.length;a++)if(o(t[a]))e(s,t[a]);else{var n=i(s),l="&"===t[a]?"&&":"|"===t[a]?"||":t[a];r+=""==r?i(s)+l+n:l+n}return""===r?i(s):r}(function(t,l,h){l=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var u=0;u<t.length;u++){if(o(t[u])&&(l[c]=t[u],c++),s(t[u])){if("^"!=t[u])for(;!a(d)&&n(t[u])<=n(r(d));)l[c]=r(d),i(d),c++;else for(;!a(d)&&n(t[u])<n(r(d));)l[c]=r(d),i(d),c++;e(d,t[u])}if("("==t[u]&&e(d,t[u]),")"==t[u]){for(;"("!=r(d);)l[c]=i(d),c++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(u=0;u<l.length;u++)p+=l[u];return 0==h?p:l}(t=(t=(t=(t=(t=(t=(t=(t=t.trim()).replace(/[\s]*[&][&][\s]*/g,"&")).replace(/[\s]*[|][|][\s]*/g,"|")).replace(/[vV][aA][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[rR][eE][fF][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")
}))).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"#LIKE#")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"$LIKE$")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,"@rowStatus")))).wq_replaceAll("!_!","(").wq_replaceAll("_!_",")")).wq_replaceAll("#LIKE#"," NOTLIKE ")).wq_replaceAll("$LIKE$"," LIKE ")).replace(/[vV][aA][lL][\s]*[(]/g,"_this.getComponentValue{")).replace(/[rR][eE][fF][\s]*[(]/g,"_this.getRefValue{")).replace(/[\s]*[=][=][\s]*/g,"'], 'E', ")).replace(/[\s]*[!][=][\s]*/g,"'], 'IE', ")).replace(/[\s]*[>][=][\s]*/g,"'], 'GTE', ")).replace(/[\s]*[<][=][\s]*/g,"'], 'LTE', ")).replace(/[\s]*[>][\s]*/g,"'], 'GT', ")).replace(/[\s]*[<][\s]*/g,"'], 'LT', ")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"'], 'LIKE', ")).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"'], 'NOTLIKE', ")).replace(/[\s]*[&][&][\s]*/g,"); _this.executeLinkedFilter{ 'and', _this.colArr['")).replace(/[\s]*[|][|][\s]*/g,"); _this.executeLinkedFilter{ 'or', _this.colArr['"));var h=(l=(l=(l=l+t+");").replace(/[\s]*[(][\s]*/g,"")).wq_replaceAll("_this.colArr['@rowStatus']","'@rowStatus'")).split(";");l="";for(var d=0;d<h.length;d++)if(""!=h[d]){h[d]=h[d].replace(/[{][\s]*/g,"(");var c=h[d].match(/[(]/g).length;if(c<=h[d].match(/[)]/g).length){h[d]=h[d].replace(/[)][\s]*/g,"");for(var u=0;u<c;u++)h[d]=u==c-1?h[d]+");":h[d]+")"}l+=h[d]}new Function("_this",l)(this),this.parent.conditionInfo.filterInfo.parse=!0,this.parent.conditionInfo.filterInfo.condition=l},mt.prototype.executeLinkedFilter=function(t){try{var e,i,o,s;arguments.length>1?(s=arguments[0],i=arguments[1],o=arguments[2],e=arguments[3]):(s=t.condition,i=t.colID,o=t.operator,e=t.key);var r={type:"row"};switch(r.colIndex=i,r.condition=s,o){case"GT":r.operator=">";break;case"GTE":r.operator=">=";break;case"LT":r.operator="<";break;case"LTE":r.operator="<=";break;case"E":r.operator="==";break;case"IE":r.operator="!=";break;case"LIKE":r.operator="LIKE";break;case"NOTLIKE":r.operator="NOTLIKE"}"*"===e||e===WebSquare.allValue?r.key="":(r.key=e||"",r.exactMatch=!0),this.parent.conditionInfo.keyArray.push(r.key),this.parent.conditionInfo.columnArray.push(r.colIndex),this.parent.setFilter(r)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.evaluateSortCondition=function(t){try{if("string"!=typeof t||""==t.trim())return;var e;this.parent.conditionInfo.sortInfo.parse?e=this.parent.conditionInfo.sortInfo.condition:(e="_this.executeLinkedSort([",""!=t&&(t=(t=(t=(t=(t=(t=t.trim()).replace(/[aA][sS][cC][\s]*[(]/g,"{ order: 1, columns: ")).replace(/[dD][eE][sS][cC][\s]*[(]/g,"{ order: -1, columns: ")).replace(/[)]/g,"")).replace("&&","}, ")).replace("||","}, ")),e=e+t+"}]);");try{new Function("_this",e)(this),this.parent.conditionInfo.sortInfo.parse=!0,this.parent.conditionInfo.sortInfo.condition=e}catch(t){this.parent.conditionInfo.sortInfo.parse=!1,$l(" sort error ")}}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.executeLinkedSort=function(t){try{for(var e={sortIndex:[],sortOrder:[]},i=0;i<t.length;i++)for(var o=t[i],s=o.columns.split(","),r=0;r<s.length;r++)e.sortIndex.push(s[r].trim()),e.sortOrder.push(o.order);e.sortIndex.length>0&&this.parent.multisort(e)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.getRefValue=function(t){try{var e=(t=t.replace("data:","")).split("."),i=g.D.getComponentById(e[0],this.parent.scope_id);if(i)switch(this.parent.conditionInfo.targetInfo[e[0]]||(this.parent.conditionInfo.targetInfo[e[0]]=[]),this.parent.conditionInfo.targetInfo[e[0]].push(e[1]),i.addRefComp(this.parent),this.parent.conditionInfo.filterInfo.useRef=!0,i.initializeType){case"linkedDataList":case"dataList":return i.getCellData(i.getRowPosition(),e[1])||"";case"dataMap":return i.get(e[1])}else{var o=e[0];this.parent.scope_obj&&(this.parent.scope_obj.scope[o]?o=this.parent.scope_obj.scope[o].id:WebSquare.strictMode&&(o=this.parent.scope_id+"_"+o)),WebSquare.DataCollection.api.addRefRelation(this.parent.id,o)}}catch(t){h.w.printStackTrace(t,null,this)}},
mt.prototype.getComponentValue=function(t){try{var e=g.D.getComponentById(t,this.parent.scope_id);if(e)return this.parent.conditionInfo.targetInfo[t]=!0,this.parent.conditionInfo.filterInfo.checkVal=!0,e.dataObjInfo[this.parent.id]=this.parent,e.getValue();this.parent.conditionInfo.filterInfo.checkVal=!1}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.getColumnID=function(t){try{return t}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.getKey=function(t){try{return t}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.useFilter=function(){return 0!=this.filterArr.length},mt.prototype.clear=function(){this.filterArr=[]},mt.prototype.executeAllFilter=function(){for(var t=0;t<this.filterArr.length;t++)this.executeFilter(this.filterArr[t])},mt.prototype.restartFilter=function(){this.parent.initialRowIndexArr=this.parent._dataList.filteredRowIndexArr.slice(0),this.parent.filteredRowIndexArr=this.parent._dataList.filteredRowIndexArr.slice(0);for(var t=0;t<this.parent.initialFilterList.length;t++)this.executeFilter(this.parent.initialFilterList[t]),this.deleteFilterById(this.parent.initialFilterList[t].id,!1);this.parent.initialRowIndexArr=this.parent.filteredRowIndexArr.slice(0);for(t=0;t<this.filterArr.length;t++)this.executeFilter(this.filterArr[t]);this.filterArr=this.parent.initialFilterList.concat(this.filterArr)},mt.prototype.executeFilter=function(t){try{var e=!1;if(">"!=t.options.operator&&">="!=t.options.operator&&"<"!=t.options.operator&&"<="!=t.options.operator&&"!="!=t.options.operator&&"LIKE"!=t.options.operator&&"NOTLIKE"!=t.options.operator||(e=!0),"and"==t.options.condition)this.parent.filteredRowIndexArr=e?t.executeCondition(this.parent.uuid,"and"):t.execute(this.parent.uuid,"and");else if("or"==t.options.condition){var i=e?t.executeCondition(this.parent.uuid,"or"):t.execute(this.parent.uuid,"or");this.parent.filteredRowIndexArr=this.mergeArray(this.parent.filteredRowIndexArr,i)}}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.addFilter=function(t,e){try{if(e.sortIndexArr){for(var i=[],o=0;o<e.sortIdArr.length;o++)i.push(this.parent._dataList.getColumnIndex(e.sortIdArr[o]));e.sortIndexArr=i}var s=null;"row"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedRowFilter(t,e):"user"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedUserFilter(t,e):"cell"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedCellFilter(t,e):"sort"==e.type?(s=new WebSquare.DataCollection.linkedDataList.filter.linkedSortFilter(t,e),this.deleteFilterById("sort^@",!1)):"func"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedFuncFilter(t,e):"regExp"==e.type&&(s=new WebSquare.DataCollection.linkedDataList.filter.linkedRegExpFilter(t,e)),this.executeFilter(s),this.filterArr.push(s)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.deleteFilter=function(t,e,i){void 0===i&&(i=!0);for(var o=[],s=0;s<this.filterArr.length;s++)-1==this.filterArr[s].id.indexOf(t)&&o.push(this.filterArr[s]);if(this.filterArr=o,this.parent.filteredRowIndexArr=this.parent.initialRowIndexArr.slice(0),1==i)for(s=0;s<this.filterArr.length;s++)this.executeFilter(this.filterArr[s])},mt.prototype.mergeArray=function(t,e){for(var i=[],o=[],s=0;s<t.length;s++)i[t[s]]=1;for(s=0;s<e.length;s++)i[e[s]]=1;for(s=0;s<i.length;s++)1===i[s]&&o.push(s);return o},mt.prototype.deleteFilterById=function(t,e){void 0===e&&(e=!0);for(var i=[],o=0;o<this.filterArr.length;o++)-1==this.filterArr[o].id.indexOf(t)&&i.push(this.filterArr[o]);this.filterArr=i},mt.prototype.replacechar=function(t){return"^"==t||"$"==t||"."==t||"["==t||"]"==t||"{"==t||"}"==t||"+"==t||"("==t||")"==t||"|"==t||"\\"==t?"\\"+t:void 0};var ft={linkedRowFilter:function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and",exactMatch:!1},e||{})}};ft.linkedRowFilter.prototype.execute=function(t,e){
for(var i=[],o=WebSquare.idCache[t],s=o._dataList.getColumnIndex(this.options.colIndex),r=o._dataList.cellIdList.length,a="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,n=0;n<a.length;n++){var l=a[n],h="@rowStatus"==this.options.colIndex?o._dataList.rowStatusArr[l]:o._dataList.dataArr[l*r+s];null==h&&(h=""),this.options.exactMatch?h==this.options.key&&i.push(l):h.indexOf(this.options.key)>-1&&i.push(l)}return i},ft.linkedRowFilter.prototype.executeCondition=function(t,e){for(var i=[],o=WebSquare.idCache[t],s=o._dataList.getColumnIndex(this.options.colIndex),r=o._dataList.cellIdList.length,a="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,n=0;n<a.length;n++){var l,h,d=a[n];if("number"==this.options.columnDataType){var c=o._dataList.dataArr[d*r+s];1==this.options.numberExtraction&&(c=(c+="").replace(/[^\+\-\.0-9]/g,"")),l=parseFloat(c,10)||0,h=parseFloat(this.options.key)}else l="@rowStatus"==this.options.colIndex?o._dataList.rowStatusArr[d]:o._dataList.dataArr[d*r+s],h=this.options.key;">"==this.options.operator?l>h&&i.push(d):">="==this.options.operator?l>=h&&i.push(d):"<"==this.options.operator?l<h&&i.push(d):"<="==this.options.operator?l<=h&&i.push(d):"!="==this.options.operator?l!=h&&i.push(d):"LIKE"==this.options.operator?null!=l.match("^(?:"+h.wq_replaceAll("_",".").wq_replaceAll("%",".*")+"$)")&&i.push(d):"NOTLIKE"==this.options.operator&&null==l.match("^(?:"+h.wq_replaceAll("_",".").wq_replaceAll("%",".*")+"$)")&&i.push(d)}return i},ft.linkedUserFilter=function(t,e){this.id=t,this.options=a.x.extend({key:"",condition:"and"},e||{})},ft.linkedUserFilter.prototype.getColumnData=function(t,e,i){var o=WebSquare.idCache[t],s=(i=o._dataList.getColumnIndex(i),o._dataList.cellIdList.length);return o._dataList.dataArr[e*s+i]},ft.linkedUserFilter.prototype.execute=function(t,e){for(var i=this.options.key.replace(/col[\s]*\(/g,"_this.getColumnData(uuid, realRow, "),o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=[],a=0;a<s.length;a++){var n=s[a];new Function("_this","uuid","realRow","return "+i)(this,t,n)&&r.push(n)}return r},ft.linkedCellFilter=function(t,e){this.id=t,this.options=a.x.extend({key:""},e||{})},ft.linkedCellFilter.prototype.execute=function(t,e){for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=o._dataList.oneRowDataLength,a=0;a<s.length;a++)for(var n=s[a],l=0;l<r;l++){var h=o._dataList._getData(n,l);null==h&&(h=""),h.indexOf(this.options.key)>-1&&i.push(n)}return i},ft.linkedSortFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:"",sortIndex:"",sortOrder:"",dataType:"",sortIndexArr:[],sortOrderArr:[],dataTypeArr:[],sortFuncArr:[],sortIdArr:[]},e||{})},ft.linkedSortFilter.prototype.execute=function(t,e){for(var i=WebSquare.idCache[t],o="and"===e?i.filteredRowIndexArr:i.initialRowIndexArr,s=i._dataList.oneRowDataLength,r=o.slice(0).sort((function(t,e){return t-e})),a=this.options,n=i._dataList.dataArr,l=[],h=0;h<r.length;h++)l[h]=r[h]*s;var d=[];for(h=0;h<a.sortIndexArr.length;h++)if(d[h]={},a.sortFuncArr[h])for(var c=0;c<l.length;c++)d[h][r[c]]=n[l[c]+a.sortIndexArr[h]];else if("number"==a.dataTypeArr[h])for(c=0;c<l.length;c++){var u=n[l[c]+a.sortIndexArr[h]];1==a.numberExtractionValueArr[h]&&(u=(u+="").replace(/[^\+\-\.0-9]/g,"")),d[h][r[c]]=Number(u)}else for(c=0;c<l.length;c++)d[h][r[c]]=n[l[c]+a.sortIndexArr[h]]||"";if(1==d.length)if(a.sortFuncArr[0]){var p=a.sortFuncArr[0];m=d[0];r.sort((function(t,e){return p(m[t],m[e])}))}else{var g=a.sortOrderArr[0],m=d[0];r.sort((function(t,e){return m[t]==m[e]?0:m[t]>m[e]?g:-g}))}else r.sort((function(t,e){for(var i=0;i<d.length;i++){var o;if(0!=(o=a.sortFuncArr[i]?a.sortFuncArr[i](d[i][t],d[i][e]):d[i][t]==d[i][e]?0:d[i][t]<d[i][e]?-a.sortOrderArr[i]:a.sortOrderArr[i]))return o}return 0}));return r},ft.linkedFuncFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{})},ft.linkedFuncFilter.prototype.execute=function(t,e){
if("function"!=typeof this.options.key)throw new Error("This key is not a Function.[key:"+this.options.key+"]");for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=0;r<s.length;r++){var a=s[r];this.options.key(o._dataList._getData(a,this.options.colIndex),this.options.param,a)&&i.push(a)}return i},ft.linkedRegExpFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{}),this.regExp=this.options.key},ft.linkedRegExpFilter.prototype.execute=function(t,e){if(!g.D.isRegExp(this.regExp))throw new Error("This key is not a regular expression.[key:"+this.regExp+"]");for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=0;r<s.length;r++){var a=s[r];(o._dataList._getData(a,this.options.colIndex)+"").match(this.regExp)&&i.push(a)}return i};var bt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};a.x.extend(bt.prototype,gt.prototype),bt.filter=ft,bt.linkedFilterController=mt,bt.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.linkedDataList",pluginName:"linkedDataList",baseNode:"list",repeatNode:"map",valueAttribute:"",idAttribute:"",rowStatusNodeName:"rowStatus",JSONPath:""},bt.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType="linkedDataList",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,i)switch(this.elementType){case"XML":this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),"linkedDataList"==this.initializeType&&(this.options.xmlEvents=WebSquare.Parser.parseEvent(i));break;case"JSON":this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="linkedDataList",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){d.k.printLog("id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 linkedDataList를 삭제하고 새로 생성합니다.");var m=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=m}catch(t){m=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),window[WebSquare.noConflict].data[this.id]=this,this.event=new Z.U,this.initializeLinkedDataList(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.initializeLinkedDataList=function(t){try{if(this.element=t,"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute=""),this.options.valueNode=this.options.valueAttribute,this.initialRowIndexArr=[],this.initialFilterList=[],this.filteredRowIndexArr=[],this.filteredRowIndexMap={},this.childCompHash={},this.refCompHash={},this.activated=!1,this.conditionInfo={targetInfo:{},sortInfo:{parse:!1,set:!1},filterInfo:{parse:!1,
set:!1,useRef:!1,checkVal:!0}},"XML"==this.elementType)for(var e=WebSquare.xml.getElementsByTagName(t,"condition",l.v._XML_NAMESPACE.W2),i=0;i<e.length;i++){var o=e[i];switch(o.getAttribute("type")){case"sort":this.conditionInfo.sortInfo.set||(this.conditionInfo.sortInfo.set=!0,this.conditionInfo.sortInfo.condition=WebSquare.xml.getCDataNodeValue(o),this.conditionInfo.sortInfo.orgCondition=this.conditionInfo.sortInfo.condition);break;case"filter":this.conditionInfo.filterInfo.set||(this.conditionInfo.filterInfo.set=!0,this.conditionInfo.filterInfo.condition=WebSquare.xml.getCDataNodeValue(o),this.conditionInfo.filterInfo.orgCondition=this.conditionInfo.filterInfo.condition)}}else this.conditionInfo.sortInfo.set=!0,this.conditionInfo.filterInfo.set=!0,this.conditionInfo.sortInfo.condition=this.element.option.sortCondition,this.conditionInfo.filterInfo.condition=this.element.option.filterCondition,this.conditionInfo.sortInfo.orgCondition=this.conditionInfo.sortInfo.condition,this.conditionInfo.filterInfo.orgCondition=this.conditionInfo.filterInfo.condition;var s=this.options.bind;s=s.replace(/^data:/,""),this.scope_obj&&(this.scope_obj.scope[s]?s=this.scope_obj.scope[s].id:WebSquare.strictMode&&(s=this.scope_id+"_"+s)),this._dataList=g.D.getComponentById(s),this._dataList&&WebSquare.DataCollection.api.isAliasDataCollection(this._dataList)&&(this._dataList=this._dataList.getObj()),WebSquare.DataCollection.api.addChild(this),WebSquare.DataCollection.api.addRelation(this.id,s),this._dataList?this.successBinding||(this.successBinding=!0,this.parent=this._dataList,this.columnPosition=null,this.rowPosition=null,this.oneRowDataLength=this._dataList.oneRowDataLength,this.bodyIdColIndexMap=this._dataList.bodyIdColIndexMap,this.cellInfoHash=this._dataList.cellInfoHash,this.cellIdList=this._dataList.cellIdList,this.structure=this._dataList.structure,this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this._dataList.addChild(this),this.filterManager=new WebSquare.DataCollection.linkedDataList.linkedFilterController(this),this.synchronize(),WebSquare.DataCollection.activated&&this.activate()):($l(this.id+" has been ignored because dataList is null. "),this.successBinding=!1,this._dataList={})}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.finalize=function(){try{this.activated=!1}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.activate=function(){try{if(!this.activated){for(var t in this.refresh(),this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.setDataList=function(){try{if(!this.successBinding){var t=this.options.bind;t=t.replace(/^data:/,""),this.scope_obj&&(this.scope_obj.scope[t]?t=this.scope_obj.scope[t].id:WebSquare.strictMode&&(t=this.scope_id+"_"+t)),this._dataList=g.D.getComponentById(t),this._dataList&&WebSquare.DataCollection.api.isAliasDataCollection(this._dataList)&&(this._dataList=this._dataList.getObj()),this._dataList?(this.successBinding=!0,this.parent=this._dataList,this.columnPosition=null,this.rowPosition=null,this.oneRowDataLength=this._dataList.oneRowDataLength,this.bodyIdColIndexMap=this._dataList.bodyIdColIndexMap,this.cellInfoHash=this._dataList.cellInfoHash,this.cellIdList=this._dataList.cellIdList,this.structure=this._dataList.structure,this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this._dataList.addChild(this),this.filterManager=new WebSquare.DataCollection.linkedDataList.linkedFilterController(this),this.synchronize(),WebSquare.DataCollection.activated&&(this.refresh(),!0===this.conditionInfo.filterInfo.checkVal&&(this.activated=!0))):($l(this.id+" has been ignored because dataList is null. "),this.successBinding=!1,this._dataList={})}}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={
name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"===t&&(t=t.toLowerCase()),this.addEvent(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&q.B.isEventSupported(this.render,t))e&&e.constructor==Array?q.B.fireSystemEvent(this,t,e[0]):q.B.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),q.B.fireEvent.apply(q.B.fireEvent,s),s[0]=null}}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"==typeof this.systemEventList[t]&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"==typeof this.systemEventList[t]&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},bt.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},bt.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.w.printStackTrace(t,null,this)}};var yt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};yt.prototype.defaultOptions={pluginType:"DataCollection.aliasDataList",pluginName:"aliasDataList",scope:""},yt._initImport=function(){WebSquare.DataCollection.aliasDataList.linkFunction()},a.x._initImportList.push("DataCollection.aliasDataList"),yt.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.x.extend({},this.defaultOptions),i&&(l.v.isXML(i)?this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="aliasDataList",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){
if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasDataList")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 aliasDataList를 삭제하고 새로 생성합니다.";d.k.printLog(m),alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="dataList",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptyDataList",{},{elementType:"JSON",option:{}},"dataList"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.refresh=function(t){try{var e=this.options.scope?g.D.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t),this.synchronizeRef(t)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getObj=function(){try{return this._dataComp}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"dataList"===g.D.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}this.broadcast({gridView:["resetDataList"],linkedDataList:["setDataList"],generalComp:["refreshItemset"]})}catch(t){h.w.printStackTrace(t)}},yt.prototype.synchronizeRef=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRef[this.id];if(e)for(var i in e){if(e[i]){this.refCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.refCompHash[i]=o}!0===t.reset&&o&&o.modelControl&&o.modelControl.dataCollectionBinding(o.modelControl.ref)}this.broadcast({gridView:["drawData",[0,0]],generalComp:["refresh"]})}catch(t){h.w.printStackTrace(t)}},yt.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},yt.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.removeChild=function(t){try{
return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.w.printStackTrace(t)}},yt.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.activate=function(){try{this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},yt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},yt.linkFunction=function(){try{for(var t in WebSquare.DataCollection.dataList.prototype)"function"!=typeof WebSquare.DataCollection.dataList.prototype[t]||WebSquare.DataCollection.aliasDataList.prototype[t]||(WebSquare.DataCollection.aliasDataList.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.w.printStackTrace(t,null,this)}};var vt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};vt.prototype.defaultOptions={pluginType:"DataCollection.aliasDataMap",pluginName:"aliasDataMap",scope:""},vt._initImport=function(){WebSquare.DataCollection.aliasDataMap.linkFunction()},a.x._initImportList.push("DataCollection.aliasDataMap"),vt.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.x.extend({},this.defaultOptions),i&&(l.v.isXML(i)?this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="aliasDataMap",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasDataMap")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 aliasDataMap를 삭제하고 새로 생성합니다.";d.k.printLog(m),alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="dataMap",
WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptydataMap",{},{elementType:"JSON",option:{}},"dataMap"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.refresh=function(t){try{var e=this.options.scope?g.D.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t),this.synchronizeRef(t)}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.getObj=function(){try{return this._dataComp}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"dataMap"===g.D.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}}catch(t){h.w.printStackTrace(t)}},vt.prototype.synchronizeRef=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRef[this.id];if(e)for(var i in e){if(e[i]){this.refCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.refCompHash[i]=o}!0===t.reset&&o&&o.modelControl&&o.modelControl.dataCollectionBinding(o.modelControl.ref)}this.broadcast({generalComp:["refresh"]})}catch(t){h.w.printStackTrace(t)}},vt.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},vt.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},vt.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},vt.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},vt.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},vt.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},vt.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.w.printStackTrace(t)}},vt.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.activate=function(){try{this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},vt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){
h.w.printStackTrace(t,null,this)}},vt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},vt.linkFunction=function(){try{for(var t in WebSquare.DataCollection.dataMap.prototype)"function"!=typeof WebSquare.DataCollection.dataMap.prototype[t]||WebSquare.DataCollection.aliasDataMap.prototype[t]||(WebSquare.DataCollection.aliasDataMap.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.w.printStackTrace(t,null,this)}};var wt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};wt.prototype.defaultOptions={pluginType:"DataCollection.aliasLinkedDataList",pluginName:"aliasLinkedDataList",scope:""},wt._initImport=function(){WebSquare.DataCollection.aliasLinkedDataList.linkFunction()},a.x._initImportList.push("DataCollection.aliasLinkedDataList"),wt.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.x.extend({},this.defaultOptions),i&&(l.v.isXML(i)?this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="aliasLinkedDataList",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasLinkedDataList")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 aliasLinkedDataList를 삭제하고 새로 생성합니다.";d.k.printLog(m),alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="linkedDataList",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptyDataList",{},{elementType:"JSON",option:{}},"dataList"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},wt.prototype.refresh=function(t){try{var e=this.options.scope?g.D.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t)}catch(t){h.w.printStackTrace(t,null,this)}},wt.prototype.getObj=function(){try{return this._dataComp}catch(t){h.w.printStackTrace(t,null,this)}},wt.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"linkedDataList"===g.D.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],
(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.w.printStackTrace(t,null,this)}},wt.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}this.broadcast({gridView:["resetDataList"],generalComp:["refreshItemset"]})}catch(t){h.w.printStackTrace(t)}},wt.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},wt.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},wt.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},wt.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},wt.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},wt.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},wt.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.w.printStackTrace(t)}},wt.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.w.printStackTrace(t,null,this)}},wt.prototype.activate=function(){try{this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},wt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},wt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},wt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},wt.linkFunction=function(){try{for(var t in WebSquare.DataCollection.linkedDataList.prototype)"function"!=typeof WebSquare.DataCollection.linkedDataList.prototype[t]||WebSquare.DataCollection.aliasLinkedDataList.prototype[t]||(WebSquare.DataCollection.aliasLinkedDataList.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.w.printStackTrace(t,null,this)}};var St=__webpack_require__(5175),Ct=__webpack_require__(477),_t=__webpack_require__(453),xt=function(t,e,i){et.s.call(this,t,e,i)};a.x.extend(xt.prototype,et.s.prototype),xt.prototype.defaultOptions={pluginType:"uiplugin.body",pluginName:"body",userEvents:["onpageload","onpageunload","onbeforepageunload"],parseChild:!0,useConfig:!0,toolTipSec:10,toolTipNoEffect:!1,tooltipSec:10,tooltipNoEffect:!1,useExternalClass:!1},xt.prototype.initialize=function(t){this.wmodeFrameHash={},this.modal=null,this.toolTipId="",this.toolTip=null,this.toolTipTimer=null,this.tooltipSec=this.options.tooltipSec||this.options.toolTipSec,this.tooltipNoEffect=this.options.tooltipNoEffect||this.options.toolTipNoEffect,this.forceClose=l.v.getConfiguration("/WebSquare/body/layerForceClose/@value"),this.layerListener=new xt.bodyLayerListener,
this.modalStack=[]},xt.prototype.setRender=function(){if(!this.parentControl||"wframe"!=this.parentControl.options.pluginName&&"pageInherit"!=this.parentControl.options.pluginName){this.render=document.body,this.options.useExternalClass&&this.render.className?this.render.className=(this.render.className+" "+this.options.className).wq_trim():this.render.className=this.options.className,WebSquare.w2xTheme&&this.addClass("w5_"+WebSquare.w2xTheme);for(var t=l.v.getChildConfiguration("/WebSquare/browserSelector",{singleMode:!0}),e=0;e<t.length;e++)"className"==t[e]["@tagName"]&&new RegExp(t[e]["@pattern"]).test(navigator.userAgent)&&this.addClass(t[e]["@value"])}else this.render=this.parentControl.render},xt.prototype.setAction=function(){null==this.parentControl&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(){for(var t=self,e=0;e<1e3;e++)try{if(t.parent===t)break;t.parent.WebSquare,t=t.parent}catch(t){break}var i=[t];for(e=0;e<1e4&&!(i.length<=0);e++)for(var o=i.length,s=0;s<o;s++)try{for(var r=i.shift(),a=0;a<r.window.length;a++)i.push(r.frames[a]);try{r.WebSquare&&r!==self&&r.WebSquare.body&&r.WebSquare.body.layerListener.frameClick()}catch(t){h.w.crossOrigin({message:t.message,name:"frameClick"})}r=null}catch(t){h.w.crossOrigin({message:t.message,name:"frameClick"})}for(s=0;s<i.length;s++)i[s]=null;i=null,t=null})))},xt.prototype.toHTML=function(){for(var t=[],e=this.getChildren(),i=0;i<e.length;i++)t.push(e[i].toHTML());return t.join("")},xt.prototype.parseDomToRender=function(t){if(t)for(var e=t.firstChild;null!=e;e=e.nextSibling)1==e.nodeType&&this.parseDomToRender(e)},xt.prototype.showWModeFrame=function(t,e){try{if(!this.render||!e)return;if("menu"==t){if(0==e.childNodes.length)return;var i=e.childNodes,o=i[0].className.split(" ")[0];if(this.wmodeFrameHash[o]=document.getElementById(o+"_wmode_frame"),this.wmodeFrameHash[o]||(this.wmodeFrameHash[o]=document.createElement("iframe"),this.wmodeFrameHash[o].id=o+"_wmode_frame",this.wmodeFrameHash[o].className="w2wmode_frame w2wmode_menuFrame",this.wmodeFrameHash[o].style.position="absolute",this.wmodeFrameHash[o].frameBorder="no","https:"==location.protocol&&(this.wmodeFrameHash[o].src=WebSquare.net.getSSLBlankPage(!0))),this.wmodeFrameHash[o]){var s=this;setTimeout((function(){s.wmodeFrameHash[o].controlID=o,s.wmodeFrameHash[o].style.top=WebSquare.style.getAbsoluteTop(i[0])+"px",s.wmodeFrameHash[o].style.width=i[0].offsetWidth+"px",s.wmodeFrameHash[o].style.height=i[0].offsetHeight+"px",s.wmodeFrameHash[o].style.display="block",s.wmodeFrameHash[o].style.left=WebSquare.style.getAbsoluteLeft(i[0])+"px",s.render.insertBefore(s.wmodeFrameHash[o],e.parentElement)}),1)}}else if(this.wmodeFrameHash[t]=document.getElementById(this.id+"_"+t+"_wmode_frame"),this.wmodeFrameHash[t]||(this.wmodeFrameHash[t]=document.createElement("iframe"),this.wmodeFrameHash[t].id=this.id+"_"+t+"_wmode_frame",this.wmodeFrameHash[t].className="w2wmode_frame",this.wmodeFrameHash[t].style.position="absolute",this.wmodeFrameHash[t].frameBorder="no","https:"==location.protocol&&(this.wmodeFrameHash[t].src=WebSquare.net.getSSLBlankPage(!0))),this.wmodeFrameHash[t]){s=this;setTimeout((function(){s.wmodeFrameHash[t].controlID=e.id,s.wmodeFrameHash[t].style.left=e.offsetLeft+"px",s.wmodeFrameHash[t].style.top=e.offsetTop+"px",s.wmodeFrameHash[t].style.width=e.offsetWidth+"px",s.wmodeFrameHash[t].style.height=e.offsetHeight+"px",s.wmodeFrameHash[t].style.display="block",s.render.insertBefore(s.wmodeFrameHash[t],e)}),1)}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.hideWModeFrame=function(t,e){try{"menu"==t?this.wmodeFrameHash[e]&&this.wmodeFrameHash[e].controlID==e&&(this.wmodeFrameHash[e].style.display="none"):this.wmodeFrameHash[t]&&this.wmodeFrameHash[t].controlID==e&&(this.wmodeFrameHash[t].style.display="none")}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.removeWModeFrame=function(t,e){try{
"menu"==t&&this.wmodeFrameHash[e]&&this.wmodeFrameHash[e].controlID==e&&(document.body.removeChild(this.wmodeFrameHash[e]),delete this.wmodeFrameHash[e])}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.showModal=function(t,e,i){try{return 1===arguments.length&&"object"==typeof arguments[0]?this._showModal(arguments[0]):this._showModal({className:t,popupComponents:e,stackComponents:i})}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype._showModal=function(t){try{var e=t.className||"",i=t.popupComponents||void 0,o=t.stackComponents||void 0,s=t.popupModal;if(this.modal||(this.modal=document.createElement("div"),this.modal.id="_modal",this.modalStack=[],this.modalStackPopupLayer=[],this.stackComponents=null),e?(this.modalStack[this.modalStack.length]=e,this.modal.className=e):(this.modalStack[this.modalStack.length]="w2modal",this.modal.className="w2modal"),this.modal){if(!1!==s&&(this.render.appendChild(this.modal),this.modal.style.display="block"),o)for(var r in null==this.stackComponents&&(this.stackComponents={}),o)if(null==this.stackComponents[r])this.stackComponents[r]=[o[r]];else{if("popup"===r){if((b=this.stackComponents[r].length-1)>=0)for(var a=b;a>=0;a--){if(!(y=WebSquare.idCache[this.stackComponents[r][a].id])&&this.stackComponents[r][a].id)(n=WebSquare.util.getPopup(this.stackComponents[r][a].id))&&(y=n.popupWin);if(y&&y.render&&!0===s){if((c=parseInt(y.getStyleProperty("z-index"),10))==(u=parseInt(g.D.getStyleProperty(this.modal,"z-index"),10)-1))break;y.zIndex=c,y.setStyle("z-index",u)}}}else{var n,d=this.stackComponents[r].length-1;if(!(y=WebSquare.idCache[this.stackComponents[r][d]])&&this.stackComponents[r][d])(n=g.D.getPopup(this.stackComponents[r][d]))&&(y=n.popupWin);if(y&&y.render){var c=parseInt(y.getStyleProperty("z-index"),10),u=parseInt(g.D.getStyleProperty(this.modal,"z-index"),10)-1;y.zIndex=c,y.setStyle("z-index",u)}}this.stackComponents[r].push(o[r])}if(this.wframeSubPopup&&this.wframeSubPopup.length>0)for(var p=0;p<this.wframeSubPopup.length;p++){if((f=WebSquare.idCache[this.wframeSubPopup[p]])&&"visible"===f.getStyle("visibility"))for(var r in f.stackComponents){if(void 0!==f.stackComponents[r])if((b=f.stackComponents[r].length-1)>=0)for(a=b;a>=0;a--){if(!(y=WebSquare.idCache[f.stackComponents[r][a].id])&&f.stackComponents[r][a].id&&(y=g.D.getPopup(f.stackComponents[r][a].id).popupWin),y&&y.render&&this.modal.style.display){if(!((c=parseInt(y.getStyleProperty("z-index"),10))>=(u=parseInt(g.D.getStyleProperty(this.modal,"z-index"),10)-1)))break;y.wframePopupZIndex=c,y.setStyle("z-index",u)}}}}var m=g.D.getPopupList(!0);if(m.length>0)for(p=m.length-1;p>=0;p--){var f;if((f=WebSquare.idCache[m[p]._targetFrameObjUUID])&&"visible"===f.getStyle("visibility")){for(var r in f.stackComponents){var b;if(void 0!==f.stackComponents[r])if((b=f.stackComponents[r].length-1)>=0)for(a=b;a>=0;a--){var y;if(!(y=WebSquare.idCache[f.stackComponents[r][a].id])&&f.stackComponents[r][a].id&&(y=g.D.getPopup(f.stackComponents[r][a].id).popupWin),y&&y.render&&s){if(!((c=parseInt(y.getStyleProperty("z-index"),10))>=(u=parseInt(g.D.getStyleProperty(this.modal,"z-index"),10)-1))||y.wframePopupZIndex)break;y.wframePopupZIndex=c,y.setStyle("z-index",u)}}}if(f._wframePopupModal&&"block"===f._wframePopupModal.render.style.display)break}}var v=!1;try{this.modal.setActive&&(this.modal.setActive(),v=!0)}catch(t){}if(v||(document.activeElement?document.activeElement.blur():this.modal.focus()),g.D.isIE(6)&&(this.modal.style.top=document.documentElement.scrollTop+"px",this.modal.style.left=document.documentElement.scrollLeft+"px",this.modal.style.width=document.documentElement.scrollWidth+"px",this.modal.style.height=document.documentElement.scrollHeight+"px"),(!g.D.isMobile()||g.D.isMobile()&&"hidden"===this.options.mobileModalOverflow)&&this.addClass(document.documentElement,"w2modalopenedbody"),i&&i.length>0){for(a=0;a<i.length;a++){var w=i[a]
;w&&g.D.getComponentById(w).options.pluginName?g.D.getComponentById(w).addClass("w2modal_popupLayer"):$l("[body.showModal]존재하지 않는 WebSquare Component입니다.("+w+")")}this.modalStackPopupLayer[this.modalStackPopupLayer.length]=i}g.D.isMobile()&&"true"==l.v.getConfiguration("/WebSquare/modal/@preventTouch")&&q.B.addListener(this.modal,"ontouchmove",this.handleTouchMove)}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.handleTouchMove=function(t){q.B.preventDefault(t)},xt.prototype.modalEvent=function(t){try{if("true"==l.v.getConfiguration("/WebSquare/modal/@modalFocus"))return;if(this.modal&&t){var e=WebSquare.uiplugin.popup.getPopup(t);if(e&&e.options&&!0===e.options.modalFocus)return;q.B.addListener(this.modal,"onclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})),q.B.addListener(this.modal,"ondblclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()}))}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.hideModal=function(t,e){try{if(this.modal){var i,o=!1;if(null!=this.stackComponents&&!0!==t){var s=!1;for(var r in this.stackComponents){var a=this.stackComponents[r];if(e){for(var n=this.stackComponents[r].length-1;n>=0;n--)if(a[n].id===e){a.splice(n,1),s=!0;break}if(!s)continue}else a.pop(),s=!0;for(n=y=a.length-1;n>=0;n--){0!=n||0!==a.length&&!1!==a[n].modal||(o=!0);var d=a[a.length-1];if("popup"===r&&(d=a[n].id),(v=WebSquare.idCache[d])||(v=g.D.getComponentById(d)),v&&v.render){var c=v.zIndex;isNaN(c)&&(c=""),v.setStyle("z-index",c)}if("popup"!=r||!0===a[n].modal)break}}}if(this.wframeSubPopup&&this.wframeSubPopup.length>0)for(var u=0;u<this.wframeSubPopup.length;u++){if((b=WebSquare.idCache[this.wframeSubPopup[u]])&&"visible"===b.getStyle("visibility"))for(var r in b.stackComponents){if(void 0!==b.stackComponents[r])if((y=b.stackComponents[r].length-1)>=0)for(n=y;n>=0;n--){if(!(v=WebSquare.idCache[b.stackComponents[r][n].id])&&b.stackComponents[r][n].id&&(v=g.D.getPopup(b.stackComponents[r][n].id).popupWin),v&&v.render&&v&&v.render){c=v.wframePopupZIndex;isNaN(c)||(v.setStyle("z-index",c),v.wframePopupZIndex=0)}}}}if(e&&!s||this.modalStack.pop(),this.wframeSubPopup&&this.wframeSubPopup.pop(),0==this.modalStack.length||!0===o)this.modal.style.display="none",(!g.D.isMobile()||g.D.isMobile()&&"hidden"===this.options.mobileModalOverflow)&&this.removeClass(document.documentElement,"w2modalopenedbody");else{var p=this.modalStack[this.modalStack.length-1];this.modal.className=p}if(this.modalStackPopupLayer.length>0){var m=this.modalStackPopupLayer[this.modalStackPopupLayer.length-1];for(n=0;n<m.length;n++){var f=m[n];g.D.getComponentById(f)&&g.D.getComponentById(f).removeClass("w2modal_popupLayer")}this.modalStackPopupLayer.splice(this.modalStackPopupLayer.length-1,1)}if(g.D.isMobile()&&"true"==l.v.getConfiguration("/WebSquare/modal/@preventTouch")&&q.B.removeListener(this.modal,"ontouchmove",this.handleTouchMove),"block"!==this.modal.style.display&&(i=g.D.getPopupList(!0)),i&&i.length>0)for(u=i.length-1;u>=0;u--){var b;if((b=WebSquare.idCache[i[u]._targetFrameObjUUID])&&"visible"===b.getStyle("visibility")){for(var r in b.stackComponents){var y;if(void 0!==b.stackComponents[r])if((y=b.stackComponents[r].length-1)>=0)for(n=y;n>=0;n--){var v;if(!(v=WebSquare.idCache[b.stackComponents[r][n].id])&&b.stackComponents[r][n].id&&(v=g.D.getPopup(b.stackComponents[r][n].id).popupWin),v&&v.render&&v.wframePopupZIndex&&v&&v.render){c=v.wframePopupZIndex;isNaN(c)||(v.setStyle("z-index",c),v.wframePopupZIndex=0)}}}if(!0===b._modal)break}}}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.setToolTip=function(t,e){try{g.D.isMobile()?(q.B.addListener(t,"ontouchstart",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTip(i,t,e)}))),q.B.addListener(t,"ontouchend",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTip(t)})))):(q.B.addListener(t,"onmouseover",this.event.bindAsEventListener(this,(function(i){
WebSquare.getBody().showToolTip(i,t,e)}))),q.B.addListener(t,"onmouseout",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTip(t)}))))}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.setToolTipComp=function(t,e){try{if(void 0===e||""==e)return;g.D.isMobile()?(q.B.addListener(t,"ontouchstart",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTipComp(i,t,e)}))),q.B.addListener(t,"ontouchend",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTipComp(t,e)})))):(q.B.addListener(t,"onmouseover",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTipComp(i,t,e)}))),q.B.addListener(t,"onmouseout",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTipComp(t,e)}))))}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.showToolTip=function(t,e,i){try{if(0==e.tooltipShow||!i)return;if(g.D.isFF()&&e.getAttribute("disabled"))return;if(i.indexOf("javascript:")>-1){var o=i.substring(11,i.length);"function"==typeof(a=g.D.getGlobalFunction(o,this.scope_id))&&(i=a())}if(""==i)return;if(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),this.toolTip||(this.toolTip=new WebSquare.uiplugin.balloonTip(this.id+"_balloonTip"),this.toolTip.writeTo(this),this.toolTip.activate()),this.toolTip){for(var s=this.event.getTargetIterator(t,this.render),r=null;s.next();)if((r="idToUUID"in WebSquare?WebSquare.idCache[WebSquare.idToUUID[s.getElement().getAttribute("id")]]:WebSquare.componentIdCache[s.getElement().getAttribute("id")])&&r.render==s.getElement()||(r=null),r&&r.options&&""!=r.options.tooltip){if((i=r.options.tooltip).indexOf("javascript:")>-1){var a;o=i.substring(11,i.length);"function"==typeof(a=g.D.getGlobalFunction(o,this.scope_id))&&(i=a())}else r.options.useLocale&&r.options.tooltipLocaleRef&&(i=this.getLocaleValue(r.options.tooltipLocaleRef));break}s=null,this._compID=this.uuid,r&&(q.B.fireEvent(r,"ontooltipshow"),this._compID=r.uuid);var n=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,c=WebSquare.style.getAbsoluteLeft(e),u=WebSquare.style.getAbsoluteTop(e),p=WebSquare.style.getSize(e,"height"),m="";if(r.options.tooltipPositionX||r.options.tooltipPositionY){var f=r.render.offsetWidth,b=r.render.offsetHeight,y=20,v=b+3;try{r.options.tooltipPositionX&&(y=r.options.tooltipPositionX.indexOf("cellWidth")>-1||r.options.tooltipPositionX.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+r.options.tooltipPositionX)(f,b):new Function("width","height","return "+r.options.tooltipPositionX)(f,b)),r.options.tooltipPositionY&&(v=r.options.tooltipPositionY.indexOf("cellWidth")>-1||r.options.tooltipPositionY.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+r.options.tooltipPositionY)(f,b):new Function("width","height","return "+r.options.tooltipPositionY)(f,b))}catch(t){d.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+r.id+"]"),h.w.printStackTrace(t,null,this)}c+=y,u+=v}var w=this.tooltipSec;r&&r.options&&r.options.tooltipSec&&(w=parseInt(r.options.tooltipSec));var S=r&&r.options&&r.options.tooltipFormatter?g.D.getGlobalFunction(r.options.tooltipFormatter,r.scope_id):null;m="function"==typeof S?S.call(r,r.id,i):i,this.toolTip.setValue(m);var C=this;try{var _=l.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(_){var x=g.D.getGlobalFunction(_,r.scope_id),I=!0;if("function"==typeof x&&(I=x(r)),!I)return}}catch(t){h.w.printStackTrace(t)}this.toolTipTimer=setTimeout((function(){C.toolTip.show();var t=C.toolTip.render.offsetWidth,e=C.toolTip.render.offsetHeight,i=document.documentElement.clientWidth!=document.body.clientWidth?document.body.clientWidth:document.documentElement.clientWidth;c+t>document.documentElement.scrollLeft/n+i/n-10&&(c=document.documentElement.scrollLeft/n+i/n-t-10);var o=u-e
;o<document.documentElement.scrollTop/n+10&&(o=o<0?u+p+5:document.documentElement.scrollTop/n+10),C.toolTip.setPosition(c,o),WebSquare.style.adjustZIndex(C._compID,C.toolTip.uuid,"toolTip")}),w)}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.showToolTipComp=function(t,e,i){try{if(void 0===i||""==i)return;this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null);var o=g.D.getComponentById(i);if(o){var s=WebSquare.style.getAbsoluteLeft(e),r=WebSquare.style.getAbsoluteTop(e),a=WebSquare.style.getSize(e,"height"),n=WebSquare.style.getSize(e,"width");this.toolTipTimer=setTimeout((function(){o.show();var t=o.render.offsetWidth,e=o.render.offsetHeight;s>document.documentElement.scrollLeft+document.documentElement.clientWidth-s-10&&(s=s+n-t);var i=r-e;i<document.documentElement.scrollTop+10&&(i=i<0?r+a+5:document.documentElement.scrollTop+10),o.setPosition(s,i)}),this.toolTipSec)}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.hideToolTip=function(t){try{if(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),this.toolTip){this.toolTip.hide();var e=this.event.getTargetIterator(t,this.render),i=null,o=e.getElement();null!=o&&((i="idToUUID"in WebSquare?WebSquare.idCache[WebSquare.idToUUID[o.getAttribute("id")]]:WebSquare.componentIdCache[o.getAttribute("id")])&&i.render==o||(i=null)),e=null,o=null,i&&q.B.fireEvent(i,"ontooltiphide")}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.hideToolTipComp=function(t,e){try{var i=g.D.getComponentById(e);i&&(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),i&&i.hide())}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.getLayerListener=function(){try{return this.layerListener}catch(t){h.w.printStackTrace(t,null,this)}},(xt.bodyLayerListener=function(){this.layers={},this.existShow=!1,this.useOtherComponentId={}}).prototype.addListener=function(t){try{var e=!0;for(var i in this.layers){e=!1;break}var o=t.component,s=t.component.id;if(this.layers[s]={component:t.component,show:t.fnShow,hide:t.fnHide,paramHide:t.paramHide,event:t.event,isShow:!1,otherClick:t.otherClick,frameClick:t.frameClick},e&&(WebSquare.getBody().event.addListener(document.documentElement,"onmousewheel",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseWheelEventDocument)),g.D.isMobile()?WebSquare.getBody().event.addListener(document.documentElement,"ontouchstart",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseDownEventDocument)):(WebSquare.getBody().event.addListener(document.documentElement,"onmousedown",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseDownEventDocument)),WebSquare.getBody().event.addListener(window,"onscroll",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleScrollEventDocument)),WebSquare.getBody().event.addListener(window,"onresize",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseWheelEventDocument)))),t.event)for(var r in t.event)o.event.addListener(document.documentElement,r,o.event.bindAsEventListener(o,t.event[r]))}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.show=function(t,e){try{if(this.layers[t]&&"function"==typeof this.layers[t].show){for(var i=this.layers[t].component,o={};i.parentControl;)(i=i.parentControl).id&&(o[i.id]=!0);this.hideAll(o),this.layers[t].show.call(this.layers[t].component,e),this.layers[t].isShow=!0,this.existShow=!0}}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.hide=function(t,e){try{if(this.layers[t]&&"function"==typeof this.layers[t].hide)for(var i in this.layers[t].hide.call(this.layers[t].component,e),this.layers[t].isShow=!1,this.existShow=!1,this.layers)if(this.layers[i].isShow){this.existShow=!0;break}}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.hideAll=function(t){try{for(var e in this.targetHideArr=[],
this.layers)if((!t||!t[e])&&this.layers[e].isShow){var i={};i.id=e,i.param=this.layers[e].paramHide,this.targetHideArr.push(i),this.hide(e,this.layers[e].paramHide)}}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.isExist=function(t){try{return!!this.layers[t]}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.isShow=function(t){try{return!!this.layers[t]&&!!this.layers[t].isShow}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.remove=function(t){try{if(this.layers[t]){for(var e in this.layers[t].event)q.B.removeListener(document.documentElement,e,this.layers[t].event[e]);this.layers[t].component=null,this.layers[t].draw=null,this.layers[t].show=null,this.layers[t].hide=null,this.layers[t].event=null,delete this.layers[t]}}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.removeAll=function(){try{for(var t in this.layers){for(var e in this.layers[t].event)q.B.removeListener(document.documentElement,e,this.layers[t].event[e]);this.layers[t].component=null,this.layers[t].draw=null,this.layers[t].show=null,this.layers[t].hide=null,this.layers[t].event=null,delete this.layers[t]}this.layers={}}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.handleMouseDownEventDocument=function(t){try{if(!this.layerListener.existShow)return;var e,i;g.D.isIE("6 7 8")?(e=document.documentElement.scrollTop,i=document.documentElement.scrollLeft):(e=window.pageYOffset,i=window.pageXOffset),q.B.getMouseX(t)<document.documentElement.clientWidth+i&&q.B.getMouseY(t)<document.documentElement.clientHeight+e&&this.layerListener.hideAll()}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.handleMouseWheelEventDocument=function(t){try{if(!g.D.isMobile()){var e=l.v.getConfiguration("/WebSquare/body/blurAll/@value");if("true"!==e||function(t){for(var e=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,s=t.offsetHeight;t.offsetParent;)e+=(t=t.offsetParent).offsetTop,i+=t.offsetLeft;return e>=(window.pageYOffset||document.documentElement.scrollTop)&&i>=(window.pageXOffset||document.documentElement.scrollLeft)&&e+s<=(window.pageYOffset||document.documentElement.scrollTop)+(window.innerHeight||document.documentElement.clientHeight)&&i+o<=(window.pageXOffset||document.documentElement.scrollLeft)+(window.innerWidth||document.documentElement.clientWidth)}(document.activeElement)||"INPUT"!==document.activeElement.tagName.toUpperCase()||document.activeElement.blur(),g.D.isIE("6 7 8")&&t&&"resize"===t.type.toLowerCase())return}if(!this.layerListener.existShow)return;var i;for(var o in this.layerListener.layers)this.layerListener.layers[o].isShow&&this.layerListener.layers[o].component&&this.layerListener.layers[o].component.render.parentNode&&(i=this.layerListener.layers[o].component.render.parentNode);var s=q.B.getTarget(t);if("true"==this.forceClose||s!=WebSquare.getBody().render&&i!=WebSquare.getBody().render)return void this.layerListener.hideAll();var r,a,n=document.documentElement;if(g.D.isIE("6 7 8")?(r=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):(r=window.pageYOffset,a=window.pageXOffset),0===r||n.scrollHeight-r===n.clientHeight||0===a||n.scrollWidth-a===n.clientWidth)return;this.useWheel=!0,this.layerListener.hideAll()}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.handleScrollEventDocument=function(t){try{var e=this.layerListener.targetHideArr;if(!e||e.length<=0||null==this.useWheel||!this.useWheel)return;for(var i=0;i<e.length;i++)this.layerListener.show(e[i].id,e[i].param);this.layerListener.targetHideArr=[],this.useWheel=!1}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.otherClick=function(t){try{for(var e in this.layers)"function"==typeof this.layers[e].otherClick&&this.layers[e].otherClick.call(this.layers[e].component,t)}catch(t){h.w.printStackTrace(t,null,this)}},xt.bodyLayerListener.prototype.frameClick=function(){try{
for(var t in this.existShow&&this.hideAll(),this.layers)"function"==typeof this.layers[t].frameClick&&this.layers[t].frameClick.call(this.layers[t].component)}catch(t){h.w.printStackTrace(t,null,this)}};var It=__webpack_require__(8072),Tt=__webpack_require__(2819),kt=function(t,e,i){et.s.call(this,t,e,i)};a.x.extend(kt.prototype,et.s.prototype),kt.prototype.defaultOptions={pluginType:"uiplugin.itemTable",pluginName:"itemTable",parentPluginName:"",row:"5",col:"1",submenuSize:"fixed",useRowHover:"true",useColHover:"true",useKey:"true",useHotKey:"true",useCacheData:"true",w2table:"w2table",w2table_main:"w2table_main",w2table_main_depth:"w2table_main_depth",w2table_row:"w2table_row",w2table_col:"w2table_col",w2table_col_over:"w2table_col_over",w2table_col_checkbox:"w2table_col_checkbox",w2table_col_label:"w2table_col_label",w2table_depth:"w2table_depth",w2table_subdepth:"w2table_subdepth",w2table_subdepth_show:"w2table_subdepth_show",w2table_subdepth_hide:"w2table_subdepth_hide",w2table_subdepth_parent:"w2table_subdepth_parent",defaultStyle:"",checkbox:!1,escape:!1,tableRender:"",findItem:!1,keyBufferResetTime:1e3,wheelRows:0,visibleColNum:1,depthColumn:"",depthColumnHeight:0,depthColumnWidth:0,useFindItemFirstKeyChar:!0,noUseUpDownKey:!1},kt.prototype.initialize=function(t){var e=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);var i=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/wheelRows/@value");i&&!isNaN(i)&&(this.options.wheelRows=Number(i)),this.rowCount=this.options.row,this.colCount=this.options.col,this.selectedCell=null,this.data=[],this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"ㅁ",67:"ㅊ",68:"ㅇ",69:"ㄷ",70:"ㄹ",71:"ㅎ",81:"ㅂ",82:"ㄱ",83:"ㄴ",84:"ㅅ",86:"ㅍ",87:"ㅈ",88:"ㅌ",90:"ㅋ"},this.korCharHash2={69:"ㄸ",81:"ㅃ",82:"ㄲ",84:"ㅆ",87:"ㅉ"},this.inputBlurInside=!1,this.itemTableFocus=!1,this._keyIndex=-1,this._directionKeyPressed=!1,this.myhelper=new WebSquare.korHelper},kt.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";return this.options.depthColumn&&(i=this.options.w2table_main_depth+" "),t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='"+this.options.w2table+" "+i+this.options.className+"' tabIndex='0'>"),1==this.options.checkbox&&1==this.options.navBtn&&(t.push("<div id='"+this.id+"_wrapper' aria-expanded='true' "+e+" class='"+this.options.w2table+" "+this.options.className+"' tabIndex='0'></div>"),t.push("<div id='"+this.id+"_btn_div' class='w2checkcombobox_btn_div'></div>")),t.push("</div>"),t.join("")},kt.prototype.addClickEventListener=function(t){this.clickFunc=t},kt.prototype.addKeyDownEventListener=function(t){this.keyDownFunc=t},kt.prototype.addKeyUpEventListener=function(t){this.keyUpFunc=t},kt.prototype.addMouseLeaveEventListener=function(t){this.mouseLeaveFunc=t},kt.prototype.addMouseOverEventListener=function(t){this.mouseOverFunc=t},kt.prototype.addOnchangeListener=function(t){this.onchangeFunc=t},kt.prototype.setItemArr=function(t){var e=[],i="";i=this.options.submenuSize&&"column"!==this.options.submenuSize?"style='table-layout:"+this.options.submenuSize+"; width:0px;'":"style='width:0px'";var o=g.D.getDataPrefix("index"),s=g.D.getDataPrefix("row"),r=g.D.getDataPrefix("col"),a=0,n={},l=1,h=1;if("ul"===this.options.tableRender){var d;d=this.options.depthColumn?this.options.w2table_depth:this.options.w2table_main,e.push("<ul id='"+this.id+"_main' class='"+d+"' role='listbox'>");for(var c=0;c<t.length;++c){var u="",p=""
;!0===t[c]._hidden?(u=" data-wqhidden='true'",p=" w2selectbox_item_hidden"):!0===t[c]._disabled&&(u=" data-wqdisabled='true'",!0!==this.options.checkbox&&(p=" w2selectbox_item_disabled")),a++;var m,f=!1;if(this.options.depthColumn){var b=c>0&&Number(t[c-1]._depth)||1,y=Number(t[c]._depth)||1,v=c<t.length-1&&Number(t[c+1]._depth)||1;if(l=Math.max(y,l),h=y,n[y]||(n[y]=[1,1,1]),y<v&&(f=!0),b<y){var w=this.options.w2table_depth;e.push("<ul class='"+w+"'>")}else if(b>y){for(var S=0;S<b-y;S++)e.push("</li>"),e.push("</ul>"),n[b-S-1][0]+=n[b-S][0]-1;for(var C=y;C<=b;C++)n[C][1]=Math.max(n[C][0],n[C][1]),C===y?(n[C][2]++,n[C][0]=n[C][2]):(n[C][0]=1,n[C][2]=1)}else e.push("</li>"),c>0&&(n[y][0]++,n[y][2]++)}this.options.depthColumn?(m=this.options.w2table_subdepth+" "+this.options.w2table_subdepth_hide,!0===f&&(m=m+" "+this.options.w2table_subdepth_parent)):m=this.options.w2table_col;var _=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'";"checkcombobox"===this.options.parentPluginName?e.push("<li id='"+this.id+"_"+c+"' aria-selected='false' class='"+m+p+"' "+s+"='"+c+"' "+r+"='"+this.options.col+"' "+_+" "+o+"='"+c+"'"+u+">"):e.push("<li class='"+m+p+"' "+_+" "+o+"='"+c+"' "+u+" role='option' aria-selected='false' aria-setsize='"+t.length+"' aria-posinset='"+(c+1)+"' >");for(var x=0;x<1;++x){var I=this.options.escape?this._encode(t[c].label):t[c].label;if("checkcombobox"===this.options.parentPluginName){var T=t[c].value,k=this.id+"_"+c+"_checkbox";e.push("<input type='checkbox' id='"+k+"' class='"+this.options.w2table_col_checkbox+"' value='"+T+"'/>"),e.push("<label id='"+this.id+"_"+c+"' type='checkbox' for='"+k+"' class='"+this.options.w2table_col_label+"' "+r+"='"+x+"' "+o+"='"+c+"'>"),e.push(I),e.push("</label>")}else e.push("<a id='"+this.id+"_"+c+"' "+r+"='"+x+"' "+o+"='"+c+"' href='javascript:void(null)'>"),e.push(I),e.push("</a>")}!0!==f&&e.push("</li>")}e.push("</ul>")}else{e.push("<table id='"+this.id+"_main' "+i+" class='"+this.options.w2table_main+"'>");var D=t.length,L=this.options.visibleColNum;1==L&&this.options.visibleColMax>1&&(L=Math.min(Math.ceil(t.length/this.options.row),this.options.visibleColMax)),L>1?D=Math.ceil(D/L):L=1;for(c=0;c<D;++c){u="",p="";var W="";!0===t[c]._hidden?(u=" data-wqhidden='true'",p=" w2selectbox_item_hidden"):!0===t[c]._disabled&&(u=" data-wqdisabled='true'",!0!==this.options.checkbox&&(p=" w2selectbox_item_disabled",W=" disabled")),a++,e.push("<tr class='"+this.options.w2table_row+p+"' "+s+"='"+c+"'"+u+">");for(x=0;x<L;++x){var A=c*L+x;if(A>=t.length)e.push("<td id='"+this.id+"_"+A+"' role='listitem option' "+_+" class='"+this.options.w2table_col+"' "+r+"='"+x+"' "+s+"='"+c+"'></td>");else{I=this.options.escape?this._encode(t[A].label):t[A].label,T=t[A].value,_=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'";var M="";if(this.options.checkbox&&this.options.editable&&(M=!0===(t[A].checked||t[A].allchecked)?"checked":""),e.push("<td id='"+this.id+"_"+A+"' role='listitem option' aria-setsize='"+t.length+"' aria-posinset='"+(A+1)+"' "+_+" class='"+this.options.w2table_col+"' "+r+"='"+x+"' "+s+"='"+c+"' "+o+"='"+A+"'>"),1==this.options.checkbox){k=this.id+"_"+A+"_checkbox";e.push("<input type='checkbox' id='"+k+"' class='"+this.options.w2table_col_checkbox+"' value='"+T+"' "+M+W+"/>"),e.push("<label type='checkbox' for='"+k+"' class='"+this.options.w2table_col_label+"'>"),e.push(I),e.push("</label>")}else e.push(I);e.push("</td>")}}e.push("</tr>")}e.push("</table>")}var E=!1;if("none"==this.render.style.display&&(this.render.style.display="",E=!0),!0===this.options.navBtn?document.getElementById(this.id+"_wrapper").innerHTML=e.join(""):this.render.innerHTML=e.join(""),1==this.options.checkbox&&1==this.options.navBtn){this.mainTable=this.render.firstChild.firstChild;var q=document.getElementById(this.id)}else this.mainTable=this.render.firstChild;this.dom.td=null,
"ul"===this.options.tableRender?this.dom.tds=this.getDomList("td","li"):this.dom.tds=this.getDomList("td","td");var R=0,N=!1;if(this.options.depthColumn){var F=document.getElementById(this.id+"_main");if(this.options.depthColumnHeight>0)this.setStyle("height",this.options.depthColumnHeight+"px");else{if(1!==h){for(S=0;S<h-1;S++)e.push("</li>"),e.push("</ul>"),n[h-S-1][0]+=n[h-S][0]-1;for(C=1;C<=h;C++)n[C][1]=Math.max(n[C][0],n[C][1]),1===C?(n[C][2]++,n[C][0]=n[C][2]):(n[C][0]=1,n[C][2]=1)}for(var O=F.offsetHeight,B=0,V=0;V<F.childNodes.length;V++){"LI"===(Z=F.childNodes[V]).tagName.toUpperCase()&&B++}var P=O/B,H=1;for(var j in n)H=Math.max(H,n[j][1]);var z=Math.ceil(H*P)+5;this.setStyle("height",Math.max(O,z)+"px")}if(this.options.depthColumnWidth>0)this.setStyle("width",this.options.depthColumnWidth+"px");else{var G=F.offsetWidth;this.setStyle("width",G*l+18+"px")}}else if(L>1){var U=this.mainTable.getElementsByTagName("tr");for(C=0;C<U.length;C++){for(var X=0,K=U[C].getElementsByTagName("td"),Y=0;Y<K.length;Y++){X+=(st=parseInt(WebSquare.style.getStyle(K[Y],"padding-left").wq_replaceAll("px",""),10)||0)+(ot=parseInt(WebSquare.style.getStyle(K[Y],"padding-right").wq_replaceAll("px",""),10)||0);for(var $=K[Y].childNodes,J=0;J<$.length;J++){var Z;if(1===(Z=$[J]).nodeType){var Q=WebSquare.style.getStyle(Z,"margin-left").wq_replaceAll("px",""),tt=WebSquare.style.getStyle(Z,"margin-right").wq_replaceAll("px","");Q="auto"===Q?2:parseInt(Q,10),tt="auto"===tt?2:parseInt(Q,10),X+=Z.offsetWidth+Q+tt+st+ot}else X+=Z.offsetWidth}}R=Math.max(R,X)}this.mainTable.style.width=R+"px",N=!0}else if(this.dom.tds&&this.dom.tds.length>0){P=this.dom.tds[0].offsetHeight;var et=0,it=this.options.row>a?a:this.options.row;this.setStyle("height",it*P+"px"),1==this.options.checkbox&&1==this.options.navBtn&&(q.style.height=it*P+"px");for(Y=0;Y<this.dom.tds.length;Y++){var ot,st=parseInt(WebSquare.style.getStyle(this.dom.tds[Y],"padding-left").wq_replaceAll("px",""),10)||0;et=(ot=parseInt(WebSquare.style.getStyle(this.dom.tds[Y],"padding-right").wq_replaceAll("px",""),10)||0)+st;for(Q=0,tt=0,C=0;C<this.dom.tds[Y].childNodes.length;C++)this.dom.tds[Y].childNodes[C].nodeType==WebSquare.Elem.type.element?(Q=WebSquare.style.getStyle(this.dom.tds[Y].childNodes[C],"margin-left").wq_replaceAll("px",""),tt=WebSquare.style.getStyle(this.dom.tds[Y].childNodes[C],"margin-right").wq_replaceAll("px",""),Q="auto"===Q?2:parseInt(Q,10),tt="auto"===tt?2:parseInt(Q,10),et+=this.dom.tds[Y].childNodes[C].offsetWidth+Q+tt):et+=this.dom.tds[Y].offsetWidth;R<et&&((g.D.isIE("6")||g.D.isIE("7"))&&(et=et+ot+st+Q+tt),R=et)}R+=17,N=!0}N&&(this.maxWidth=R,1==this.options.checkbox&&1==this.options.navBtn&&(q.style.width=R+"px",this.render.firstChild.style.width=R+"px",this.render.firstChild.firstChild.style.width=R+"px"),this.setStyle("width",R+"px"),this.options.useAccessibilityMenu&&(WebSquare.style.setStyle(this.dom.tds[0].parentNode,"padding-left","0px"),WebSquare.style.setStyle(this.dom.tds[0].parentNode,"margin-top","0px"),WebSquare.style.setStyle(this.dom.tds[0].parentNode,"margin-bottom","0px"))),E&&(this.render.style.display="none")},kt.prototype.setAction=function(){this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),g.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,q.B.stopPropagation(t)}catch(t){}}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,q.B.stopPropagation(t)}catch(t){}}))),
1==this.options.navBtn?this.event.addListener(document.getElementById(this.id+"_wrapper"),"onmousewheel",this.event.bindAsEventListener(this,this.handleMouseWheelEvent)):this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMouseWheelEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseLeaveEvent))},kt.prototype.handleMouseWheelEvent=function(t){try{if(g.D.isMobile())return void q.B.stopPropagation(t);var e=null;if(this.options.wheelRows>0){var i=this.dom.tds[0].offsetHeight,o=q.B.getMouseWheelDelta(t);e=i*Math.round(this.options.wheelRows*o)*-1}else t.wheelDelta?e=-1*t.wheelDelta:g.D.isNumber(t.detail)&&(e=50*t.detail);if(e)if(q.B.stopEvent(t),!0===this.options.navBtn){var s=document.getElementById(this.id+"_wrapper");s&&(s.scrollTop=e+s.scrollTop)}else this.render.scrollTop=e+this.render.scrollTop}catch(t){h.w.printStackTrace(t)}},kt.prototype.handleMouseOverEvent=function(t){try{if(this._directionKeyPressed)return;q.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match(this.options.w2table_col)){if("ul"===this.options.tableRender)var i=this.getElementById(this.id).firstChild.childNodes;else i=this.getElementById(this.id).firstChild.firstChild.childNodes;for(var o=0;o<i.length;o++){if("ul"===this.options.tableRender)var s=i[o];else s=i[o].firstChild;this.removeClass(s,this.options.w2table_col_over)}this.selectedCell=e.getElement(),this.addClass(this.selectedCell,this.options.w2table_col_over),this.mouseOverFunc&&this.mouseOverFunc(this.selectedCell)}}catch(t){h.w.printStackTrace(t)}},kt.prototype.handleMouseOutEvent=function(t){try{if(this._directionKeyPressed)return;q.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match(this.options.w2table_col)&&(this.removeClass(e.getElement(),this.options.w2table_col_over),this.selectedCell=null)}catch(t){h.w.printStackTrace(t)}},kt.prototype.handleMouseLeaveEvent=function(t){try{this.mouseLeaveFunc&&this.mouseLeaveFunc(t)}catch(t){h.w.printStackTrace(t)}},kt.prototype.handleClickEvent=function(t){try{q.B.stopPropagation(t);for(var e=!1,i=!1,o=g.D.getDataPrefix("index"),s=this.event.getTargetIterator(t,this.render);s.next();)if(this.options.depthColumn&&s.match(this.options.w2table_subdepth)){var r=s.getElement();this.selectedCell=r,this.addClass(r,this.options.w2table_subdepth_show),this.removeClass(r,this.options.w2table_subdepth_hide);for(var a=[r.parentNode],n=0;n<r.childNodes.length;n++){var l=r.childNodes[n];"UL"===l.tagName.toUpperCase()&&this.hasClass(l,this.options.w2table_depth)&&a.push(l)}for(n=0;n<a.length;n++)for(var d=a[n],c=0;c<d.childNodes.length;c++){var u=d.childNodes[c];"LI"===u.tagName.toUpperCase()&&u!==r&&(this.removeClass(u,this.options.w2table_subdepth_show),this.addClass(u,this.options.w2table_subdepth_hide))}this.fireClick(t),s.stop()}else if(s.match(this.options.w2table_col)){if(this.selectedCell=s.getElement(),this._getCellDisabled()){s.stop();break}var p=this.selectedCell.parentElement;if(p)for(n=0;n<p.childNodes.length;n++){"LI"===(r=p.childNodes[n]).tagName.toUpperCase()&&r.setAttribute("aria-selected","false")}if(this.selectedCell.setAttribute("aria-selected","true"),!this.options.checkbox||e||i)if(this.options.checkbox){f=this.selectedCell.index||this.selectedCell.getAttribute(o);!(m=document.getElementById(this.id+"_"+f+"_checkbox"))||m.disabled||i||this.fireClick(t)}else this.fireClick(t);else{var m,f=this.selectedCell.index||this.selectedCell.getAttribute(o);(m=document.getElementById(this.id+"_"+f+"_checkbox"))&&!m.disabled&&m.click()}
}else s.match(this.options.w2table_col_checkbox)?e=!0:s.match(this.options.w2table_col_label)&&(i=!0)}catch(t){h.w.printStackTrace(t)}},kt.prototype.focus=function(){try{this.inputBlurInside=!0,this.itemTableFocus=!0,"ul"!=this.options.tableRender&&(g.D.isIEAllVersion()||g.D.isSpartan())?g.D.isSpartan()?document.getElementById(this.id).focus():this.render.firstChild.focus():this.render.focus()}catch(t){h.w.printStackTrace(t)}},kt.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex(),o=i=parseInt(i);if(38==e){if(!0!==this.options.noUseUpDownKey){var s=!1;for(o>0?0==--o&&this._getCellHidden(o)&&(o--,s=!0):s=!0;o>=0&&(this._getCellDisabled(o)||this._getCellHidden(o));)o--;o>=0&&this.setSelectedIndex(o),this._keyIndex=s?-1:o,this._directionKeyPressed=!0}}else if(40==e){if(!0!==this.options.noUseUpDownKey){var r=this.getItemCount();s=!1;for(o+1<r?++o+1==r&&this._getCellHidden(o)&&(o++,s=!0):s=!0;o+1<=r&&(this._getCellDisabled(o)||this._getCellHidden(o));)o++;o<r&&this.setSelectedIndex(o),this._keyIndex=s?r:o,this._directionKeyPressed=!0}}else if(32==e){if(this.options.checkbox&&!this._getCellDisabled(o)&&i>=0)document.getElementById(this.id+"_"+i+"_checkbox").click()}else if(33==e){for((o=i-this.rowCount)<0&&(o=0);o>0&&this._getCellDisabled(o)||this._getCellHidden(o);)o--;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(34==e){for((o=i+this.rowCount)>=this.getItemCount()&&(o=this.getItemCount()-1);o+1<r&&this._getCellDisabled(o)||this._getCellHidden(o);)o++;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(35==e){for(o=this.getItemCount()-1;o>0&&this._getCellDisabled(o)||this._getCellHidden(o);)o--;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(36==e){for(o=0;o+1<r&&this._getCellDisabled(o)||this._getCellHidden(o);)o++;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(13==e)this.options.checkbox||this._getCellDisabled(o)||(this._directionKeyPressed=!1,this.fireClick(t));else if(9==e){if("ul"==this.options.tableRender)if(t.shiftKey)if(i>0){for(;0<=i-1&&this._getCellDisabled(i-1)||this._getCellHidden(i-1);)0===--i&&(this.endReached=!0);i>0&&this.setSelectedIndex(i-1)}else this.endReached=!0;else{r=this.getItemCount();if(document.activeElement==this.render){for(o=0;o+1<r&&this._getCellDisabled(o)||this._getCellHidden(o);)o++;this.setSelectedIndex(o)}else if(o+1<r){for(o++;o+1<=r&&this._getCellDisabled(o)||this._getCellHidden(o);)++o===r&&(this.endReached=!0);o<r&&this.setSelectedIndex(o)}else this.endReached=!0}}else this.findItemStartedWithKeyChar(t,e),this.options.findItem&&this._keyBuffer&&(g.D.clearTimeout(this.id+"_selectKeyBuffer"),g.D.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime}));this.render.setAttribute("aria-activedescendant",this.id+"_"+this.getSelectedIndex());var a=g.D.getDataPrefix("index");if(this.keyDownFunc){if(this.selectedCell){if(this._getCellDisabled())return;void 0===(i=this.selectedCell.index)&&(i=this.selectedCell.getAttribute(a))}this.keyDownFunc.call(this,t,i)}q.B.stopEvent(t)}catch(t){h.w.printStackTrace(t)}},kt.prototype.handleKeyupEvent=function(t){try{if(this._directionKeyPressed=!1,this.keyUpFunc&&!this.options.checkbox){var e;if(this.selectedCell){if(this._getCellDisabled())return;e=this.selectedCell.index;var i=g.D.getDataPrefix("index");void 0===e&&(e=this.selectedCell.getAttribute(i))}this.keyUpFunc.call(this,t,e)}}catch(t){h.w.printStackTrace(t)}},kt.prototype.setSelectedIndex=function(t,e){if(this.dom.tds&&0!==this.dom.tds.length){e=e||{};if(t=t<0?0:t>=this.dom.tds.length?this.dom.tds.length-1:t,this.removeClass(this.selectedCell,this.options.w2table_col_over),this.selectedCell=this.dom.tds[t],this.addClass(this.selectedCell,this.options.w2table_col_over),"ul"==this.options.tableRender&&this.selectedCell.childNodes[0]&&this.selectedCell.childNodes[0].focus(),
this.selectedCell.offsetTop>this.render.offsetHeight/2){var i=Math.min(this.getItemCount(),this.rowCount),o=this.dom.tds[t-parseInt(i/2)];this.render.scrollTop=o.offsetTop}else this.render.scrollTop=0;this.onchangeFunc&&!0!==e.noChangeFunc&&this.onchangeFunc(t)}},kt.prototype.getItemCount=function(){return this.dom.tds?this.dom.tds.length:0},kt.prototype.fireClick=function(t){try{var e;if(this.selectedCell){if(this._getCellDisabled())return;e=this.selectedCell.index;var i=g.D.getDataPrefix("index");void 0===e&&(e=this.selectedCell.getAttribute(i))}this.clickFunc.call(this,t,e)}catch(t){h.w.printStackTrace(t)}},kt.prototype._getCellDisabled=function(t){try{var e;return(e=isNaN(t)?this.selectedCell:this.dom.tds[t])&&(e.getAttribute("data-wqdisabled")||e.parentNode.getAttribute("data-wqdisabled"))}catch(t){h.w.printStackTrace(t)}},kt.prototype._getCellHidden=function(t){try{var e;return(e=isNaN(t)?this.selectedCell:this.dom.tds[t])&&(e.getAttribute("data-wqhidden")||e.parentNode.getAttribute("data-wqhidden"))}catch(t){h.w.printStackTrace(t)}},kt.prototype.findItemStartedWithKeyChar=function(t,e){try{if(!1===this.options.useFindItemFirstKeyChar)return;var i=this.keyCharHash[e],o=-1;if(i){var s=this.selectedCell?this.selectedCell.index:-1;this.options.findItem&&(s=0);var r=g.D.getDataPrefix("index");void 0===s&&this.selectedCell&&!this._getCellDisabled()&&(s=this.selectedCell.getAttribute(r));var a=this.korCharHash[e],n=this.korCharHash2[e],l=1;for(this.options.findItem?this._keyBuffer+=i:(this._keyBuffer=i,s++);;)if(s%=this.dom.tds.length,"none"!==this.dom.tds[s].style.display)if(0!=s||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=s&&1!=s||!0!==this.options.chooseOption||!0!==this.options.allOption){var d=this.dom.tds[s].innerHTML.toLowerCase(),c=!1;a&&!t.shiftKey?c=this.myhelper.startWith(d,a):n&&t.shiftKey&&(c=this.myhelper.startWith(d,n));var u=this.options.findItem?this._keyBuffer:i;if(d.startsWith(u)||c&&g.D.getBoolean(this.options.findItemKor)){o=s;break}if(d.startsWith(u)){this._keyBuffer="",o=s;break}if(l>this.dom.tds.length)break;s++,l++}else{if(this.dom.tds.length<=2)break;s++}else{if(this.dom.tds.length<=1)break;s++}else s++;o>-1?this.setSelectedIndex(o):this._keyBuffer=""}}catch(t){h.w.printStackTrace(t)}},kt.prototype.getSelectedIndex=function(){try{var t=-1;try{if(this.selectedCell&&void 0===(t=this.selectedCell.index)){var e=g.D.getDataPrefix("index");t=this.selectedCell.getAttribute(e)}}catch(t){}return t}catch(t){h.w.printStackTrace(t,null,this)}},kt.prototype.hide=function(){try{this.itemTableFocus=!1,WebSquare.style.hide(this.render)}catch(t){h.w.printStackTrace(t)}},kt.prototype.getFocusedComponentId=function(){try{return this.id.split("_")[0]}catch(t){h.w.printStackTrace(t)}},kt.prototype._encode=function(t){var e=t;try{var i=WebSquare.idCache[this.options.parent_uuid];return e=i&&"function"==typeof i._encode?i._encode(t):WebSquare.xml._encode(t)}catch(t){return h.w.printStackTrace(t,null,this),e}};var Dt=function(t,e,i){et.s.call(this,t,e,i)};a.x.extend(Dt.prototype,et.s.prototype),Dt.prototype.defaultOptions={pluginType:"uiplugin.gridItemTable",pluginName:"gridItemTable"},Dt.prototype.initialize=function(t){try{var e=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);for(var i=[],o=[],s=0;s<this.options.itemsetObj.items.length;s++)if(this.options.itemsetObj.items[s].style){for(var r=this.options.itemsetObj.items[s].style.split(";"),a=!1,n=!1,d=0;d<r.length;d++){if("width"==(u=r[d].split(":"))[0].wq_trim()?(i.push(parseInt(u[1],10)),a=!0):"text-align"==u[0].wq_trim()&&(o.push(u[1]),n=!0),a&&n)break}a||i.push(70),n||o.push("center")}else i.push(70),o.push("center");var c=[];for(s=0;s<this.options.itemsetObj.items.length;s++)if(this.options.itemsetObj.items[s].headerStyle){for(r=this.options.itemsetObj.items[s].headerStyle.split(";"),d=0;d<r.length;d++){var u;if("text-align"==(u=r[d].split(":"))[0].wq_trim()){c.push(u[1]);break}}
d==r.length&&c.push("center")}var p=[];for(s=0;s<this.options.itemsetObj.items.length;s++){"true"==this.options.itemsetObj.items[s].hidden?p.push("true"):p.push("false")}for(s=0;s<this.options.itemsetObj.items.length;s++)this.options.itemsetObj.items[s].id||(this.options.itemsetObj.items[s].id=this.id+"_column_body_"+s);this.options.gridOptions.visibleRowNum||(this.options.gridOptions.visibleRowNum=this.options.visibleRowNum),this.options.gridOptions.rowNumVisible||(this.options.gridOptions.rowNumVisible=!1),this.options.gridOptions.wheelStop||(this.options.gridOptions.wheelStop=!1),this.options.gridOptions.rowStatusVisible||(this.options.gridOptions.rowStatusVisible=!1),this.options.gridOptions.selectedRowColor||(this.options.gridOptions.selectedRowColor=""),this.options.gridOptions.rowMouseOverColor||(this.options.gridOptions.rowMouseOverColor=""),this.options.gridOptions.tooltipDisplay||(this.options.gridOptions.tooltipDisplay=!1),this.options.gridOptions.tooltipFormatter||(this.options.gridOptions.tooltipFormatter=""),this.options.gridOptions.tooltipShowAlways||(this.options.gridOptions.tooltipShowAlways=!1),this.options.gridOptions.applyAllColumnStyle||(this.options.gridOptions.applyAllColumnStyle=!0),this.options.rowNumVisible=this.options.gridOptions.rowNumVisible,this.options.rowStatusVisible=this.options.gridOptions.rowStatusVisible,this.options.wheelStop=this.options.gridOptions.wheelStop,this.options.tooltipDisplay=this.options.gridOptions.tooltipDisplay,this.options.tooltipFormatter=this.options.gridOptions.tooltipFormatter,this.options.tooltipShowAlways=this.options.gridOptions.tooltipShowAlways,this.options.applyAllColumnStyle=this.options.gridOptions.applyAllColumnStyle,this.options.initFixedHeightByRowNum=this.options.gridOptions.initFixedHeightByRowNum=-1;var m="position : absolute;";!this.options.gridOptions.width&&this.options.gridOptions.parentWidth?this.options.width=parseInt(this.options.gridOptions.parentWidth,10):this.options.width=parseInt(this.options.gridOptions.width,10),this.options.height=parseInt(this.options.gridOptions.height,10);try{isNaN(this.options.height)&&(this.options.height=20*this.options.gridOptions.visibleRowNum),isNaN(this.options.width)&&(this.options.width=g.D.sum(i)+18)}catch(t){h.w.printStackTrace(t,null,this)}m+=" width : "+this.options.width+"px;",m+=" height : "+this.options.height+"px;",this.options.style=m;var f=[];f.push('<w2:grid xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" '),f.push('id="'+this.id+'_grid" style="'+this.options.style+'" class="w2gridItemTable_main" readOnly="true" sortable="false" '),f.push('focusMode="row" enterKeyMove="none" rowStatusVisible="'+this.options.rowStatusVisible+'" rowNumVisible="'+this.options.rowNumVisible+'" rowMouseOver="'+this.options.gridOptions.rowMouseOver+'" visibleRowNum="'+this.options.gridOptions.visibleRowNum+'" autoFit="'+this.options.gridOptions.autoFit+'" hideHeader="'+this.options.gridOptions.hideHeader+'" rowMouseOverColor="'+this.options.gridOptions.rowMouseOverColor+'" selectedRowColor="'+this.options.gridOptions.selectedRowColor+'" tooltipDisplay="'+this.options.gridOptions.tooltipDisplay+'" tooltipFormatter="'+this.options.gridOptions.tooltipFormatter+'" tooltipShowAlways="'+this.options.gridOptions.tooltipShowAlways+'" applyAllColumnStyle="'+this.options.gridOptions.applyAllColumnStyle+'" initFixedHeightByRowNum="'+this.options.gridOptions.initFixedHeightByRowNum+'" wheelStop="'+this.options.gridOptions.wheelStop+'">'),f.push('<w2:header style="height:20px;" id="header">'),f.push("<w2:row>");for(s=0;s<this.options.itemsetObj.items.length;s++)f.push('<w2:column inputType="text" style="height:20px;" width="'+i[s]+'" textAlign="'+c[s]+'" id="'+this.id+"_column_header_"+s+'" value="'+(this.options.itemsetObj.items[s].header||"")+'" sortable="false">'),f.push("</w2:column>");f.push("</w2:row>"),
f.push("</w2:header>"),f.push('<w2:gBody id="gBody">'),f.push("<w2:row>");for(s=0;s<this.options.itemsetObj.items.length;s++)f.push('<w2:column inputType="text" style="height:20px;" width="'+i[s]+'" textAlign="'+o[s]+'" id="'+this.options.itemsetObj.items[s].id+'" hidden="'+p[s]+'" sortable="false">'),f.push("</w2:column>");f.push("</w2:row>"),f.push("</w2:gBody>"),f.push("</w2:grid>");var b=WebSquare.xml.parse(f.join(""),!0),y=WebSquare.xmljs.xml2json(b).E[0];this.grid=new WebSquare.uiplugin.grid(this.id+"_grid",{},y),this.addControl(this.grid),this.grid.options.isItemTable=!0,this.inputBlurInside=!1}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='w2gridItemTable "+this.options.className+"'>"),t.push(this.grid.toHTML()),t.push("</div>"),t.join("")},Dt.prototype.setAction=function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,q.B.stopPropagation(t)}catch(t){}}))),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,(function(t){try{q.B.stopPropagation(t)}catch(t){}})))},Dt.prototype.setFocusedCell=function(t,e){this.inputBlurInside=!0,this.itemTableFocus=!0,this.grid.setFocusedCell(t,e)},Dt.prototype.setSelectedIndex=function(t,e){var i=this.grid.getDataLength();if(0!=i){t=t<0?0:t>=i?i-1:t;for(var o=0;o<this.grid._dataList.filteredRowIndexArr.length;o++)if(t==this.grid._dataList.filteredRowIndexArr[o]){t=o;break}var s=this.grid.getVisibleRowNum(),r=t-parseInt(s/2);this.grid.setTopRowIndex(r),e||this.setFocusedCell(t,0)}},Dt.prototype.hide=function(){try{this.inputBlurInside=!1,this.itemTableFocus=!1,WebSquare.style.hide(this.render)}catch(t){h.w.printStackTrace(t)}};var Lt=function(t,e,i){et.s.call(this,t,e,i)};a.x.extend(Lt.prototype,et.s.prototype),Lt.prototype.defaultOptions={pluginType:"uiplugin.gridViewItemTable",pluginName:"gridViewItemTable"},Lt.prototype.addKeyDownEventListener=function(t){this.keyDownFunc=t},Lt.prototype.addClickEventListener=function(t){this.clickFunc=t},Lt.prototype.initialize=function(t){try{var e=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);var i=[],o=[];this.searchFlag=!1;var s=null;if(this.options.gridViewOptions.dataComp){for(var r=this.options.gridViewOptions.dataComp.cellIdList,a=[],n=0;n<r.length;n++){var d={};d.id=r[n],a.push(d)}var c=this.id+"_searchDataList";0==this.searchFlag&&(WebSquare.api.data.create({id:c,type:"dataList",option:{baseNode:"vactor",repeatNode:"list",valueAttribute:""},columnInfo:a}),this.searchFlag=!0),(s=g.D.getComponentById(c)).setData(this.options.gridViewOptions.dataComp.getAllData())}var u=["font-weight","font-size","font-style","background-color","text-decoration","color"];for(n=0;n<this.options.itemsetObj.items.length;n++)if(this.options.itemsetObj.items[n].style){for(var p=this.options.itemsetObj.items[n].style.split(";"),m=!1,f=!1,b=[],y=0;y<p.length;y++){if("width"==(S=p[y].split(":"))[0].wq_trim())i.push(parseInt(S[1],10)),m=!0;else if("text-align"==S[0].wq_trim())o.push(S[1]),f=!0;else{var v=S[0].wq_trim();u.indexOf(v)>-1&&b.push(p[y])}if(m&&f)break}m||i.push(70),f||o.push("center"),b||(this.options.itemsetObj.items[n].style=b.join(";"))}else i.push(70),o.push("center");var w=[];for(n=0;n<this.options.itemsetObj.items.length;n++)if(this.options.itemsetObj.items[n].headerStyle){for(p=this.options.itemsetObj.items[n].headerStyle.split(";"),b=[],y=0;y<p.length;y++){var S;if("text-align"==(S=p[y].split(":"))[0].wq_trim()){w.push(S[1]);break}v=S[0].wq_trim();u.indexOf(v)>-1&&b.push(p[y])}b||(this.options.itemsetObj.items[n].headerStyle=b.join(";")),y==p.length&&w.push("center")}else w.push("center");var C=[];for(n=0;n<this.options.itemsetObj.items.length;n++){
"true"==this.options.itemsetObj.items[n].hidden?C.push("true"):C.push("false")}for(n=0;n<this.options.itemsetObj.items.length;n++)this.options.itemsetObj.items[n].id||(this.options.itemsetObj.items[n].id=this.id+"_column_body_"+n);this.options.gridViewOptions.visibleRowNum||(this.options.gridViewOptions.visibleRowNum=this.options.visibleRowNum),this.options.gridViewOptions.rowNumVisible||(this.options.gridViewOptions.rowNumVisible=!1),this.options.gridViewOptions.wheelStop||(this.options.gridViewOptions.wheelStop=!1),this.options.gridViewOptions.rowStatusVisible||(this.options.gridViewOptions.rowStatusVisible=!1),this.options.gridViewOptions.selectedRowColor||(this.options.gridViewOptions.selectedRowColor=""),this.options.gridViewOptions.rowMouseOverColor||(this.options.gridViewOptions.rowMouseOverColor=""),this.options.gridViewOptions.tooltipDisplay||(this.options.gridViewOptions.tooltipDisplay=!1),this.options.gridViewOptions.tooltipFormatter||(this.options.gridViewOptions.tooltipFormatter=""),this.options.gridViewOptions.tooltipShowAlways||(this.options.gridViewOptions.tooltipShowAlways=!1),this.options.gridViewOptions.applyAllColumnStyle||(this.options.gridViewOptions.applyAllColumnStyle=!0),this.options.rowNumVisible=this.options.gridViewOptions.rowNumVisible,this.options.rowStatusVisible=this.options.gridViewOptions.rowStatusVisible,this.options.wheelStop=this.options.gridViewOptions.wheelStop,this.options.tooltipDisplay=this.options.gridViewOptions.tooltipDisplay,this.options.tooltipFormatter=this.options.gridViewOptions.tooltipFormatter,this.options.tooltipShowAlways=this.options.gridViewOptions.tooltipShowAlways,this.options.applyAllColumnStyle=this.options.gridViewOptions.applyAllColumnStyle,this.options.initFixedHeightByRowNum=this.options.gridViewOptions.initFixedHeightByRowNum=-1;var _="position : absolute;";!this.options.gridViewOptions.width&&this.options.gridViewOptions.parentWidth?this.options.width=this.options.gridViewOptions.parentWidth:this.options.width=this.options.gridViewOptions.width,this.options.height=this.options.gridViewOptions.height;try{isNaN(parseInt(this.options.height,10))&&(this.options.height=20*this.options.gridViewOptions.visibleRowNum),isNaN(parseInt(this.options.width,10))&&(this.options.width=g.D.sum(i)+18)}catch(t){h.w.printStackTrace(t,null,this)}this.options.width+="",this.options.height+="",_+=" width : "+(-1!==this.options.width.indexOf("%")?this.options.width+";":parseInt(this.options.width,10)+"px;"),_+=" height : "+(-1!==this.options.height.indexOf("%")?this.options.height+";":parseInt(this.options.height,10)+"px;"),this.options.style=_;var x=[];x.push('<w2:gridView xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" '),x.push('id="'+this.id+'_gridView" style="width:100%; height:100%;" class="w2gridViewItemTable_main" readOnly="false" sortable="false" '),x.push('focusMode="row" enterKeyMove="none" rowStatusVisible="'+this.options.rowStatusVisible+'" rowNumVisible="'+this.options.rowNumVisible+'" rowMouseOver="'+this.options.gridViewOptions.rowMouseOver+'" visibleRowNum="'+this.options.gridViewOptions.visibleRowNum+'" autoFit="'+this.options.gridViewOptions.autoFit+'" hideHeader="'+this.options.gridViewOptions.hideHeader+'" rowMouseOverColor="'+this.options.gridViewOptions.rowMouseOverColor+'" selectedRowColor="'+this.options.gridViewOptions.selectedRowColor+'" tooltipDisplay="'+this.options.gridViewOptions.tooltipDisplay+'" tooltipFormatter="'+this.options.gridViewOptions.tooltipFormatter+'" tooltipShowAlways="'+this.options.gridViewOptions.tooltipShowAlways+'" applyAllColumnStyle="'+this.options.gridViewOptions.applyAllColumnStyle+'" initFixedHeightByRowNum="'+this.options.gridViewOptions.initFixedHeightByRowNum+'" wheelStop="'+this.options.gridViewOptions.wheelStop+'">'),x.push('<w2:header style="height:20px;" id="header">'),x.push("<w2:row>")
;for(n=0;n<this.options.itemsetObj.items.length;n++){var I=' style="height:20px;';(T=this.options.itemsetObj.items[n]).headerStyle&&(I+=this.options.itemsetObj.items[n].headerStyle),x.push('<w2:column inputType="text"'+I+'" width="'+i[n]+'" textAlign="'+w[n]+'" id="'+this.id+"_column_header_"+n+'" value="'+(this.options.itemsetObj.items[n].header||"")+'">'),x.push("</w2:column>")}x.push("</w2:row>"),x.push("</w2:header>"),x.push('<w2:gBody id="gBody">'),x.push("<w2:row>");for(n=0;n<this.options.itemsetObj.items.length;n++){var T,k="text",D="",L="";(T=this.options.itemsetObj.items[n]).inputType&&(k=T.inputType),T.depthColumn&&(D='" depthColumn = "'+T.depthColumn),T.showDepth&&(L='" showDepth = "'+T.showDepth);var W=parseInt(this.options.gridViewOptions.checkColumn)===n&&"checkbox"===k?"false":"true";x.push('<w2:column inputType = "'+k+D+L+'" style="height:20px;'+this.options.itemsetObj.items[n].style+'" width="'+i[n]+'" textAlign="'+o[n]+'" id="'+this.options.itemsetObj.items[n].ref+'" hidden="'+C[n]+'" readOnly="'+W+'" sortable="false">'),x.push("</w2:column>")}x.push("</w2:row>"),x.push("</w2:gBody>"),x.push("</w2:gridView>");var A=WebSquare.xml.parse(x.join(""),!0);this.gridView=new WebSquare.uiplugin.gridView(this.id+"_gridView",{dataList:null==s?"":s.id},new WebSquare.Elem(A.firstChild)),this.gridView.options.isItemTable=!0,this.addControl(this.gridView),this.inputBlurInside=!1,this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"ㅁ",67:"ㅊ",68:"ㅇ",69:"ㄷ",70:"ㄹ",71:"ㅎ",81:"ㅂ",82:"ㄱ",83:"ㄴ",84:"ㅅ",86:"ㅍ",87:"ㅈ",88:"ㅌ",90:"ㅋ"},this.korCharHash2={69:"ㄸ",81:"ㅃ",82:"ㄲ",84:"ㅆ",87:"ㅉ"},this.myhelper=new WebSquare.korHelper}catch(t){h.w.printStackTrace(t,null,this)}},Lt.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='w2gridItemTable "+this.options.className+" "+this.options.w2table+"'>"),1==this.options.navBtn?(t.push("<div id='"+this.id+"_wrapper' aria-expanded='true' "+e+"' tabIndex='0'>"),t.push(this.gridView.toHTML()),t.push("</div>"),t.push("<div id='"+this.id+"_btn_div' style='' class='w2checkcombobox_btn_div'>"),t.push("</div>")):t.push(this.gridView.toHTML()),t.push("</div>"),t.join("")},Lt.prototype.setAction=function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,q.B.stopPropagation(t)}catch(t){}}))),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,(function(t){try{q.B.stopPropagation(t)}catch(t){}}))),g.D.isMobile()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,q.B.stopPropagation(t)}catch(t){}}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))},Lt.prototype.setFocusedCell=function(t,e){this.inputBlurInside=!0,this.options.findItemFirstKey,this.gridView.setFocusedCell(t,e)},Lt.prototype.setSelectedIndex=function(t,e){var i=this.gridView.getDataLength();if(0!=i){this.gridView.getVisibleRowNum();e||this.setFocusedCell(t,this.options.gridViewOptions.label)}},Lt.prototype.getSelectedIndex=function(){try{return this.gridView.getFocusedRowIndex()}catch(t){h.w.printStackTrace(t)}},Lt.prototype.hide=function(){try{this.inputBlurInside=!1,WebSquare.style.hide(this.render)}catch(t){h.w.printStackTrace(t)}},Lt.prototype.finalize=function(){try{this.gridView&&this.gridView._dataList&&WebSquare.DataCollection.api.remove(this.gridView._dataList.id)
}catch(t){h.w.printStackTrace(t)}},Lt.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex();i=parseInt(i);var o=this.gridView.getRowCount(),s=i;if(38==e){var r=!1;for(s>0?0!=--s||this.gridView.getRowVisible(s)||(s--,r=!0):r=!0;s>0&&!this.gridView.getRowVisible(s);)s--;s>=0&&this.setSelectedIndex(s),this._keyIndex=r?-1:s,this._directionKeyPressed=!0}else if(40==e){var a=this.getItemCount();r=!1;for(s+1<o?++s+1!=a||this.gridView.getRowVisible(s)||(s++,r=!0):r=!0;s+1<o&&!this.gridView.getRowVisible(s);)s++;s<o&&(this.gridView.getRowVisible(s)?this.setSelectedIndex(s):s++),this._keyIndex=r?a:s,this._directionKeyPressed=!0}else if(32==e){if(this.options.checkbox)document.getElementById(this.id+"_"+i+"_checkbox").click()}else if(33==e){(s=i-this.rowCount)<0&&(s=0),this.setSelectedIndex(s),this._directionKeyPressed=!0}else if(34==e){(s=i+this.rowCount)>=o&&(s=o-1),this.setSelectedIndex(s),this._directionKeyPressed=!0}else 35==e?(this.setSelectedIndex(o-1),this._directionKeyPressed=!0):36==e?(this.setSelectedIndex(0),this._directionKeyPressed=!0):13==e?this._directionKeyPressed=!1:9==e?"ul"==this.options.tableRender&&(t.shiftKey?i>0?this.setSelectedIndex(i-1):this.endReached=!0:document.activeElement==this.render?this.setSelectedIndex(0):i+1<o?this.setSelectedIndex(i+1):this.endReached=!0):(this.findItemStartedWithKeyChar(t,e,i),this.options.findItem&&this._keyBuffer&&(g.D.clearTimeout(this.id+"_selectKeyBuffer"),g.D.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime})));this.render.setAttribute("aria-activedescendant",this.id+"_"+this.getSelectedIndex()),this.keyDownFunc&&this.keyDownFunc(t),q.B.stopEvent(t)}catch(t){h.w.printStackTrace(t)}},Lt.prototype.fireClick=function(t){try{var e,i=this.gridView.getLastFocusedCell();i&&(e=i.focusedRowIndex),this.clickFunc.call(this,t,e)}catch(t){h.w.printStackTrace(t)}},Lt.prototype.findItemStartedWithKeyChar=function(t,e,i){try{var o=this.keyCharHash[e],s=-1;if(o){var r=this.gridView.getLastFocusedCell(),a=r?r.focusedRowIndex:-1;this.options.findItem&&(a=0);var n=this.korCharHash[e],l=this.korCharHash2[e],d=1;this.options.findItem?this._keyBuffer+=o:(this._keyBuffer=o,a++);for(var c=this.gridView.getRowCount();;)if(a%=c,!1!==this.gridView.getRowVisible(a))if(0!=a||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=a&&1!=a||!0!==this.options.chooseOption||!0!==this.options.allOption){var u=this.options.gridViewOptions.label,p=this.gridView.getCellData(a,u).toLowerCase(),m=!1;n&&!t.shiftKey?m=this.myhelper.startWith(p,n):l&&t.shiftKey&&(m=this.myhelper.startWith(p,l));var f=this.options.findItem?this._keyBuffer:o;if(p.startsWith(f)||m&&g.D.getBoolean(this.options.findItemKor)){s=a;break}if(p.startsWith(f)){this._keyBuffer="",s=a;break}if(d>c)break;a++,d++}else{if(c<=2)break;a++}else{if(c<=1)break;a++}else a++;s>-1?this.setSelectedIndex(s):this._keyBuffer=""}}catch(t){h.w.printStackTrace(t)}},Lt.prototype.getItemCount=function(){return this.gridView.getRowCount()};var Wt=__webpack_require__(1316),At=__webpack_require__(8067),Mt=__webpack_require__(7534),Et=function(t,e){var i=i||{};this.displayFormat="yyyyMMdd",this.dayStrArr=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],this.monthDays=[31,28,31,30,31,30,31,31,30,31,30,31],this.year=null,this.month=null,this.date=null,this.day=null,this.hour=null,this.minute=null,this.second=null,this.useUnlimitedYear=i.useUnlimitedYear,this.maxYear=i.maxYear,this.setToday(t,e)};Et.prototype.setToday=function(t,e){var i,o,s=s||{};if(t&&1==t)if(i="everyTime"===s.serverSyncType?this.getServerDate():this._getServerDate(e)){var r="",a="",n="";8==i.length&&(r=i.substr(0,4),a=i.substr(4,2),n=i.substr(6,2)),o=new Date(parseInt(r),parseInt(a,10)-1,parseInt(n,10))}else o=new Date;else o=new Date;this.year=o.getFullYear(),this.month=o.getMonth()+1,this.date=o.getDate(),this.hour=o.getHours(),
this.minute=o.getMinutes(),this.second=o.getSeconds()},Et.prototype.setYear=function(t){this.year=parseInt(t)},Et.prototype.setMonth=function(t){this.month=parseInt(t)},Et.prototype.setDate=function(t){this.date=parseInt(t)},Et.prototype.setDateAll=function(t,e,i,o,s,r){if(t&&this.setYear(t),t&&e)if(o){s=s||0;var a=new Date(parseInt(t),parseInt(e)-1,parseInt(i),parseInt(o),parseInt(s));this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate(),this.hour=a.getHours(),this.minute=a.getMinutes(),r&&(a=new Date(parseInt(t),parseInt(e)-1,parseInt(i),parseInt(o),parseInt(s),parseInt(r)),this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate(),this.hour=a.getHours(),this.minute=a.getMinutes(),this.second=a.getSeconds())}else if(i){a=new Date(parseInt(t),parseInt(e)-1,parseInt(i));this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate()}else{a=new Date(parseInt(t),parseInt(e)-1);this.year=a.getFullYear(),this.month=a.getMonth()+1}},Et.prototype.setDateAllByString=function(t){if(t&&8==t.length){var e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),this.setDateAll(e,s,r)}else if(t&&12==t.length){e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),"0"==(i=t.substr(10,2)).charAt(0)&&(i=i.charAt(1)),this.setDateAll(e,s,r,a,i)}else if(t&&6==t.length){e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),this.setDateAll(e,s)}else if(t&&14==t.length){var i;e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),"0"==(i=t.substr(10,2)).charAt(0)&&(i=i.charAt(1));var o=t.substr(12,2);"0"==o.charAt(0)&&(o=o.charAt(1)),this.setDateAll(e,s,r,a,i,o)}else if(t&&10==t.length){var s,r,a;e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),this.setDateAll(e,s,r,a)}else t&&4==t.length&&this.setYear(t)},Et.prototype.getYear=function(){return this.year},Et.prototype.getMonth=function(){return this.month},Et.prototype.getDate=function(){return this.date},Et.prototype.getHour=function(){return this.hour},Et.prototype.getMinute=function(){return this.minute},Et.prototype.getSecond=function(){return this.second},Et.prototype.getDateAll=function(){var t=this.year+"",e=this.month+"",i=this.date+"";return 1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),t+e+i},Et.prototype.getFormatDateAll=function(t){var e="";e=t&&""!=t?t:this.displayFormat;var i=this.getDateAll();return i=WebSquare.text.formatDate(i,e)},Et.prototype.getDay=function(){var t=new Date(parseInt(this.year),parseInt(this.month)-1,parseInt(this.date));return this.day=t.getDay(),this.day},Et.prototype.getDayStr=function(t,e){return(e=e||this.dayStrArr)[t]?e[t]:""},Et.prototype.getMonthCount=function(t,e){t=t||this.getYear(),e=e||this.getMonth();return this.setLeapYear(t),this.monthDays[e-1]},Et.prototype.getFirstDay=function(){var t=new WebSquare.uiplugin.dateHelper;return t.setDateAll(this.getYear(),this.getMonth(),1),t.getDay()},Et.prototype.getFirstDayStr=function(t){var e=new WebSquare.uiplugin.dateHelper;return e.setDateAll(this.getYear(),this.getMonth(),1),e.getDayStr(t)},Et.prototype.setLeapYear=function(t){this.monthDays[1]=(t%4||!(t%100))&&t%400?28:29},Et.prototype.getLeapYear=function(t){return!(t%4)&&t%100||!(t%400)},Et.prototype.equals=function(t){return this.getYear()==t.getYear()&&this.getMonth()==t.getMonth()&&this.getDate()==t.getDate()},Et.prototype.setNextYear=function(){var t=this.getYear();this.useUnlimitedYear&&t==this.maxYear?this.setYear("9999"):this.setYear(t+1),this._checkValidDate()},Et.prototype.setLastYear=function(){var t=this.getYear();this.useUnlimitedYear&&"9999"==t?this.setYear(this.maxYear):this.setYear(t-1),
this._checkValidDate()},Et.prototype.setNextMonth=function(){var t=this.getYear(),e=this.getMonth();e<12?this.setMonth(e+1):(this.useUnlimitedYear&&t==this.maxYear?this.setYear("9999"):this.setYear(t+1),this.setMonth(1)),this._checkValidDate()},Et.prototype.setLastMonth=function(){var t=this.getYear(),e=this.getMonth();e>1?this.setMonth(e-1):(this.useUnlimitedYear&&"9999"==t?this.setYear(this.maxYear):this.setYear(t-1),this.setMonth(12)),this._checkValidDate()},Et.prototype._checkValidDate=function(){var t=this.getDate(),e=this.getMonthCount();t>e&&this.setDate(e)},Et.prototype.getServerDate=function(t){return WebSquare.date.getCurrentServerDate(t)},Et.prototype._getServerDate=function(t){try{var e,i="";return t||(t="wq_main"),null==WebSquare.uiplugin.dateHelper._currentDate?WebSquare.uiplugin.dateHelper._currentDate={}:e=WebSquare.uiplugin.dateHelper._currentDate[t],"string"==typeof e&&8===e.length?i=WebSquare.uiplugin.dateHelper._currentDate[t]:(i=this.getServerDate(),WebSquare.uiplugin.dateHelper._currentDate[t]=i),i}catch(t){h.w.printStackTrace(t,null,this)}};var qt=__webpack_require__(1072),Rt=__webpack_require__(7121),Nt=__webpack_require__(4246),Ft=__webpack_require__(4810),Ot=__webpack_require__(3435),Bt=__webpack_require__(7967),Vt=__webpack_require__(5763),Pt=__webpack_require__(5459),Ht=__webpack_require__(1192),jt=__webpack_require__(4047),zt=__webpack_require__(309),Gt=__webpack_require__(1553),Ut=__webpack_require__(9248),Xt=__webpack_require__(325),Kt=__webpack_require__(2592),Yt=__webpack_require__(7003),$t=__webpack_require__(1213),Jt=__webpack_require__(4672),Zt=__webpack_require__(3730),Qt=__webpack_require__(4519),te=__webpack_require__(2278),ee=function(t,e,i){if(this.parentControl=null,this.childControlList=[],this.element=i,this.options={},1==i.nodeType){this.id=i.getAttribute("id"),this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.element._element.A||(this.element._element.A={}),this.element.setAttribute("id",this.uuid),this.id=this.uuid,this.options.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid;var o=g.D.getBoolean(l.v.getConfiguration("/WebSquare/parseHtml/@value")||"true");this.options.parseChild="w2:tag"==this.element.getTagName()||o}this.refreshAdaptive=te.i.prototype.refreshAdaptive};a.x.extend(ee.prototype,Qt.$.prototype),ee.idCounter=0,ee.prototype.toHTML=function(){var t=this.element.getTagName(),e=l.v.getEmptyTag(),i=null;if("w2:tag"==t?i=this.setTag():"td"==t&&this.setTd(),this.options.parseChild&&!e[t.toLowerCase()]){var o,s=this.element.getAttributes();if(1==this.element.nodeType)if("w2:tag"!=t){for(var r="<"+t,a=0;a<s.length;a++)r+=" "+s[a]+"='"+this.element.getAttribute(s[a])+"'";r+=">"}else r=i,t=this.element.getAttribute("tagname")||"div";o="</"+t+">";var n=[r];if(0==r.toLowerCase().wq_trim().indexOf("<script ")){var h=this.setScript();0!=h&&n.push(h)}else{var d=this.getChildren();for(a=0;a<d.length;a++)n.push(d[a].toHTML())}return n.push(o),n.join("")}s=this.element.getAttributes();i="<"+t+" xmlns='"+l.v._XML_NAMESPACE.XHTML+"' ";for(a=0;a<s.length;a++)i+=s[a]+"="+this.element.getAttribute(s[a])+" ";return i+="/>",this.options.parseChild&&(i.endsWith("/>")||((i=i.substring(0,i.indexOf(">"))).endsWith(" ")?i+="/>":i+=" />")),3==this.element.nodeType?this.element.getNodeValue():i},ee.prototype.setTag=function(){try{var t=null,e=this.element.getAttribute("tagname")||"div";if(this.element.getAttribute("tagname")){this.element.removeAttribute("tagname");var i=this.element.getAttributes();t="<"+e+" xmlns:w2='"+l.v._XML_NAMESPACE.W2+"' ";for(var o=0;o<i.length;o++)t+=i[o]+"='"+this.element.getAttribute(i[o])+"' ";this.element.setAttribute("tagname",e)}else{i=this.element.getAttributes();t="<div xmlns:w2='"+l.v._XML_NAMESPACE.W2+"' ";for(o=0;o<i.length;o++)t+=i[o]+"='"+this.element.getAttribute(i[o])+"' "}return t+=">",this.options.parseChild&&!this.id&&(this.id="w2tag_"+ee.idCounter++,this.element.setAttribute("id",this.id)),t}catch(t){
h.w.printStackTrace(t,null,this)}},ee.prototype.setScript=function(){try{var t=this.getParentNode(),e=t&&t.getTagName()||"";if(!(e.indexOf("xf")<0&&e.indexOf("w2")<0))return!1;var i=this.element.getChildNodes()[0]||{};if(3===i.nodeType||4===i.nodeType){var o=i.getNodeValue(),s=WebSquare.idCache[this.parentFrame];return o=s?g.D.scopingFuncBody(o,s.id,!0):g.D.scopingFuncBody(o,null,!0),"executed"===WebSquare.scriptSectionExcuteFlag||"preExecuted"===WebSquare.scriptSectionExcuteFlag?WebSquare.BootLoader.globalEval(o):WebSquare.scriptSection+=";"+o,o}}catch(t){h.w.printStackTrace(t,null,this)}},ee.prototype.setTd=function(){try{for(var t=this.element.getAttribute("id"),e=this.getSiblingNodes(),i=null,o=0;o<e.length;o++)e[o].getAttribute("id")==t&&(i=o-1);var s=null;i>-1?"th"==e[i].getTagName()&&null!=e[i]._element.E&&(s=e[i].getChildNodes()[0]):i+=1,null!=s&&s.getTagName;var r=(null==s?e[i].getNodeValue():"w2:textbox"==s.getTagName()?s.getAttribute("label"):s.getNodeValue())||"";this.element.setAttribute("data-title",r)}catch(t){h.w.printStackTrace(t,null,this)}},ee.prototype.activate=function(){if(this.options.parseChild){for(var t=this.getChildren(),e=0;e<t.length;e++)t[e].activate();if("td"==this.element.getTagName()){var i=this.element.getAttribute("id"),o=this.getSiblingNodes(),s=null;for(e=0;e<o.length;e++)if(o[e].getAttribute("id")==i){s=e-1;break}s>-1?"th"!=o[s].getLocalName()&&this.addClass(" w2tb_noTH"):this.addClass(" w2tb_noTH")}}},ee.prototype.setAction=function(){},ee.prototype.remove=function(){try{for(var t in this.destroy(),WebSquare.removeNode(this.render),window[this.id]&&(window[this.id]=null),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[t]==this&&WebSquare.getBody().childControlList.splice(t,1);for(var t in this)delete this[t]}catch(t){h.w.printStackTrace(t,null,this)}},ee.prototype.setAdaptive=function(){try{var t=WebSquare.BootLoader.fullViewed||!1,e=g.D.fullViewed||!1;if(!t&&!e){var i=parseInt(this.element.getAttribute("adaptiveThreshold"))||480;g.D.isIE()&&parseInt(l.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=i?this.addAdaptive():this.removeAdaptive())}}catch(t){h.w.printStackTrace(t)}},ee.prototype.addAdaptive=function(){try{if(!(g.D.isIE()&&parseInt(l.v.browserVersion(),10)<10)){var t,e=this.element.getAttribute("adaptive");"layout"==e?t=" w2tb_adaptive_layout":"crosstab"==e&&(t=" w2tb_adaptive_crosstab"),this.addClass(t),this.removeAdaptiveHeight(e),this.setAdaptiveHeight(e)}}catch(t){h.w.printStackTrace(t)}},ee.prototype.removeAdaptive=function(){try{if(!(g.D.isIE()&&parseInt(l.v.browserVersion(),10)<10)){var t,e=this.element.getAttribute("adaptive");"layout"==e?t=" w2tb_adaptive_layout":"crosstab"==e&&(t=" w2tb_adaptive_crosstab"),this.removeClass(t),this.removeAdaptiveHeight(e)}}catch(t){h.w.printStackTrace(t)}},ee.prototype.addClass=function(t){try{for(var e=document.getElementById(this.id).className.wq_trim(),i=e.split(" "),o=0;o<i.length;o++){if((" "+i[o].wq_trim()+" ").indexOf(t)>-1&&o==i.length-1)return}i.length>1&&(e+=" "),e+=t,document.getElementById(this.id).className=e}catch(t){h.w.printStackTrace(t)}},ee.prototype.removeClass=function(t){try{for(var e=document.getElementById(this.id).className.split(" "),i=[],o=0;o<e.length;o++){var s=e[o].wq_trim();(" "+s+" ").indexOf(t)>-1||s.length>0&&i.push(s)}document.getElementById(this.id).className=i.join(" ")}catch(t){h.w.printStackTrace(t)}},ee.prototype.setDisabled=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];i&&WebSquare.idCache[i.uuid]&&"function"==typeof i.setDisabled&&i.setDisabled(t)}},ee.prototype.finalize=function(){},ee.prototype.setAdaptiveHeight=function(t){try{
if("crosstab"==t)for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr"),o=document.getElementById(e[0].id),s=parseInt(WebSquare.style.getStyle(o,"padding-top")),r=parseInt(WebSquare.style.getStyle(o,"padding-bottom")),a=document.getElementById(document.getElementById(this.id).getElementsByClassName("w2tb_td")[0].id),n=parseInt(WebSquare.style.getStyle(a,"padding-top")),l=parseInt(WebSquare.style.getStyle(a,"padding-bottom")),d=0;d<e.length;d++){for(var c=e[d].offsetHeight,u=0,p=0;p<i.length;p++)for(var m=i[p].getElementsByClassName("w2tb_td"),f=0;f<m.length;f++){var b=m[d].offsetHeight;u=u>=b?u:b}if(c>u)for(var y=0;y<i.length;y++){m=i[y].getElementsByClassName("w2tb_td");document.getElementById(m[d].id).style.height=c-(n+l+1)+"px"}else if(c<u){document.getElementById(e[d].id).style.height=u-(s+r+1)+"px";for(y=0;y<i.length;y++){m=i[y].getElementsByClassName("w2tb_td");document.getElementById(m[d].id).style.height=u-(s+r+1)+"px"}}}else if("layout"==t)for(m=document.getElementById(this.id).getElementsByClassName("w2tb_td"),d=0;d<m.length;d++){var v=m[d].getAttribute("data-title");if(v){var w=g.D.getRulerSpan();w.style.padding=window.getComputedStyle(m[d],":before").getPropertyValue("padding"),w.style.width=window.getComputedStyle(m[d],":before").getPropertyValue("width"),w.style["white-space"]=window.getComputedStyle(m[d],":before").getPropertyValue("white-space"),w.style["font-weight"]=window.getComputedStyle(m[d],":before").getPropertyValue("font-weight"),w.innerHTML=v,w.offsetHeight>m[d].offsetHeight&&(m[d].style.height=w.offsetHeight+"px"),w.style.top="-10000px",w.style.left="-10000px",w.style.visibility="hidden"}}}catch(t){h.w.printStackTrace(t)}},ee.prototype.removeAdaptiveHeight=function(t){try{if("crosstab"==t){for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<e.length;o++)e[o].style.removeProperty("height");for(var s=0;s<i.length;s++)i[s].style.removeProperty("height")}else if("layout"==t)for(i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<i.length;o++)i[o].style.removeProperty("height")}catch(t){h.w.printStackTrace(t)}},ee.prototype.onComplete=function(){if(this.completed)$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id);else{var t=this.childControlList;"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t=[]);for(var e=0;e<t.length;e++)t[e].completed||"function"!=typeof t[e].onComplete||t[e].onComplete();if(this.completed=!0,!(g.D.isIE()&&parseInt(l.v.browserVersion(),10)<10)&&3!==this.element.nodeType){var i=this.element.getAttribute("adaptive");if("crosstab"==i||"layout"==i){var o=document.getElementById(this.id).getElementsByTagName("tr");for(e=0;e<o.length;e++){var s=o[e].className;-1==s.indexOf("w2selectbox_row")&&-1==s.indexOf("w2checkcombobox_row")&&-1==s.indexOf("w2tb_tr")&&(o[e].className=s+" w2tb_tr")}var r=WebSquare.BootLoader.fullViewed||!1,a=g.D.fullViewed||!1;r||a||(this.setAdaptive(),q.B.addListener(window,"onresize",q.B.bindAsEventListener(this,this.setAdaptive)));var n=document.getElementById(this.id).getElementsByClassName("w2inputCalendar_div");for(e=0;e<n.length;e++){var h=n[e].id;g.D.getComponentById(h).setSetting()}}}}},ee.prototype._clone=function(t){try{var e=g.D.getDataPrefix("g_index"),i=g.D._copyOptions(this.options);i.id=t.getAttribute("id")||null,i[e]=t.getAttribute(e),t.constructor===WebSquare.Elem&&t._element&&(t=t._element);var o=WebSquare.controlFactory.create(null,i,t,this.scope_obj,this.parentFrame,!1);return o.attributes=this.attributes,o.getAttributeNode=this.getAttributeNode,o.setAttributeNode=this.setAttributeNode,o.removeAttributeNode=this.removeAttributeNode,o}catch(t){h.w.printStackTrace(t,null,this)}},ee.prototype._cloneRecursive=function(t){
try{if(!t)return;return this._clone(t)}catch(t){h.w.printStackTrace(t,null,this)}},ee.prototype.getParentNode=function(){try{if(this.parentControl&&this.parentControl.element&&this.parentControl.element.constructor===WebSquare.Elem)return this.parentControl.element}catch(t){h.w.printStackTrace(t,null,this)}},ee.prototype.getSiblingNodes=function(){try{var t=[],e=this.getParentNode();return e&&(t=e.getChildNodes()),t}catch(t){h.w.printStackTrace(t,null,this)}};var ie=__webpack_require__(3708),oe=__webpack_require__(6210),se=__webpack_require__(9271),re=__webpack_require__(7719),ae=__webpack_require__(3043),ne=__webpack_require__(5939),le=function(t){if(null==t.id||(this.id=t.id,null==window[WebSquare.noConflict].comp[this.id])){this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[this.id]=this,window[WebSquare.noConflict].comp[this.id]=this,this.scope_obj=WebSquare.idCache[t.scope_uuid],null!=this.scope_obj&&(this.org_id=t.org_id,this.scope_id=this.scope_obj.id,this.scope_obj.scope||(this.scope_obj.scope={}),this.scope_obj.scope[this.org_id]=this);var e={};if(null!=t.data){var i={};for(var o in t.data)"ev:"==o.slice(0,3)?e[o]=t.data[o]:"className"===o?e.className=t.data[o]:"style"===o?e.style=t.data[o]:"id"!==o&&(i[o]=t.data[o]);e.dataObject={type:"json",name:"param",data:i}}e.scope=!0,e.udc2Name=t.tagName||"",e.preload=!0,t.src&&(e.src=t.src),t.msaName&&(e.msaName=t.msaName),e._scope_obj_uuid=t.scope_uuid,e.pluginName="udc2",this._wqContent=new WebSquare.uiplugin.wframe("",e),this._wqContent._isUDC2=!0,this._wqContent.parentFrame=t.parentFrame,this._reservedName={property:["id","org_id","uuid","_wqContent","_reservedName"],function:["toHTML","preActivate","activate","remove","onComplete","appendTo","writeTo"],uniqueFunction:["initAsync","finalize"]},this._defaultFunc=["bind","unbind","trigger","show","hide","setDisabled","setReadOnly","getDisabled","getReadOnly","getChildren"];for(var s=this._reservedName.function.concat(this._defaultFunc),r=0;r<s.length;r++){var a=s[r];this[a]=function(t){return function(...e){return this._wqContent[t](...e)}}(a)}}};le.prototype.initAsync=async function(){await this._wqContent.makeFrameUDC2(this)},le.prototype.finalize=function(){this.remove()},le.prototype._clone=function(t){try{var e=WebSquare.util._copyOptions(this.options);return e.id=t.getAttribute("id")||null,e.g_index=t.getAttribute("g_index"),WebSquare.controlFactory.createControl(null,e,t,this.scope_obj,!0,this.parentFrame)}catch(t){exception.printStackTrace(t,null,this)}},le.prototype._cloneRecursive=function(t){try{if(!t)return;var e=this._clone(t);return e._wqContent=new WebSquare.uiplugin.wframe("",this._wqContent.options),e._wqContent.initAsync=async function(){},e.initAsync=async function(){},e._wqContent.makeFrameUDC2Sync(e,!0,!0),e}catch(t){exception.printStackTrace(t,null,this)}};var he=function(t,e,i){this.id=t,this.options=e,this.element=i};a.x.extend(he.prototype,et.s.prototype),he.prototype._initImport=function(){var t=a.x.UUIDPrefix,e=a.x.UUID;a.x.UUIDPrefix="wq_popup",et.s.call(this,this.id,this.options,this.element),a.x.UUIDPrefix=t,a.x.UUID=e},a.x._initImportList.push("uiplugin.popup"),he.prototype.defaultOptions={pluginType:"uiplugin.popup",pluginName:"popup",useConfig:!0,popupName:""},he.prototype.initialize=function(t){try{this.popupList=[],this.popupParams={},this._zIndex=-1,this._status="idle"}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.toHTML=function(){try{return""}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.setAction=function(){},he.prototype.createPopup=function(t,e,i,o,s,r,a,n,l,d,c,u,p,g,m,f,b){try{this.openPopup(a,{id:t,type:e,popupName:i,style:o,useIFrame:s,modal:r,srcORurl:a,srcData:n,destData:l,xml:d,popupUrl:c||"popup.html",dataObject:u,frameMode:p||"iframe",useATagBtn:g,disableCloseButton:m,alwaysOnTop:f,fixPosition:b})}catch(t){h.w.printStackTrace(t,null,this)}},
he.prototype.openPopup=function(t,e,i,o){try{"iframePopup"==e.type?(e.type="litewindow",e.frameMode="iframe"):"wframePopup"==e.type?(e.type="litewindow",e.frameMode="wframe"):"browserPopup"==e.type&&(e.type="browser"),e.id&&e.scope_uuid&&WebSquare.idCache[e.scope_uuid]&&(e.org_id=e.id,e.id=WebSquare.idCache[e.scope_uuid].id+"_"+e.org_id);var s=g.D.getBoolean(l.v.getConfiguration("/WebSquare/popup/denyConflictPopupId/@value"));if(e.useIFrame+""=="true"&&"browser"!=e.type||!0===s&&"litewindow"==e.type){if(window[e.id])return;window[e.id]=e.id}if("iframe"!==e.frameMode||WebSquare.uiplugin.iframe)this._openPopupAfter(t,e,i,o);else requires("uiplugin.iframe").then(function(t,e,i,o,s){return function(r,a){t._openPopupAfter(e,i,o,s)}}(this,t,e,i,o))}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype._openPopupAfter=function(t,e,i,o){try{var s=new WebSquare.uiplugin.popupWindow(e.id,e,i);t=WebSquare.BootLoader._getEncodeURL(t),s.open(t,o),this.startChkModalClosed(),g.D.setInterval(this.startChkModalClosed,{key:this.id+"_startChkModalClosed",caller:this,delay:500})}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.getPopupParam=function(){try{var t=WebSquare.net.getParameter("popupID"),e=l.v._getParentObj();if(e&&e.WebSquare.dataObject[t]){var i=e.WebSquare.dataObject[t].name;if(WebSquare.userData[i])return l.v.isXML(WebSquare.userData[i])?WebSquare.xml.serialize(WebSquare.userData[i]):JSON.stringify(WebSquare.userData[i])}else if(null!=WebSquare.net.getParameter("idx")&&""!=WebSquare.net.getParameter("idx")){var o=WebSquare.net.getParameter("idx");return e.WebSquare.uiplugin.popup.popupParams[o]}return null}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.callClose=function(t,e){try{for(var i=0;i<this.popupList.length;i++)this.popupList[i]&&this.popupList[i].id==t&&!1!==this.popupList[i].close(e)&&("browser"===this.popupList[i].options.type&&WebSquare.getBody().hideModal(!1,this.popupList[i].id),this._deletePopup(i))}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.removeFromPopupList=function(t){try{for(var e=0;e<this.popupList.length;e++)this.popupList[e]&&this.popupList[e].id==t&&this._deletePopup(e)}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.startChkModalClosed=function(){try{for(var t=!1,e=0;e<this.popupList.length;e++)if(this.popupList[e]&&(t=!0),this.popupList[e]&&this.popupList[e].popupWin&&this.popupList[e].popupWin.closed){if(this.popupList[e]._parentFrameUUID&&this.popupList[e]._parentFrameUUID!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var i=WebSquare.idCache[this.popupList[e]._parentFrameUUID];if(i&&i.hideFrameModal(this.popupList[e].id),this.popupList[e].useWindowPopup()){var o=WebSquare.idCache[this.popupList[e].options.scope_uuid];if(o&&o.popupList)for(var s=0;s<o.popupList.length;s++)o.popupList[s].id===this.popupList[e].id&&o.popupList.splice(s)}}else this.popupList[e].options.useModalStack?WebSquare.getBody().hideModal(!1,this.popupList[e].id):1==this.popupList[e].options.modal&&WebSquare.getBody().hideModal(!1);this._deletePopup(e)}!1===t&&g.D.clearInterval(this.id+"_startChkModalClosed")}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.getPopupWindow=function(t,e){try{if(e&&WebSquare.idCache[e])return this.getPopupWindow(WebSquare.idCache[e].id+"_"+t)||this.getPopupWindow(t);for(var i=0;i<this.popupList.length;i++)if(this.popupList[i]&&this.popupList[i].id==t&&null!=this.popupList[i].popupWin)return this.popupList[i].getWindow()}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.getPopupWindowList=function(t,e,i){try{var o=this.getPopupList(t,e);return this._getWindowArr(o,i)}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.getPopup=function(t,e){try{if(e&&WebSquare.idCache[e])return this.getPopup(WebSquare.idCache[e].id+"_"+t)||this.getPopup(t);for(var i=0;i<this.popupList.length;i++)if(this.popupList[i]&&this.popupList[i].id==t)return this.popupList[i]}catch(t){h.w.printStackTrace(t,null,this)}},
he.prototype._deletePopup=function(t){try{var e=this.popupList[t]._idx;if(e&&(delete this.popupList[t]._idx,l.v.setTimer((function(t){delete WebSquare.uiplugin.popup.popupParams[e]}),{key:"_deletePopup_"+e,delay:1e3,args:[e]})),this.popupList[t].useWindowPopup()){var i=WebSquare.idCache[this.popupList[t].options.scope_uuid];if(i&&i.popupList)for(var o=0;o<i.popupList.length;o++)i.popupList[o].id===this.popupList[t].id&&i.popupList.splice(o)}this.popupList.splice(t,1)}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.getPopupList=function(t,e){try{var i=[];if(e&&WebSquare.idCache[e]){for(var o=WebSquare.idCache[e].id,s=0;s<this.popupList.length;s++){var r=this.popupList[s].popupWin,a=this.popupList[s]._getTargetFrame(this.popupList[s].options.scope_uuid);this.popupList[s]&&null!=r&&(!0===t?(this.popupList[s].options.frameModal||a)&&(i.push(this.popupList[s]),r.opener&&r.WebSquare.uiplugin.popup&&(i=i.concat(r.WebSquare.uiplugin.popup.getPopupList()))):o===r.scope_id&&i.push(this.popupList[s]))}return i}for(s=0;s<this.popupList.length;s++){r=this.popupList[s].popupWin,a=this.popupList[s]._getTargetFrame(this.popupList[s].options.scope_uuid);this.popupList[s]&&null!=r&&(!0===t?(this.popupList[s].options.frameModal||a)&&(i.push(this.popupList[s]),r.opener&&r.WebSquare.uiplugin&&r.WebSquare.uiplugin.popup&&(i=i.concat(r.WebSquare.uiplugin.popup.getPopupList()))):i.push(this.popupList[s]))}return i}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.getAllPopupList=function(){try{return this.popupList}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype.getAllPopupWindowList=function(t){try{var e=this.getAllPopupList();return this._getWindowArr(e,t)}catch(t){h.w.printStackTrace(t,null,this)}},he.prototype._getWindowArr=function(t,e){try{for(var i=[],o=0;o<t.length;o++){var s=t[o].getWindow();!0!==e||t[o].popupWin&&t[o].popupWin.frame&&t[o].popupWin.frame.constructor===WebSquare.uiplugin.wframe?i.push(s):s.WebSquare&&s.WebSquare.util?i.push(s.WebSquare.util.getMainFrame()):i.push(s)}return i}catch(t){h.w.printStackTrace(t,null,this)}},he=new he("w2popup_singleton");var de=function(t,e,i){try{this.id=t,this.popupWin=null,this.options=a.x.extendKeepingType({id:"pop1",type:"browser",popupName:"WebSquarePopup",style:"",useIFrame:!1,className:"",modal:!1,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:"popup.html",left:100,top:100,width:500,height:500,resizable:!1,status:!1,menubar:!1,scrollbars:!1,title:!1,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},frameMode:"iframe",disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:!1,windowMoveType:"restrict",processMsgFrame:!1,msaName:"",fixPosition:!1},e||{}),this.options.scope_uuid&&WebSquare.idCache[this.options.scope_uuid]&&(this.options.org_id?this.org_id=this.options.org_id:(this.org_id=this.id,this.id=this.options.id=WebSquare.idCache[this.options.scope_uuid].id+"_"+this.org_id)),this.params=i||{},""!=this.options.style&&(this.options.styleObj=l.v.makeStyle(this.options.style),this.options.left=this.options.styleObj.left||"0px",this.options.top=this.options.styleObj.top||"0px",this.options.width=this.options.styleObj.width||"500px",this.options.height=this.options.styleObj.height||"500px"),this.options.dataObject&&"wframe"!==this.options.frameMode&&(WebSquare.dataObject[this.id]=this.options.dataObject),this.options.srcData&&(WebSquare.srcData=this.options.srcData),this.options.destData&&(WebSquare.destData=this.options.destData),WebSquare.docTitleInfo||(WebSquare.docTitleInfo={}),"WebSquarePopup"!=this.options.popupName?WebSquare.docTitleInfo[this.options.id]=this.options.popupName:WebSquare.uiplugin.popup.options.title?WebSquare.docTitleInfo[this.options.id]=WebSquare.uiplugin.popup.options.title:WebSquare.docTitleInfo[this.options.id]=this.options.popupName}catch(t){h.w.printStackTrace(t,null,this)}};de.prototype.open=function(t,e){try{var i=this.useWindowPopup();this._compModal=!1
;var o,s=!1,r=WebSquare.idCache[this.options.scope_uuid],n=r,d=(this.options.frameModal,WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:""),c=WebSquare.getBody();c.modal&&"block"===c.modal.style.display&&(s=!0,this._alreadyDisplayedModal=!0);var u="w2xPath";g.D.getEncodeParameterOption("pathName")?u=g.D.getEncodeParameterOption("pathName"):g.D.isEncodeParameter()&&(u=g.D.encodeParameter("w2xPath"));var p=this.options.popupUrl;this.options.xml&&"string"!=typeof this.options.xml&&(this.options.xml=WebSquare.xml.serialize(this.options.xml));var m="",f={msaName:this.options.msaName,frameObj:r};if("wframe"!==this.options.frameMode||i)if(0==this.options.useQueryString){WebSquare._popupInfo="";var b={};if(t)if(p=a.x.baseURI+p+(p.indexOf("?")>-1?"&":"?"),g.D.isEncodeParameter())if(g.D.getEncodeParameterOption("onlyParam")){for(var y=t.split(/[\&\?]/),v=0;v<y.length;v++)(w=y[v].indexOf("="))>=0&&(y[v]=g.D.encodeParameter(y[v].substring(0,w))+y[v].substring(w));t=y.join("&"),p=p+u+"="+l.v._getMsaSrc(t,f)}else p=p+u+"="+g.D.encodeParameter(l.v._getMsaSrc(t,f));else p=p+u+"="+l.v._getMsaSrc(t,f);this.options.xml&&(m="idx10_"+(new Date).getTime()+1e4*Math.random(),WebSquare.uiplugin.popup.popupParams[m]=this.options.xml,b.idx=this.idx),b.popupID=this.id,b.w2xHome=WebSquare.w2xHome,b.w2xDocumentRoot=WebSquare.w2xDocumentRoot+this._getW2Config(),WebSquare._popupInfo=JSON.stringify(b)}else{if(t){if(p=a.x.baseURI+p+(p.indexOf("?")>-1?"&":"?"),g.D.getEncodeParameterOption("onlyParam")){var w;for(y=t.split(/[\&\?]/),v=0;v<y.length;v++)(w=y[v].indexOf("="))>=0&&(y[v]=g.D.encodeParameter(y[v].substring(0,w))+y[v].substring(w));t=y.join("&")}p=g.D.isEncodeParameter()?g.D.getEncodeParameterOption("onlyParam")?p+u+"="+l.v._getMsaSrc(t,f)+"&":p+u+"="+g.D.encodeParameter(l.v._getMsaSrc(t,f)+"&"):p+u+"="+l.v._getMsaSrc(t,f)+"&"}else p+=p.indexOf("?")>-1?"&":"?";this.options.xml?(m="idx10_"+(new Date).getTime()+1e4*Math.random(),WebSquare.uiplugin.popup.popupParams[m]=this.options.xml,g.D.isEncodeParameter()?g.D.getEncodeParameterOption("onlyParam")?(p=p+g.D.encodeParameter("popupID=")+this.id,p+=g.D.encodeParameter("&idx=")+m,p+=g.D.encodeParameter("&w2xHome=")+WebSquare.w2xHome,p+=g.D.encodeParameter("&w2xDocumentRoot=")+WebSquare.w2xDocumentRoot+this._getW2Config()):p+=g.D.encodeParameter("popupID="+this.id+"&idx="+m+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):p=p+"popupID="+this.id+"&idx="+m+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):g.D.isEncodeParameter()?g.D.isEncodeParameter()?(p=p+g.D.encodeParameter("popupID=")+this.id,p+=g.D.encodeParameter("&w2xHome=")+WebSquare.w2xHome,p+=g.D.encodeParameter("&w2xDocumentRoot=")+WebSquare.w2xDocumentRoot+this._getW2Config()):p+=g.D.encodeParameter("popupID="+this.id+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):p=p+"popupID="+this.id+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()}else t&&(p=t);if(1==i){if(!o){var S=l.v.getConfiguration("/WebSquare/clearMemory/@closeChildPopup");n&&"wframe"===n.options.pluginName&&"false"!==S&&(n.popupList||(n.popupList=[]),!1===s&&(this._parentFrameUUID=n.uuid),n.popupList.push(this))}var C=this.makePopupString(this.options);if(this.popupWin=window.open(p,this.options.id,C),!this.popupWin)return;WebSquare.uiplugin.popup._status="busy",l.v.setTimer((function(){WebSquare.uiplugin.popup._status="idle"}),{key:j+"_preventPopupClickTimer",delay:1})}else{var _,x=!1!==this.options.useMaximize,I=this.options.className&&""!=this.options.className?" "+this.options.className:"",T=this.options.buttonInfo;if(d!==this.options.scope_uuid&&!0===this.options.frameModal&&"browser"!==this.options.type){var k=WebSquare.idCache[this.options.scope_uuid];_=g.D.getStyleProperty(k.render,"overflow")}else _=g.D.getStyleProperty(document.documentElement,"overflow");var D,L=!1
;this.options.useControl&&1==(D=a.x.extend({minimize:!0,maximize:!0,close:!0},this.options.controls)).minimize&&(L=!0);var W=this.options.scope_uuid?WebSquare.idCache[this.options.scope_uuid]:null;this.popupWin=WebSquare.controlFactory.create(this.options.org_id||this.options.id,{className:"w2popup_window"+I,src:p,windowTitle:this.options.popupName,defaultWidth:this.options.width+"",defaultHeight:this.options.height+"",title:this.options.id,dragResizable:void 0===this.options.resizable||this.options.resizable,dragResizableLeft:void 0!==this.options.resizableLeft&&this.options.resizableLeft,displayParentWindowScroll:"auto"==_||"scroll"==_,useMaximize:x,frameMode:this.options.frameMode,disableCloseButton:this.options.disableCloseButton,useATagBtn:this.options.useATagBtn,useATagTitle:this.options.useATagTitle,useHeadingTagTitle:this.options.useHeadingTagTitle,foldOnMinimized:L,foldSize:this.options.foldSize,pluginName:"window",parseChild:!1,windowDragMove:this.options.windowDragMove,processMsgFrame:this.options.processMsgFrame||!1,frameModal:this.options.frameModal||!1,windowMoveType:this.options.windowMoveType,minVisibleWindowPixel:this.options.minVisibleWindowPixel||0,modal:this.options.modal||!1,msaName:this.options.msaName,fixPosition:this.options.fixPosition||!1},null,W,this.options.scope_uuid,!0),WebSquare.uiplugin.popup._status="busy",this.options.dataObject&&"wframe"===this.options.frameMode&&this.popupWin.setDataObject(this.options.dataObject)}if(d!==this.options.scope_uuid){if(!1===s)if(this.options.frameModal){var A,M;switch((A=this._getModalOpendFrame(r))&&(M=A.uuid),this.options.frameModal){case"frame":r&&d!==r.uuid?(o=r,o=this._getModalTargetFrame(o.uuid,this.options.frameModal,M)):o=null;break;case"parent":o=d!==r.parentFrame?WebSquare.idCache[r.parentFrame]:r,o=this._getModalTargetFrame(o.uuid,this.options.frameModal,M);break;case"top":o=null;break;default:o=this._getModalTargetFrame(r.uuid,this.options.frameModal,M)}o&&(this._targetFrameObjUUID=o.uuid)}else(o=this._getTargetFrame(this.options.scope_uuid))&&(!o.parentControl||"tabControl"!==o.parentControl.options.pluginName&&"windowContainer"!==o.parentControl.options.pluginName?this.options.frameModal=o.org_id:this.options.frameModal=o.parentControl.org_id,this._targetFrameObjUUID=o.uuid);o?(this._compModal=!0,!0===this.options.modal&&(o._modal=!0),i&&(n.popupList||(n.popupList=[]),this._parentFrameUUID=o.uuid,n._parentFrameUUID=o.uuid,n.popupList.push(this))):(s=!0,this._bodyShowModal())}else s=!0,this._bodyShowModal();if(m&&(this._idx=m),this.popupWin&&this.popupWin.options&&(this.options.closeAction&&(this.popupWin.options.closeAction=this.options.closeAction),this.options.openAction&&(this.popupWin.options.openAction=this.options.openAction),this.options.clickAction&&(this.popupWin.options.clickAction=this.options.clickAction)),g.D.getBoolean(this.options.parentPopupDisabled)&&window.self!==window.top){var E=window.parent;if(E.WebSquare&&E.WebSquare.uiplugin.popup&&E.WebSquare.uiplugin.popup.popupList&&E.WebSquare.uiplugin.popup.popupList.length>0)for(v=0;v<E.WebSquare.uiplugin.popup.popupList.length;v++)E.WebSquare.uiplugin.popup.popupList[v].popupWin.setDisabled(!0)}if("browser"==this.options.type)for(var R=0;R<WebSquare.uiplugin.popup.popupList.length;R++)this.options.id===WebSquare.uiplugin.popup.popupList[R].id&&WebSquare.uiplugin.popup.popupList.splice(R,1);if(WebSquare.uiplugin.popup.popupList.push(this),1==i){if(null!=this.popupWin&&this.popupWin.focus(),null!=this.popupWin){var N=WebSquare.getBody();if(o){if((N=o).stackComponents&&N.stackComponents.popup)for(R=0;R<N.stackComponents.popup.length;R++)this.options.id===N.stackComponents.popup[R].id&&(N.stackComponents.popup.splice(R,1),N.modalStack.splice(R,1));(G={}).popup={id:this.id,modal:this.options.modal};b={className:"w2modal_popup",isPopup:!0,useWindowPopup:i,popupModal:this.options.modal,stackComponents:G};N.showFrameModal(b)}N.modalEvent(this.id)}}else{var F=0,O=0
;if("wframe"===this.options.frameMode){var B={};if(null!=this.options.dataObject){var V=this.options.dataObject.type||"s",P=this.options.dataObject.name;"string"==typeof P&&P.length>0&&(this.popupWin.options.popupParam=V.charAt(0)+P)}else if(null!=this.options.xml){var H="idx_"+this.popupWin.popupIdx++;B.idx="s"+H,B[H]="d"+this.options.xml,this.popupWin.options.popupParam="d"+H}B.popupID="s"+this.id,B.w2xHome="s"+WebSquare.w2xHome,B.w2xDocumentRoot="s"+WebSquare.w2xDocumentRoot,this.popupWin.options.params=JSON.stringify(B),o&&(this.popupWin._targetFrameObjUUID=this._targetFrameObjUUID),this.popupWin._isWframePopup=!0;var j=this.popupWin.id;this.popupWin.bind("onwindowload",(function(){WebSquare.uiplugin.popup._status="done",l.v.setTimer((function(){WebSquare.uiplugin.popup._status="idle"}),{key:j+"_preventPopupClickTimer",delay:10})}))}else this.popupWin.bind("onwindowload",(function(){WebSquare.uiplugin.popup._status="done",WebSquare.uiplugin.popup._status="idle"})),F=document.documentElement.scrollTop||document.body.scrollTop,O=document.documentElement.scrollLeft||document.body.scrollLeft;T&&(this.popupWin.hasButtons=!0,this.popupWin.buttonInfo=T);var z=this;this.popupWin.addEvent("onbeforeclose",(function(){if(WebSquare.uiplugin.popup.removeFromPopupList(z.options.id),!0===z._compModal&&(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")!==this.scope_obj.uuid)if(this.options.frameModal)this.parentControl.hideFrameModal(this.id);else{var t=z._getTargetFrame(this.scope_obj.uuid);t&&t.hideFrameModal(this.id)}else z.options.useModalStack?z.hideModal(z.id):z.options.useModalDisable?WebSquare.layer.hideModal():1==z.options.modal&&WebSquare.getBody().hideModal(!z.options.useModalStack);if(g.D.getBoolean(z.options.parentPopupDisabled)&&window.self!==window.top){var e=window.parent;if(e.WebSquare&&e.WebSquare.uiplugin.popup&&e.WebSquare.uiplugin.popup.popupList&&e.WebSquare.uiplugin.popup.popupList.length>0)for(var i=0;i<e.WebSquare.uiplugin.popup.popupList.length;i++)e.WebSquare.uiplugin.popup.popupList[i].popupWin.setDisabled(!1)}}));N=WebSquare.getBody();if(o?(o.wframeSubPopup||(o.wframeSubPopup=[]),o.wframeSubPopup.indexOf(this.id)&&o.wframeSubPopup.push(this.id),N=o):n&&!0!==n._isWframePopup&&"wframe"===n.options.pluginName&&(N.wframeSubPopup||(N.wframeSubPopup=[]),N.wframeSubPopup.indexOf(n.uuid)&&N.wframeSubPopup.push(n.uuid)),this.popupWin.writeTo(N,null,this.parentFrame),o){var G;(G={}).popup={id:this.id,modal:this.options.modal};b={className:"w2modal_popup",isPopup:!0,useWindowPopup:i,popupModal:this.options.modal,stackComponents:G};o.showFrameModal(b)}var U=this.options.left,X=this.options.top,K=parseInt(this.options.width)-2,Y=parseInt(this.options.height)-2;if(o){var $=N.render.clientWidth||N.render.style.width||WebSquare.style.getComputedStyle(N.render,"width"),J=N.render.clientHeight||N.render.style.height||WebSquare.style.getComputedStyle(N.render,"height");if(0===$||"100%"===$||"auto"===$){for(var Z,Q=N.render.parentElement;Q&&(0===(Z=Q.clientWidth||Q.style.width||WebSquare.style.getComputedStyle(Q,"width"))||"100%"===Z||"auto"===Z);)Q=Q.parentElement;$=0===Z||"100%"===Z||"auto"===Z?document.documentElement.clientWidth||document.body.clientWidth||0:Z}if(0===J||"100%"===J||"auto"===J){var tt;for(Q=N.render.parentElement;Q&&(0===(tt=Q.clientHeight||Q.style.width||WebSquare.style.getComputedStyle(Q,"height"))||"100%"===tt||"auto"===tt);)Q=Q.parentElement;J=0===tt||"100%"===tt||"auto"===tt?document.documentElement.clientHeight||document.body.clientHeight||0:tt}U+K>$&&(U=$-K-2),X+Y>J&&(X=J-Y-2),K>$&&(K=$-2),Y>J&&(Y=J-2),"relative"!==WebSquare.style.getStyle(N.render,"position")&&(X+=N.render.offsetTop,U+=N.render.offsetLeft)}var et=g.D.getBoolean(l.v.getConfiguration("/WebSquare/popup/lazyPopup/@value"));if(et||(this.popupWin.setPosition(U+O,X+F),this.popupWin.setSize(K,Y)),this.popupWin.activate(),(o||this.options.frameModal||n&&!0===n.options.popupAutoClose)&&(this.popupWin.frame.options.popupAutoClose=!0),
et&&(this.popupWin.setPosition(U,X),this.popupWin.setSize(K,Y)),"wframe"===this.options.frameMode){q.B.fireEvent(this.popupWin.frame,"onsetsize");for(var it=!1,ot=document.activeElement;null!=ot&&ot!==document.body;ot=ot.parentElement)if(this.popupWin.hasClass(ot,"w2popup_window")){it=!0;break}it||this.popupWin._focus()}if(g.D.isIE(6),this.options.useControl){var st=document.getElementById(this.popupWin.id+"_header_control"),rt=st.getElementsByTagName("div");WebSquare.style.addClass(st,"w2window_header_control_inline");for(var at=0,nt=rt.length;at<nt;at++)WebSquare.style.addClass(rt[at],"w2window_btn_header_control");var lt=document.getElementById(this.id+"_minimize"),ht=document.getElementById(this.id+"_restore"),dt=document.getElementById(this.id+"_close");D.minimize||(WebSquare.style.setStyle(lt,"display","none"),WebSquare.style.removeClass(lt,"w2window_btn_header_control")),D.maximize||(WebSquare.style.setStyle(ht,"display","none"),WebSquare.style.removeClass(ht,"w2window_btn_header_control")),D.close||(WebSquare.style.setStyle(dt,"display","none"),WebSquare.style.removeClass(dt,"w2window_btn_header_control"))}if(this.popupWin.movable(!this.popupWin.options||!0!==this.popupWin.options.fixPosition),this.options.alwaysOnTop){var ct=this.popupWin.getStyle("z-index");WebSquare.uiplugin.popup._zIndex<ct?WebSquare.uiplugin.popup._zIndex=ct:this.popupWin.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)}this.popupWin.addEvent("onclick",(function(){if(z.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)),this.options.clickAction){var t=g.D.getGlobalFunction(this.options.clickAction,this.scope_id);"function"==typeof t&&t.call(this,WebSquare.uiplugin.popup._zIndex)}})),this.popupWin.addEvent("ondragstart",(function(){z.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex))})),this.popupWin.addEvent("onwindowmousedown",(function(){if(z.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)),this.options.clickAction){var t=g.D.getGlobalFunction(this.options.clickAction,this.scope_id);"function"==typeof t&&t.call(this,WebSquare.uiplugin.popup._zIndex)}}));try{switch(typeof this.options.openAction){case"function":this.options.openAction.apply(this,this);break;case"string":var ut=g.D.getGlobalFunction(this.options.openAction,this.scope_id);"function"==typeof ut&&(this.options.openAction=ut,ut.apply(this,this))}}catch(t){h.w.printStackTrace(t,null,this)}}}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype._getModalOpendFrame=function(t){try{for(var e,i=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";t&&i!==t.uuid;)t._wframePopupModal&&(e=t),t=WebSquare.idCache[t.parentFrame];return e}catch(t){h.w.printStackTrace(t)}},de.prototype._getTargetFrame=function(t,e){try{for(var i,o=WebSquare.idCache[t];null!=o&&o!==WebSquare.strictModeFrame;o=WebSquare.idCache[o.parentFrame])if(o.options&&!0===o.options.frameModal){i=o;break}return i}catch(t){h.w.printStackTrace(t)}},de.prototype._getModalTargetFrame=function(t,e,i){try{var o=WebSquare.idCache[t],s=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"",r=o,a=o,n=!1;for(i||(n=!0);r&&s!==r.uuid&&("frame"!==this.options.frameModal||0!==WebSquare.uiplugin.popup.popupList.length);)if(r._wframePopupModal&&(a=r),i&&r.uuid===i&&(n=!0),e){if(n&&(e===r.id||r.parentControl&&0===r.parentControl.org_id.indexOf(e)))break;r=WebSquare.idCache[r.parentFrame]}else{if(r.parentFrame===s)break;r=WebSquare.idCache[r.parentFrame]}return"frame"===this.options.frameModal?a:e&&r.uuid===s?a||null:r}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype._bodyShowModal=function(){try{
this.options.useModalStack?this.showModal():1==this.options.modal&&(this.options.useModalDisable?WebSquare.layer.showModal():WebSquare.getBody().showModal())}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.makeParamString=function(t){try{var e=[];for(var i in t)e.push(i+"="+t[i]);return"?"+e.join("&")}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.getWebsquareUrl=function(t,e,i){try{if(i||(i=window),i&&i.location){e.w2xPath=l.v.getURL(t),e.w2xHome=WebSquare.w2xHome,e.w2xDocumentRoot=WebSquare.w2xDocumentRoot;var o=this.makeParamString(e);return a.x.baseURI+"popup.html"+o}return""}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.getHTMLUrl=function(t,e,i){try{if(i||(i=window),i&&i.location){var o=this.makeParamString(e);return t.replace(/\?.*/,o)}return""}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.makePopupString=function(t){try{var e="width height resizable status menubar scrollbars title left top"+(!0===this.options.fullscreen?"fullscreen":""),i="";for(var o in t){if(e.indexOf(o)>-1)if("width"==o||"height"==o||"left"==o||"top"==o)i+=o+"="+parseInt(t[o])+"px,";else i+=o+"="+(1==t[o]?"yes":"no")+","}return i}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.close=function(t){try{if(this.popupWin){var e=this.popupWin.close(t);if(!1!==e){if(1==this.options.modal&&this.useWindowPopup()){var i=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(this._parentFrameUUID&&this._parentFrameUUID!==i){var o=WebSquare.idCache[this._parentFrameUUID];o&&o.hideFrameModal(this.id)}else WebSquare.getBody().hideModal()}this.popupWin=null,WebSquare.dataObject[this.id]&&delete WebSquare.dataObject[this.id]}return e}}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.getWindow=function(){try{return 1==this.useWindowPopup()?this.popupWin:this.popupWin.frame.getWindow()}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.useWindowPopup=function(){try{var t=!1;return"browser"==this.options.type&&(t=!0),"window"==this.options.type&&(t=!0),"window"==this.options.type&&1==this.options.useIFrame&&(t=!1),t}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.setSize=function(t,e){try{1==this.useWindowPopup()?this.popupWin.resizeTo(t,e):(this.popupWin.setSize(parseInt(t)-2,parseInt(e)-2),g.D.isIE(6))}catch(t){h.w.printStackTrace(t)}},de.prototype.setCloseButtonStatus=function(t){try{this.popupWin.setCloseButtonStatus(t)}catch(t){h.w.printStackTrace(t)}},de.prototype._getW2Config=function(){try{var t="",e=-1;if(g.D.isEncodeParameter()){if((e=location.toString().indexOf(g.D.encodeParameter("w2Config")))>=0)(o=(i=location.toString().slice(e+"w2Config=".length)).slice(0,i.indexOf(g.D.encodeParameter("config.xml"))+"config.xml".length))&&(t=g.D.encodeParameter("&w2Config=")+o);else if(g.D.getBoolean(l.v.getConfiguration("/WebSquare/encodeParameter/@fallback"))){var i,o;if((e=location.toString().indexOf("w2Config"))>=0)(o=(i=location.toString().slice(e+"w2Config=".length)).slice(0,i.indexOf("config.xml")+"config.xml".length))&&(t=g.D.getEncodeParameterOption("onlyParam")?g.D.encodeParameter("&w2Config=")+o:g.D.encodeParameter("&w2Config="+o))}}else if((e=location.toString().indexOf("w2Config"))>=0)(o=(i=location.toString().slice(e+"w2Config=".length)).slice(0,i.indexOf("config.xml")+"config.xml".length))&&(t="&w2Config="+o);return t}catch(t){h.w.printStackTrace(t,null,this)}},de.prototype.showModal=function(){var t=WebSquare.getBody();if(g.D.getBoolean(this.options.useModalStack)){if("browser"===this.options.type&&t.stackComponents&&t.stackComponents.popup)for(var e=0;e<t.stackComponents.popup.length;e++)this.options.id===t.stackComponents.popup[e].id&&(t.stackComponents.popup.splice(e,1),t.modalStack.splice(e,1));var i={};i.popup={id:this.id,modal:this.options.modal};var o={className:"w2modal_popup",isPopup:!0,popupModal:this.options.modal,stackComponents:i};t.showModal(o)}else t.showModal("w2modal_popup")},de.prototype.hideModal=function(t){WebSquare.getBody().hideModal(null,t)}
;var ce=__webpack_require__(9533),ue=__webpack_require__(8137);r.C.init(window),a.x.BootLoader=n.d,a.x.core=l.v,a.x.exception=h.w,a.x.logger=d.k,a.x.debug=d.f,a.x.xml=c.L,a.x.xmljs=u,a.x.collection=p.h,a.x.Parser=w,a.x.Model=S,a.x.ModelUtil=C.z,a.x.DataCollection=x,a.x.Events=b,a.x.net=I,a.x.session=T,a.x.util=g.D,a.x.date=k.h,a.x.text=D.f,a.x.numberFormatter=D.V,a.x.layer=L,a.x.cookie=W,a.x.effect=A,a.x.targetIterator=E,a.x.event=q.B,a.x.skin=v,a.x.language=R.d,a.x.cssStyleSheet=F,a.x.styleSheet=N,a.x.dragdrop=O,a.x.style=B,a.x.validator=V.s,a.x.IValidate=V.z,a.x.json=_,a.x.jsonUtil=m.h,a.x.jsonParser=P,a.x.pageInfo=H,a.x.jsLoader=z,a.x.format=G,a.x.bigDecimal=U,a.x.bigDecimalObj=X,a.x.api=K,a.x.Elem=f.D,a.x.korHelper=Y,a.x.MessageBroker=J,a.x.eventControl=Z.U,a.x.cssManager=y,a.x.cssCustomizer=Q.g,a.x.modelControl=tt,a.x.xfControl=et.s,a.x.controlFactory=j.D,a.x.historyManager=it,a.x.itemsetControl=ot.E,a.x.DataCollection.dataList=ct,a.x.DataCollection.filterController=at,a.x.DataCollection.dataListCellInfo=ht,a.x.DataCollection.dataMap=pt,a.x.DataCollection.linkedDataList=bt,a.x.DataCollection.aliasDataList=yt,a.x.DataCollection.aliasDataMap=vt,a.x.DataCollection.aliasLinkedDataList=wt,a.x.uiplugin={},a.x.uiplugin.balloonTip=St.balloonTip,a.x.uiplugin.group=Ct.group,a.x.uiplugin.wframe=_t.wframe,a.x.uiplugin.body=xt,a.x.uiplugin.textbox=It.textbox,a.x.uiplugin.anchor=Tt.anchor,a.x.uiplugin.itemTable=kt,a.x.uiplugin.gridItemTable=Dt,a.x.uiplugin.gridViewItemTable=Lt,a.x.uiplugin.selectbox=Wt.selectbox,a.x.uiplugin.selectbox_native=Wt.selectbox_native,a.x.uiplugin.input=At.input,a.x.uiplugin.span=Mt.span,a.x.uiplugin.dateHelper=Et,a.x.uiplugin.calendar=qt.calendar,a.x.uiplugin.inputCalendar=Rt.inputCalendar,a.x.uiplugin.textarea=Nt.textarea,a.x.uiplugin.checkcombobox=Ft.checkcombobox,a.x.uiplugin.autoComplete=Ot.autoComplete,a.x.uiplugin.list=Bt.list,a.x.uiplugin.floatingLayer=Vt.floatingLayer,a.x.uiplugin.radio=Pt.radio,a.x.uiplugin.spinner=Ht.spinner,a.x.uiplugin.gridView=jt.gridView,a.x.uiplugin.drilldown=jt.drilldown,a.x.uiplugin.mappingController=jt.mappingController,a.x.uiplugin.linkedMappingController=jt.linkedMappingController,a.x.uiplugin.cellInfo=jt.cellInfo,a.x.uiplugin.headerInfo=jt.headerInfo,a.x.uiplugin.trigger=zt.trigger,a.x.uiplugin.image=Gt.image,a.x.uiplugin.pageList=Ut.pageList,a.x.uiplugin.tabControl=Xt.tabControl,a.x.uiplugin.content=Xt.content,a.x.uiplugin.generator=Kt.generator,a.x.uiplugin.upload=Yt.upload,a.x.uiplugin.treeview=$t.treeview,a.x.uiplugin.treeview_virtual=Jt.treeview_virtual,a.x.uiplugin.checkbox=Zt.checkbox,a.x.tag=ee,a.x.uiplugin.output=ie.output,a.x.uiplugin.window=oe.wq_window,a.x.uiplugin.windowContainer=se.windowContainer,a.x.uiplugin.accordion=re.accordion,a.x.uiplugin.panels=re.panels,a.x.uiplugin.widgetContainer=ae.widgetContainer,a.x.uiplugin.widget=ae.widget,a.x.uiplugin.panelContainer=ne.panelContainer,a.x.uiplugin.panel=ne.panel,a.x.uiplugin.udc=le,a.x.uiplugin.popup=he,a.x.uiplugin.popupWindow=de,a.x.uiplugin.scrollView=ce.scrollView,a.x.uiplugin.gridLayout=ue.gridLayout,window.WebSquare=a.x})()})();
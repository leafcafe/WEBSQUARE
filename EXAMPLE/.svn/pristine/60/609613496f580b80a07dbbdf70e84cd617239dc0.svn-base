<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko"><head><title>GridView의 A컬럼의 선택값에 따라 B컬럼 목록 구성하기</title><link rel="stylesheet" href="css/book.css" type="text/css" /><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" /><meta name="EPB-UUID" content="26ad9595a3708c5f" /></head><body><div id="content"><h1 id="r_5a15d34f167e5580" class="chapter_title">GridView의 A컬럼의 선택값에 따라 B컬럼 목록 구성하기</h1><h1 id="r_87884c18f3478530" class="element heading1"><span class="heading1_n">1</span>개요</h1><pre id="r_3b09c0569c52b1a9" class="element pre">GridView의 A 컬럼의 값에 따라 B 컬럼의 목록을 동적으로 구성하는 방법 중 LinkedDataList를 활용한 예제입니다.
GridView의 <span class="r_ex_text_emp1_span">분류</span> 컬럼의 선택값에 따라 <span class="r_ex_text_emp1_span">도서명</span>목록이 변경됩니다.</pre><p id="r_b50c93803f6a0a92" class="element r_example_link_p"><a class="link" href="http://example.inswave.kr/sp5/exampleLink.html?p=P00041">P00041</a></p><h1 id="r_f3c1a321cd696c06" class="element heading1"><span class="heading1_n">2</span>구현된 기능</h1><ul id="r_d99978b843abcc34" class="element unordered_list"><li><p>분류 컬럼의 선택 값에 따라 도서명 컬럼의 목록 구성하기</p></li></ul><div id="r_64c650a6257a86c4" class="element caution">이 예제는 문서를 통해 구조를 대략 이해하고 예제 파일을 실행하여 테스트해보는 것을 추천합니다.</div><h1 id="r_3cbb4d26ea5a2c63" class="element heading1"><span class="heading1_n">3</span>예제 테스트 방법</h1><dl id="r_b4b831c4ddf2fba5" class="element definition_list"><dt>1. 변경 전 분류 컬럼의 값과 도서명 컬럼의 목록 확인하기</dt><dd><p>분류 컬럼의 값과 도서명 컬럼의 목록을 확인합니다.</p><p>[실행된 화면 예시 이미지]</p><p><img alt="" src="images/image224.png" width="609" height="226" /></p></dd><dt>2. 분류 컬럼의 목록에서 값 선택하기</dt><dd><p>분류 컬럼의 목록에서 인문을 선택합니다.</p><p>[실행된 화면 예시 이미지]</p><p><img alt="" src="images/image225.png" width="614" height="232" /></p></dd><dt>3. 변경된 목록 확인하기</dt><dd><p>인문에 해당하는 도서명으로 목록이 변경되었음을 확인합니다.</p><p>[실행된 화면 예시 이미지]</p><p><img alt="" src="images/image226.png" width="612" height="228" /></p></dd></dl><h1 id="r_9d89f4fb32a61c81" class="element heading1"><span class="heading1_n">4</span>구현 예시</h1><div id="r_1ce72845619aef5c" class="element caution">GridView와 DataCollection의 기본에 대한 이해도가 있다는 전제로 주요 구조, 설정만 작성되어있습니다.<br/>LinkedDataList의 이해가 없는 분들은 관련 링크를 통해 기본 구조 등을 확인하시는 것을 권장합니다.</div><h2 id="r_66612c9666c4230f" class="element heading2"><span class="heading2_n">4.1</span>예제의 DataCollection 정보 요약</h2><pre id="r_c35bbf0d07a4b9b4" class="element pre">이 예제는 2개의 DataList와 2개의 LinkedDataList를 사용했습니다.
아래는 예제에 구현된 DataCollection ID별 설명입니다.</pre><table id="r_0e1306d58554027a" class="element table"><thead><tr><th><p>ID</p></th><th><p>Type</p></th><th><p>용도</p></th></tr></thead><tbody><tr><td><p>dlt_list</p></td><td><p>DataList</p></td><td><p>GridView와 연결된 데이터.</p></td></tr><tr><td><p>dlt_code</p></td><td><p>DataList</p></td><td><p>분류 컬럼과 도서명 컬럼의 목록을 구성할 전체 코드 목록입니다.</p><p>이 목록이 분류 목록과 도서명 목록의 원천 데이터입니다.</p><p>ldt_linkcode1, ldt_linkcode2 의 원천 DataList.</p></td></tr><tr><td><p>ldt_linkcode1</p></td><td><p>LinkedDataList</p></td><td><p>분류 컬럼의 목록을 구성합니다. dlt_code에서 upperCode 컬럼의 값이 0 인 데이터만 추출.</p></td></tr><tr><td><p>ldt_linkcode2</p></td><td><p>LinkedDataList</p></td><td><p>도서명 컬럼의 목록을 구성합니다.</p><p>dlt_code에서 upperCode 컬럼의 값이 dlt_list의 category 컬럼의 값과 같은 목록을 추출.</p><p>dlt_list가 GridView와 연결되어 있는 경우 GridView의 행 별로 조건이 적용됩니다.</p></td></tr></tbody></table><h2 id="r_90159b32c18d6fad" class="element heading2"><span class="heading2_n">4.2</span>dlt_code 데이터 구조 알아보기</h2><pre id="r_b1d162fe2f3afc98" class="element pre">dlt_code의 컬럼은 label, code, upperCode로 구성되어있습니다.</pre><ul id="r_7a83da137ab9c221" class="element unordered_list"><li><p>label : 화면에 출력될 값</p></li><li><p>code : key 값</p></li><li><p>upperCode : 상위 그룹의 key 값</p></li></ul><pre id="r_fe8f6d5d5d79e13f" class="element pre">아래는 dlt_code의 데이터를 담은 스튜디오 이미지 입니다.</pre><div id="r_8377fa32a60b4556" class="element image"><p class="caption"><span class="image_caption_n">그림 0-1.</span>dlt_code의 데이터 구조 예시</p><p class="content"><img alt="" src="images/image227.png" width="585" height="889" /></p></div><h2 id="r_1a9bd541bb4cfb27" class="element heading2"><span class="heading2_n">4.3</span>ldt_linkcode1 구조 알아보기</h2><pre id="r_61ce10e642bb2345" class="element pre">GridView의 <span class="r_blue001_span">분류</span> 목록과 연결되어있습니다.
ldt_linkcode1는 dlt_code와 bind 되어있으며 조건은 <span class="r_ex_text_emp1_span">upperCode == '0'</span> 입니다.</pre><div id="r_b09e1bd0b958cd42" class="element image"><p class="caption"><span class="image_caption_n">그림 0-2.</span>ldt_linkcode1 설정 예시 이미지</p><p class="content"><img alt="" src="images/image228.png" width="479" height="75" /></p></div><p id="r_3755b8b8157d3db1" class="element normal">아래는 Source 본문입니다.</p><div id="r_cc6bc6d024e32e7b" class="element code support_code_numbering"><pre><span class="digits_1 code_line"></span>&lt;w2:linkedDataList <span class="attribute_name">id</span>=<span class="attribute_value">"ldt_linkcode1"</span> <span class="attribute_name">bind</span>=<span class="attribute_value">"dlt_code"</span>&gt;
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;w2:condition <span class="attribute_name">type</span>=<span class="attribute_value">"filter"</span>&gt;&lt;![CDATA[upperCode <span class="attribute_name">=</span>= <span class="attribute_value">'0'</span><span class="attribute_name">]]</span>&gt;&lt;/w2:condition&gt;
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;w2:condition <span class="attribute_name">type</span>=<span class="attribute_value">"sort"</span>&gt;&lt;![CDATA[]]&gt;
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/w2:condition&gt;
<span class="digits_1 code_line"></span>&lt;/w2:linkedDataList&gt;</pre></div><h2 id="r_6b915e8ab23bdee8" class="element heading2"><span class="heading2_n">4.4</span>ldt_linkcode2 구조 알아보기</h2><pre id="r_2acd1d0dd632b973" class="element pre">GridView의 <span class="r_blue001_span">도서명</span> 목록과 연결되어있습니다.
ldt_linkcode2는 dlt_code와 bind 되어있으며 조건은 <span class="r_ex_text_emp1_span">upperCode == ref ( 'data:dlt_list.category')</span> 입니다.
GridView에 연결된 dlt_list의 category 값이 dlt_code의 upperCode와 같은 데이터만 추출됩니다. GridView의 행 마다 조건이 적용됩니다.</pre><div id="r_70adc7169d4ed0f9" class="element image"><p class="caption"><span class="image_caption_n">그림 0-3.</span>ldt_linkcode2 설정 예시 이미지</p><p class="content"><img alt="" src="images/image229.png" width="482" height="78" /></p></div><p id="r_7b60a48f2aa76297" class="element normal">아래는 Source 본문입니다.</p><div id="r_7957d1ff3446b2ac" class="element code support_code_numbering"><pre><span class="digits_1 code_line"></span>&lt;w2:linkedDataList <span class="attribute_name">id</span>=<span class="attribute_value">"ldt_linkcode2"</span> <span class="attribute_name">bind</span>=<span class="attribute_value">"dlt_code"</span>&gt;
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;w2:condition <span class="attribute_name">type</span>=<span class="attribute_value">"filter"</span>&gt;&lt;![CDATA[upperCode <span class="attribute_name">=</span>= <span class="attribute_value">ref </span><span class="attribute_name">(</span> 'data:dlt_list.category')]]&gt;&lt;/w2:condition&gt;
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;w2:condition <span class="attribute_name">type</span>=<span class="attribute_value">"sort"</span>&gt;&lt;![CDATA[]]&gt;
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/w2:condition&gt;
<span class="digits_1 code_line"></span>&lt;/w2:linkedDataList&gt;</pre></div><h2 id="r_9f11d9ee609b54c9" class="element heading2"><span class="heading2_n">4.5</span>dlt_list 구조 알아보기</h2><pre id="r_a9a7fc5f5c8a7baa" class="element pre">GridView에 출력할 데이터입니다.
<span class="r_blue001_span">분류</span> 컬럼과 <span class="r_blue001_span">도서명</span> 컬럼은 selectbox로 구성되어있기 때문에 데이터가 code값으로 구성되어있습니다.</pre><div id="r_368dc668020c299c" class="element image"><p class="caption"><span class="image_caption_n">그림 0-4.</span>dlt_list 데이터 예시</p><p class="content"><img alt="" src="images/image230.png" width="481" height="276" /></p></div><h2 id="r_5766f96dbcf0bdc2" class="element heading2"><span class="heading2_n">4.6</span>GridView 설정하기</h2><pre id="r_9a8d8cd7596a8b83" class="element pre">GridView의 주요 설정에 대한 예시입니다.</pre><div id="r_fa2912c60a718a6a" class="element image"><p class="caption"><span class="image_caption_n">그림 0-5.</span>GridView UI 설정 예시</p><p class="content"><img alt="" src="images/image231.png" width="336" height="128" /></p></div><div id="r_ed0a24b143738872" class="element image"><p class="caption"><span class="image_caption_n">그림 0-6.</span>GridView의 분류 컬럼의 목록(itemSet) 설정 예시</p><p class="content"><img alt="" src="images/image232.png" width="468" height="693" /></p></div><div id="r_b525198652375cba" class="element image"><p class="caption"><span class="image_caption_n">그림 0-7.</span>GridView의 도서명 컬럼의 목록(itemSet) 설정 예시</p><p class="content"><img alt="" src="images/image233.png" width="427" height="689" /></p></div><h2 id="r_3ffb35fe63a52f6f" class="element heading2"><span class="heading2_n">4.7</span>GridView의 onafteredit 이벤트 적용하기</h2><pre id="r_3a2a6954cf1ef80f" class="element pre"><span class="r_blue001_span">분류</span>가 변경되면 <span class="r_blue001_span">도서명</span> 셀(Cell)의 목록은 변경되지만 셀의 값(value)은 기존에 선택된 값이 남아있게 됩니다. 그래서 사용자가 분류를 변경하면 도서명의 값을 도서명 목록 중 첫번째 값으로 할당하는 스크립트를 GridView의 onafteredit 이벤트를 이용하여 작성합니다.</pre><div id="r_562d8d41e4c3c36a" class="element code support_code_numbering"><pre><span class="digits_10 code_line"></span><span class="comment">/**
<span class="digits_10 code_line"></span> * gridView의 afteredit 이벤트 핸들러
<span class="digits_10 code_line"></span> */</span>
<span class="digits_10 code_line"></span>scwin.grd_example_onafteredit = <span class="keyword">function</span>(row,col,value) {
<span class="digits_10 code_line"></span>    <span class="keyword">var</span> id = <span class="keyword">this</span>.getColumnID( col );
<span class="digits_10 code_line"></span>    <span class="keyword">if</span> ( id == <span class="string">'category'</span> ) {
<span class="digits_10 code_line"></span>        <span class="comment">//이미 선택되어있는 value값 변경해주기</span>
<span class="digits_10 code_line"></span>        <span class="keyword">var</span> tmpValue = dlt_code.getMatchedColumnData(<span class="string">"code"</span>,dlt_list.getCellData(row, <span class="string">"category"</span>) ,<span class="string">"upperCode"</span>);
<span class="digits_10 code_line"></span>        <span class="keyword">if</span> (tmpValue[0] != value ) {
<span class="digits_10 code_line"></span>            dlt_list.setCellData(row, <span class="string">"name"</span>, ldt_linkcode2.getCellData(0, <span class="string">"code"</span>));
<span class="digits_10 code_line"></span>        }
<span class="digits_10 code_line"></span>    }
<span class="digits_10 code_line"></span>};</pre></div><h1 id="r_7490c8080c977271" class="element heading1"><span class="heading1_n">5</span>참고 문서</h1><ul id="r_cea7c6097e6ec8de" class="element unordered_list"><li><p><strong>[웹스퀘어5 SP5 개발 가이드] DataCollection 설명</strong> </p><p>링크 : <a class="link" href="https://docs1.inswave.com/sp5_user_guide#7c901bbffbd424bd">https://docs1.inswave.com/sp5_user_guide#7c901bbffbd424bd</a></p></li><li><p><strong>[웹스퀘어5 SP5 개발 가이드] LinkedDataList 설명</strong> </p><p>링크 : <a class="link" href="https://docs1.inswave.com/sp5_user_guide#cc57561415c9ec11">https://docs1.inswave.com/sp5_user_guide#cc57561415c9ec11</a></p></li></ul></div></body></html>
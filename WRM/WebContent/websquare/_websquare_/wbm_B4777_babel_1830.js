(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[1830],{1830:function(t,e,i){"use strict";i.r(e),i.d(e,{windowContainer:function(){return w}});var o=i(484),n=i(9122),s=i(7827),r=i(1160),a=i(5841),d=i(8754),h=i(6079),l=i(7870),w=function(t,e,i){l.s.call(this,t,e,i)};n.x.extend(w.prototype,l.s.prototype),w.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.windowContainer",pluginName:"windowContainer",userEvents:["onCloseWindow","onwindowkeyup","onwindowchange","onwindowtabclick","onbeforecloseall","onbeforenamelayermove","onafternamelayermove","onmenuclick","onwindowload","onwindowunload","oncustomcontrolclick","onminimizebtnclick","onrestorebtnclick"],useConfirmMessage:!0,confirmTrueAction:"existWindow",confirmFalseAction:"newWindow",windowMaxNum:5,confirmMessage:"#title 화면이 존재합니다. 기존의 창을 사용하시려면 '확인'을 새로운 창을 사용하시려면 '취소'를 선택하세요",lineBreakNum:4,useNameScroll:!1,useCloseButton:!1,useFixButton:!1,useNameContainer:!1,controlIconPosition:"left",fixArrangeFullScreen:!1,verticalArrangeNum:2,horizontalArrangeNum:2,sequentialArrangeRowNum:2,sequentialArrangeColNum:2,windowAutoResize:!1,toolbarWidth:0,toolbarPosition:"bottom",positionX:"none",positionY:"none",windowMaximizeAll:!1,stopMinimizeOnNameLayer:!1,stopToggleOnLast:!1,defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",hideTitleOnMaximize:!1,usePopup:!1,closeWindowOnPopup:!1,tooltipDisplay:!0,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,windowTooltipDisplay:!0,useLocale:!1,confirmMessageLocaleRef:"",wmode:!1,selectedIndex:-1,useStatusMsg:!0,useCustomMsg:!1,statusMsg:"",customMsg:"",nameScrollMode:"",useControlIconTitle:!1,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,spaReplaceHistory:!1,nameLayerMenu:!1,windowHeaderHTML:"",enableHeaderSelect:!1,useDrag:!1,skipZIndex:!1,noAttatchedEvent:!1,closeType:"all",nameLayerMove:!1,nameLayerMoveGap:110,keepSelectedWindow:!1,swapZIndex:!1,controlIcons:[{id:"vertical",className:"w2windowContainer_controlIcon_vertical",useTitle:!1,isCustom:!1},{id:"horizontal",className:"w2windowContainer_controlIcon_horizontal",useTitle:!1,isCustom:!1},{id:"cascade",className:"w2windowContainer_controlIcon_cascade",useTitle:!1,isCustom:!1},{id:"sequential",className:"w2windowContainer_controlIcon_sequential",useTitle:!1,isCustom:!1},{id:"closeAll",className:"w2windowContainer_controlIcon_closeAll",useTitle:!1,isCustom:!1}],buttonFormatter:"",controlIconFormatter:null,restoreWinSize:!1,spaAuto:!1,spaAutoDelay:3e3,windowDragMove:!1,windowMoveType:"restrict",frameModal:!1,useWindowId:!1,processMsgFrame:!1,useWindowScrollButton:!1,windowScrollVisibleRowNum:5,autoArrange:!1,escape:!0,changeActiveWindow:!1,nameLayerRearrange:!1,msaName:""},w.prototype.initialize=function(t){try{this.windows=[],this.fixedWindowArr=[],this.beforeWindow=null,this.nowWindow=null,this.selectedWindowHistory=[],this.selectedIndex=-1,this.windowIdx=0,this.maxZIndex=0,this.currentWindowNum=0,this.tooltip=null,this.timeShowTooltip=null,this.useControlIconFormatter=!1,this.options.useLocale&&null!=this.options.confirmMessageLocaleRef&&""!=this.options.confirmMessageLocaleRef&&(this.options.confirmMessage=this.getLocaleValue(this.options.confirmMessageLocaleRef));var e="w2windowContainer_window";"top"==this.options.toolbarPosition&&(e+="_top");var i=new WebSquare.uiplugin.group(this.id+"_window",{className:e,style:"background-color : transparent"});this.addControl(i),this.options=WebSquare.cssManager.styleToClass(this.id,this.options),t&&"$blank"==t.getAttribute("statusMsg")?this.defaultStatusMsg="":this.defaultStatusMsg=this.options.statusMsg||WebSquare.language.getMessage("Window_statusMsg"),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),
this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==s.v.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),this.storedFrame=[],this.options.nameLayerMenu&&(this.options.useNameContainer=!0),this.windowHeaderHTML="",this.nameLayerHTML="",this.multiViewIdArr=[],this.options.useDrag,"wframe"===this.options.frameMode&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!1),this.zIndexFlagInfo={},this.options.useNameContainer||(this.options.controlIconPosition="left")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.toHTML=function(){try{var t=function(t){return" title='"+t+"'"},e=[],i={vertical:"",horizontal:"",cascade:"",sequential:"",closeAll:"",maximize:"",closeOthers:""},o=""==this.options.style?"":"style='"+this.options.style+"'",n=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";this.options.useControlIconTitle&&(i.maximize=t(WebSquare.language.getMessage("WindowContainer_controlIcon_maximize")),i.vertical=t(WebSquare.language.getMessage("WindowContainer_controlIcon_vertical")),i.horizontal=t(WebSquare.language.getMessage("WindowContainer_controlIcon_horizontal")),i.cascade=t(WebSquare.language.getMessage("WindowContainer_controlIcon_cascade")),i.sequential=t(WebSquare.language.getMessage("WindowContainer_controlIcon_sequential")),i.closeAll=t(WebSquare.language.getMessage("WindowContainer_controlIcon_closeAll")));var s="w2windowContainer_windowToolbar";"top"==this.options.toolbarPosition&&(s+="_top");var a="",d="";!this.options.useNameContainer||"right"!=this.options.controlIconPosition&&"allright"!=this.options.controlIconPosition||(a=" w2windowContainer_controlIconLayer_right",d=this.options.hideTitleOnMaximize?" w2windowContainer_nameContainer_right_maximizeBtn":" w2windowContainer_nameContainer_right");var h="w2windowContainer_controlIconLayer",l="w2windowContainer_scrollLeftBtn";return this.options.hideTitleOnMaximize&&(h+=" w2windowContainer_controlIconLayer_extend",l+=" w2windowContainer_scrollLeftBtn_extend"),e.push("<div id='"+this.id+"' "+o+" class='w2windowContainer "+this.options.className+"' "+n+">"),e.push(this.getChild(this.id+"_window").toHTML()),this.options.nameLayerMenu||(e.push("<div id='"+this.id+"_toolbar' class='"+s+"'>"),e.push("<div id='"+this.id+"_controlIcon' class='"+h+a+"'>"),"allright"==this.options.controlIconPosition&&(e.push("<div id='"+this.id+"_controlBtnDiv'>"),e.push("<div id='"+this.id+"_left' style='display:none;' class='"+l+"'></div>"),e.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),e.push("</div>"),e.push("<div id='"+this.id+"_controlIconDiv'>")),e.push("<span id='"+this.id+"_vertical' class='w2windowContainer_controlIcon_vertical'"+i.vertical+"></span>"),e.push("<span id='"+this.id+"_horizontal' class='w2windowContainer_controlIcon_horizontal'"+i.horizontal+"></span>"),e.push("<span id='"+this.id+"_cascade' class='w2windowContainer_controlIcon_cascade'"+i.cascade+"></span>"),e.push("<span id='"+this.id+"_sequential' class='w2windowContainer_controlIcon_sequential'"+i.sequential+"></span>"),e.push("<span id='"+this.id+"_closeAll' class='w2windowContainer_controlIcon_closeAll'"+i.closeAll+"></span>"),this.options.useWindowScrollButton&&(this.options.useControlIconTitle&&(i.windowList=t(WebSquare.language.getMessage("WindowContainer_controlIcon_windowList"))),e.push("<span id='"+this.id+"_windowList' class='w2windowContainer_controlIcon_windowList'></span>")),this.options.hideTitleOnMaximize&&e.push("<span id='"+this.id+"_maximize' class='w2windowContainer_controlIcon_maximize'"+i.maximize+"></span>"),"allright"==this.options.controlIconPosition&&e.push("</div>"),e.push("</div>")),
this.options.useNameContainer&&e.push("<div id='"+this.id+"_nameContainer' class='w2windowContainer_nameContainer"+(this.options.nameLayerMenu?" w2windowContainer_nameLayerMenu":"")+d+"'>"),"allright"!==this.options.controlIconPosition&&e.push("<div id='"+this.id+"_left' style='display:none;' class='"+l+"'></div>"),e.push("<div id='"+this.id+"_name' class='w2windowContainer_name'></div>"),"allright"!==this.options.controlIconPosition&&e.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),this.options.useNameContainer&&e.push("</div>"),e.push("</div>"),e.push("</div>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setPreAction=function(){try{this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.nameBar=this.getElementById(this.id+"_name"),this.dom.window=this.getElementById(this.id+"_window"),this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.nameContainer=this.getElementById(this.id+"_nameContainer"),this.dom.leftScrollBtn=this.getElementById(this.id+"_left"),this.dom.rightScrollBtn=this.getElementById(this.id+"_right"),this.options.nameLayerMenu?this.createMenu():(this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.iconVertical=this.getElementById(this.id+"_vertical"),this.dom.iconHorizontal=this.getElementById(this.id+"_horizontal"),this.dom.iconCascade=this.getElementById(this.id+"_cascade"),this.dom.iconSequential=this.getElementById(this.id+"_sequential"),this.dom.iconCloseAll=this.getElementById(this.id+"_closeAll"),this.dom.iconWindowList=this.getElementById(this.id+"_windowList")),this.options.hideTitleOnMaximize&&(this.dom.iconMaximize=this.getElementById(this.id+"_maximize")),this.dom.nameScrollLeft=this.getElementById(this.id+"_left"),this.dom.nameScrollRight=this.getElementById(this.id+"_right")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setAction=function(){try{if(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),d.D.isMobile()?this.event.addListener(this.dom.nameBar,"ontouchstart",this.event.bindAsEventListener(this,this.handleNameLayerMove)):this.event.addListener(this.dom.nameBar,"onmousedown",this.event.bindAsEventListener(this,this.handleNameLayerMove)),l.s.addCheckResize(this.uuid,"checkResize"),!this.options.nameLayerMenu&&this.options.useWindowScrollButton){var t=this.dom.toolBar.offsetWidth,e=this.dom.control.offsetWidth;WebSquare.style.setStyle(this.dom.iconWindowList,"left",e+"px"),e+=this.dom.iconWindowList.offsetWidth,WebSquare.style.setStyle(this.dom.control,"width",e+"px"),this.options.useNameContainer?("right"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"right",e+"px"):WebSquare.style.setStyle(this.dom.nameContainer,"width",t-e+"px"),"left"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"left",e+"px"):"allright"===this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","-50px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"right",this.dom.control.offsetWidth+"px"))):WebSquare.style.setStyle(this.dom.leftScrollBtn,"left",e+"px")}else"allright"==this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.control,"width","180px"),WebSquare.style.setStyle(this.dom.nameContainer,"right","180px"),WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","0px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right","130px"),WebSquare.style.setStyle(this.dom.iconVertical,"left","50px"),
WebSquare.style.setStyle(this.dom.iconHorizontal,"left","75px"),WebSquare.style.setStyle(this.dom.iconCascade,"left","100px"),WebSquare.style.setStyle(this.dom.iconSequential,"left","125px"),WebSquare.style.setStyle(this.dom.iconCloseAll,"left","150px"));"overflow"==this.options.windowMoveType&&WebSquare.style.setStyle(this.dom.window,"overflow","auto")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.onComplete=function(){try{this.setControlIconFormatter(),s.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&s.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),l.s.prototype.onComplete.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.makeIframe=function(){if("iframe"===this.options.frameMode){var t=this.storedFrame.length;if(this.options.spaIframeMinSize>t+this.windows.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id),s.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50})}}},w.prototype.createFrame=function(t){try{if("iframe"!==this.options.frameMode)return;if(this.options.windowMaxNum<=this.windows.length+this.storedFrame.length)return void h.k.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")");if(void 0!==t&&null!=t||(t={}),isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id)}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.createWindow=function(t,e,i,n,s,a,d,h,l,w,c,p,u,m,f,g){try{return"object"===(0,o.Z)(t)&&null!=t?this.__createWindowByObj(t):this.__createWindow(t,e,i,n,s,a,d,h,l,w,c,p,u,m,f,g)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.__createWindow=function(t,e,i,o,n,s,a,h,l,w,c,p,u,m,f,g){try{if(""===this.windowHeaderHTML&&""!==this.options.windowHeaderHTML){var y="";try{y=d.D.getGlobalFunction(this.options.windowHeaderHTML,this.scope_id);this.windowHeaderHTML="function"==typeof y?y():y}catch(t){this.windowHeaderHTML=this.options.windowHeaderHTML}}t=t&&this.options.escape?WebSquare.xml._encode(t):t,o=(o=o&&this.options.escape?WebSquare.xml._encode(o):o)||t,n=n||t;for(var v=null,W=w||{},I=0;I<this.windows.length;I++){var S=this.windows[I];n==S.windowId&&(v=S)}if(null!=v)if(null!=s&&""!=s)this.performAction(s,v,t,e,i,o,n,h,l,a,W,c,p,u,m,f,g);else{for(var _=this.options.confirmMessage;-1!=_.indexOf("#title");)_=_.replace("#title",t);var x=!0;1==this.options.useConfirmMessage&&(x=confirm(_)),x?this.performAction(this.options.confirmTrueAction,v,t,e,i,o,n,h,l,a,W,c,p,u,m,f,g):this.performAction(this.options.confirmFalseAction,v,t,e,i,o,n,h,l,a,W,c,p,u,m,f,g)}else this._createWindow(t,e,i,o,n,a,h,l,W,c,p,u,m,f,g)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.__createWindowByObj=function(t){try{if(!(t&&t.title&&t.src))return void $l("["+this.id+" : createWindow ] 인자를 확인해주세요.");var e=t.title||"",i=t.iconUrl||null,o=t.src||"",n=t.windowTitle||null,s=t.windowId||null,a=t.openAction||null,d=t.closeAction||null,h=t.windowTooltip||null,l=t.windowHeaderHTML||null,w=t.useNameLayer||!0,c=t.nameLayerHTML||null,p=t.userIconClass||null,u=t.userIconPosition||null,m={fixed:t.fixed||!1,useNameLayer:w,defaultWidth:t.defaultWidth||"",defaultHeight:t.defaultHeight||"",defaultTop:t.defaultTop||"",defaultLeft:t.defaulLeft||"",useRestoreDefaultSize:t.useRestoreDefaultSize||!1},f=t.frameMode||this.options.frameMode,g=t.msaName||"";return this.__createWindow(e,i,o,n,s,a,d,h,l,m,f,t.dataObject,c,p,u,g)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.performAction=function(t,e,i,o,n,s,a,d,h,l,w,c,p,u,m,f,g){try{if("selectWindow"==t)this.selectNameLayer(e.id),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id);else if("existWindow"==t){if(e.isFix){e.isFix=!1
;for(var y=0;y<this.fixedWindowArr.length;y++)if(this.fixedWindowArr[y].id==e.id){this.fixedWindowArr.splice(y,1);break}}var v;this.selectNameLayer(e.id),e.window.setStatusMsg(this.defaultStatusMsg),p&&(v={dataObject:p}),e.window.setSrc(n,v),e.window.options.closeAction=l,e.window.options.title=i;d=d||s;this.setWindowLabel(a,"toolbar",i),this.setWindowLabel(a,"window",s),this.setWindowLabel(a,"tooltip",d),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id)}else"newWindow"==t&&this._createWindow(i,o,n,s,a,l,d,h,w,c,p,u,m,f,g)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._createWindow=function(t,e,i,o,n,h,l,w,c,p,u,m,f,g,y){try{var v=o.wq_replaceAll("&nbsp;","");c=c||{};if(y&&(c.msaName=y),-1!=this.options.windowMaxNum&&this.currentWindowNum>this.options.windowMaxNum-1)return void alert(WebSquare.language.getMessage("WindowContainer_maxNum_warning",this.options.windowMaxNum));var W,I=null,S=this.storedFrame.length>0&&(!p||"iframe"===p);if(S)(I=d.D.getComponentById(this.storedFrame.shift()))._closed=!1,I.options.closeAction=h,I.options.title=t,w?I.setWindowHeaderHTML(w):I.setWindowTitle(o),u&&(W={dataObject:u}),I.frame.setSrc(i,W),I.render&&(I.render.style.display="");else I=this._createSubWindow(t,e,i,v,n,h,l,w,p,u,!0,m,f,g,c);var _=I.id;this.currentWindowNum++;var x={};if(x.id=_,x.window=I,x.title=t,x.iconUrl=e,x.src=i,x.windowTitle=o,x.windowId=n,x.closeAction=h,x.tooltip=l||o,x.windowHeaderHTML=w,x.buttonFormatter=this.options.buttonFormatter,x.isFix=c.fixed||!1,x.nameLayerHTML=m,x.userIconClass=f,x.userIconPosition=g,x.useNameLayer=!c.useNameLayer||d.D.getBoolean(c.useNameLayer),0==x.useNameLayer?this.windows.splice(0,0,x):this.windows.push(x),this.createNameLayer(),this.beforeWindow=this.nowWindow,this.nowWindow=_,this.selectWindow(),S||(I.activate(),I.onComplete()),this.options.restoreWinSize&&this.restoreWindowSize(n),this.beforeWindow!=this.nowWindow){var L=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,C=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",L,C)}this.options.spaAuto&&s.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]})}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._createSubWindow=function(t,e,i,o,n,h,l,w,c,p,u,m,f,g,y){y=y||{};var v=this.org_id||this.id,W=v+"_subWindow"+this.windowIdx++;this.options.useWindowId&&(W=v+"_subWindow_"+n+"_"+this.windowIdx++);c=c||this.options.frameMode;var I=y.defaultWidth||this.options.defaultWidth,S=y.defaultHeight||this.options.defaultHeight,_=y.defaultTop||this.options.defaultTop,x=y.defaultLeft||this.options.defaultLeft,L=y.useRestoreDefaultSize||this.options.useRestoreDefaultSize,C=WebSquare.controlFactory.create(W,{pluginName:"window",parseChild:!1,windowTitle:o,windowHeaderHTML:w||this.windowHeaderHTML,nameLayerHTML:m||this.nameLayerHTML,enableHeaderSelect:this.options.enableHeaderSelect,src:i,userIconClass:f,userIconPosition:g,useStatusMsg:this.options.useStatusMsg,useCustomMsg:this.options.useCustomMsg,statusMsg:""==this.defaultStatusMsg?"":this.defaultStatusMsg,customMsg:this.options.customMsg,defaultTop:_,defaultLeft:x,defaultWidth:I,defaultHeight:S,useRestoreDefaultSize:L,minimumWidth:this.options.minimumWidth,minimumHeight:this.options.minimumHeight,frameMode:c,wmode:this.options.wmode,width:this.render.offsetWidth,height:this.render.offsetHeight-25,closeAction:h,title:t,parent:this,windowTooltipDisplay:this.options.windowTooltipDisplay,noAttatchedEvent:this.options.noAttatchedEvent,spa:this.options.spa,spaReplaceHistory:this.options.spaReplaceHistory,buttonFormatter:this.options.buttonFormatter,windowDragMove:this.options.windowDragMove,frameModal:this.options.frameModal,windowMoveType:this.options.windowMoveType,processMsgFrame:this.options.processMsgFrame,dragResizableHeader:this.options.dragResizableHeader,delegateProcessMsg:d.D.getBoolean(this.options.delegateProcessMsg),msaName:y.msaName
},null,this.scope_obj,this.parentFrame,!0);p&&C.setDataObject(p),C._windowId=n;var b=this,z=!0===s.v.scriptPrecedence?"onwindowload":"ondrawcomplete";return C.options.xmlEvents=[{name:"onclose",action:"script",param:{handler:function(t){try{a.B.fireEvent(b,"onCloseWindow",t),b.removeNameLayer(this.id);for(var e=0;e<b.fixedWindowArr.length;e++)if(b.fixedWindowArr[e].id==this.id){b.fixedWindowArr.splice(e,1);break}b.createNameLayer(),b.selectWindow();var i=b.nowWindow?b.getWinInfoObj(b.nowWindow).windowId:null;if(a.B.fireEvent(b,"onwindowchange",b.closedWindowId,i),b.setFocus(b.getSelectedIndex()),b.options.autoArrange)if(b.options.useFixButton){var o=b.options.verticalArrangeNum,n=b.options.horizontalArrangeNum;"vertical"==b.arrangeHistory&&b.windows.length<o?b.options.verticalArrangeNum=b.windows.length:"horizontal"==b.arrangeHistory&&b.windows.length<n&&(b.options.horizontalArrangeNum=b.windows.length),"sequential"==b.arrangeHistory&&b.windows.length<=b.options.sequentialArrangeColNum?(b.options.verticalArrangeNum=b.windows.length,b.setArrangeWindows("vertical"),b.arrangeHistory="sequential"):b.setArrangeWindows(b.arrangeHistory),b.options.verticalArrangeNum=o,b.options.horizontalArrangeNum=n}else b.setArrangeWindows(b.arrangeHistory);0==b.windows.length&&(b.options.spaAuto?"wframe"===b.options.frameMode&&(b.windowIdx=0):b.windowIdx=b.options.spaInitCount)}catch(t){r.w.printStackTrace(t,null,b)}}}},{name:"onwindowkeyup",action:"script",param:{handler:function(t){try{a.B.fireEvent(b,"onwindowkeyup",t)}catch(t){r.w.printStackTrace(t,null,b)}}}},{name:"onwindowmousedown",action:"script",param:{handler:function(t){try{b.selectNameLayer(this.id)}catch(t){r.w.printStackTrace(t,null,b)}}}},{name:"onminimize",action:"script",param:{handler:function(t){b._onminimize(this.id)}}},{name:"onmaximize",action:"script",param:{handler:function(t){b._onmaximize(this.id)}}},{name:"ondragstart",action:"script",param:{handler:function(t){b.selectNameLayer(this.id),b.handleDragStartEvent()}}},{name:"ondragend",action:"script",param:{handler:function(t){b.handleDragEndEvent()}}},{name:"onpopup",action:"script",param:{handler:function(t){b._onpopup(this.id)}}},{name:z,action:"script",param:{handler:function(t){a.B.fireEvent(b,"onwindowload",this._windowId)}}},{name:"onwindowunload",action:"script",param:{handler:function(){a.B.fireEvent(b,"onwindowunload",this._windowId)}}}],this.options.nameLayerMenu&&C.options.xmlEvents.push({name:"onwindowmousedown",action:"script",param:{handler:function(t){try{b.hideContextMenu()}catch(t){r.w.printStackTrace(t,null,b)}}}}),this.options.controlIconFormatter&&C.options.xmlEvents.push({name:"onwindowmousedown",action:"script",param:{handler:function(t){try{b.hideWindowList()}catch(t){r.w.printStackTrace(t,null,b)}}}}),C.writeTo(this.getChild(this.id+"_window")),!0!==u&&(C.activate(),C.onComplete()),C},w.prototype.setWindowLabel=function(t,e,i){try{if(!t||!e||!i)return;for(var o,n=this.windows.length-1;n>=0;n--)if(this.windows[n].windowId===t){o=this.windows[n];break}if(!o)return;var s="all"===(e=e.toLowerCase());if("window"===e||s){if(o.windowTitle=i,o.window.options.windowTitle=i,this.options.windowTooltipDisplay){var a=document.getElementById(o.id);a&&a.setAttribute("title",i)}var d=document.getElementById(o.id+"_header_title");d&&(d.innerHTML=i)}if(("tooltip"===e||s)&&(o.tooltip=i),"toolbar"===e||s)document.getElementById(this.id+"_nameLayer_"+o.id).setAttribute("windowTitle",i),o.title=i,this.createNameLayer(),this.selectWindow()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getWindowLabel=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].windowId===t){i=this.windows[o];break}if(!i)return;if("toolbar"===(e=e.toLowerCase()))return i.title;if("window"===e)return i.windowTitle;if("tooltip"===e)return i.tooltip}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.createNameLayer=function(){try{var t=[];this.dom.nameBar.innerHTML=""
;for(var e=d.D.getDataPrefix("refId"),i=d.D.getDataPrefix("windowtitle"),o="",n="",s="",a=0;a<this.windows.length;a++){(w=this.windows[a]).useNameLayer&&(w.nameLayerHTML?this._setNameLayerHTML(w.id,t):(null!=w.userIconClass&&null==w.userIconPosition&&w.userIconPosition,!0===this.options.useFixButton&&null!=w.userIconClass?("left"==w.userIconPosition?(s="w2windowContainer_nameLayer_firstButtonFromLeft",n="w2windowContainer_nameLayer_secondButtonFromLeft"):(n="w2windowContainer_nameLayer_firstButtonFromLeft",s="w2windowContainer_nameLayer_secondButtonFromLeft"),o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix_withUserIcon"):!0===this.options.useFixButton&&null==w.userIconClass?(n="w2windowContainer_nameLayer_firstButtonFromLeft",o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):!1===this.options.useFixButton&&null!=w.userIconClass?(s="w2windowContainer_nameLayer_firstButtonFromLeft",o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):o="w2windowContainer_nameLayer",t.push("<div id='"+this.id+"_nameLayer_"+w.id+"' class='"+o+"' "+e+"='"+w.id+"' "+i+"='"+w.title+"'>"),this.options.useFixButton&&(n+=" w2windowContainer_nameLayer_fixOff",w.isFix&&(n+=" w2windowContainer_nameLayer_fixOn"),t.push("<div class='"+n+"' "+e+"='"+w.id+"'>"),t.push("</div>")),null!=w.userIconClass&&(s+=" "+w.userIconClass+" w2windowContainer_nameLayer_userIconPosition",t.push("<div class='"+s+"' "+e+"='"+w.id+"'>"),t.push("</div>")),t.push(w.title),this.options.useCloseButton&&(t.push("<div class='w2windowContainer_nameLayer_close' "+e+"='"+w.id+"'>"),t.push("</div>")),this.options.nameLayerMenu&&(t.push("<div class='w2windowContainer_nameLayer_menu' "+e+"='"+w.id+"'>"),t.push("</div>")),t.push("</div>")))}if(this.dom.nameBar.innerHTML=t.join(""),this.dom.nameBar.style.width="auto",this.windows.length>0){for(var h=0,l=(a=0,0);a<this.windows.length;a++){var w;if((w=this.windows[a]).useNameLayer){var c=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[l],"margin-left"))||0,p=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[l],"margin-right"))||0;h+=this.dom.nameBar.childNodes[l].offsetWidth+c+p,l++}}this.dom.nameBar.style.width=h+2+"px"}else this.dom.nameBar.style.width="0px";var u=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2,m=this.render.offsetWidth,f=0;if(!this.options.nameLayerMenu&&this.options.toolbarWidth)this.dom.toolBar.style.width=this.options.toolbarWidth+"px",m=this.options.toolbarWidth;else if(!this.options.nameLayerMenu){f=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left"));var g=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(f)||(m-=f),isNaN(g)||(m-=g)}m<this.dom.nameBar.scrollWidth+u?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.display="",this.dom.leftScrollBtn.style.display=""):(this.options.useNameScroll=!1,this.options.useNameContainer||this.options.nameLayerMenu?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=u+"px",this.useControlIconFormatter&&(this.options.useNameContainer&&"right"==this.options.controlIconPosition&&!this.options.nameLayerMenu?document.getElementById(this.id+"_nameContainer").style.right=u+"px":this.options.useNameContainer&&"left"==this.options.controlIconPosition&&!this.options.namelayerMenu&&(document.getElementById(this.id+"_nameContainer").style.left=u+"px")),this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none"),1==this.options.useNameScroll&&(this.options.useWindowScrollButton&&"allright"===this.options.controlIconPosition||(this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px"),this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._setNameLayerHTML=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].id===t){i=this.windows[o];break}if(!i)return
;var n=d.D.getDataPrefix("windowtitle"),s=d.D.getDataPrefix("refId"),a=i.title,h="",l="",w="",c=e;if(this.options.useFixButton){var p="w2windowContainer_nameLayer_fixOff_custom";i.isFix&&(p+=" w2windowContainer_nameLayer_fixOn"),h="<div class='"+p+"' "+s+"='"+i.id+"'></div>"}this.options.useCloseButton&&(l="<div class='w2windowContainer_nameLayer_close_custom' "+s+"='"+i.id+"'></div>"),this.options.nameLayerMenu&&(w="<div class='w2windowContainer_nameLayer_menu' "+s+"='"+i.id+"'></div>"),e.push("<div id='"+this.id+"_nameLayer_"+i.id+"' class='w2windowContainer_nameLayer' "+s+"='"+i.id+"' "+n+"='"+i.title+"'>");try{var u=d.D.getGlobalFunction(i.nameLayerHTML,this.scope_id);c="function"==typeof u?u(a,h,l,w):u}catch(t){c=i.nameLayerHTML}e.push(c),e.push("</div>")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.removeNameLayer=function(t){try{var e=this.getWinInfoObj(t);if(null==e)return;this.closedWindowId=e.windowId;for(var i=0;i<this.windows.length;i++){this.windows[i].id==t&&this.windows.splice(i,1)}this.addHistory(t),this.closedWindow=this.selectedWindowHistory.pop(),this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-2]||null,this.nowWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1]||null,this.currentWindowNum--}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.clickNameLayer=function(t,e,i){try{var o=t,n=(e=d.D.getBoolean(e),d.D.getBoolean(i.stopToggleOnLast));if(this.nowWindow==o){var s=this.getWinInfoObj(this.nowWindow).windowId;if(a.B.fireEvent(this,"onwindowtabclick",s,s),1==n&&1==this.windows.length)return;if(1==e||this.options.nameLayerMenu)return;this.minimizeWindow(o)}else{this.beforeWindow=this.nowWindow,this.nowWindow=o,this.selectWindow();var h=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,l=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",h,l),a.B.fireEvent(this,"onwindowtabclick",h,l)}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getWinInfoObj=function(t,e){try{null==e&&(e="id");for(var i=0;i<this.windows.length;i++)if(this.windows[i][e]==t)return this.windows[i]}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.fixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!0,this.fixedWindowArr.push(e);var i=d.D.getDataPrefix("refId");if(this.options.useFixButton)for(var o=document.getElementById(this.id+"_nameLayer_"+e.id),n=0;n<o.childNodes.length;n++){var s=o.childNodes[n];if(1===s.nodeType&&s.getAttribute(i)===e.id)return s.className="w2windowContainer_nameLayer_firstButtonFromLeft w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn",!0}return!0}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.unfixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!1;for(var i=0;i<this.fixedWindowArr.length;i++)this.fixedWindowArr[i].id==e.id&&this.fixedWindowArr.splice(i,1);var o=d.D.getDataPrefix("refId");if(this.options.useFixButton){var n=document.getElementById(this.id+"_nameLayer_"+e.id);for(i=0;i<n.childNodes.length;i++){var s=n.childNodes[i];if(1===s.nodeType&&s.getAttribute(o)===e.id)return s.className="w2windowContainer_nameLayer_fixOff",!0}}return!0}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.minimizeWindow=function(t){try{this.getWinInfoObj(t).window.minimize()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._onminimize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.nowWindow==e)this.minimizedWindow=this.selectedWindowHistory.pop(),this.nowWindow=this.selectedWindowHistory.pop()||null,this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1];else for(var i=0;i<this.selectedWindowHistory.length;i++)if(e==this.selectedWindowHistory[i]){this.selectedWindowHistory.splice(i,1);break}if(this.selectWindow(),this.prevWindow==e){var o=this.getWinInfoObj(this.minimizedWindow).windowId,n=this.nowWindow?this.getWinInfoObj(this.nowWindow).windowId:null
;a.B.fireEvent(this,"onwindowchange",o,n)}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.maximizeWindow=function(t){try{this.getWinInfoObj(t).window.maximize()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._onmaximize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e&&(this.nowWindow=e,this.selectWindow(),this.prevWindow)){var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;a.B.fireEvent(this,"onwindowchange",i,o)}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._onpopup=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e){this.nowWindow=e,this.selectWindow();var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;a.B.fireEvent(this,"onwindowchange",i,o)}var n=this.getSelectedIndex();if(n>-1&&n<this.windows.length){var s=this.windows[n],h=(window.screen.availHeight-this.getSize("height"))/2,l=(window.screen.availWidth-this.getSize("width"))/2,w={id:s.id,type:"window",width:this.getSize("width")+"px",height:this.getSize("height")+"px",top:h+"px",left:l+"px",popupName:s.title,modal:!1,useIFrame:!1,style:"",resizable:!0,status:!1,menubar:!1,scrollbars:!0,title:!1,srcData:"",destData:""};d.D.openPopup(s.window.options.src,w),this.options.closeWindowOnPopup&&s.window.forceClose()}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.selectWindow=function(){try{for(var t=0;t<this.windows.length;t++){var e=this.windows[t].id,i=document.getElementById(this.id+"_nameLayer_"+e),o=document.getElementById(e+"_header"),n=document.getElementById(e);this.removeClass(i,"w2windowContainer_selectedNameLayer"),this.removeClass(o,"w2window_selected_header"),this.removeClass(n,"w2window_selected")}if(null!=this.nowWindow){var a=this.getWinInfoObj(this.nowWindow);if(a.window.windowInfo.minimized=!1,this.options.skipZIndex)this.zIndexFlagInfo[a.id]?(a.window.setStyle("display","block"),this.increaseZIndex(a.window)):(a.window.setStyle("display","none"),a.window.setStyle("zIndex",0));else a.window.setStyle("display","block"),this.increaseZIndex(a.window),d.D.getBoolean(s.v.getConfiguration("/WebSquare/windowContainer/displayOnlyTopWindow/@value"))&&this.displayOnlyTopWindow();i=document.getElementById(this.id+"_nameLayer_"+this.nowWindow),o=document.getElementById(this.nowWindow+"_header"),n=document.getElementById(this.nowWindow);if(this.addClass(i,"w2windowContainer_selectedNameLayer"),this.addClass(o,"w2window_selected_header"),this.addClass(n,"w2window_selected"),"hide"==this.options.nameScrollMode){var h=0,l=this.dom.nameBar.offsetWidth,w=this.selectedIndex;if(this.addHistory(this.nowWindow),this.refreshSelectedIndex(),w>this.selectedIndex)for(t=w;t>=0;t--){var c=this.windows[t].id;"block"!=(p=document.getElementById(this.id+"_nameLayer_"+c)).style.display&&(p.style.display="block")}for(t=this.selectedIndex;t>=0;t--){var p;c=this.windows[t].id;if("none"!=(p=document.getElementById(this.id+"_nameLayer_"+c)).style.display){var u=WebSquare.style.getStyle(p,"margin-left");u="auto"===u?"0":u;var m=WebSquare.style.getStyle(p,"margin-right");m="auto"===m?"0":m;var f=p.offsetWidth+parseInt(u,10)+parseInt(m,10);h+f>=l?p.style.display="none":h+=f}}}else if(this.options.useNameScroll){if("allright"==this.options.controlIconPosition)var g=this.dom.nameContainer.offsetLeft,y=this.dom.control.offsetLeft,v=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,W=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;else g=this.dom.leftScrollBtn.offsetLeft+this.dom.leftScrollBtn.offsetWidth,y=this.dom.rightScrollBtn.offsetLeft,v=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,W=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;if(v>y||W>y)this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-(W-y)+"px";else if(v<g||W<g){var I=this.options.nameLayerMenu||this.options.useNameContainer&&"right"==this.options.controlIconPosition?0:this.dom.control.offsetWidth
;"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft-i.offsetLeft+"px":this.dom.nameBar.style.left=I+this.dom.leftScrollBtn.offsetWidth-i.offsetLeft+"px"}this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.selectedIndex=-1}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.addHistory=function(t){try{for(var e=null,i=0;i<this.selectedWindowHistory.length;i++)this.selectedWindowHistory[i]==t&&(e=i);null!=e&&this.selectedWindowHistory.splice(e,1),this.selectedWindowHistory.push(t)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.increaseZIndex=function(t){try{if(!this.options.skipZIndex&&this.options.swapZIndex&&t.zIndex>0){var e=t.zIndex;if(e<this.maxZIndex){for(var i=0;i<this.windows.length;i++)if(this.windows[i].id!=t.id){var o=this.windows[i].window.zIndex,n=o-2;e<o&&n>1&&(this.windows[i].window.setStyle("zIndex",n),this.windows[i].window.zIndex=n)}t.setStyle("zIndex",this.maxZIndex),t.zIndex=this.maxZIndex}}else this.maxZIndex+=2,t.setStyle("zIndex",this.maxZIndex),this.options.swapZIndex&&(t.zIndex=this.maxZIndex),this.windowList&&(this.windowList.render.style.zIndex=this.maxZIndex+2),this.options.nameLayerMenu?this.getElementById(this.id+"_nameContainer").style.zIndex=this.maxZIndex:this.dom.toolBar.style.zIndex=this.maxZIndex}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.displayOnlyTopWindow=function(){try{for(var t=this.windows.length,e=this.nowWindow,i=0;i<t;i++){var o=this.windows[i].id,n=this.getWinInfoObj(o);o!=e&&"maximized"==n.window.windowInfo.status&&n.window.setStyle("display","none")}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setZIndex=function(t){try{var e=this.windows[t];e&&(e.window.setStyle("display","block"),this.increaseZIndex(e.window),this.zIndexFlagInfo[e.id]=!0)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.selectNameLayer=function(t){try{for(var e=0;e<this.selectedWindowHistory.length;e++)if(this.selectedWindowHistory[e]==t){this.prevWindow=this.nowWindow;var i=t;if(i!=this.nowWindow&&(this.beforeWindow=this.nowWindow,this.nowWindow=i),this.selectWindow(),this.prevWindow!=i){var o=null;this.prevWindow&&(o=this.getWinInfoObj(this.prevWindow).windowId);var n=this.getWinInfoObj(i).windowId;a.B.fireEvent(this,"onwindowchange",o,n)}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doVerticalArrange=function(t){try{var e=0,i=2,o=[],n=[];if(t){for(var s=0;s<t.length;s++)for(var a=0;a<this.windows.length;a++){if((d=this.windows[a]).windowId==t[s]){o.push(d);break}}for(s=0;s<this.windows.length;s++){var d=this.windows[s],h=!0;for(a=0;a<t.length;a++)if(d.windowId==t[a]){h=!1;break}h&&n.push(d)}}else for(s=0;s<this.windows.length;s++){0==(d=this.windows[s]).window.windowInfo.minimized&&o.push(d)}var l=o.length;l<this.options.lineBreakNum?(i=1,e=l):(i=2,e=Math.ceil(l/i));var w,c,p="",u=0,m=0;for(s=0;s<n.length;s++)n[s].window.minimize(!0);for(s=0;s<l;s++){var f=o[s],g=f.window,y=g.resizeParentGroup();w=parseInt(y.width/e,10),c=parseInt(y.height/i,10),g.restore(),g.setSize(w-(g.getSize("outerMarginWidth")-g.getSize("width")),c-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(u*w,m*c),++u==e&&(u=0,m++),p=f.id,this.addHistory(p)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="vertical"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doVerticalFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(f=this.windows[o]).isFix||(f.window.windowInfo.minimized?e(f.id):i[f.id]=f)}var n=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var s=n[o];void 0!==i[s]&&e(i[s].id)}var a=d.D.getDataPrefix("refId");for(o=0;o<this.fixedWindowArr.length;o++){if(e((f=this.fixedWindowArr[o]).id),
this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(a)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var l=this.options.verticalArrangeNum,w=this.windows.length;this.options.fixArrangeFullScreen&&(l=l>w?w:l);var c=0,p=0,u=0;if("none"==this.options.positionX)for(o=this.selectedWindowHistory.length;o>0;o--){var m=(g=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/l,10),u=parseInt(m.height/1,10),g.restore(),g.setSize(p-(g.getSize("outerMarginWidth")-g.getSize("width")),u-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(c*p,0*u),++c==l&&(c=0)}else if("left"==this.options.positionX)for(o=this.selectedWindowHistory.length;o>0;o--){m=(g=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/l,10),u=parseInt(m.height/1,10),g.restore(),g.setSize(p-(g.getSize("outerMarginWidth")-g.getSize("width")),u-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(c*p,0*u),++c==l&&(c=1)}else if("right"==this.options.positionX){c=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){var f,g;m=(g=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/l,10),u=parseInt(m.height/1,10),g.restore(),g.setSize(p-(g.getSize("outerMarginWidth")-g.getSize("width")),u-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(c*p,0*u),++c==l&&(c=0),c==l-1&&(c=0)}}this.selectNameLayer(this.selectedWindowHistory[w-1]),this.arrangeHistory="vertical"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doHorizontalArrange=function(t){try{var e=2,i=0,o=[],n=[];if(t){for(var s=0;s<t.length;s++)for(var a=0;a<this.windows.length;a++){if((h=this.windows[a]).windowId==t[s]){o.push(h);break}}for(s=0;s<this.windows.length;s++){var d=!0,h=this.windows[s];for(a=0;a<t.length;a++)if(h.windowId==t[a]){d=!1;break}d&&n.push(h)}}else for(s=0;s<this.windows.length;s++){0==(h=this.windows[s]).window.windowInfo.minimized&&o.push(h)}var l=o.length;l<this.options.lineBreakNum?(i=l,e=1):(i=Math.ceil(l/e),e=2);var w,c,p="",u=0,m=0;for(s=0;s<n.length;s++)n[s].window.minimize(!0);for(s=0;s<l;s++){var f=o[s],g=f.window,y=g.resizeParentGroup();w=parseInt(y.width/e,10),c=parseInt(y.height/i,10),g.restore(),g.setSize(w-(g.getSize("outerMarginWidth")-g.getSize("width")),c-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(u*w,m*c),++u==e&&(u=0,m++),p=f.id,this.addHistory(p)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="horizontal"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doHorizontalFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(f=this.windows[o]).isFix||(f.window.windowInfo.minimized?e(f.id):i[f.id]=f)}var n=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var s=n[o];void 0!==i[s]&&e(i[s].id)}var a=d.D.getDataPrefix("refId");for(o=0;o<this.fixedWindowArr.length;o++){if(e((f=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(a)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var l=this.options.horizontalArrangeNum,w=this.windows.length;this.options.fixArrangeFullScreen&&(l=l>w?w:l);var c=0,p=0,u=0;if("none"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){var m=(g=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/1,10),u=parseInt(m.height/l,10),g.restore(),g.setSize(p-(g.getSize("outerMarginWidth")-g.getSize("width")),u-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(0*p,c*u),++c==l&&(c=0)
}else if("top"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){m=(g=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/1,10),u=parseInt(m.height/l,10),g.restore(),g.setSize(p-(g.getSize("outerMarginWidth")-g.getSize("width")),u-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(0*p,c*u),++c==l&&(c=1)}else if("bottom"==this.options.positionY){c=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){var f,g;m=(g=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/1,10),u=parseInt(m.height/l,10),g.restore(),g.setSize(p-(g.getSize("outerMarginWidth")-g.getSize("width")),u-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(0*p,c*u),++c==l&&(c=0),c==l-1&&(c=0)}}this.selectNameLayer(this.selectedWindowHistory[w-1]),this.arrangeHistory="horizontal"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doCascadeArrange=function(){try{for(var t,e,i="",o=[],n=0;n<this.windows.length;n++){var s=this.windows[n];0==s.window.windowInfo.minimized&&o.push(s)}var a=o.length;for(n=0;n<a;n++){var d=o[n],h=d.window;if(0==n){var l=h.resizeParentGroup();t=parseInt(l.width-200,10),e=parseInt(l.height-200,10)}h.restore(),h.setSize(t-(h.getSize("outerMarginWidth")-h.getSize("width")),e-(h.getSize("outerMarginHeight")-h.getSize("height"))),h.setPosition(n%10*20,n%10*20),i=d.id}this.selectNameLayer(i),this.arrangeHistory="cascade"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doCascadeFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(p=this.windows[o]).isFix||(p.window.windowInfo.minimized?e(p.id):i[p.id]=p)}var n=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var s=n[o];void 0!==i[s]&&e(i[s].id)}var a=d.D.getDataPrefix("refId");for(o=0;o<this.fixedWindowArr.length;o++){if(e((p=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(a)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var l=this.windows.length,w=0,c=0;for(o=this.selectedWindowHistory.length;o>0;o--){var p,u=(p=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window;if(o==this.selectedWindowHistory.length){var m=u.resizeParentGroup();w=parseInt(m.width-200,10),c=parseInt(m.height-200,10)}u.restore(),u.setSize(w-(u.getSize("outerMarginWidth")-u.getSize("width")),c-(u.getSize("outerMarginHeight")-u.getSize("height"))),u.setPosition((o-1)%10*20,(o-1)%10*20)}this.selectNameLayer(this.selectedWindowHistory[l-1]),this.arrangeHistory="cascade"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doSequentialArrange=function(){try{for(var t=1,e=1,i=!0,o=[],n=0;n<this.windows.length;n++){var s=this.windows[n];0==s.window.windowInfo.minimized&&o.push(s)}for(var a,d,h=o.length;i;)t*e<h?t==e?t++:e++:i=!1;var l="",w=0,c=0;for(n=0;n<h;n++){var p=o[n],u=p.window;if(0==n){var m=u.resizeParentGroup();a=parseInt(m.width/t,10),d=parseInt(m.height/e,10)}u.restore(),u.setSize(a-(u.getSize("outerMarginWidth")-u.getSize("width")),d-(u.getSize("outerMarginHeight")-u.getSize("height"))),u.setPosition(w*a,c*d),++w==t&&(w=0,c++),l=p.id}!1===this.options.keepSelectedWindow&&this.selectNameLayer(l),this.arrangeHistory="sequential"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doSequentialFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(y=this.windows[o]).isFix||(y.window.windowInfo.minimized?e(y.id):i[y.id]=y)}var n=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var s=n[o];void 0!==i[s]&&e(i[s].id)}var a=d.D.getDataPrefix("refId")
;for(o=0;o<this.fixedWindowArr.length;o++){if(e((y=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var h=0;h<this.dom.nameBar.childNodes.length;h++)if(this.dom.nameBar.childNodes[h].getAttribute(a)===this.fixedWindowArr[o].id){0!=h&&this.moveNameLayer(h,0);break}}var l=this.options.sequentialArrangeRowNum,w=this.options.sequentialArrangeColNum,c=this.windows.length;this.options.fixArrangeFullScreen&&(l=(w=w>c?c:w)>c?1:l);var p=0,u=0,m=0,f=0;if("none"==this.options.positionX&&"none"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){var g=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(g.width/w,10),f=parseInt(g.height/l,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,u*f),++p==w&&(p=0,++u==l&&(u=0))}else if("left"==this.options.positionX&&"top"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){g=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(g.width/w,10),f=parseInt(g.height/l,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,u*f),++p==w&&(p=0,++u==l&&(p=1,u=0))}else if("right"==this.options.positionX&&"top"==this.options.positionY){p=w-1;for(o=this.selectedWindowHistory.length;o>0;o--){g=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(g.width/w,10),f=parseInt(g.height/l,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,u*f),p++,0==u&&p==w-1&&(u++,p=0),p==w&&(p=0,0!=u&&++u==l&&(u=0))}}else if("left"==this.options.positionX&&"bottom"==this.options.positionY){u=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){g=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(g.width/w,10),f=parseInt(g.height/l,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,u*f),u==l-1&&0==p?(p=0,u=0):++p==w&&(p=0,++u==l-1?p=1:u==l&&(u=0))}}else if("right"==this.options.positionX&&"bottom"==this.options.positionY){p=w-1,u=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){var y,v;g=(v=(y=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();m=parseInt(g.width/w,10),f=parseInt(g.height/l,10),v.restore(),v.setSize(m-(v.getSize("outerMarginWidth")-v.getSize("width")),f-(v.getSize("outerMarginHeight")-v.getSize("height"))),v.setPosition(p*m,u*f),p++,u!=l-1||p!=w-1&&p!=w||(p=0,u=0),p==w&&(p=0,u++)}}this.selectNameLayer(this.selectedWindowHistory[c-1]),this.arrangeHistory="sequential"}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.doCloseAll=function(){if(!1!==a.B.fireEvent(this,"onbeforecloseall")){for(var t=this.windows.length-1;t>=0;t--)this.options.useFixButton?("fixedWindow"==this.options.closeType&&!0===this.windows[t].isFix||"noneFixedWindow"==this.options.closeType&&!1===this.windows[t].isFix||"all"==this.options.closeType)&&(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close()):(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close());this.selectedIndex=-1}},w.prototype.doMaximizeAll=function(){for(var t=[],e=0;e<this.selectedWindowHistory.length;e++)for(var i=0;i<this.selectedWindowHistory.length;i++)if(this.selectedWindowHistory[e]==this.windows[i].id){t.push(this.windows[i]);break}for(e=0;e<t.length;e++)"maximized"!==t[e].window.windowInfo.status&&t[e].window.maximize()},w.prototype.isExistWindow=function(t){try{for(var e=0;e<this.windows.length;e++){if(t==this.windows[e].title)return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setSize=function(t,e){try{parseInt(t)<450&&(t=450),
parseInt(e)<150&&(e=150);var i=this.getSize("width"),o=this.getSize("height"),n=t/i,s=e/o;this.setStyle("width",t+"px"),this.setStyle("height",e+"px");for(var a=0;a<this.windows.length;a++){var d=this.windows[a];if(d.window.resizeParentGroup(),this.options.windowAutoResize&&"maximized"!=d.window.windowInfo.status){var h=d.window,l=h.getSize("width"),w=h.getSize("height"),c=parseInt(h.getStyle("left"),10),p=parseInt(h.getStyle("top"),10),u=Math.ceil(l*n),m=Math.ceil(w*s),f=Math.ceil(c*n),g=Math.ceil(p*s);d.window.setSize(u,m),d.window.setStyle("left",f+"px"),d.window.setStyle("top",g+"px")}this.options.useNameScroll&&(this.dom.rightScrollBtn.style.left=parseInt(this.render.offsetWidth)-20+"px")}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.checkResize=function(){try{var t=this.render?this.render.offsetWidth:null;null!=this.bWidth&&t!=this.bWidth&&this.nameLayerResize(),this.bWidth=t}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.nameLayerResize=function(t){try{var e=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2;if(!this.options.toolbarWidth){var i=this.render.offsetWidth,o=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left")),n=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(o)||(i-=o),isNaN(n)||(i-=n),i<this.dom.nameBar.scrollWidth+e?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px",this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block","allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.control.offsetLeft-this.dom.nameBar.offsetWidth+"px":this.dom.nameBar.style.left=this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth+"px"):(this.options.useNameScroll=!1,this.options.useNameContainer?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=e+"px",this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none")}if("hide"==this.options.nameScrollMode)for(var s=0;s<this.windows.length;s++){var a=this.windows[s].id,d=document.getElementById(this.id+"_nameLayer_"+a);"none"==d.style.display&&(d.style.display="block")}this.selectWindow()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.createWindowList=function(t){if(!this.windowList){var e="";e+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' class='w2windowContainer_window_list' labelCheck='true' visibleRowNum='"+this.options.windowScrollVisibleRowNum+"' useCloseButton='"+this.options.useWindowScrollButton+"'>",e+="    <w2:listRow tagName='div' style='' class='w2windowContainer_window_list_listRow' >",e+="        <w2:listColumn id='title' inputType='text' style='' class='w2windowContainer_window_list_listColumn_text'/>",e+="    </w2:listRow>",e+="</w2:list>";var i=WebSquare.xml.parse(e,!0).documentElement;this.windowList=new WebSquare.uiplugin.list(this.id+"_windows_list","",i);var o=this,n=d.D.getDataPrefix("unique_id"),s=function(t){a.B.stopPropagation(t);var e,i=a.B.getTarget(t);if(i.className.match("w2list_listColumn_close")){e=i.parentElement.getAttribute(n);for(var s="",r=0;r<o.windows.length;r++)if(o.windows[r].unique_id===e){s=o.windows[r].windowId,o.windowList.removeRow(r);break}s&&(o.windows.length<2?o.hideWindowList():o.showWindowList(!0),o.closeWindow(s))}else{if(i.className.match("w2windowContainer_window_list_listColumn_text"));else if(!i.className.match("w2windowContainer_window_list_listRow"))return void(o.dom.iconWindowList!==i&&this.render!==i&&o.hideWindowList());e=i.parentElement.getAttribute(n);for(s="",r=0;r<o.windows.length;r++)if(o.windows[r].unique_id===e){s=o.windows[r].id;break}if(!s)return void o.hideWindowList();o.listToggle=!1;var d={};d.stopToggleOnLast=o.options.stopToggleOnLast,o.clickNameLayer(s,o.options.stopMinimizeOnNameLayer,d),o.hideWindowList()}}
;this.windowList.bind("onclick",s),this.windowList.writeTo(WebSquare.getBody()),this.windowList.activate(),WebSquare.getBody().getLayerListener().addListener({component:this.windowList,fnShow:this.windowList.show,fnHide:this.windowList.hide,otherClick:s,event:{}}),this.windowList.setJSON(this.windows)}},w.prototype.showWindowList=function(t){try{this.windowList||t||this.createWindowList(),t||(this.windowList.setJSON(this.windows),WebSquare.getBody().getLayerListener().show(this.windowList.id)),this.windowList.render.style.zIndex=this.maxZIndex+2,this.windowList.options.rowHeight=this.windowList.render.firstChild.offsetHeight,this.windowList.adjustRender();var e=this.dom.iconWindowList,i=WebSquare.style.getRelativeTop(this.dom.toolBar,this.render.offsetParent),o=WebSquare.style.getAbsoluteLeft(e,this.render),n="top"===this.options.toolbarPosition?i+this.dom.iconWindowList.clientHeight+4:i-this.windowList.render.clientHeight,s=e.clientWidth+WebSquare.style.getAbsoluteLeft(e)-this.windowList.render.clientWidth,a=!this.options.useNameContainer||"right"!==this.options.controlIconPosition&&"allright"!==this.options.controlIconPosition?o:this.windows.length>this.windowList.options.visibleRowNum?s-18:s;this.windowList.setPosition(a,n),this.windowList.focus(),this.listToggle=!0}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.hideWindowList=function(){try{this.windowList&&this.windowList.id&&(WebSquare.getBody().getLayerListener().hideAll(),this.listToggle=!1)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.toggle=function(){try{this.listToggle?this.hideWindowList():this.showWindowList()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.showTooltip=function(t,e){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null);var i=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var o=s.v.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(o){var n=d.D.getGlobalFunction(o,i.scope_id),a=!0;if("function"==typeof n&&(a=n(i)),!a)return}}catch(t){r.w.printStackTrace(t)}if(this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2windowContainer_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),"block"!=this.tooltip.render.style.display){this.tooltip.setStyle("display","block"),this.tooltip.render.innerHTML=e;var h,l=WebSquare.style.getAbsoluteLeft(t)+t.offsetWidth/2;h="bottom"===this.options.toolbarPosition?WebSquare.style.getAbsoluteTop(t)-this.tooltip.render.offsetHeight:WebSquare.style.getAbsoluteTop(t)+this.tooltip.render.offsetHeight,this.tooltip.setStyle("zIndex",this.maxZIndex),this.tooltip.setStyle("left",l+"px"),this.tooltip.setStyle("top",h+"px")}})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.hideTooltip=function(){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),this.tooltip&&this.tooltip.setStyle("display","none")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setWindowSize=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",n=0;n<this.windows.length;n++){var s=this.windows[n],a=s.window;s.id==this.nowWindow&&(a.windowInfo.width=i,a.windowInfo.height=o,a.restore())}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.restoreWindowSize=function(t){try{for(var e=0;e<this.windows.length;e++){var i=this.windows[e],o=i.window;if(i.windowId==t){o.restore();break}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setWindowPosition=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",n=0;n<this.windows.length;n++){var s=this.windows[n],a=s.window;if(s.id==this.nowWindow){a.windowInfo.left=i,a.windowInfo.top=o,a.windowInfo.status="restored",a.windowInfo.minimized=!1,a.windowInfo.getInfo(a.render);break}}}catch(t){
r.w.printStackTrace(t,null,this)}},w.prototype.closeWindow=function(t){try{var e=this.getWinInfoObj(t,"windowId"),i="";i=null==e?this.nowWindow:e.id;for(var o=0;o<this.windows.length;o++){var n=this.windows[o],s=n.window;if(n.id==i){this.multiViewIdArr.length>0&&this.setSingleView(),s.close();break}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.closeOthers=function(t){try{var e,i=this.getWinInfoObj(t)||this.getWinInfoObj(t,"windowId");e=null==i?this.nowWindow:i.id;for(var o=0;o<this.windows.length;o++){var n=this.windows[o],s=n.window;n.id!=e&&s.close()}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setWindowStatusMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],n=o.window;if(e){if(o.title==e){n.setStatusMsg(t);break}}else if(o.id==this.nowWindow){n.setStatusMsg(t);break}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setWindowCustomMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],n=o.window;if(e){if(o.title==e){n.setCustomMsg(t);break}}else if(o.id==this.nowWindow){n.setCustomMsg(t);break}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setAllWindowStatusMsg=function(t){try{for(var e=0;e<this.windows.length;e++){this.windows[e].window.setStatusMsg(t)}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getWindow=function(t){try{var e=s.v.getConfiguration("/WebSquare/windowContainer/getWindow/@searchTarget")||"title",i="title"===e;return this.getWindowByTarget(t,e,{focus:i})}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getFrame=function(t){try{return this.getWindowByTarget(t,"windowId",{focus:!1,frame:!0})}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._getCurrentFrame=function(){return this.getWindowByTarget(this.getSelectedWindowId(),"windowId",{focus:!1,frame:!0})},w.prototype.getWindowByWindowId=function(t,e){try{return this.getWindowByTarget(t,"windowId",{focus:e})}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getWindowByTarget=function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=d.D.getBoolean(i.focus),n=0;n<this.windows.length;n++){var s=this.windows[n];if(t==s[e]){if(1==o&&(this.beforeWindow=this.nowWindow,this.nowWindow=s.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var h=this.getWinInfoObj(this.beforeWindow).windowId,l=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",h,l)}return!0===i.frame?s.window.frame:s.window.frame.getWindow()}}return null}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getWindowByUniqueId=function(t,e){try{e=d.D.getBoolean(e);for(var i=0;i<this.windows.length;i++){var o=this.windows[i];if(t==o.id){if(1==e&&(this.beforeWindow=this.nowWindow,this.nowWindow=o.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var n=this.getWinInfoObj(this.beforeWindow).windowId,s=this.getWinInfoObj(this.nowWindow).windowId;a.B.fireEvent(this,"onwindowchange",n,s)}return o.window.frame.getWindow()}}return null}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getUniqueIdByTitle=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.title&&e.push(o.id)}return e}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getUniqueIdByWindowId=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.windowId&&e.push(o.id)}return e}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.showModal=function(){try{this.modal||(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",this.render.appendChild(this.modal)),this.modal&&(this.modal.style.display="block",this.modal.style.zIndex=this.maxZIndex-1)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.hideModal=function(){try{this.modal&&(this.modal.style.display="none")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.moveNameLayerScroll=function(t){try{if(this.options.changeActiveWindow){var e=this.selectedIndex
;if("right"==t&&e>=0&&e<this.windows.length-1?e++:"left"==t&&e>0&&e<=this.windows.length-1&&e--,e!=this.selectedIndex){var i=this.windows[e].id,o={};o.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(i,this.options.stopMinimizeOnNameLayer,o)}}else if("hide"==this.options.nameScrollMode){for(var n=0,s=0;s<this.windows.length;s++){var a=this.windows[s].id,d=document.getElementById(this.id+"_nameLayer_"+a),h=WebSquare.style.getStyle(d,"margin-left");h="auto"===h?"0":h;var l=WebSquare.style.getStyle(d,"margin-right");l="auto"===l?"0":l;var w=d.offsetWidth+parseInt(h,10)+parseInt(l,10);"none"!=d.style.display&&(n+=w)}if("right"==t){if(this.dom.nameBar.offsetWidth>n)return;for(s=0;s<this.windows.length;s++){a=this.windows[s].id;if("none"!=(d=document.getElementById(this.id+"_nameLayer_"+a)).style.display&&s!=this.windows.length-1){d.style.display="none";break}}}else for(s=this.windows.length-1;s>=0;s--){a=this.windows[s].id;if("none"==(d=document.getElementById(this.id+"_nameLayer_"+a)).style.display){d.style.display="block";break}}}else{var c=parseInt(this.options.nameLayerMoveGap,10)||110;if("right"==t){var p="";p="allright"===this.options.controlIconPosition?this.dom.nameContainer.offsetWidth-this.dom.nameBar.offsetWidth:this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth,parseInt(this.dom.nameBar.style.left)-c<p?this.dom.nameBar.style.left=p+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-c+"px"}else if(this.options.useNameContainer)parseInt(this.dom.nameBar.style.left)+c>this.dom.leftScrollBtn.offsetWidth?"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft+"px":this.dom.nameBar.style.left=this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+c+"px";else{var u=this.options.nameLayerMenu?0:this.dom.control.offsetWidth;parseInt(this.dom.nameBar.style.left)+c>u+this.dom.leftScrollBtn.offsetWidth?this.dom.nameBar.style.left=u+this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+c+"px"}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setFocus=function(t){try{var e=t;if("string"==typeof t){for(var i=0;i<this.windows.length;i++)this.windows[i].windowId===t&&this.selectNameLayer(this.windows[i].id);return}if(!this.windows[e])return;this.windows[e].id!==this.nowWindow&&this.selectNameLayer(this.windows[e].id)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getSelectedIndex=function(){return this.selectedIndex},w.prototype.getSelectedWindowId=function(){return this.windows[this.selectedIndex].windowId},w.prototype.refreshSelectedIndex=function(t){try{for(var e=t||this.nowWindow,i=0;i<this.windows.length;i++){this.windows[i].id==e&&(this.selectedIndex=i)}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.handleClickEvent=function(t){try{for(var e=d.D.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2windowContainer_controlIcon_customIcon"))return void a.B.fireEvent(this,"oncustomcontrolclick",i.getElement().id);if(i.match("w2windowContainer_controlIcon_vertical")&&(this.options.useFixButton&&this.options.verticalArrangeNum>0?this.doVerticalFixArrange():this.doVerticalArrange(),a.B.fireEvent(this,"onverticalarrange")),i.match("w2windowContainer_controlIcon_horizontal")&&(this.options.useFixButton&&this.options.horizontalArrangeNum>0?this.doHorizontalFixArrange():this.doHorizontalArrange(),a.B.fireEvent(this,"onhorizontalarrange")),i.match("w2windowContainer_controlIcon_cascade")&&(this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),a.B.fireEvent(this,"oncascadearrange")),i.match("w2windowContainer_controlIcon_sequential")&&(this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),a.B.fireEvent(this,"onsequentialarrange")),
i.match("w2windowContainer_controlIcon_closeAll")&&this.doCloseAll(),i.match("w2windowContainer_controlIcon_maximize")){var o=this.getSelectedIndex();if(o>-1&&o<this.windows.length){var n=this.windows[o];"maximized"==n.window.windowInfo.status?(n.window.toggleResize(),a.B.fireEvent(this,"onselectedrestore")):(a.B.fireEvent(this,"onselectedmaximize"),1==this.options.windowMaximizeAll?this.doMaximizeAll():n.window.toggleResize())}}if(i.match("w2windowContainer_controlIcon_closeOthers")&&this.closeOthers(),i.match("w2windowContainer_controlIcon_windowList")&&this.windows.length>0&&this.toggle(),i.match("w2windowContainer_nameLayer")){var s=i.getElement().getAttribute(e),h={};h.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(s,this.options.stopMinimizeOnNameLayer,h)}if(i.match("w2windowContainer_nameLayer_close")){s=i.getElement().getAttribute(e);return void(w=this.getWinInfoObj(s)).window.close()}if(i.match("w2windowContainer_nameLayer_close_custom")){s=i.getElement().getAttribute(e);return void(w=this.getWinInfoObj(s)).window.close()}if(i.match("w2windowContainer_nameLayer_fixOff")){s=i.getElement().getAttribute(e);if((w=this.getWinInfoObj(s)).isFix=!w.isFix,null!==w.userIconClass&&null==w.userIconPosition&&(w.userIconPosition="right"),w.isFix)null==w.userIconClass||null!=w.userIconClass&&"right"==w.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn w2windowContainer_nameLayer_firstButtonFromLeft":null!=w.userIconClass&&"left"==w.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn w2windowContainer_nameLayer_secondButtonFromLeft"),this.fixedWindowArr.push(w);else{null==w.userIconClass||null!=w.userIconClass&&"right"==w.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_firstButtonFromLeft":null!=w.userIconClass&&"left"==w.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_secondButtonFromLeft");for(var l=0;l<this.fixedWindowArr.length;l++)if(this.fixedWindowArr[l].id==w.id){this.fixedWindowArr.splice(l,1);break}}return}if(i.match("w2windowContainer_nameLayer_fixOff_custom")){var w;s=i.getElement().getAttribute(e);if((w=this.getWinInfoObj(s)).isFix=!w.isFix,w.isFix)i.getElement().className="w2windowContainer_nameLayer_fixOff_custom w2windowContainer_nameLayer_fixOn",this.fixedWindowArr.push(w);else{i.getElement().className="w2windowContainer_nameLayer_fixOff_custom";for(l=0;l<this.fixedWindowArr.length;l++)if(this.fixedWindowArr[l].id==w.id){this.fixedWindowArr.splice(l,1);break}}return}if(i.match("w2windowContainer_nameLayer_menu"))return;if(i.match("w2windowContainer_nameLayer_menu_custom"))return;i.match("w2window")&&this.selectNameLayer(i.getElement().id),i.match("w2window_restore")&&1==this.options.windowMaximizeAll&&this.doMaximizeAll(),i.match("w2windowContainer_scrollLeftBtn")&&this.moveNameLayerScroll("left"),i.match("w2windowContainer_scrollRightBtn")&&this.moveNameLayerScroll("right")}i=null}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.handleDblClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2window_header")){var i=this.getSelectedIndex();if(i>-1&&i<this.windows.length){var o=this.windows[i];o.windowTitle==e.element.title&&("maximized"==o.window.windowInfo.status?(o.window.toggleResize(),a.B.fireEvent(this,"onselectedrestore")):(a.B.fireEvent(this,"onselectedmaximize"),o.window.toggleResize()))}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.handleMouseOverEvent=function(t){try{a.B.stopEvent(t);for(var e=d.D.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2windowContainer_nameLayer")){for(var o=i.getElement(),n=i.getElement().getAttribute(e),s="",h=0;h<this.windows.length;h++){var l=this.windows[h];if(n==l.id){s=l.tooltip;break}}
-1==i.getElement().id.indexOf(this.nowWindow)&&this.addClass(o,"w2windowContainer_selectedNameLayer"),this.options.tooltipDisplay&&this.showTooltip(o,s)}else{if(i.match("w2windowContainer_controlIcon_customIcon"))return void a.B.fireEvent(this,"oncustomcontrolover",i.getElement().id);i.match("w2windowContainer_controlIcon_vertical")?this.addClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):i.match("w2windowContainer_controlIcon_horizontal")?this.addClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):i.match("w2windowContainer_controlIcon_cascade")?this.addClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):i.match("w2windowContainer_controlIcon_sequential")?this.addClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):i.match("w2windowContainer_controlIcon_closeAll")?this.addClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):i.match("w2windowContainer_controlIcon_maximize")?this.addClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):i.match("w2windowContainer_controlIcon_closeOthers")?this.addClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):i.match("w2windowContainer_controlIcon_windowList")?this.addClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):i.match("w2windowContainer_scrollLeftBtn")?this.addClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):i.match("w2windowContainer_scrollRightBtn")&&this.addClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}i=null}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.handleMouseOutEvent=function(t){try{a.B.stopEvent(t),this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2windowContainer_nameLayer"))-1==e.getElement().id.indexOf(this.nowWindow)&&this.removeClass(e.getElement(),"w2windowContainer_selectedNameLayer");else{if(e.match("w2windowContainer_controlIcon_customIcon"))return void a.B.fireEvent(this,"oncustomcontrolout",e.getElement().id);e.match("w2windowContainer_controlIcon_vertical")?this.removeClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):e.match("w2windowContainer_controlIcon_horizontal")?this.removeClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):e.match("w2windowContainer_controlIcon_cascade")?this.removeClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):e.match("w2windowContainer_controlIcon_sequential")?this.removeClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):e.match("w2windowContainer_controlIcon_closeAll")?this.removeClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):e.match("w2windowContainer_controlIcon_showWindows")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_showWindows_over"):e.match("w2windowContainer_controlIcon_windowList")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):e.match("w2windowContainer_controlIcon_maximize")?this.removeClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):e.match("w2windowContainer_controlIcon_closeOthers")?this.removeClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):e.match("w2windowContainer_scrollLeftBtn")?this.removeClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):e.match("w2windowContainer_scrollRightBtn")&&this.removeClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}e=null}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.handleDragStartEvent=function(){try{this.showModal()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.handleDragEndEvent=function(){try{this.hideModal()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.finalize=function(){try{l.s.removeCheckResize(this.uuid)
;for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=d.D.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.createMenu=function(){try{"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>","        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>","    </w2:listRow>","</w2:list>";var t=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>    </w2:listRow></w2:list>",!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",t),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate(),WebSquare.getBody().getLayerListener().addListener({component:this.contextMenu,fnShow:this.contextMenu.show,fnHide:this.contextMenu.hide});var e=[];e.push({col1:"화면 닫기"}),e.push({col1:"듀얼 모니터로 보기"}),e.push({col1:"멀티 뷰로 보기"}),e.push({col1:"공유하기"}),this.contextMenu.setJSON(e),WebSquare.getBody().getLayerListener().hide(this.contextMenu.id);var i=this.id;this.contextMenu.bind("onmousedown",(function(t){a.B.stopPropagation(t)})),this.contextMenu.bind("onrowclick",(function(t){var e=d.D.getComponentById(i),o=this.getRowData(t);a.B.fireEvent(e,"onmenuclick",this._refId,o.col1,o),WebSquare.getBody().getLayerListener().hide(this.id),this._refId=""}))}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.toggleContextMenu=function(t,e,i){try{var o=this.getWinInfoObj(t);t="";o&&(t=o.windowId,this.contextMenu._refId=t),a.B.fireEvent(this,"onmenuopen",t),this.contextMenu||this.createMenu(),WebSquare.getBody().getLayerListener().isShow(this.contextMenu.id)?WebSquare.getBody().getLayerListener().hide(this.contextMenu.id):WebSquare.getBody().getLayerListener().show(this.contextMenu.id),this.contextMenu.setPosition(e,i-this.contextMenu.getSize("height"))}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.hideContextMenu=function(){try{WebSquare.getBody().getLayerListener().hide(this.contextMenu.id)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setMenu=function(t,e){try{this.contextMenu||this.createMenu();for(var i=[],o=0;o<t.length;o++)i.push({col1:t[o]});this.contextMenu.setJSON(i),null!=e&&this.contextMenu.setSize("height",e)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setMultiView=function(t,e){try{var i=this.getWinInfoObj(this.nowWindow),o=this.getWinInfoObj(t,"windowId");if(!i||!o||o.windowId===i.windowId)return;var n=Number(e);isNaN(n)&&(e=0);for(var s=0;s<this.windows.length;s++)this.windows[s].windowId!==t&&this.windows[s].id!==this.nowWindow&&(this.windows[s].window.minimize(!0),WebSquare.style.hide(document.getElementById(this.id+"_nameLayer_"+this.windows[s].id)));this.multiViewIdArr=[o.id,this.nowWindow];var a=o.window,d=i.window;if(a._multiViewUUID=d.uuid,d._multiViewUUID=a.uuid,a._direction=e,d._direction=e,1===e){var h=a.resizeParentGroup(),l=parseInt(h.width,10),w=parseInt(h.height/2,10);a.restore(),a.setSize(l-(a.getSize("outerMarginWidth")-a.getSize("width")),w-(a.getSize("outerMarginHeight")-a.getSize("height"))),a.setPosition(0,w);h=d.resizeParentGroup();var c=parseInt(h.width,10),p=parseInt(h.height/2,10);d.restore(),d.setSize(c-(d.getSize("outerMarginWidth")-d.getSize("width")),p-(d.getSize("outerMarginHeight")-d.getSize("height"))),d.setPosition(0,0)}else{h=a.resizeParentGroup(),
l=parseInt(h.width/2,10),w=parseInt(h.height,10);a.restore(),a.setSize(l-(a.getSize("outerMarginWidth")-a.getSize("width")),w-(a.getSize("outerMarginHeight")-a.getSize("height"))),a.setPosition(l,0);h=d.resizeParentGroup(),c=parseInt(h.width/2,10),p=parseInt(h.height,10);d.restore(),d.setSize(c-(d.getSize("outerMarginWidth")-d.getSize("width")),p-(d.getSize("outerMarginHeight")-d.getSize("height"))),d.setPosition(0,0)}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setSingleView=function(t){try{for(var e=0;e<this.windows.length;e++)WebSquare.style.show(document.getElementById(this.id+"_nameLayer_"+this.windows[e].id));this.multiViewIdArr=[];for(e=0;e<this.windows.length;e++)this.windows[e].window.restore(),this.windows[e].window.maximize(),this.windows[e].window.setPosition(0,0),this.windows[e].window._multiViewUUID="",this.windows[e].window._direction=0;var i=this.getWinInfoObj(t,"windowId");i&&this.selectNameLayer(i.id)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.isMultiView=function(){return this.multiViewIdArr.length>0},w.prototype.handleNameLayerMove=function(t){try{if(!this.options.nameLayerMove&&!this.options.nameLayerMenu)return;for(var e=d.D.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();){if(this.options.nameLayerMenu&&i.match("w2windowContainer_nameLayer_menu")){a.B.stopEvent(t);var o=i.getElement(),n=o.getAttribute(e);this.toggleContextMenu(n,WebSquare.style.getAbsoluteLeft(o.parentNode),WebSquare.style.getAbsoluteTop(o.parentNode)),i.stop()}if(this.options.nameLayerMove&&i.match("w2windowContainer_nameLayer")){var s=-1,h=i.getElement();if(!h)return;for(var l=0;l<this.windows.length;l++)if(this.windows[l].id===h.getAttribute(e)){s=l;break}if(isNaN(s)||s<0)return;a.B.preventDefault(t);var w=this.uuid;this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,WebSquare.dragdrop.gDragManager.activate(t,h,{id:this.id+"_ghostLayer_nameLayerMove",className:"w2windowContainer_drag_nameLayerMove",dragoverClass:"w2windowContainer_nameLayer",dropClass:"w2windowContainer_nameLayer",delay:15,makeGhostLayer:function(t){return t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t},handleStart:function(t){var e=s,i=WebSquare.idCache[w],o=$(i.dom.nameBar.childNodes[e]);this.nameLayerMove_left=o.css("left"),this.dragOverNameLayer={},this.dropIndex=-1,this.nameLayerMove_zIndex=o.css("zIndex");var n=Number(this.nameLayerMove_zIndex);if(this.nameLayerMove_zIndex_Array=[],isNaN(n)||n<=0)for(var r=0;r<i.dom.nameBar.childNodes.length;r++){var a=$(i.dom.nameBar.childNodes[r]);this.nameLayerMove_zIndex_Array.push(a.css("zIndex")),r===e?a.css("zIndex",4):a.css("zIndex",5)}else o.css("zIndex",n-1)},onDrop:function(t,e,i,o,n,r,a){var d=s,h=WebSquare.idCache[w],l=$(h.dom.nameBar.childNodes[d]);if(l.css("left",this.nameLayerMove_left),this.nameLayerMove_zIndex_Array.length>0)for(var c=0;c<h.dom.nameBar.childNodes.length;c++)$(h.dom.nameBar.childNodes[c]).css("zIndex",this.nameLayerMove_zIndex_Array[c]);else l.css("zIndex",this.nameLayerMove_zIndex);for(var p in this.dragOverNameLayer)$(h.dom.nameBar.childNodes[p]).css("left",this.dragOverNameLayer[p]);h.moveNameLayer(d,this.dropIndex),this.nameLayerMove_left="",this.nameLayerMove_zIndex="",this.dragOverNameLayer={},this.nameLayerMove_zIndex_Array=[]},onDragover:function(t,e,i,o,n,r,a){for(var d=s,h=-1,l=WebSquare.idCache[w],c=0;c<l.dom.nameBar.childNodes.length;c++)if(l.dom.nameBar.childNodes[c]===e){h=c;break}var p=$(l.dom.nameBar.childNodes[d]);if(p.css("left",n/l._zoomLevel),null!=l.dom.nameBar.childNodes[h]&&h!==d){var u=$(l.dom.nameBar.childNodes[h]);null==this.dragOverNameLayer[h]?(this.dragOverNameLayer[h]=u.css("left"),d>h?u.css("left",p.width()):u.css("left",-1*p.width()),this.dropIndex=h):(u.css("left",this.dragOverNameLayer[h]),this.dragOverNameLayer[h]=null,delete this.dragOverNameLayer[h],this.dropIndex=d>h?h+1:h-1)}}}),i.stop()}}i=null
}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.moveNameLayer=function(t,e){try{if(t===e||t<0||e<0)return;var i,o;i=this.getRealWindowPosition(t),o=this.getRealWindowPosition(e);var n=this.windows[i].windowId,s=this.windows[o].windowId;if(!1===a.B.fireEvent(this,"onbeforenamelayermove",{startWindowID:n,startIndex:t,endWindowID:s,endIndex:e}))return;var d=t>e?0:1;e<this.windows.length-1?this.dom.nameBar.insertBefore(this.dom.nameBar.childNodes[t],this.dom.nameBar.childNodes[e+d]):this.dom.nameBar.appendChild(this.dom.nameBar.childNodes[t]);!function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])}(this.windows,i,o);for(var h=0;h<this.windows.length;h++)if(this.nowWindow===this.windows[h].id){this.selectedIndex=h;break}a.B.fireEvent(this,"onafternamelayermove",{startWindowID:n,startIndex:t,endWindowID:s,endIndex:e})}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setControlIconFormatter=function(){var t=[],e=d.D.getGlobalFunction(this.options.controlIconFormatter,this.scope_id);if(!this.options.nameLayerMenu&&"function"==typeof e){if(this.controlIconFormatter=e,this.useControlIconFormatter=!0,this.controlIcons=this.controlIconFormatter?this.controlIconFormatter.call(this):this.options.controlIcons,this.options.useControlIconTitle)for(var i=0,o=this.controlIcons.length;i<o;i++){this.controlIcons[i].useTitle=!0}for(i=0,o=this.controlIcons.length;i<o;i++){var n=this.controlIcons[i],s=n.isCustom?n.className+" w2windowContainer_controlIcon_customIcon":n.className,r=n.useTitle?"title='"+WebSquare.language.getMessage("WindowContainer_controlIcon_"+n.id)+"'":"";t.push("<span id='"+this.id+"_"+n.id+"' class='"+s+"'"+r+"></span>")}var a,h=this.dom.control;"allright"===this.options.controlIconPosition?(h=this.getElementById(this.id+"_controlIconDiv")).innerHTML=t.join(""):this.dom.control.innerHTML=t.join("");for(i=0,o=this.controlIcons.length;i<o;i++){var l=this.controlIcons[i],w=document.getElementById(this.id+"_"+l.id),c=l.id.substring(0,1).toUpperCase()+l.id.substring(1,l.id.length);!1===l.isCustom&&(this.dom["icon"+c]=w)}if("allright"===this.options.controlIconPosition){a=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(a,h)+a.offsetWidth+"px";for(var p=50,u=0;u<h.childNodes.length;u++)WebSquare.style.setStyle(h.childNodes[u],"left",p+"px"),p+=25;var m=25*h.childNodes.length+55,f=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right",f+"px")}else if("right"===this.options.controlIconPosition){a=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(a,h)+a.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px");for(p=0,u=0;u<h.childNodes.length;u++)WebSquare.style.setStyle(h.childNodes[u],"left",p+"px"),p+=25}else{a=h.childNodes[this.dom.control.childNodes.length-1],this.dom.control.style.width=WebSquare.style.getRelativeLeft(a,this.dom.control)+a.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"left",m+"px");for(p=0,u=0;u<h.childNodes.length;u++)WebSquare.style.setStyle(h.childNodes[u],"left",p+"px"),p+=25}this.createNameLayer(),this.selectWindow()}},w.prototype.setArrangeWindows=function(t,e){try{switch(t){case"vertical":this.options.useFixButton&&this.options.verticalArrangeNum>0&&!e?this.doVerticalFixArrange():this.doVerticalArrange(e),a.B.fireEvent(this,"onverticalarrange");break;case"horizontal":this.options.useFixButton&&this.options.horizontalArrangeNum>0&&!e?this.doHorizontalFixArrange():this.doHorizontalArrange(e),a.B.fireEvent(this,"onhorizontalarrange");break;case"cascade":this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),a.B.fireEvent(this,"oncascadearrange")
;break;case"sequential":this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),a.B.fireEvent(this,"onsequentialarrange")}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getRealWindowPosition=function(t){try{t>=this.dom.nameBar.childNodes.length&&(t=this.dom.nameBar.childNodes.length-1);for(var e=d.D.getDataPrefix("windowtitle"),i=WebSquare.util.getDataPrefix("refId"),o=(this.dom.nameBar.childNodes[t].getAttribute(e),this.dom.nameBar.childNodes[t].getAttribute(i)),n=0;n<this.windows.length;n++)if(o==this.windows[n].id)return n;return}catch(t){r.w.printStackTrace(t,null,this)}}}}]);